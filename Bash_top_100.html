<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Bash_top_100.md – Bash &lt;- StackOverflow top 100</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #232629;
        color: #7a7c7d;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
    div.sourceCode
      { color: #cfcfc2; background-color: #232629; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #cfcfc2; } /* Normal */
    code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
    code span.an { color: #3f8058; } /* Annotation */
    code span.at { color: #2980b9; } /* Attribute */
    code span.bn { color: #f67400; } /* BaseN */
    code span.bu { color: #7f8c8d; } /* BuiltIn */
    code span.cf { color: #fdbc4b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #3daee9; } /* Char */
    code span.cn { color: #27aeae; font-weight: bold; } /* Constant */
    code span.co { color: #7a7c7d; } /* Comment */
    code span.cv { color: #7f8c8d; } /* CommentVar */
    code span.do { color: #a43340; } /* Documentation */
    code span.dt { color: #2980b9; } /* DataType */
    code span.dv { color: #f67400; } /* DecVal */
    code span.er { color: #da4453; text-decoration: underline; } /* Error */
    code span.ex { color: #0099ff; font-weight: bold; } /* Extension */
    code span.fl { color: #f67400; } /* Float */
    code span.fu { color: #8e44ad; } /* Function */
    code span.im { color: #27ae60; } /* Import */
    code span.in { color: #c45b00; } /* Information */
    code span.kw { color: #cfcfc2; font-weight: bold; } /* Keyword */
    code span.op { color: #cfcfc2; } /* Operator */
    code span.ot { color: #27ae60; } /* Other */
    code span.pp { color: #27ae60; } /* Preprocessor */
    code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #da4453; } /* SpecialString */
    code span.st { color: #f44f4f; } /* String */
    code span.va { color: #27aeae; } /* Variable */
    code span.vs { color: #da4453; } /* VerbatimString */
    code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href="../wiki_html/Css/include.css" />
  <script type="text/javascript" src="https://raw.githubusercontent.com/tinmarino/wiki_html/master/Css/js_masonry_desandro.js"></script>
  <p><link rel="stylesheet" href="https://raw.githubusercontent.com/tinmarino/wiki_html/master/Css/color_dark_solarized.css"> <link rel="stylesheet" href="https://raw.githubusercontent.com/tinmarino/wiki_html/master/Css/layout_toc.css"></p>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Bash &lt;- StackOverflow top 100</h1>
</header>
<section class="level2">
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
<section id="how-to-concatenate-string-variables-in-bash-score-3365295-in-2018" class="level3">
<h3>1: How to concatenate string variables in Bash (score <a href="https://stackoverflow.com/q/4181703.html">3365295</a> in 2018)</h3>
<section id="question" class="level4">
<h4>Question</h4>
<p>In PHP, strings are concatenated together as follows:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="va">$foo</span> = <span class="st">&quot;Hello&quot;</span>;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="va">$foo</span> <span class="ex">.</span>= <span class="st">&quot; World&quot;</span><span class="kw">;</span></span></code></pre></div>
<p>Here, <code>$foo</code> becomes “Hello World”.</p>
<p>How is this accomplished in Bash?</p>
</section>
<section id="answer-accepted-score-3477" class="level4">
<h4>Answer accepted (score 3477)</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;Hello&quot;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;</span><span class="va">${foo}</span><span class="st"> World&quot;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${foo}</span><span class="st">&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="op">&gt;</span> <span class="ex">Hello</span> World</span></code></pre></div>
<p>In general to concatenate two variables you can just write them one after another:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="va">a=</span><span class="st">&#39;Hello&#39;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="va">b=</span><span class="st">&#39;World&#39;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="va">c=</span><span class="st">&quot;</span><span class="va">${a}</span><span class="st"> </span><span class="va">${b}</span><span class="st">&quot;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${c}</span><span class="st">&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a><span class="op">&gt;</span> <span class="ex">Hello</span> World</span></code></pre></div>
</section>
<section id="answer-2-score-1067" class="level4">
<h4>Answer 2 (score 1067)</h4>
<p>Bash also supports a <code>+=</code> operator as shown in this code:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>$ <span class="va">A=</span><span class="st">&quot;X Y&quot;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>$ <span class="va">A+=</span><span class="st">&quot; Z&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$A</span><span class="st">&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a><span class="ex">X</span> Y Z</span></code></pre></div>
</section>
<section id="answer-3-score-917" class="level4">
<h4>Answer 3 (score 917)</h4>
<h5>
Bash first
</h1>
<p>As this question stand specifically for <a href="http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" rel="noreferrer">Bash</a>, my first part of the answer would present different ways of doing this properly:</p>
<h5>
<code>+=</code>: Append to variable
</h2>
<p>The syntax <strong><code>+=</code></strong> may be used in different ways:</p>
<h5>
Append to string <code>var+=...</code>
</h3>
<p>(Because I am frugal, I will only use two variables <code>foo</code> and <code>a</code> and then re-use the same in the whole answer. ;-)</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a><span class="va">a=</span>2</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a><span class="va">a+=</span>4</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$a</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true"></a><span class="ex">24</span></span></code></pre></div>
<p>Using the <em>Stack Overflow question</em> syntax,</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;Hello&quot;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="va">foo+=</span><span class="st">&quot; World&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$foo</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true"></a><span class="ex">Hello</span> World</span></code></pre></div>
<p>works fine!</p>
<h5>
Append to an integer <code>((var+=...))</code>
</h3>
<p>variable <code>a</code> is a string, but also an integer</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$a</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="ex">24</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a><span class="kw">((</span>a+=12<span class="kw">))</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$a</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a><span class="ex">36</span></span></code></pre></div>
<h5>
Append to an array <code>var+=(...)</code>
</h3>
<p>Our <code>a</code> is also an array of only one element.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">${a[@]}</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a><span class="ex">36</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="va">a+=(</span>18<span class="va">)</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">${a[@]}</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a><span class="ex">36</span> 18</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">${a[0]}</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a><span class="ex">36</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">${a[1]}</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true"></a><span class="ex">18</span></span></code></pre></div>
<p>Note that between parentheses, there is a <em>space separated array</em>. If you want to store a string containing spaces in your array, you have to enclose them:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="va">a+=(</span>one word <span class="st">&quot;hello world!&quot;</span> <span class="va">)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a><span class="ex">bash</span>: !<span class="st">&quot;: event not found</span></span></code></pre></div>
<p>Hmm.. <a href="https://serverfault.com/a/208266/142978">this is not a bug, but a feature</a>… To prevent bash to try to develop <code>!"</code>, you could:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="va">a+=(</span>one word <span class="st">&quot;hello world&quot;</span>! <span class="st">&#39;hello world!&#39;</span> <span class="st">$&#39;hello world</span><span class="dt">\041</span><span class="st">&#39;</span><span class="va">)</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a><span class="bu">declare</span> -p <span class="va">a</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a><span class="bu">declare</span> -a <span class="va">a=</span><span class="st">&#39;([0]=&quot;36&quot; [1]=&quot;18&quot; [2]=&quot;one&quot; [3]=&quot;word&quot; [4]=&quot;hello world!&quot; [5]=&quot;h</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a><span class="st">ello world!&quot; [6]=&quot;hello world!&quot;)&#39;</span></span></code></pre></div>
<h5>
<code>printf</code>: Re-construct variable using the <em>builtin</em> command
</h2>
<p>The <code>printf</code> <em>builtin</em> command gives a powerful way of drawing string format. As this is a Bash <em>builtin</em>, there is a option for sending formatted string to a variable instead of printing on <code>stdout</code>:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">${a[@]}</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a><span class="ex">36</span> 18 one word hello world! hello world! hello world!</span></code></pre></div>
<p>There are seven <em>strings</em> in this array. So we could build a formatted string containing exactly seven positional arguments:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="bu">printf</span> -v a <span class="st">&quot;%s./.%s...&#39;%s&#39; &#39;%s&#39;, &#39;%s&#39;==&#39;%s&#39;==&#39;%s&#39;&quot;</span> <span class="st">&quot;</span><span class="va">${a[@]}</span><span class="st">&quot;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$a</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true"></a><span class="ex">36./.18...</span><span class="st">&#39;one&#39;</span> <span class="st">&#39;word&#39;</span>, <span class="st">&#39;hello world!&#39;</span>==<span class="st">&#39;hello world!&#39;</span>==<span class="st">&#39;hello world!&#39;</span></span></code></pre></div>
<p>Or we could use <em>one argument format string</em> which will be repeated as many argument submitted…</p>
<p>Note that our <code>a</code> is still an array! Only first element is changed!</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a><span class="bu">declare</span> -p <span class="va">a</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a><span class="bu">declare</span> -a <span class="va">a=</span><span class="st">&#39;([0]=&quot;36./.18...&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;one&#39;</span><span class="dt">\&#39;</span><span class="st">&#39; &#39;</span><span class="dt">\&#39;</span><span class="st">&#39;word&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;, &#39;</span><span class="dt">\&#39;</span><span class="st">&#39;hello world!&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;==&#39;</span><span class="kw">\</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true"></a><span class="st">&#39;&#39;</span><span class="ex">hello</span> world!<span class="st">&#39;\&#39;&#39;==&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;hello world!&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;&quot; [1]=&quot;18&quot; [2]=&quot;one&quot; [3]=&quot;word&quot; [4]=&quot;hel</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true"></a><span class="st">lo world!&quot; [5]=&quot;hello world!&quot; [6]=&quot;hello world!&quot;)&#39;</span></span></code></pre></div>
<p>Under bash, when you access a variable name without specifying index, you always address first element only!</p>
<p>So to retrieve our seven field array, we only need to re-set 1st element:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="va">a=</span>36</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a><span class="bu">declare</span> -p <span class="va">a</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a><span class="bu">declare</span> -a <span class="va">a=</span><span class="st">&#39;([0]=&quot;36&quot; [1]=&quot;18&quot; [2]=&quot;one&quot; [3]=&quot;word&quot; [4]=&quot;hello world!&quot; [5]=&quot;he</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true"></a><span class="st">llo world!&quot; [6]=&quot;hello world!&quot;)&#39;</span></span></code></pre></div>
<p>One argument format string with many argument passed to:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a><span class="bu">printf</span> -v a[0] <span class="st">&#39;&lt;%s&gt;\n&#39;</span> <span class="st">&quot;</span><span class="va">${a[@]}</span><span class="st">&quot;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a><span class="op">&lt;36&gt;</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a><span class="op">&lt;18&gt;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">one</span><span class="op">&gt;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">word</span><span class="op">&gt;</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">hello</span> world!<span class="op">&gt;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">hello</span> world!<span class="op">&gt;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">hello</span> world!<span class="op">&gt;</span></span></code></pre></div>
<h5>
Using the <em>Stack Overflow question</em> syntax:
</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;Hello&quot;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a><span class="bu">printf</span> -v foo <span class="st">&quot;%s World&quot;</span> <span class="va">$foo</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$foo</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true"></a><span class="ex">Hello</span> World</span></code></pre></div>
<p>Nota: The use of <em>double-quotes</em> may be useful for manipulating strings that contain <code>spaces</code>, <code>tabulations</code> and/or <code>newlines</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a><span class="bu">printf</span> -v foo <span class="st">&quot;%s World&quot;</span> <span class="st">&quot;</span><span class="va">$foo</span><span class="st">&quot;</span></span></code></pre></div>
<h5>
Shell now
</h1>
<p>Under <em>POSIX</em> shell, you could not use <em>bashisms</em>, so there is no <em>builtin</em> <code>printf</code>.</p>
<h5>
Basically
</h3>
<p>But you could simply do:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;Hello&quot;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;</span><span class="va">$foo</span><span class="st"> World&quot;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$foo</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true"></a><span class="ex">Hello</span> World</span></code></pre></div>
<h5>
Formatted, using <em>forked</em> <code>printf</code>
</h3>
<p>If you want to use more sophisticated constructions you have to use a <em>fork</em> (new child process that make the job and return the result via <code>stdout</code>):</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;Hello&quot;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a><span class="va">foo=$(</span><span class="bu">printf</span> <span class="st">&quot;%s World&quot;</span> <span class="st">&quot;</span><span class="va">$foo</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$foo</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a><span class="ex">Hello</span> World</span></code></pre></div>
<p>Historically, you could use <em>backticks</em> for retrieving result of a <em>fork</em>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;Hello&quot;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a><span class="va">foo=</span><span class="kw">`</span><span class="bu">printf</span> <span class="st">&quot;%s World&quot;</span> <span class="st">&quot;</span><span class="va">$foo</span><span class="st">&quot;</span><span class="kw">`</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$foo</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a><span class="ex">Hello</span> World</span></code></pre></div>
<p>But this is not easy for <em>nesting</em>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;Today is: &quot;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a><span class="va">foo=$(</span><span class="bu">printf</span> <span class="st">&quot;%s %s&quot;</span> <span class="st">&quot;</span><span class="va">$foo</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$foo</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true"></a><span class="ex">Today</span> is: Sun Aug 4 11:58:23 CEST 2013</span></code></pre></div>
<p>with backticks, you have to escape inner forks with <em>backslashes</em>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a><span class="va">foo=</span><span class="st">&quot;Today is: &quot;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true"></a><span class="va">foo=</span><span class="kw">`</span><span class="bu">printf</span> <span class="st">&quot;%s %s&quot;</span> <span class="st">&quot;</span><span class="va">$foo</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="dt">\`</span><span class="st">date</span><span class="dt">\`</span><span class="st">&quot;</span><span class="kw">`</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$foo</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true"></a><span class="ex">Today</span> is: Sun Aug 4 11:59:10 CEST 2013</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-tell-if-a-regular-file-does-not-exist-in-bash-score-2390567-in-2017" class="level3">
<h3>2: How do I tell if a regular file does not exist in Bash? (score <a href="https://stackoverflow.com/q/638975.html">2390567</a> in 2017)</h3>
<section id="question-1" class="level4">
<h4>Question</h4>
<p>I’ve used the following script to see if a file exists:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true"></a><span class="va">FILE=$1</span>     </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-f</span> <span class="va">$FILE</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;File </span><span class="va">$FILE</span><span class="st"> exists.&quot;</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;File </span><span class="va">$FILE</span><span class="st"> does not exist.&quot;</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>What’s the correct syntax to use if I only want to check if the file does <strong>not</strong> exist?</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true"></a></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true"></a><span class="va">FILE=$1</span>     </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$FILE</span> does not exist<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;File </span><span class="va">$FILE</span><span class="st"> does not exist.&quot;</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-4255" class="level4">
<h4>Answer accepted (score 4255)</h4>
<p>The <a href="http://man7.org/linux/man-pages/man1/test.1.html" rel="noreferrer">test</a> command (<code>[</code> here) has a “not” logical operator which is the exclamation point (similar to many other languages). Try this:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">!</span> <span class="ot">-f</span> /tmp/foo.txt<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;File not found!&quot;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-2-score-607" class="level4">
<h4>Answer 2 (score 607)</h4>
<p><strong>Bash File Testing</strong></p>
<p>
<code>-b filename</code> - Block special file<br> <code>-c filename</code> - Special character file<br> <code>-d directoryname</code> - Check for directory Existence<br> <code>-e filename</code> - Check for file existence, regardless of type (node, directory, socket, etc.)<br> <code>-f filename</code> - Check for regular file existence not a directory<br> <code>-G filename</code> - Check if file exists and is owned by effective group ID<br> <code>-G filename set-group-id</code> - True if file exists and is set-group-id<br> <code>-k filename</code> - Sticky bit<br> <code>-L filename</code> - Symbolic link<br> <code>-O filename</code> - True if file exists and is owned by the effective user id<br> <code>-r filename</code> - Check if file is a readable<br> <code>-S filename</code> - Check if file is socket<br> <code>-s filename</code> - Check if file is nonzero size<br> <code>-u filename</code> - Check if file set-user-id bit is set<br> <code>-w filename</code> - Check if file is writable<br> <code>-x filename</code> - Check if file is executable
</p>
<p><strong>How to use:</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true"></a><span class="va">file=</span>./file</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-e</span> <span class="st">&quot;</span><span class="va">$file</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;File exists&quot;</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true"></a><span class="kw">else</span> </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;File does not exist&quot;</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true"></a><span class="kw">fi</span> </span></code></pre></div>
<p>A <em>test expression</em> can be negated by using the <code>!</code> operator</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true"></a></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true"></a><span class="va">file=</span>./file</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">!</span> <span class="ot">-e</span> <span class="st">&quot;</span><span class="va">$file</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;File does not exist&quot;</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true"></a><span class="kw">else</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;File exists&quot;</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true"></a><span class="kw">fi</span> </span></code></pre></div>
</section>
<section id="answer-3-score-280" class="level4">
<h4>Answer 3 (score 280)</h4>
<p>You can negate an expression with “!”:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true"></a></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true"></a><span class="va">FILE=$1</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">!</span> <span class="ot">-f</span> <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">&quot;</span><span class="bu"> ]</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;File </span><span class="va">$FILE</span><span class="st"> does not exist&quot;</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>The relevant man page is <code>man test</code> or, equivalently, <code>man [</code> – or <code>help test</code> or <code>help [</code> for the built-in bash command.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-split-a-string-on-a-delimiter-in-bash-score-1998122-in-2018" class="level3">
<h3>3: How do I split a string on a delimiter in Bash? (score <a href="https://stackoverflow.com/q/918886.html">1998122</a> in 2018)</h3>
<section id="question-2" class="level4">
<h4>Question</h4>
<p>I have this string stored in a variable:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a><span class="va">IN=</span><span class="st">&quot;bla@some.com;john@home.com&quot;</span></span></code></pre></div>
<p>Now I would like to split the strings by <code>;</code> delimiter so that I have:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a><span class="va">ADDR1=</span><span class="st">&quot;bla@some.com&quot;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true"></a><span class="va">ADDR2=</span><span class="st">&quot;john@home.com&quot;</span></span></code></pre></div>
<p>I don’t necessarily need the <code>ADDR1</code> and <code>ADDR2</code> variables. If they are elements of an array that’s even better.</p>
<hr>
<p>After suggestions from the answers below, I ended up with the following which is what I was after:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true"></a></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true"></a><span class="co">#!/usr/bin/env bash</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true"></a><span class="va">IN=</span><span class="st">&quot;bla@some.com;john@home.com&quot;</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true"></a><span class="va">mails=$(</span><span class="bu">echo</span> <span class="va">$IN</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&quot;;&quot;</span> <span class="st">&quot;\n&quot;</span><span class="va">)</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">addr</span> in <span class="va">$mails</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;&gt; [</span><span class="va">$addr</span><span class="st">]&quot;</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a><span class="op">&gt;</span> [<span class="ex">bla@some.com</span>]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true"></a><span class="op">&gt;</span> [<span class="ex">john@home.com</span>]</span></code></pre></div>
<p>There was a solution involving setting <a href="http://en.wikipedia.org/wiki/Internal_field_separator" rel="noreferrer">Internal_field_separator</a> (IFS) to <code>;</code>. I am not sure what happened with that answer, how do you reset <code>IFS</code> back to default?</p>
<p>RE: <code>IFS</code> solution, I tried this and it works, I keep the old <code>IFS</code> and then restore it:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true"></a><span class="va">IN=</span><span class="st">&quot;bla@some.com;john@home.com&quot;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true"></a><span class="va">OIFS=$IFS</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;;&#39;</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true"></a><span class="va">mails2=$IN</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">x</span> in <span class="va">$mails2</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;&gt; [</span><span class="va">$x</span><span class="st">]&quot;</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true"></a><span class="va">IFS=$OIFS</span></span></code></pre></div>
<p>BTW, when I tried</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true"></a><span class="va">mails2=($IN)</span></span></code></pre></div>
<p>I only got the first string when printing it in loop, without brackets around <code>$IN</code> it works.</p>
</section>
<section id="answer-accepted-score-1126" class="level4">
<h4>Answer accepted (score 1126)</h4>
<p>You can set the <a href="http://en.wikipedia.org/wiki/Internal_field_separator" rel="noreferrer">internal field separator</a> (IFS) variable, and then let it parse into an array. When this happens in a command, then the assignment to <code>IFS</code> only takes place to that single command’s environment (to <code>read</code> ). It then parses the input according to the <code>IFS</code> variable value into an array, which we can then iterate over.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;;&#39;</span> <span class="bu">read</span> -ra <span class="va">ADDR</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;</span><span class="va">$IN</span><span class="st">&quot;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">${ADDR[@]}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true"></a><span class="co"># process &quot;$i&quot;</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>It will parse one line of items separated by <code>;</code>, pushing it into an array. Stuff for processing whole of <code>$IN</code>, each time one line of input separated by <code>;</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true"></a> <span class="kw">while</span> <span class="va">IFS=</span><span class="st">&#39;;&#39;</span> <span class="bu">read</span> -ra <span class="va">ADDR</span>; <span class="kw">do</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true"></a>      <span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">${ADDR[@]}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true"></a><span class="co"># process &quot;$i&quot;</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true"></a>      <span class="kw">done</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true"></a> <span class="kw">done</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;</span><span class="va">$IN</span><span class="st">&quot;</span></span></code></pre></div>
</section>
<section id="answer-2-score-886" class="level4">
<h4>Answer 2 (score 886)</h4>
<p>Taken from <em><a href="http://www.linuxquestions.org/questions/programming-9/bash-shell-script-split-array-383848/
#post3270796" rel="noreferrer">Bash shell script split array</a></em>:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true"></a><span class="va">IN=</span><span class="st">&quot;bla@some.com;john@home.com&quot;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true"></a><span class="va">arrIN=(${IN//</span>;<span class="va">/</span> <span class="va">})</span></span></code></pre></div>
<p>Explanation:</p>
<p>This construction replaces all occurrences of <code>';'</code> (the initial <code>//</code> means global replace) in the string <code>IN</code> with <code>' '</code> (a single space), then interprets the space-delimited string as an array (that’s what the surrounding parentheses do).</p>
<p>The syntax used inside of the curly braces to replace each <code>';'</code> character with a <code>' '</code> character is called <a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html" rel="noreferrer">Parameter Expansion</a>.</p>
<p>There are some common gotchas:</p>
<ol>
<li>
<p>If the original string has spaces, you will need to use <a href="https://unix.stackexchange.com/questions/184863/what-is-the-meaning-of-ifs-n-in-bash-scripting">IFS</a>:</p>
<ul>
<li>
<code>IFS=':'; arrIN=($IN); unset IFS;</code>
</li>
</ul>
</li>
<li>
<p>If the original string has spaces <em>and</em> the delimiter is a new line, you can set <a href="https://unix.stackexchange.com/questions/184863/what-is-the-meaning-of-ifs-n-in-bash-scripting">IFS</a> with:</p>
<ul>
<li>
<code>IFS=$'\n'; arrIN=($IN); unset IFS;</code>
</li>
</ul>
</li>
</ol>
</section>
<section id="answer-3-score-227" class="level4">
<h4>Answer 3 (score 227)</h4>
<p>If you don’t mind processing them immediately, I like to do this:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="va">$(</span><span class="bu">echo</span> <span class="va">$IN</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&quot;;&quot;</span> <span class="st">&quot;\n&quot;</span><span class="va">)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true"></a><span class="co"># process</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>You could use this kind of loop to initialize an array, but there’s probably an easier way to do it. Hope this helps, though.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="echo-newline-in-bash-prints-literal-score-1869228-in-2016" class="level3">
<h3>4: Echo newline in Bash prints literal (score <a href="https://stackoverflow.com/q/8467424.html">1869228</a> in 2016)</h3>
<section id="question-3" class="level4">
<h4>Question</h4>
<p>In Bash, tried this:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;hello\nworld&quot;</span></span></code></pre></div>
<p>But it doesn’t print a newline, only <code>\n</code>. How can I make it print the newline?</p>
<p>I’m using Ubuntu 11.04.</p>
</section>
<section id="answer-accepted-score-2592" class="level4">
<h4>Answer accepted (score 2592)</h4>
<p>You could use <code>printf</code> instead:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&quot;hello\nworld\n&quot;</span></span></code></pre></div>
<p><code>printf</code> has more consistent behavior than <code>echo</code>. The behavior of <code>echo</code> varies greatly between different versions.</p>
</section>
<section id="answer-2-score-1562" class="level4">
<h4>Answer 2 (score 1562)</h4>
<p>Are you sure you are in bash? Works for me, all three ways:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;Hello\nworld&quot;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&#39;Hello\nworld&#39;</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true"></a><span class="bu">echo</span> Hello<span class="st">$&#39;</span><span class="dt">\n</span><span class="st">&#39;</span>world</span></code></pre></div>
</section>
<section id="answer-3-score-538" class="level4">
<h4>Answer 3 (score 538)</h4>
<div class="sourceCode" id="cb42"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">$&#39;hello</span><span class="dt">\n</span><span class="st">world&#39;</span></span></code></pre></div>
<p>prints</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true"></a><span class="ex">hello</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true"></a><span class="ex">world</span></span></code></pre></div>
<p><code>$''</code> strings use <a href="http://www.gnu.org/software/bash/manual/html_node/ANSI_002dC-Quoting.html" rel="noreferrer">ANSI C Quoting</a>:</p>
<blockquote>
Words of the form <code>$'&lt;i&gt;string&lt;/i&gt;'</code> are treated specially. The word expands to <i>string</i>, with backslash-escaped characters replaced as specified by the ANSI C standard.
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-if-a-string-contains-a-substring-in-bash-score-1843858-in-2018" class="level3">
<h3>5: How to check if a string contains a substring in Bash (score <a href="https://stackoverflow.com/q/229551.html">1843858</a> in 2018)</h3>
<section id="question-4" class="level4">
<h4>Question</h4>
<p>I have a string in Bash:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&quot;My string&quot;</span></span></code></pre></div>
<p>How can I test if it contains another string?</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$string</span> ?? <span class="st">&#39;foo&#39;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;It&#39;s there!&quot;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Where <code>??</code> is my unknown operator. Do I use echo and <code>grep</code>?</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true"></a><span class="kw">if</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;foo&#39;</span><span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;It&#39;s there!&quot;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>That looks a bit clumsy.</p>
</section>
<section id="answer-accepted-score-3248" class="level4">
<h4>Answer accepted (score 3248)</h4>
<p>You can use <a href="https://stackoverflow.com/a/229585/3755692">Marcus’s answer (* wildcards)</a> outside a case statement, too, if you use double brackets:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&#39;My long string&#39;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true"></a><span class="kw">if [[</span> <span class="va">$string</span> <span class="ot">==</span> *<span class="st">&quot;My long&quot;</span>*<span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;It&#39;s there!&quot;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Note that spaces in the needle string need to be placed between double quotes, and the <code>*</code> wildcards should be outside.</p>
</section>
<section id="answer-2-score-514" class="level4">
<h4>Answer 2 (score 514)</h4>
<p>If you prefer the regex approach:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&#39;My string&#39;</span>;</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true"></a><span class="kw">if [[</span> <span class="va">$string</span> =~ <span class="st">&quot;My&quot;</span><span class="kw"> ]]</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;It&#39;s there!&quot;</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-3-score-316" class="level4">
<h4>Answer 3 (score 316)</h4>
<p>I am not sure about using an if statement, but you can get a similar effect with a case statement:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true"></a><span class="kw">case</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span><span class="kw"> in</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true"></a>  *foo*<span class="kw">)</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true"></a><span class="co"># Do stuff</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true"></a><span class="kw">esac</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-set-a-variable-to-the-output-of-a-command-in-bash-score-1657843-in-2019" class="level3">
<h3>6: How do I set a variable to the output of a command in Bash? (score <a href="https://stackoverflow.com/q/4651437.html">1657843</a> in 2019)</h3>
<section id="question-5" class="level4">
<h4>Question</h4>
<p>I have a pretty simple script that is something like the following:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true"></a></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true"></a><span class="va">VAR1=</span><span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true"></a><span class="va">MOREF=</span><span class="st">&#39;sudo run command against $VAR1 | grep name | cut -c7-&#39;</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true"></a></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$MOREF</span></span></code></pre></div>
<p>When I run this script from the command line and pass it the arguments, I am not getting any output. However, when I run the commands contained within the <code>$MOREF</code> variable, I am able to get output.</p>
<p>How can one take the results of a command that needs to be run within a script, save it to a variable, and then output that variable on the screen?</p>
</section>
<section id="answer-accepted-score-2159" class="level4">
<h4>Answer accepted (score 2159)</h4>
<p>In addition to backticks <code>&amp; #96;command&amp;#96;</code> you can use <code>$(command)</code> or <code>"$(command)"</code> which I find easier to read, and allow for nesting.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true"></a><span class="va">OUTPUT=</span><span class="st">&quot;</span><span class="va">$(</span><span class="fu">ls</span> -1<span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${OUTPUT}</span><span class="st">&quot;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true"></a><span class="va">MULTILINE=$(</span><span class="fu">ls</span> <span class="kw">\</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true"></a>   <span class="ex">-1</span><span class="va">)</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${MULTILINE}</span><span class="st">&quot;</span></span></code></pre></div>
<p>Quoting (<code>"</code>) does matter to preserve multi-line values.</p>
</section>
<section id="answer-2-score-259" class="level4">
<h4>Answer 2 (score 259)</h4>
<p>The right way is</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true"></a><span class="va">$(</span><span class="fu">sudo</span> run command<span class="va">)</span></span></code></pre></div>
<hr>
<p>If you’re going to use an apostrophe, you need ``<code>, not</code>’`. This character is called “backticks” (or “grave accent”).</p>
<p>Like this:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true"></a></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true"></a><span class="va">VAR1=</span><span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true"></a><span class="va">VAR2=</span><span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true"></a><span class="va">MOREF=</span><span class="kw">`</span><span class="fu">sudo</span> run command against <span class="st">&quot;</span><span class="va">$VAR1</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> name <span class="kw">|</span> <span class="fu">cut</span> -c7-<span class="kw">`</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$MOREF</span><span class="st">&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-70" class="level4">
<h4>Answer 3 (score 70)</h4>
<p>As they have already indicated to you, you should use ‘backticks’.</p>
<p>
The alternative proposed <code>$(command)</code> works as well, and it also easier to read, but note that it is valid only with Bash or KornShell (and shells derived from those), so if your scripts have to be really portable on various Unix systems, you should prefer the old backticks notation.
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-create-a-file-in-linux-from-terminal-window-score-1564036-in-2018" class="level3">
<h3>7: How to create a file in Linux from terminal window? (score <a href="https://stackoverflow.com/q/9381463.html">1564036</a> in 2018)</h3>
<section id="question-6" class="level4">
<h4>Question</h4>
<p>What’s the easiest way to create a file in Linux terminal?</p>
</section>
<section id="answer-accepted-score-548" class="level4">
<h4>Answer accepted (score 548)</h4>
<p>Depending on what you want the file to contain:</p>
<ul>
<li>
<code>touch /path/to/file</code> for an empty file
</li>
<li>
<p>
<code>somecommand &amp;gt; /path/to/file</code> for a file containing the output of some command.
</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true"></a>  <span class="ex">eg</span>: grep --help <span class="op">&gt;</span> randomtext.txt</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true"></a>      <span class="bu">echo</span> <span class="st">&quot;This is some text&quot;</span> <span class="op">&gt;</span> randomtext.txt</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true"></a><span class="kw">```</span><span class="op">&lt;</span>/<span class="ex">li</span><span class="op">&gt;</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">li</span><span class="op">&gt;&lt;</span>p<span class="op">&gt;</span><span class="kw">`</span><span class="fu">nano</span> /path/to/file<span class="kw">`</span> <span class="ex">or</span> <span class="kw">`</span>vi /path/to/file<span class="kw">`</span> <span class="kw">(</span><span class="ex">or</span> <span class="kw">`</span><span class="ex">any</span> other editor emacs,gedit etc<span class="kw">`)</span><span class="op">&lt;</span><span class="ex">br</span><span class="op">&gt;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true"></a><span class="ex">It</span> either opens the existing one for editing or creates <span class="kw">&amp;</span><span class="ex">amp</span><span class="kw">;</span> <span class="ex">opens</span> the empty file to enter, if it doesn<span class="st">&#39;t exist&lt;/p&gt;&lt;/li&gt;</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true"></a><span class="st">&lt;/ul&gt;</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true"></a></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true"></a></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true"></a><span class="st">#### Answer 2 (score 118)</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true"></a><span class="st">Use &lt;a href=&quot;http://en.wikipedia.org/wiki/Touch_(Unix)&quot; rel=&quot;noreferrer&quot;&gt;touch&lt;/a&gt;  </span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true"></a></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true"></a><span class="st">```sh</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true"></a><span class="st">touch filename</span></span></code></pre></div>
</section>
<section id="answer-3-score-85" class="level4">
<h4>Answer 3 (score 85)</h4>
<p><strong>Create the file using <code>cat</code></strong></p>
<p><code>$ cat &amp;gt; myfile.txt</code></p>
<p>Now, just type whatever you want in the file:</p>
<p><code>Hello World!</code></p>
<p>CTRL-D to save and exit</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-the-source-directory-of-a-bash-script-from-within-the-script-itself-score-1552214-in-2019" class="level3">
<h3>8: Get the source directory of a Bash script from within the script itself (score <a href="https://stackoverflow.com/q/59895.html">1552214</a> in 2019)</h3>
<section id="question-7" class="level4">
<h4>Question</h4>
<p>How do I get the path of the directory in which a <a href="http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" rel="noreferrer">Bash</a> script is located, <em>inside</em> that script?</p>
<p>For instance, let’s say I want to use a Bash script as a launcher for another application. I want to change the working directory to the one where the Bash script is located, so I can operate on the files in that directory, like so:</p>
<pre>$ ./application</pre>
</section>
<section id="answer-accepted-score-6107" class="level4">
<h4>Answer accepted (score 6107)</h4>
<div class="sourceCode" id="cb55"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true"></a></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true"></a><span class="va">DIR=</span><span class="st">&quot;</span><span class="va">$(</span> <span class="bu">cd</span> <span class="st">&quot;</span><span class="va">$(</span> <span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">${BASH_SOURCE[0]}</span><span class="st">&quot;</span> <span class="va">)</span><span class="st">&quot;</span> <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">&amp;&amp;</span> <span class="bu">pwd</span> <span class="va">)</span><span class="st">&quot;</span></span></code></pre></div>
<p>is a useful one-liner which will give you the full directory name of the script no matter where it is being called from.</p>
<p>It will work as long as the last component of the path used to find the script is not a symlink (directory links are OK). If you also want to resolve any links to the script itself, you need a multi-line solution:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true"></a></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true"></a><span class="va">SOURCE=</span><span class="st">&quot;</span><span class="va">${BASH_SOURCE[0]}</span><span class="st">&quot;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true"></a><span class="kw">while</span><span class="bu"> [</span> <span class="ot">-h</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">do</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true"></a><span class="co"># resolve $SOURCE until the file is no longer a symlink</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true"></a>  <span class="va">DIR=</span><span class="st">&quot;</span><span class="va">$(</span> <span class="bu">cd</span> -P <span class="st">&quot;</span><span class="va">$(</span> <span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span> <span class="va">)</span><span class="st">&quot;</span> <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">&amp;&amp;</span> <span class="bu">pwd</span> <span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true"></a>  <span class="va">SOURCE=</span><span class="st">&quot;</span><span class="va">$(</span><span class="fu">readlink</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true"></a>  [[ <span class="va">$SOURCE</span> != <span class="ex">/*</span> ]] <span class="kw">&amp;&amp;</span> <span class="va">SOURCE=</span><span class="st">&quot;</span><span class="va">$DIR</span><span class="st">/</span><span class="va">$SOURCE</span><span class="st">&quot;</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true"></a><span class="co"># if $SOURCE was a relative symlink, we need to resolve it relative to the path where the symlink file was located</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true"></a><span class="va">DIR=</span><span class="st">&quot;</span><span class="va">$(</span> <span class="bu">cd</span> -P <span class="st">&quot;</span><span class="va">$(</span> <span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span> <span class="va">)</span><span class="st">&quot;</span> <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">&amp;&amp;</span> <span class="bu">pwd</span> <span class="va">)</span><span class="st">&quot;</span></span></code></pre></div>
<p>This last one will work with any combination of aliases, <code>source</code>, <code>bash -c</code>, symlinks, etc.</p>
<p>Beware: if you <code>cd</code> to a different directory before running this snippet, the result may be incorrect!</p>
<p>Also, watch out for <a href="http://bosker.wordpress.com/2012/02/12/bash-scripters-beware-of-the-cdpath/" rel="noreferrer"><code>$CDPATH</code> gotchas</a>, and stderr output side effects if the user has smartly overridden cd to redirect output to stderr instead (including escape sequences, such as when calling <code>update_terminal_cwd &amp;gt;&amp;amp;2</code> on Mac). Adding <code>&amp;gt;/dev/null 2&amp;gt;&amp;amp;1</code> at the end of your <code>cd</code> command will take care of both possibilities.</p>
<p>To understand how it works, try running this more verbose form:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true"></a></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true"></a><span class="va">SOURCE=</span><span class="st">&quot;</span><span class="va">${BASH_SOURCE[0]}</span><span class="st">&quot;</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true"></a><span class="kw">while</span><span class="bu"> [</span> <span class="ot">-h</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">do</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true"></a><span class="co"># resolve $SOURCE until the file is no longer a symlink</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true"></a>  <span class="va">TARGET=</span><span class="st">&quot;</span><span class="va">$(</span><span class="fu">readlink</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true"></a>  <span class="kw">if [[</span> <span class="va">$TARGET</span> <span class="ot">==</span> /*<span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;SOURCE &#39;</span><span class="va">$SOURCE</span><span class="st">&#39; is an absolute symlink to &#39;</span><span class="va">$TARGET</span><span class="st">&#39;&quot;</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true"></a>    <span class="va">SOURCE=</span><span class="st">&quot;</span><span class="va">$TARGET</span><span class="st">&quot;</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true"></a>  <span class="kw">else</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true"></a>    <span class="va">DIR=</span><span class="st">&quot;</span><span class="va">$(</span> <span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span> <span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;SOURCE &#39;</span><span class="va">$SOURCE</span><span class="st">&#39; is a relative symlink to &#39;</span><span class="va">$TARGET</span><span class="st">&#39; (relative to &#39;</span><span class="va">$DIR</span><span class="st">&#39;)&quot;</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true"></a>    <span class="va">SOURCE=</span><span class="st">&quot;</span><span class="va">$DIR</span><span class="st">/</span><span class="va">$TARGET</span><span class="st">&quot;</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true"></a><span class="co"># if $SOURCE was a relative symlink, we need to resolve it relative to the path where the symlink file was located</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true"></a>  <span class="kw">fi</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;SOURCE is &#39;</span><span class="va">$SOURCE</span><span class="st">&#39;&quot;</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true"></a><span class="va">RDIR=</span><span class="st">&quot;</span><span class="va">$(</span> <span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span> <span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true"></a><span class="va">DIR=</span><span class="st">&quot;</span><span class="va">$(</span> <span class="bu">cd</span> -P <span class="st">&quot;</span><span class="va">$(</span> <span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">$SOURCE</span><span class="st">&quot;</span> <span class="va">)</span><span class="st">&quot;</span> <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">&amp;&amp;</span> <span class="bu">pwd</span> <span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$DIR</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;</span><span class="va">$RDIR</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;DIR &#39;</span><span class="va">$RDIR</span><span class="st">&#39; resolves to &#39;</span><span class="va">$DIR</span><span class="st">&#39;&quot;</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;DIR is &#39;</span><span class="va">$DIR</span><span class="st">&#39;&quot;</span></span></code></pre></div>
<p>And it will print something like:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true"></a><span class="ex">SOURCE</span> <span class="st">&#39;./scriptdir.sh&#39;</span> is a relative symlink to <span class="st">&#39;sym2/scriptdir.sh&#39;</span> (relative to <span class="st">&#39;.&#39;</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true"></a><span class="ex">SOURCE</span> is <span class="st">&#39;./sym2/scriptdir.sh&#39;</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true"></a><span class="ex">DIR</span> <span class="st">&#39;./sym2&#39;</span> resolves to <span class="st">&#39;/home/ubuntu/dotfiles/fo fo/real/real1/real2&#39;</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true"></a><span class="ex">DIR</span> is <span class="st">&#39;/home/ubuntu/dotfiles/fo fo/real/real1/real2&#39;</span></span></code></pre></div>
</section>
<section id="answer-2-score-808" class="level4">
<h4>Answer 2 (score 808)</h4>
<p>Use <code>dirname "$0"</code>:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true"></a></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;The script you are running has basename </span><span class="kw">`</span><span class="fu">basename</span> <span class="st">&quot;</span><span class="va">$0</span><span class="st">&quot;</span><span class="kw">`</span><span class="st">, dirname </span><span class="kw">`</span><span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">$0</span><span class="st">&quot;</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;The present working directory is </span><span class="kw">`</span><span class="bu">pwd</span><span class="kw">`</span><span class="st">&quot;</span></span></code></pre></div>
<p>using <code>pwd</code> alone will not work if you are not running the script from the directory it is contained in.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true"></a>[<span class="ex">matt@server1</span> ~]$ pwd</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true"></a><span class="ex">/home/matt</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true"></a>[<span class="ex">matt@server1</span> ~]$ ./test2.sh</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true"></a><span class="ex">The</span> script you are running has basename test2.sh, dirname .</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true"></a><span class="ex">The</span> present working directory is /home/matt</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true"></a>[<span class="ex">matt@server1</span> ~]$ cd /tmp</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true"></a>[<span class="ex">matt@server1</span> tmp]$ ~/test2.sh</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true"></a><span class="ex">The</span> script you are running has basename test2.sh, dirname /home/matt</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true"></a><span class="ex">The</span> present working directory is /tmp</span></code></pre></div>
</section>
<section id="answer-3-score-455" class="level4">
<h4>Answer 3 (score 455)</h4>
<p>The dirname command is the most basic, simply parsing the path up to the filename off of the $0 (script name) variable:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true"></a><span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">$0</span><span class="st">&quot;</span></span></code></pre></div>
<p>But, as <strong>matt b</strong> pointed out, the path returned is different depending on how the script is called. pwd doesn’t do the job because that only tells you what the current directory is, not what directory the script resides in. Additionally, if a symbolic link to a script is executed, you’re going to get a (probably relative) path to where the link resides, not the actual script.</p>
<p>Some others have mentioned the <strong>readlink</strong> command, but at its simplest, you can use:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true"></a><span class="fu">dirname</span> <span class="st">&quot;</span><span class="va">$(</span><span class="fu">readlink</span> -f <span class="st">&quot;</span><span class="va">$0</span><span class="st">&quot;</span><span class="va">)</span><span class="st">&quot;</span></span></code></pre></div>
<p>readlink will resolve the script path to an absolute path from the root of the filesystem. So, any paths containing single or double dots, tildes and/or symbolic links will be resolved to a full path.</p>
<p>Here’s a script demonstrating each of these, <strong>whatdir.sh:</strong></p>
<div class="sourceCode" id="cb63"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true"></a></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;pwd: </span><span class="kw">`</span><span class="bu">pwd</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="dt">\$</span><span class="st">0: </span><span class="va">$0</span><span class="st">&quot;</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;basename: </span><span class="kw">`</span><span class="fu">basename</span> <span class="va">$0</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;dirname: </span><span class="kw">`</span><span class="fu">dirname</span> <span class="va">$0</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;dirname/readlink: </span><span class="va">$(</span><span class="fu">dirname</span> <span class="va">$(</span><span class="fu">readlink</span> -f <span class="va">$0))</span><span class="st">&quot;</span></span></code></pre></div>
<p>Running this script in my home dir, using a relative path:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span>$ <span class="ex">./whatdir.sh</span> </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true"></a><span class="ex">pwd</span>: /Users/phatblat</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true"></a><span class="va">$0</span>: <span class="ex">./whatdir.sh</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true"></a><span class="ex">basename</span>: whatdir.sh</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true"></a><span class="ex">dirname</span>: .</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true"></a><span class="ex">dirname</span>/readlink: <span class="ex">/Users/phatblat</span></span></code></pre></div>
<p>Again, but using the full path to the script:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span>$ <span class="ex">/Users/phatblat/whatdir.sh</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true"></a><span class="ex">pwd</span>: /Users/phatblat</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true"></a><span class="va">$0</span>: <span class="ex">/Users/phatblat/whatdir.sh</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true"></a><span class="ex">basename</span>: whatdir.sh</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true"></a><span class="ex">dirname</span>: /Users/phatblat</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true"></a><span class="ex">dirname</span>/readlink: <span class="ex">/Users/phatblat</span></span></code></pre></div>
<p>Now changing directories:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span>$ <span class="bu">cd</span> /tmp</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span>$ <span class="ex">~/whatdir.sh</span> </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true"></a><span class="ex">pwd</span>: /tmp</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true"></a><span class="va">$0</span>: <span class="ex">/Users/phatblat/whatdir.sh</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true"></a><span class="ex">basename</span>: whatdir.sh</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true"></a><span class="ex">dirname</span>: /Users/phatblat</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true"></a><span class="ex">dirname</span>/readlink: <span class="ex">/Users/phatblat</span></span></code></pre></div>
<p>And finally using a symbolic link to execute the script:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span>$ <span class="fu">ln</span> -s ~/whatdir.sh whatdirlink.sh</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true"></a><span class="op">&gt;&gt;&gt;</span>$ <span class="ex">./whatdirlink.sh</span> </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true"></a><span class="ex">pwd</span>: /tmp</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true"></a><span class="va">$0</span>: <span class="ex">./whatdirlink.sh</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true"></a><span class="ex">basename</span>: whatdirlink.sh</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true"></a><span class="ex">dirname</span>: .</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true"></a><span class="ex">dirname</span>/readlink: <span class="ex">/Users/phatblat</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="read-a-file-line-by-line-assigning-the-value-to-a-variable-score-1529494-in-2019" class="level3">
<h3>9: Read a file line by line assigning the value to a variable (score <a href="https://stackoverflow.com/q/10929453.html">1529494</a> in 2019)</h3>
<section id="question-8" class="level4">
<h4>Question</h4>
<p>I have the following .txt file:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true"></a><span class="ex">Marco</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true"></a><span class="ex">Paolo</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true"></a><span class="ex">Antonio</span></span></code></pre></div>
<p>I want to read it line-by-line, and for each line I want to assign a .txt line value to a variable. Supposing my variable is <code>$name</code>, the flow is:</p>
<ul>
<li>
Read first line from file
</li>
<li>
Assign <code>$name</code> = “Marco”
</li>
<li>
Do some tasks with <code>$name</code>
</li>
<li>
Read second line from file
</li>
<li>
Assign <code>$name</code> = “Paolo”
</li>
</ul>
</section>
<section id="answer-accepted-score-1240" class="level4">
<h4>Answer accepted (score 1240)</h4>
<p>The following reads a file passed as an argument line by line:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true"></a></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true"></a><span class="kw">while</span> <span class="va">IFS=</span> <span class="bu">read</span> -r <span class="va">line</span>; <span class="kw">do</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Text read from file: </span><span class="va">$line</span><span class="st">&quot;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true"></a><span class="kw">done</span> <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span></code></pre></div>
<p>This is the <a href="http://mywiki.wooledge.org/BashFAQ/001" rel="noreferrer">standard form</a> for reading lines from a file in a loop. Explanation:</p>
<ul>
<li>
<code>IFS=</code> (or <code>IFS=''</code>) prevents leading/trailing whitespace from being trimmed.
</li>
<li>
<code>-r</code> prevents backslash escapes from being interpreted.
</li>
</ul>
<p>If the above is saved to a script with filename <code>readfile</code>, it can be run as follows:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true"></a><span class="fu">chmod</span> +x readfile</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true"></a><span class="ex">./readfile</span> filename.txt</span></code></pre></div>
<p>If the file isn’t a <a href="https://stackoverflow.com/a/729795/1968">standard POSIX text file</a> (= not terminated by a newline character), the loop can be modified to handle trailing partial lines:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true"></a><span class="kw">while</span> <span class="va">IFS=</span> <span class="bu">read</span> -r <span class="va">line</span> <span class="kw">|| [[</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$line</span><span class="st">&quot;</span><span class="kw"> ]]</span>; <span class="kw">do</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Text read from file: </span><span class="va">$line</span><span class="st">&quot;</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true"></a><span class="kw">done</span> <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span></code></pre></div>
<p>Here, <code>|| [[ -n $line ]]</code> prevents the last line from being ignored if it doesn’t end with a <code>\n</code> (since <code>read</code> returns a non-zero exit code when it encounters EOF).</p>
<p>If the commands inside the loop also read from standard input, the file descriptor used by <code>read</code> can be chanced to something else (avoid the <a href="https://en.wikipedia.org/wiki/File_descriptor" rel="noreferrer">standard file descriptors</a>), e.g.:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true"></a><span class="kw">while</span> <span class="va">IFS=</span> <span class="bu">read</span> -r -u3 <span class="va">line</span>; <span class="kw">do</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Text read from file: </span><span class="va">$line</span><span class="st">&quot;</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true"></a><span class="kw">done</span> <span class="op">3&lt;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span></code></pre></div>
<p>(Non-Bash shells might not know <code>read -u3</code>; use <code>read &amp;lt;&amp;amp;3</code> instead.)</p>
</section>
<section id="answer-2-score-299" class="level4">
<h4>Answer 2 (score 299)</h4>
<p>I encourage you to use the <code>-r</code> flag for <code>read</code> which stands for:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true"></a><span class="ex">-r</span>  Do not treat a backslash character in any special way. Consider each</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true"></a>    <span class="ex">backslash</span> to be part of the input line.</span></code></pre></div>
<p>I am citing from <code>man 1 read</code>.</p>
<p>Another thing is to take a filename as an argument.</p>
<p>Here is updated code:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true"></a></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true"></a><span class="co">#!/usr/bin/bash</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true"></a><span class="va">filename=</span><span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">read</span> -r <span class="va">line</span>; <span class="kw">do</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true"></a>    <span class="va">name=</span><span class="st">&quot;</span><span class="va">$line</span><span class="st">&quot;</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Name read from file - </span><span class="va">$name</span><span class="st">&quot;</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true"></a><span class="kw">done</span> <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$filename</span><span class="st">&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-126" class="level4">
<h4>Answer 3 (score 126)</h4>
<p>Using the following Bash template should allow you to read one value at a time from a file and process it.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">read</span> <span class="va">name</span>; <span class="kw">do</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true"></a><span class="co"># Do what you want to $name</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true"></a><span class="kw">done</span> <span class="op">&lt;</span> <span class="ex">filename</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-permanently-set-path-on-linuxunix-score-1467227-in-2018" class="level3">
<h3>10: How to permanently set $PATH on Linux/Unix? (score <a href="https://stackoverflow.com/q/14637979.html">1467227</a> in 2018)</h3>
<section id="question-9" class="level4">
<h4>Question</h4>
<p>I’m trying to add a directory to my path so it will always be in my Linux path. I’ve tried:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">PATH=$PATH</span>:/path/to/dir</span></code></pre></div>
<p>This works, however each time I exit the terminal and start a new terminal instance, this path is lost, and I need to run the export command again.</p>
<p>How can I do it so this will be set permanently?</p>
</section>
<section id="answer-accepted-score-998" class="level4">
<h4>Answer accepted (score 998)</h4>
<p><strong>You need to add it to your <code>~/.profile</code> or <code>~/.bashrc</code> file.</strong> </p>
<div class="sourceCode" id="cb77"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">PATH=</span><span class="st">&quot;</span><span class="va">$PATH</span><span class="st">:/path/to/dir&quot;</span></span></code></pre></div>
<p>Depending on what you’re doing, you also may want to symlink to binaries:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true"></a><span class="bu">cd</span> /usr/bin</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true"></a><span class="fu">sudo</span> ln -s /path/to/binary binary-name</span></code></pre></div>
<p><strong>Note that this will not automatically update your path for the remainder of the session.</strong> To do this, you should run:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true"></a><span class="bu">source</span> ~/.profile </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true"></a><span class="ex">or</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div>
</section>
<section id="answer-2-score-237" class="level4">
<h4>Answer 2 (score 237)</h4>
<p>
In Ubuntu, edit <code>/etc/environment</code>. Its sole purpose is to store Environment Variables. Originally the $PATH variable is defined here. This is a paste from my <code>/etc/environment</code> file:
</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true"></a><span class="va">PATH=</span><span class="st">&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games&quot;</span></span></code></pre></div>
<p>So you can just open up this file as root and add whatever you want.</p>
<p>
For Immediate results, Run (try as normal user <em>and</em> root):
</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true"></a><span class="bu">source</span> /etc/environment <span class="kw">&amp;&amp;</span> <span class="bu">export</span> <span class="va">PATH</span></span></code></pre></div>
<p><strong>UPDATE:</strong></p>
<p>If you use <code>zsh</code> (a.k.a Z Shell), add this line right after the comments in <code>/etc/zsh/zshenv</code>:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true"></a><span class="bu">source</span> /etc/environment</span></code></pre></div>
<p><em>I encountered this little quirk on Ubuntu 15.10, but if your <strong>zsh</strong> is not getting the correct <strong>PATH</strong>, this could be why</em></p>
</section>
<section id="answer-3-score-152" class="level4">
<h4>Answer 3 (score 152)</h4>
<p>There are multiple ways to do it. The actual solution depends on the purpose.</p>
<p>The variable values are usually stored in either a list of assignments or a shell script that is run at the start of the system or user session. In case of the shell script you must use a specific shell syntax.</p>
<h5>
System wide
</h2>
<ol>
<li>
<code>/etc/environment</code> List of unique assignments. Perfect for adding system-wide directories like <code>/usr/local/something/bin</code> to <code>PATH</code> variable or defining <code>JAVA_HOME</code>.
</li>
<li>
<code>/etc/xprofile</code> Shell script executed while starting X Window System session. This is run for every user that logs into X Window System. It is a good choice for <code>PATH</code> entries that are valid for every user like <code>/usr/local/something/bin</code>. The file is included by other script so use POSIX shell syntax not the syntax of your user shell.
</li>
<li>
<code>/etc/profile</code> and <code>/etc/profile.d/*</code> Shell script. This is a good choice for shell-only systems. Those files are read only by shells.
</li>
<li>
<code>/etc/&amp;lt;shell&amp;gt;.&amp;lt;shell&amp;gt;rc</code>. Shell script. This is a poor choice because it is single shell specific.
</li>
</ol>
<h5>
User session
</h2>
<ol>
<li>
<code>~/.pam_environment</code>. List of unique assignments. Loaded by <a href="http://www.linux-pam.org/" rel="noreferrer">PAM</a> at the start of every user session irrelevant if it is an X Window System session or shell. You cannot reference other variable including <code>HOME</code> or <code>PATH</code> so it has limited use.
</li>
<li>
<code>~/.xprofile</code> Shell script. This is executed when the user logs into X Window System system. The variables defined here are visible to every X application. Perfect choice for extending <code>PATH</code> with values such as <code>~/bin</code> or <code>~/go/bin</code> or defining user specific <code>GOPATH</code> or <code>NPM_HOME</code>. The file is included by other script so use POSIX shell syntax not the syntax of your user shell. Your graphical text editor or IDE started by shortcut will see those values.
</li>
<li>
<code>~/.profile</code> Shell script. It will be visible only for programs started from terminal or terminal emulator. It is a good choice for shell-only systems.
</li>
<li>
<code>~/.&amp;lt;shell&amp;gt;rc</code>. Shell script. This is a poor choice because it is single shell specific.
</li>
</ol>
<h5>
Distribution specific documentation
</h2>
<ul>
<li>
<a href="https://help.ubuntu.com/community/EnvironmentVariables
#Persistent_environment_variables" rel="noreferrer">Ubuntu</a>
</li>
<li>
<a href="https://wiki.archlinux.org/index.php/Environment_variables" rel="noreferrer">archlinux</a>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="looping-through-the-content-of-a-file-in-bash-score-1415142-in-2018" class="level3">
<h3>11: Looping through the content of a file in Bash (score <a href="https://stackoverflow.com/q/1521462.html">1415142</a> in 2018)</h3>
<section id="question-10" class="level4">
<h4>Question</h4>
<p>How do I iterate through each line of a text file with <a href="http://en.wikipedia.org/wiki/Bash" rel="noreferrer">Bash</a>?</p>
<p>With this script:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;Start!&quot;</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">p</span> in (peptides.txt)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${p}</span><span class="st">&quot;</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>I get this output on the screen:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true"></a><span class="ex">Start</span>!</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true"></a><span class="ex">.</span>/runPep.sh: <span class="ex">line</span> 3: syntax error near unexpected token <span class="kw">`(</span><span class="st">&#39;</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true"></a><span class="st">./runPep.sh: line 3: `for p in (peptides.txt)&#39;</span></span></code></pre></div>
<p>(Later I want to do something more complicated with <code>$p</code> than just output to the screen.)</p>
<hr>
<p>The environment variable <strong>SHELL</strong> is (from env):</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true"></a><span class="va">SHELL=</span>/bin/bash</span></code></pre></div>
<p><code>/bin/bash --version</code> output:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true"></a><span class="ex">GNU</span> bash, version 3.1.17(1)<span class="ex">-release</span> (x86_64-suse-linux-gnu)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true"></a><span class="ex">Copyright</span> (C) <span class="ex">2005</span> Free Software Foundation, Inc.</span></code></pre></div>
<p><code>cat /proc/version</code> output:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true"></a><span class="ex">Linux</span> version 2.6.18.2-34-default (geeko@buildhost) <span class="kw">(</span><span class="fu">gcc</span> version 4.1.2 20061115 (prerelease<span class="kw">)</span> <span class="kw">(</span><span class="ex">SUSE</span> Linux<span class="kw">)</span>)</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true"></a><span class="co">#1 SMP Mon Nov 27 11:46:27 UTC 2006</span></span></code></pre></div>
<p>The file peptides.txt contains:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true"></a><span class="ex">RKEKNVQ</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true"></a><span class="ex">IPKKLLQK</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true"></a><span class="ex">QYFHQLEKMNVK</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true"></a><span class="ex">IPKKLLQK</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true"></a><span class="ex">GDLSTALEVAIDCYEK</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true"></a><span class="ex">QYFHQLEKMNVKIPENIYR</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true"></a><span class="ex">RKEKNVQ</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true"></a><span class="ex">VLAKHGKLQDAIN</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true"></a><span class="ex">ILGFMK</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true"></a><span class="ex">LEDVALQILL</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-1891" class="level4">
<h4>Answer accepted (score 1891)</h4>
<p>One way to do it is:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">read</span> <span class="va">p</span>; <span class="kw">do</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$p</span><span class="st">&quot;</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true"></a><span class="kw">done</span> <span class="op">&lt;</span><span class="ex">peptides.txt</span></span></code></pre></div>
<p>As pointed out in the comments, this has the side effects of trimming leading whitespace, interpretting backslash sequences, and skipping the trailing line if it’s missing a terminating linefeed. If these are concerns, you can do:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true"></a><span class="kw">while</span> <span class="va">IFS=</span><span class="st">&quot;&quot;</span> <span class="bu">read</span> -r <span class="va">p</span> <span class="kw">||</span><span class="bu"> [</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$p</span><span class="st">&quot;</span><span class="bu"> ]</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true"></a>  <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$p</span><span class="st">&quot;</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true"></a><span class="kw">done</span> <span class="op">&lt;</span> <span class="ex">peptides.txt</span></span></code></pre></div>
<hr>
<p>Exceptionally, if the <a href="https://unix.stackexchange.com/questions/107800/using-while-loop-to-ssh-to-multiple-servers">loop body may read from standard input</a>, you can open the file using a different file descriptor:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">read</span> -u 10 <span class="va">p</span>; <span class="kw">do</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true"></a>  <span class="ex">...</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true"></a><span class="kw">done</span> <span class="op">10&lt;</span><span class="ex">peptides.txt</span></span></code></pre></div>
<p>Here, 10 is just an arbitrary number (different from 0, 1, 2).</p>
</section>
<section id="answer-2-score-374" class="level4">
<h4>Answer 2 (score 374)</h4>
<div class="sourceCode" id="cb92"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true"></a><span class="fu">cat</span> peptides.txt <span class="kw">|</span> <span class="kw">while</span> <span class="bu">read</span> <span class="va">line</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true"></a></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true"></a><span class="co"># do something with $line here</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>and the one-liner variant:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true"></a><span class="fu">cat</span> peptides.txt <span class="kw">|</span> <span class="kw">while</span> <span class="bu">read</span> <span class="va">line</span>; <span class="kw">do</span> <span class="ex">something_with_</span><span class="va">$line_here</span><span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
</section>
<section id="answer-3-score-137" class="level4">
<h4>Answer 3 (score 137)</h4>
<p><strong>Option 1a:</strong> While loop: Single line at a time: Input redirection</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true"></a></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true"></a><span class="va">filename=</span><span class="st">&#39;peptides.txt&#39;</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true"></a><span class="bu">echo</span> Start</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">read</span> <span class="va">p</span>; <span class="kw">do</span> </span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="va">$p</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true"></a><span class="kw">done</span> <span class="op">&lt;</span> <span class="va">$filename</span></span></code></pre></div>
<p>
<strong>Option 1b:</strong> While loop: Single line at a time:<br> Open the file, read from a file descriptor (in this case file descriptor #4).
</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true"></a></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true"></a><span class="va">filename=</span><span class="st">&#39;peptides.txt&#39;</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true"></a><span class="bu">exec</span> <span class="op">4&lt;</span><span class="va">$filename</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true"></a><span class="bu">echo</span> Start</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">read</span> -u4 <span class="va">p</span> ; <span class="kw">do</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="va">$p</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="extract-filename-and-extension-in-bash-score-1405400-in-2018" class="level3">
<h3>12: Extract filename and extension in Bash (score <a href="https://stackoverflow.com/q/965053.html">1405400</a> in 2018)</h3>
<section id="question-11" class="level4">
<h4>Question</h4>
<p>I want to get the filename (without extension) and the extension separately.</p>
<p>The best solution I found so far is:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true"></a><span class="va">NAME=</span><span class="kw">`</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">&#39;.&#39;</span> -f1<span class="kw">`</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true"></a><span class="va">EXTENSION=</span><span class="kw">`</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">&#39;.&#39;</span> -f2<span class="kw">`</span></span></code></pre></div>
<p>This is wrong because it doesn’t work if the file name contains multiple <code>.</code> characters. If, let’s say, I have <code>a.b.js</code>, it will consider <code>a</code> and <code>b.js</code>, instead of <code>a.b</code> and <code>js</code>.</p>
<p>It can be easily done in Python with</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true"></a><span class="fu">file</span>, ext = os.path.splitext(path)</span></code></pre></div>
<p>but I’d prefer not to fire up a Python interpreter just for this, if possible.</p>
<p>Any better ideas?</p>
</section>
<section id="answer-accepted-score-3271" class="level4">
<h4>Answer accepted (score 3271)</h4>
<p>First, get file name without the path:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true"></a><span class="va">filename=$(</span><span class="fu">basename</span> -- <span class="st">&quot;</span><span class="va">$fullfile</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true"></a><span class="va">extension=</span><span class="st">&quot;</span><span class="va">${filename</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true"></a><span class="va">##</span>*.<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true"></a><span class="va">filename=</span><span class="st">&quot;</span><span class="va">${filename%</span>.*<span class="va">}</span><span class="st">&quot;</span></span></code></pre></div>
<p>Alternatively, you can focus on the last ‘/’ of the path instead of the ‘.’ which should work even if you have unpredictable file extensions:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true"></a><span class="va">filename=</span><span class="st">&quot;</span><span class="va">${fullfile</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span><span class="st">&quot;</span></span></code></pre></div>
<p>You may want to check the documentation :</p>
<ul>
<li>
On the web at section “<a href="http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html" rel="noreferrer">3.5.3 Shell Parameter Expansion</a>”
</li>
<li>
In the bash manpage at section called “Parameter Expansion”
</li>
</ul>
</section>
<section id="answer-2-score-602" class="level4">
<h4>Answer 2 (score 602)</h4>
<div class="sourceCode" id="cb100"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true"></a><span class="ex">~%</span> FILE=<span class="st">&quot;example.tar.gz&quot;</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true"></a><span class="ex">~%</span> echo <span class="st">&quot;</span><span class="va">${FILE%%</span>.*<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true"></a><span class="ex">example</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true"></a><span class="ex">~%</span> echo <span class="st">&quot;</span><span class="va">${FILE%</span>.*<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true"></a><span class="ex">example.tar</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true"></a><span class="ex">~%</span> echo <span class="st">&quot;</span><span class="va">${FILE</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true"></a><span class="va">#</span>*.<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true"></a><span class="ex">tar.gz</span></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true"></a><span class="ex">~%</span> echo <span class="st">&quot;</span><span class="va">${FILE</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true"></a><span class="va">##</span>*.<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true"></a><span class="ex">gz</span></span></code></pre></div>
<p>For more details, see <a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html" rel="noreferrer">shell parameter expansion</a> in the Bash manual.</p>
</section>
<section id="answer-3-score-362" class="level4">
<h4>Answer 3 (score 362)</h4>
<p>Usually you already know the extension, so you might wish to use:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true"></a><span class="fu">basename</span> filename .extension</span></code></pre></div>
<p>for example:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true"></a><span class="fu">basename</span> /path/to/dir/filename.txt .txt</span></code></pre></div>
<p>and we get</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true"></a><span class="ex">filename</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-parse-command-line-arguments-in-bash-score-1334093-in-2019" class="level3">
<h3>13: How do I parse command line arguments in Bash? (score <a href="https://stackoverflow.com/q/192249.html">1334093</a> in 2019)</h3>
<section id="question-12" class="level4">
<h4>Question</h4>
<p>Say, I have a script that gets called with this line:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true"></a><span class="ex">./myscript</span> -vfd ./foo/bar/someFile -o /fizz/someOtherFile</span></code></pre></div>
<p>or this one:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true"></a><span class="ex">./myscript</span> -v -f -d -o /fizz/someOtherFile ./foo/bar/someFile </span></code></pre></div>
<p>What’s the accepted way of parsing this such that in each case (or some combination of the two) <code>$v</code>, <code>$f</code>, and <code>$d</code> will all be set to <code>true</code> and <code>$outFile</code> will be equal to <code>/fizz/someOtherFile</code> ?</p>
</section>
<section id="answer-accepted-score-2416" class="level4">
<h4>Answer accepted (score 2416)</h4>
<p><strong>Update:</strong> It’s been more than 5 years since I started this answer. Thank you for LOTS of great edits/comments/suggestions. In order save maintenance time, I’ve modified the code block to be 100% copy-paste ready. Please do not post comments like “What if you changed X to Y…”. Instead, copy-paste the code block, see the output, make the change, rerun the script, and comment “I changed X to Y and…” I don’t have time to test your ideas and tell you if they work.</p>
<hr>
<h5>
Method #1: Using bash without getopt[s]
</h1>
<p>Two common ways to pass key-value-pair arguments are:</p>
<h5>
Bash Space-Separated (e.g., <code>--option argument</code>) (without getopt[s])
</h2>
<p>Usage <code>demo-space-separated.sh -e conf -s /etc -l /usr/lib /etc/hosts</code></p>
<div class="sourceCode" id="cb106"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true"></a><span class="fu">cat</span> <span class="op">&gt;</span>/tmp/demo-space-separated.sh <span class="op">&lt;&lt;&#39;EOF&#39;</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true"></a>#!/bin/bash</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true"></a></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true"></a>POSITIONAL=()</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true"></a>while [[ $</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true"></a># -gt 0 ]]</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true"></a>do</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true"></a>key=&quot;$1&quot;</span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true"></a></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true"></a>case $key in</span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true"></a>    -e|--extension)</span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true"></a>    EXTENSION=&quot;$2&quot;</span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true"></a>    shift</span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true"></a># past argument</span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true"></a>    shift</span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true"></a># past value</span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true"></a>    ;;</span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true"></a>    -s|--searchpath)</span>
<span id="cb106-20"><a href="#cb106-20" aria-hidden="true"></a>    SEARCHPATH=&quot;$2&quot;</span>
<span id="cb106-21"><a href="#cb106-21" aria-hidden="true"></a>    shift</span>
<span id="cb106-22"><a href="#cb106-22" aria-hidden="true"></a># past argument</span>
<span id="cb106-23"><a href="#cb106-23" aria-hidden="true"></a>    shift</span>
<span id="cb106-24"><a href="#cb106-24" aria-hidden="true"></a># past value</span>
<span id="cb106-25"><a href="#cb106-25" aria-hidden="true"></a>    ;;</span>
<span id="cb106-26"><a href="#cb106-26" aria-hidden="true"></a>    -l|--lib)</span>
<span id="cb106-27"><a href="#cb106-27" aria-hidden="true"></a>    LIBPATH=&quot;$2&quot;</span>
<span id="cb106-28"><a href="#cb106-28" aria-hidden="true"></a>    shift</span>
<span id="cb106-29"><a href="#cb106-29" aria-hidden="true"></a># past argument</span>
<span id="cb106-30"><a href="#cb106-30" aria-hidden="true"></a>    shift</span>
<span id="cb106-31"><a href="#cb106-31" aria-hidden="true"></a># past value</span>
<span id="cb106-32"><a href="#cb106-32" aria-hidden="true"></a>    ;;</span>
<span id="cb106-33"><a href="#cb106-33" aria-hidden="true"></a>    --default)</span>
<span id="cb106-34"><a href="#cb106-34" aria-hidden="true"></a>    DEFAULT=YES</span>
<span id="cb106-35"><a href="#cb106-35" aria-hidden="true"></a>    shift</span>
<span id="cb106-36"><a href="#cb106-36" aria-hidden="true"></a># past argument</span>
<span id="cb106-37"><a href="#cb106-37" aria-hidden="true"></a>    ;;</span>
<span id="cb106-38"><a href="#cb106-38" aria-hidden="true"></a>    *)</span>
<span id="cb106-39"><a href="#cb106-39" aria-hidden="true"></a># unknown option</span>
<span id="cb106-40"><a href="#cb106-40" aria-hidden="true"></a>    POSITIONAL+=(&quot;$1&quot;)</span>
<span id="cb106-41"><a href="#cb106-41" aria-hidden="true"></a># save it in an array for later</span>
<span id="cb106-42"><a href="#cb106-42" aria-hidden="true"></a>    shift</span>
<span id="cb106-43"><a href="#cb106-43" aria-hidden="true"></a># past argument</span>
<span id="cb106-44"><a href="#cb106-44" aria-hidden="true"></a>    ;;</span>
<span id="cb106-45"><a href="#cb106-45" aria-hidden="true"></a>esac</span>
<span id="cb106-46"><a href="#cb106-46" aria-hidden="true"></a>done</span>
<span id="cb106-47"><a href="#cb106-47" aria-hidden="true"></a>set -- &quot;${POSITIONAL[@]}&quot;</span>
<span id="cb106-48"><a href="#cb106-48" aria-hidden="true"></a># restore positional parameters</span>
<span id="cb106-49"><a href="#cb106-49" aria-hidden="true"></a></span>
<span id="cb106-50"><a href="#cb106-50" aria-hidden="true"></a>echo &quot;FILE EXTENSION  = ${EXTENSION}&quot;</span>
<span id="cb106-51"><a href="#cb106-51" aria-hidden="true"></a>echo &quot;SEARCH PATH     = ${SEARCHPATH}&quot;</span>
<span id="cb106-52"><a href="#cb106-52" aria-hidden="true"></a>echo &quot;LIBRARY PATH    = ${LIBPATH}&quot;</span>
<span id="cb106-53"><a href="#cb106-53" aria-hidden="true"></a>echo &quot;DEFAULT         = ${DEFAULT}&quot;</span>
<span id="cb106-54"><a href="#cb106-54" aria-hidden="true"></a>echo &quot;Number files in SEARCH PATH with EXTENSION:&quot; $(ls -1 &quot;${SEARCHPATH}&quot;/*.&quot;${EXTENSION}&quot; | wc -l)</span>
<span id="cb106-55"><a href="#cb106-55" aria-hidden="true"></a>if [[ -n $1 ]]; then</span>
<span id="cb106-56"><a href="#cb106-56" aria-hidden="true"></a>    echo &quot;Last line of file specified as non-opt/last argument:&quot;</span>
<span id="cb106-57"><a href="#cb106-57" aria-hidden="true"></a>    tail -1 &quot;$1&quot;</span>
<span id="cb106-58"><a href="#cb106-58" aria-hidden="true"></a>fi</span>
<span id="cb106-59"><a href="#cb106-59" aria-hidden="true"></a><span class="op">EOF</span></span>
<span id="cb106-60"><a href="#cb106-60" aria-hidden="true"></a></span>
<span id="cb106-61"><a href="#cb106-61" aria-hidden="true"></a><span class="fu">chmod</span> +x /tmp/demo-space-separated.sh</span>
<span id="cb106-62"><a href="#cb106-62" aria-hidden="true"></a></span>
<span id="cb106-63"><a href="#cb106-63" aria-hidden="true"></a><span class="ex">/tmp/demo-space-separated.sh</span> -e conf -s /etc -l /usr/lib /etc/hosts</span></code></pre></div>
<p>output from copy-pasting the block above:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true"></a><span class="ex">FILE</span> EXTENSION  = conf</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true"></a><span class="ex">SEARCH</span> PATH     = /etc</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true"></a><span class="ex">LIBRARY</span> PATH    = /usr/lib</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true"></a><span class="ex">DEFAULT</span>         =</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true"></a><span class="ex">Number</span> files in SEARCH PATH with EXTENSION: 14</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true"></a><span class="ex">Last</span> line of file specified as non-opt/last argument:</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true"></a></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true"></a><span class="co">#93.184.216.34    example.com</span></span></code></pre></div>
<h5>
Bash Equals-Separated (e.g., <code>--option=argument</code>) (without getopt[s])
</h2>
<p>Usage <code>demo-equals-separated.sh -e=conf -s=/etc -l=/usr/lib /etc/hosts</code></p>
<div class="sourceCode" id="cb108"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true"></a><span class="fu">cat</span> <span class="op">&gt;</span>/tmp/demo-equals-separated.sh <span class="op">&lt;&lt;&#39;EOF&#39;</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true"></a></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true"></a>#!/bin/bash</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true"></a></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true"></a>for i in &quot;$@&quot;</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true"></a>do</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true"></a>case $i in</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true"></a>    -e=*|--extension=*)</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true"></a>    EXTENSION=&quot;${i</span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true"></a>#*=}&quot;</span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true"></a>    shift</span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true"></a># past argument=value</span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true"></a>    ;;</span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true"></a>    -s=*|--searchpath=*)</span>
<span id="cb108-15"><a href="#cb108-15" aria-hidden="true"></a>    SEARCHPATH=&quot;${i</span>
<span id="cb108-16"><a href="#cb108-16" aria-hidden="true"></a>#*=}&quot;</span>
<span id="cb108-17"><a href="#cb108-17" aria-hidden="true"></a>    shift</span>
<span id="cb108-18"><a href="#cb108-18" aria-hidden="true"></a># past argument=value</span>
<span id="cb108-19"><a href="#cb108-19" aria-hidden="true"></a>    ;;</span>
<span id="cb108-20"><a href="#cb108-20" aria-hidden="true"></a>    -l=*|--lib=*)</span>
<span id="cb108-21"><a href="#cb108-21" aria-hidden="true"></a>    LIBPATH=&quot;${i</span>
<span id="cb108-22"><a href="#cb108-22" aria-hidden="true"></a>#*=}&quot;</span>
<span id="cb108-23"><a href="#cb108-23" aria-hidden="true"></a>    shift</span>
<span id="cb108-24"><a href="#cb108-24" aria-hidden="true"></a># past argument=value</span>
<span id="cb108-25"><a href="#cb108-25" aria-hidden="true"></a>    ;;</span>
<span id="cb108-26"><a href="#cb108-26" aria-hidden="true"></a>    --default)</span>
<span id="cb108-27"><a href="#cb108-27" aria-hidden="true"></a>    DEFAULT=YES</span>
<span id="cb108-28"><a href="#cb108-28" aria-hidden="true"></a>    shift</span>
<span id="cb108-29"><a href="#cb108-29" aria-hidden="true"></a># past argument with no value</span>
<span id="cb108-30"><a href="#cb108-30" aria-hidden="true"></a>    ;;</span>
<span id="cb108-31"><a href="#cb108-31" aria-hidden="true"></a>    *)</span>
<span id="cb108-32"><a href="#cb108-32" aria-hidden="true"></a></span>
<span id="cb108-33"><a href="#cb108-33" aria-hidden="true"></a># unknown option</span>
<span id="cb108-34"><a href="#cb108-34" aria-hidden="true"></a>    ;;</span>
<span id="cb108-35"><a href="#cb108-35" aria-hidden="true"></a>esac</span>
<span id="cb108-36"><a href="#cb108-36" aria-hidden="true"></a>done</span>
<span id="cb108-37"><a href="#cb108-37" aria-hidden="true"></a>echo &quot;FILE EXTENSION  = ${EXTENSION}&quot;</span>
<span id="cb108-38"><a href="#cb108-38" aria-hidden="true"></a>echo &quot;SEARCH PATH     = ${SEARCHPATH}&quot;</span>
<span id="cb108-39"><a href="#cb108-39" aria-hidden="true"></a>echo &quot;LIBRARY PATH    = ${LIBPATH}&quot;</span>
<span id="cb108-40"><a href="#cb108-40" aria-hidden="true"></a>echo &quot;DEFAULT         = ${DEFAULT}&quot;</span>
<span id="cb108-41"><a href="#cb108-41" aria-hidden="true"></a>echo &quot;Number files in SEARCH PATH with EXTENSION:&quot; $(ls -1 &quot;${SEARCHPATH}&quot;/*.&quot;${EXTENSION}&quot; | wc -l)</span>
<span id="cb108-42"><a href="#cb108-42" aria-hidden="true"></a>if [[ -n $1 ]]; then</span>
<span id="cb108-43"><a href="#cb108-43" aria-hidden="true"></a>    echo &quot;Last line of file specified as non-opt/last argument:&quot;</span>
<span id="cb108-44"><a href="#cb108-44" aria-hidden="true"></a>    tail -1 $1</span>
<span id="cb108-45"><a href="#cb108-45" aria-hidden="true"></a>fi</span>
<span id="cb108-46"><a href="#cb108-46" aria-hidden="true"></a><span class="op">EOF</span></span>
<span id="cb108-47"><a href="#cb108-47" aria-hidden="true"></a></span>
<span id="cb108-48"><a href="#cb108-48" aria-hidden="true"></a><span class="fu">chmod</span> +x /tmp/demo-equals-separated.sh</span>
<span id="cb108-49"><a href="#cb108-49" aria-hidden="true"></a></span>
<span id="cb108-50"><a href="#cb108-50" aria-hidden="true"></a><span class="ex">/tmp/demo-equals-separated.sh</span> -e=conf -s=/etc -l=/usr/lib /etc/hosts</span></code></pre></div>
<p>output from copy-pasting the block above:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true"></a><span class="ex">FILE</span> EXTENSION  = conf</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true"></a><span class="ex">SEARCH</span> PATH     = /etc</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true"></a><span class="ex">LIBRARY</span> PATH    = /usr/lib</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true"></a><span class="ex">DEFAULT</span>         =</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true"></a><span class="ex">Number</span> files in SEARCH PATH with EXTENSION: 14</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true"></a><span class="ex">Last</span> line of file specified as non-opt/last argument:</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true"></a></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true"></a><span class="co">#93.184.216.34    example.com</span></span></code></pre></div>
<p>To better understand <code>${i #*=}</code> search for “Substring Removal” in <a href="http://tldp.org/LDP/abs/html/string-manipulation.html" rel="noreferrer">this guide</a>. It is functionally equivalent to <code>sed 's/[^=]*=//' &amp;lt;&amp;lt;&amp;lt; "$i"</code> which calls a needless subprocess or <code>echo "$i" | sed 's/[^=]*=//'</code> which calls <em>two</em> needless subprocesses.</p>
<h5>
Method #2: Using bash with getopt[s]
</h1>
<p>from: <a href="http://mywiki.wooledge.org/BashFAQ/035
#getopts" rel="noreferrer">http://mywiki.wooledge.org/BashFAQ/035#getopts</a></p>
<p><strong>getopt(1) limitations</strong> (older, relatively-recent <code>getopt</code> versions):</p>
<ul>
<li>
can’t handle arguments that are empty strings
</li>
<li>
can’t handle arguments with embedded whitespace
</li>
</ul>
<p>More recent <code>getopt</code> versions don’t have these limitations.</p>
<p>Additionally, the POSIX shell (and others) offer <code>getopts</code> which doesn’t have these limitations. I’ve included a simplistic <code>getopts</code> example.</p>
<p>Usage <code>demo-getopts.sh -vf /etc/hosts foo bar</code></p>
<div class="sourceCode" id="cb110"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true"></a><span class="fu">cat</span> <span class="op">&gt;</span>/tmp/demo-getopts.sh <span class="op">&lt;&lt;&#39;EOF&#39;</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true"></a></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true"></a>#!/bin/sh</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true"></a></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true"></a></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true"></a># A POSIX variable</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true"></a>OPTIND=1</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true"></a># Reset in case getopts has been used previously in the shell.</span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true"></a></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true"></a></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true"></a># Initialize our own variables:</span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true"></a>output_file=&quot;&quot;</span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true"></a>verbose=0</span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true"></a></span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true"></a>while getopts &quot;h?vf:&quot; opt; do</span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true"></a>    case &quot;$opt&quot; in</span>
<span id="cb110-17"><a href="#cb110-17" aria-hidden="true"></a>    h|\?)</span>
<span id="cb110-18"><a href="#cb110-18" aria-hidden="true"></a>        show_help</span>
<span id="cb110-19"><a href="#cb110-19" aria-hidden="true"></a>        exit 0</span>
<span id="cb110-20"><a href="#cb110-20" aria-hidden="true"></a>        ;;</span>
<span id="cb110-21"><a href="#cb110-21" aria-hidden="true"></a>    v)  verbose=1</span>
<span id="cb110-22"><a href="#cb110-22" aria-hidden="true"></a>        ;;</span>
<span id="cb110-23"><a href="#cb110-23" aria-hidden="true"></a>    f)  output_file=$OPTARG</span>
<span id="cb110-24"><a href="#cb110-24" aria-hidden="true"></a>        ;;</span>
<span id="cb110-25"><a href="#cb110-25" aria-hidden="true"></a>    esac</span>
<span id="cb110-26"><a href="#cb110-26" aria-hidden="true"></a>done</span>
<span id="cb110-27"><a href="#cb110-27" aria-hidden="true"></a></span>
<span id="cb110-28"><a href="#cb110-28" aria-hidden="true"></a>shift $((OPTIND-1))</span>
<span id="cb110-29"><a href="#cb110-29" aria-hidden="true"></a></span>
<span id="cb110-30"><a href="#cb110-30" aria-hidden="true"></a>[ &quot;${1:-}&quot; = &quot;--&quot; ] &amp;&amp; shift</span>
<span id="cb110-31"><a href="#cb110-31" aria-hidden="true"></a></span>
<span id="cb110-32"><a href="#cb110-32" aria-hidden="true"></a>echo &quot;verbose=$verbose, output_file=&#39;$output_file&#39;, Leftovers: $@&quot;</span>
<span id="cb110-33"><a href="#cb110-33" aria-hidden="true"></a><span class="op">EOF</span></span>
<span id="cb110-34"><a href="#cb110-34" aria-hidden="true"></a></span>
<span id="cb110-35"><a href="#cb110-35" aria-hidden="true"></a><span class="fu">chmod</span> +x /tmp/demo-getopts.sh</span>
<span id="cb110-36"><a href="#cb110-36" aria-hidden="true"></a></span>
<span id="cb110-37"><a href="#cb110-37" aria-hidden="true"></a><span class="ex">/tmp/demo-getopts.sh</span> -vf /etc/hosts foo bar</span></code></pre></div>
<p>output from copy-pasting the block above:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true"></a><span class="va">verbose=</span>1, <span class="va">output_file=</span><span class="st">&#39;/etc/hosts&#39;</span>, <span class="ex">Leftovers</span>: foo bar</span></code></pre></div>
<p>The advantages of <code>getopts</code> are:</p>
<ol>
<li>
It’s more portable, and will work in other shells like <code>dash</code>.
</li>
<li>
It can handle multiple single options like <code>-vf filename</code> in the typical Unix way, automatically.
</li>
</ol>
<p>The disadvantage of <code>getopts</code> is that it can only handle short options (<code>-h</code>, not <code>--help</code>) without additional code.</p>
<p>There is a <a href="http://wiki.bash-hackers.org/howto/getopts_tutorial" rel="noreferrer">getopts tutorial</a> which explains what all of the syntax and variables mean. In bash, there is also <code>help getopts</code>, which might be informative.</p>
</section>
<section id="answer-2-score-490" class="level4">
<h4>Answer 2 (score 490)</h4>
<p><strong>No answer mentions <em>enhanced getopt</em>. And the <a href="https://stackoverflow.com/a/14203146/825924">top-voted answer</a> is misleading:</strong> It either ignores <code>-⁠vfd</code> style short options (requested by the OP) or options after positional arguments (also requested by the OP); and it ignores parsing-errors. Instead:</p>
<ul>
<li>
<strong>Use enhanced <code>getopt</code> from util-linux or formerly GNU glibc</strong>.<sup><sub>1</sub></sup>
</li>
<li>
It works with <code>getopt_long()</code> the C function of GNU glibc.
</li>
<li>
<p>Has <em>all</em> useful distinguishing features (the others don’t have them):</p>
<ul>
<li>
handles spaces, quoting characters and even binary in arguments<sup><sub>2</sub></sup> (non-enhanced <code>getopt</code> can’t do this)
</li>
<li>
it can handle options at the end: <code>script.sh -o outFile file1 file2 -v</code> (<code>getopts</code> doesn’t do this)
</li>
<li>
allows <code>=</code>-style long options: <code>script.sh --outfile=fileOut --infile fileIn</code> (allowing both is lengthy if self parsing)
</li>
<li>
allows combined short options, e.g. <code>-vfd</code> (real work if self parsing)
</li>
<li>
allows touching option-arguments, e.g. <code>-oOutfile</code> or <code>-vfdoOutfile</code>
</li>
</ul>
</li>
<li>
Is so old already<sup><sub>3</sub></sup> that no GNU system is missing this (e.g. any Linux has it).
</li>
<li>
You can test for its existence with: <code>getopt --test</code> → return value 4.
</li>
<li>
Other <code>getopt</code> or shell-builtin <code>getopts</code> are of limited use.
</li>
</ul>
<p>The following calls</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true"></a><span class="ex">myscript</span> -vfd ./foo/bar/someFile -o /fizz/someOtherFile</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true"></a><span class="ex">myscript</span> -v -f -d -o/fizz/someOtherFile -- ./foo/bar/someFile</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true"></a><span class="ex">myscript</span> --verbose --force --debug ./foo/bar/someFile -o/fizz/someOtherFile</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true"></a><span class="ex">myscript</span> --output=/fizz/someOtherFile ./foo/bar/someFile -vfd</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true"></a><span class="ex">myscript</span> ./foo/bar/someFile -df -v --output /fizz/someOtherFile</span></code></pre></div>
<p>all return</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true"></a><span class="ex">verbose</span>: y, force: y, debug: y, in: ./foo/bar/someFile, out: /fizz/someOtherFile</span></code></pre></div>
<p>with the following <code>myscript</code></p>
<div class="sourceCode" id="cb114"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true"></a></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true"></a></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true"></a><span class="co"># saner programming env: these switches turn some bugs into errors</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-o</span> errexit -o pipefail -o noclobber -o nounset</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true"></a></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true"></a></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true"></a><span class="co"># -allow a command to fail with !’s side effect on errexit</span></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true"></a></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true"></a><span class="co"># -use return value from ${PIPESTATUS[0]}, because ! hosed $?</span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true"></a>! <span class="fu">getopt</span> --test <span class="op">&gt;</span> /dev/null </span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true"></a><span class="kw">if [[</span> <span class="va">${PIPESTATUS[0]}</span> <span class="ot">-ne</span> 4<span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&#39;I’m sorry, `getopt --test` failed in this environment.&#39;</span></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true"></a>    <span class="bu">exit</span> 1</span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true"></a></span>
<span id="cb114-17"><a href="#cb114-17" aria-hidden="true"></a><span class="va">OPTIONS=</span>dfo:v</span>
<span id="cb114-18"><a href="#cb114-18" aria-hidden="true"></a><span class="va">LONGOPTS=</span>debug,force,output:,verbose</span>
<span id="cb114-19"><a href="#cb114-19" aria-hidden="true"></a></span>
<span id="cb114-20"><a href="#cb114-20" aria-hidden="true"></a></span>
<span id="cb114-21"><a href="#cb114-21" aria-hidden="true"></a><span class="co"># -regarding ! and PIPESTATUS see above</span></span>
<span id="cb114-22"><a href="#cb114-22" aria-hidden="true"></a></span>
<span id="cb114-23"><a href="#cb114-23" aria-hidden="true"></a><span class="co"># -temporarily store output to be able to check for errors</span></span>
<span id="cb114-24"><a href="#cb114-24" aria-hidden="true"></a></span>
<span id="cb114-25"><a href="#cb114-25" aria-hidden="true"></a><span class="co"># -activate quoting/enhanced mode (e.g. by writing out “--options”)</span></span>
<span id="cb114-26"><a href="#cb114-26" aria-hidden="true"></a></span>
<span id="cb114-27"><a href="#cb114-27" aria-hidden="true"></a><span class="co"># -pass arguments only via   -- &quot;$@&quot;   to separate them correctly</span></span>
<span id="cb114-28"><a href="#cb114-28" aria-hidden="true"></a>! <span class="va">PARSED=$(</span><span class="fu">getopt</span> --options=<span class="va">$OPTIONS</span> --longoptions=<span class="va">$LONGOPTS</span> --name <span class="st">&quot;</span><span class="va">$0</span><span class="st">&quot;</span> -- <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb114-29"><a href="#cb114-29" aria-hidden="true"></a><span class="kw">if [[</span> <span class="va">${PIPESTATUS[0]}</span> <span class="ot">-ne</span> 0<span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb114-30"><a href="#cb114-30" aria-hidden="true"></a></span>
<span id="cb114-31"><a href="#cb114-31" aria-hidden="true"></a><span class="co"># e.g. return value is 1</span></span>
<span id="cb114-32"><a href="#cb114-32" aria-hidden="true"></a></span>
<span id="cb114-33"><a href="#cb114-33" aria-hidden="true"></a><span class="co">#  then getopt has complained about wrong arguments to stdout</span></span>
<span id="cb114-34"><a href="#cb114-34" aria-hidden="true"></a>    <span class="bu">exit</span> 2</span>
<span id="cb114-35"><a href="#cb114-35" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb114-36"><a href="#cb114-36" aria-hidden="true"></a></span>
<span id="cb114-37"><a href="#cb114-37" aria-hidden="true"></a><span class="co"># read getopt’s output this way to handle the quoting right:</span></span>
<span id="cb114-38"><a href="#cb114-38" aria-hidden="true"></a><span class="bu">eval</span> set -- <span class="st">&quot;</span><span class="va">$PARSED</span><span class="st">&quot;</span></span>
<span id="cb114-39"><a href="#cb114-39" aria-hidden="true"></a></span>
<span id="cb114-40"><a href="#cb114-40" aria-hidden="true"></a><span class="va">d=</span>n <span class="va">f=</span>n <span class="va">v=</span>n <span class="va">outFile=</span>-</span>
<span id="cb114-41"><a href="#cb114-41" aria-hidden="true"></a></span>
<span id="cb114-42"><a href="#cb114-42" aria-hidden="true"></a><span class="co"># now enjoy the options in order and nicely split until we see --</span></span>
<span id="cb114-43"><a href="#cb114-43" aria-hidden="true"></a><span class="kw">while</span> <span class="fu">true</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb114-44"><a href="#cb114-44" aria-hidden="true"></a>    <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="kw"> in</span></span>
<span id="cb114-45"><a href="#cb114-45" aria-hidden="true"></a>        -d<span class="kw">|</span>--debug<span class="kw">)</span></span>
<span id="cb114-46"><a href="#cb114-46" aria-hidden="true"></a>            <span class="va">d=</span>y</span>
<span id="cb114-47"><a href="#cb114-47" aria-hidden="true"></a>            <span class="bu">shift</span></span>
<span id="cb114-48"><a href="#cb114-48" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb114-49"><a href="#cb114-49" aria-hidden="true"></a>        -f<span class="kw">|</span>--force<span class="kw">)</span></span>
<span id="cb114-50"><a href="#cb114-50" aria-hidden="true"></a>            <span class="va">f=</span>y</span>
<span id="cb114-51"><a href="#cb114-51" aria-hidden="true"></a>            <span class="bu">shift</span></span>
<span id="cb114-52"><a href="#cb114-52" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb114-53"><a href="#cb114-53" aria-hidden="true"></a>        -v<span class="kw">|</span>--verbose<span class="kw">)</span></span>
<span id="cb114-54"><a href="#cb114-54" aria-hidden="true"></a>            <span class="va">v=</span>y</span>
<span id="cb114-55"><a href="#cb114-55" aria-hidden="true"></a>            <span class="bu">shift</span></span>
<span id="cb114-56"><a href="#cb114-56" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb114-57"><a href="#cb114-57" aria-hidden="true"></a>        -o<span class="kw">|</span>--output<span class="kw">)</span></span>
<span id="cb114-58"><a href="#cb114-58" aria-hidden="true"></a>            <span class="va">outFile=</span><span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span></span>
<span id="cb114-59"><a href="#cb114-59" aria-hidden="true"></a>            <span class="bu">shift</span> 2</span>
<span id="cb114-60"><a href="#cb114-60" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb114-61"><a href="#cb114-61" aria-hidden="true"></a>        --<span class="kw">)</span></span>
<span id="cb114-62"><a href="#cb114-62" aria-hidden="true"></a>            <span class="bu">shift</span></span>
<span id="cb114-63"><a href="#cb114-63" aria-hidden="true"></a>            <span class="bu">break</span></span>
<span id="cb114-64"><a href="#cb114-64" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb114-65"><a href="#cb114-65" aria-hidden="true"></a>        *<span class="kw">)</span></span>
<span id="cb114-66"><a href="#cb114-66" aria-hidden="true"></a>            <span class="bu">echo</span> <span class="st">&quot;Programming error&quot;</span></span>
<span id="cb114-67"><a href="#cb114-67" aria-hidden="true"></a>            <span class="bu">exit</span> 3</span>
<span id="cb114-68"><a href="#cb114-68" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb114-69"><a href="#cb114-69" aria-hidden="true"></a>    <span class="kw">esac</span></span>
<span id="cb114-70"><a href="#cb114-70" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb114-71"><a href="#cb114-71" aria-hidden="true"></a></span>
<span id="cb114-72"><a href="#cb114-72" aria-hidden="true"></a></span>
<span id="cb114-73"><a href="#cb114-73" aria-hidden="true"></a><span class="co"># handle non-option arguments</span></span>
<span id="cb114-74"><a href="#cb114-74" aria-hidden="true"></a><span class="kw">if [[</span> $</span>
<span id="cb114-75"><a href="#cb114-75" aria-hidden="true"></a><span class="co"># -ne 1 ]]; then</span></span>
<span id="cb114-76"><a href="#cb114-76" aria-hidden="true"></a>    echo <span class="st">&quot;</span><span class="va">$0</span><span class="st">: A single input file is required.&quot;</span></span>
<span id="cb114-77"><a href="#cb114-77" aria-hidden="true"></a>    exit 4</span>
<span id="cb114-78"><a href="#cb114-78" aria-hidden="true"></a>fi</span>
<span id="cb114-79"><a href="#cb114-79" aria-hidden="true"></a></span>
<span id="cb114-80"><a href="#cb114-80" aria-hidden="true"></a>echo <span class="st">&quot;verbose: </span><span class="va">$v</span><span class="st">, force: </span><span class="va">$f</span><span class="st">, debug: </span><span class="va">$d</span><span class="st">, in: </span><span class="va">$1</span><span class="st">, out: </span><span class="va">$outFile</span><span class="st">&quot;</span></span></code></pre></div>
<hr>
<p>
<sup><sub>1</sub></sup> enhanced getopt is available on most “bash-systems”, including Cygwin; on OS X try <a href="https://stackoverflow.com/a/37485578/825924">brew install gnu-getopt</a> or <code>sudo port install getopt</code><br> <sup><sub>2</sub></sup> the POSIX <code>exec()</code> conventions have no reliable way to pass binary NULL in command line arguments; those bytes prematurely end the argument<br> <sup><sub>3</sub></sup> first version released in 1997 or before (I only tracked it back to 1997)
</p>
</section>
<section id="answer-3-score-123" class="level4">
<h4>Answer 3 (score 123)</h4>
<p>from : <a href="https://web.archive.org/web/20120818044047/http://www.digitalpeer.com/id/parsing" rel="noreferrer">digitalpeer.com</a> with minor modifications</p>
<p>Usage <code>myscript.sh -p=my_prefix -s=dirname -l=libname</code></p>
<div class="sourceCode" id="cb115"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true"></a></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true"></a><span class="kw">case</span> <span class="va">$i</span><span class="kw"> in</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true"></a>    -p=*<span class="kw">|</span>--prefix=*<span class="kw">)</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true"></a>    <span class="va">PREFIX=</span><span class="st">&quot;</span><span class="va">${i</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true"></a><span class="va">#</span>*=<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true"></a></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true"></a>    -s=*<span class="kw">|</span>--searchpath=*<span class="kw">)</span></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true"></a>    <span class="va">SEARCHPATH=</span><span class="st">&quot;</span><span class="va">${i</span></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true"></a><span class="va">#</span>*=<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true"></a>    -l=*<span class="kw">|</span>--lib=*<span class="kw">)</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true"></a>    <span class="va">DIR=</span><span class="st">&quot;</span><span class="va">${i</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true"></a><span class="va">#</span>*=<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true"></a>    --default<span class="kw">)</span></span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true"></a>    <span class="va">DEFAULT=</span>YES</span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true"></a>    *<span class="kw">)</span></span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true"></a></span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true"></a><span class="co"># unknown option</span></span>
<span id="cb115-25"><a href="#cb115-25" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb115-26"><a href="#cb115-26" aria-hidden="true"></a><span class="kw">esac</span></span>
<span id="cb115-27"><a href="#cb115-27" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb115-28"><a href="#cb115-28" aria-hidden="true"></a><span class="bu">echo</span> PREFIX = <span class="va">${PREFIX}</span></span>
<span id="cb115-29"><a href="#cb115-29" aria-hidden="true"></a><span class="bu">echo</span> SEARCH PATH = <span class="va">${SEARCHPATH}</span></span>
<span id="cb115-30"><a href="#cb115-30" aria-hidden="true"></a><span class="bu">echo</span> DIRS = <span class="va">${DIR}</span></span>
<span id="cb115-31"><a href="#cb115-31" aria-hidden="true"></a><span class="bu">echo</span> DEFAULT = <span class="va">${DEFAULT}</span></span></code></pre></div>
<p>To better understand <code>${i #*=}</code> search for “Substring Removal” in <a href="http://tldp.org/LDP/abs/html/string-manipulation.html" rel="noreferrer">this guide</a>. It is functionally equivalent to <code>sed 's/[^=]*=//' &amp;lt;&amp;lt;&amp;lt; "$i"</code> which calls a needless subprocess or <code>echo "$i" | sed 's/[^=]*=//'</code> which calls <em>two</em> needless subprocesses.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="yyyy-mm-dd-format-date-in-shell-script-score-1310931-in-2018" class="level3">
<h3>14: YYYY-MM-DD format date in shell script (score <a href="https://stackoverflow.com/q/1401482.html">1310931</a> in 2018)</h3>
<section id="question-13" class="level4">
<h4>Question</h4>
<p>I tried using <code>$(date)</code> in my bash shell script, however I want the date in YYYY-MM-DD format. How do I get this?</p>
</section>
<section id="answer-accepted-score-1725" class="level4">
<h4>Answer accepted (score 1725)</h4>
<p>In bash (&gt;=4.2) it is preferable to use printf’s built-in date formatter (part of bash) rather than the external <code>date</code> (usually GNU date).</p>
<p>As such:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true"></a></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true"></a><span class="co"># put current date as yyyy-mm-dd in $date</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true"></a></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true"></a><span class="co"># -1 -&gt; explicit current date, bash &gt;=4.3 defaults to current time if not provided</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true"></a></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true"></a><span class="co"># -2 -&gt; start time for shell</span></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true"></a><span class="bu">printf</span> -v date <span class="st">&#39;%(%Y-%m-%d)T\n&#39;</span> -1 </span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true"></a></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true"></a></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true"></a><span class="co"># put current date as yyyy-mm-dd HH:MM:SS in $date</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true"></a><span class="bu">printf</span> -v date <span class="st">&#39;%(%Y-%m-%d %H:%M:%S)T\n&#39;</span> -1 </span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true"></a></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true"></a></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true"></a><span class="co"># to print directly remove -v flag, as such:</span></span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&#39;%(%Y-%m-%d)T\n&#39;</span> -1</span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true"></a></span>
<span id="cb116-17"><a href="#cb116-17" aria-hidden="true"></a><span class="co"># -&gt; current date printed to terminal</span></span></code></pre></div>
<p>In bash (&lt;4.2):</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true"></a></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true"></a><span class="co"># put current date as yyyy-mm-dd in $date</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true"></a><span class="va">date=$(</span><span class="fu">date</span> <span class="st">&#39;+%Y-%m-%d&#39;</span><span class="va">)</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true"></a></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true"></a></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true"></a><span class="co"># put current date as yyyy-mm-dd HH:MM:SS in $date</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true"></a><span class="va">date=$(</span><span class="fu">date</span> <span class="st">&#39;+%Y-%m-%d %H:%M:%S&#39;</span><span class="va">)</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true"></a></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true"></a></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true"></a><span class="co"># print current date directly</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$(</span><span class="fu">date</span> <span class="st">&#39;+%Y-%m-%d&#39;</span><span class="va">)</span></span></code></pre></div>
<p>Other available date formats can be viewed from the <a href="http://man7.org/linux/man-pages/man1/date.1.html" rel="noreferrer">date man pages</a> (for external non-bash specific command):</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true"></a><span class="fu">man</span> date</span></code></pre></div>
</section>
<section id="answer-2-score-313" class="level4">
<h4>Answer 2 (score 313)</h4>
<p>Try: <code>$(date +%F)</code></p>
</section>
<section id="answer-3-score-80" class="level4">
<h4>Answer 3 (score 80)</h4>
<p>You can do something like this:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true"></a>$ <span class="fu">date</span> +<span class="st">&#39;%Y-%m-%d&#39;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-count-lines-in-a-document-score-1222035-in-2015" class="level3">
<h3>15: How to count lines in a document? (score <a href="https://stackoverflow.com/q/3137094.html">1222035</a> in 2015)</h3>
<section id="question-14" class="level4">
<h4>Question</h4>
<p>I have lines like these, and I want to know how many lines I actually have…</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true"></a><span class="ex">09</span>:16:39 AM  all    2.00    0.00    4.00    0.00    0.00    0.00    0.00    0.00   94.00</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true"></a><span class="ex">09</span>:16:40 AM  all    5.00    0.00    0.00    4.00    0.00    0.00    0.00    0.00   91.00</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true"></a><span class="ex">09</span>:16:41 AM  all    0.00    0.00    4.00    0.00    0.00    0.00    0.00    0.00   96.00</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true"></a><span class="ex">09</span>:16:42 AM  all    3.00    0.00    1.00    0.00    0.00    0.00    0.00    0.00   96.00</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true"></a><span class="ex">09</span>:16:43 AM  all    0.00    0.00    1.00    0.00    1.00    0.00    0.00    0.00   98.00</span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true"></a><span class="ex">09</span>:16:44 AM  all    0.00    0.00    0.00    0.00    0.00    0.00    0.00    0.00  100.00</span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true"></a><span class="ex">09</span>:16:45 AM  all    2.00    0.00    6.00    0.00    0.00    0.00    0.00    0.00   92.00</span></code></pre></div>
<p>Is there a way to count them all using linux commands?</p>
</section>
<section id="answer-accepted-score-1840" class="level4">
<h4>Answer accepted (score 1840)</h4>
<p>Use <code>wc</code>:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true"></a><span class="fu">wc</span> -l <span class="op">&lt;</span>filename<span class="op">&gt;</span></span></code></pre></div>
<p>This will output the number of lines in <code>&amp;lt;filename&amp;gt;</code>:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true"></a>$ <span class="fu">wc</span> -l /dir/file.txt</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true"></a><span class="ex">3272485</span> /dir/file.txt</span></code></pre></div>
<p>Or, to omit the <code>&amp;lt;filename&amp;gt;</code> from the result use <code>wc -l &amp;lt; &amp;lt;filename&amp;gt;</code>:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true"></a>$ <span class="fu">wc</span> -l <span class="op">&lt;</span> /dir/file.txt</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true"></a><span class="ex">3272485</span></span></code></pre></div>
<p>You can also pipe data to <code>wc</code> as well:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true"></a>$ <span class="fu">cat</span> /dir/file.txt <span class="kw">|</span> <span class="fu">wc</span> -l</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true"></a><span class="ex">3272485</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true"></a>$ <span class="ex">curl</span> yahoo.com --silent <span class="kw">|</span> <span class="fu">wc</span> -l</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true"></a><span class="ex">63</span></span></code></pre></div>
</section>
<section id="answer-2-score-133" class="level4">
<h4>Answer 2 (score 133)</h4>
<p>To count all lines use:</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true"></a>$ <span class="fu">wc</span> -l file</span></code></pre></div>
<p>To filter and count only lines with pattern use:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true"></a>$ <span class="fu">grep</span> -w <span class="st">&quot;pattern&quot;</span> -c file  </span></code></pre></div>
<p>Or use -v to invert match:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true"></a>$ <span class="fu">grep</span> -w <span class="st">&quot;pattern&quot;</span> -c -v file </span></code></pre></div>
<p>See the grep man page to take a look at the -e,-i and -x args…</p>
</section>
<section id="answer-3-score-70-1" class="level4">
<h4>Answer 3 (score 70)</h4>
<div class="sourceCode" id="cb128"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true"></a><span class="fu">wc</span> -l <span class="op">&lt;</span>file.txt<span class="op">&gt;</span></span></code></pre></div>
<p>Or</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true"></a><span class="bu">command</span> <span class="kw">|</span> <span class="fu">wc</span> -l</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-trim-whitespace-from-a-bash-variable-score-1215318-in-2018" class="level3">
<h3>16: How to trim whitespace from a Bash variable? (score <a href="https://stackoverflow.com/q/369758.html">1215318</a> in 2018)</h3>
<section id="question-15" class="level4">
<h4>Question</h4>
<p>I have a shell script with this code:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true"></a><span class="va">var=</span><span class="kw">`</span><span class="ex">hg</span> st -R <span class="st">&quot;</span><span class="va">$path</span><span class="st">&quot;</span><span class="kw">`</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="va">$var</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>But the conditional code always executes, because <code>hg st</code> always prints at least one newline character.</p>
<ul>
<li>
Is there a simple way to strip whitespace from <code>$var</code> (like <code>trim()</code> in <a href="http://en.wikipedia.org/wiki/PHP" rel="noreferrer">PHP</a>)?
</li>
</ul>
<p>or</p>
<ul>
<li>
Is there a standard way of dealing with this issue?
</li>
</ul>
<p>I could use <a href="http://en.wikipedia.org/wiki/Sed" rel="noreferrer">sed</a> or <a href="http://en.wikipedia.org/wiki/AWK" rel="noreferrer">AWK</a>, but I’d like to think there is a more elegant solution to this problem.</p>
</section>
<section id="answer-2-score-961" class="level4">
<h4>Answer 2 (score 961)</h4>
<p>Let’s define a variable containing leading, trailing, and intermediate whitespace:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true"></a><span class="va">FOO=</span><span class="st">&#39; test test test &#39;</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;FOO=&#39;</span><span class="va">${FOO}</span><span class="st">&#39;&quot;</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true"></a></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true"></a><span class="co"># &gt; FOO=&#39; test test test &#39;</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;length(FOO)==${</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true"></a><span class="st">#FOO}&quot;</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true"></a></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true"></a><span class="co"># &gt; length(FOO)==16</span></span></code></pre></div>
<hr>
<p>How to remove all whitespace (denoted by <code>[:space:]</code> in <code>tr</code>):</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true"></a><span class="va">FOO=</span><span class="st">&#39; test test test &#39;</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true"></a><span class="va">FOO_NO_WHITESPACE=</span><span class="st">&quot;</span><span class="va">$(</span><span class="bu">echo</span> -e <span class="st">&quot;</span><span class="va">${FOO}</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">tr</span> -d <span class="st">&#39;[:space:]&#39;</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;FOO_NO_WHITESPACE=&#39;</span><span class="va">${FOO_NO_WHITESPACE}</span><span class="st">&#39;&quot;</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true"></a></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true"></a><span class="co"># &gt; FOO_NO_WHITESPACE=&#39;testtesttest&#39;</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;length(FOO_NO_WHITESPACE)==${</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true"></a><span class="st">#FOO_NO_WHITESPACE}&quot;</span></span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true"></a></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true"></a><span class="co"># &gt; length(FOO_NO_WHITESPACE)==12</span></span></code></pre></div>
<hr>
<p>How to remove leading whitespace only:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true"></a><span class="va">FOO=</span><span class="st">&#39; test test test &#39;</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true"></a><span class="va">FOO_NO_LEAD_SPACE=</span><span class="st">&quot;</span><span class="va">$(</span><span class="bu">echo</span> -e <span class="st">&quot;</span><span class="va">${FOO}</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">sed</span> -e <span class="st">&#39;s/^[[:space:]]*//&#39;</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;FOO_NO_LEAD_SPACE=&#39;</span><span class="va">${FOO_NO_LEAD_SPACE}</span><span class="st">&#39;&quot;</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true"></a></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true"></a><span class="co"># &gt; FOO_NO_LEAD_SPACE=&#39;test test test &#39;</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;length(FOO_NO_LEAD_SPACE)==${</span></span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true"></a><span class="st">#FOO_NO_LEAD_SPACE}&quot;</span></span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true"></a></span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true"></a><span class="co"># &gt; length(FOO_NO_LEAD_SPACE)==15</span></span></code></pre></div>
<hr>
<p>How to remove trailing whitespace only:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true"></a><span class="va">FOO=</span><span class="st">&#39; test test test &#39;</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true"></a><span class="va">FOO_NO_TRAIL_SPACE=</span><span class="st">&quot;</span><span class="va">$(</span><span class="bu">echo</span> -e <span class="st">&quot;</span><span class="va">${FOO}</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">sed</span> -e <span class="st">&#39;s/[[:space:]]*$//&#39;</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;FOO_NO_TRAIL_SPACE=&#39;</span><span class="va">${FOO_NO_TRAIL_SPACE}</span><span class="st">&#39;&quot;</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true"></a></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true"></a><span class="co"># &gt; FOO_NO_TRAIL_SPACE=&#39; test test test&#39;</span></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;length(FOO_NO_TRAIL_SPACE)==${</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true"></a><span class="st">#FOO_NO_TRAIL_SPACE}&quot;</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true"></a></span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true"></a><span class="co"># &gt; length(FOO_NO_TRAIL_SPACE)==15</span></span></code></pre></div>
<hr>
<p>How to remove both leading and trailing spaces–chain the <code>sed</code>s:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true"></a><span class="va">FOO=</span><span class="st">&#39; test test test &#39;</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true"></a><span class="va">FOO_NO_EXTERNAL_SPACE=</span><span class="st">&quot;</span><span class="va">$(</span><span class="bu">echo</span> -e <span class="st">&quot;</span><span class="va">${FOO}</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">sed</span> -e <span class="st">&#39;s/^[[:space:]]*//&#39;</span> -e <span class="st">&#39;s/[[:space:]]*$//&#39;</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;FOO_NO_EXTERNAL_SPACE=&#39;</span><span class="va">${FOO_NO_EXTERNAL_SPACE}</span><span class="st">&#39;&quot;</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true"></a></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true"></a><span class="co"># &gt; FOO_NO_EXTERNAL_SPACE=&#39;test test test&#39;</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;length(FOO_NO_EXTERNAL_SPACE)==${</span></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true"></a><span class="st">#FOO_NO_EXTERNAL_SPACE}&quot;</span></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true"></a></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true"></a><span class="co"># &gt; length(FOO_NO_EXTERNAL_SPACE)==14</span></span></code></pre></div>
<p>Alternatively, if your bash supports it, you can replace <code>echo -e "${FOO}" | sed ...</code> with <code>sed ... &amp;lt;&amp;lt;&amp;lt;${FOO}</code>, like so (for trailing whitespace):</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true"></a><span class="va">FOO_NO_TRAIL_SPACE=</span><span class="st">&quot;</span><span class="va">$(</span><span class="fu">sed</span> -e <span class="st">&#39;s/[[:space:]]*$//&#39;</span> <span class="op">&lt;&lt;&lt;</span><span class="va">${FOO})</span><span class="st">&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-858" class="level4">
<h4>Answer 3 (score 858)</h4>
<p>A simple answer is:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;   lol  &quot;</span> <span class="kw">|</span> <span class="fu">xargs</span></span></code></pre></div>
<p><a href="http://en.wikipedia.org/wiki/Xargs">Xargs</a> will do the trimming for you. It’s one command/program, no parameters, returns the trimmed string, easy as that!</p>
<p>Note: this doesn’t remove the internal spaces so <code>"foo bar"</code> stays the same. It does NOT become <code>"foobar"</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-if-a-variable-is-set-in-bash-score-1161315-in-2016" class="level3">
<h3>17: How to check if a variable is set in Bash? (score <a href="https://stackoverflow.com/q/3601515.html">1161315</a> in 2016)</h3>
<section id="question-16" class="level4">
<h4>Question</h4>
<p>How do I know if a variable is set in Bash?</p>
<p>For example, how do I check if the user gave the first parameter to a function?</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> a</span> <span class="kw">{</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true"></a></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true"></a><span class="co"># if $1 is set ?</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-2067" class="level4">
<h4>Answer accepted (score 2067)</h4>
<h5>
(Usually) The right way
</h2>
<div class="sourceCode" id="cb139"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-z</span> <span class="va">${var+</span>x<span class="va">}</span><span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;var is unset&quot;</span><span class="kw">;</span> <span class="kw">else</span> <span class="bu">echo</span> <span class="st">&quot;var is set to &#39;</span><span class="va">$var</span><span class="st">&#39;&quot;</span><span class="kw">;</span> <span class="kw">fi</span></span></code></pre></div>
<p>where <code>${var+x}</code> is a <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html
#tag_18_06_02" rel="noreferrer">parameter expansion</a> which evaluates to nothing if <code>var</code> is unset, and substitutes the string <code>x</code> otherwise.</p>
<h5>
Quotes Digression
</h3>
<p>Quotes can be omitted (so we can say <code>${var+x}</code> instead of <code>"${var+x}"</code>) because this syntax &amp; usage guarantees this will only expand to something that does not require quotes (since it either expands to <code>x</code> (which contains no word breaks so it needs no quotes), or to nothing (which results in <code>[ -z  ]</code>, which conveniently evaluates to the same value (true) that <code>[ -z "" ]</code> does as well)).</p>
<p>However, while quotes can be safely omitted, and it was not immediately obvious to all (it wasn’t even apparent to <a href="https://stackoverflow.com/users/2255628/destiny-architect">the first author of this quotes explanation</a> who is also a major Bash coder), it would sometimes be better to write the solution with quotes as <code>[ -z "${var+x}" ]</code>, at the very small possible cost of an O(1) speed penalty. The first author also added this as a comment next to the code using this solution giving the URL to this answer, which now also includes the explanation for why the quotes can be safely omitted.</p>
<h5>
(Often) The wrong way
</h2>
<div class="sourceCode" id="cb140"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-z</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;var is blank&quot;</span><span class="kw">;</span> <span class="kw">else</span> <span class="bu">echo</span> <span class="st">&quot;var is set to &#39;</span><span class="va">$var</span><span class="st">&#39;&quot;</span><span class="kw">;</span> <span class="kw">fi</span></span></code></pre></div>
<p>This is often wrong because it doesn’t distinguish between a variable that is unset and a variable that is set to the empty string. That is to say, if <code>var=''</code>, then the above solution will output “var is blank”.</p>
<p>The distinction between unset and “set to the empty string” is essential in situations where the user has to specify an extension, or additional list of properties, and that not specifying them defaults to a non-empty value, whereas specifying the empty string should make the script use an empty extension or list of additional properties.</p>
<p>The distinction may not be essential in every scenario though. In those cases <code>[ -z "$var" ]</code> will be just fine.</p>
</section>
<section id="answer-2-score-816" class="level4">
<h4>Answer 2 (score 816)</h4>
<p>To check for non-null/non-zero string variable, i.e. if set, use</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="bu"> ]</span></span></code></pre></div>
<p>It’s the opposite of <code>-z</code>. I find myself using <code>-n</code> more than <code>-z</code>.</p>
<p>You would use it like:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;You supplied the first parameter!&quot;</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;First parameter not supplied.&quot;</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-3-score-440" class="level4">
<h4>Answer 3 (score 440)</h4>
<p>Here’s how to test whether a parameter is <strong>unset</strong>, or <strong>empty (“Null”)</strong> or <strong>set with a value</strong>:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true"></a><span class="ex">+--------------------+----------------------+-----------------+-----------------+</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true"></a><span class="kw">|</span>                    <span class="kw">|</span>       <span class="ex">parameter</span>      <span class="kw">|</span>     <span class="ex">parameter</span>   <span class="kw">|</span>    <span class="ex">parameter</span>    <span class="kw">|</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true"></a><span class="kw">|</span>                    <span class="kw">|</span>   <span class="ex">Set</span> and Not Null   <span class="kw">|</span>   <span class="ex">Set</span> But Null  <span class="kw">|</span>      <span class="ex">Unset</span>      <span class="kw">|</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true"></a><span class="ex">+--------------------+----------------------+-----------------+-----------------+</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true"></a><span class="kw">|</span> <span class="va">${parameter:-</span>word<span class="va">}</span> <span class="kw">|</span> <span class="ex">substitute</span> parameter <span class="kw">|</span> <span class="ex">substitute</span> word <span class="kw">|</span> <span class="ex">substitute</span> word <span class="kw">|</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true"></a><span class="kw">|</span> <span class="va">${parameter-</span>word<span class="va">}</span>  <span class="kw">|</span> <span class="ex">substitute</span> parameter <span class="kw">|</span> <span class="ex">substitute</span> null <span class="kw">|</span> <span class="ex">substitute</span> word <span class="kw">|</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true"></a><span class="kw">|</span> <span class="va">${parameter:=</span>word<span class="va">}</span> <span class="kw">|</span> <span class="ex">substitute</span> parameter <span class="kw">|</span> <span class="ex">assign</span> word     <span class="kw">|</span> <span class="ex">assign</span> word     <span class="kw">|</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true"></a><span class="kw">|</span> <span class="va">${parameter=</span>word<span class="va">}</span>  <span class="kw">|</span> <span class="ex">substitute</span> parameter <span class="kw">|</span> <span class="ex">substitute</span> null <span class="kw">|</span> <span class="ex">assign</span> word     <span class="kw">|</span></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true"></a><span class="kw">|</span> <span class="va">${parameter:?</span>word<span class="va">}</span> <span class="kw">|</span> <span class="ex">substitute</span> parameter <span class="kw">|</span> <span class="ex">error</span>, exit     <span class="kw">|</span> <span class="ex">error</span>, exit     <span class="kw">|</span></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true"></a><span class="kw">|</span> <span class="va">${parameter?</span>word<span class="va">}</span>  <span class="kw">|</span> <span class="ex">substitute</span> parameter <span class="kw">|</span> <span class="ex">substitute</span> null <span class="kw">|</span> <span class="ex">error</span>, exit     <span class="kw">|</span></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true"></a><span class="kw">|</span> <span class="va">${parameter:+</span>word<span class="va">}</span> <span class="kw">|</span> <span class="ex">substitute</span> word      <span class="kw">|</span> <span class="ex">substitute</span> null <span class="kw">|</span> <span class="ex">substitute</span> null <span class="kw">|</span></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true"></a><span class="kw">|</span> <span class="va">${parameter+</span>word<span class="va">}</span>  <span class="kw">|</span> <span class="ex">substitute</span> word      <span class="kw">|</span> <span class="ex">substitute</span> word <span class="kw">|</span> <span class="ex">substitute</span> null <span class="kw">|</span></span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true"></a><span class="ex">+--------------------+----------------------+-----------------+-----------------+</span></span></code></pre></div>
<p>Source: <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html
#tag_18_06_02">POSIX: Parameter Expansion</a>:</p>
<blockquote>
In all cases shown with “substitute”, the expression is replaced with the value shown. In all cases shown with “assign”, parameter is assigned that value, which also replaces the expression.
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-compare-strings-in-bash-score-1126175-in-2018" class="level3">
<h3>18: How to compare strings in Bash (score <a href="https://stackoverflow.com/q/2237080.html">1126175</a> in 2018)</h3>
<section id="question-17" class="level4">
<h4>Question</h4>
<p>How do I compare a variable to a string (and do something if they match)?</p>
</section>
<section id="answer-accepted-score-1265" class="level4">
<h4>Answer accepted (score 1265)</h4>
<h5>
Using variables in if statements
</h1>
<div class="sourceCode" id="cb144"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$x</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;valid&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;x has the value &#39;valid&#39;&quot;</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>If you want to do something when they don’t match, replace <code>=</code> with <code>!=</code>. You can read more about <a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-11.html
#ss11.1" rel="noreferrer">string operations</a> and <a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-11.html#ss11.3" rel="noreferrer">arithmetic operations</a> in their respective documentation.</p>
<h5>
Why do we use quotes around <code>$x</code>?
</h3>
<p>You want the quotes around <code>$x</code>, because if it is empty, your bash script encounters a syntax error as seen below:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">=</span> <span class="st">&quot;valid&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span></code></pre></div>
<hr>
<h5>
Non-standard use of <code>==</code> operator
</h3>
<p>Note that <code>bash</code> allows <code>==</code> to be used for equality with <code>[</code>, but <a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-6.html" rel="noreferrer">this is not standard</a>.</p>
<p>Use either the first case wherein the quotes around <code>$x</code> are optional:</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$x</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;valid&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></span></code></pre></div>
<p>or use the second case:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$x</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;valid&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span></code></pre></div>
</section>
<section id="answer-2-score-132" class="level4">
<h4>Answer 2 (score 132)</h4>
<p>Or, if you don’t need else clause:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true"></a><span class="bu">[</span> <span class="st">&quot;</span><span class="va">$x</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;valid&quot;</span><span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> <span class="st">&quot;x has the value &#39;valid&#39;&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-70-2" class="level4">
<h4>Answer 3 (score 70)</h4>
<div class="sourceCode" id="cb149"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true"></a><span class="va">a=</span><span class="st">&quot;abc&quot;</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true"></a><span class="va">b=</span><span class="st">&quot;def&quot;</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true"></a></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true"></a></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true"></a><span class="co"># Equality Comparison</span></span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;</span><span class="va">$b</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Strings match&quot;</span></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Strings don&#39;t match&quot;</span></span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true"></a></span>
<span id="cb149-12"><a href="#cb149-12" aria-hidden="true"></a></span>
<span id="cb149-13"><a href="#cb149-13" aria-hidden="true"></a><span class="co"># Lexicographic (greater than, less than) comparison.</span></span>
<span id="cb149-14"><a href="#cb149-14" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="dt">\&lt;</span> <span class="st">&quot;</span><span class="va">$b</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb149-15"><a href="#cb149-15" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st"> is lexicographically smaller then </span><span class="va">$b</span><span class="st">&quot;</span></span>
<span id="cb149-16"><a href="#cb149-16" aria-hidden="true"></a><span class="kw">elif</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="dt">\&gt;</span> <span class="st">&quot;</span><span class="va">$b</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb149-17"><a href="#cb149-17" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$b</span><span class="st"> is lexicographically smaller than </span><span class="va">$a</span><span class="st">&quot;</span></span>
<span id="cb149-18"><a href="#cb149-18" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb149-19"><a href="#cb149-19" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Strings are equal&quot;</span></span>
<span id="cb149-20"><a href="#cb149-20" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p><strong>Notes:</strong></p>
<ol>
<li>
Spaces between <code>if</code> and <code>[</code> and <code>]</code> are important
</li>
<li>
<code>&amp;gt;</code> and <code>&amp;lt;</code> are redirection operators so escape it with <code>\&amp;gt;</code> and <code>\&amp;lt;</code> respectively for strings.
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="extract-substring-in-bash-score-1122542-in-2017" class="level3">
<h3>19: Extract substring in Bash (score <a href="https://stackoverflow.com/q/428109.html">1122542</a> in 2017)</h3>
<section id="question-18" class="level4">
<h4>Question</h4>
<p>Given a filename in the form <code>someletters_12345_moreleters.ext</code>, I want to extract the 5 digits and put them into a variable.</p>
<p>So to emphasize the point, I have a filename with x number of characters then a five digit sequence surrounded by a single underscore on either side then another set of x number of characters. I want to take the 5 digit number and put that into a variable.</p>
<p>I am very interested in the number of different ways that this can be accomplished.</p>
</section>
<section id="answer-accepted-score-638" class="level4">
<h4>Answer accepted (score 638)</h4>
<p>Use <a href="http://www.manpagez.com/man/1/cut/" rel="noreferrer">cut</a>:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&#39;someletters_12345_moreleters.ext&#39;</span> <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">&#39;_&#39;</span> -f 2</span></code></pre></div>
<p>More generic:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true"></a><span class="va">INPUT=</span><span class="st">&#39;someletters_12345_moreleters.ext&#39;</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true"></a><span class="va">SUBSTRING=$(</span><span class="bu">echo</span> <span class="va">$INPUT</span><span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">&#39;_&#39;</span> -f 2<span class="va">)</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$SUBSTRING</span></span></code></pre></div>
</section>
<section id="answer-2-score-1012" class="level4">
<h4>Answer 2 (score 1012)</h4>
<p>If <em>x</em> is constant, the following parameter expansion performs substring extraction:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true"></a><span class="va">b=${a:12:5}</span></span></code></pre></div>
<p>where <strong>12</strong> is the offset (zero-based) and <strong>5</strong> is the length</p>
<p>If the underscores around the digits are the only ones in the input, you can strip off the prefix and suffix (respectively) in two steps:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true"></a><span class="va">tmp=${a</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true"></a><span class="va">#</span>*_<span class="va">}</span>   # <span class="ex">remove</span> prefix ending in <span class="st">&quot;_&quot;</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true"></a><span class="va">b=${tmp%</span>_*<span class="va">}</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true"></a><span class="co"># remove suffix starting with &quot;_&quot;</span></span></code></pre></div>
<p>If there are other underscores, it’s probably feasible anyway, albeit more tricky. If anyone knows how to perform both expansions in a single expression, I’d like to know too.</p>
<p>Both solutions presented are pure bash, with no process spawning involved, hence very fast.</p>
</section>
<section id="answer-3-score-91" class="level4">
<h4>Answer 3 (score 91)</h4>
<p>Generic solution where the number can be anywhere in the filename, using the first of such sequences:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true"></a><span class="va">number=$(</span><span class="bu">echo</span> <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">egrep</span> -o <span class="st">&#39;[[:digit:]]{5}&#39;</span> <span class="kw">|</span> <span class="fu">head</span> -n1<span class="va">)</span></span></code></pre></div>
<p>Another solution to extract exactly a part of a variable:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true"></a><span class="va">number=${filename:offset:length}</span></span></code></pre></div>
<p>If your filename always have the format <code>stuff_digits_...</code> you can use awk:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true"></a><span class="va">number=$(</span><span class="bu">echo</span> <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">awk</span> -F _ <span class="st">&#39;{ print $2 }&#39;</span><span class="va">)</span></span></code></pre></div>
<p>Yet another solution to remove everything except digits, use</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true"></a><span class="va">number=$(</span><span class="bu">echo</span> <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tr</span> -cd <span class="st">&#39;[[:digit:]]&#39;</span><span class="va">)</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-existence-of-input-argument-in-a-bash-shell-script-score-1105101-in-2018" class="level3">
<h3>20: Check existence of input argument in a Bash shell script (score <a href="https://stackoverflow.com/q/6482377.html">1105101</a> in 2018)</h3>
<section id="question-19" class="level4">
<h4>Question</h4>
<p>I need to check the existence of an input argument. I have the following script</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="ot">-gt</span> <span class="st">&quot;-1&quot;</span><span class="bu"> ]</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true"></a>  <span class="kw">then</span> <span class="bu">echo</span> hi</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>I get</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true"></a>[: <span class="bu">:</span> integer expression expected</span></code></pre></div>
<p>How do I check the input argument1 first to see if it exists?</p>
</section>
<section id="answer-accepted-score-2060" class="level4">
<h4>Answer accepted (score 2060)</h4>
<p>It is:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> $</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true"></a><span class="co"># -eq 0 ]</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true"></a>  then</span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true"></a>    echo <span class="st">&quot;No arguments supplied&quot;</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true"></a>fi</span></code></pre></div>
<p>The <code>$ #</code> variable will tell you the number of input arguments the script was passed.</p>
<p>Or you can check if an argument is an empty string or not like:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-z</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="bu"> ]</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true"></a>  <span class="kw">then</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;No argument supplied&quot;</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>The <code>-z</code> switch will test if the expansion of “$1” is a null string or not. If it is a null string then the body is executed.</p>
</section>
<section id="answer-2-score-305" class="level4">
<h4>Answer 2 (score 305)</h4>
<p>It is better to demonstrate this way</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true"></a><span class="kw">if [[</span> $</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true"></a><span class="co"># -eq 0 ]] ; then</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true"></a>    echo <span class="st">&#39;some message&#39;</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true"></a>    exit 1</span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true"></a>fi</span></code></pre></div>
<p>You normally need to exit if you have too few arguments.</p>
</section>
<section id="answer-3-score-92" class="level4">
<h4>Answer 3 (score 92)</h4>
<p>In some cases you need to check whether the user passed an argument to the script and if not, fall back to a default value. Like in the script below:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true"></a><span class="va">scale=${2:-</span>1<span class="va">}</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true"></a><span class="ex">emulator</span> @<span class="va">$1</span> -scale <span class="va">$scale</span></span></code></pre></div>
<p>Here if the user hasn’t passed <code>scale</code> as a 2nd parameter, I launch Android emulator with <code>-scale 1</code> by default. <code>${varname:-word}</code> is an expansion operator. There are other expansion operators as well:</p>
<ul>
<li>
<code>${varname:=word}</code> which <em>sets</em> the undefined <code>varname</code> instead of returning the <code>word</code> value;
</li>
<li>
<code>${varname:?message}</code> which either returns <code>varname</code> if it’s defined and is not null or prints the <code>message</code> and aborts the script (like the first example);
</li>
<li>
<code>${varname:+word}</code> which returns <code>word</code> only if <code>varname</code> is defined and is not null; returns null otherwise.
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="loop-through-an-array-of-strings-in-bash-score-1090850-in-2019" class="level3">
<h3>21: Loop through an array of strings in Bash? (score <a href="https://stackoverflow.com/q/8880603.html">1090850</a> in 2019)</h3>
<section id="question-20" class="level4">
<h4>Question</h4>
<p>I want to write a script that loops through 15 strings (array possibly?) Is that possible?</p>
<p>Something like:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">databaseName</span> in listOfNames</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true"></a></span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true"></a><span class="co"># Do something</span></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true"></a><span class="ex">end</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-2144" class="level4">
<h4>Answer accepted (score 2144)</h4>
<p>You can use it like this:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true"></a></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true"></a><span class="co">## declare an array variable</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true"></a><span class="bu">declare</span> -a <span class="va">arr=(</span><span class="st">&quot;element1&quot;</span> <span class="st">&quot;element2&quot;</span> <span class="st">&quot;element3&quot;</span><span class="va">)</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true"></a></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true"></a></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true"></a><span class="co">## now loop through the above array</span></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">${arr[@]}</span><span class="st">&quot;</span></span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$i</span><span class="st">&quot;</span></span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true"></a></span>
<span id="cb165-11"><a href="#cb165-11" aria-hidden="true"></a><span class="co"># or do whatever with individual element of the array</span></span>
<span id="cb165-12"><a href="#cb165-12" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb165-13"><a href="#cb165-13" aria-hidden="true"></a></span>
<span id="cb165-14"><a href="#cb165-14" aria-hidden="true"></a></span>
<span id="cb165-15"><a href="#cb165-15" aria-hidden="true"></a><span class="co"># You can access them using echo &quot;${arr[0]}&quot;, &quot;${arr[1]}&quot; also</span></span></code></pre></div>
<p>Also works for multi-line array declaration</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true"></a><span class="bu">declare</span> -a <span class="va">arr=(</span><span class="st">&quot;element1&quot;</span> </span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true"></a>                <span class="st">&quot;element2&quot;</span> <span class="st">&quot;element3&quot;</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true"></a>                <span class="st">&quot;element4&quot;</span></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true"></a>                )</span></code></pre></div>
</section>
<section id="answer-2-score-709" class="level4">
<h4>Answer 2 (score 709)</h4>
<p>That is possible, of course.</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">databaseName</span> in a b c d e f<span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true"></a></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true"></a><span class="co"># do something like: echo $databaseName</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true"></a><span class="kw">done</span> </span></code></pre></div>
<p>See <a href="http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-7.html" rel="noreferrer">Bash Loops for, while and until</a> for details.</p>
</section>
<section id="answer-3-score-179" class="level4">
<h4>Answer 3 (score 179)</h4>
<p>None of those answers include a counter…</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true"></a></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true"></a></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true"></a><span class="co">## declare an array variable</span></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true"></a><span class="bu">declare</span> -a <span class="va">array=(</span><span class="st">&quot;one&quot;</span> <span class="st">&quot;two&quot;</span> <span class="st">&quot;three&quot;</span><span class="va">)</span></span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true"></a></span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true"></a></span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true"></a><span class="co"># get length of an array</span></span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true"></a><span class="va">arraylength=</span>$<span class="kw">{</span></span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true"></a><span class="co">#array[@]}</span></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true"></a></span>
<span id="cb168-12"><a href="#cb168-12" aria-hidden="true"></a></span>
<span id="cb168-13"><a href="#cb168-13" aria-hidden="true"></a><span class="co"># use for loop to read all values and indexes</span></span>
<span id="cb168-14"><a href="#cb168-14" aria-hidden="true"></a><span class="kw">for</span> <span class="kw">((</span> i=1; i&lt;<span class="va">${arraylength}</span>+1; i++ <span class="kw">))</span>;</span>
<span id="cb168-15"><a href="#cb168-15" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb168-16"><a href="#cb168-16" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="va">$i</span> <span class="st">&quot; / &quot;</span> <span class="va">${arraylength}</span> <span class="st">&quot; : &quot;</span> <span class="va">${array[$i-1]}</span></span>
<span id="cb168-17"><a href="#cb168-17" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true"></a><span class="ex">1</span>  /  3  :  one</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true"></a><span class="ex">2</span>  /  3  :  two</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true"></a><span class="ex">3</span>  /  3  :  three</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="in-the-shell-what-does-21-mean-score-1016179-in-2018" class="level3">
<h3>22: In the shell, what does " 2&gt;&amp;1 " mean? (score <a href="https://stackoverflow.com/q/818255.html">1016179</a> in 2018)</h3>
<section id="question-21" class="level4">
<h4>Question</h4>
<p>In a Unix shell, if I want to combine <code>stderr</code> and <code>stdout</code> into the <code>stdout</code> stream for further manipulation, I can append the following on the end of my command:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true"></a><span class="op">2&gt;&amp;1</span></span></code></pre></div>
<p>So, if I want to use <code>head</code> on the output from <code>g++</code>, I can do something like this:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true"></a><span class="ex">g++</span> lots_of_errors <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">head</span></span></code></pre></div>
<p>so I can see only the first few errors.</p>
<p>I always have trouble remembering this, and I constantly have to go look it up, and it is mainly because I don’t fully understand the syntax of this particular trick.</p>
<p>Can someone break this up and explain character by character what <code>2&amp;gt;&amp;amp;1</code> means?</p>
</section>
<section id="answer-accepted-score-2329" class="level4">
<h4>Answer accepted (score 2329)</h4>
<p>
File descriptor 1 is the standard output (<code>stdout</code>).<br> File descriptor 2 is the standard error (<code>stderr</code>).
</p>
<p>Here is one way to remember this construct (although it is not entirely accurate): at first, <code>2&amp;gt;1</code> may look like a good way to redirect <code>stderr</code> to <code>stdout</code>. However, it will actually be interpreted as “redirect <code>stderr</code> to a file named <code>1</code>”. <code>&amp;amp;</code> indicates that what follows is a file descriptor and not a filename. So the construct becomes: <code>2&amp;gt;&amp;amp;1</code>.</p>
</section>
<section id="answer-2-score-577" class="level4">
<h4>Answer 2 (score 577)</h4>
<div class="sourceCode" id="cb172"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true"></a><span class="bu">echo</span> test <span class="op">&gt;</span> afile.txt</span></code></pre></div>
<p>redirects stdout to <code>afile.txt</code>. This is the same as doing</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true"></a><span class="bu">echo</span> test <span class="op">1&gt;</span> afile.txt</span></code></pre></div>
<p>To redirect stderr, you do:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true"></a><span class="bu">echo</span> test <span class="op">2&gt;</span> afile.txt</span></code></pre></div>
<p><code>&amp;gt;&amp;amp;</code> is the syntax to redirect a stream to another file descriptor - 0 is stdin, 1 is stdout, and 2 is stderr.</p>
<p>You can redirect stdout to stderr by doing:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true"></a><span class="bu">echo</span> test <span class="op">1&gt;&amp;2</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true"></a><span class="co"># or echo test &gt;&amp;2</span></span></code></pre></div>
<p>Or vice versa:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true"></a><span class="bu">echo</span> test <span class="op">2&gt;&amp;1</span></span></code></pre></div>
<p>So, in short… <code>2&amp;gt;</code> redirects stderr to an (unspecified) file, appending <code>&amp;amp;1</code> redirects stderr to stdout.</p>
</section>
<section id="answer-3-score-304" class="level4">
<h4>Answer 3 (score 304)</h4>
<h5>
Some tricks about redirection
</h2>
<p>Some syntax particularity about this may have important behaviours. There is some little samples about redirections, <code>STDERR</code>, <code>STDOUT</code>, and arguments <strong>ordering</strong>.</p>
<h5>
1 - Overwriting or appending?
</h3>
<p>Symbol <code>&amp;gt;</code> mean <em>redirection</em>.</p>
<ul>
<li>
<code>&amp;gt;</code> mean <em>send to as a whole completed file</em>, overwriting target if exist (see <code>noclobber</code> bash feature at <em> #3</em> later).
</li>
<li>
<code>&amp;gt;&amp;gt;</code> mean <em>send in addition to</em> would append to target if exist.
</li>
</ul>
<p>In any case, the file would be created if they not exist.</p>
<h5>
2 - The <em>shell command line</em> is order dependent!!
</h3>
<p>For testing this, we need <em>a simple command which will send something on both outputs</em>:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true"></a><span class="ex">ls</span>: cannot access /tnt: No such file or directory</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true"></a><span class="ex">drwxrwxrwt</span> 118 root root 196608 Jan  7 11:49 /tmp</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true"></a></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">&gt;</span>/dev/null</span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true"></a><span class="ex">ls</span>: cannot access /tnt: No such file or directory</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true"></a></span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">2&gt;</span>/dev/null</span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true"></a><span class="ex">drwxrwxrwt</span> 118 root root 196608 Jan  7 11:49 /tmp</span></code></pre></div>
<p>(Expecting you don’t have a directory named <code>/tnt</code>, of course ;). Well, we have it!!</p>
<p>So, let’s see:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">&gt;</span>/dev/null</span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true"></a><span class="ex">ls</span>: cannot access /tnt: No such file or directory</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true"></a></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true"></a></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span>/dev/null</span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true"></a><span class="ex">ls</span>: cannot access /tnt: No such file or directory</span></code></pre></div>
<p>The last command line dumps <code>STDERR</code> to the console, and it seem not to be the expected behaviour… But…</p>
<p>If you want to make some <em>post filtering</em> about one output, the other or both:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^.*$/&lt;-- &amp; ---&gt;/&#39;</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true"></a><span class="ex">ls</span>: cannot access /tnt: No such file or directory</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">--</span> drwxrwxrwt 118 root root 196608 Jan  7 12:02 /tmp ---<span class="op">&gt;</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true"></a></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^.*$/&lt;-- &amp; ---&gt;/&#39;</span></span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">--</span> ls: cannot access /tnt: No such file or directory ---<span class="op">&gt;</span></span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">--</span> drwxrwxrwt 118 root root 196608 Jan  7 12:02 /tmp ---<span class="op">&gt;</span></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true"></a></span>
<span id="cb179-9"><a href="#cb179-9" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">&gt;</span>/dev/null <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^.*$/&lt;-- &amp; ---&gt;/&#39;</span></span>
<span id="cb179-10"><a href="#cb179-10" aria-hidden="true"></a><span class="ex">ls</span>: cannot access /tnt: No such file or directory</span>
<span id="cb179-11"><a href="#cb179-11" aria-hidden="true"></a></span>
<span id="cb179-12"><a href="#cb179-12" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^.*$/&lt;-- &amp; ---&gt;/&#39;</span></span>
<span id="cb179-13"><a href="#cb179-13" aria-hidden="true"></a></span>
<span id="cb179-14"><a href="#cb179-14" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span>/dev/null <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^.*$/&lt;-- &amp; ---&gt;/&#39;</span></span>
<span id="cb179-15"><a href="#cb179-15" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">--</span> ls: cannot access /tnt: No such file or directory ---<span class="op">&gt;</span></span></code></pre></div>
<p>Notice that the last command line in this paragraph is exactly same as in previous paragraph, where I wrote <em>seem not to be the expected behaviour</em> (so, this could even be an expected behaviour).</p>
<p>
Well, there is a little tricks about redirections, for <strong>doing different operation on both outputs</strong>:
</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true"></a>$ <span class="kw">(</span> <span class="fu">ls</span> -ld /tmp /tnt <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^/O: /&#39;</span> <span class="op">&gt;&amp;9</span> <span class="kw">)</span> <span class="op">9&gt;&amp;2</span>  <span class="op">2&gt;&amp;1</span>  <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/^/E: /&#39;</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true"></a><span class="ex">O</span>: drwxrwxrwt 118 root root 196608 Jan  7 12:13 /tmp</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true"></a><span class="ex">E</span>: ls: cannot access /tnt: No such file or directory</span></code></pre></div>
<p>Nota: <code>&amp;amp;9</code> descriptor would occur spontaneously because of <code>) 9&amp;gt;&amp;amp;2</code>.</p>
<p><strong>Addendum: nota!</strong> With the new version of <a href="/questions/tagged/bash" class="post-tag" title="show questions tagged &
#39;bash&#39;" rel="tag">bash</a> (<code>&amp;gt;4.0</code>) there is a new feature and more sexy syntax for doing this kind of things:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">2&gt;</span> <span class="op">&gt;(</span><span class="fu">sed</span> <span class="st">&#39;s/^/E: /&#39;</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">&gt;(</span><span class="fu">sed</span> <span class="st">&#39;s/^/O: /&#39;</span><span class="op">)</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true"></a><span class="ex">O</span>: drwxrwxrwt 17 root root 28672 Nov  5 23:00 /tmp</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true"></a><span class="ex">E</span>: ls: cannot access /tnt: No such file or directory</span></code></pre></div>
<p>And finally for such a cascading output formatting:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true"></a>$ <span class="kw">((</span>ls -ld /tmp /tnt |sed <span class="st">&#39;s/^/O: /&#39;</span> &gt;&amp;9 ) 2&gt;&amp;1 |sed <span class="st">&#39;s/^/E: /&#39;</span>) 9&gt;&amp;1| cat -n</span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true"></a>     1  O: drwxrwxrwt 118 root root 196608 Jan  7 12:29 /tmp</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true"></a>     2  E: ls: cannot access /tnt: No such file or directory</span></code></pre></div>
<p><strong>Addendum: nota!</strong> Same new syntax, in both ways:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true"></a>$ <span class="fu">cat</span> -n <span class="op">&lt;(</span><span class="fu">ls</span> -ld /tmp /tnt <span class="op">2&gt;</span> <span class="op">&gt;(</span><span class="fu">sed</span> <span class="st">&#39;s/^/E: /&#39;</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">&gt;(</span><span class="fu">sed</span> <span class="st">&#39;s/^/O: /&#39;</span><span class="op">))</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true"></a>     <span class="ex">1</span>  O: drwxrwxrwt 17 root root 28672 Nov  5 23:00 /tmp</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true"></a>     <span class="ex">2</span>  E: ls: cannot access /tnt: No such file or directory</span></code></pre></div>
<p>Where <code>STDOUT</code> go through a specific filter, <code>STDERR</code> to another and finally both outputs merged go through a third command filter.</p>
<h5>
3 - A word about <code>noclobber</code> option and <code>&amp;gt;|</code> syntax
</h3>
<p>That’s about <strong>overwriting</strong>:</p>
<p>While <code>set -o noclobber</code> instruct bash to <strong>not</strong> overwrite any existing file, the <code>&amp;gt;|</code> syntax let you pass through this limitation:</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true"></a>$ <span class="va">testfile=$(</span><span class="fu">mktemp</span> /tmp/testNoClobberDate-XXXXXX<span class="va">)</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true"></a></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true"></a>$ <span class="fu">date</span> <span class="op">&gt;</span> <span class="va">$testfile</span> <span class="kw">;</span> <span class="fu">cat</span> <span class="va">$testfile</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true"></a><span class="ex">Mon</span> Jan  7 13:18:15 CET 2013</span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true"></a></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true"></a>$ <span class="fu">date</span> <span class="op">&gt;</span> <span class="va">$testfile</span> <span class="kw">;</span> <span class="fu">cat</span> <span class="va">$testfile</span></span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true"></a><span class="ex">Mon</span> Jan  7 13:18:19 CET 2013</span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true"></a></span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true"></a>$ <span class="fu">date</span> <span class="op">&gt;</span> <span class="va">$testfile</span> <span class="kw">;</span> <span class="fu">cat</span> <span class="va">$testfile</span></span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true"></a><span class="ex">Mon</span> Jan  7 13:18:21 CET 2013</span></code></pre></div>
<p>The file is overwritten each time, well now:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true"></a>$ <span class="kw">set</span> <span class="ex">-o</span> noclobber</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true"></a></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true"></a>$ <span class="fu">date</span> <span class="op">&gt;</span> <span class="va">$testfile</span> <span class="kw">;</span> <span class="fu">cat</span> <span class="va">$testfile</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true"></a><span class="ex">bash</span>: /tmp/testNoClobberDate-WW1xi9: cannot overwrite existing file</span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true"></a><span class="ex">Mon</span> Jan  7 13:18:21 CET 2013</span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true"></a></span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true"></a>$ <span class="fu">date</span> <span class="op">&gt;</span> <span class="va">$testfile</span> <span class="kw">;</span> <span class="fu">cat</span> <span class="va">$testfile</span></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true"></a><span class="ex">bash</span>: /tmp/testNoClobberDate-WW1xi9: cannot overwrite existing file</span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true"></a><span class="ex">Mon</span> Jan  7 13:18:21 CET 2013</span></code></pre></div>
<p>Pass through with <code>&amp;gt;|</code>:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true"></a>$ <span class="fu">date</span> <span class="op">&gt;</span><span class="kw">|</span> <span class="va">$testfile</span> ; <span class="fu">cat</span> <span class="va">$testfile</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true"></a><span class="ex">Mon</span> Jan  7 13:18:58 CET 2013</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true"></a></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true"></a>$ <span class="fu">date</span> <span class="op">&gt;</span><span class="kw">|</span> <span class="va">$testfile</span> ; <span class="fu">cat</span> <span class="va">$testfile</span></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true"></a><span class="ex">Mon</span> Jan  7 13:19:01 CET 2013</span></code></pre></div>
<p>Unsetting this option and/or inquiring if already set.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true"></a>$ <span class="kw">set</span> <span class="ex">-o</span> <span class="kw">|</span> <span class="fu">grep</span> noclobber</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true"></a><span class="ex">noclobber</span>           on</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true"></a></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true"></a>$ <span class="kw">set</span> <span class="ex">+o</span> noclobber</span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true"></a></span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true"></a>$ <span class="kw">set</span> <span class="ex">-o</span> <span class="kw">|</span> <span class="fu">grep</span> noclobber</span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true"></a><span class="ex">noclobber</span>           off</span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true"></a></span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true"></a>$ <span class="fu">date</span> <span class="op">&gt;</span> <span class="va">$testfile</span> <span class="kw">;</span> <span class="fu">cat</span> <span class="va">$testfile</span></span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true"></a><span class="ex">Mon</span> Jan  7 13:24:27 CET 2013</span>
<span id="cb187-11"><a href="#cb187-11" aria-hidden="true"></a></span>
<span id="cb187-12"><a href="#cb187-12" aria-hidden="true"></a>$ <span class="fu">rm</span> <span class="va">$testfile</span></span></code></pre></div>
<h5>
4 - Last trick and more…
</h3>
<p>For redirecting <strong>both</strong> output from a given command, we see that a right syntax could be:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span></span></code></pre></div>
<p>for this <em>special</em> case, there is a shortcut syntax: <code>&amp;amp;&amp;gt;</code> … or <code>&amp;gt;&amp;amp;</code></p>
<div class="sourceCode" id="cb189"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">&amp;&gt;</span>/dev/null</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true"></a></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">&gt;</span><span class="kw">&amp;</span><span class="ex">/dev/null</span></span></code></pre></div>
<p>Nota: if <strong><code>2&amp;gt;&amp;amp;1</code></strong> exist, <strong><code>1&amp;gt;&amp;amp;2</code></strong> is a correct syntax too:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">2&gt;</span>/dev/null <span class="op">1&gt;&amp;2</span></span></code></pre></div>
<h5>
4b- Now, I will let you think about:
</h3>
<div class="sourceCode" id="cb191"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">2&gt;&amp;1</span> <span class="op">1&gt;&amp;2</span>  <span class="kw">|</span> <span class="fu">sed</span> -e s/^/++/</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true"></a><span class="ex">++/bin</span>/ls: <span class="ex">cannot</span> access /tnt: No such file or directory</span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true"></a><span class="ex">++drwxrwxrwt</span> 193 root root 196608 Feb  9 11:08 /tmp/</span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true"></a></span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true"></a>$ <span class="fu">ls</span> -ld /tmp /tnt <span class="op">1&gt;&amp;2</span> <span class="op">2&gt;&amp;1</span>  <span class="kw">|</span> <span class="fu">sed</span> -e s/^/++/</span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true"></a><span class="ex">/bin</span>/ls: <span class="ex">cannot</span> access /tnt: No such file or directory</span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true"></a><span class="ex">drwxrwxrwt</span> 193 root root 196608 Feb  9 11:08 /tmp/</span></code></pre></div>
<h5>
4c- If you’re interested in <em>more</em> information
</h3>
<p>You could read the fine manual by hitting:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true"></a><span class="fu">man</span> -Len -Pless\ +/^REDIRECTION bash</span></code></pre></div>
<p>in a <a href="/questions/tagged/bash" class="post-tag" title="show questions tagged &
#39;bash&#39;" rel="tag">bash</a> console ;-)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="redirect-all-output-to-file-score-1007650-in-2015" class="level3">
<h3>23: Redirect all output to file (score <a href="https://stackoverflow.com/q/6674327.html">1007650</a> in 2015)</h3>
<section id="question-22" class="level4">
<h4>Question</h4>
<p>I know that in Linux, to redirect output from the screen to a file, I can either use the <code>&amp;gt;</code> or <code>tee</code>. However, I’m not sure why part of the output is still output to the screen and not written to the file.</p>
<p>Is there a way to redirect all output to file?</p>
</section>
<section id="answer-accepted-score-1122" class="level4">
<h4>Answer accepted (score 1122)</h4>
<p>That part is written to stderr, use <code>2&amp;gt;</code> to redirect it. For example:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true"></a><span class="ex">foo</span> <span class="op">&gt;</span> stdout.txt <span class="op">2&gt;</span> stderr.txt</span></code></pre></div>
<p>or if you want in same file:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true"></a><span class="ex">foo</span> <span class="op">&gt;</span> allout.txt <span class="op">2&gt;&amp;1</span></span></code></pre></div>
<p>Note: this works in (ba)sh, check your shell for proper syntax</p>
</section>
<section id="answer-2-score-141" class="level4">
<h4>Answer 2 (score 141)</h4>
<p>All POSIX operating systems <a href="http://en.wikipedia.org/wiki/Standard_streams" rel="noreferrer">have 3 streams</a>: stdin, stdout, and stderr. stdin is the input, which can accept the stdout or stderr. stdout is the primary output, which is redirected with <code>&amp;gt;</code>, <code>&amp;gt;&amp;gt;</code>, or <code>|</code>. stderr is the error output, which is handled separately so that any exceptions do not get passed to a command or written to a file that it might break; normally, this is sent to a log of some kind, or dumped directly, even when the stdout is redirected. To redirect both to the same place, use:</p>
<p><strike><code>&lt;em&gt;command&lt;/em&gt; &amp;amp;&gt; /some/file</code></strike></p>
<p><strong>EDIT</strong>: thanks to Zack for pointing out that the above solution is not portable–use instead:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true"></a><span class="ex">*command*</span> <span class="op">&gt;</span> file <span class="op">2&gt;&amp;1</span> </span></code></pre></div>
<p>If you want to silence the error, do:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true"></a><span class="ex">*command*</span> <span class="op">2&gt;</span> /dev/null</span></code></pre></div>
</section>
<section id="answer-3-score-84" class="level4">
<h4>Answer 3 (score 84)</h4>
<p>To get the output on the console AND in a file <code>file.txt</code> for example.</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true"></a><span class="fu">make</span> <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">tee</span> file.txt</span></code></pre></div>
<p>Note: <code>&amp;amp;</code> (in <code>2&amp;gt;&amp;amp;1</code>) specifies that <code>1</code> is not a file name but a file descriptor.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-compare-two-string-variables-in-an-if-statement-in-bash-score-1001718-in-2018" class="level3">
<h3>24: How do I compare two string variables in an ‘if’ statement in Bash? (score <a href="https://stackoverflow.com/q/4277665.html">1001718</a> in 2018)</h3>
<section id="question-23" class="level4">
<h4>Question</h4>
<p>I’m trying to get an <code>if</code> statement to work in <a href="http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" rel="noreferrer">Bash</a> (using <a href="http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29" rel="noreferrer">Ubuntu</a>):</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true"></a></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true"></a></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true"></a><span class="va">s1=</span><span class="st">&quot;hi&quot;</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true"></a><span class="va">s2=</span><span class="st">&quot;hi&quot;</span></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true"></a></span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true"></a><span class="kw">if</span> [<span class="st">&quot;</span><span class="va">$s1</span><span class="st">&quot;</span> == <span class="st">&quot;</span><span class="va">$s2</span><span class="st">&quot;</span>]</span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true"></a>  <span class="bu">echo</span> match</span>
<span id="cb198-10"><a href="#cb198-10" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>I’ve tried various forms of the <code>if</code> statement, using <code>[["$s1" == "$s2"]]</code>, with and without quotes, using <code>=</code>, <code>==</code> and <code>-eq</code>, but I still get the following error:</p>
<blockquote>
[hi: command not found
</blockquote>
<p>I’ve looked at various sites and tutorials and copied those, but it doesn’t work - what am I doing wrong?</p>
<p>Eventually, I want to say if <code>$s1</code> contains <code>$s2</code>, so how can I do that?</p>
<p>I did just work out the spaces bit.. :/ How do I say contains?</p>
<p>I tried</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$s1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;*</span><span class="va">$s2</span><span class="st">*&quot;</span><span class="kw"> ]]</span></span></code></pre></div>
<p>but it didn’t work.</p>
</section>
<section id="answer-accepted-score-789" class="level4">
<h4>Answer accepted (score 789)</h4>
<p>For string comparison, use:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$s1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;</span><span class="va">$s2</span><span class="st">&quot;</span><span class="bu"> ]</span></span></code></pre></div>
<p>For the <code>a</code> contains <code>b</code>, use:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true"></a><span class="kw">if [[</span> <span class="va">$s1</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$s2</span><span class="st">&quot;</span>*<span class="kw"> ]]</span></span></code></pre></div>
<p>(and make sure to add spaces between the symbols):</p>
<p>bad:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true"></a><span class="kw">if</span> [<span class="st">&quot;</span><span class="va">$s1</span><span class="st">&quot;</span> == <span class="st">&quot;</span><span class="va">$s2</span><span class="st">&quot;</span>]</span></code></pre></div>
<p>good:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$s1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;</span><span class="va">$s2</span><span class="st">&quot;</span><span class="bu"> ]</span></span></code></pre></div>
</section>
<section id="answer-2-score-156" class="level4">
<h4>Answer 2 (score 156)</h4>
<p>You need spaces:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$s1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;</span><span class="va">$s2</span><span class="st">&quot;</span><span class="bu"> ]</span></span></code></pre></div>
</section>
<section id="answer-3-score-139" class="level4">
<h4>Answer 3 (score 139)</h4>
<p>You should be careful to leave a space between the sign of ‘[’ and double quotes where the variable contains this:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$s1</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;</span><span class="va">$s2</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true"></a></span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true"></a><span class="co">#   ^     ^  ^     ^</span></span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true"></a>   <span class="bu">echo</span> match</span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>The <code>^</code>s show the blank spaces you need to leave.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-iterate-over-a-range-of-numbers-defined-by-variables-in-bash-score-997426-in-2018" class="level3">
<h3>25: How do I iterate over a range of numbers defined by variables in Bash? (score <a href="https://stackoverflow.com/q/169511.html">997426</a> in 2018)</h3>
<section id="question-24" class="level4">
<h4>Question</h4>
<p>How do I iterate over a range of numbers in Bash when the range is given by a variable?</p>
<p>I know I can do this (called “sequence expression” in the Bash <a href="http://www.gnu.org/software/bash/manual/bashref.html
#Brace-Expansion" rel="noreferrer">documentation</a>):</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true"></a> <span class="kw">for</span> <span class="ex">i</span> in <span class="dt">{1..5}</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="va">$i</span><span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
<p>Which gives:</p>
<blockquote>
<p>
1 <br/> 2 <br/> 3 <br/> 4 <br/> 5
</p>
</blockquote>
<p>Yet, how can I replace either of the range endpoints with a variable? This doesn’t work:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true"></a><span class="va">END=</span>5</span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="dt">{1..</span><span class="va">$END</span><span class="dt">}</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="va">$i</span><span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
<p>Which prints:</p>
<blockquote>
{1..5}
</blockquote>
</section>
<section id="answer-accepted-score-1536" class="level4">
<h4>Answer accepted (score 1536)</h4>
<div class="sourceCode" id="cb208"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="va">$(</span><span class="fu">seq</span> 1 <span class="va">$END)</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="va">$i</span><span class="kw">;</span> <span class="kw">done```</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true"></a></span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true"></a><span class="ex">edit</span>: I prefer <span class="kw">`</span><span class="fu">seq</span><span class="kw">`</span> <span class="ex">over</span> the other methods because I can actually remember it <span class="kw">;</span>)  </span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true"></a></span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true"></a></span>
<span id="cb208-6"><a href="#cb208-6" aria-hidden="true"></a><span class="co">#### Answer 2 (score 407)</span></span>
<span id="cb208-7"><a href="#cb208-7" aria-hidden="true"></a><span class="ex">The</span> <span class="kw">`</span>seq<span class="kw">`</span> <span class="ex">method</span> is the simplest, but Bash has built-in arithmetic evaluation.  </span>
<span id="cb208-8"><a href="#cb208-8" aria-hidden="true"></a></span>
<span id="cb208-9"><a href="#cb208-9" aria-hidden="true"></a><span class="kw">```</span>sh</span>
<span id="cb208-10"><a href="#cb208-10" aria-hidden="true"></a><span class="va">END=</span>5</span>
<span id="cb208-11"><a href="#cb208-11" aria-hidden="true"></a><span class="kw">for</span> <span class="kw">((</span>i=1;i&lt;=END;i++<span class="kw">))</span>; <span class="kw">do</span></span>
<span id="cb208-12"><a href="#cb208-12" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="va">$i</span></span>
<span id="cb208-13"><a href="#cb208-13" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb208-14"><a href="#cb208-14" aria-hidden="true"></a></span>
<span id="cb208-15"><a href="#cb208-15" aria-hidden="true"></a><span class="co"># ==&gt; outputs 1 2 3 4 5 on separate lines</span></span></code></pre></div>
<p>The <code>for ((expr1;expr2;expr3));</code> construct works just like <code>for (expr1;expr2;expr3)</code> in C and similar languages, and like other <code>((expr))</code> cases, Bash treats them as arithmetic.</p>
</section>
<section id="answer-3-score-178" class="level4">
<h4>Answer 3 (score 178)</h4>
<h5>
discussion
</h3>
<p>Using <code>seq</code> is fine, as Jiaaro suggested. Pax Diablo suggested a Bash loop to avoid calling a subprocess, with the additional advantage of being more memory friendly if $END is too large. Zathrus spotted a typical bug in the loop implementation, and also hinted that since <code>i</code> is a text variable, continuous conversions to-and-fro numbers are performed with an associated slow-down.</p>
<h5>
integer arithmetic
</h3>
<p>This is an improved version of the Bash loop:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true"></a><span class="bu">typeset</span> -i <span class="va">i</span> <span class="va">END</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true"></a><span class="bu">let</span> END=5 i=1</span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true"></a><span class="kw">while</span> <span class="kw">((</span>i&lt;=END<span class="kw">))</span>; <span class="kw">do</span></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="va">$i</span></span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true"></a>    …</span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true"></a>    <span class="bu">let</span> i++</span>
<span id="cb209-7"><a href="#cb209-7" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>If the only thing that we want is the <code>echo</code>, then we could write <code>echo $((i++))</code>.</p>
<p><a href="https://stackoverflow.com/questions/169511/how-do-i-iterate-over-a-range-of-numbers-in-bash
#171041">ephemient</a> taught me something: Bash allows <code>for ((expr;expr;expr))</code> constructs. Since I’ve never read the whole man page for Bash (like I’ve done with the Korn shell (<code>ksh</code>) man page, and that was a long time ago), I missed that.</p>
<p>So,</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true"></a><span class="bu">typeset</span> -i <span class="va">i</span> <span class="va">END</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true"></a><span class="co"># Let&#39;s be explicit</span></span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true"></a><span class="kw">for</span> <span class="kw">((</span>i=1;i&lt;=END;++i<span class="kw">))</span>; <span class="kw">do</span> <span class="bu">echo</span> <span class="va">$i</span><span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
<p>seems to be the most memory-efficient way (it won’t be necessary to allocate memory to consume <code>seq</code>’s output, which could be a problem if END is very large), although probably not the “fastest”.</p>
<h5>
the initial question
</h3>
<p>eschercycle noted that the {<em>a</em>..<em>b</em>} Bash notation works only with literals; true, accordingly to the Bash manual. One can overcome this obstacle with a single (internal) <code>fork()</code> without an <code>exec()</code> (as is the case with calling <code>seq</code>, which being another image requires a fork+exec):</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="va">$(</span><span class="bu">eval</span> echo <span class="st">&quot;{1..</span><span class="va">$END</span><span class="st">}&quot;</span><span class="va">)</span><span class="kw">;</span> <span class="kw">do</span></span></code></pre></div>
<p>Both <code>eval</code> and <code>echo</code> are Bash builtins, but a <code>fork()</code> is required for the command substitution (the <code>$(…)</code> construct).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="passing-parameters-to-a-bash-function-score-960488-in-2017" class="level3">
<h3>26: Passing parameters to a Bash function (score <a href="https://stackoverflow.com/q/6212219.html">960488</a> in 2017)</h3>
<section id="question-25" class="level4">
<h4>Question</h4>
<p>I am trying to search how to pass parameters in a Bash function, but what comes up is always how to pass parameter from the command line.</p>
<p>I would like to pass parameters within my script. I tried:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true"></a><span class="ex">myBackupFunction</span>(<span class="st">&quot;..&quot;</span>, <span class="st">&quot;...&quot;</span>, <span class="st">&quot;xx&quot;</span>)</span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true"></a></span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> myBackupFunction</span><span class="kw">(</span><span class="va">$directory</span>, <span class="va">$options</span>, <span class="va">$rootPassword</span><span class="kw">)</span> <span class="kw">{</span></span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true"></a>     <span class="ex">...</span></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p>But the syntax is not correct, how to pass a parameter to my function?</p>
</section>
<section id="answer-accepted-score-1473" class="level4">
<h4>Answer accepted (score 1473)</h4>
<p>There are two typical ways of declaring a function. I prefer the second approach.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> function_name</span> <span class="kw">{</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true"></a>   <span class="ex">command...</span></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true"></a><span class="kw">}</span> </span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu">_name ()</span> <span class="kw">{</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true"></a>   <span class="ex">command...</span></span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true"></a><span class="kw">}</span> </span></code></pre></div>
<p>To call a function with arguments:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true"></a><span class="kw">function</span><span class="ex">_name</span> <span class="st">&quot;</span><span class="va">$arg1</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$arg2</span><span class="st">&quot;</span></span></code></pre></div>
<p>The function refers to passed arguments by their position (not by name), that is $1, $2, and so forth. <strong>$0</strong> is the name of the script itself.</p>
<p>Example:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu">_name ()</span> <span class="kw">{</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;Parameter</span></span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true"></a><span class="st">#1 is </span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p>Also, you need to call your function <strong>after</strong> it is declared.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true"></a></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true"></a><span class="co">#!/usr/bin/env sh</span></span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true"></a></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true"></a><span class="ex">foo</span> 1</span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true"></a><span class="co"># this will fail because foo has not been declared yet.</span></span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true"></a></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true"></a><span class="fu">foo()</span> <span class="kw">{</span></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Parameter</span></span>
<span id="cb217-9"><a href="#cb217-9" aria-hidden="true"></a><span class="st">#1 is </span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb217-10"><a href="#cb217-10" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb217-11"><a href="#cb217-11" aria-hidden="true"></a></span>
<span id="cb217-12"><a href="#cb217-12" aria-hidden="true"></a><span class="ex">foo</span> 2</span>
<span id="cb217-13"><a href="#cb217-13" aria-hidden="true"></a><span class="co"># this will work.</span></span></code></pre></div>
<p><strong>Output:</strong></p>
<div class="sourceCode" id="cb218"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true"></a><span class="ex">.</span>/myScript.sh: <span class="ex">line</span> 2: foo: command not found</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true"></a><span class="ex">Parameter</span></span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true"></a><span class="co">#1 is 2</span></span></code></pre></div>
<p><a href="http://tldp.org/LDP/abs/html/complexfunct.html" rel="noreferrer">Reference: Advanced Bash-Scripting Guide</a>.</p>
</section>
<section id="answer-2-score-58" class="level4">
<h4>Answer 2 (score 58)</h4>
<p>Knowledge of high level programming languages (C/C++/Java/PHP/Python/Perl …) would suggest to the layman that bash functions should work like they do in those other languages. <em>Instead</em>, bash functions work like shell commands and expect arguments to be passed to them in the same way one might pass an option to a shell command (ls -l). In effect, <em>function arguments</em> in bash are treated as <em>positional parameters</em> (<code>$1, $2..$9, ${10}, ${11}</code>, and so on). This is no surprise considering how <code>getopts</code> works. Parentheses are not required to call a function in bash.</p>
<hr>
<p>(<strong>Note</strong>: I happen to be working on Open Solaris at the moment.)</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true"></a></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true"></a><span class="co"># bash style declaration for all you PHP/JavaScript junkies. :-)</span></span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true"></a></span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true"></a><span class="co"># $1 is the directory to archive</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true"></a></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true"></a><span class="co"># $2 is the name of the tar and zipped file when all is done.</span></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> backupWebRoot ()</span></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true"></a><span class="kw">{</span></span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true"></a>    <span class="fu">tar</span> -cvf - <span class="va">$1</span> <span class="kw">|</span> <span class="fu">zip</span> -n .jpg:.gif:.png <span class="va">$2</span> - <span class="op">2&gt;&gt;</span> <span class="va">$errorlog</span> <span class="kw">&amp;&amp;</span></span>
<span id="cb219-10"><a href="#cb219-10" aria-hidden="true"></a>        <span class="bu">echo</span> -e <span class="st">&quot;\nTarball created!\n&quot;</span></span>
<span id="cb219-11"><a href="#cb219-11" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb219-12"><a href="#cb219-12" aria-hidden="true"></a></span>
<span id="cb219-13"><a href="#cb219-13" aria-hidden="true"></a></span>
<span id="cb219-14"><a href="#cb219-14" aria-hidden="true"></a></span>
<span id="cb219-15"><a href="#cb219-15" aria-hidden="true"></a><span class="co"># sh style declaration for the purist in you. ;-)</span></span>
<span id="cb219-16"><a href="#cb219-16" aria-hidden="true"></a></span>
<span id="cb219-17"><a href="#cb219-17" aria-hidden="true"></a><span class="co"># $1 is the directory to archive</span></span>
<span id="cb219-18"><a href="#cb219-18" aria-hidden="true"></a></span>
<span id="cb219-19"><a href="#cb219-19" aria-hidden="true"></a><span class="co"># $2 is the name of the tar and zipped file when all is done.</span></span>
<span id="cb219-20"><a href="#cb219-20" aria-hidden="true"></a><span class="fu">backupWebRoot ()</span></span>
<span id="cb219-21"><a href="#cb219-21" aria-hidden="true"></a><span class="kw">{</span></span>
<span id="cb219-22"><a href="#cb219-22" aria-hidden="true"></a>    <span class="fu">tar</span> -cvf - <span class="va">$1</span> <span class="kw">|</span> <span class="fu">zip</span> -n .jpg:.gif:.png <span class="va">$2</span> - <span class="op">2&gt;&gt;</span> <span class="va">$errorlog</span> <span class="kw">&amp;&amp;</span></span>
<span id="cb219-23"><a href="#cb219-23" aria-hidden="true"></a>        <span class="bu">echo</span> -e <span class="st">&quot;\nTarball created!\n&quot;</span></span>
<span id="cb219-24"><a href="#cb219-24" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb219-25"><a href="#cb219-25" aria-hidden="true"></a></span>
<span id="cb219-26"><a href="#cb219-26" aria-hidden="true"></a></span>
<span id="cb219-27"><a href="#cb219-27" aria-hidden="true"></a></span>
<span id="cb219-28"><a href="#cb219-28" aria-hidden="true"></a><span class="co">#In the actual shell script</span></span>
<span id="cb219-29"><a href="#cb219-29" aria-hidden="true"></a></span>
<span id="cb219-30"><a href="#cb219-30" aria-hidden="true"></a><span class="co">#$0               $1            $2</span></span>
<span id="cb219-31"><a href="#cb219-31" aria-hidden="true"></a></span>
<span id="cb219-32"><a href="#cb219-32" aria-hidden="true"></a><span class="ex">backupWebRoot</span> ~/public/www/ webSite.tar.zip</span></code></pre></div>
</section>
<section id="answer-3-score-42" class="level4">
<h4>Answer 3 (score 42)</h4>
<p>If you prefer named parameters, it’s possible (with a few tricks) to actually pass named parameters to functions (also makes it possible to pass arrays and references).</p>
<p>The method I developed allows you to define named parameters passed to a function like this:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> example</span> <span class="kw">{</span> <span class="ex">args</span> : string firstName , string lastName , integer age <span class="kw">}</span> <span class="kw">{</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;My name is </span><span class="va">${firstName}</span><span class="st"> </span><span class="va">${lastName}</span><span class="st"> and I am </span><span class="va">${age}</span><span class="st"> years old.&quot;</span></span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p>You can also annotate arguments as <span class="citation" data-cites="required">@required</span> or <span class="citation" data-cites="readonly">@readonly</span>, create …rest arguments, create arrays from sequential arguments (using e.g. <code>string[4]</code>) and optionally list the arguments in multiple lines:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> example</span> <span class="kw">{</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true"></a>  <span class="ex">args</span></span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true"></a>    <span class="bu">:</span> @required string firstName</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true"></a>    <span class="bu">:</span> string lastName</span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true"></a>    <span class="bu">:</span> integer age</span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true"></a>    <span class="bu">:</span> string[] ...favoriteHobbies</span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true"></a></span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;My name is </span><span class="va">${firstName}</span><span class="st"> </span><span class="va">${lastName}</span><span class="st"> and I am </span><span class="va">${age}</span><span class="st"> years old.&quot;</span></span>
<span id="cb221-9"><a href="#cb221-9" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;My favorite hobbies include: </span><span class="va">${favoriteHobbies[*]}</span><span class="st">&quot;</span></span>
<span id="cb221-10"><a href="#cb221-10" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p>In other words, not only you can call your parameters by their names (which makes up for a more readable core), you can actually pass arrays (and references to variables - this feature works only in bash 4.3 though)! Plus, the mapped variables are all in the local scope, just as $1 (and others).</p>
<p>The code that makes this work is pretty light and works both in bash 3 and bash 4 (these are the only versions I’ve tested it with). If you’re interested in more tricks like this that make developing with bash much nicer and easier, you can take a look at my <a href="https://github.com/niieani/bash-oo-framework" rel="noreferrer">Bash Infinity Framework</a>, the code below is available as one of its functionalities.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true"></a><span class="bu">shopt</span> -s expand_aliases</span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true"></a></span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> assignTrap</span> <span class="kw">{</span></span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true"></a>  <span class="bu">local</span> <span class="va">evalString</span></span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true"></a>  <span class="bu">local</span> -i <span class="va">paramIndex=${__paramIndex-</span>0<span class="va">}</span></span>
<span id="cb222-6"><a href="#cb222-6" aria-hidden="true"></a>  <span class="bu">local</span> <span class="va">initialCommand=</span><span class="st">&quot;</span><span class="va">${1-}</span><span class="st">&quot;</span></span>
<span id="cb222-7"><a href="#cb222-7" aria-hidden="true"></a></span>
<span id="cb222-8"><a href="#cb222-8" aria-hidden="true"></a>  <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$initialCommand</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;:&quot;</span><span class="kw"> ]]</span></span>
<span id="cb222-9"><a href="#cb222-9" aria-hidden="true"></a>  <span class="kw">then</span></span>
<span id="cb222-10"><a href="#cb222-10" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;trap - DEBUG; eval </span><span class="dt">\&quot;</span><span class="va">${__previousTrap}</span><span class="dt">\&quot;</span><span class="st">; unset __previousTrap; unset __paramIndex;&quot;</span></span>
<span id="cb222-11"><a href="#cb222-11" aria-hidden="true"></a>    <span class="bu">return</span></span>
<span id="cb222-12"><a href="#cb222-12" aria-hidden="true"></a>  <span class="kw">fi</span></span>
<span id="cb222-13"><a href="#cb222-13" aria-hidden="true"></a></span>
<span id="cb222-14"><a href="#cb222-14" aria-hidden="true"></a>  <span class="kw">while [[</span> <span class="st">&quot;</span><span class="va">${1-}</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;,&quot;</span> || <span class="st">&quot;</span><span class="va">${1-}</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;</span><span class="va">${initialCommand}</span><span class="st">&quot;</span><span class="kw"> ]]</span> <span class="kw">|| [[</span> <span class="st">&quot;${</span></span>
<span id="cb222-15"><a href="#cb222-15" aria-hidden="true"></a><span class="st">#@}&quot;</span> <span class="ot">-gt</span> 0 &amp;&amp; <span class="st">&quot;</span><span class="va">$paramIndex</span><span class="st">&quot;</span> <span class="ot">-eq</span> 0<span class="kw"> ]]</span></span>
<span id="cb222-16"><a href="#cb222-16" aria-hidden="true"></a>  <span class="kw">do</span></span>
<span id="cb222-17"><a href="#cb222-17" aria-hidden="true"></a>    <span class="bu">shift</span></span>
<span id="cb222-18"><a href="#cb222-18" aria-hidden="true"></a><span class="co"># first colon &quot;:&quot; or next parameter&#39;s comma &quot;,&quot;</span></span>
<span id="cb222-19"><a href="#cb222-19" aria-hidden="true"></a>    <span class="va">paramIndex+=</span>1</span>
<span id="cb222-20"><a href="#cb222-20" aria-hidden="true"></a>    <span class="bu">local</span> -a <span class="va">decorators=()</span></span>
<span id="cb222-21"><a href="#cb222-21" aria-hidden="true"></a>    <span class="kw">while [[</span> <span class="st">&quot;</span><span class="va">${1-}</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;@&quot;</span>*<span class="kw"> ]]</span></span>
<span id="cb222-22"><a href="#cb222-22" aria-hidden="true"></a>    <span class="kw">do</span></span>
<span id="cb222-23"><a href="#cb222-23" aria-hidden="true"></a>      <span class="va">decorators+=(</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="va">)</span></span>
<span id="cb222-24"><a href="#cb222-24" aria-hidden="true"></a>      <span class="bu">shift</span></span>
<span id="cb222-25"><a href="#cb222-25" aria-hidden="true"></a>    <span class="kw">done</span></span>
<span id="cb222-26"><a href="#cb222-26" aria-hidden="true"></a></span>
<span id="cb222-27"><a href="#cb222-27" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">declaration=</span></span>
<span id="cb222-28"><a href="#cb222-28" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">wrapLeft=</span><span class="st">&#39;&quot;&#39;</span></span>
<span id="cb222-29"><a href="#cb222-29" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">wrapRight=</span><span class="st">&#39;&quot;&#39;</span></span>
<span id="cb222-30"><a href="#cb222-30" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">nextType=</span><span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb222-31"><a href="#cb222-31" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">length=</span>1</span>
<span id="cb222-32"><a href="#cb222-32" aria-hidden="true"></a></span>
<span id="cb222-33"><a href="#cb222-33" aria-hidden="true"></a>    <span class="kw">case</span> <span class="va">${nextType}</span><span class="kw"> in</span></span>
<span id="cb222-34"><a href="#cb222-34" aria-hidden="true"></a>      string <span class="kw">|</span> boolean<span class="kw">)</span> <span class="va">declaration=</span><span class="st">&quot;local &quot;</span> <span class="kw">;;</span></span>
<span id="cb222-35"><a href="#cb222-35" aria-hidden="true"></a>      integer<span class="kw">)</span> <span class="va">declaration=</span><span class="st">&quot;local -i&quot;</span> <span class="kw">;;</span></span>
<span id="cb222-36"><a href="#cb222-36" aria-hidden="true"></a>      reference<span class="kw">)</span> <span class="va">declaration=</span><span class="st">&quot;local -n&quot;</span> <span class="kw">;;</span></span>
<span id="cb222-37"><a href="#cb222-37" aria-hidden="true"></a>      arrayDeclaration<span class="kw">)</span> <span class="va">declaration=</span><span class="st">&quot;local -a&quot;</span>; <span class="va">wrapLeft=</span> ; <span class="va">wrapRight=</span> <span class="kw">;;</span></span>
<span id="cb222-38"><a href="#cb222-38" aria-hidden="true"></a>      assocDeclaration<span class="kw">)</span> <span class="va">declaration=</span><span class="st">&quot;local -A&quot;</span>; <span class="va">wrapLeft=</span> ; <span class="va">wrapRight=</span> <span class="kw">;;</span></span>
<span id="cb222-39"><a href="#cb222-39" aria-hidden="true"></a>      <span class="st">&quot;string[&quot;</span>*<span class="st">&quot;]&quot;</span><span class="kw">)</span> <span class="va">declaration=</span><span class="st">&quot;local -a&quot;</span>; <span class="va">length=</span><span class="st">&quot;</span><span class="va">${nextType//</span>[a-z\[\]]<span class="va">}</span><span class="st">&quot;</span> <span class="kw">;;</span></span>
<span id="cb222-40"><a href="#cb222-40" aria-hidden="true"></a>      <span class="st">&quot;integer[&quot;</span>*<span class="st">&quot;]&quot;</span><span class="kw">)</span> <span class="va">declaration=</span><span class="st">&quot;local -ai&quot;</span>; <span class="va">length=</span><span class="st">&quot;</span><span class="va">${nextType//</span>[a-z\[\]]<span class="va">}</span><span class="st">&quot;</span> <span class="kw">;;</span></span>
<span id="cb222-41"><a href="#cb222-41" aria-hidden="true"></a>    <span class="kw">esac</span></span>
<span id="cb222-42"><a href="#cb222-42" aria-hidden="true"></a></span>
<span id="cb222-43"><a href="#cb222-43" aria-hidden="true"></a>    <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">${declaration}</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;&quot;</span><span class="kw"> ]]</span></span>
<span id="cb222-44"><a href="#cb222-44" aria-hidden="true"></a>    <span class="kw">then</span></span>
<span id="cb222-45"><a href="#cb222-45" aria-hidden="true"></a>      <span class="bu">shift</span></span>
<span id="cb222-46"><a href="#cb222-46" aria-hidden="true"></a>      <span class="bu">local</span> <span class="va">nextName=</span><span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb222-47"><a href="#cb222-47" aria-hidden="true"></a></span>
<span id="cb222-48"><a href="#cb222-48" aria-hidden="true"></a>      <span class="kw">for</span> <span class="ex">decorator</span> in <span class="st">&quot;</span><span class="va">${decorators[@]}</span><span class="st">&quot;</span></span>
<span id="cb222-49"><a href="#cb222-49" aria-hidden="true"></a>      <span class="kw">do</span></span>
<span id="cb222-50"><a href="#cb222-50" aria-hidden="true"></a>        <span class="kw">case</span> <span class="va">${decorator}</span><span class="kw"> in</span></span>
<span id="cb222-51"><a href="#cb222-51" aria-hidden="true"></a>          @readonly<span class="kw">)</span> <span class="va">declaration+=</span><span class="st">&quot;r&quot;</span> <span class="kw">;;</span></span>
<span id="cb222-52"><a href="#cb222-52" aria-hidden="true"></a>          @required<span class="kw">)</span> <span class="va">evalString+=</span><span class="st">&quot;[[ ! -z </span><span class="dt">\$</span><span class="va">${paramIndex}</span><span class="st"> ]] || echo </span><span class="dt">\&quot;</span><span class="st">Parameter &#39;</span><span class="va">$nextName</span><span class="st">&#39; (</span><span class="va">$nextType</span><span class="st">) is marked as required by &#39;</span><span class="va">${FUNCNAME[1]}</span><span class="st">&#39; function.</span><span class="dt">\&quot;</span><span class="st">; &quot;</span> <span class="op">&gt;&amp;2</span> <span class="kw">;;</span></span>
<span id="cb222-53"><a href="#cb222-53" aria-hidden="true"></a>          @global<span class="kw">)</span> <span class="va">declaration+=</span><span class="st">&quot;g&quot;</span> <span class="kw">;;</span></span>
<span id="cb222-54"><a href="#cb222-54" aria-hidden="true"></a>        <span class="kw">esac</span></span>
<span id="cb222-55"><a href="#cb222-55" aria-hidden="true"></a>      <span class="kw">done</span></span>
<span id="cb222-56"><a href="#cb222-56" aria-hidden="true"></a></span>
<span id="cb222-57"><a href="#cb222-57" aria-hidden="true"></a>      <span class="bu">local</span> <span class="va">paramRange=</span><span class="st">&quot;</span><span class="va">$paramIndex</span><span class="st">&quot;</span></span>
<span id="cb222-58"><a href="#cb222-58" aria-hidden="true"></a></span>
<span id="cb222-59"><a href="#cb222-59" aria-hidden="true"></a>      <span class="kw">if [[</span> <span class="ot">-z</span> <span class="st">&quot;</span><span class="va">$length</span><span class="st">&quot;</span><span class="kw"> ]]</span></span>
<span id="cb222-60"><a href="#cb222-60" aria-hidden="true"></a>      <span class="kw">then</span></span>
<span id="cb222-61"><a href="#cb222-61" aria-hidden="true"></a></span>
<span id="cb222-62"><a href="#cb222-62" aria-hidden="true"></a><span class="co"># ...rest</span></span>
<span id="cb222-63"><a href="#cb222-63" aria-hidden="true"></a>        <span class="va">paramRange=</span><span class="st">&quot;{@:</span><span class="va">$paramIndex</span><span class="st">}&quot;</span></span>
<span id="cb222-64"><a href="#cb222-64" aria-hidden="true"></a></span>
<span id="cb222-65"><a href="#cb222-65" aria-hidden="true"></a><span class="co"># trim leading ...</span></span>
<span id="cb222-66"><a href="#cb222-66" aria-hidden="true"></a>        <span class="va">nextName=</span><span class="st">&quot;</span><span class="va">${nextName//</span>\.<span class="va">/}</span><span class="st">&quot;</span></span>
<span id="cb222-67"><a href="#cb222-67" aria-hidden="true"></a>        <span class="kw">if [[</span> <span class="st">&quot;${</span></span>
<span id="cb222-68"><a href="#cb222-68" aria-hidden="true"></a><span class="st">#@}&quot;</span> <span class="ot">-gt</span> 1<span class="kw"> ]]</span></span>
<span id="cb222-69"><a href="#cb222-69" aria-hidden="true"></a>        <span class="kw">then</span></span>
<span id="cb222-70"><a href="#cb222-70" aria-hidden="true"></a>          <span class="bu">echo</span> <span class="st">&quot;Unexpected arguments after a rest array (</span><span class="va">$nextName</span><span class="st">) in &#39;</span><span class="va">${FUNCNAME[1]}</span><span class="st">&#39; function.&quot;</span> <span class="op">&gt;&amp;2</span></span>
<span id="cb222-71"><a href="#cb222-71" aria-hidden="true"></a>        <span class="kw">fi</span></span>
<span id="cb222-72"><a href="#cb222-72" aria-hidden="true"></a>      <span class="kw">elif [[</span> <span class="st">&quot;</span><span class="va">$length</span><span class="st">&quot;</span> <span class="ot">-gt</span> 1<span class="kw"> ]]</span></span>
<span id="cb222-73"><a href="#cb222-73" aria-hidden="true"></a>      <span class="kw">then</span></span>
<span id="cb222-74"><a href="#cb222-74" aria-hidden="true"></a>        <span class="va">paramRange=</span><span class="st">&quot;{@:</span><span class="va">$paramIndex</span><span class="st">:</span><span class="va">$length</span><span class="st">}&quot;</span></span>
<span id="cb222-75"><a href="#cb222-75" aria-hidden="true"></a>        <span class="va">paramIndex+=$((</span>length - 1<span class="va">))</span></span>
<span id="cb222-76"><a href="#cb222-76" aria-hidden="true"></a>      <span class="kw">fi</span></span>
<span id="cb222-77"><a href="#cb222-77" aria-hidden="true"></a></span>
<span id="cb222-78"><a href="#cb222-78" aria-hidden="true"></a>      <span class="va">evalString+=</span><span class="st">&quot;</span><span class="va">${declaration}</span><span class="st"> </span><span class="va">${nextName}</span><span class="st">=</span><span class="va">${wrapLeft}</span><span class="dt">\$</span><span class="va">${paramRange}${wrapRight}</span><span class="st">; &quot;</span></span>
<span id="cb222-79"><a href="#cb222-79" aria-hidden="true"></a></span>
<span id="cb222-80"><a href="#cb222-80" aria-hidden="true"></a></span>
<span id="cb222-81"><a href="#cb222-81" aria-hidden="true"></a><span class="co"># continue to the next param:</span></span>
<span id="cb222-82"><a href="#cb222-82" aria-hidden="true"></a>      <span class="bu">shift</span></span>
<span id="cb222-83"><a href="#cb222-83" aria-hidden="true"></a>    <span class="kw">fi</span></span>
<span id="cb222-84"><a href="#cb222-84" aria-hidden="true"></a>  <span class="kw">done</span></span>
<span id="cb222-85"><a href="#cb222-85" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${evalString}</span><span class="st"> local -i __paramIndex=</span><span class="va">${paramIndex}</span><span class="st">;&quot;</span></span>
<span id="cb222-86"><a href="#cb222-86" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb222-87"><a href="#cb222-87" aria-hidden="true"></a></span>
<span id="cb222-88"><a href="#cb222-88" aria-hidden="true"></a><span class="bu">alias</span> args=<span class="st">&#39;local __previousTrap=$(trap -p DEBUG); trap &quot;eval \&quot;\$(assignTrap \$BASH_COMMAND)\&quot;;&quot; DEBUG;&#39;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-specify-the-private-ssh-key-to-use-when-executing-shell-command-on-git-score-927267-in-2018" class="level3">
<h3>27: How to specify the private SSH-key to use when executing shell command on Git? (score <a href="https://stackoverflow.com/q/4565700.html">927267</a> in 2018)</h3>
<section id="question-26" class="level4">
<h4>Question</h4>
<p>A rather unusual situation perhaps, but I want to specify a private SSH-key to use when executing a shell (git) command from the local computer.</p>
<p>Basically like this:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true"></a><span class="fu">git</span> clone git@github.com:TheUser/TheProject.git -key <span class="st">&quot;/home/christoffer/ssh_keys/theuser&quot;</span></span></code></pre></div>
<p>Or even better (in Ruby):</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true"></a><span class="ex">with_key</span>(<span class="st">&quot;/home/christoffer/ssh_keys/theuser&quot;</span>) <span class="kw">do</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true"></a>  <span class="fu">sh</span>(<span class="st">&quot;git clone git@github.com:TheUser/TheProject.git&quot;</span>)</span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true"></a><span class="ex">end</span></span></code></pre></div>
<p>I have seen examples of connecting to a remote server with Net::SSH that uses a specified private key, but this is a local command. Is it possible?</p>
</section>
<section id="answer-accepted-score-690" class="level4">
<h4>Answer accepted (score 690)</h4>
<p>Something like this should work (suggested by orip):</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true"></a><span class="fu">ssh-agent</span> bash -c <span class="st">&#39;ssh-add /somewhere/yourkey; git clone git@github.com:user/project.git&#39;</span></span></code></pre></div>
<p>if you prefer subshells, you could try the following (though it is more fragile):</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true"></a><span class="fu">ssh-agent</span> <span class="va">$(</span><span class="fu">ssh-add</span> /somewhere/yourkey<span class="kw">;</span> <span class="fu">git</span> clone git@github.com:user/project.git<span class="va">)</span></span></code></pre></div>
<p>Git will invoke SSH which will find its agent by environment variable; this will, in turn, have the key loaded.</p>
<p>Alternatively, setting <code>HOME</code> may also do the trick, provided you are willing to setup a directory that contains only a <code>.ssh</code> directory as <code>HOME</code>; this may either contain an identity.pub, or a <a href="http://linux.die.net/man/5/ssh_config" rel="noreferrer">config file</a> setting IdentityFile.</p>
</section>
<section id="answer-2-score-1075" class="level4">
<h4>Answer 2 (score 1075)</h4>
<p>None of these solutions worked for me.</p>
<p>Instead, I elaborate on <span class="citation" data-cites="Martin">@Martin</span> v. Löwis ’s mention of setting a <code>config</code> file for SSH.</p>
<p>SSH will look for the user’s <code>~/.ssh/config</code> file. I have mine setup as:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true"></a><span class="ex">Host</span> gitserv</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true"></a>    <span class="ex">Hostname</span> remote.server.com</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true"></a>    <span class="ex">IdentityFile</span> ~/.ssh/id_rsa.github</span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true"></a>    <span class="ex">IdentitiesOnly</span> yes</span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true"></a><span class="co"># see NOTES below</span></span></code></pre></div>
<p>And I add a remote git repository:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true"></a><span class="fu">git</span> remote add origin git@gitserv:myrepo.git</span></code></pre></div>
<p>And then git commands work normally for me.</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true"></a><span class="fu">git</span> push -v origin master</span></code></pre></div>
<p><strong>NOTES</strong></p>
<ul>
<li>
The <code>IdentitiesOnly yes</code> is required to <a href="https://serverfault.com/questions/450796/how-could-i-stop-ssh-offering-a-wrong-key/450807
#450807" title="foo">prevent the SSH default behavior</a> of sending the identity file matching the default filename for each protocol. If you have a file named <code>~/.ssh/id_rsa</code> that will get tried BEFORE your <code>~/.ssh/id_rsa.github</code> without this option.
</li>
</ul>
<p><strong>References</strong></p>
<ul>
<li>
<a href="https://stackoverflow.com/questions/2419566/best-way-to-use-multiple-ssh-private-keys-on-one-client">Best way to use multiple SSH private keys on one client</a>
</li>
<li>
<a href="https://serverfault.com/questions/450796/how-could-i-stop-ssh-offering-a-wrong-key/450807
#450807" title="foo">How could I stop ssh offering a wrong key</a>
</li>
</ul>
</section>
<section id="answer-3-score-390" class="level4">
<h4>Answer 3 (score 390)</h4>
<p>Other people’s suggestions about <code>~/.ssh/config</code> are extra complicated. It can be as simple as:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true"></a><span class="ex">Host</span> github.com</span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true"></a>  <span class="ex">IdentityFile</span> ~/.ssh/github_rsa</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-prompt-for-yesnocancel-input-in-a-linux-shell-script-score-926403-in-2016" class="level3">
<h3>28: How do I prompt for Yes/No/Cancel input in a Linux shell script? (score <a href="https://stackoverflow.com/q/226703.html">926403</a> in 2016)</h3>
<section id="question-27" class="level4">
<h4>Question</h4>
<p>I want to pause input in a shell script, and prompt the user for choices. The standard ‘Yes, No, or Cancel’ type question. How do I accomplish this in a typical bash prompt?</p>
</section>
<section id="answer-accepted-score-1490" class="level4">
<h4>Answer accepted (score 1490)</h4>
<p>The simplest and most widely available method to get user input at a shell prompt is the <a href="http://www.gnu.org/software/bash/manual/bashref.html
#index-read" rel="noreferrer"><code>read</code></a> command. The best way to illustrate its use is a simple demonstration:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true"></a><span class="kw">while</span> <span class="fu">true</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true"></a>    <span class="bu">read</span> -p <span class="st">&quot;Do you wish to install this program?&quot;</span> <span class="va">yn</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true"></a>    <span class="kw">case</span> <span class="va">$yn</span><span class="kw"> in</span></span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true"></a>        [Yy]* <span class="kw">)</span> <span class="fu">make</span> install<span class="kw">;</span> <span class="bu">break</span><span class="kw">;;</span></span>
<span id="cb231-5"><a href="#cb231-5" aria-hidden="true"></a>        [<span class="ex">Nn</span>]* ) <span class="bu">exit</span><span class="kw">;;</span></span>
<span id="cb231-6"><a href="#cb231-6" aria-hidden="true"></a>        <span class="ex">*</span> ) <span class="bu">echo</span> <span class="st">&quot;Please answer yes or no.&quot;</span><span class="kw">;;</span></span>
<span id="cb231-7"><a href="#cb231-7" aria-hidden="true"></a>    <span class="kw">esac</span></span>
<span id="cb231-8"><a href="#cb231-8" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>Another method, <a href="https://stackoverflow.com/a/226946/9084">pointed out</a> by <a href="https://stackoverflow.com/users/28604/steven-huwig">Steven Huwig</a>, is Bash’s <a href="http://www.gnu.org/software/bash/manual/bashref.html
#index-select" rel="noreferrer"><code>select</code></a> command. Here is the same example using <code>select</code>:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;Do you wish to install this program?&quot;</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true"></a><span class="kw">select</span> <span class="ex">yn</span> in <span class="st">&quot;Yes&quot;</span> <span class="st">&quot;No&quot;</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true"></a>    <span class="kw">case</span> <span class="va">$yn</span><span class="kw"> in</span></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true"></a>        Yes <span class="kw">)</span> <span class="fu">make</span> install<span class="kw">;</span> <span class="bu">break</span><span class="kw">;;</span></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true"></a>        <span class="ex">No</span> ) <span class="bu">exit</span><span class="kw">;;</span></span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true"></a>    <span class="kw">esac</span></span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>With <code>select</code> you don’t need to sanitize the input – it displays the available choices, and you type a number corresponding to your choice. It also loops automatically, so there’s no need for a <code>while true</code> loop to retry if they give invalid input.</p>
<p>Also, <a href="https://stackoverflow.com/users/7939871/l%c3%a9a-gris">Léa Gris</a> demonstrated a way to make the request language agnostic in <a href="https://stackoverflow.com/a/57739142/9084">her answer</a>. Adapting my first example to better serve multiple languages might look like this:</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">--</span> <span class="va">$(</span><span class="ex">locale</span> LC_MESSAGES<span class="va">)</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true"></a><span class="va">yesptrn=</span><span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span>; <span class="va">noptrn=</span><span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span>; <span class="va">yesword=</span><span class="st">&quot;</span><span class="va">$3</span><span class="st">&quot;</span>; <span class="va">noword=</span><span class="st">&quot;</span><span class="va">$4</span><span class="st">&quot;</span></span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true"></a></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true"></a><span class="kw">while</span> <span class="fu">true</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true"></a>    <span class="bu">read</span> -p <span class="st">&quot;Install (</span><span class="va">${yesword}</span><span class="st"> / </span><span class="va">${noword}</span><span class="st">)? &quot;</span> <span class="va">yn</span></span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true"></a>    <span class="kw">case</span> <span class="va">$yn</span><span class="kw"> in</span></span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true"></a>        <span class="va">${yesptrn</span></span>
<span id="cb233-8"><a href="#cb233-8" aria-hidden="true"></a><span class="va">##</span>^<span class="va">}</span> <span class="kw">)</span> <span class="fu">make</span> install<span class="kw">;</span> <span class="bu">break</span><span class="kw">;;</span></span>
<span id="cb233-9"><a href="#cb233-9" aria-hidden="true"></a>        <span class="va">${noptrn</span></span>
<span id="cb233-10"><a href="#cb233-10" aria-hidden="true"></a><span class="va">##</span>^<span class="va">}</span> ) <span class="bu">exit</span><span class="kw">;;</span></span>
<span id="cb233-11"><a href="#cb233-11" aria-hidden="true"></a>        <span class="ex">*</span> ) <span class="bu">echo</span> <span class="st">&quot;Answer </span><span class="va">${yesword}</span><span class="st"> / </span><span class="va">${noword}</span><span class="st">.&quot;</span><span class="kw">;;</span></span>
<span id="cb233-12"><a href="#cb233-12" aria-hidden="true"></a>    <span class="kw">esac</span></span>
<span id="cb233-13"><a href="#cb233-13" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>Obviously other communication strings remain untranslated here (Install, Answer) which would need to be addressed in a more fully completed translation, but even a partial translation would be helpful in many cases.</p>
<p>Finally, please check out the <a href="https://stackoverflow.com/a/27875395/9084">excellent answer</a> by <a href="https://stackoverflow.com/users/1765658/f-hauri">F. Hauri</a>.</p>
</section>
<section id="answer-2-score-483" class="level4">
<h4>Answer 2 (score 483)</h4>
<h5>
At least five answers for one generic question.
</h1>
<p>Depending on</p>
<ul>
<li>
<a href="/questions/tagged/posix" class="post-tag" title="show questions tagged &
#39;posix&#39;" rel="tag">posix</a> compliant: could work on poor systems with generic <a href="/questions/tagged/shell" class="post-tag" title="show questions tagged &#39;shell&#39;" rel="tag">shell</a> environments
</li>
<li>
<a href="/questions/tagged/bash" class="post-tag" title="show questions tagged &
#39;bash&#39;" rel="tag">bash</a> specific: using so called <em>bashisms</em>
</li>
</ul>
<p>and if you want</p>
<ul>
<li>
simple ``in line’’ question / answer (generic solutions)
</li>
<li>
pretty formatted interfaces, like <a href="/questions/tagged/ncurses" class="post-tag" title="show questions tagged &
#39;ncurses&#39;" rel="tag">ncurses</a> or more graphical using libgtk or libqt…
</li>
<li>
use powerful readline history capability
</li>
</ul>
<h5>
<ol type="1">
<li>POSIX generic solutions
</h2></li>
</ol>
<p>You could use the <code>read</code> command, followed by <code>if ... then ... else</code>:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true"></a><span class="bu">echo</span> -n <span class="st">&quot;Is this a good question (y/n)? &quot;</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true"></a><span class="bu">read</span> <span class="va">answer</span></span></code></pre></div>
<p><s></p>
<div class="sourceCode" id="cb235"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true"></a></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true"></a><span class="co"># if echo &quot;$answer&quot; | grep -iq &quot;^y&quot; ;then</span></span></code></pre></div>
<p></s></p>
<div class="sourceCode" id="cb236"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$answer</span><span class="st">&quot;</span> <span class="ot">!=</span> <span class="st">&quot;</span><span class="va">${answer</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true"></a><span class="va">#</span>[Yy]<span class="va">}</span><span class="st">&quot;</span><span class="bu"> ]</span> ;<span class="kw">then</span></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true"></a>    <span class="bu">echo</span> Yes</span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true"></a>    <span class="bu">echo</span> No</span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>(Thanks to <a href="https://stackoverflow.com/posts/comments/86532780?noredirect=1">Adam Katz’s comment</a>: Replaced the test above with one that is more portable and avoids one fork:)</p>
<h5>
POSIX, but single key feature
</h3>
<p>But if you don’t want the user to have to hit <kbd>Return</kbd>, you could write:</p>
<p>(<strong>Edited:</strong> As <span class="citation" data-cites="JonathanLeffler">@JonathanLeffler</span> rightly suggest, <em>saving</em> stty’s configuration could be better than simply force them to <em>sane</em>.)</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true"></a><span class="bu">echo</span> -n <span class="st">&quot;Is this a good question (y/n)? &quot;</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true"></a><span class="va">old_stty_cfg=$(</span><span class="fu">stty</span> -g<span class="va">)</span></span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true"></a><span class="fu">stty</span> raw -echo <span class="kw">;</span> <span class="va">answer=$(</span><span class="fu">head</span> -c 1<span class="va">)</span> ; <span class="fu">stty</span> <span class="va">$old_stty_cfg</span></span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true"></a><span class="co"># Careful playing with stty</span></span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true"></a><span class="kw">if</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$answer</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> -iq <span class="st">&quot;^y&quot;</span> <span class="kw">;then</span></span>
<span id="cb237-6"><a href="#cb237-6" aria-hidden="true"></a>    <span class="bu">echo</span> Yes</span>
<span id="cb237-7"><a href="#cb237-7" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb237-8"><a href="#cb237-8" aria-hidden="true"></a>    <span class="bu">echo</span> No</span>
<span id="cb237-9"><a href="#cb237-9" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p><strong>Note:</strong> This was tested under <a href="/questions/tagged/sh" class="post-tag" title="show questions tagged &
#39;sh&#39;" rel="tag">sh</a>, <a href="/questions/tagged/bash" class="post-tag" title="show questions tagged &#39;bash&#39;" rel="tag">bash</a>, <a href="/questions/tagged/ksh" class="post-tag" title="show questions tagged &#39;ksh&#39;" rel="tag">ksh</a>, <a href="/questions/tagged/dash" class="post-tag" title="show questions tagged &#39;dash&#39;" rel="tag">dash</a> and <a href="/questions/tagged/busybox" class="post-tag" title="show questions tagged &#39;busybox&#39;" rel="tag">busybox</a>!</p>
<p>Same, but waiting explicitly for <kbd>y</kbd> or <kbd>n</kbd>:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true"></a></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true"></a><span class="co">#/bin/sh</span></span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true"></a><span class="bu">echo</span> -n <span class="st">&quot;Is this a good question (y/n)? &quot;</span></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true"></a><span class="va">old_stty_cfg=$(</span><span class="fu">stty</span> -g<span class="va">)</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true"></a><span class="fu">stty</span> raw -echo</span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true"></a><span class="va">answer=$(</span> <span class="kw">while</span> ! <span class="fu">head</span> -c 1 <span class="kw">|</span> <span class="fu">grep</span> -i <span class="st">&#39;[ny]&#39;</span> <span class="kw">;do</span> <span class="fu">true</span> <span class="kw">;done</span> <span class="va">)</span></span>
<span id="cb238-7"><a href="#cb238-7" aria-hidden="true"></a><span class="fu">stty</span> <span class="va">$old_stty_cfg</span></span>
<span id="cb238-8"><a href="#cb238-8" aria-hidden="true"></a><span class="kw">if</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$answer</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> -iq <span class="st">&quot;^y&quot;</span> <span class="kw">;then</span></span>
<span id="cb238-9"><a href="#cb238-9" aria-hidden="true"></a>    <span class="bu">echo</span> Yes</span>
<span id="cb238-10"><a href="#cb238-10" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb238-11"><a href="#cb238-11" aria-hidden="true"></a>    <span class="bu">echo</span> No</span>
<span id="cb238-12"><a href="#cb238-12" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<h5>
Using dedicated tools
</h3>
<p>There are many tools which were built using <code>libncurses</code>, <code>libgtk</code>, <code>libqt</code> or other graphical libraries. For example, using <code>whiptail</code>:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true"></a><span class="kw">if</span> <span class="ex">whiptail</span> --yesno <span class="st">&quot;Is this a good question&quot;</span> 20 60 <span class="kw">;then</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true"></a>    <span class="bu">echo</span> Yes</span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true"></a>    <span class="bu">echo</span> No</span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Depending on your system, you may need to replace <code>whiptail</code> with another similiar tool:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true"></a><span class="ex">dialog</span> --yesno <span class="st">&quot;Is this a good question&quot;</span> 20 60 <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> Yes</span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true"></a></span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true"></a><span class="ex">gdialog</span> --yesno <span class="st">&quot;Is this a good question&quot;</span> 20 60 <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> Yes</span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true"></a></span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true"></a><span class="fu">kdialog</span> --yesno <span class="st">&quot;Is this a good question&quot;</span> 20 60 <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> Yes</span></code></pre></div>
<p>where <code>20</code> is height of dialog box in number of lines and <code>60</code> is width of the dialog box. These tools all have <em>near same</em> syntax.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true"></a><span class="va">DIALOG=</span>whiptail</span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-x</span> /usr/bin/gdialog<span class="bu"> ]</span> ;<span class="kw">then</span> <span class="va">DIALOG=</span>gdialog ; <span class="kw">fi</span></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-x</span> /usr/bin/xdialog<span class="bu"> ]</span> ;<span class="kw">then</span> <span class="va">DIALOG=</span>xdialog ; <span class="kw">fi</span></span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true"></a><span class="ex">...</span></span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true"></a><span class="va">$DIALOG</span> <span class="ex">--yesno</span> ...</span></code></pre></div>
<h5>
<ol start="2" type="1">
<li>Bash specific solutions
</h2></li>
</ol>
<h5>
Basic <em>in line</em> method
</h3>
<div class="sourceCode" id="cb242"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true"></a><span class="bu">read</span> -p <span class="st">&quot;Is this a good question (y/n)? &quot;</span> <span class="va">answer</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true"></a><span class="kw">case</span> <span class="va">${answer:0:1}</span><span class="kw"> in</span></span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true"></a>    y<span class="kw">|</span>Y <span class="kw">)</span></span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true"></a>        <span class="bu">echo</span> Yes</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true"></a>    * <span class="kw">)</span></span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true"></a>        <span class="bu">echo</span> No</span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb242-9"><a href="#cb242-9" aria-hidden="true"></a><span class="kw">esac</span></span></code></pre></div>
<p>I prefer to use <code>case</code> so I could even test for <code>yes | ja | si | oui</code> if needed…</p>
<h5>
<em>in line</em> with <em>single key</em> feature
</h3>
<p>Under bash, we can specify the length of intended input for for the <code>read</code> command:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true"></a><span class="bu">read</span> -n 1 -p <span class="st">&quot;Is this a good question (y/n)? &quot;</span> <span class="va">answer</span></span></code></pre></div>
<p>Under bash, <code>read</code> command accepts a <em>timeout</em> parameter, which could be useful.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true"></a><span class="bu">read</span> -t 3 -n 1 -p <span class="st">&quot;Is this a good question (y/n)? &quot;</span> <span class="va">answer</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true"></a><span class="bu">[</span> <span class="ot">-z</span> <span class="st">&quot;</span><span class="va">$answer</span><span class="st">&quot;</span><span class="bu"> ]</span> <span class="kw">&amp;&amp;</span> <span class="va">answer=</span><span class="st">&quot;Yes&quot;</span></span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true"></a><span class="co"># if &#39;yes&#39; have to be default choice</span></span></code></pre></div>
<h5>
Some tricks for <em>dedicated tools</em>
</h3>
<p>More sophisticated dialog boxes, beyond simple <em><code>yes - no</code></em> purposes:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true"></a><span class="ex">dialog</span> --menu <span class="st">&quot;Is this a good question&quot;</span> 20 60 12 y Yes n No m Maybe</span></code></pre></div>
<p>Progress bar:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true"></a><span class="ex">dialog</span> --gauge <span class="st">&quot;Filling the tank&quot;</span> 20 60 0 <span class="op">&lt;</span> <span class="op">&lt;(</span></span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true"></a>    <span class="kw">for</span> <span class="ex">i</span> in <span class="dt">{1..100}</span><span class="kw">;do</span></span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true"></a>        <span class="bu">printf</span> <span class="st">&quot;XXX\n%d\n%(%a %b %T)T progress: %d\nXXX\n&quot;</span> <span class="va">$i</span> -1 <span class="va">$i</span></span>
<span id="cb246-4"><a href="#cb246-4" aria-hidden="true"></a>        <span class="fu">sleep</span> .033</span>
<span id="cb246-5"><a href="#cb246-5" aria-hidden="true"></a>    <span class="kw">done</span></span>
<span id="cb246-6"><a href="#cb246-6" aria-hidden="true"></a><span class="op">)</span> </span></code></pre></div>
<p>Little demo:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true"></a></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true"></a><span class="co">#!/bin/sh</span></span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true"></a><span class="kw">while</span> <span class="fu">true</span> <span class="kw">;do</span></span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true"></a>    [ <span class="ex">-x</span> <span class="st">&quot;</span><span class="va">$(</span><span class="fu">which</span> <span class="va">${DIALOG%%</span> *<span class="va">})</span><span class="st">&quot;</span> ] <span class="kw">||</span> <span class="va">DIALOG=</span>dialog</span>
<span id="cb247-5"><a href="#cb247-5" aria-hidden="true"></a>    <span class="va">DIALOG=$($DIALOG</span> <span class="ex">--menu</span> <span class="st">&quot;Which tool for next run?&quot;</span> 20 60 12 <span class="op">2&gt;&amp;1</span> <span class="kw">\</span></span>
<span id="cb247-6"><a href="#cb247-6" aria-hidden="true"></a>            <span class="ex">whiptail</span>       <span class="st">&quot;dialog boxes from shell scripts&quot;</span> <span class="op">&gt;</span>/dev/tty <span class="kw">\</span></span>
<span id="cb247-7"><a href="#cb247-7" aria-hidden="true"></a>            <span class="ex">dialog</span>         <span class="st">&quot;dialog boxes from shell with ncurses&quot;</span> <span class="kw">\</span></span>
<span id="cb247-8"><a href="#cb247-8" aria-hidden="true"></a>            <span class="ex">gdialog</span>        <span class="st">&quot;dialog boxes from shell with Gtk&quot;</span> <span class="kw">\</span></span>
<span id="cb247-9"><a href="#cb247-9" aria-hidden="true"></a>            <span class="fu">kdialog</span>        <span class="st">&quot;dialog boxes from shell with Kde&quot;</span> <span class="va">)</span> <span class="kw">||</span> <span class="bu">exit</span></span>
<span id="cb247-10"><a href="#cb247-10" aria-hidden="true"></a>    <span class="fu">clear</span><span class="kw">;</span><span class="bu">echo</span> <span class="st">&quot;Choosed: </span><span class="va">$DIALOG</span><span class="st">.&quot;</span></span>
<span id="cb247-11"><a href="#cb247-11" aria-hidden="true"></a>    <span class="kw">for</span> <span class="ex">i</span> in <span class="kw">`</span><span class="fu">seq</span> 1 100<span class="kw">`;do</span></span>
<span id="cb247-12"><a href="#cb247-12" aria-hidden="true"></a>        <span class="fu">date</span> +<span class="st">&quot;</span><span class="kw">`</span><span class="bu">printf</span> <span class="st">&quot;XXX\n%d\n%%a %%b %%T progress: %d\nXXX\n&quot;</span> <span class="va">$i</span> <span class="va">$i</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb247-13"><a href="#cb247-13" aria-hidden="true"></a>        <span class="fu">sleep</span> .0125</span>
<span id="cb247-14"><a href="#cb247-14" aria-hidden="true"></a>      <span class="kw">done</span> <span class="kw">|</span> <span class="va">$DIALOG</span> <span class="ex">--gauge</span> <span class="st">&quot;Filling the tank&quot;</span> 20 60 0</span>
<span id="cb247-15"><a href="#cb247-15" aria-hidden="true"></a>    <span class="va">$DIALOG</span> <span class="ex">--infobox</span> <span class="st">&quot;This is a simple info box\n\nNo action required&quot;</span> 20 60</span>
<span id="cb247-16"><a href="#cb247-16" aria-hidden="true"></a>    <span class="fu">sleep</span> 3</span>
<span id="cb247-17"><a href="#cb247-17" aria-hidden="true"></a>    <span class="kw">if</span> <span class="va">$DIALOG</span> <span class="ex">--yesno</span>  <span class="st">&quot;Do you like this demo?&quot;</span> 20 60 <span class="kw">;then</span></span>
<span id="cb247-18"><a href="#cb247-18" aria-hidden="true"></a>        <span class="va">AnsYesNo=</span>Yes; <span class="kw">else</span> <span class="va">AnsYesNo=</span>No; <span class="kw">fi</span></span>
<span id="cb247-19"><a href="#cb247-19" aria-hidden="true"></a>    <span class="va">AnsInput=$($DIALOG</span> <span class="ex">--inputbox</span> <span class="st">&quot;A text:&quot;</span> 20 60 <span class="st">&quot;Text here...&quot;</span> <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span>/dev/tty<span class="va">)</span></span>
<span id="cb247-20"><a href="#cb247-20" aria-hidden="true"></a>    <span class="va">AnsPass=$($DIALOG</span> <span class="ex">--passwordbox</span> <span class="st">&quot;A secret:&quot;</span> 20 60 <span class="st">&quot;First...&quot;</span> <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span>/dev/tty<span class="va">)</span></span>
<span id="cb247-21"><a href="#cb247-21" aria-hidden="true"></a>    <span class="va">$DIALOG</span> <span class="ex">--textbox</span> /etc/motd 20 60</span>
<span id="cb247-22"><a href="#cb247-22" aria-hidden="true"></a>    <span class="va">AnsCkLst=$($DIALOG</span> <span class="ex">--checklist</span> <span class="st">&quot;Check some...&quot;</span> 20 60 12 <span class="kw">\</span></span>
<span id="cb247-23"><a href="#cb247-23" aria-hidden="true"></a>        <span class="ex">Correct</span> <span class="st">&quot;This demo is useful&quot;</span>        off <span class="kw">\</span></span>
<span id="cb247-24"><a href="#cb247-24" aria-hidden="true"></a>        <span class="ex">Fun</span>        <span class="st">&quot;This demo is nice&quot;</span>        off <span class="kw">\</span></span>
<span id="cb247-25"><a href="#cb247-25" aria-hidden="true"></a>        <span class="ex">Strong</span>        <span class="st">&quot;This demo is complex&quot;</span>        on <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span>/dev/tty<span class="va">)</span></span>
<span id="cb247-26"><a href="#cb247-26" aria-hidden="true"></a>    <span class="va">AnsRadio=$($DIALOG</span> <span class="ex">--radiolist</span> <span class="st">&quot;I will:&quot;</span> 20 60 12 <span class="kw">\</span></span>
<span id="cb247-27"><a href="#cb247-27" aria-hidden="true"></a>        <span class="st">&quot; -1&quot;</span> <span class="st">&quot;Downgrade this answer&quot;</span>        <span class="ex">off</span> <span class="kw">\</span></span>
<span id="cb247-28"><a href="#cb247-28" aria-hidden="true"></a>        <span class="st">&quot;  0&quot;</span> <span class="st">&quot;Not do anything&quot;</span>                <span class="ex">on</span> <span class="kw">\</span></span>
<span id="cb247-29"><a href="#cb247-29" aria-hidden="true"></a>        <span class="st">&quot; +1&quot;</span> <span class="st">&quot;Upgrade this anser&quot;</span>        <span class="ex">off</span> <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span>/dev/tty<span class="va">)</span></span>
<span id="cb247-30"><a href="#cb247-30" aria-hidden="true"></a>    <span class="va">out=</span><span class="st">&quot;Your answers:\nLike: </span><span class="va">$AnsYesNo</span><span class="st">\nInput: </span><span class="va">$AnsInput</span><span class="st">\nSecret: </span><span class="va">$AnsPass</span><span class="st">&quot;</span></span>
<span id="cb247-31"><a href="#cb247-31" aria-hidden="true"></a>    <span class="va">$DIALOG</span> <span class="ex">--msgbox</span> <span class="st">&quot;</span><span class="va">$out</span><span class="st">\nAttribs: </span><span class="va">$AnsCkLst</span><span class="st">\nNote: </span><span class="va">$AnsRadio</span><span class="st">&quot;</span> 20 60</span>
<span id="cb247-32"><a href="#cb247-32" aria-hidden="true"></a>  <span class="kw">done</span></span></code></pre></div>
<p>More sample? Have a look at <a href="https://stackoverflow.com/questions/50560500/linux-shell-get-device-id-from-user-input/50577400
#50577400">Using whiptail for choosing USB device</a> and <a href="https://unix.stackexchange.com/questions/119759/removable-usb-stick-listed-as-non-removable-in-sys-block/119816#119816">USB removable storage selector: USBKeyChooser</a></p>
<h5>
<ol start="5" type="1">
<li>Using readline’s history
</h3></li>
</ol>
<p>Example:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true"></a></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true"></a></span>
<span id="cb248-4"><a href="#cb248-4" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-i</span></span>
<span id="cb248-5"><a href="#cb248-5" aria-hidden="true"></a><span class="va">HISTFILE=</span>~/.myscript.history</span>
<span id="cb248-6"><a href="#cb248-6" aria-hidden="true"></a><span class="bu">history</span> -c</span>
<span id="cb248-7"><a href="#cb248-7" aria-hidden="true"></a><span class="bu">history</span> -r</span>
<span id="cb248-8"><a href="#cb248-8" aria-hidden="true"></a></span>
<span id="cb248-9"><a href="#cb248-9" aria-hidden="true"></a><span class="fu">myread()</span> <span class="kw">{</span></span>
<span id="cb248-10"><a href="#cb248-10" aria-hidden="true"></a>    <span class="bu">read</span> -e -p <span class="st">&#39;&gt; &#39;</span> <span class="va">$1</span></span>
<span id="cb248-11"><a href="#cb248-11" aria-hidden="true"></a>    <span class="bu">history</span> -s $<span class="dt">{!1}</span></span>
<span id="cb248-12"><a href="#cb248-12" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb248-13"><a href="#cb248-13" aria-hidden="true"></a><span class="bu">trap</span> <span class="st">&#39;history -a;exit&#39;</span> 0 1 2 3 6</span>
<span id="cb248-14"><a href="#cb248-14" aria-hidden="true"></a></span>
<span id="cb248-15"><a href="#cb248-15" aria-hidden="true"></a><span class="kw">while</span> <span class="ex">myread</span> line<span class="kw">;do</span></span>
<span id="cb248-16"><a href="#cb248-16" aria-hidden="true"></a>    <span class="kw">case</span> <span class="va">${line%%</span> *<span class="va">}</span><span class="kw"> in</span></span>
<span id="cb248-17"><a href="#cb248-17" aria-hidden="true"></a>        exit <span class="kw">)</span>  <span class="bu">break</span> <span class="kw">;;</span></span>
<span id="cb248-18"><a href="#cb248-18" aria-hidden="true"></a>        <span class="ex">*</span>    )  <span class="bu">echo</span> <span class="st">&quot;Doing something with &#39;</span><span class="va">$line</span><span class="st">&#39;&quot;</span> <span class="kw">;;</span></span>
<span id="cb248-19"><a href="#cb248-19" aria-hidden="true"></a>      <span class="kw">esac</span></span>
<span id="cb248-20"><a href="#cb248-20" aria-hidden="true"></a>  <span class="kw">done</span></span></code></pre></div>
<p>This will create a file <code>.myscript.history</code> in your <code>$HOME</code> directory, than you could use readline’s history commands, like <kbd>Up</kbd>, <kbd>Down</kbd>, <kbd>Ctrl</kbd>+<kbd>r</kbd> and others.</p>
</section>
<section id="answer-3-score-346" class="level4">
<h4>Answer 3 (score 346)</h4>
<div class="sourceCode" id="cb249"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;Please enter some input: &quot;</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true"></a><span class="bu">read</span> <span class="va">input_variable</span></span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;You entered: </span><span class="va">$input_variable</span><span class="st">&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-do-a-logical-or-operation-in-shell-scripting-score-896876-in-2019" class="level3">
<h3>29: How to do a logical OR operation in shell scripting (score <a href="https://stackoverflow.com/q/4111475.html">896876</a> in 2019)</h3>
<section id="question-28" class="level4">
<h4>Question</h4>
<p>I am trying to do a simple condition check, but it doesn’t seem to work.</p>
<p>If <code>$ #</code> is equal to <code>0</code> or is greater than <code>1</code> then say hello.</p>
<p>I have tried the following syntax with no success:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;$</span></span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true"></a><span class="st">#&quot;</span> <span class="ot">==</span> 0 <span class="ot">-o</span> <span class="st">&quot;</span><span class="va">$#</span><span class="st">&quot;</span> <span class="ot">&gt;</span> 1<span class="bu"> ]</span> ; <span class="kw">then</span></span>
<span id="cb250-3"><a href="#cb250-3" aria-hidden="true"></a> <span class="bu">echo</span> <span class="st">&quot;hello&quot;</span></span>
<span id="cb250-4"><a href="#cb250-4" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb250-5"><a href="#cb250-5" aria-hidden="true"></a></span>
<span id="cb250-6"><a href="#cb250-6" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;$</span></span>
<span id="cb250-7"><a href="#cb250-7" aria-hidden="true"></a><span class="st">#&quot;</span> <span class="ot">==</span> 0<span class="bu"> ]</span> <span class="kw">||</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$#</span><span class="st">&quot;</span> <span class="ot">&gt;</span> 1<span class="bu"> ]</span> ; <span class="kw">then</span></span>
<span id="cb250-8"><a href="#cb250-8" aria-hidden="true"></a> <span class="bu">echo</span> <span class="st">&quot;hello&quot;</span></span>
<span id="cb250-9"><a href="#cb250-9" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-959" class="level4">
<h4>Answer accepted (score 959)</h4>
<p>This should work:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true"></a></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true"></a></span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;$</span></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true"></a><span class="st">#&quot;</span> <span class="ot">-eq</span> 0<span class="bu"> ]</span> <span class="kw">||</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$#</span><span class="st">&quot;</span> <span class="ot">-gt</span> 1<span class="bu"> ]</span> ; <span class="kw">then</span></span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;hello&quot;</span></span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>I’m not sure if this is different in other shells but if you wish to use &lt;, &gt;, you need to put them inside double parenthesis like so:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">((</span><span class="st">&quot;$</span></span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true"></a><span class="st">#&quot;</span> &gt; 1<span class="kw">))</span></span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true"></a> <span class="ex">...</span></span></code></pre></div>
</section>
<section id="answer-2-score-55" class="level4">
<h4>Answer 2 (score 55)</h4>
<p>This code works for me:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true"></a></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true"></a><span class="co">#!/bin/sh</span></span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true"></a></span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true"></a><span class="va">argc=</span>$</span>
<span id="cb253-5"><a href="#cb253-5" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb253-6"><a href="#cb253-6" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$argc</span></span>
<span id="cb253-7"><a href="#cb253-7" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$argc</span> <span class="ot">-eq</span> 0 <span class="ot">-o</span> <span class="va">$argc</span> <span class="ot">-eq</span> 1<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb253-8"><a href="#cb253-8" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;foo&quot;</span></span>
<span id="cb253-9"><a href="#cb253-9" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb253-10"><a href="#cb253-10" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;bar&quot;</span></span>
<span id="cb253-11"><a href="#cb253-11" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>I don’t think sh supports “==”. Use “=” to compare strings and -eq to compare ints.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true"></a><span class="fu">man</span> test</span></code></pre></div>
<p>for more details.</p>
</section>
<section id="answer-3-score-33" class="level4">
<h4>Answer 3 (score 33)</h4>
<p>If you are using the bash exit code status <strong>$?</strong> as variable, it’s better to do this:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$?</span> <span class="ot">-eq</span> 4 <span class="ot">-o</span> <span class="va">$?</span> <span class="ot">-eq</span> 8<span class="bu"> ]</span> ; <span class="kw">then</span>  </span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;...&quot;</span></span>
<span id="cb255-3"><a href="#cb255-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Because if you do:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$?</span> <span class="ot">-eq</span> 4<span class="bu"> ]</span> <span class="kw">||</span><span class="bu"> [</span> <span class="va">$?</span> <span class="ot">-eq</span> 8<span class="bu"> ]</span> ; <span class="kw">then</span>  </span></code></pre></div>
<p>The <strong>left part of the OR</strong> alters the <strong><span class="math inline">? &lt; /<em>s</em><em>t</em><em>r</em><em>o</em><em>n</em><em>g</em> &gt; <em>v</em><em>a</em><em>r</em><em>i</em><em>a</em><em>b</em><em>l</em><em>e</em>, <em>s</em><em>o</em><em>t</em><em>h</em><em>e</em> &lt; <em>s</em><em>t</em><em>r</em><em>o</em><em>n</em><em>g</em> &gt; <em>r</em><em>i</em><em>g</em><em>h</em><em>t</em><em>p</em><em>a</em><em>r</em><em>t</em><em>o</em><em>f</em><em>t</em><em>h</em><em>e</em><em>O</em><em>R</em> &lt; /<em>s</em><em>t</em><em>r</em><em>o</em><em>n</em><em>g</em> &gt; <em>d</em><em>o</em><em>e</em><em>s</em><em>n</em>′<em>t</em><em>h</em><em>a</em><em>v</em><em>e</em><em>t</em><em>h</em><em>e</em><em>o</em><em>r</em><em>i</em><em>g</em><em>i</em><em>n</em><em>a</em><em>l</em> &lt; <em>s</em><em>t</em><em>r</em><em>o</em><em>n</em><em>g</em>&gt;</span>?</strong> value.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-change-the-output-color-of-echo-in-linux-score-896232-in-2017" class="level3">
<h3>30: How to change the output color of echo in Linux (score <a href="https://stackoverflow.com/q/5947742.html">896232</a> in 2017)</h3>
<section id="question-29" class="level4">
<h4>Question</h4>
<p>I am trying to print a text in the terminal using echo command.</p>
<p>I want to print the text in a red color. How can I do that?</p>
</section>
<section id="answer-2-score-2055" class="level4">
<h4>Answer 2 (score 2055)</h4>
<p>You can use these <a href="https://en.wikipedia.org/wiki/ANSI_escape_code" rel="noreferrer">ANSI escape codes</a>:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true"></a><span class="ex">Black</span>        0<span class="kw">;</span><span class="ex">30</span>     Dark Gray     1<span class="kw">;</span><span class="ex">30</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true"></a><span class="ex">Red</span>          0<span class="kw">;</span><span class="ex">31</span>     Light Red     1<span class="kw">;</span><span class="ex">31</span></span>
<span id="cb257-3"><a href="#cb257-3" aria-hidden="true"></a><span class="ex">Green</span>        0<span class="kw">;</span><span class="ex">32</span>     Light Green   1<span class="kw">;</span><span class="ex">32</span></span>
<span id="cb257-4"><a href="#cb257-4" aria-hidden="true"></a><span class="ex">Brown/Orange</span> 0<span class="kw">;</span><span class="ex">33</span>     Yellow        1<span class="kw">;</span><span class="ex">33</span></span>
<span id="cb257-5"><a href="#cb257-5" aria-hidden="true"></a><span class="ex">Blue</span>         0<span class="kw">;</span><span class="ex">34</span>     Light Blue    1<span class="kw">;</span><span class="ex">34</span></span>
<span id="cb257-6"><a href="#cb257-6" aria-hidden="true"></a><span class="ex">Purple</span>       0<span class="kw">;</span><span class="ex">35</span>     Light Purple  1<span class="kw">;</span><span class="ex">35</span></span>
<span id="cb257-7"><a href="#cb257-7" aria-hidden="true"></a><span class="ex">Cyan</span>         0<span class="kw">;</span><span class="ex">36</span>     Light Cyan    1<span class="kw">;</span><span class="ex">36</span></span>
<span id="cb257-8"><a href="#cb257-8" aria-hidden="true"></a><span class="ex">Light</span> Gray   0<span class="kw">;</span><span class="ex">37</span>     White         1<span class="kw">;</span><span class="ex">37</span></span></code></pre></div>
<p>And then use them like this in your script:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true"></a></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true"></a><span class="co">#    .---------- constant part!</span></span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true"></a></span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true"></a><span class="co">#    vvvv vvvv-- the code from above</span></span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true"></a><span class="va">RED=</span><span class="st">&#39;\033[0;31m&#39;</span></span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true"></a><span class="va">NC=</span><span class="st">&#39;\033[0m&#39;</span></span>
<span id="cb258-7"><a href="#cb258-7" aria-hidden="true"></a><span class="co"># No Color</span></span>
<span id="cb258-8"><a href="#cb258-8" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&quot;I </span><span class="va">${RED}</span><span class="st">love</span><span class="va">${NC}</span><span class="st"> Stack Overflow\n&quot;</span></span></code></pre></div>
<p>which prints <code>love</code> in red.</p>
<p>From <span class="citation" data-cites="james-lim">@james-lim</span>’s comment, <strong>if you are using the <code>echo</code> command, be sure to use the -e flag to allow backslash escapes</strong>.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true"></a></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true"></a><span class="co"># Continued from above example</span></span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;I </span><span class="va">${RED}</span><span class="st">love</span><span class="va">${NC}</span><span class="st"> Stack Overflow&quot;</span></span></code></pre></div>
<p>(don’t add <code>"\n"</code> when using echo unless you want to add additional empty line)</p>
</section>
<section id="answer-3-score-868" class="level4">
<h4>Answer 3 (score 868)</h4>
<p>You can use the awesome <code>tput</code> command (suggested in <a href="https://stackoverflow.com/a/5947788/24874">Ignacio’s answer</a>) to produce terminal control codes for all kinds of things.</p>
<hr>
<h5>
Usage
</h1>
<p>Specific <code>tput</code> sub-commands are discussed later.</p>
<h5>
Direct
</h3>
<p>Call <code>tput</code> as part of a sequence of commands:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true"></a><span class="ex">tput</span> setaf 1<span class="kw">;</span> <span class="bu">echo</span> <span class="st">&quot;this is red text&quot;</span></span></code></pre></div>
<p>Use <code>;</code> instead of <code>&amp;amp;&amp;amp;</code> so if <code>tput</code> errors the text still shows.</p>
<h5>
Shell variables
</h3>
<p>Another option is to use shell variables:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true"></a><span class="va">red=</span><span class="kw">`</span><span class="ex">tput</span> setaf 1<span class="kw">`</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true"></a><span class="va">green=</span><span class="kw">`</span><span class="ex">tput</span> setaf 2<span class="kw">`</span></span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true"></a><span class="va">reset=</span><span class="kw">`</span><span class="ex">tput</span> sgr0<span class="kw">`</span></span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${red}</span><span class="st">red text </span><span class="va">${green}</span><span class="st">green text</span><span class="va">${reset}</span><span class="st">&quot;</span></span></code></pre></div>
<p><code>tput</code> produces character sequences that are interpreted by the terminal as having a special meaning. They will not be shown themselves. Note that they can still be saved into files or processed as input by programs other than the terminal.</p>
<h5>
Command substitution
</h3>
<p>It may be more convenient to insert <code>tput</code>’s output directly into your <code>echo</code> strings using <a href="http://tldp.org/LDP/abs/html/commandsub.html" rel="noreferrer">command substitution</a>:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$(</span><span class="ex">tput</span> setaf 1<span class="va">)</span><span class="st">Red text </span><span class="va">$(</span><span class="ex">tput</span> setab 7<span class="va">)</span><span class="st">and white background</span><span class="va">$(</span><span class="ex">tput</span> sgr 0<span class="va">)</span><span class="st">&quot;</span></span></code></pre></div>
<hr>
<h5>
Example
</h1>
<p>The above command produces this on Ubuntu:</p>
<p><img src="https://i.stack.imgur.com/6tYnk.png" alt="Screenshot of colour terminal text"></p>
<hr>
<h5>
Foreground &amp; background colour commands
</h1>
<div class="sourceCode" id="cb263"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true"></a><span class="ex">tput</span> setab [1-7]</span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true"></a><span class="co"># Set the background colour using ANSI escape</span></span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true"></a><span class="ex">tput</span> setaf [1-7]</span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true"></a><span class="co"># Set the foreground colour using ANSI escape</span></span></code></pre></div>
<p>Colours are as follows:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true"></a><span class="ex">Num</span>  Colour</span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true"></a><span class="co">#define         R G B</span></span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true"></a></span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true"></a><span class="ex">0</span>    black     COLOR_BLACK     0,0,0</span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true"></a><span class="ex">1</span>    red       COLOR_RED       1,0,0</span>
<span id="cb264-6"><a href="#cb264-6" aria-hidden="true"></a><span class="ex">2</span>    green     COLOR_GREEN     0,1,0</span>
<span id="cb264-7"><a href="#cb264-7" aria-hidden="true"></a><span class="ex">3</span>    yellow    COLOR_YELLOW    1,1,0</span>
<span id="cb264-8"><a href="#cb264-8" aria-hidden="true"></a><span class="ex">4</span>    blue      COLOR_BLUE      0,0,1</span>
<span id="cb264-9"><a href="#cb264-9" aria-hidden="true"></a><span class="ex">5</span>    magenta   COLOR_MAGENTA   1,0,1</span>
<span id="cb264-10"><a href="#cb264-10" aria-hidden="true"></a><span class="ex">6</span>    cyan      COLOR_CYAN      0,1,1</span>
<span id="cb264-11"><a href="#cb264-11" aria-hidden="true"></a><span class="ex">7</span>    white     COLOR_WHITE     1,1,1</span></code></pre></div>
<p>There are also non-ANSI versions of the colour setting functions (<code>setb</code> instead of <code>setab</code>, and <code>setf</code> instead of <code>setaf</code>) which use different numbers, not given here.</p>
<h5>
Text mode commands
</h1>
<div class="sourceCode" id="cb265"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true"></a><span class="ex">tput</span> bold</span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true"></a><span class="co"># Select bold mode</span></span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true"></a><span class="ex">tput</span> dim</span>
<span id="cb265-4"><a href="#cb265-4" aria-hidden="true"></a><span class="co"># Select dim (half-bright) mode</span></span>
<span id="cb265-5"><a href="#cb265-5" aria-hidden="true"></a><span class="ex">tput</span> smul</span>
<span id="cb265-6"><a href="#cb265-6" aria-hidden="true"></a><span class="co"># Enable underline mode</span></span>
<span id="cb265-7"><a href="#cb265-7" aria-hidden="true"></a><span class="ex">tput</span> rmul</span>
<span id="cb265-8"><a href="#cb265-8" aria-hidden="true"></a><span class="co"># Disable underline mode</span></span>
<span id="cb265-9"><a href="#cb265-9" aria-hidden="true"></a><span class="ex">tput</span> rev</span>
<span id="cb265-10"><a href="#cb265-10" aria-hidden="true"></a><span class="co"># Turn on reverse video mode</span></span>
<span id="cb265-11"><a href="#cb265-11" aria-hidden="true"></a><span class="ex">tput</span> smso</span>
<span id="cb265-12"><a href="#cb265-12" aria-hidden="true"></a><span class="co"># Enter standout (bold) mode</span></span>
<span id="cb265-13"><a href="#cb265-13" aria-hidden="true"></a><span class="ex">tput</span> rmso</span>
<span id="cb265-14"><a href="#cb265-14" aria-hidden="true"></a><span class="co"># Exit standout mode</span></span></code></pre></div>
<h5>
Cursor movement commands
</h1>
<div class="sourceCode" id="cb266"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true"></a><span class="ex">tput</span> cup Y X</span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true"></a><span class="co"># Move cursor to screen postion X,Y (top left is 0,0)</span></span>
<span id="cb266-3"><a href="#cb266-3" aria-hidden="true"></a><span class="ex">tput</span> cuf N</span>
<span id="cb266-4"><a href="#cb266-4" aria-hidden="true"></a><span class="co"># Move N characters forward (right)</span></span>
<span id="cb266-5"><a href="#cb266-5" aria-hidden="true"></a><span class="ex">tput</span> cub N</span>
<span id="cb266-6"><a href="#cb266-6" aria-hidden="true"></a><span class="co"># Move N characters back (left)</span></span>
<span id="cb266-7"><a href="#cb266-7" aria-hidden="true"></a><span class="ex">tput</span> cuu N</span>
<span id="cb266-8"><a href="#cb266-8" aria-hidden="true"></a><span class="co"># Move N lines up</span></span>
<span id="cb266-9"><a href="#cb266-9" aria-hidden="true"></a><span class="ex">tput</span> ll</span>
<span id="cb266-10"><a href="#cb266-10" aria-hidden="true"></a><span class="co"># Move to last line, first column (if no cup)</span></span>
<span id="cb266-11"><a href="#cb266-11" aria-hidden="true"></a><span class="ex">tput</span> sc</span>
<span id="cb266-12"><a href="#cb266-12" aria-hidden="true"></a><span class="co"># Save the cursor position</span></span>
<span id="cb266-13"><a href="#cb266-13" aria-hidden="true"></a><span class="ex">tput</span> rc</span>
<span id="cb266-14"><a href="#cb266-14" aria-hidden="true"></a><span class="co"># Restore the cursor position</span></span>
<span id="cb266-15"><a href="#cb266-15" aria-hidden="true"></a><span class="ex">tput</span> lines</span>
<span id="cb266-16"><a href="#cb266-16" aria-hidden="true"></a><span class="co"># Output the number of lines of the terminal</span></span>
<span id="cb266-17"><a href="#cb266-17" aria-hidden="true"></a><span class="ex">tput</span> cols</span>
<span id="cb266-18"><a href="#cb266-18" aria-hidden="true"></a><span class="co"># Output the number of columns of the terminal</span></span></code></pre></div>
<h5>
Clear and insert commands
</h1>
<div class="sourceCode" id="cb267"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true"></a><span class="ex">tput</span> ech N</span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true"></a><span class="co"># Erase N characters</span></span>
<span id="cb267-3"><a href="#cb267-3" aria-hidden="true"></a><span class="ex">tput</span> clear</span>
<span id="cb267-4"><a href="#cb267-4" aria-hidden="true"></a><span class="co"># Clear screen and move the cursor to 0,0</span></span>
<span id="cb267-5"><a href="#cb267-5" aria-hidden="true"></a><span class="ex">tput</span> el 1</span>
<span id="cb267-6"><a href="#cb267-6" aria-hidden="true"></a><span class="co"># Clear to beginning of line</span></span>
<span id="cb267-7"><a href="#cb267-7" aria-hidden="true"></a><span class="ex">tput</span> el</span>
<span id="cb267-8"><a href="#cb267-8" aria-hidden="true"></a><span class="co"># Clear to end of line</span></span>
<span id="cb267-9"><a href="#cb267-9" aria-hidden="true"></a><span class="ex">tput</span> ed</span>
<span id="cb267-10"><a href="#cb267-10" aria-hidden="true"></a><span class="co"># Clear to end of screen</span></span>
<span id="cb267-11"><a href="#cb267-11" aria-hidden="true"></a><span class="ex">tput</span> ich N</span>
<span id="cb267-12"><a href="#cb267-12" aria-hidden="true"></a><span class="co"># Insert N characters (moves rest of line forward!)</span></span>
<span id="cb267-13"><a href="#cb267-13" aria-hidden="true"></a><span class="ex">tput</span> il N</span>
<span id="cb267-14"><a href="#cb267-14" aria-hidden="true"></a><span class="co"># Insert N lines</span></span></code></pre></div>
<h5>
Other commands
</h1>
<div class="sourceCode" id="cb268"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true"></a><span class="ex">tput</span> sgr0</span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true"></a><span class="co"># Reset text format to the terminal&#39;s default</span></span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true"></a><span class="ex">tput</span> bel</span>
<span id="cb268-4"><a href="#cb268-4" aria-hidden="true"></a><span class="co"># Play a bell</span></span></code></pre></div>
<p>With <a href="https://extensions.gnome.org/extension/669/wobbly-windows/" rel="noreferrer">compiz wobbly windows</a>, the <code>bel</code> command makes the terminal wobble for a second to draw the user’s attention.</p>
<hr>
<h5>
Scripts
</h1>
<p><code>tput</code> accepts scripts containing one command per line, which are executed in order before <code>tput</code> exits.</p>
<p>Avoid temporary files by echoing a multiline string and piping it:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true"></a><span class="bu">echo</span> -e <span class="st">&quot;setf 7\nsetb 1&quot;</span> <span class="kw">|</span> <span class="ex">tput</span> -S</span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true"></a><span class="co"># set fg white and bg red</span></span></code></pre></div>
<hr>
<h5>
See also
</h1>
<ul>
<li>
See <a href="http://unixhelp.ed.ac.uk/CGI/man-cgi?tput+1" rel="noreferrer"><code>man 1 tput</code></a>
</li>
<li>
See <a href="http://www.manpagez.com/man/5/terminfo/" rel="noreferrer"><code>man 5 terminfo</code></a> for the complete list of commands and more details on these options. (The corresponding <code>tput</code> command is listed in the <code>Cap-name</code> column of the huge table that starts at line 81.)
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-call-shell-script-from-another-shell-script-score-876027-in-2016" class="level3">
<h3>31: How to call shell script from another shell script? (score <a href="https://stackoverflow.com/q/8352851.html">876027</a> in 2016)</h3>
<section id="question-30" class="level4">
<h4>Question</h4>
<p>I have two shell scripts, <code>a.sh</code> and <code>b.sh</code>.</p>
<p>How can I call <code>b.sh</code> from within the shell script <code>a.sh</code>?</p>
</section>
<section id="answer-2-score-856" class="level4">
<h4>Answer 2 (score 856)</h4>
<p>There are a couple of different ways you can do this:</p>
<ol>
<li>
<p>
Make the other script executable, add the <code>#!/bin/bash</code> line at the top, and the path where the file is to the $PATH environment variable. Then you can call it as a normal command;
</p>
</li>
<li>
<p>
Or call it with the <code>source</code> command (alias is <code>.</code>) like this: <code>source /path/to/script</code>;
</p>
</li>
<li>
<p>
Or use the <code>bash</code> command to execute it: <code>/bin/bash /path/to/script</code>;
</p>
</li>
</ol>
<p>
The first and third methods execute the script as another process, so variables and functions in the other script will not be accessible.<br> The second method executes the script in the first script’s process, and pulls in variables and functions from the other script so they are usable from the calling script.
</p>
<p>In the second method, if you are using <code>exit</code> in second script, it will exit the first script as well. Which will not happen in first and third methods.</p>
</section>
<section id="answer-3-score-195" class="level4">
<h4>Answer 3 (score 195)</h4>
<p>Check this out.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true"></a></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb270-3"><a href="#cb270-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;This script is about to run another script.&quot;</span></span>
<span id="cb270-4"><a href="#cb270-4" aria-hidden="true"></a><span class="fu">sh</span> ./script.sh</span>
<span id="cb270-5"><a href="#cb270-5" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;This script has just run another script.&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-reload-.bashrc-without-logging-out-and-back-in-score-855839-in-2018" class="level3">
<h3>32: How do I reload .bashrc without logging out and back in? (score <a href="https://stackoverflow.com/q/2518127.html">855839</a> in 2018)</h3>
<section id="question-31" class="level4">
<h4>Question</h4>
<p>If I make changes to <code>.bashrc</code>, how do I reload it without logging out and back in?</p>
</section>
<section id="answer-accepted-score-2385" class="level4">
<h4>Answer accepted (score 2385)</h4>
<p>You just have to enter the command:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div>
<p>or you can use the shorter version of the command:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true"></a><span class="bu">.</span> <span class="ex">~/.bashrc</span></span></code></pre></div>
</section>
<section id="answer-2-score-246" class="level4">
<h4>Answer 2 (score 246)</h4>
<p>or you could use;</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true"></a><span class="bu">exec</span> bash</span></code></pre></div>
<p>does the same thing. (and easier to remember, at least for me)</p>
<p><strong><em>exec</em></strong> command replaces the shell with given program, in our example, it replaces our shell with bash (with the updated configuration files)</p>
</section>
<section id="answer-3-score-111" class="level4">
<h4>Answer 3 (score 111)</h4>
<p>To <strong>complement and contrast</strong> the two most popular answers, <a href="https://stackoverflow.com/a/2518150/45375"><code>. ~/.bashrc</code></a> and <a href="https://stackoverflow.com/a/9584378/45375"><code>exec bash</code></a>:</p>
<p>Both solutions <em>effectively</em> reload <code>~/.bashrc</code>, but there are differences:</p>
<ul>
<li>
<p>
<code>. ~/.bashrc</code> or <code>source ~/.bashrc</code> will <strong><em>preserve</em> your current shell</strong>:
</p>
<ul>
<li>
Except for the modifications that reloading <code>~/.bashrc</code> into the current shell (<em>sourcing</em>) makes, <strong>the <em>current shell and its state</em> are <em>preserved</em></strong>, which includes environment variables, shell variables, shell options, shell functions, and command history.
</li>
</ul>
</li>
<li>
<p>
<code>exec bash</code>, or, more robustly, <code>exec "$BASH"</code><sup>[1]</sup>, will <strong><em>replace</em> your current shell</strong> with a new instance, and therefore <strong><em>only</em> preserve your current shell’s <em>environment variables</strong></em> (including ones you’ve defined ad-hoc).
</p>
<ul>
<li>
In other words: Any ad-hoc changes to the current shell in terms of shell variables, shell functions, shell options, command history are lost.
</li>
</ul>
</li>
</ul>
<p>Depending on your needs, one or the other approach may be preferred.</p>
<hr>
<p>
<sup>[1] <code>exec bash</code> could in theory execute a <em>different</em> <code>bash</code> executable than the one that started the current shell, if it happens to exist in a directory listed earlier in the <code>$PATH</code>. Since special variable <code>$BASH</code> always contains the full path of the executable that started the current shell, <code>exec "$BASH"</code> is guaranteed to use the <em>same</em> executable.<br> A note re <code>"..."</code> around <code>$BASH</code>: double-quoting ensures that the variable value is used as-is, without interpretation by Bash; if the value has no embedded spaces or other shell metacharacters (which is not likely in this case), you don’t strictly need double quotes, but using them is a good habit to form.</sup>
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="parsing-json-with-unix-tools-score-847637-in-2018" class="level3">
<h3>33: Parsing JSON with Unix tools (score <a href="https://stackoverflow.com/q/1955505.html">847637</a> in 2018)</h3>
<section id="question-32" class="level4">
<h4>Question</h4>
<p>I’m trying to parse JSON returned from a curl request, like so:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true"></a><span class="ex">curl</span> <span class="st">&#39;http://twitter.com/users/username.json&#39;</span> <span class="kw">|</span></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true"></a>    <span class="fu">sed</span> -e <span class="st">&#39;s/[{}]/&#39;&#39;/g&#39;</span> <span class="kw">|</span> </span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true"></a>    <span class="fu">awk</span> -v k=<span class="st">&quot;text&quot;</span> <span class="st">&#39;{n=split($0,a,&quot;,&quot;); for (i=1; i&lt;=n; i++) print a[i]}&#39;</span></span></code></pre></div>
<p>The above splits the JSON into fields, for example:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true"></a><span class="ex">%</span> ...</span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true"></a><span class="st">&quot;geo_enabled&quot;</span>:<span class="ex">false</span></span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true"></a><span class="st">&quot;friends_count&quot;</span>:<span class="ex">245</span></span>
<span id="cb275-4"><a href="#cb275-4" aria-hidden="true"></a><span class="st">&quot;profile_text_color&quot;</span>:<span class="st">&quot;000000&quot;</span></span>
<span id="cb275-5"><a href="#cb275-5" aria-hidden="true"></a><span class="st">&quot;status&quot;</span>:<span class="st">&quot;in_reply_to_screen_name&quot;</span>:<span class="ex">null</span></span>
<span id="cb275-6"><a href="#cb275-6" aria-hidden="true"></a><span class="st">&quot;source&quot;</span>:<span class="st">&quot;web&quot;</span></span>
<span id="cb275-7"><a href="#cb275-7" aria-hidden="true"></a><span class="st">&quot;truncated&quot;</span>:<span class="ex">false</span></span>
<span id="cb275-8"><a href="#cb275-8" aria-hidden="true"></a><span class="st">&quot;text&quot;</span>:<span class="st">&quot;My status&quot;</span></span>
<span id="cb275-9"><a href="#cb275-9" aria-hidden="true"></a><span class="st">&quot;favorited&quot;</span>:<span class="ex">false</span></span>
<span id="cb275-10"><a href="#cb275-10" aria-hidden="true"></a><span class="ex">%</span> ...</span></code></pre></div>
<p>How do I print a specific field (denoted by the <code>-v k=text</code>)?</p>
</section>
<section id="answer-accepted-score-943" class="level4">
<h4>Answer accepted (score 943)</h4>
<p>There are a number of tools specifically designed for the purpose of manipulating JSON from the command line, and will be a lot easier and more reliable than doing it with Awk, such as <a href="https://stedolan.github.io/jq/" rel="noreferrer"><code>jq</code></a>:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true"></a><span class="ex">curl</span> -s <span class="st">&#39;https://api.github.com/users/lambda&#39;</span> <span class="kw">|</span> <span class="ex">jq</span> -r <span class="st">&#39;.name&#39;</span></span></code></pre></div>
<p>You can also do this with tools that are likely already installed on your system, like Python using the <a href="https://docs.python.org/2/library/json.html" rel="noreferrer"><code>json</code> module</a>, and so avoid any extra dependencies, while still having the benefit of a proper JSON parser. The following assume you want to use UTF-8, which the original JSON should be encoded in and is what most modern terminals use as well:</p>
<p>Python 2:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">PYTHONIOENCODING=</span>utf8</span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true"></a><span class="ex">curl</span> -s <span class="st">&#39;https://api.github.com/users/lambda&#39;</span> <span class="kw">|</span> <span class="kw">\</span></span>
<span id="cb277-3"><a href="#cb277-3" aria-hidden="true"></a>    <span class="ex">python</span> -c <span class="st">&quot;import sys, json; print json.load(sys.stdin)[&#39;name&#39;]&quot;</span></span></code></pre></div>
<p>Python 3:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true"></a><span class="ex">curl</span> -s <span class="st">&#39;https://api.github.com/users/lambda&#39;</span> <span class="kw">|</span> <span class="kw">\</span></span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true"></a>    <span class="ex">python3</span> -c <span class="st">&quot;import sys, json; print(json.load(sys.stdin)[&#39;name&#39;])&quot;</span></span></code></pre></div>
<h5>
Historical notes
</h3>
<p>This answer originally recommended <a href="http://github.com/micha/jsawk" rel="noreferrer">jsawk</a>, which should still work, but is a little more cumbersome to use than <code>jq</code>, and depends on a standalone JavaScript interpreter being installed which is less common than a Python interpreter, so the above answers are probably preferable:</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true"></a><span class="ex">curl</span> -s <span class="st">&#39;https://api.github.com/users/lambda&#39;</span> <span class="kw">|</span> <span class="ex">jsawk</span> -a <span class="st">&#39;return this.name&#39;</span></span></code></pre></div>
<p>This answer also originally used the Twitter API from the question, but that API no longer works, making it hard to copy the examples to test out, and the new Twitter API requires API keys, so I’ve switched to using the GitHub API which can be used easily without API keys. The first answer for the original question would be:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true"></a><span class="ex">curl</span> <span class="st">&#39;http://twitter.com/users/username.json&#39;</span> <span class="kw">|</span> <span class="ex">jq</span> -r <span class="st">&#39;.text&#39;</span></span></code></pre></div>
</section>
<section id="answer-2-score-266" class="level4">
<h4>Answer 2 (score 266)</h4>
<p>To quickly extract the values for a particular key, I personally like to use “grep -o”, which only returns the regex’s match. For example, to get the “text” field from tweets, something like:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true"></a><span class="fu">grep</span> -Po <span class="st">&#39;&quot;text&quot;:.*?[^\\]&quot;,&#39;</span> tweets.json</span></code></pre></div>
<p>This regex is more robust than you might think; for example, it deals fine with strings having embedded commas and escaped quotes inside them. I think with a little more work you could make one that is actually guaranteed to extract the value, if it’s atomic. (If it has nesting, then a regex can’t do it of course.)</p>
<p>And to further clean (albeit keeping the string’s original escaping) you can use something like: <code>| perl -pe 's/"text"://; s/^"//; s/",$//'</code>. (I did this for <a href="https://gist.github.com/1024217" rel="noreferrer">this analysis</a>.)</p>
<p>To all the haters who insist you should use a real JSON parser – yes, that is essential for correctness, but</p>
<ol>
<li>
To do a really quick analysis, like counting values to check on data cleaning bugs or get a general feel for the data, banging out something on the command line is faster. Opening an editor to write a script is distracting.
</li>
<li>
<code>grep -o</code> is orders of magnitude faster than the Python standard <code>json</code> library, at least when doing this for tweets (which are ~2 KB each). I’m not sure if this is just because <code>json</code> is slow (I should compare to yajl sometime); but in principle, a regex should be faster since it’s finite state and much more optimizable, instead of a parser that has to support recursion, and in this case, spends lots of CPU building trees for structures you don’t care about. (If someone wrote a finite state transducer that did proper (depth-limited) JSON parsing, that would be fantastic! In the meantime we have “grep -o”.)
</li>
</ol>
<p>To write maintainable code, I always use a real parsing library. I haven’t tried <a href="https://github.com/micha/jsawk" rel="noreferrer">jsawk</a>, but if it works well, that would address point #1.</p>
<p>One last, wackier, solution: I wrote a script that uses Python <code>json</code> and extracts the keys you want, into tab-separated columns; then I pipe through a wrapper around <code>awk</code> that allows named access to columns. <a href="https://github.com/brendano/tsvutils" rel="noreferrer">In here: the json2tsv and tsvawk scripts</a>. So for this example it would be:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true"></a><span class="ex">json2tsv</span> id text <span class="op">&lt;</span> tweets.json <span class="kw">|</span> <span class="ex">tsvawk</span> <span class="st">&#39;{print &quot;tweet &quot; $id &quot; is: &quot; $text}&#39;</span></span></code></pre></div>
<p>This approach doesn’t address #2, is more inefficient than a single Python script, and it’s a little brittle: it forces normalization of newlines and tabs in string values, to play nice with awk’s field/record-delimited view of the world. But it does let you stay on the command line, with more correctness than <code>grep -o</code>.</p>
</section>
<section id="answer-3-score-163" class="level4">
<h4>Answer 3 (score 163)</h4>
<p>On the basis that some of the recommendations here (esp in the comments) suggested the use of Python, I was disappointed not to find an example.</p>
<p>So, here’s a one liner to get a single value from some JSON data. It assumes that you are piping the data in (from somewhere) and so should be useful in a scripting context.</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&#39;{&quot;hostname&quot;:&quot;test&quot;,&quot;domainname&quot;:&quot;example.com&quot;}&#39;</span> <span class="kw">|</span> <span class="ex">python</span> -c <span class="st">&#39;import json,sys;obj=json.load(sys.stdin);print obj[&quot;hostname&quot;]&#39;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-add-numbers-in-a-bash-script-score-844322-in-2019" class="level3">
<h3>34: How can I add numbers in a bash script (score <a href="https://stackoverflow.com/q/6348902.html">844322</a> in 2019)</h3>
<section id="question-33" class="level4">
<h4>Question</h4>
<p>
I have this bash script and I had a problem in line 16. How can I take the previous result of line 15 and add it to the variable in line 16?
</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true"></a></span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb284-3"><a href="#cb284-3" aria-hidden="true"></a></span>
<span id="cb284-4"><a href="#cb284-4" aria-hidden="true"></a><span class="va">num=</span>0</span>
<span id="cb284-5"><a href="#cb284-5" aria-hidden="true"></a><span class="va">metab=</span>0</span>
<span id="cb284-6"><a href="#cb284-6" aria-hidden="true"></a></span>
<span id="cb284-7"><a href="#cb284-7" aria-hidden="true"></a><span class="kw">for</span> <span class="kw">((</span>i=1; i&lt;=2; i++<span class="kw">))</span>; <span class="kw">do</span>      </span>
<span id="cb284-8"><a href="#cb284-8" aria-hidden="true"></a>    <span class="kw">for</span> <span class="ex">j</span> in <span class="kw">`</span><span class="fu">ls</span> output-<span class="va">$i</span>-*<span class="kw">`;</span> <span class="kw">do</span></span>
<span id="cb284-9"><a href="#cb284-9" aria-hidden="true"></a>        <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$j</span><span class="st">&quot;</span></span>
<span id="cb284-10"><a href="#cb284-10" aria-hidden="true"></a></span>
<span id="cb284-11"><a href="#cb284-11" aria-hidden="true"></a>        <span class="va">metab=$(</span><span class="fu">cat</span> <span class="va">$j</span><span class="kw">|</span><span class="fu">grep</span> EndBuffer<span class="kw">|</span><span class="fu">awk</span> <span class="st">&#39;{sum+=$2} END { print sum/120}&#39;</span><span class="va">)</span> <span class="kw">(</span><span class="ex">line15</span><span class="kw">)</span></span>
<span id="cb284-12"><a href="#cb284-12" aria-hidden="true"></a>        <span class="va">num=</span> <span class="va">$num</span> <span class="ex">+</span> <span class="va">$metab</span>   (line16)</span>
<span id="cb284-13"><a href="#cb284-13" aria-hidden="true"></a>    <span class="kw">done</span></span>
<span id="cb284-14"><a href="#cb284-14" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$num</span><span class="st">&quot;</span></span>
<span id="cb284-15"><a href="#cb284-15" aria-hidden="true"></a> <span class="kw">done</span></span></code></pre></div>
</section>
<section id="answer-2-score-899" class="level4">
<h4>Answer 2 (score 899)</h4>
<p><em>For integers</em>:</p>
<ul>
<li>
<p>
Use <a href="http://tldp.org/LDP/abs/html/arithexp.html">arithmetic expansion</a>: <code>$((EXPR))</code>
</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true"></a><span class="va">num=$((</span>num1 + num2<span class="va">))</span></span>
<span id="cb285-2"><a href="#cb285-2" aria-hidden="true"></a><span class="va">num=$(($num1</span> + <span class="va">$num2))</span></span>
<span id="cb285-3"><a href="#cb285-3" aria-hidden="true"></a><span class="co"># also works</span></span>
<span id="cb285-4"><a href="#cb285-4" aria-hidden="true"></a><span class="va">num=$((</span>num1 + 2 + 3<span class="va">))</span></span>
<span id="cb285-5"><a href="#cb285-5" aria-hidden="true"></a><span class="co"># ...</span></span>
<span id="cb285-6"><a href="#cb285-6" aria-hidden="true"></a><span class="va">num=</span>$[<span class="ex">num1+num2</span>]</span>
<span id="cb285-7"><a href="#cb285-7" aria-hidden="true"></a><span class="co"># old, deprecated arithmetic expression syntax</span></span>
<span id="cb285-8"><a href="#cb285-8" aria-hidden="true"></a><span class="kw">```</span><span class="op">&lt;</span>/<span class="ex">li</span><span class="op">&gt;</span></span>
<span id="cb285-9"><a href="#cb285-9" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">li</span><span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Using the external <span class="kw">`</span><span class="fu">expr</span><span class="kw">`</span> <span class="ex">utility.</span> Note that this is only needed for really old systems.<span class="op">&lt;</span>/p<span class="op">&gt;</span></span>
<span id="cb285-10"><a href="#cb285-10" aria-hidden="true"></a></span>
<span id="cb285-11"><a href="#cb285-11" aria-hidden="true"></a><span class="kw">```</span>sh</span>
<span id="cb285-12"><a href="#cb285-12" aria-hidden="true"></a><span class="va">num=</span><span class="kw">`</span><span class="fu">expr</span> <span class="va">$num1</span> + <span class="va">$num2</span><span class="kw">`</span></span>
<span id="cb285-13"><a href="#cb285-13" aria-hidden="true"></a><span class="co"># whitespace for expr is important</span></span>
<span id="cb285-14"><a href="#cb285-14" aria-hidden="true"></a><span class="kw">```</span><span class="op">&lt;</span>/<span class="ex">li</span><span class="op">&gt;</span></span>
<span id="cb285-15"><a href="#cb285-15" aria-hidden="true"></a><span class="op">&lt;</span>/<span class="ex">ul</span><span class="op">&gt;</span></span>
<span id="cb285-16"><a href="#cb285-16" aria-hidden="true"></a></span>
<span id="cb285-17"><a href="#cb285-17" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">hr</span><span class="op">&gt;</span></span>
<span id="cb285-18"><a href="#cb285-18" aria-hidden="true"></a></span>
<span id="cb285-19"><a href="#cb285-19" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">em</span><span class="op">&gt;</span>For floating point<span class="op">&lt;</span>/em<span class="op">&gt;</span>:  </span>
<span id="cb285-20"><a href="#cb285-20" aria-hidden="true"></a></span>
<span id="cb285-21"><a href="#cb285-21" aria-hidden="true"></a><span class="ex">Bash</span> doesn<span class="st">&#39;t directly support this, but there&#39;</span>s a couple of external tools you can use:  </span>
<span id="cb285-22"><a href="#cb285-22" aria-hidden="true"></a></span>
<span id="cb285-23"><a href="#cb285-23" aria-hidden="true"></a><span class="kw">```</span><span class="fu">sh</span></span>
<span id="cb285-24"><a href="#cb285-24" aria-hidden="true"></a><span class="va">num=$(</span><span class="fu">awk</span> <span class="st">&quot;BEGIN {print </span><span class="va">$num1</span><span class="st">+</span><span class="va">$num2</span><span class="st">; exit}&quot;</span><span class="va">)</span></span>
<span id="cb285-25"><a href="#cb285-25" aria-hidden="true"></a><span class="va">num=$(</span><span class="ex">python</span> -c <span class="st">&quot;print </span><span class="va">$num1</span><span class="st">+</span><span class="va">$num2</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb285-26"><a href="#cb285-26" aria-hidden="true"></a><span class="va">num=$(</span><span class="fu">perl</span> -e <span class="st">&quot;print </span><span class="va">$num1</span><span class="st">+</span><span class="va">$num2</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb285-27"><a href="#cb285-27" aria-hidden="true"></a><span class="va">num=$(</span><span class="bu">echo</span> <span class="va">$num1</span> + <span class="va">$num2</span> <span class="kw">|</span> <span class="fu">bc</span><span class="va">)</span></span>
<span id="cb285-28"><a href="#cb285-28" aria-hidden="true"></a><span class="co"># whitespace for echo is important</span></span></code></pre></div>
<p>You can also use scientific notation (e.g.: <code>2.5e+2</code>)</p>
<hr>
<p><em>Common pitfalls</em>:</p>
<ul>
<li>
<p>
When setting a variable, you cannot have whitespace on either side of <code>=</code>, otherwise it will force the shell to interpret the first word as the name of the application to run (eg: <code>num=</code> or <code>num</code>)
</p>
<strike><code>num= 1</code></strike> <strike><code>num =2</code></strike>
</li>
<li>
<p>
<code>bc</code> and <code>expr</code> expect each number and operator as a separate argument, so whitespace is important. They cannot process arguments like <code>3+</code> <code>+4</code>.
</p>
<strike><code>num=</code>expr $num1+ $num2``</strike>
</li>
</ul>
</section>
<section id="answer-3-score-89" class="level4">
<h4>Answer 3 (score 89)</h4>
<p>Use the <code>$(( ))</code> arithmetic expansion.</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true"></a><span class="va">num=$((</span> <span class="va">$num</span> + <span class="va">$metab</span> <span class="va">))</span></span></code></pre></div>
<p>See <a href="http://tldp.org/LDP/abs/html/arithexp.html" rel="noreferrer">http://tldp.org/LDP/abs/html/arithexp.html</a> for more information.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-run-a-shell-script-on-a-unix-console-or-mac-terminal-score-838291-in-2017" class="level3">
<h3>35: How to run a shell script on a Unix console or Mac terminal? (score <a href="https://stackoverflow.com/q/733824.html">838291</a> in 2017)</h3>
<section id="question-34" class="level4">
<h4>Question</h4>
<p>I know it, forget it and relearn it again. Time to write it down.</p>
</section>
<section id="answer-accepted-score-918" class="level4">
<h4>Answer accepted (score 918)</h4>
<p>To run a non-executable <code>sh</code> script, use:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true"></a><span class="fu">sh</span> myscript</span></code></pre></div>
<p>To run a non-executable <code>bash</code> script, use:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true"></a><span class="fu">bash</span> myscript</span></code></pre></div>
<p>To start an executable (which is any file with executable permission); you just specify it by its path:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true"></a><span class="ex">/foo/bar</span></span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true"></a><span class="ex">/bin/bar</span></span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true"></a><span class="ex">./bar</span></span></code></pre></div>
<p>To make a script executable, give it the necessary permission:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true"></a><span class="fu">chmod</span> +x bar</span>
<span id="cb290-2"><a href="#cb290-2" aria-hidden="true"></a><span class="ex">./bar</span></span></code></pre></div>
<p>When a file is executable, the <strong>kernel</strong> is responsible for figuring out how to execte it. For non-binaries, this is done by looking at the first line of the file. It should contain a <code>hashbang</code>:</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true"></a></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true"></a><span class="co">#! /usr/bin/env bash</span></span></code></pre></div>
<p>The hashbang tells the kernel what program to run (in this case the command <code>/usr/bin/env</code> is ran with the argument <code>bash</code>). Then, the script is passed to the program (as second argument) along with all the arguments you gave the script as subsequent arguments.</p>
<p>That means <strong>every script that is executable should have a hashbang</strong>. If it doesn’t, you’re not telling the kernel what it <em>is</em>, and therefore the kernel doesn’t know what program to use to interprete it. It could be <code>bash</code>, <code>perl</code>, <code>python</code>, <code>sh</code>, or something else. (In reality, the kernel will often use the user’s default shell to interprete the file, which is very dangerous because it might not be the right interpreter at all or it might be able to parse some of it but with subtle behavioural differences such as is the case between <code>sh</code> and <code>bash</code>).</p>
<h5>
A note on <code>/usr/bin/env</code>
</h1>
<p>Most commonly, you’ll see hash bangs like so:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true"></a></span>
<span id="cb292-2"><a href="#cb292-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span></code></pre></div>
<p>The result is that the kernel will run the program <code>/bin/bash</code> to interpret the script. Unfortunately, <code>bash</code> is not always shipped by default, and it is not always available in <code>/bin</code>. While on Linux machines it usually is, there are a range of other POSIX machines where <code>bash</code> ships in various locations, such as <code>/usr/xpg/bin/bash</code> or <code>/usr/local/bin/bash</code>.</p>
<p>To write a portable bash script, we can therefore not rely on hard-coding the location of the <code>bash</code> program. POSIX already has a mechanism for dealing with that: <code>PATH</code>. The idea is that you install your programs in one of the directories that are in <code>PATH</code> and the system should be able to find your program when you want to run it by name.</p>
<p>Sadly, you <strong><em>cannot</em></strong> just do this:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true"></a></span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true"></a><span class="co">#!bash</span></span></code></pre></div>
<p>The kernel won’t (some might) do a <code>PATH</code> search for you. There is a program that can do a <code>PATH</code> search for you, though, it’s called <code>env</code>. Luckily, nearly all systems have an <code>env</code> program installed in <code>/usr/bin</code>. So we start <code>env</code> using a hardcoded path, which then does a <code>PATH</code> search for <code>bash</code> and runs it so that it can interpret your script:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true"></a></span>
<span id="cb294-2"><a href="#cb294-2" aria-hidden="true"></a><span class="co">#!/usr/bin/env bash</span></span></code></pre></div>
<p>This approach has one downside: According to POSIX, the hashbang can have <strong>one argument</strong>. In this case, we use <code>bash</code> as the argument to the <code>env</code> program. That means we have no space left to pass arguments to <code>bash</code>. So there’s no way to convert something like <code>#!/bin/bash -exu</code> to this scheme. You’ll have to put <code>set -exu</code> after the hashbang instead.</p>
<p>This approach also has another advantage: Some systems may ship with a <code>/bin/bash</code>, but the user may not like it, may find it’s buggy or outdated, and may have installed his own <code>bash</code> somewhere else. This is often the case on OS X (Macs) where Apple ships an outdated <code>/bin/bash</code> and users install an up-to-date <code>/usr/local/bin/bash</code> using something like Homebrew. When you use the <code>env</code> approach which does a <code>PATH</code> search, you take the user’s preference into account and use his preferred bash over the one his system shipped with.</p>
</section>
<section id="answer-2-score-80" class="level4">
<h4>Answer 2 (score 80)</h4>
<p>To start the shell-script ‘file.sh’:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true"></a><span class="fu">sh</span> file.sh</span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true"></a></span>
<span id="cb295-3"><a href="#cb295-3" aria-hidden="true"></a><span class="fu">bash</span> file.sh</span></code></pre></div>
<p>Another option is set executable permission using chmod command:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true"></a><span class="fu">chmod</span> +x file.sh</span></code></pre></div>
<p>Now run .sh file as follows:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true"></a><span class="ex">./file.sh</span></span></code></pre></div>
</section>
<section id="answer-3-score-15" class="level4">
<h4>Answer 3 (score 15)</h4>
<p>For the bourne shell:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true"></a><span class="fu">sh</span> myscript.sh</span></code></pre></div>
<p>For bash:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true"></a><span class="fu">bash</span> myscript.sh</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-declare-and-use-boolean-variables-in-shell-script-score-818063-in-2014" class="level3">
<h3>36: How to declare and use boolean variables in shell script? (score <a href="https://stackoverflow.com/q/2953646.html">818063</a> in 2014)</h3>
<section id="question-35" class="level4">
<h4>Question</h4>
<p>I tried to declare a boolean variable in a shell script using the following syntax:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true"></a><span class="va">variable=$false</span></span>
<span id="cb300-2"><a href="#cb300-2" aria-hidden="true"></a></span>
<span id="cb300-3"><a href="#cb300-3" aria-hidden="true"></a><span class="va">variable=$true</span></span></code></pre></div>
<p>Is this correct? Also, if I wanted to update that variable would I use the same syntax? Finally, is the following syntax for using boolean variables as expressions correct:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$variable</span><span class="bu"> ]</span></span>
<span id="cb301-2"><a href="#cb301-2" aria-hidden="true"></a></span>
<span id="cb301-3"><a href="#cb301-3" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> !<span class="va">$variable</span><span class="bu"> ]</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-1064" class="level4">
<h4>Answer accepted (score 1064)</h4>
<p><strong>Revised Answer (Feb 12, 2014)</strong></p>
<div class="sourceCode" id="cb302"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true"></a><span class="va">the_world_is_flat=</span>true</span>
<span id="cb302-2"><a href="#cb302-2" aria-hidden="true"></a></span>
<span id="cb302-3"><a href="#cb302-3" aria-hidden="true"></a><span class="co"># ...do something interesting...</span></span>
<span id="cb302-4"><a href="#cb302-4" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$the_world_is_flat</span><span class="st">&quot;</span> <span class="ot">=</span> true<span class="bu"> ]</span> ; <span class="kw">then</span></span>
<span id="cb302-5"><a href="#cb302-5" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&#39;Be careful not to fall off!&#39;</span></span>
<span id="cb302-6"><a href="#cb302-6" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<hr>
<p><strong>Original Answer</strong></p>
<p>Caveats: <a href="https://stackoverflow.com/a/21210966/89391">https://stackoverflow.com/a/21210966/89391</a></p>
<div class="sourceCode" id="cb303"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true"></a><span class="va">the_world_is_flat=</span>true</span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true"></a></span>
<span id="cb303-3"><a href="#cb303-3" aria-hidden="true"></a><span class="co"># ...do something interesting...</span></span>
<span id="cb303-4"><a href="#cb303-4" aria-hidden="true"></a><span class="kw">if</span> <span class="va">$the_world_is_flat</span> ; <span class="kw">then</span></span>
<span id="cb303-5"><a href="#cb303-5" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&#39;Be careful not to fall off!&#39;</span></span>
<span id="cb303-6"><a href="#cb303-6" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>From: <a href="https://github.com/aperezdc/perezdecastro.org/blob/master/stash/using-boolean-variables-in-bash.markdown" rel="noreferrer">Using boolean variables in Bash</a></p>
<p><em>The reason the original answer is included here is because the comments before the revision on Feb 12, 2014 pertain only to the original answer, and many of the comments are wrong when associated with the revised answer. For example, Dennis Williamson’s comment about bash builtin <code>true</code> on Jun 2, 2010 only applies to the original answer, not the revised.</em></p>
</section>
<section id="answer-2-score-719" class="level4">
<h4>Answer 2 (score 719)</h4>
<h5>
TL;DR
</h2>
<div class="sourceCode" id="cb304"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true"></a><span class="va">bool=</span>true</span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true"></a></span>
<span id="cb304-3"><a href="#cb304-3" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> <span class="ot">=</span> true<span class="bu"> ]</span></span></code></pre></div>
<hr>
<h5>
Issues with Miku’s (<a href="https://stackoverflow.com/revisions/2953673/5">original</a>) answer
</h2>
<p>I do <strong>not</strong> recommend the accepted answer<sup>1</sup>. Its syntax is pretty but it has some flaws.</p>
<p>Say we have the following condition.</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true"></a><span class="kw">if</span> <span class="va">$var</span>; <span class="kw">then</span></span>
<span id="cb305-2"><a href="#cb305-2" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&#39;Muahahaha!&#39;</span></span>
<span id="cb305-3"><a href="#cb305-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>In the following cases<sup>2</sup>, this condition will evaluate to <strong>true</strong> and execute the nested command.</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true"></a></span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true"></a><span class="co"># Variable var not defined beforehand. Case 1</span></span>
<span id="cb306-3"><a href="#cb306-3" aria-hidden="true"></a><span class="va">var=</span><span class="st">&#39;&#39;</span></span>
<span id="cb306-4"><a href="#cb306-4" aria-hidden="true"></a><span class="co"># Equivalent to var=&quot;&quot;.        Case 2</span></span>
<span id="cb306-5"><a href="#cb306-5" aria-hidden="true"></a><span class="va">var=</span></span>
<span id="cb306-6"><a href="#cb306-6" aria-hidden="true"></a><span class="co">#                              Case 3</span></span>
<span id="cb306-7"><a href="#cb306-7" aria-hidden="true"></a><span class="bu">unset</span> <span class="va">var</span></span>
<span id="cb306-8"><a href="#cb306-8" aria-hidden="true"></a><span class="co">#                           Case 4</span></span>
<span id="cb306-9"><a href="#cb306-9" aria-hidden="true"></a><span class="va">var=</span><span class="st">&#39;&lt;some valid command&gt;&#39;</span></span>
<span id="cb306-10"><a href="#cb306-10" aria-hidden="true"></a><span class="co">#          Case 5</span></span></code></pre></div>
<p>Typically you only want your condition to evaluate to true when your “boolean” variable, <code>var</code> in this example, is explicitly set to true. All the others cases are dangerously misleading!</p>
<p>The last case ( #5) is especially naughty because it will execute the command contained in the variable (which is why the condition evaluates to true for valid commands<sup>3, 4</sup>).</p>
<p>Here is a harmless example:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true"></a><span class="va">var=</span><span class="st">&#39;echo this text will be displayed when the condition is evaluated&#39;</span></span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true"></a><span class="kw">if</span> <span class="va">$var</span>; <span class="kw">then</span></span>
<span id="cb307-3"><a href="#cb307-3" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&#39;Muahahaha!&#39;</span></span>
<span id="cb307-4"><a href="#cb307-4" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb307-5"><a href="#cb307-5" aria-hidden="true"></a></span>
<span id="cb307-6"><a href="#cb307-6" aria-hidden="true"></a></span>
<span id="cb307-7"><a href="#cb307-7" aria-hidden="true"></a><span class="co"># Outputs:</span></span>
<span id="cb307-8"><a href="#cb307-8" aria-hidden="true"></a></span>
<span id="cb307-9"><a href="#cb307-9" aria-hidden="true"></a><span class="co"># this text will be displayed when the condition is evaluated</span></span>
<span id="cb307-10"><a href="#cb307-10" aria-hidden="true"></a></span>
<span id="cb307-11"><a href="#cb307-11" aria-hidden="true"></a><span class="co"># Muahahaha!</span></span></code></pre></div>
<p>Quoting your variables is safer, e.g. <code>if "$var"; then</code>. In the above cases, you should get a warning that the command is not found. But we can still do better (see my recommendations at the bottom).</p>
<p><sup><a href="https://stackoverflow.com/a/21768067/72321">Also see Mike Holt’s explanation of Miku’s original answer.</a></sup></p>
<h5>
Issues with Hbar’s answer
</h2>
<p>This approach also has unexpected behaviour.</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true"></a><span class="va">var=</span>false</span>
<span id="cb308-2"><a href="#cb308-2" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$var</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb308-3"><a href="#cb308-3" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;This won&#39;t print, var is false!&quot;</span></span>
<span id="cb308-4"><a href="#cb308-4" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb308-5"><a href="#cb308-5" aria-hidden="true"></a></span>
<span id="cb308-6"><a href="#cb308-6" aria-hidden="true"></a></span>
<span id="cb308-7"><a href="#cb308-7" aria-hidden="true"></a><span class="co"># Outputs:</span></span>
<span id="cb308-8"><a href="#cb308-8" aria-hidden="true"></a></span>
<span id="cb308-9"><a href="#cb308-9" aria-hidden="true"></a><span class="co"># This won&#39;t print, var is false!</span></span></code></pre></div>
<p>You would expect the above condition to evaluate to false, thus never executing the nested statement. Surprise!</p>
<p>Quoting the value (<code>"false"</code>), quoting the variable (<code>"$var"</code>), or using <code>test</code> or <code>[[</code> instead of <code>[</code>, do not make a difference.</p>
<h5>
What I DO recommend:
</h2>
<p>Here are ways I recommend you check your “booleans”. They work as expected.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true"></a><span class="va">bool=</span>true</span>
<span id="cb309-2"><a href="#cb309-2" aria-hidden="true"></a></span>
<span id="cb309-3"><a href="#cb309-3" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> <span class="ot">=</span> true<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb309-4"><a href="#cb309-4" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;true&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb309-5"><a href="#cb309-5" aria-hidden="true"></a></span>
<span id="cb309-6"><a href="#cb309-6" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> <span class="ot">=</span> true<span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb309-7"><a href="#cb309-7" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;true&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb309-8"><a href="#cb309-8" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> <span class="ot">==</span> true<span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb309-9"><a href="#cb309-9" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;true&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb309-10"><a href="#cb309-10" aria-hidden="true"></a></span>
<span id="cb309-11"><a href="#cb309-11" aria-hidden="true"></a><span class="kw">if</span> <span class="bu">test</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> = true<span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb309-12"><a href="#cb309-12" aria-hidden="true"></a><span class="kw">if</span> <span class="bu">test</span> <span class="st">&quot;</span><span class="va">$bool</span><span class="st">&quot;</span> = <span class="st">&quot;true&quot;</span><span class="kw">;</span> <span class="kw">then</span></span></code></pre></div>
<p>They’re all pretty much equivalent. You’ll have to type a few more keystrokes than the approaches in the other answers<sup>5</sup> but your code will be more defensive.</p>
<hr>
<h5>
Footnotes
</h3>
<ol>
<li>
Miku’s answer has since been edited and no longer contains (known) flaws.
</li>
<li>
Not an exhaustive list.
</li>
<li>
A valid command in this context means a command that exists. It doesn’t matter if the command is used correctly or incorrectly. E.g. <code>man woman</code> would still be considered a valid command, even if no such man page exists.
</li>
<li>
For invalid (non-existent) commands, Bash will simply complain that the command wasn’t found.
</li>
<li>
If you care about length, the first recommendation is the shortest.
</li>
</ol>
</section>
<section id="answer-3-score-156" class="level4">
<h4>Answer 3 (score 156)</h4>
<p>There seems to be some misunderstanding here about the Bash builtin <code>true</code>, and more specifically, about how Bash expands and interprets expressions inside brackets.</p>
<p>The code in <a href="https://stackoverflow.com/questions/2953646/how-to-declare-and-use-boolean-variables-in-shell-script/2953673
#2953673">miku’s answer</a> has absolutely nothing to do with the Bash builtin <code>true</code>, nor <code>/bin/true</code>, nor any other flavor of the <code>true</code> command. In this case, <code>true</code> is nothing more than a simple character string, and no call to the <code>true</code> command/builtin is ever made, neither by the variable assignment, nor by the evaluation of the conditional expression.</p>
<p>The following code is functionally identical to the code in the miku’s answer:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true"></a><span class="va">the_world_is_flat=</span>yeah</span>
<span id="cb310-2"><a href="#cb310-2" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$the_world_is_flat</span><span class="st">&quot;</span> <span class="ot">=</span> yeah<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb310-3"><a href="#cb310-3" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&#39;Be careful not to fall off!&#39;</span></span>
<span id="cb310-4"><a href="#cb310-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>The <strong>only</strong> difference here is that the four characters being compared are ‘y’, ‘e’, ‘a’, and ‘h’ instead of ‘t’, ‘r’, ‘u’, and ‘e’. That’s it. There’s no attempt made to call a command or builtin named <code>yeah</code>, nor is there (in miku’s example) any sort of special handling going on when Bash parses the token <code>true</code>. It’s just a string, and a completely arbitrary one at that.</p>
<p><strong>Update (2014-02-19):</strong> After following the link in miku’s answer, now I see where some of the confusion is coming from. Miku’s answer uses single brackets, but the code snippet he links to does not use brackets. It’s just:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true"></a><span class="va">the_world_is_flat=</span>true</span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true"></a><span class="kw">if</span> <span class="va">$the_world_is_flat</span>; <span class="kw">then</span></span>
<span id="cb311-3"><a href="#cb311-3" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&#39;Be careful not to fall off!&#39;</span></span>
<span id="cb311-4"><a href="#cb311-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Both code snippets will <em>behave</em> the same way, but the brackets completely change what’s going on under the hood.</p>
<p>Here’s what Bash is doing in each case:</p>
<p><strong>No brackets:</strong></p>
<ol>
<li>
Expand the variable <code>$the_world_is_flat</code> to the string <code>"true"</code>.
</li>
<li>
Attempt to parse the string <code>"true"</code> as a command.
</li>
<li>
Find and run the <code>true</code> command (either a builtin or <code>/bin/true</code>, depending on the Bash version).
</li>
<li>
Compare the exit code of the <code>true</code> command (which is always 0) with 0. Recall that in most shells, an exit code of 0 indicates success and anything else indicates failure.
</li>
<li>
Since the exit code was 0 (success), execute the <code>if</code> statement’s <code>then</code> clause
</li>
</ol>
<p><strong>Brackets:</strong></p>
<ol>
<li>
Expand the variable <code>$the_world_is_flat</code> to the string <code>"true"</code>.
</li>
<li>
Parse the now-fully-expanded conditional expression, which is of the form <code>string1 = string2</code>. The <code>=</code> operator is bash’s <em>string comparison</em> operator. So…
</li>
<li>
Do a string comparison on <code>"true"</code> and <code>"true"</code>.
</li>
<li>
Yep, the two strings were the same, so the value of the conditional is true.
</li>
<li>
Execute the <code>if</code> statement’s <code>then</code> clause.
</li>
</ol>
<p>The no-brackets code works, because the <code>true</code> command returns an exit code of 0, which indicates success. The bracketed code works, because the value of <code>$the_world_is_flat</code> is identical to the string literal <code>true</code> on the right side of the <code>=</code>.</p>
<p>Just to drive the point home, consider the following two snippets of code:</p>
<p>This code (if run with root privileges) will reboot your computer:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true"></a><span class="va">var=</span>reboot</span>
<span id="cb312-2"><a href="#cb312-2" aria-hidden="true"></a><span class="kw">if</span> <span class="va">$var</span>; <span class="kw">then</span></span>
<span id="cb312-3"><a href="#cb312-3" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&#39;Muahahaha! You are going down!&#39;</span></span>
<span id="cb312-4"><a href="#cb312-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>This code just prints “Nice try.” The reboot command is not called.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true"></a><span class="va">var=</span>reboot</span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$var</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb313-3"><a href="#cb313-3" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&#39;Nice try.&#39;</span></span>
<span id="cb313-4"><a href="#cb313-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p><strong>Update (2014-04-14)</strong> To answer the question in the comments regarding the difference between <code>=</code> and <code>==</code>: AFAIK, there is no difference. The <code>==</code> operator is a Bash-specific synonym for <code>=</code>, and as far as I’ve seen, they work exactly the same in all contexts.</p>
<p>Note, however, that I’m specifically talking about the <code>=</code> and <code>==</code> string comparison operators used in either <code>[ ]</code> or <code>[[ ]]</code> tests. I’m not suggesting that <code>=</code> and <code>==</code> are interchangeable <em>everywhere</em> in bash.</p>
<p>For example, you obviously can’t do variable assignment with <code>==</code>, such as <code>var=="foo"</code> (well technically you <em>can</em> do this, but the value of <code>var</code> will be <code>"=foo"</code>, because Bash isn’t seeing an <code>==</code> operator here, it’s seeing an <code>=</code> (assignment) operator, followed by the literal value <code>="foo"</code>, which just becomes <code>"=foo"</code>).</p>
<p>Also, although <code>=</code> and <code>==</code> are interchangeable, you should keep in mind that how those tests work <em>does</em> depend on whether you’re using it inside <code>[ ]</code> or <code>[[ ]]</code>, and also on whether or not the operands are quoted. You can read more about that in <em><a href="http://www.tldp.org/LDP/abs/html/comparison-ops.html" rel="noreferrer">Advanced Bash Scripting Guide: 7.3 Other Comparison Operators</a></em> (scroll down to the discussion of <code>=</code> and <code>==</code>).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-convert-a-string-to-lower-case-in-bash-score-812250-in-2018" class="level3">
<h3>37: How to convert a string to lower case in Bash? (score <a href="https://stackoverflow.com/q/2264428.html">812250</a> in 2018)</h3>
<section id="question-36" class="level4">
<h4>Question</h4>
<p>Is there a way in <a href="/questions/tagged/bash" class="post-tag" title="show questions tagged &
#39;bash&#39;" rel="tag">bash</a> to convert a string into a lower case string?</p>
<p>For example, if I have:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true"></a><span class="va">a=</span><span class="st">&quot;Hi all&quot;</span></span></code></pre></div>
<p>I want to convert it to:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true"></a><span class="st">&quot;hi all&quot;</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-1988" class="level4">
<h4>Answer accepted (score 1988)</h4>
<p>The are various ways:</p>
<h5>
<a href="https://en.wikipedia.org/wiki/POSIX" rel="noreferrer">POSIX standard</a>
</h2>
<h5>
<a href="http://en.wikipedia.org/wiki/Tr_%28Unix%29" rel="noreferrer">tr</a>
</h3>
<div class="sourceCode" id="cb316"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&#39;[:upper:]&#39;</span> <span class="st">&#39;[:lower:]&#39;</span></span>
<span id="cb316-2"><a href="#cb316-2" aria-hidden="true"></a><span class="ex">hi</span> all</span></code></pre></div>
<h5>
<a href="http://en.wikipedia.org/wiki/AWK" rel="noreferrer">AWK</a>
</h3>
<div class="sourceCode" id="cb317"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print tolower($0)}&#39;</span></span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true"></a><span class="ex">hi</span> all</span></code></pre></div>
<h5>
Non-POSIX
</h2>
<p>You may run into portability issues with the following examples:</p>
<h5>
<a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" rel="noreferrer">Bash 4.0</a>
</h3>
<div class="sourceCode" id="cb318"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${a,,}</span><span class="st">&quot;</span></span>
<span id="cb318-2"><a href="#cb318-2" aria-hidden="true"></a><span class="ex">hi</span> all</span></code></pre></div>
<h5>
<a href="http://en.wikipedia.org/wiki/Sed" rel="noreferrer">sed</a>
</h3>
<div class="sourceCode" id="cb319"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">sed</span> -e <span class="st">&#39;s/\(.*\)/\L\1/&#39;</span></span>
<span id="cb319-2"><a href="#cb319-2" aria-hidden="true"></a><span class="ex">hi</span> all</span>
<span id="cb319-3"><a href="#cb319-3" aria-hidden="true"></a></span>
<span id="cb319-4"><a href="#cb319-4" aria-hidden="true"></a><span class="co"># this also works:</span></span>
<span id="cb319-5"><a href="#cb319-5" aria-hidden="true"></a>$ <span class="fu">sed</span> -e <span class="st">&#39;s/\(.*\)/\L\1/&#39;</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span></span>
<span id="cb319-6"><a href="#cb319-6" aria-hidden="true"></a><span class="ex">hi</span> all</span></code></pre></div>
<h5>
<a href="http://en.wikipedia.org/wiki/Perl" rel="noreferrer">Perl</a>
</h3>
<div class="sourceCode" id="cb320"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">perl</span> -ne <span class="st">&#39;print lc&#39;</span></span>
<span id="cb320-2"><a href="#cb320-2" aria-hidden="true"></a><span class="ex">hi</span> all</span></code></pre></div>
<h5>
<a href="https://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" rel="noreferrer">Bash</a>
</h3>
<div class="sourceCode" id="cb321"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true"></a><span class="fu">lc()</span><span class="kw">{</span></span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true"></a>    <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="kw"> in</span></span>
<span id="cb321-3"><a href="#cb321-3" aria-hidden="true"></a>        [A-Z]<span class="kw">)</span></span>
<span id="cb321-4"><a href="#cb321-4" aria-hidden="true"></a>        <span class="va">n=$(</span><span class="bu">printf</span> <span class="st">&quot;%d&quot;</span> <span class="st">&quot;&#39;</span><span class="va">$1</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb321-5"><a href="#cb321-5" aria-hidden="true"></a>        <span class="va">n=$((</span>n+32<span class="va">))</span></span>
<span id="cb321-6"><a href="#cb321-6" aria-hidden="true"></a>        <span class="bu">printf</span> <span class="dt">\\</span><span class="va">$(</span><span class="bu">printf</span> <span class="st">&quot;%o&quot;</span> <span class="st">&quot;</span><span class="va">$n</span><span class="st">&quot;</span><span class="va">)</span></span>
<span id="cb321-7"><a href="#cb321-7" aria-hidden="true"></a>        <span class="kw">;;</span></span>
<span id="cb321-8"><a href="#cb321-8" aria-hidden="true"></a>        *<span class="kw">)</span></span>
<span id="cb321-9"><a href="#cb321-9" aria-hidden="true"></a>        <span class="bu">printf</span> <span class="st">&quot;%s&quot;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb321-10"><a href="#cb321-10" aria-hidden="true"></a>        <span class="kw">;;</span></span>
<span id="cb321-11"><a href="#cb321-11" aria-hidden="true"></a>    <span class="kw">esac</span></span>
<span id="cb321-12"><a href="#cb321-12" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb321-13"><a href="#cb321-13" aria-hidden="true"></a><span class="va">word=</span><span class="st">&quot;I Love Bash&quot;</span></span>
<span id="cb321-14"><a href="#cb321-14" aria-hidden="true"></a><span class="kw">for((</span>i=0;i&lt;${</span>
<span id="cb321-15"><a href="#cb321-15" aria-hidden="true"></a><span class="co">#word};i++))</span></span>
<span id="cb321-16"><a href="#cb321-16" aria-hidden="true"></a>do</span>
<span id="cb321-17"><a href="#cb321-17" aria-hidden="true"></a>    ch=<span class="st">&quot;</span><span class="va">${word:$i:1}</span><span class="st">&quot;</span></span>
<span id="cb321-18"><a href="#cb321-18" aria-hidden="true"></a>    lc <span class="st">&quot;</span><span class="va">$ch</span><span class="st">&quot;</span></span>
<span id="cb321-19"><a href="#cb321-19" aria-hidden="true"></a>done</span></code></pre></div>
<p>Note: YMMV on this one. Doesn’t work for me (GNU bash version 4.2.46 and 4.0.33 (and same behaviour 2.05b.0 but nocasematch is not implemented)) even with using <code>shopt -u nocasematch;</code>. Unsetting that nocasematch causes [[ “fooBaR” == “FOObar” ]] to match OK BUT inside case weirdly [b-z] are incorrectly matched by [A-Z]. Bash is confused by the double-negative (“unsetting nocasematch”)! :-)</p>
</section>
<section id="answer-2-score-411" class="level4">
<h4>Answer 2 (score 411)</h4>
<p>In Bash 4:</p>
<p>To lowercase</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;A FEW WORDS&quot;</span></span>
<span id="cb322-2"><a href="#cb322-2" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string,}</span><span class="st">&quot;</span></span>
<span id="cb322-3"><a href="#cb322-3" aria-hidden="true"></a><span class="ex">a</span> FEW WORDS</span>
<span id="cb322-4"><a href="#cb322-4" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string,,}</span><span class="st">&quot;</span></span>
<span id="cb322-5"><a href="#cb322-5" aria-hidden="true"></a><span class="ex">a</span> few words</span>
<span id="cb322-6"><a href="#cb322-6" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string,,</span>[AEIUO]<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb322-7"><a href="#cb322-7" aria-hidden="true"></a><span class="ex">a</span> FeW WoRDS</span>
<span id="cb322-8"><a href="#cb322-8" aria-hidden="true"></a></span>
<span id="cb322-9"><a href="#cb322-9" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;A Few Words&quot;</span></span>
<span id="cb322-10"><a href="#cb322-10" aria-hidden="true"></a>$ <span class="bu">declare</span> -l <span class="va">string</span></span>
<span id="cb322-11"><a href="#cb322-11" aria-hidden="true"></a>$ <span class="va">string=$string</span>; <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span>
<span id="cb322-12"><a href="#cb322-12" aria-hidden="true"></a><span class="ex">a</span> few words</span></code></pre></div>
<p>To uppercase</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;a few words&quot;</span></span>
<span id="cb323-2"><a href="#cb323-2" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string^}</span><span class="st">&quot;</span></span>
<span id="cb323-3"><a href="#cb323-3" aria-hidden="true"></a><span class="ex">A</span> few words</span>
<span id="cb323-4"><a href="#cb323-4" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string^^}</span><span class="st">&quot;</span></span>
<span id="cb323-5"><a href="#cb323-5" aria-hidden="true"></a><span class="ex">A</span> FEW WORDS</span>
<span id="cb323-6"><a href="#cb323-6" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string^^</span>[aeiou]<span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb323-7"><a href="#cb323-7" aria-hidden="true"></a><span class="ex">A</span> fEw wOrds</span>
<span id="cb323-8"><a href="#cb323-8" aria-hidden="true"></a></span>
<span id="cb323-9"><a href="#cb323-9" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;A Few Words&quot;</span></span>
<span id="cb323-10"><a href="#cb323-10" aria-hidden="true"></a>$ <span class="bu">declare</span> -u <span class="va">string</span></span>
<span id="cb323-11"><a href="#cb323-11" aria-hidden="true"></a>$ <span class="va">string=$string</span>; <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span>
<span id="cb323-12"><a href="#cb323-12" aria-hidden="true"></a><span class="ex">A</span> FEW WORDS</span></code></pre></div>
<p>Toggle (undocumented, but optionally configurable at compile time)</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;A Few Words&quot;</span></span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string</span><span class="er">~~</span><span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb324-3"><a href="#cb324-3" aria-hidden="true"></a><span class="ex">a</span> fEW wORDS</span>
<span id="cb324-4"><a href="#cb324-4" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;A FEW WORDS&quot;</span></span>
<span id="cb324-5"><a href="#cb324-5" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string</span><span class="er">~</span><span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb324-6"><a href="#cb324-6" aria-hidden="true"></a><span class="ex">a</span> FEW WORDS</span>
<span id="cb324-7"><a href="#cb324-7" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;a few words&quot;</span></span>
<span id="cb324-8"><a href="#cb324-8" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string</span><span class="er">~</span><span class="va">}</span><span class="st">&quot;</span></span>
<span id="cb324-9"><a href="#cb324-9" aria-hidden="true"></a><span class="ex">A</span> few words</span></code></pre></div>
<p>Capitalize (undocumented, but optionally configurable at compile time)</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;a few words&quot;</span></span>
<span id="cb325-2"><a href="#cb325-2" aria-hidden="true"></a>$ <span class="bu">declare</span> -c <span class="va">string</span></span>
<span id="cb325-3"><a href="#cb325-3" aria-hidden="true"></a>$ <span class="va">string=$string</span></span>
<span id="cb325-4"><a href="#cb325-4" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span>
<span id="cb325-5"><a href="#cb325-5" aria-hidden="true"></a><span class="ex">A</span> few words</span></code></pre></div>
<p>Title case:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;a few words&quot;</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true"></a>$ <span class="va">string=($string)</span></span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;</span><span class="va">${string[@]^}</span><span class="st">&quot;</span></span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true"></a><span class="ex">A</span> Few Words</span>
<span id="cb326-6"><a href="#cb326-6" aria-hidden="true"></a></span>
<span id="cb326-7"><a href="#cb326-7" aria-hidden="true"></a>$ <span class="bu">declare</span> -c <span class="va">string</span></span>
<span id="cb326-8"><a href="#cb326-8" aria-hidden="true"></a>$ <span class="va">string=(</span>a few words<span class="va">)</span></span>
<span id="cb326-9"><a href="#cb326-9" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${string[@]}</span><span class="st">&quot;</span></span>
<span id="cb326-10"><a href="#cb326-10" aria-hidden="true"></a><span class="ex">A</span> Few Words</span>
<span id="cb326-11"><a href="#cb326-11" aria-hidden="true"></a></span>
<span id="cb326-12"><a href="#cb326-12" aria-hidden="true"></a>$ <span class="va">string=</span><span class="st">&quot;a FeW WOrdS&quot;</span></span>
<span id="cb326-13"><a href="#cb326-13" aria-hidden="true"></a>$ <span class="va">string=${string,,}</span></span>
<span id="cb326-14"><a href="#cb326-14" aria-hidden="true"></a>$ <span class="va">string=${string</span><span class="er">~</span><span class="va">}</span></span>
<span id="cb326-15"><a href="#cb326-15" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span>
<span id="cb326-16"><a href="#cb326-16" aria-hidden="true"></a><span class="ex">A</span> few words</span></code></pre></div>
<p>To turn off a <code>declare</code> attribute, use <code>+</code>. For example, <code>declare +c string</code>. This affects subsequent assignments and not the current value.</p>
<p>The <code>declare</code> options change the attribute of the variable, but not the contents. The reassignments in my examples update the contents to show the changes.</p>
<p><strong>Edit:</strong></p>
<p>Added “toggle first character by word” (<code>${var~}</code>) as suggested by <strong>ghostdog74</strong>.</p>
<p><strong>Edit:</strong> Corrected tilde behavior to match Bash 4.3.</p>
</section>
<section id="answer-3-score-120" class="level4">
<h4>Answer 3 (score 120)</h4>
<div class="sourceCode" id="cb327"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;Hi All&quot;</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&quot;[:upper:]&quot;</span> <span class="st">&quot;[:lower:]&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-does-cat-eof-work-in-bash-score-797520-in-2017" class="level3">
<h3>38: How does “cat &lt;&lt; EOF” work in bash? (score <a href="https://stackoverflow.com/q/2500436.html">797520</a> in 2017)</h3>
<section id="question-37" class="level4">
<h4>Question</h4>
<p>I needed to write a script to enter multi-line input to a program (<code>psql</code>).</p>
<p>After a bit of googling, I found the following syntax works:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true"></a><span class="fu">cat</span> <span class="op">&lt;&lt; EOF</span> <span class="kw">|</span> <span class="ex">psql</span> ---params</span>
<span id="cb328-2"><a href="#cb328-2" aria-hidden="true"></a>BEGIN;</span>
<span id="cb328-3"><a href="#cb328-3" aria-hidden="true"></a></span>
<span id="cb328-4"><a href="#cb328-4" aria-hidden="true"></a><span class="kw">`</span><span class="ex">pg_dump</span> ----something<span class="kw">`</span></span>
<span id="cb328-5"><a href="#cb328-5" aria-hidden="true"></a></span>
<span id="cb328-6"><a href="#cb328-6" aria-hidden="true"></a>update table .... statement ...;</span>
<span id="cb328-7"><a href="#cb328-7" aria-hidden="true"></a></span>
<span id="cb328-8"><a href="#cb328-8" aria-hidden="true"></a>END;</span>
<span id="cb328-9"><a href="#cb328-9" aria-hidden="true"></a>EOF</span></code></pre></div>
<p>This correctly constructs the multi-line string (from <code>BEGIN;</code> to <code>END;</code>, inclusive) and pipes it as an input to <code>psql</code>.</p>
<p>But I have no idea how/why it works, can some one please explain?</p>
<p>I’m referring mainly to <code>cat &amp;lt;&amp;lt; EOF</code>, I know <code>&amp;gt;</code> outputs to a file, <code>&amp;gt;&amp;gt;</code> appends to a file, <code>&amp;lt;</code> reads input from file.</p>
<p>What does <code>&amp;lt;&amp;lt;</code> exactly do?</p>
<p>And is there a man page for it?</p>
</section>
<section id="answer-accepted-score-466" class="level4">
<h4>Answer accepted (score 466)</h4>
<p>This is called <strong><em>heredoc</strong> format</em> to provide a string into stdin. See <a href="https://en.wikipedia.org/wiki/Here_document
#Unix_shells" rel="noreferrer">https://en.wikipedia.org/wiki/Here_document#Unix_shells</a> for more details.</p>
<hr>
<p>From <code>man bash</code>:</p>
<blockquote>
<h5>
Here Documents
</h2>
<p>
This type of redirection instructs the shell to read input from the current source until a line containing only word (with no trailing blanks) is seen.
</p>
<p>
All of the lines read up to that point are then used as the standard input for a command.
</p>
<p>The format of here-documents is:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true"></a>          <span class="op">&lt;&lt;[-]word</span></span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true"></a>                  here-document</span>
<span id="cb329-3"><a href="#cb329-3" aria-hidden="true"></a>          delimiter</span></code></pre></div>
<p>
No parameter expansion, command substitution, arithmetic expansion, or pathname expansion is performed on <strong>word</strong>. If any characters in <strong>word</strong> are quoted, the <strong>delimiter</strong> is the result of quote removal on <strong>word</strong>, and the lines in the <strong>here-document</strong> are not expanded. If <strong>word</strong> is unquoted, all lines of the <strong>here-document</strong> are subjected to parameter expansion, command substitution, and arithmetic expansion. In the latter case, the character sequence <code>\&amp;lt;newline&amp;gt;</code> is ignored, and <code>\</code> must be used to quote the characters <code>\</code>, <code>$</code>, and ```.
</p>
<p>
If the redirection operator is <code>&amp;lt;&amp;lt;-</code>, then all leading tab characters are stripped from input lines and the line containing <strong>delimiter</strong>. This allows here-documents within shell scripts to be indented in a natural fashion.
</p>
</blockquote>
</section>
<section id="answer-2-score-441" class="level4">
<h4>Answer 2 (score 441)</h4>
<p>The <code>cat &amp;lt;&amp;lt;EOF</code> syntax is very useful when working with multi-line text in Bash, eg. when assigning multi-line string to a shell variable, file or a pipe.</p>
<h5>
Examples of <code>cat &amp;lt;&amp;lt;EOF</code> syntax usage in Bash:
</h1>
<h5>
<ol type="1">
<li>Assign multi-line string to a shell variable
</h2></li>
</ol>
<div class="sourceCode" id="cb330"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true"></a>$ <span class="va">sql=$(</span><span class="fu">cat</span> <span class="op">&lt;&lt;EOF</span></span>
<span id="cb330-2"><a href="#cb330-2" aria-hidden="true"></a>SELECT foo, bar FROM db</span>
<span id="cb330-3"><a href="#cb330-3" aria-hidden="true"></a>WHERE foo=&#39;baz&#39;</span>
<span id="cb330-4"><a href="#cb330-4" aria-hidden="true"></a><span class="op">EOF</span></span>
<span id="cb330-5"><a href="#cb330-5" aria-hidden="true"></a><span class="va">)</span></span></code></pre></div>
<p><em>The <code>$sql</code> variable now holds the new-line characters too. You can verify with <code>echo -e "$sql"</code>.</em></p>
<h5>
<ol start="2" type="1">
<li>Pass multi-line string to a file in Bash
</h2></li>
</ol>
<div class="sourceCode" id="cb331"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true"></a>$ <span class="fu">cat</span> <span class="op">&lt;&lt;EOF</span> <span class="op">&gt;</span> <span class="ex">print.sh</span></span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true"></a></span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true"></a>#!/bin/bash</span>
<span id="cb331-4"><a href="#cb331-4" aria-hidden="true"></a>echo <span class="dt">\$</span>PWD</span>
<span id="cb331-5"><a href="#cb331-5" aria-hidden="true"></a>echo <span class="va">$PWD</span></span>
<span id="cb331-6"><a href="#cb331-6" aria-hidden="true"></a>EOF</span></code></pre></div>
<p><em>The <code>print.sh</code> file now contains:</em></p>
<div class="sourceCode" id="cb332"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true"></a></span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb332-3"><a href="#cb332-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$PWD</span></span>
<span id="cb332-4"><a href="#cb332-4" aria-hidden="true"></a><span class="bu">echo</span> /home/user</span></code></pre></div>
<h5>
<ol start="3" type="1">
<li>Pass multi-line string to a pipe in Bash
</h2></li>
</ol>
<div class="sourceCode" id="cb333"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true"></a>$ <span class="fu">cat</span> <span class="op">&lt;&lt;EOF</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;b&#39;</span> <span class="kw">|</span> <span class="fu">tee</span> b.txt</span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true"></a>foo</span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true"></a>bar</span>
<span id="cb333-4"><a href="#cb333-4" aria-hidden="true"></a>baz</span>
<span id="cb333-5"><a href="#cb333-5" aria-hidden="true"></a>EOF</span></code></pre></div>
<p><em>The <code>b.txt</code> file contains <code>bar</code> and <code>baz</code> lines. The same output is printed to <code>stdout</code>.</em></p>
</section>
<section id="answer-3-score-215" class="level4">
<h4>Answer 3 (score 215)</h4>
<p>In your case, “EOF” is known as a “Here Tag”. Basically <code>&amp;lt;&amp;lt;Here</code> tells the shell that you are going to enter a multiline string until the “tag” <code>Here</code>. You can name this tag as you want, it’s often <code>EOF</code> or <code>STOP</code>.</p>
<p>Some rules about the Here tags:</p>
<ol>
<li>
The tag can be any string, uppercase or lowercase, though most people use uppercase by convention.
</li>
<li>
The tag will not be considered as a Here tag if there are other words in that line. In this case, it will merely be considered part of the string. The tag should be by itself on a separate line, to be considered a tag.
</li>
<li>
The tag should have no leading or trailing spaces in that line to be considered a tag. Otherwise it will be considered as part of the string.
</li>
</ol>
<p>example:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true"></a>$ <span class="fu">cat</span> <span class="op">&gt;&gt;</span> test <span class="op">&lt;&lt;HERE</span></span>
<span id="cb334-2"><a href="#cb334-2" aria-hidden="true"></a>&gt; Hello world HERE &lt;-- Not by itself on a separate line -&gt; not considered end of string</span>
<span id="cb334-3"><a href="#cb334-3" aria-hidden="true"></a>&gt; This is a test</span>
<span id="cb334-4"><a href="#cb334-4" aria-hidden="true"></a>&gt;  HERE &lt;-- Leading space, so not considered end of string</span>
<span id="cb334-5"><a href="#cb334-5" aria-hidden="true"></a>&gt; and a new line</span>
<span id="cb334-6"><a href="#cb334-6" aria-hidden="true"></a>&gt; HERE &lt;-- Now we have the end of the string</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-pause-my-shell-script-for-a-second-before-continuing-score-794111-in-2017" class="level3">
<h3>39: How do I pause my shell script for a second before continuing? (score <a href="https://stackoverflow.com/q/21620406.html">794111</a> in 2017)</h3>
<section id="question-38" class="level4">
<h4>Question</h4>
<p>I have only found how to wait for user input. However, I only want to pause so that my <code>while true</code> doesn’t crash my computer.</p>
<p>I tried <code>pause(1)</code>, but it says <code>-bash: syntax error near unexpected token '1'</code>. How can it be done?</p>
</section>
<section id="answer-2-score-1092" class="level4">
<h4>Answer 2 (score 1092)</h4>
<p>Use the <code>sleep</code> command.</p>
<p>Example:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true"></a><span class="fu">sleep</span> .5</span>
<span id="cb335-2"><a href="#cb335-2" aria-hidden="true"></a><span class="co"># Waits 0.5 second.</span></span>
<span id="cb335-3"><a href="#cb335-3" aria-hidden="true"></a><span class="fu">sleep</span> 5</span>
<span id="cb335-4"><a href="#cb335-4" aria-hidden="true"></a><span class="co"># Waits 5 seconds.</span></span>
<span id="cb335-5"><a href="#cb335-5" aria-hidden="true"></a><span class="fu">sleep</span> 5s</span>
<span id="cb335-6"><a href="#cb335-6" aria-hidden="true"></a><span class="co"># Waits 5 seconds.</span></span>
<span id="cb335-7"><a href="#cb335-7" aria-hidden="true"></a><span class="fu">sleep</span> 5m</span>
<span id="cb335-8"><a href="#cb335-8" aria-hidden="true"></a><span class="co"># Waits 5 minutes.</span></span>
<span id="cb335-9"><a href="#cb335-9" aria-hidden="true"></a><span class="fu">sleep</span> 5h</span>
<span id="cb335-10"><a href="#cb335-10" aria-hidden="true"></a><span class="co"># Waits 5 hours.</span></span>
<span id="cb335-11"><a href="#cb335-11" aria-hidden="true"></a><span class="fu">sleep</span> 5d</span>
<span id="cb335-12"><a href="#cb335-12" aria-hidden="true"></a><span class="co"># Waits 5 days.</span></span></code></pre></div>
<p>One can also employ decimals when specifying a time unit; e.g. <code>sleep 1.5s</code></p>
</section>
<section id="answer-3-score-66" class="level4">
<h4>Answer 3 (score 66)</h4>
<p>And what about:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true"></a><span class="bu">read</span> -p <span class="st">&quot;Press enter to continue&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="split-string-into-an-array-in-bash-score-769103-in-2018" class="level3">
<h3>40: Split string into an array in Bash (score <a href="https://stackoverflow.com/q/10586153.html">769103</a> in 2018)</h3>
<section id="question-39" class="level4">
<h4>Question</h4>
<p>In a Bash script I would like to split a line into pieces and store them in an array.</p>
<p>The line:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true"></a><span class="ex">Paris</span>, France, Europe</span></code></pre></div>
<p>I would like to have them in an array like this:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true"></a><span class="ex">array</span>[0] = Paris</span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true"></a><span class="ex">array</span>[1] = France</span>
<span id="cb338-3"><a href="#cb338-3" aria-hidden="true"></a><span class="ex">array</span>[2] = Europe</span></code></pre></div>
<p>I would like to use simple code, the command’s speed doesn’t matter. How can I do it?</p>
</section>
<section id="answer-accepted-score-984" class="level4">
<h4>Answer accepted (score 984)</h4>
<div class="sourceCode" id="cb339"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="bu">read</span> -r -a <span class="va">array</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span></code></pre></div>
<p>Note that the characters in <code>$IFS</code> are treated individually as separators so that in this case fields may be separated by <em>either</em> a comma or a space rather than the sequence of the two characters. Interestingly though, empty fields aren’t created when comma-space appears in the input because the space is treated specially.</p>
<p>To access an individual element:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${array[0]}</span><span class="st">&quot;</span></span></code></pre></div>
<p>To iterate over the elements:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">element</span> in <span class="st">&quot;</span><span class="va">${array[@]}</span><span class="st">&quot;</span></span>
<span id="cb341-2"><a href="#cb341-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb341-3"><a href="#cb341-3" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$element</span><span class="st">&quot;</span></span>
<span id="cb341-4"><a href="#cb341-4" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>To get both the index and the value:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">index</span> in <span class="st">&quot;</span><span class="va">${!array[@]}</span><span class="st">&quot;</span></span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb342-3"><a href="#cb342-3" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$index</span><span class="st"> </span><span class="va">${array[index]}</span><span class="st">&quot;</span></span>
<span id="cb342-4"><a href="#cb342-4" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>The last example is useful because Bash arrays are sparse. In other words, you can delete an element or add an element and then the indices are not contiguous.</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true"></a><span class="bu">unset</span> <span class="st">&quot;array[1]&quot;</span></span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true"></a><span class="va">array[42]=</span>Earth</span></code></pre></div>
<p>To get the number of elements in an array:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;${</span></span>
<span id="cb344-2"><a href="#cb344-2" aria-hidden="true"></a><span class="st">#array[@]}&quot;</span></span></code></pre></div>
<p>As mentioned above, arrays can be sparse so you shouldn’t use the length to get the last element. Here’s how you can in Bash 4.2 and later:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${array[-1]}</span><span class="st">&quot;</span></span></code></pre></div>
<p>in any version of Bash (from somewhere after 2.05b):</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${array[@]: -1:1}</span><span class="st">&quot;</span></span></code></pre></div>
<p>Larger negative offsets select farther from the end of the array. Note the space before the minus sign in the older form. It is required.</p>
</section>
<section id="answer-2-score-261" class="level4">
<h4>Answer 2 (score 261)</h4>
<p>All of the answers to this question are wrong in one way or another.</p>
<hr>
<p><a href="https://stackoverflow.com/a/10586169/4272464"><strong><em>Wrong answer #1</em></strong></a></p>
<div class="sourceCode" id="cb347"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="bu">read</span> -r -a <span class="va">array</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span></code></pre></div>
<p><strong>1:</strong> This is a misuse of <code>$IFS</code>. The value of the <code>$IFS</code> variable is <strong>not</strong> taken as a <em>single variable-length</em> string separator, rather it is taken as a <em>set</em> of <em>single-character</em> string separators, where each field that <code>read</code> splits off from the input line can be terminated by <em>any</em> character in the set (comma <strong>or</strong> space, in this example).</p>
<p>Actually, for the real sticklers out there, the full meaning of <code>$IFS</code> is slightly more involved. From the <a href="https://www.gnu.org/software/bash/manual/html_node/Word-Splitting.html
#Word-Splitting" rel="noreferrer">bash manual</a>:</p>
<blockquote>
The shell treats each character of <strong>IFS</strong> as a delimiter, and splits the results of the other expansions into words using these characters as field terminators. If <strong>IFS</strong> is unset, or its value is exactly <strong>&lt;space&gt;&lt;tab&gt;&lt;newline&gt;</strong>, the default, then sequences of <strong>&lt;space&gt;</strong>, <strong>&lt;tab&gt;</strong>, and <strong>&lt;newline&gt;</strong> at the beginning and end of the results of the previous expansions are ignored, and any sequence of <strong>IFS</strong> characters not at the beginning or end serves to delimit words. If <strong>IFS</strong> has a value other than the default, then sequences of the whitespace characters <strong>&lt;space&gt;</strong>, <strong>&lt;tab&gt;</strong>, and <strong>&lt;newline&gt;</strong> are ignored at the beginning and end of the word, as long as the whitespace character is in the value of <strong>IFS</strong> (an <strong>IFS</strong> whitespace character). Any character in <strong>IFS</strong> that is not <strong>IFS</strong> whitespace, along with any adjacent <strong>IFS</strong> whitespace characters, delimits a field. A sequence of <strong>IFS</strong> whitespace characters is also treated as a delimiter. If the value of <strong>IFS</strong> is null, no word splitting occurs.
</blockquote>
<p>Basically, for non-default non-null values of <code>$IFS</code>, fields can be separated with either (1) a sequence of one or more characters that are all from the set of “IFS whitespace characters” (that is, whichever of <strong>&lt;space&gt;</strong>, <strong>&lt;tab&gt;</strong>, and <strong>&lt;newline&gt;</strong> (“newline” meaning <a href="https://en.wikipedia.org/wiki/Newline" rel="noreferrer">line feed (LF)</a>) are present anywhere in <code>$IFS</code>), or (2) any non-“IFS whitespace character” that’s present in <code>$IFS</code> along with whatever “IFS whitespace characters” surround it in the input line.</p>
<p>For the OP, it’s possible that the second separation mode I described in the previous paragraph is exactly what he wants for his input string, but we can be pretty confident that the first separation mode I described is not correct at all. For example, what if his input string was <code>'Los Angeles, United States, North America'</code>?</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="bu">read</span> -ra <span class="va">a</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&#39;Los Angeles, United States, North America&#39;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true"></a></span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;Los&quot; [1]=&quot;Angeles&quot; [2]=&quot;United&quot; [3]=&quot;States&quot; [4]=&quot;North&quot; [5]=&quot;America&quot;)</span></span></code></pre></div>
<p><strong>2:</strong> Even if you were to use this solution with a single-character separator (such as a comma by itself, that is, with no following space or other baggage), if the value of the <code>$string</code> variable happens to contain any LFs, then <code>read</code> will stop processing once it encounters the first LF. The <code>read</code> builtin only processes one line per invocation. This is true even if you are piping or redirecting input <em>only</em> to the <code>read</code> statement, as we are doing in this example with the <a href="https://www.gnu.org/software/bash/manual/html_node/Redirections.html
#Here-Strings" rel="noreferrer">here-string</a> mechanism, and thus unprocessed input is guaranteed to be lost. The code that powers the <code>read</code> builtin has no knowledge of the data flow within its containing command structure.</p>
<p>You could argue that this is unlikely to cause a problem, but still, it’s a subtle hazard that should be avoided if possible. It is caused by the fact that the <code>read</code> builtin actually does two levels of input splitting: first into lines, then into fields. Since the OP only wants one level of splitting, this usage of the <code>read</code> builtin is not appropriate, and we should avoid it.</p>
<p><strong>3:</strong> A non-obvious potential issue with this solution is that <code>read</code> always drops the trailing field if it is empty, although it preserves empty fields otherwise. Here’s a demo:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&#39;, , a, , b, c, , , &#39;</span>; <span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="bu">read</span> -ra <span class="va">a</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb349-2"><a href="#cb349-2" aria-hidden="true"></a></span>
<span id="cb349-3"><a href="#cb349-3" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;&quot; [1]=&quot;&quot; [2]=&quot;a&quot; [3]=&quot;&quot; [4]=&quot;b&quot; [5]=&quot;c&quot; [6]=&quot;&quot; [7]=&quot;&quot;)</span></span></code></pre></div>
<p>Maybe the OP wouldn’t care about this, but it’s still a limitation worth knowing about. It reduces the robustness and generality of the solution.</p>
<p>This problem can be solved by appending a dummy trailing delimiter to the input string just prior to feeding it to <code>read</code>, as I will demonstrate later.</p>
<hr>
<p><a href="https://stackoverflow.com/a/15400047/4272464"><strong><em>Wrong answer #2</em></strong></a></p>
<div class="sourceCode" id="cb350"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&quot;1:2:3:4:5&quot;</span></span>
<span id="cb350-2"><a href="#cb350-2" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-f</span></span>
<span id="cb350-3"><a href="#cb350-3" aria-hidden="true"></a><span class="co"># avoid globbing (expansion of *).</span></span>
<span id="cb350-4"><a href="#cb350-4" aria-hidden="true"></a><span class="va">array=(${string//</span>:<span class="va">/</span> <span class="va">})</span></span></code></pre></div>
<p><a href="https://stackoverflow.com/a/31405855/4272464">Similar idea:</a></p>
<div class="sourceCode" id="cb351"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true"></a><span class="va">t=</span><span class="st">&quot;one,two,three&quot;</span></span>
<span id="cb351-2"><a href="#cb351-2" aria-hidden="true"></a><span class="va">a=($(</span><span class="bu">echo</span> <span class="va">$t</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&#39;,&#39;</span> <span class="st">&quot;\n&quot;</span><span class="va">))</span></span></code></pre></div>
<p>(Note: I added the missing parentheses around the command substitution which the answerer seems to have omitted.)</p>
<p><a href="https://stackoverflow.com/a/37618160/4272464">Similar idea:</a></p>
<div class="sourceCode" id="cb352"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&quot;1,2,3,4&quot;</span></span>
<span id="cb352-2"><a href="#cb352-2" aria-hidden="true"></a><span class="va">array=(</span><span class="kw">`</span><span class="bu">echo</span> <span class="va">$string</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;s/,/\n/g&#39;</span><span class="kw">`</span><span class="va">)</span></span></code></pre></div>
<p>These solutions leverage word splitting in an array assignment to split the string into fields. Funnily enough, just like <code>read</code>, general word splitting also uses the <code>$IFS</code> special variable, although in this case it is implied that it is set to its default value of <strong>&lt;space&gt;&lt;tab&gt;&lt;newline&gt;</strong>, and therefore any sequence of one or more IFS characters (which are all whitespace characters now) is considered to be a field delimiter.</p>
<p>This solves the problem of two levels of splitting committed by <code>read</code>, since word splitting by itself constitutes only one level of splitting. But just as before, the problem here is that the individual fields in the input string can already contain <code>$IFS</code> characters, and thus they would be improperly split during the word splitting operation. This happens to not be the case for any of the sample input strings provided by these answerers (how convenient…), but of course that doesn’t change the fact that any code base that used this idiom would then run the risk of blowing up if this assumption were ever violated at some point down the line. Once again, consider my counterexample of <code>'Los Angeles, United States, North America'</code> (or <code>'Los Angeles:United States:North America'</code>).</p>
<p>Also, word splitting is normally followed by <a href="https://www.gnu.org/software/bash/manual/html_node/Filename-Expansion.html
#Filename-Expansion" rel="noreferrer">filename expansion</a> (<em>aka</em> pathname expansion <em>aka</em> globbing), which, if done, would potentially corrupt words containing the characters <code>*</code>, <code>?</code>, or <code>[</code> followed by <code>]</code> (and, if <code>extglob</code> is set, parenthesized fragments preceded by <code>?</code>, <code>*</code>, <code>+</code>, <code>@</code>, or <code>!</code>) by matching them against file system objects and expanding the words (“globs”) accordingly. The first of these three answerers has cleverly undercut this problem by running <code>set -f</code> beforehand to disable globbing. Technically this works (although you should probably add <code>set +f</code> afterward to reenable globbing for subsequent code which may depend on it), but it’s undesirable to have to mess with global shell settings in order to hack a basic string-to-array parsing operation in local code.</p>
<p>Another issue with this answer is that all empty fields will be lost. This may or may not be a problem, depending on the application.</p>
<p>Note: If you’re going to use this solution, it’s better to use the <code>${string//:/ }</code> “pattern substitution” form of <a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html
#Shell-Parameter-Expansion" rel="noreferrer">parameter expansion</a>, rather than going to the trouble of invoking a command substitution (which forks the shell), starting up a pipeline, and running an external executable (<code>tr</code> or <code>sed</code>), since parameter expansion is purely a shell-internal operation. (Also, for the <code>tr</code> and <code>sed</code> solutions, the input variable should be double-quoted inside the command substitution; otherwise word splitting would take effect in the <code>echo</code> command and potentially mess with the field values. Also, the <code>$(...)</code> form of command substitution is preferable to the old <code>...</code> form since it simplifies nesting of command substitutions and allows for better syntax highlighting by text editors.)</p>
<hr>
<p><a href="https://stackoverflow.com/a/39474755/4272464"><strong><em>Wrong answer #3</em></strong></a></p>
<div class="sourceCode" id="cb353"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true"></a><span class="va">str=</span><span class="st">&quot;a, b, c, d&quot;</span></span>
<span id="cb353-2"><a href="#cb353-2" aria-hidden="true"></a><span class="co"># assuming there is a space after &#39;,&#39; as in Q</span></span>
<span id="cb353-3"><a href="#cb353-3" aria-hidden="true"></a><span class="va">arr=(${str//</span>,<span class="va">/})</span></span>
<span id="cb353-4"><a href="#cb353-4" aria-hidden="true"></a><span class="co"># delete all occurrences of &#39;,&#39;</span></span></code></pre></div>
<p>This answer is almost the same as <strong> #2</strong>. The difference is that the answerer has made the assumption that the fields are delimited by two characters, one of which being represented in the default <code>$IFS</code>, and the other not. He has solved this rather specific case by removing the non-IFS-represented character using a pattern substitution expansion and then using word splitting to split the fields on the surviving IFS-represented delimiter character.</p>
<p>This is not a very generic solution. Furthermore, it can be argued that the comma is really the “primary” delimiter character here, and that stripping it and then depending on the space character for field splitting is simply wrong. Once again, consider my counterexample: <code>'Los Angeles, United States, North America'</code>.</p>
<p>Also, again, filename expansion could corrupt the expanded words, but this can be prevented by temporarily disabling globbing for the assignment with <code>set -f</code> and then <code>set +f</code>.</p>
<p>Also, again, all empty fields will be lost, which may or may not be a problem depending on the application.</p>
<hr>
<p><a href="https://stackoverflow.com/a/13196466/4272464"><strong><em>Wrong answer #4</em></strong></a></p>
<div class="sourceCode" id="cb354"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&#39;first line</span></span>
<span id="cb354-2"><a href="#cb354-2" aria-hidden="true"></a><span class="st">second line</span></span>
<span id="cb354-3"><a href="#cb354-3" aria-hidden="true"></a><span class="st">third line&#39;</span></span>
<span id="cb354-4"><a href="#cb354-4" aria-hidden="true"></a></span>
<span id="cb354-5"><a href="#cb354-5" aria-hidden="true"></a><span class="va">oldIFS=</span><span class="st">&quot;</span><span class="va">$IFS</span><span class="st">&quot;</span></span>
<span id="cb354-6"><a href="#cb354-6" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;</span></span>
<span id="cb354-7"><a href="#cb354-7" aria-hidden="true"></a><span class="st">&#39;</span></span>
<span id="cb354-8"><a href="#cb354-8" aria-hidden="true"></a><span class="va">IFS=${IFS:0:1}</span></span>
<span id="cb354-9"><a href="#cb354-9" aria-hidden="true"></a><span class="co"># this is useful to format your code with tabs</span></span>
<span id="cb354-10"><a href="#cb354-10" aria-hidden="true"></a><span class="va">lines=(</span> <span class="va">$string</span> <span class="va">)</span></span>
<span id="cb354-11"><a href="#cb354-11" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&quot;</span><span class="va">$oldIFS</span><span class="st">&quot;</span></span></code></pre></div>
<p>This is similar to <strong> #2</strong> and <strong>#3</strong> in that it uses word splitting to get the job done, only now the code explicitly sets <code>$IFS</code> to contain only the single-character field delimiter present in the input string. It should be repeated that this cannot work for multicharacter field delimiters such as the OP’s comma-space delimiter. But for a single-character delimiter like the LF used in this example, it actually comes close to being perfect. The fields cannot be unintentionally split in the middle as we saw with previous wrong answers, and there is only one level of splitting, as required.</p>
<p>One problem is that filename expansion will corrupt affected words as described earlier, although once again this can be solved by wrapping the critical statement in <code>set -f</code> and <code>set +f</code>.</p>
<p>Another potential problem is that, since LF qualifies as an “IFS whitespace character” as defined earlier, all empty fields will be lost, just as in <strong> #2</strong> and <strong>#3</strong>. This would of course not be a problem if the delimiter happens to be a non-“IFS whitespace character”, and depending on the application it may not matter anyway, but it does vitiate the generality of the solution.</p>
<p>So, to sum up, assuming you have a one-character delimiter, and it is either a non-“IFS whitespace character” or you don’t care about empty fields, and you wrap the critical statement in <code>set -f</code> and <code>set +f</code>, then this solution works, but otherwise not.</p>
<p>(Also, for information’s sake, assigning a LF to a variable in bash can be done more easily with the <code>$'...'</code> syntax, e.g. <code>IFS=$'\n';</code>.)</p>
<hr>
<p><a href="https://stackoverflow.com/a/41225957/4272464"><strong><em>Wrong answer #5</em></strong></a></p>
<div class="sourceCode" id="cb355"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true"></a><span class="va">countries=</span><span class="st">&#39;Paris, France, Europe&#39;</span></span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true"></a><span class="va">OIFS=</span><span class="st">&quot;</span><span class="va">$IFS</span><span class="st">&quot;</span></span>
<span id="cb355-3"><a href="#cb355-3" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="va">array=($countries)</span></span>
<span id="cb355-4"><a href="#cb355-4" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&quot;</span><span class="va">$OIFS</span><span class="st">&quot;</span></span></code></pre></div>
<p><a href="https://stackoverflow.com/a/30744597/4272464">Similar idea:</a></p>
<div class="sourceCode" id="cb356"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="bu">eval</span> <span class="st">&#39;array=($string)&#39;</span></span></code></pre></div>
<p>This solution is effectively a cross between <strong> #1</strong> (in that it sets <code>$IFS</code> to comma-space) and <strong>#2-4</strong> (in that it uses word splitting to split the string into fields). Because of this, it suffers from most of the problems that afflict all of the above wrong answers, sort of like the worst of all worlds.</p>
<p>Also, regarding the second variant, it may seem like the <code>eval</code> call is completely unnecessary, since its argument is a single-quoted string literal, and therefore is statically known. But there’s actually a very non-obvious benefit to using <code>eval</code> in this way. Normally, when you run a simple command which consists of a variable assignment <em>only</em>, meaning without an actual command word following it, the assignment takes effect in the shell environment:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span>;</span>
<span id="cb357-2"><a href="#cb357-2" aria-hidden="true"></a><span class="co">## changes $IFS in the shell environment</span></span></code></pre></div>
<p>This is true even if the simple command involves <em>multiple</em> variable assignments; again, as long as there’s no command word, all variable assignments affect the shell environment:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="va">array=($countries)</span>;</span>
<span id="cb358-2"><a href="#cb358-2" aria-hidden="true"></a><span class="co">## changes both $IFS and $array in the shell environment</span></span></code></pre></div>
<p>But, if the variable assignment is attached to a command name (I like to call this a “prefix assignment”) then it does <em>not</em> affect the shell environment, and instead only affects the environment of the executed command, regardless whether it is a builtin or external:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="bu">:</span><span class="kw">;</span></span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true"></a><span class="co">## : is a builtin command, the $IFS assignment does not outlive it</span></span>
<span id="cb359-3"><a href="#cb359-3" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="fu">env</span><span class="kw">;</span></span>
<span id="cb359-4"><a href="#cb359-4" aria-hidden="true"></a><span class="co">## env is an external command, the $IFS assignment does not outlive it</span></span></code></pre></div>
<p>Relevant quote from the <a href="https://www.gnu.org/software/bash/manual/html_node/Simple-Command-Expansion.html
#Simple-Command-Expansion" rel="noreferrer">bash manual</a>:</p>
<blockquote>
If no command name results, the variable assignments affect the current shell environment. Otherwise, the variables are added to the environment of the executed command and do not affect the current shell environment.
</blockquote>
<p>It is possible to exploit this feature of variable assignment to change <code>$IFS</code> only temporarily, which allows us to avoid the whole save-and-restore gambit like that which is being done with the <code>$OIFS</code> variable in the first variant. But the challenge we face here is that the command we need to run is itself a mere variable assignment, and hence it would not involve a command word to make the <code>$IFS</code> assignment temporary. You might think to yourself, well why not just add a no-op command word to the statement like the <a href="https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html
#Bourne-Shell-Builtins" rel="noreferrer"><code>: builtin</code></a> to make the <code>$IFS</code> assignment temporary? This does not work because it would then make the <code>$array</code> assignment temporary as well:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="va">array=($countries)</span> <span class="bu">:</span><span class="kw">;</span></span>
<span id="cb360-2"><a href="#cb360-2" aria-hidden="true"></a><span class="co">## fails; new $array value never escapes the : command</span></span></code></pre></div>
<p>So, we’re effectively at an impasse, a bit of a catch-22. But, when <code>eval</code> runs its code, it runs it in the shell environment, as if it was normal, static source code, and therefore we can run the <code>$array</code> assignment inside the <code>eval</code> argument to have it take effect in the shell environment, while the <code>$IFS</code> prefix assignment that is prefixed to the <code>eval</code> command will not outlive the <code>eval</code> command. This is exactly the trick that is being used in the second variant of this solution:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span> <span class="bu">eval</span> <span class="st">&#39;array=($string)&#39;</span><span class="kw">;</span></span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true"></a><span class="co">## $IFS does not outlive the eval command, but $array does</span></span></code></pre></div>
<p>So, as you can see, it’s actually quite a clever trick, and accomplishes exactly what is required (at least with respect to assignment effectation) in a rather non-obvious way. I’m actually not against this trick in general, despite the involvement of <code>eval</code>; just be careful to single-quote the argument string to guard against security threats.</p>
<p>But again, because of the “worst of all worlds” agglomeration of problems, this is still a wrong answer to the OP’s requirement.</p>
<hr>
<p><a href="https://stackoverflow.com/a/35789043/4272464"><strong><em>Wrong answer #6</em></strong></a></p>
<div class="sourceCode" id="cb362"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39;, &#39;</span>; <span class="va">array=(</span>Paris, France, Europe<span class="va">)</span></span>
<span id="cb362-2"><a href="#cb362-2" aria-hidden="true"></a></span>
<span id="cb362-3"><a href="#cb362-3" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">&#39; &#39;</span>;<span class="bu">declare</span> -a <span class="va">array=(</span>Paris France Europe<span class="va">)</span></span></code></pre></div>
<p>Um… what? The OP has a string variable that needs to be parsed into an array. This “answer” starts with the verbatim contents of the input string pasted into an array literal. I guess that’s one way to do it.</p>
<p>It looks like the answerer may have assumed that the <code>$IFS</code> variable affects all bash parsing in all contexts, which is not true. From the bash manual:</p>
<blockquote>
<strong>IFS</strong>    The Internal Field Separator that is used for word splitting after expansion and to split lines into words with the <strong>read</strong> builtin command. The default value is <strong>&lt;space&gt;&lt;tab&gt;&lt;newline&gt;</strong>.
</blockquote>
<p>So the <code>$IFS</code> special variable is actually only used in two contexts: (1) word splitting that is performed <em>after expansion</em> (meaning <em>not</em> when parsing bash source code) and (2) for splitting input lines into words by the <code>read</code> builtin.</p>
<p>Let me try to make this clearer. I think it might be good to draw a distinction between <em>parsing</em> and <em>execution</em>. Bash must first <em>parse</em> the source code, which obviously is a <em>parsing</em> event, and then later it <em>executes</em> the code, which is when expansion comes into the picture. Expansion is really an <em>execution</em> event. Furthermore, I take issue with the description of the <code>$IFS</code> variable that I just quoted above; rather than saying that word splitting is performed <em>after expansion</em>, I would say that word splitting is performed <em>during</em> expansion, or, perhaps even more precisely, word splitting is <em>part of</em> the expansion process. The phrase “word splitting” refers only to this step of expansion; it should never be used to refer to the parsing of bash source code, although unfortunately the docs do seem to throw around the words “split” and “words” a lot. Here’s a relevant excerpt from the <a href="https://linux.die.net/man/1/bash
#Expansion" rel="noreferrer">linux.die.net version</a> of the bash manual:</p>
<blockquote>
<p>Expansion is performed on the command line after it has been split into words. There are seven kinds of expansion performed: <em>brace expansion</em>, <em>tilde expansion</em>, <em>parameter and variable expansion</em>, <em>command substitution</em>, <em>arithmetic expansion</em>, <em>word splitting</em>, and <em>pathname expansion</em>.</p>
The order of expansions is: brace expansion; tilde expansion, parameter and variable expansion, arithmetic expansion, and command substitution (done in a left-to-right fashion); word splitting; and pathname expansion.
</blockquote>
<p>You could argue the <a href="https://www.gnu.org/software/bash/manual/html_node/Shell-Expansions.html
#Shell-Expansions" rel="noreferrer">GNU version</a> of the manual does slightly better, since it opts for the word “tokens” instead of “words” in the first sentence of the Expansion section:</p>
<blockquote>
Expansion is performed on the command line after it has been split into tokens.
</blockquote>
<p>The important point is, <code>$IFS</code> does not change the way bash parses source code. Parsing of bash source code is actually a very complex process that involves recognition of the various elements of shell grammar, such as command sequences, command lists, pipelines, parameter expansions, arithmetic substitutions, and command substitutions. For the most part, the bash parsing process cannot be altered by user-level actions like variable assignments (actually, there are some minor exceptions to this rule; for example, see the various <a href="https://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html
#The-Shopt-Builtin" rel="noreferrer"><code>compatxx</code> shell settings</a>, which can change certain aspects of parsing behavior on-the-fly). The upstream “words”/“tokens” that result from this complex parsing process are then expanded according to the general process of “expansion” as broken down in the above documentation excerpts, where word splitting of the expanded (expanding?) text into downstream words is simply one step of that process. Word splitting only touches text that has been spit out of a preceding expansion step; it does not affect literal text that was parsed right off the source bytestream.</p>
<hr>
<p><a href="https://stackoverflow.com/a/31620022/4272464"><strong><em>Wrong answer #7</em></strong></a></p>
<div class="sourceCode" id="cb363"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&#39;first line</span></span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true"></a><span class="st">        second line</span></span>
<span id="cb363-3"><a href="#cb363-3" aria-hidden="true"></a><span class="st">        third line&#39;</span></span>
<span id="cb363-4"><a href="#cb363-4" aria-hidden="true"></a></span>
<span id="cb363-5"><a href="#cb363-5" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">read</span> -r <span class="va">line</span>; <span class="kw">do</span> <span class="va">lines+=(</span><span class="st">&quot;</span><span class="va">$line</span><span class="st">&quot;</span><span class="va">)</span>; <span class="kw">done</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span></code></pre></div>
<p>This is one of the best solutions. Notice that we’re back to using <code>read</code>. Didn’t I say earlier that <code>read</code> is inappropriate because it performs two levels of splitting, when we only need one? The trick here is that you can call <code>read</code> in such a way that it effectively only does one level of splitting, specifically by splitting off only one field per invocation, which necessitates the cost of having to call it repeatedly in a loop. It’s a bit of a sleight of hand, but it works.</p>
<p>But there are problems. First: When you provide at least one <em>NAME</em> argument to <code>read</code>, it automatically ignores leading and trailing whitespace in each field that is split off from the input string. This occurs whether <code>$IFS</code> is set to its default value or not, as described earlier in this post. Now, the OP may not care about this for his specific use-case, and in fact, it may be a desirable feature of the parsing behavior. But not everyone who wants to parse a string into fields will want this. There is a solution, however: A somewhat non-obvious usage of <code>read</code> is to pass zero <em>NAME</em> arguments. In this case, <code>read</code> will store the entire input line that it gets from the input stream in a variable named <code>$REPLY</code>, and, as a bonus, it does <em>not</em> strip leading and trailing whitespace from the value. This is a very robust usage of <code>read</code> which I’ve exploited frequently in my shell programming career. Here’s a demonstration of the difference in behavior:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">$&#39;  a  b  </span><span class="dt">\n</span><span class="st">  c  d  </span><span class="dt">\n</span><span class="st">  e  f  &#39;</span>;</span>
<span id="cb364-2"><a href="#cb364-2" aria-hidden="true"></a><span class="co">## input string</span></span>
<span id="cb364-3"><a href="#cb364-3" aria-hidden="true"></a></span>
<span id="cb364-4"><a href="#cb364-4" aria-hidden="true"></a><span class="va">a=()</span>; <span class="kw">while</span> <span class="bu">read</span> -r <span class="va">line</span>; <span class="kw">do</span> <span class="va">a+=(</span><span class="st">&quot;</span><span class="va">$line</span><span class="st">&quot;</span><span class="va">)</span>; <span class="kw">done</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb364-5"><a href="#cb364-5" aria-hidden="true"></a></span>
<span id="cb364-6"><a href="#cb364-6" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;a  b&quot; [1]=&quot;c  d&quot; [2]=&quot;e  f&quot;) ## read trimmed surrounding whitespace</span></span>
<span id="cb364-7"><a href="#cb364-7" aria-hidden="true"></a></span>
<span id="cb364-8"><a href="#cb364-8" aria-hidden="true"></a><span class="va">a=()</span>; <span class="kw">while</span> <span class="bu">read</span> -r; <span class="kw">do</span> <span class="va">a+=(</span><span class="st">&quot;</span><span class="va">$REPLY</span><span class="st">&quot;</span><span class="va">)</span>; <span class="kw">done</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb364-9"><a href="#cb364-9" aria-hidden="true"></a></span>
<span id="cb364-10"><a href="#cb364-10" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;  a  b  &quot; [1]=&quot;  c  d  &quot; [2]=&quot;  e  f  &quot;) ## no trimming</span></span></code></pre></div>
<p>The second issue with this solution is that it does not actually address the case of a custom field separator, such as the OP’s comma-space. As before, multicharacter separators are not supported, which is an unfortunate limitation of this solution. We could try to at least split on comma by specifying the separator to the <code>-d</code> option, but look what happens:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&#39;Paris, France, Europe&#39;</span>;</span>
<span id="cb365-2"><a href="#cb365-2" aria-hidden="true"></a><span class="va">a=()</span>; <span class="kw">while</span> <span class="bu">read</span> -rd,; <span class="kw">do</span> <span class="va">a+=(</span><span class="st">&quot;</span><span class="va">$REPLY</span><span class="st">&quot;</span><span class="va">)</span>; <span class="kw">done</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb365-3"><a href="#cb365-3" aria-hidden="true"></a></span>
<span id="cb365-4"><a href="#cb365-4" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;Paris&quot; [1]=&quot; France&quot;)</span></span></code></pre></div>
<p>Predictably, the unaccounted surrounding whitespace got pulled into the field values, and hence this would have to be corrected subsequently through trimming operations (this could also be done directly in the while-loop). But there’s another obvious error: Europe is missing! What happened to it? The answer is that <code>read</code> returns a failing return code if it hits end-of-file (in this case we can call it end-of-string) without encountering a final field terminator on the final field. This causes the while-loop to break prematurely and we lose the final field.</p>
<p>Technically this same error afflicted the previous examples as well; the difference there is that the field separator was taken to be LF, which is the default when you don’t specify the <code>-d</code> option, and the <code>&amp;lt;&amp;lt;&amp;lt;</code> (“here-string”) mechanism automatically appends a LF to the string just before it feeds it as input to the command. Hence, in those cases, we sort of <em>accidentally</em> solved the problem of a dropped final field by unwittingly appending an additional dummy terminator to the input. Let’s call this solution the “dummy-terminator” solution. We can apply the dummy-terminator solution manually for any custom delimiter by concatenating it against the input string ourselves when instantiating it in the here-string:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true"></a><span class="va">a=()</span>; <span class="kw">while</span> <span class="bu">read</span> -rd,; <span class="kw">do</span> <span class="va">a+=(</span><span class="st">&quot;</span><span class="va">$REPLY</span><span class="st">&quot;</span><span class="va">)</span>; <span class="kw">done</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">,&quot;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb366-2"><a href="#cb366-2" aria-hidden="true"></a><span class="bu">declare</span> -a <span class="va">a=([0]=</span><span class="st">&quot;Paris&quot;</span> <span class="va">[1]=</span><span class="st">&quot; France&quot;</span> <span class="va">[2]=</span><span class="st">&quot; Europe&quot;</span><span class="va">)</span></span></code></pre></div>
<p>There, problem solved. Another solution is to only break the while-loop if both (1) <code>read</code> returned failure and (2) <code>$REPLY</code> is empty, meaning <code>read</code> was not able to read any characters prior to hitting end-of-file. Demo:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true"></a><span class="va">a=()</span>; <span class="kw">while</span> <span class="bu">read</span> -rd,<span class="kw">|| [[</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$REPLY</span><span class="st">&quot;</span><span class="kw"> ]]</span>; <span class="kw">do</span> <span class="va">a+=(</span><span class="st">&quot;</span><span class="va">$REPLY</span><span class="st">&quot;</span><span class="va">)</span>; <span class="kw">done</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb367-2"><a href="#cb367-2" aria-hidden="true"></a></span>
<span id="cb367-3"><a href="#cb367-3" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;Paris&quot; [1]=&quot; France&quot; [2]=$&#39; Europe\n&#39;)</span></span></code></pre></div>
<p>This approach also reveals the secretive LF that automatically gets appended to the here-string by the <code>&amp;lt;&amp;lt;&amp;lt;</code> redirection operator. It could of course be stripped off separately through an explicit trimming operation as described a moment ago, but obviously the manual dummy-terminator approach solves it directly, so we could just go with that. The manual dummy-terminator solution is actually quite convenient in that it solves both of these two problems (the dropped-final-field problem and the appended-LF problem) in one go.</p>
<p>So, overall, this is quite a powerful solution. It’s only remaining weakness is a lack of support for multicharacter delimiters, which I will address later.</p>
<hr>
<p><a href="https://stackoverflow.com/a/31620022/4272464"><strong><em>Wrong answer #8</em></strong></a></p>
<div class="sourceCode" id="cb368"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&#39;first line</span></span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true"></a><span class="st">        second line</span></span>
<span id="cb368-3"><a href="#cb368-3" aria-hidden="true"></a><span class="st">        third line&#39;</span></span>
<span id="cb368-4"><a href="#cb368-4" aria-hidden="true"></a></span>
<span id="cb368-5"><a href="#cb368-5" aria-hidden="true"></a><span class="ex">readarray</span> -t lines <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span></code></pre></div>
<p>(This is actually from the same post as <strong> #7</strong>; the answerer provided two solutions in the same post.)</p>
<p>The <code>readarray</code> builtin, which is a synonym for <code>mapfile</code>, is ideal. It’s a builtin command which parses a bytestream into an array variable in one shot; no messing with loops, conditionals, substitutions, or anything else. And it doesn’t surreptitiously strip any whitespace from the input string. And (if <code>-O</code> is not given) it conveniently clears the target array before assigning to it. But it’s still not perfect, hence my criticism of it as a “wrong answer”.</p>
<p>First, just to get this out of the way, note that, just like the behavior of <code>read</code> when doing field-parsing, <code>readarray</code> drops the trailing field if it is empty. Again, this is probably not a concern for the OP, but it could be for some use-cases. I’ll come back to this in a moment.</p>
<p>Second, as before, it does not support multicharacter delimiters. I’ll give a fix for this in a moment as well.</p>
<p>Third, the solution as written does not parse the OP’s input string, and in fact, it cannot be used as-is to parse it. I’ll expand on this momentarily as well.</p>
<p>For the above reasons, I still consider this to be a “wrong answer” to the OP’s question. Below I’ll give what I consider to be the right answer.</p>
<hr>
<p><strong>Right answer</strong></p>
<p>Here’s a naïve attempt to make <strong> #8</strong> work by just specifying the <code>-d</code> option:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&#39;Paris, France, Europe&#39;</span>;</span>
<span id="cb369-2"><a href="#cb369-2" aria-hidden="true"></a><span class="ex">readarray</span> -td, a <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span><span class="kw">;</span> <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb369-3"><a href="#cb369-3" aria-hidden="true"></a></span>
<span id="cb369-4"><a href="#cb369-4" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;Paris&quot; [1]=&quot; France&quot; [2]=$&#39; Europe\n&#39;)</span></span></code></pre></div>
<p>We see the result is identical to the result we got from the double-conditional approach of the looping <code>read</code> solution discussed in <strong> #7</strong>. We can <em>almost</em> solve this with the manual dummy-terminator trick:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true"></a><span class="ex">readarray</span> -td, a <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">,&quot;</span><span class="kw">;</span> <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true"></a></span>
<span id="cb370-3"><a href="#cb370-3" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;Paris&quot; [1]=&quot; France&quot; [2]=&quot; Europe&quot; [3]=$&#39;\n&#39;)</span></span></code></pre></div>
<p>The problem here is that <code>readarray</code> preserved the trailing field, since the <code>&amp;lt;&amp;lt;&amp;lt;</code> redirection operator appended the LF to the input string, and therefore the trailing field was <em>not</em> empty (otherwise it would’ve been dropped). We can take care of this by explicitly unsetting the final array element after-the-fact:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true"></a><span class="ex">readarray</span> -td, a <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">,&quot;</span><span class="kw">;</span> <span class="bu">unset</span> <span class="st">&#39;a[-1]&#39;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb371-2"><a href="#cb371-2" aria-hidden="true"></a></span>
<span id="cb371-3"><a href="#cb371-3" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;Paris&quot; [1]=&quot; France&quot; [2]=&quot; Europe&quot;)</span></span></code></pre></div>
<p>The only two problems that remain, which are actually related, are (1) the extraneous whitespace that needs to be trimmed, and (2) the lack of support for multicharacter delimiters.</p>
<p>The whitespace could of course be trimmed afterward (for example, see <a href="https://stackoverflow.com/questions/369758/how-to-trim-whitespace-from-a-bash-variable">How to trim whitespace from a Bash variable?</a>). But if we can hack a multicharacter delimiter, then that would solve both problems in one shot.</p>
<p>Unfortunately, there’s no <em>direct</em> way to get a multicharacter delimiter to work. The best solution I’ve thought of is to preprocess the input string to replace the multicharacter delimiter with a single-character delimiter that will be guaranteed not to collide with the contents of the input string. The only character that has this guarantee is the <a href="https://en.wikipedia.org/wiki/Null_character" rel="noreferrer">NUL byte</a>. This is because, in bash (though not in zsh, incidentally), variables cannot contain the NUL byte. This preprocessing step can be done inline in a process substitution. Here’s how to do it using <a href="https://www.gnu.org/software/gawk/" rel="noreferrer">awk</a>:</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true"></a><span class="ex">readarray</span> -td <span class="st">&#39;&#39;</span> a <span class="op">&lt;</span> <span class="op">&lt;(</span><span class="fu">awk</span> <span class="st">&#39;{ gsub(/, /,&quot;\0&quot;); print; }&#39;</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">, &quot;</span><span class="op">)</span><span class="kw">;</span> <span class="bu">unset</span> <span class="st">&#39;a[-1]&#39;</span>;</span>
<span id="cb372-2"><a href="#cb372-2" aria-hidden="true"></a><span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb372-3"><a href="#cb372-3" aria-hidden="true"></a></span>
<span id="cb372-4"><a href="#cb372-4" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;Paris&quot; [1]=&quot;France&quot; [2]=&quot;Europe&quot;)</span></span></code></pre></div>
<p>There, finally! This solution will not erroneously split fields in the middle, will not cut out prematurely, will not drop empty fields, will not corrupt itself on filename expansions, will not automatically strip leading and trailing whitespace, will not leave a stowaway LF on the end, does not require loops, and does not settle for a single-character delimiter.</p>
<hr>
<p><strong>Trimming solution</strong></p>
<p>Lastly, I wanted to demonstrate my own fairly intricate trimming solution using the obscure <code>-C callback</code> option of <code>readarray</code>. Unfortunately, I’ve run out of room against Stack Overflow’s draconian 30,000 character post limit, so I won’t be able to explain it. I’ll leave that as an exercise for the reader.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> mfcb</span> <span class="kw">{</span> <span class="bu">local</span> <span class="va">val=</span><span class="st">&quot;</span><span class="va">$4</span><span class="st">&quot;</span>; <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span>; <span class="bu">eval</span> <span class="st">&quot;</span><span class="va">$2</span><span class="st">[</span><span class="va">$3</span><span class="st">]=</span><span class="dt">\$</span><span class="st">val;&quot;</span><span class="kw">;</span> <span class="kw">}</span>;</span>
<span id="cb373-2"><a href="#cb373-2" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> val_ltrim</span> <span class="kw">{</span> <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$val</span><span class="st">&quot;</span> =~ ^[[:space:]]+<span class="kw"> ]]</span>; <span class="kw">then</span> <span class="va">val=</span><span class="st">&quot;</span><span class="va">${val:</span><span class="er">${</span></span>
<span id="cb373-3"><a href="#cb373-3" aria-hidden="true"></a><span class="er">#</span><span class="va">BASH_REMATCH</span><span class="er">[0]</span><span class="va">}</span><span class="st">}&quot;</span>; <span class="kw">fi</span>; <span class="kw">}</span>;</span>
<span id="cb373-4"><a href="#cb373-4" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> val_rtrim</span> <span class="kw">{</span> <span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$val</span><span class="st">&quot;</span> =~ [[:space:]]+$<span class="kw"> ]]</span>; <span class="kw">then</span> <span class="va">val=</span><span class="st">&quot;</span><span class="va">${val:0:</span><span class="er">${</span></span>
<span id="cb373-5"><a href="#cb373-5" aria-hidden="true"></a><span class="er">#</span><span class="va">val}</span><span class="st">-${#BASH_REMATCH[0]}}&quot;</span>; <span class="kw">fi</span>; <span class="kw">}</span>;</span>
<span id="cb373-6"><a href="#cb373-6" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> val_trim</span> <span class="kw">{</span> <span class="ex">val_ltrim</span><span class="kw">;</span> <span class="ex">val_rtrim</span><span class="kw">;</span> <span class="kw">}</span>;</span>
<span id="cb373-7"><a href="#cb373-7" aria-hidden="true"></a><span class="ex">readarray</span> -c1 -C <span class="st">&#39;mfcb val_trim a&#39;</span> -td, <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$string</span><span class="st">,&quot;</span><span class="kw">;</span> <span class="bu">unset</span> <span class="st">&#39;a[-1]&#39;</span>; <span class="bu">declare</span> -p <span class="va">a</span>;</span>
<span id="cb373-8"><a href="#cb373-8" aria-hidden="true"></a></span>
<span id="cb373-9"><a href="#cb373-9" aria-hidden="true"></a><span class="co">## declare -a a=([0]=&quot;Paris&quot; [1]=&quot;France&quot; [2]=&quot;Europe&quot;)</span></span></code></pre></div>
</section>
<section id="answer-3-score-211" class="level4">
<h4>Answer 3 (score 211)</h4>
<p>Here is a way without setting IFS:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true"></a><span class="va">string=</span><span class="st">&quot;1:2:3:4:5&quot;</span></span>
<span id="cb374-2"><a href="#cb374-2" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-f</span></span>
<span id="cb374-3"><a href="#cb374-3" aria-hidden="true"></a><span class="co"># avoid globbing (expansion of *).</span></span>
<span id="cb374-4"><a href="#cb374-4" aria-hidden="true"></a><span class="va">array=(${string//</span>:<span class="va">/</span> <span class="va">})</span></span>
<span id="cb374-5"><a href="#cb374-5" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">${!array[@]}</span><span class="st">&quot;</span></span>
<span id="cb374-6"><a href="#cb374-6" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb374-7"><a href="#cb374-7" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$i</span><span class="st">=&gt;</span><span class="va">${array[i]}</span><span class="st">&quot;</span></span>
<span id="cb374-8"><a href="#cb374-8" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>The idea is using string replacement:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true"></a><span class="va">${string//</span>substring<span class="va">/</span>replacement<span class="va">}</span></span></code></pre></div>
<p>to replace all matches of $substring with white space and then using the substituted string to initialize a array:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true"></a><span class="kw">(</span><span class="ex">element1</span> element2 ... elementN<span class="kw">)</span></span></code></pre></div>
<p>Note: this answer makes use of the <a href="https://unix.stackexchange.com/q/108963/79743">split+glob operator</a>. Thus, to prevent expansion of some characters (such as <code>*</code>) it is a good idea to pause globbing for this script.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="comparing-numbers-in-bash-score-765855-in-2019" class="level3">
<h3>41: Comparing numbers in Bash (score <a href="https://stackoverflow.com/q/18668556.html">765855</a> in 2019)</h3>
<section id="question-40" class="level4">
<h4>Question</h4>
<p>I’m starting to learn about writing scripts for the bash terminal, but I can’t work out how to get the comparisons to work properly. The script I’m using is:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;enter two numbers&quot;</span><span class="kw">;</span></span>
<span id="cb377-2"><a href="#cb377-2" aria-hidden="true"></a><span class="bu">read</span> <span class="va">a</span> <span class="va">b</span>;</span>
<span id="cb377-3"><a href="#cb377-3" aria-hidden="true"></a></span>
<span id="cb377-4"><a href="#cb377-4" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;a=</span><span class="va">$a</span><span class="st">&quot;</span><span class="kw">;</span></span>
<span id="cb377-5"><a href="#cb377-5" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;b=</span><span class="va">$b</span><span class="st">&quot;</span><span class="kw">;</span></span>
<span id="cb377-6"><a href="#cb377-6" aria-hidden="true"></a></span>
<span id="cb377-7"><a href="#cb377-7" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$a</span> <span class="dt">\&gt;</span> <span class="va">$b</span><span class="bu"> ]</span>;</span>
<span id="cb377-8"><a href="#cb377-8" aria-hidden="true"></a><span class="kw">then</span> </span>
<span id="cb377-9"><a href="#cb377-9" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;a is greater than b&quot;</span><span class="kw">;</span></span>
<span id="cb377-10"><a href="#cb377-10" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb377-11"><a href="#cb377-11" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;b is greater than a&quot;</span><span class="kw">;</span></span>
<span id="cb377-12"><a href="#cb377-12" aria-hidden="true"></a><span class="kw">fi</span>;</span></code></pre></div>
<p>The problem is that it compares the number from the first digit on, i.e. 9 is bigger than 10, but 1 is greater than 09.</p>
<p>How can I convert the numbers into a type to do a true comparison?</p>
</section>
<section id="answer-accepted-score-759" class="level4">
<h4>Answer accepted (score 759)</h4>
<p>In bash, you should do your check in <a href="http://mywiki.wooledge.org/ArithmeticExpression">arithmetic context</a>:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">((</span> a &gt; b <span class="kw">))</span>; <span class="kw">then</span></span>
<span id="cb378-2"><a href="#cb378-2" aria-hidden="true"></a>    <span class="ex">...</span></span>
<span id="cb378-3"><a href="#cb378-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>For POSIX shells that don’t support <code>(())</code>, you can use <code>-lt</code> and <code>-gt</code>.</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="ot">-gt</span> <span class="st">&quot;</span><span class="va">$b</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb379-2"><a href="#cb379-2" aria-hidden="true"></a>    <span class="ex">...</span></span>
<span id="cb379-3"><a href="#cb379-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>You can get a full list of comparison operators with <code>help test</code>.</p>
</section>
<section id="answer-2-score-145" class="level4">
<h4>Answer 2 (score 145)</h4>
<p>Plain and simple</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true"></a></span>
<span id="cb380-2"><a href="#cb380-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb380-3"><a href="#cb380-3" aria-hidden="true"></a></span>
<span id="cb380-4"><a href="#cb380-4" aria-hidden="true"></a><span class="va">a=</span>2462620</span>
<span id="cb380-5"><a href="#cb380-5" aria-hidden="true"></a><span class="va">b=</span>2462620</span>
<span id="cb380-6"><a href="#cb380-6" aria-hidden="true"></a></span>
<span id="cb380-7"><a href="#cb380-7" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$a</span><span class="st">&quot;</span> <span class="ot">-eq</span> <span class="st">&quot;</span><span class="va">$b</span><span class="st">&quot;</span><span class="bu"> ]</span>;<span class="kw">then</span></span>
<span id="cb380-8"><a href="#cb380-8" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&quot;They&#39;re equal&quot;</span><span class="kw">;</span></span>
<span id="cb380-9"><a href="#cb380-9" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>You can check out <a href="https://devhints.io/bash" rel="noreferrer">this cheatsheet</a> if you want more number comparsions in the wonderful world of Bash Scripting.</p>
<p>Shortly, integers can only be compared with:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true"></a><span class="ex">-eq</span></span>
<span id="cb381-2"><a href="#cb381-2" aria-hidden="true"></a><span class="co"># equal</span></span>
<span id="cb381-3"><a href="#cb381-3" aria-hidden="true"></a><span class="ex">-ne</span></span>
<span id="cb381-4"><a href="#cb381-4" aria-hidden="true"></a><span class="co"># not equal</span></span>
<span id="cb381-5"><a href="#cb381-5" aria-hidden="true"></a><span class="ex">-lt</span></span>
<span id="cb381-6"><a href="#cb381-6" aria-hidden="true"></a><span class="co"># less than</span></span>
<span id="cb381-7"><a href="#cb381-7" aria-hidden="true"></a><span class="ex">-le</span></span>
<span id="cb381-8"><a href="#cb381-8" aria-hidden="true"></a><span class="co"># less than or equal</span></span>
<span id="cb381-9"><a href="#cb381-9" aria-hidden="true"></a><span class="ex">-gt</span></span>
<span id="cb381-10"><a href="#cb381-10" aria-hidden="true"></a><span class="co"># greater than</span></span>
<span id="cb381-11"><a href="#cb381-11" aria-hidden="true"></a><span class="ex">-ge</span></span>
<span id="cb381-12"><a href="#cb381-12" aria-hidden="true"></a><span class="co"># greater than or equal</span></span></code></pre></div>
</section>
<section id="answer-3-score-36" class="level4">
<h4>Answer 3 (score 36)</h4>
<p>There is also one nice thing some people might not know about:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$((</span> a &lt; b ? a : b <span class="va">))</span></span></code></pre></div>
<p>This code will print the smallest number out of <code>a</code> and <code>b</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="listing-only-directories-using-ls-in-bash-an-examination-score-761868-in-2015" class="level3">
<h3>42: Listing only directories using ls in bash: An examination (score <a href="https://stackoverflow.com/q/14352290.html">761868</a> in 2015)</h3>
<section id="question-41" class="level4">
<h4>Question</h4>
<p>This command lists directories in the current path: <code>ls -d */</code></p>
<p>What exactly does the pattern <code>*/</code> do?</p>
<p>And how can we give the absolute path in the above command (e.g. <code>ls -d /home/alice/Documents</code>) for listing only directories in that path?</p>
</section>
<section id="answer-accepted-score-914" class="level4">
<h4>Answer accepted (score 914)</h4>
<p><code>*/</code> is a pattern that matches all of the subdirectories in the current directory (<code>*</code> would match all files <em>and</em> subdirectories; the <code>/</code> restricts it to directories). Similarly, to list all subdirectories under /home/alice/Documents, use <code>ls -d /home/alice/Documents/*/</code></p>
</section>
<section id="answer-2-score-456" class="level4">
<h4>Answer 2 (score 456)</h4>
<h5>
Four ways to get this done, each with a different output format
</h2>
<h5>
<ol type="1">
<li>Using <code>echo</code>
</h3></li>
</ol>
<p>
Example: <code>echo */</code>, <code>echo */*/</code><br/> Here is what I got:
</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true"></a><span class="ex">cs/</span> draft/ files/ hacks/ masters/ static/  </span>
<span id="cb383-2"><a href="#cb383-2" aria-hidden="true"></a><span class="ex">cs/code/</span> files/images/ static/images/ static/stylesheets/  </span></code></pre></div>
<h5>
<ol start="2" type="1">
<li>Using <code>ls</code> only
</h3></li>
</ol>
<p>
Example: <code>ls -d */</code><br/> Here is exactly what I got:
</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true"></a><span class="ex">cs/</span>     files/      masters/  </span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true"></a><span class="ex">draft/</span>  hacks/      static/  </span></code></pre></div>
<p>Or as list (with detail info): <code>ls -dl */</code></p>
<h5>
<ol start="3" type="1">
<li>Using <code>ls</code> and <code>grep</code>
</h3></li>
</ol>
<p>
Example: <code>ls -l | grep "^d"</code> Here is what I got:
</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true"></a><span class="ex">drwxr-xr-x</span>  24 h  staff     816 Jun  8 10:55 cs  </span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true"></a><span class="ex">drwxr-xr-x</span>   6 h  staff     204 Jun  8 10:55 draft  </span>
<span id="cb385-3"><a href="#cb385-3" aria-hidden="true"></a><span class="ex">drwxr-xr-x</span>   9 h  staff     306 Jun  8 10:55 files  </span>
<span id="cb385-4"><a href="#cb385-4" aria-hidden="true"></a><span class="ex">drwxr-xr-x</span>   2 h  staff      68 Jun  9 13:19 hacks  </span>
<span id="cb385-5"><a href="#cb385-5" aria-hidden="true"></a><span class="ex">drwxr-xr-x</span>   6 h  staff     204 Jun  8 10:55 masters  </span>
<span id="cb385-6"><a href="#cb385-6" aria-hidden="true"></a><span class="ex">drwxr-xr-x</span>   4 h  staff     136 Jun  8 10:55 static  </span></code></pre></div>
<h5>
<ol start="4" type="1">
<li>Bash Script (Not recommended for filename containing spaces)
</h3></li>
</ol>
<p>
Example: <code>for i in $(ls -d */); do echo ${i%%/}; done</code><br/> Here is what I got:
</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true"></a><span class="ex">cs</span>  </span>
<span id="cb386-2"><a href="#cb386-2" aria-hidden="true"></a><span class="ex">draft</span>  </span>
<span id="cb386-3"><a href="#cb386-3" aria-hidden="true"></a><span class="ex">files</span>  </span>
<span id="cb386-4"><a href="#cb386-4" aria-hidden="true"></a><span class="ex">hacks</span>  </span>
<span id="cb386-5"><a href="#cb386-5" aria-hidden="true"></a><span class="ex">masters</span>  </span>
<span id="cb386-6"><a href="#cb386-6" aria-hidden="true"></a><span class="ex">static</span></span></code></pre></div>
<p>If you like to have ‘/’ as ending character, the command will be: <code>for i in $(ls -d */); do echo ${i}; done</code></p>
<div class="sourceCode" id="cb387"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true"></a><span class="ex">cs/</span>  </span>
<span id="cb387-2"><a href="#cb387-2" aria-hidden="true"></a><span class="ex">draft/</span>  </span>
<span id="cb387-3"><a href="#cb387-3" aria-hidden="true"></a><span class="ex">files/</span>  </span>
<span id="cb387-4"><a href="#cb387-4" aria-hidden="true"></a><span class="ex">hacks/</span>  </span>
<span id="cb387-5"><a href="#cb387-5" aria-hidden="true"></a><span class="ex">masters/</span>  </span>
<span id="cb387-6"><a href="#cb387-6" aria-hidden="true"></a><span class="ex">static/</span></span></code></pre></div>
</section>
<section id="answer-3-score-90" class="level4">
<h4>Answer 3 (score 90)</h4>
<p>I use:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true"></a><span class="fu">ls</span> -d */ <span class="kw">|</span> <span class="fu">cut</span> -f1 -d<span class="st">&#39;/&#39;</span></span></code></pre></div>
<p>This creates a single column with no trailing slash - useful in scripts.</p>
<p>My two cents.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-represent-multiple-conditions-in-a-shell-if-statement-score-751876-in-2017" class="level3">
<h3>43: How to represent multiple conditions in a shell if statement? (score <a href="https://stackoverflow.com/q/3826425.html">751876</a> in 2017)</h3>
<section id="question-42" class="level4">
<h4>Question</h4>
<p>I want to represent multiple conditions like this:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> ( <span class="va">$g</span> -eq 1 -a <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> = <span class="st">&quot;123&quot;</span> ) <span class="ot">-o</span> ( <span class="va">$g</span> -eq 2 -a <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> = <span class="st">&quot;456&quot;</span> )<span class="bu"> ]</span>   </span>
<span id="cb389-2"><a href="#cb389-2" aria-hidden="true"></a><span class="kw">then</span>  </span>
<span id="cb389-3"><a href="#cb389-3" aria-hidden="true"></a>    <span class="bu">echo</span> abc<span class="kw">;</span>  </span>
<span id="cb389-4"><a href="#cb389-4" aria-hidden="true"></a><span class="kw">else</span>  </span>
<span id="cb389-5"><a href="#cb389-5" aria-hidden="true"></a>    <span class="bu">echo</span> efg<span class="kw">;</span>   </span>
<span id="cb389-6"><a href="#cb389-6" aria-hidden="true"></a><span class="kw">fi</span>  </span></code></pre></div>
<p>but when I execute the script, it shows</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true"></a><span class="ex">syntax</span> error at line 15: <span class="kw">`</span>[<span class="st">&#39; unexpected, </span></span></code></pre></div>
<p>where line 15 is the one showing if ….</p>
<p>What is wrong with this condition? I guess something is wrong with the <code>()</code>.</p>
</section>
<section id="answer-accepted-score-351" class="level4">
<h4>Answer accepted (score 351)</h4>
<p>Classic technique (escape metacharacters):</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="dt">\(</span> <span class="st">&quot;</span><span class="va">$g</span><span class="st">&quot;</span> <span class="ot">-eq</span> 1 <span class="ot">-a</span> <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;123&quot;</span> <span class="dt">\)</span> <span class="ot">-o</span> <span class="dt">\(</span> <span class="st">&quot;</span><span class="va">$g</span><span class="st">&quot;</span> <span class="ot">-eq</span> 2 <span class="ot">-a</span> <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;456&quot;</span> <span class="dt">\)</span><span class="bu"> ]</span></span>
<span id="cb391-2"><a href="#cb391-2" aria-hidden="true"></a><span class="kw">then</span> <span class="bu">echo</span> abc</span>
<span id="cb391-3"><a href="#cb391-3" aria-hidden="true"></a><span class="kw">else</span> <span class="bu">echo</span> efg</span>
<span id="cb391-4"><a href="#cb391-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>I’ve enclosed the references to <code>$g</code> in double quotes; that’s good practice, in general. Strictly, the parentheses aren’t needed because the precedence of <code>-a</code> and <code>-o</code> makes it correct even without them.</p>
<p>Note that the <code>-a</code> and <code>-o</code> operators are part of the POSIX specification for <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/test.html" rel="noreferrer"><code>test</code></a>, aka <code>[</code>, mainly for backwards compatibility (since they were a part of <code>test</code> in 7th Edition UNIX, for example), but they are explicitly marked as ‘obsolescent’ by POSIX. Bash (see <a href="http://www.gnu.org/software/bash/manual/bash.html
#Bash-Conditional-Expressions" rel="noreferrer">conditional expressions</a>) seems to preempt the classic and POSIX meanings for <code>-a</code> and <code>-o</code> with its own alternative operators that take arguments.</p>
<hr>
<p>With some care, you can use the more modern <code>[[</code> operator, but be aware that the versions in Bash and Korn Shell (for example) need not be identical.</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">g</span> in 1 2 3</span>
<span id="cb392-2"><a href="#cb392-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb392-3"><a href="#cb392-3" aria-hidden="true"></a>    <span class="kw">for</span> <span class="ex">c</span> in 123 456 789</span>
<span id="cb392-4"><a href="#cb392-4" aria-hidden="true"></a>    <span class="kw">do</span></span>
<span id="cb392-5"><a href="#cb392-5" aria-hidden="true"></a>        <span class="kw">if [[</span> ( <span class="st">&quot;</span><span class="va">$g</span><span class="st">&quot;</span> -eq 1 &amp;&amp; <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> = <span class="st">&quot;123&quot;</span> ) || ( <span class="st">&quot;</span><span class="va">$g</span><span class="st">&quot;</span> -eq 2 &amp;&amp; <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> = <span class="st">&quot;456&quot;</span> )<span class="kw"> ]]</span></span>
<span id="cb392-6"><a href="#cb392-6" aria-hidden="true"></a>        <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;g = </span><span class="va">$g</span><span class="st">; c = </span><span class="va">$c</span><span class="st">; true&quot;</span></span>
<span id="cb392-7"><a href="#cb392-7" aria-hidden="true"></a>        <span class="kw">else</span> <span class="bu">echo</span> <span class="st">&quot;g = </span><span class="va">$g</span><span class="st">; c = </span><span class="va">$c</span><span class="st">; false&quot;</span></span>
<span id="cb392-8"><a href="#cb392-8" aria-hidden="true"></a>        <span class="kw">fi</span></span>
<span id="cb392-9"><a href="#cb392-9" aria-hidden="true"></a>    <span class="kw">done</span></span>
<span id="cb392-10"><a href="#cb392-10" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>Example run, using Bash 3.2.57 on Mac OS X:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true"></a><span class="ex">g</span> = 1<span class="kw">;</span> <span class="ex">c</span> = 123<span class="kw">;</span> <span class="fu">true</span></span>
<span id="cb393-2"><a href="#cb393-2" aria-hidden="true"></a><span class="ex">g</span> = 1<span class="kw">;</span> <span class="ex">c</span> = 456<span class="kw">;</span> <span class="fu">false</span></span>
<span id="cb393-3"><a href="#cb393-3" aria-hidden="true"></a><span class="ex">g</span> = 1<span class="kw">;</span> <span class="ex">c</span> = 789<span class="kw">;</span> <span class="fu">false</span></span>
<span id="cb393-4"><a href="#cb393-4" aria-hidden="true"></a><span class="ex">g</span> = 2<span class="kw">;</span> <span class="ex">c</span> = 123<span class="kw">;</span> <span class="fu">false</span></span>
<span id="cb393-5"><a href="#cb393-5" aria-hidden="true"></a><span class="ex">g</span> = 2<span class="kw">;</span> <span class="ex">c</span> = 456<span class="kw">;</span> <span class="fu">true</span></span>
<span id="cb393-6"><a href="#cb393-6" aria-hidden="true"></a><span class="ex">g</span> = 2<span class="kw">;</span> <span class="ex">c</span> = 789<span class="kw">;</span> <span class="fu">false</span></span>
<span id="cb393-7"><a href="#cb393-7" aria-hidden="true"></a><span class="ex">g</span> = 3<span class="kw">;</span> <span class="ex">c</span> = 123<span class="kw">;</span> <span class="fu">false</span></span>
<span id="cb393-8"><a href="#cb393-8" aria-hidden="true"></a><span class="ex">g</span> = 3<span class="kw">;</span> <span class="ex">c</span> = 456<span class="kw">;</span> <span class="fu">false</span></span>
<span id="cb393-9"><a href="#cb393-9" aria-hidden="true"></a><span class="ex">g</span> = 3<span class="kw">;</span> <span class="ex">c</span> = 789<span class="kw">;</span> <span class="fu">false</span></span></code></pre></div>
<p>You don’t need to quote the variables in <code>[[</code> as you do with <code>[</code> because it is not a separate command in the same way that <code>[</code> is.</p>
<hr>
<blockquote>
Isn’t it a classic question?
</blockquote>
<p>I would have thought so. However, there is another alternative, namely:</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$g</span><span class="st">&quot;</span> <span class="ot">-eq</span> 1 <span class="ot">-a</span> <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;123&quot;</span><span class="bu"> ]</span> <span class="kw">||</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$g</span><span class="st">&quot;</span> <span class="ot">-eq</span> 2 <span class="ot">-a</span> <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;456&quot;</span><span class="bu"> ]</span></span>
<span id="cb394-2"><a href="#cb394-2" aria-hidden="true"></a><span class="kw">then</span> <span class="bu">echo</span> abc</span>
<span id="cb394-3"><a href="#cb394-3" aria-hidden="true"></a><span class="kw">else</span> <span class="bu">echo</span> efg</span>
<span id="cb394-4"><a href="#cb394-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Indeed, if you read the ‘portable shell’ guidelines for the <code>autoconf</code> tool or related packages, this notation — using ‘<code>||</code>’ and ‘<code>&amp;amp;&amp;amp;</code>’ — is what they recommend. I suppose you could even go so far as:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb395-1"><a href="#cb395-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$g</span><span class="st">&quot;</span> <span class="ot">-eq</span> 1<span class="bu"> ]</span> <span class="kw">&amp;&amp;</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;123&quot;</span><span class="bu"> ]</span></span>
<span id="cb395-2"><a href="#cb395-2" aria-hidden="true"></a><span class="kw">then</span> <span class="bu">echo</span> abc</span>
<span id="cb395-3"><a href="#cb395-3" aria-hidden="true"></a><span class="kw">elif</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$g</span><span class="st">&quot;</span> <span class="ot">-eq</span> 2<span class="bu"> ]</span> <span class="kw">&amp;&amp;</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$c</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;456&quot;</span><span class="bu"> ]</span></span>
<span id="cb395-4"><a href="#cb395-4" aria-hidden="true"></a><span class="kw">then</span> <span class="bu">echo</span> abc</span>
<span id="cb395-5"><a href="#cb395-5" aria-hidden="true"></a><span class="kw">else</span> <span class="bu">echo</span> efg</span>
<span id="cb395-6"><a href="#cb395-6" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Where the actions are as trivial as echoing, this isn’t bad. When the action block to be repeated is multiple lines, the repetition is too painful and one of the earlier versions is preferable — or you need to wrap the actions into a function that is invoked in the different <code>then</code> blocks.</p>
</section>
<section id="answer-2-score-174" class="level4">
<h4>Answer 2 (score 174)</h4>
<p>In Bash:</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true"></a><span class="kw">if [[</span> ( <span class="va">$g</span> == 1 &amp;&amp; <span class="va">$c</span> == 123 ) || ( <span class="va">$g</span> == 2 &amp;&amp; <span class="va">$c</span> == 456 )<span class="kw"> ]]</span></span></code></pre></div>
</section>
<section id="answer-3-score-30" class="level4">
<h4>Answer 3 (score 30)</h4>
<p>Using <code>/bin/bash</code> the following will work:</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$option</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;Y&quot;</span><span class="bu"> ]</span> <span class="kw">||</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$option</span><span class="st">&quot;</span> <span class="ot">=</span> <span class="st">&quot;y&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb397-2"><a href="#cb397-2" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Entered </span><span class="va">$option</span><span class="st">&quot;</span></span>
<span id="cb397-3"><a href="#cb397-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-count-all-the-lines-of-code-in-a-directory-recursively-score-718292-in-2012" class="level3">
<h3>44: How to count all the lines of code in a directory recursively? (score <a href="https://stackoverflow.com/q/1358540.html">718292</a> in 2012)</h3>
<section id="question-43" class="level4">
<h4>Question</h4>
<p>We’ve got a PHP application and want to count all the lines of code under a specific directory and its subdirectories. We don’t need to ignore comments, as we’re just trying to get a rough idea.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true"></a><span class="fu">wc</span> -l *.php </span></code></pre></div>
<p>That command works great within a given directory, but ignores subdirectories. I was thinking this might work, but it is returning 74, which is definitely not the case…</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true"></a><span class="fu">find</span> . -name <span class="st">&#39;*.php&#39;</span> <span class="kw">|</span> <span class="fu">wc</span> -l</span></code></pre></div>
<p>What’s the correct syntax to feed in all the files?</p>
</section>
<section id="answer-accepted-score-2494" class="level4">
<h4>Answer accepted (score 2494)</h4>
<p><strong>Try:</strong></p>
<div class="sourceCode" id="cb400"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true"></a><span class="fu">find</span> . -name <span class="st">&#39;*.php&#39;</span> <span class="kw">|</span> <span class="fu">xargs</span> wc -l</span></code></pre></div>
<p><strong><a href="http://www.dwheeler.com/sloccount/" rel="noreferrer">The SLOCCount tool</a></strong> may help as well.</p>
<p>
It’ll give an accurate source lines of code count for whatever hierarchy you point it at, as well as some additional stats.
</p>
<p><strong>Sorted output:</strong> <code>find . -name '*.php' | xargs wc -l | sort -nr</code></p>
</section>
<section id="answer-2-score-450" class="level4">
<h4>Answer 2 (score 450)</h4>
<p>For another one-liner:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true"></a><span class="kw">(</span> <span class="fu">find</span> ./ -name <span class="st">&#39;*.php&#39;</span> -print0 <span class="kw">|</span> <span class="fu">xargs</span> -0 cat <span class="kw">)</span> <span class="kw">|</span> <span class="fu">wc</span> -l</span></code></pre></div>
<p>works on names with spaces, only outputs one number.</p>
</section>
<section id="answer-3-score-383" class="level4">
<h4>Answer 3 (score 383)</h4>
<p>If using a decently recent version of Bash (or ZSH), it’s much simpler:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true"></a><span class="fu">wc</span> -l **/*.php</span></code></pre></div>
<p>In the Bash shell this requires the <code>globstar</code> option to be set, otherwise the <code>**</code> glob-operator is not recursive. To enable this setting, issue</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true"></a><span class="bu">shopt</span> -s globstar</span></code></pre></div>
<p>To make this permanent, add it to one of the initialization files (<code>~/.bashrc</code>, <code>~/.bash_profile</code> etc.).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="replace-one-substring-for-another-string-in-shell-script-score-712335-in-2015" class="level3">
<h3>45: Replace one substring for another string in shell script (score <a href="https://stackoverflow.com/q/13210880.html">712335</a> in 2015)</h3>
<section id="question-44" class="level4">
<h4>Question</h4>
<p>I have “I love Suzi and Marry” and I want to change “Suzi” to “Sara”.</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true"></a></span>
<span id="cb404-2"><a href="#cb404-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb404-3"><a href="#cb404-3" aria-hidden="true"></a><span class="va">firstString=</span><span class="st">&quot;I love Suzi and Marry&quot;</span></span>
<span id="cb404-4"><a href="#cb404-4" aria-hidden="true"></a><span class="va">secondString=</span><span class="st">&quot;Sara&quot;</span></span>
<span id="cb404-5"><a href="#cb404-5" aria-hidden="true"></a></span>
<span id="cb404-6"><a href="#cb404-6" aria-hidden="true"></a><span class="co"># do something...</span></span></code></pre></div>
<p>The result must be like this:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true"></a><span class="va">firstString=</span><span class="st">&quot;I love Sara and Marry&quot;</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-1112" class="level4">
<h4>Answer accepted (score 1112)</h4>
<p>To replace the <em>first</em> occurrence of a pattern with a given string, use <code>${&lt;em&gt;parameter&lt;/em&gt;/&lt;em&gt;pattern&lt;/em&gt;/&lt;em&gt;string&lt;/em&gt;}</code>:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true"></a></span>
<span id="cb406-2"><a href="#cb406-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb406-3"><a href="#cb406-3" aria-hidden="true"></a><span class="va">firstString=</span><span class="st">&quot;I love Suzi and Marry&quot;</span></span>
<span id="cb406-4"><a href="#cb406-4" aria-hidden="true"></a><span class="va">secondString=</span><span class="st">&quot;Sara&quot;</span></span>
<span id="cb406-5"><a href="#cb406-5" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${firstString/</span>Suzi<span class="va">/$secondString}</span><span class="st">&quot;</span>    </span>
<span id="cb406-6"><a href="#cb406-6" aria-hidden="true"></a></span>
<span id="cb406-7"><a href="#cb406-7" aria-hidden="true"></a><span class="co"># prints &#39;I love Sara and Marry&#39;</span></span></code></pre></div>
<p>To replace <em>all</em> occurrences, use <code>${&lt;em&gt;parameter&lt;/em&gt;//&lt;em&gt;pattern&lt;/em&gt;/&lt;em&gt;string&lt;/em&gt;}</code>:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true"></a><span class="va">message=</span><span class="st">&#39;The secret code is 12345&#39;</span></span>
<span id="cb407-2"><a href="#cb407-2" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${message//</span>[0-9]<span class="va">/</span>X<span class="va">}</span><span class="st">&quot;</span>           </span>
<span id="cb407-3"><a href="#cb407-3" aria-hidden="true"></a></span>
<span id="cb407-4"><a href="#cb407-4" aria-hidden="true"></a><span class="co"># prints &#39;The secret code is XXXXX&#39;</span></span></code></pre></div>
<p>(This is documented in <a href="https://www.gnu.org/software/bash/manual/bash.html
#Shell-Parameter-Expansion" rel="noreferrer">the <em>Bash Reference Manual</em>, §3.5.3 “Shell Parameter Expansion”</a>.)</p>
<p>Note that this feature is not specified by POSIX — it’s a Bash extension — so not all Unix shells implement it. For the relevant POSIX documentation, see <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html
#tag_18_06_02" rel="noreferrer"><em>The Open Group Technical Standard Base Specifications, Issue 7</em>, the <em>Shell &amp; Utilities</em> volume, §2.6.2 “Parameter Expansion”</a>.</p>
</section>
<section id="answer-2-score-176" class="level4">
<h4>Answer 2 (score 176)</h4>
<p>This can be done entirely with bash string manipulation:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true"></a><span class="va">first=</span><span class="st">&quot;I love Suzy and Mary&quot;</span></span>
<span id="cb408-2"><a href="#cb408-2" aria-hidden="true"></a><span class="va">second=</span><span class="st">&quot;Sara&quot;</span></span>
<span id="cb408-3"><a href="#cb408-3" aria-hidden="true"></a><span class="va">first=${first/</span>Suzy<span class="va">/$second}</span></span></code></pre></div>
<p>That will replace only the first occurrence; to replace them all, double the first slash:</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true"></a><span class="va">first=</span><span class="st">&quot;Suzy, Suzy, Suzy&quot;</span></span>
<span id="cb409-2"><a href="#cb409-2" aria-hidden="true"></a><span class="va">second=</span><span class="st">&quot;Sara&quot;</span></span>
<span id="cb409-3"><a href="#cb409-3" aria-hidden="true"></a><span class="va">first=${first//</span>Suzy<span class="va">/$second}</span></span>
<span id="cb409-4"><a href="#cb409-4" aria-hidden="true"></a></span>
<span id="cb409-5"><a href="#cb409-5" aria-hidden="true"></a><span class="co"># first is now &quot;Sara, Sara, Sara&quot;</span></span></code></pre></div>
</section>
<section id="answer-3-score-60" class="level4">
<h4>Answer 3 (score 60)</h4>
<p>try this:</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true"></a> <span class="fu">sed</span> <span class="st">&quot;s/Suzi/</span><span class="va">$secondString</span><span class="st">/g&quot;</span> <span class="op">&lt;&lt;&lt;</span><span class="st">&quot;</span><span class="va">$firstString</span><span class="st">&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="setting-environment-variables-on-os-x-score-696397-in-2018" class="level3">
<h3>46: Setting environment variables on OS X (score <a href="https://stackoverflow.com/q/135688.html">696397</a> in 2018)</h3>
<section id="question-45" class="level4">
<h4>Question</h4>
<p>What is the proper way to modify environment variables like PATH in OS X?</p>
<p>I’ve looked on Google a little bit and found three different files to edit:</p>
<ul>
<li>
/etc/paths
</li>
<li>
~/.profile
</li>
<li>
~/.tcshrc
</li>
</ul>
<p>I don’t even have some of these files, and I’m pretty sure that <em>.tcshrc</em> is wrong, since OS X uses bash now. Where are these variables, especially PATH, defined?</p>
<p>I’m running <a href="http://en.wikipedia.org/wiki/Mac_OS_X_Leopard" rel="noreferrer">OS X v10.5</a> (Leopard).</p>
</section>
<section id="answer-2-score-644" class="level4">
<h4>Answer 2 (score 644)</h4>
<p>Bruno is right on track. I’ve done extensive research and if you want to set variables that are available in all GUI applications, your only option is <code>/etc/launchd.conf</code>.</p>
<p>Please note that <a href="https://web.archive.org/web/20100212232552/https://www.digitaledgesw.com/node/31" rel="noreferrer">environment.plist does not work for applications launched via Spotlight. This is documented by Steve Sexton here</a>.</p>
<ol>
<li>
<p>
Open a terminal prompt
</p>
</li>
<li>
<p>
Type <code>sudo vi /etc/launchd.conf</code> (note: this file might not yet exist)
</p>
</li>
<li>
<p>
Put contents like the following into the file
</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true"></a></span>
<span id="cb411-2"><a href="#cb411-2" aria-hidden="true"></a><span class="co"># Set environment variables here so they are available globally to all apps</span></span>
<span id="cb411-3"><a href="#cb411-3" aria-hidden="true"></a></span>
<span id="cb411-4"><a href="#cb411-4" aria-hidden="true"></a><span class="co"># (and Terminal), including those launched via Spotlight.</span></span>
<span id="cb411-5"><a href="#cb411-5" aria-hidden="true"></a></span>
<span id="cb411-6"><a href="#cb411-6" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb411-7"><a href="#cb411-7" aria-hidden="true"></a></span>
<span id="cb411-8"><a href="#cb411-8" aria-hidden="true"></a><span class="co"># After editing this file run the following command from the terminal to update</span></span>
<span id="cb411-9"><a href="#cb411-9" aria-hidden="true"></a></span>
<span id="cb411-10"><a href="#cb411-10" aria-hidden="true"></a><span class="co"># environment variables globally without needing to reboot.</span></span>
<span id="cb411-11"><a href="#cb411-11" aria-hidden="true"></a></span>
<span id="cb411-12"><a href="#cb411-12" aria-hidden="true"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: You will still need to restart the relevant application (including</span></span>
<span id="cb411-13"><a href="#cb411-13" aria-hidden="true"></a></span>
<span id="cb411-14"><a href="#cb411-14" aria-hidden="true"></a><span class="co"># Terminal) to pick up the changes!</span></span>
<span id="cb411-15"><a href="#cb411-15" aria-hidden="true"></a></span>
<span id="cb411-16"><a href="#cb411-16" aria-hidden="true"></a><span class="co"># grep -E &quot;^setenv&quot; /etc/launchd.conf | xargs -t -L 1 launchctl</span></span>
<span id="cb411-17"><a href="#cb411-17" aria-hidden="true"></a></span>
<span id="cb411-18"><a href="#cb411-18" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb411-19"><a href="#cb411-19" aria-hidden="true"></a></span>
<span id="cb411-20"><a href="#cb411-20" aria-hidden="true"></a><span class="co"># See http://www.digitaledgesw.com/node/31</span></span>
<span id="cb411-21"><a href="#cb411-21" aria-hidden="true"></a></span>
<span id="cb411-22"><a href="#cb411-22" aria-hidden="true"></a><span class="co"># and http://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x/</span></span>
<span id="cb411-23"><a href="#cb411-23" aria-hidden="true"></a></span>
<span id="cb411-24"><a href="#cb411-24" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb411-25"><a href="#cb411-25" aria-hidden="true"></a></span>
<span id="cb411-26"><a href="#cb411-26" aria-hidden="true"></a><span class="co"># Note that you must hardcode the paths below, don&#39;t use environment variables.</span></span>
<span id="cb411-27"><a href="#cb411-27" aria-hidden="true"></a></span>
<span id="cb411-28"><a href="#cb411-28" aria-hidden="true"></a><span class="co"># You also need to surround multiple values in quotes, see MAVEN_OPTS example below.</span></span>
<span id="cb411-29"><a href="#cb411-29" aria-hidden="true"></a></span>
<span id="cb411-30"><a href="#cb411-30" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb411-31"><a href="#cb411-31" aria-hidden="true"></a><span class="ex">setenv</span> JAVA_VERSION 1.6</span>
<span id="cb411-32"><a href="#cb411-32" aria-hidden="true"></a><span class="ex">setenv</span> JAVA_HOME /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home</span>
<span id="cb411-33"><a href="#cb411-33" aria-hidden="true"></a><span class="ex">setenv</span> GROOVY_HOME /Applications/Dev/groovy</span>
<span id="cb411-34"><a href="#cb411-34" aria-hidden="true"></a><span class="ex">setenv</span> GRAILS_HOME /Applications/Dev/grails</span>
<span id="cb411-35"><a href="#cb411-35" aria-hidden="true"></a><span class="ex">setenv</span> NEXUS_HOME /Applications/Dev/nexus/nexus-webapp</span>
<span id="cb411-36"><a href="#cb411-36" aria-hidden="true"></a><span class="ex">setenv</span> JRUBY_HOME /Applications/Dev/jruby</span>
<span id="cb411-37"><a href="#cb411-37" aria-hidden="true"></a></span>
<span id="cb411-38"><a href="#cb411-38" aria-hidden="true"></a><span class="ex">setenv</span> ANT_HOME /Applications/Dev/apache-ant</span>
<span id="cb411-39"><a href="#cb411-39" aria-hidden="true"></a><span class="ex">setenv</span> ANT_OPTS -Xmx512M</span>
<span id="cb411-40"><a href="#cb411-40" aria-hidden="true"></a></span>
<span id="cb411-41"><a href="#cb411-41" aria-hidden="true"></a><span class="ex">setenv</span> MAVEN_OPTS <span class="st">&quot;-Xmx1024M -XX:MaxPermSize=512m&quot;</span></span>
<span id="cb411-42"><a href="#cb411-42" aria-hidden="true"></a><span class="ex">setenv</span> M2_HOME /Applications/Dev/apache-maven</span>
<span id="cb411-43"><a href="#cb411-43" aria-hidden="true"></a></span>
<span id="cb411-44"><a href="#cb411-44" aria-hidden="true"></a><span class="ex">setenv</span> JMETER_HOME /Applications/Dev/jakarta-jmeter</span>
<span id="cb411-45"><a href="#cb411-45" aria-hidden="true"></a><span class="kw">```</span><span class="op">&lt;</span>/<span class="ex">li</span><span class="op">&gt;</span></span>
<span id="cb411-46"><a href="#cb411-46" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">li</span><span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Save your changes in vi and reboot your Mac. Or use the <span class="op">&lt;</span>a href=<span class="st">&quot;http://linux.die.net/man/1/grep&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span><span class="op">&gt;</span><span class="kw">`</span><span class="fu">grep</span><span class="kw">`</span><span class="op">&lt;</span>/<span class="ex">a</span><span class="op">&gt;</span>/<span class="op">&lt;</span>a href=<span class="st">&quot;https://linux.die.net/man/1/xargs&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span><span class="op">&gt;</span><span class="kw">`</span>xargs<span class="kw">`</span><span class="op">&lt;</span>/<span class="ex">a</span><span class="op">&gt;</span> command which is shown in the code comment above.<span class="op">&lt;</span>/p<span class="op">&gt;&lt;</span>/li<span class="op">&gt;</span></span>
<span id="cb411-47"><a href="#cb411-47" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">li</span><span class="op">&gt;&lt;</span>p<span class="op">&gt;</span>Prove that your variables are working by opening a Terminal window and typing <span class="kw">`</span>export<span class="kw">`</span> <span class="ex">and</span> you should see your new variables.  These will also be available in IntelliJ IDEA and other GUI applications you launch via Spotlight.<span class="op">&lt;</span>/p<span class="op">&gt;&lt;</span>/li<span class="op">&gt;</span></span>
<span id="cb411-48"><a href="#cb411-48" aria-hidden="true"></a><span class="op">&lt;</span>/<span class="ex">ol</span><span class="op">&gt;</span></span>
<span id="cb411-49"><a href="#cb411-49" aria-hidden="true"></a></span>
<span id="cb411-50"><a href="#cb411-50" aria-hidden="true"></a></span>
<span id="cb411-51"><a href="#cb411-51" aria-hidden="true"></a><span class="co">#### Answer 3 (score 256)</span></span>
<span id="cb411-52"><a href="#cb411-52" aria-hidden="true"></a><span class="op">&lt;</span><span class="ex">h5</span><span class="op">&gt;</span>How to set the environment for new processes started by Spotlight (without needing to reboot)<span class="op">&lt;</span>/<span class="ex">h1</span><span class="op">&gt;</span></span>
<span id="cb411-53"><a href="#cb411-53" aria-hidden="true"></a></span>
<span id="cb411-54"><a href="#cb411-54" aria-hidden="true"></a><span class="ex">You</span> can set the environment used by launchd (and, by extension, anything started from Spotlight) <span class="ex">with</span> <span class="kw">`</span>launchctl setenv<span class="kw">`</span><span class="bu">.</span> <span class="ex">For</span> example to set the path:  </span>
<span id="cb411-55"><a href="#cb411-55" aria-hidden="true"></a></span>
<span id="cb411-56"><a href="#cb411-56" aria-hidden="true"></a><span class="kw">```</span>sh</span>
<span id="cb411-57"><a href="#cb411-57" aria-hidden="true"></a><span class="ex">launchctl</span> setenv PATH /opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin</span></code></pre></div>
<p>Or if you want to set up your path in <code>.bashrc</code> or similar, then have it mirrored in launchd:</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true"></a><span class="va">PATH=</span>/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin</span>
<span id="cb412-2"><a href="#cb412-2" aria-hidden="true"></a><span class="ex">launchctl</span> setenv PATH <span class="va">$PATH</span></span></code></pre></div>
<p><strong>There’s no need to reboot</strong> though you will need to restart an app if you want it to pick up the changed environment.</p>
<p>This includes any shells already running under Terminal.app, although if you’re there you can set the environment more directly, e.g. with <code>export PATH=/opt/local/bin:/opt/local/sbin:$PATH</code> for bash or zsh.</p>
<h5>
How to keeping changes after a reboot
</h1>
<p>To <strong>keep changes after a reboot</strong> you can set the environment variables from <code>/etc/launchd.conf</code>, like so:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true"></a><span class="ex">setenv</span> PATH /opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin</span></code></pre></div>
<p><code>launchd.conf</code> is executed automatically when you reboot.</p>
<p>If you want these changes to take effect now, you should use this command to reprocess <code>launchctl.conf</code> (thanks <span class="citation" data-cites="mklement">@mklement</span> for the tip!)</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true"></a><span class="fu">egrep</span> -v <span class="st">&#39;^\s*</span></span>
<span id="cb414-2"><a href="#cb414-2" aria-hidden="true"></a><span class="st">#&#39;</span> /etc/launchd.conf <span class="kw">|</span> <span class="ex">launchctl</span></span></code></pre></div>
<p>You can find out more about <code>launchctl</code> and how it loads <code>launchd.conf</code> with the command <code>man launchctl</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-number-of-arguments-passed-to-a-bash-script-score-696353-in-2019" class="level3">
<h3>47: Check number of arguments passed to a Bash script (score <a href="https://stackoverflow.com/q/18568706.html">696353</a> in 2019)</h3>
<section id="question-46" class="level4">
<h4>Question</h4>
<p>I would like my Bash script to print an error message if the required argument count is not met.</p>
<p>I tried the following code:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true"></a></span>
<span id="cb415-2"><a href="#cb415-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb415-3"><a href="#cb415-3" aria-hidden="true"></a><span class="bu">echo</span> Script name: <span class="va">$0</span></span>
<span id="cb415-4"><a href="#cb415-4" aria-hidden="true"></a><span class="bu">echo</span> $</span>
<span id="cb415-5"><a href="#cb415-5" aria-hidden="true"></a><span class="co"># arguments </span></span>
<span id="cb415-6"><a href="#cb415-6" aria-hidden="true"></a><span class="kw">if</span> [$</span>
<span id="cb415-7"><a href="#cb415-7" aria-hidden="true"></a><span class="co"># -ne 1]; </span></span>
<span id="cb415-8"><a href="#cb415-8" aria-hidden="true"></a>    <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;illegal number of parameters&quot;</span></span>
<span id="cb415-9"><a href="#cb415-9" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>For some unknown reason I’ve got the following error:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true"></a><span class="ex">test</span>: line 4: [2: command not found</span></code></pre></div>
<p>What am I doing wrong?</p>
</section>
<section id="answer-accepted-score-973" class="level4">
<h4>Answer accepted (score 973)</h4>
<p>Just like any other simple command, <code>[ ... ]</code> or <code>test</code> requires spaces between its arguments.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;$</span></span>
<span id="cb417-2"><a href="#cb417-2" aria-hidden="true"></a><span class="st">#&quot;</span> <span class="ot">-ne</span> 1<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb417-3"><a href="#cb417-3" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Illegal number of parameters&quot;</span></span>
<span id="cb417-4"><a href="#cb417-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Or</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true"></a><span class="kw">if</span> <span class="bu">test</span> <span class="st">&quot;$</span></span>
<span id="cb418-2"><a href="#cb418-2" aria-hidden="true"></a><span class="st">#&quot;</span> -ne 1<span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb418-3"><a href="#cb418-3" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Illegal number of parameters&quot;</span></span>
<span id="cb418-4"><a href="#cb418-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<h5>
Suggestions
</h3>
<p>When in Bash, prefer using <code>[[ ]]</code> instead as it doesn’t do word splitting and pathname expansion to its variables that quoting may not be necessary unless it’s part of an expression.</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true"></a><span class="kw">[[</span> $</span>
<span id="cb419-2"><a href="#cb419-2" aria-hidden="true"></a><span class="co"># -ne 1 ]]</span></span></code></pre></div>
<p>It also has some other features like unquoted condition grouping, pattern matching (extended pattern matching with <code>extglob</code>) and regex matching.</p>
<p>The following example checks if arguments are valid. It allows a single argument or two.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true"></a><span class="kw">[[</span> ($</span>
<span id="cb420-2"><a href="#cb420-2" aria-hidden="true"></a><span class="co"># -eq 1 || ($# -eq 2 &amp;&amp; $2 == &lt;glob pattern&gt;)) &amp;&amp; $1 =~ &lt;regex pattern&gt; ]]</span></span></code></pre></div>
<p>For pure arithmetic expressions, using <code>(( ))</code> to some may still be better, but they are still possible in <code>[[ ]]</code> with its arithmetic operators like <code>-eq</code>, <code>-ne</code>, <code>-lt</code>, <code>-le</code>, <code>-gt</code>, or <code>-ge</code> by placing the expression as a single string argument:</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true"></a><span class="va">A=</span>1</span>
<span id="cb421-2"><a href="#cb421-2" aria-hidden="true"></a><span class="kw">[[</span> <span class="st">&#39;A + 1&#39;</span> <span class="ot">-eq</span> 2<span class="kw"> ]]</span> <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> true</span>
<span id="cb421-3"><a href="#cb421-3" aria-hidden="true"></a><span class="co">## Prints true.</span></span></code></pre></div>
<p>That should be helpful if you would need to combine it with other features of <code>[[ ]]</code> as well.</p>
<h5>
Exiting the script
</h3>
<p>It’s also logical to make the script exit when invalid parameters are passed to it. This has already been suggested in the <a href="https://stackoverflow.com/questions/18568706/check-number-of-arguments-passed-to-a-bash-script
#comment50847987_18568706">comments</a> by <a href="https://stackoverflow.com/users/1102730/ekangas">ekangas</a> but someone edited this answer to have it with <code>-1</code> as the returned value, so I might as well do it right.</p>
<p><code>-1</code> though accepted by Bash as an argument to <code>exit</code> is not explicitly documented and is not right to be used as a common suggestion. <code>64</code> is also the most formal value since it’s defined in <code>sysexits.h</code> with <code>#define EX_USAGE 64 /* command line usage error */</code>. Most tools like <code>ls</code> also return <code>2</code> on invalid arguments. I also used to return <code>2</code> in my scripts but lately I no longer really cared, and simply used <code>1</code> in all errors. But let’s just place <code>2</code> here since it’s most common and probably not OS-specific.</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true"></a><span class="kw">if [[</span> $</span>
<span id="cb422-2"><a href="#cb422-2" aria-hidden="true"></a><span class="co"># -ne 1 ]]; then</span></span>
<span id="cb422-3"><a href="#cb422-3" aria-hidden="true"></a>    echo <span class="st">&quot;Illegal number of parameters&quot;</span></span>
<span id="cb422-4"><a href="#cb422-4" aria-hidden="true"></a>    exit 2</span>
<span id="cb422-5"><a href="#cb422-5" aria-hidden="true"></a>fi</span></code></pre></div>
<h5>
References
</h3>
<ul>
<li>
<a href="https://www.gnu.org/software/bash/manual/bash.html
#Bash-Conditional-Expressions" rel="noreferrer">Bash Conditional Expressions</a>
</li>
<li>
<a href="https://www.gnu.org/software/bash/manual/bash.html
#Conditional-Constructs" rel="noreferrer">Conditional Constructs</a>
</li>
<li>
<a href="https://www.gnu.org/software/bash/manual/bash.html
#Pattern-Matching" rel="noreferrer">Pattern Matching</a>
</li>
<li>
<a href="https://www.gnu.org/software/bash/manual/bash.html
#Word-Splitting" rel="noreferrer">Word Splitting</a>
</li>
<li>
<a href="https://www.gnu.org/software/bash/manual/bash.html
#Filename-Expansion" rel="noreferrer">Filename Expansion (prev. Pathname Expansion)</a>
</li>
<li>
<a href="https://www.gnu.org/software/bash/manual/html_node/Simple-Commands.html" rel="noreferrer">Simple Commands</a>
</li>
</ul>
</section>
<section id="answer-2-score-66" class="level4">
<h4>Answer 2 (score 66)</h4>
<p>It might be a good idea to use <a href="http://wiki.bash-hackers.org/syntax/arith_expr" rel="noreferrer">arithmetic expressions</a> if you’re dealing with numbers.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb423-1"><a href="#cb423-1" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">((</span> $</span>
<span id="cb423-2"><a href="#cb423-2" aria-hidden="true"></a><span class="co"># != 1 )); then</span></span>
<span id="cb423-3"><a href="#cb423-3" aria-hidden="true"></a>    echo <span class="st">&quot;Illegal number of parameters&quot;</span></span>
<span id="cb423-4"><a href="#cb423-4" aria-hidden="true"></a>fi</span></code></pre></div>
</section>
<section id="answer-3-score-38" class="level4">
<h4>Answer 3 (score 38)</h4>
<p>On []: !=, =, == … are <em>string</em> comparison operators and -eq, -gt … are <em>arithmetic</em> binary ones.</p>
<p>I would use:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;$</span></span>
<span id="cb424-2"><a href="#cb424-2" aria-hidden="true"></a><span class="st">#&quot;</span> <span class="ot">!=</span> <span class="st">&quot;1&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span></code></pre></div>
<p>Or:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> $</span>
<span id="cb425-2"><a href="#cb425-2" aria-hidden="true"></a><span class="co"># -eq 1 ]; then</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-redirect-and-append-both-stdout-and-stderr-to-a-file-with-bash-score-692374-in-2015" class="level3">
<h3>48: How can I redirect and append both stdout and stderr to a file with Bash? (score <a href="https://stackoverflow.com/q/876239.html">692374</a> in 2015)</h3>
<section id="question-47" class="level4">
<h4>Question</h4>
<p>To redirect <em>stdout</em> to a truncated file in Bash, I know to use:</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true"></a><span class="ex">cmd</span> <span class="op">&gt;</span> file.txt</span></code></pre></div>
<p>To redirect <em>stdout</em> in Bash, appending to a file, I know to use:</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb427-1"><a href="#cb427-1" aria-hidden="true"></a><span class="ex">cmd</span> <span class="op">&gt;&gt;</span> file.txt</span></code></pre></div>
<p>To redirect both <em>stdout</em> and <em>stderr</em> to a truncated file, I know to use:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true"></a><span class="ex">cmd</span> <span class="op">&amp;&gt;</span> file.txt</span></code></pre></div>
<p>How do I redirect both <em>stdout</em> and <em>stderr</em> appending to a file? <code>cmd &amp;amp;&amp;gt;&amp;gt; file.txt</code> did not work for me.</p>
</section>
<section id="answer-accepted-score-1853" class="level4">
<h4>Answer accepted (score 1853)</h4>
<div class="sourceCode" id="cb429"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true"></a><span class="ex">cmd</span> <span class="op">&gt;&gt;</span>file.txt <span class="op">2&gt;&amp;1</span></span></code></pre></div>
<p>Bash executes the redirects from left to right as follows:</p>
<ol>
<li>
<code>&amp;gt;&amp;gt;file.txt</code>: Open <code>file.txt</code> in append mode and redirect <code>stdout</code> there.
</li>
<li>
<code>2&amp;gt;&amp;amp;1</code>: Redirect <code>stderr</code> to <em>“where <code>stdout</code> is currently going”</em>. In this case, that is a file opened in append mode. In other words, the <code>&amp;amp;1</code> reuses the file descriptor which <code>stdout</code> currently uses.
</li>
</ol>
</section>
<section id="answer-2-score-344" class="level4">
<h4>Answer 2 (score 344)</h4>
<p>There are two ways to do this, depending on your Bash version.</p>
<p>The classic and portable (<strong>Bash pre-4</strong>) way is:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true"></a><span class="ex">cmd</span> <span class="op">&gt;&gt;</span> outfile <span class="op">2&gt;&amp;1</span></span></code></pre></div>
<p>A nonportable way, starting with <strong>Bash 4</strong> is</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true"></a><span class="ex">cmd</span> <span class="op">&amp;&gt;&gt;</span> outfile</span></code></pre></div>
<p>(analog to <code>&amp;amp;&amp;gt; outfile</code>)</p>
<p>For good coding style, you should</p>
<ul>
<li>
decide if portability is a concern (then use classic way)
</li>
<li>
decide if portability even to Bash pre-4 is a concern (then use classic way)
</li>
<li>
no matter which syntax you use, not change it within the same script (confusion!)
</li>
</ul>
<p>If your script already starts with <code>#!/bin/sh</code> (no matter if intended or not), then the Bash 4 solution, and in general any Bash-specific code, is not the way to go.</p>
<p>Also remember that Bash 4 <code>&amp;amp;&amp;gt;&amp;gt;</code> is just shorter syntax — it does not introduce any new functionality or anything like that.</p>
<p>The syntax is (beside other redirection syntax) described here: <a href="http://bash-hackers.org/wiki/doku.php/syntax/redirection
#appending_redirected_output_and_error_output" rel="noreferrer">http://bash-hackers.org/wiki/doku.php/syntax/redirection#appending_redirected_output_and_error_output</a></p>
</section>
<section id="answer-3-score-84-1" class="level4">
<h4>Answer 3 (score 84)</h4>
<p>In Bash you can also explicitly specify your redirects to different files:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb432-1"><a href="#cb432-1" aria-hidden="true"></a><span class="ex">cmd</span> <span class="op">&gt;</span>log.out <span class="op">2&gt;</span>log_error.out</span></code></pre></div>
<p>Appending would be:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true"></a><span class="ex">cmd</span> <span class="op">&gt;&gt;</span>log.out <span class="op">2&gt;&gt;</span>log_error.out</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-reload-.bash_profile-from-the-command-line-score-682357-in-2014" class="level3">
<h3>49: How to reload .bash_profile from the command line? (score <a href="https://stackoverflow.com/q/4608187.html">682357</a> in 2014)</h3>
<section id="question-48" class="level4">
<h4>Question</h4>
<p>
How can I reload <code>.bash_profile</code> from the command line? I can get the shell to recognize changes to <code>.bash_profile</code> by exiting and logging back in but I would like to be able to do it on demand.
</p>
</section>
<section id="answer-accepted-score-1712" class="level4">
<h4>Answer accepted (score 1712)</h4>
<p>Simply type <code>source ~/.bash_profile</code></p>
<p>Alternatively, if you like saving keystrokes you can type <code>. ~/.bash_profile</code></p>
</section>
<section id="answer-2-score-98" class="level4">
<h4>Answer 2 (score 98)</h4>
<div class="sourceCode" id="cb434"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb434-1"><a href="#cb434-1" aria-hidden="true"></a><span class="bu">.</span> <span class="ex">~/.bash_profile</span></span></code></pre></div>
<p>Just make sure you don’t have any dependencies on the current state in there.</p>
</section>
<section id="answer-3-score-30-1" class="level4">
<h4>Answer 3 (score 30)</h4>
<p>Simply type:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true"></a><span class="bu">.</span> <span class="ex">~/.bash_profile</span></span></code></pre></div>
<p>However, if you want to source it to run automatically when terminal starts instead of running it every time you open terminal, you might add <code>. ~/.bash_profile</code> to <code>~/.bashrc</code> file.</p>
<p><strong>Note:</strong></p>
<p>When you open a terminal, the terminal starts bash in (non-login) interactive mode, which means it will source <code>~/.bashrc</code>.</p>
<p><code>~/.bash_profile</code> is only sourced by bash when started in <strong>interactive login mode</strong>. That is typically only when you login at the console (<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>F1</kbd>..<kbd>F6</kbd>), or connecting via <code>ssh</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-loop-over-files-in-directory-and-change-path-and-add-suffix-to-filename-score-670034-in-2019" class="level3">
<h3>50: How to loop over files in directory and change path and add suffix to filename (score <a href="https://stackoverflow.com/q/20796200.html">670034</a> in 2019)</h3>
<section id="question-49" class="level4">
<h4>Question</h4>
<p>I need to write a script that starts my program with different arguments, but I’m new to Bash. I start my program with:</p>
<p><code>./MyProgram.exe Data/data1.txt [Logs/data1_Log.txt]</code>.</p>
<p>Here is the pseudocode for what I want to do:</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb436-1"><a href="#cb436-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">each</span> filename in /Data do</span>
<span id="cb436-2"><a href="#cb436-2" aria-hidden="true"></a>  <span class="kw">for</span> <span class="ex">int</span> i = 0, i = 3, i++</span>
<span id="cb436-3"><a href="#cb436-3" aria-hidden="true"></a>    <span class="ex">./MyProgram.exe</span> Data/filename.txt Logs/filename_Log<span class="dt">{i}</span>.txt</span>
<span id="cb436-4"><a href="#cb436-4" aria-hidden="true"></a>  <span class="ex">end</span> for</span>
<span id="cb436-5"><a href="#cb436-5" aria-hidden="true"></a><span class="ex">end</span> for</span></code></pre></div>
<p>So I’m really puzzled how to create second argument from the first one, so it looks like dataABCD_Log1.txt and start my program.</p>
</section>
<section id="answer-accepted-score-660" class="level4">
<h4>Answer accepted (score 660)</h4>
<p>A couple of notes first: when you use <code>Data/data1.txt</code> as an argument, should it really be <code>/Data/data1.txt</code> (with a leading slash)? Also, should the outer loop scan only for .txt files, or all files in /Data? Here’s an answer, assuming <code>/Data/data1.txt</code> and .txt files only:</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true"></a></span>
<span id="cb437-2"><a href="#cb437-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb437-3"><a href="#cb437-3" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">filename</span> in /Data/*.txt<span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb437-4"><a href="#cb437-4" aria-hidden="true"></a>    <span class="kw">for</span> <span class="kw">((</span>i=0; i&lt;=3; i++<span class="kw">))</span>; <span class="kw">do</span></span>
<span id="cb437-5"><a href="#cb437-5" aria-hidden="true"></a>        <span class="ex">./MyProgram.exe</span> <span class="st">&quot;</span><span class="va">$filename</span><span class="st">&quot;</span> <span class="st">&quot;Logs/</span><span class="va">$(</span><span class="fu">basename</span> <span class="st">&quot;</span><span class="va">$filename</span><span class="st">&quot;</span> .txt<span class="va">)</span><span class="st">_Log</span><span class="va">$i</span><span class="st">.txt&quot;</span></span>
<span id="cb437-6"><a href="#cb437-6" aria-hidden="true"></a>    <span class="kw">done</span></span>
<span id="cb437-7"><a href="#cb437-7" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>Notes:</p>
<ul>
<li>
<code>/Data/*.txt</code> expands to the paths of the text files in /Data (<em>including</em> the /Data/ part)
</li>
<li>
<code>$( ... )</code> runs a shell command and inserts its output at that point in the command line
</li>
<li>
<code>basename somepath .txt</code> outputs the base part of somepath, with .txt removed from the end (e.g. <code>/Data/file.txt</code> -&gt; <code>file</code>)
</li>
</ul>
<p>If you needed to run MyProgram with <code>Data/file.txt</code> instead of <code>/Data/file.txt</code>, use <code>"${filename #/}"</code> to remove the leading slash. On the other hand, if it’s really <code>Data</code> not <code>/Data</code> you want to scan, just use <code>for filename in Data/*.txt</code>.</p>
</section>
<section id="answer-2-score-295" class="level4">
<h4>Answer 2 (score 295)</h4>
<p>Sorry for necromancing the thread, but whenever you iterate over files by globbing, it’s good practice to avoid the corner case where the glob does not match (which makes the loop variable expand to the (un-matching) glob pattern string itself).</p>
<p>For example:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb438-1"><a href="#cb438-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">filename</span> in Data/*.txt<span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb438-2"><a href="#cb438-2" aria-hidden="true"></a>    [ <span class="ex">-e</span> <span class="st">&quot;</span><span class="va">$filename</span><span class="st">&quot;</span> ] <span class="kw">||</span> <span class="bu">continue</span></span>
<span id="cb438-3"><a href="#cb438-3" aria-hidden="true"></a></span>
<span id="cb438-4"><a href="#cb438-4" aria-hidden="true"></a><span class="co"># ... rest of the loop body</span></span>
<span id="cb438-5"><a href="#cb438-5" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>Reference: <a href="http://mywiki.wooledge.org/BashPitfalls
#line-57" rel="noreferrer">Bash Pitfalls</a></p>
</section>
<section id="answer-3-score-71" class="level4">
<h4>Answer 3 (score 71)</h4>
<div class="sourceCode" id="cb439"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true"></a><span class="kw">for</span> <span class="fu">file</span> in Data/*.txt</span>
<span id="cb439-2"><a href="#cb439-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb439-3"><a href="#cb439-3" aria-hidden="true"></a>    <span class="kw">for</span> <span class="kw">((</span>i = 0; i &lt; 3; i++<span class="kw">))</span></span>
<span id="cb439-4"><a href="#cb439-4" aria-hidden="true"></a>    <span class="kw">do</span></span>
<span id="cb439-5"><a href="#cb439-5" aria-hidden="true"></a>        <span class="va">name=${file</span></span>
<span id="cb439-6"><a href="#cb439-6" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span></span>
<span id="cb439-7"><a href="#cb439-7" aria-hidden="true"></a>        <span class="va">base=${name%</span>.txt<span class="va">}</span></span>
<span id="cb439-8"><a href="#cb439-8" aria-hidden="true"></a>        <span class="ex">./MyProgram.exe</span> <span class="st">&quot;</span><span class="va">$file</span><span class="st">&quot;</span> Logs/<span class="st">&quot;</span><span class="va">${base}</span><span class="st">_Log</span><span class="va">$i</span><span class="st">.txt&quot;</span></span>
<span id="cb439-9"><a href="#cb439-9" aria-hidden="true"></a>    <span class="kw">done</span></span>
<span id="cb439-10"><a href="#cb439-10" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>The <code>name=${file ##*/}</code> substitution (<a href="http://www.gnu.org/software/bash/manual/bash.html#Shell-Parameter-Expansion">shell parameter expansion</a>) removes the leading pathname up to the last <code>/</code>.</p>
<p>The <code>base=${name%.txt}</code> substitution removes the trailing <code>.txt</code>. It’s a bit trickier if the extensions can vary.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="redirect-stderr-and-stdout-in-bash-score-652646-in-2017" class="level3">
<h3>51: Redirect stderr and stdout in Bash (score <a href="https://stackoverflow.com/q/637827.html">652646</a> in 2017)</h3>
<section id="question-50" class="level4">
<h4>Question</h4>
<p>I want to redirect both stdout and stderr of a process to a single file. How do I do that in Bash?</p>
</section>
<section id="answer-accepted-score-717" class="level4">
<h4>Answer accepted (score 717)</h4>
<p>Take a look <a href="http://tldp.org/LDP/abs/html/io-redirection.html" rel="noreferrer">here</a>. Should be:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb440-1"><a href="#cb440-1" aria-hidden="true"></a><span class="ex">yourcommand</span> <span class="op">&amp;&gt;</span>filename</span></code></pre></div>
<p>(redirects both <code>stdout</code> and <code>stderr</code> to filename).</p>
</section>
<section id="answer-2-score-437" class="level4">
<h4>Answer 2 (score 437)</h4>
<div class="sourceCode" id="cb441"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true"></a><span class="ex">do_something</span> <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">tee</span> -a some_file</span></code></pre></div>
<p>This is going to redirect stderr to stdout and stdout to <code>some_file</code> <strong>and</strong> print it to stdout.</p>
</section>
<section id="answer-3-score-234" class="level4">
<h4>Answer 3 (score 234)</h4>
<p>You can redirect <em>stderr</em> to <em>stdout</em> and the <em>stdout</em> into a file:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb442-1"><a href="#cb442-1" aria-hidden="true"></a><span class="ex">some_command</span> <span class="op">&gt;</span>file.log <span class="op">2&gt;&amp;1</span> </span></code></pre></div>
<p>See <a href="http://tldp.org/LDP/abs/html/io-redirection.html" rel="noreferrer">http://tldp.org/LDP/abs/html/io-redirection.html</a></p>
<p>This format is preferred than the most popular &amp;&gt; format that only work in bash. In Bourne shell it could be interpreted as running the command in background. Also the format is more readable 2 (is STDERR) redirected to 1 (STDOUT).</p>
<p>EDIT: changed the order as pointed out in the comments</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-echo-shell-commands-as-they-are-executed-score-644659-in-2019" class="level3">
<h3>52: How to echo shell commands as they are executed (score <a href="https://stackoverflow.com/q/2853803.html">644659</a> in 2019)</h3>
<section id="question-51" class="level4">
<h4>Question</h4>
<p>In a shell script, how do I echo all shell commands called and expand any variable names?</p>
<p>For example, given the following line:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true"></a><span class="fu">ls</span> <span class="va">$DIRNAME</span></span></code></pre></div>
<p>I would like the script to run the command and display the following</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb444-1"><a href="#cb444-1" aria-hidden="true"></a><span class="fu">ls</span> /full/path/to/some/dir</span></code></pre></div>
<p>The purpose is to save a log of all shell commands called and their arguments. Is there perhaps a better way of generating such a log?</p>
</section>
<section id="answer-accepted-score-894" class="level4">
<h4>Answer accepted (score 894)</h4>
<p><code>set -x</code> or <code>set -o xtrace</code> expands variables and prints a little + sign before the line.</p>
<p><code>set -v</code> or <code>set -o verbose</code> does not expand the variables before printing.</p>
<p>Use <code>set +x</code> and <code>set +v</code> to turn off the above settings.</p>
<p>On the first line of the script, one can put <code>#!/bin/sh -x</code> (or <code>-v</code>) to have the same effect as <code>set -x</code> (or <code>-v</code>) later in the script.</p>
<p>The above also works with <code>/bin/sh</code>.</p>
<p>See the bash-hackers’ wiki on <a href="https://wiki.bash-hackers.org/commands/builtin/set
#attributes" rel="noreferrer"><code>set</code> attributes</a>, and on <a href="https://wiki.bash-hackers.org/scripting/debuggingtips" rel="noreferrer">debugging</a>.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true"></a>$ <span class="fu">cat</span> shl</span>
<span id="cb445-2"><a href="#cb445-2" aria-hidden="true"></a></span>
<span id="cb445-3"><a href="#cb445-3" aria-hidden="true"></a><span class="co">#!/bin/bash                                                                     </span></span>
<span id="cb445-4"><a href="#cb445-4" aria-hidden="true"></a></span>
<span id="cb445-5"><a href="#cb445-5" aria-hidden="true"></a><span class="va">DIR=</span>/tmp/so</span>
<span id="cb445-6"><a href="#cb445-6" aria-hidden="true"></a><span class="fu">ls</span> <span class="va">$DIR</span></span>
<span id="cb445-7"><a href="#cb445-7" aria-hidden="true"></a></span>
<span id="cb445-8"><a href="#cb445-8" aria-hidden="true"></a>$ <span class="fu">bash</span> -x shl </span>
<span id="cb445-9"><a href="#cb445-9" aria-hidden="true"></a><span class="ex">+</span> DIR=/tmp/so</span>
<span id="cb445-10"><a href="#cb445-10" aria-hidden="true"></a><span class="ex">+</span> ls /tmp/so</span>
<span id="cb445-11"><a href="#cb445-11" aria-hidden="true"></a>$</span></code></pre></div>
</section>
<section id="answer-2-score-288" class="level4">
<h4>Answer 2 (score 288)</h4>
<p><code>set -x</code> will give you what you want.</p>
<p>Here is an example shell script to demonstrate:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb446-1"><a href="#cb446-1" aria-hidden="true"></a></span>
<span id="cb446-2"><a href="#cb446-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb446-3"><a href="#cb446-3" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-x</span></span>
<span id="cb446-4"><a href="#cb446-4" aria-hidden="true"></a><span class="co">#echo on</span></span>
<span id="cb446-5"><a href="#cb446-5" aria-hidden="true"></a></span>
<span id="cb446-6"><a href="#cb446-6" aria-hidden="true"></a><span class="fu">ls</span> <span class="va">$PWD</span></span></code></pre></div>
<p>This expands all variables and prints the full commands before output of the command.</p>
<p>output:</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true"></a><span class="ex">+</span> ls /home/user/</span>
<span id="cb447-2"><a href="#cb447-2" aria-hidden="true"></a><span class="ex">file1.txt</span> file2.txt</span></code></pre></div>
</section>
<section id="answer-3-score-83" class="level4">
<h4>Answer 3 (score 83)</h4>
<p>You can also toggle this for select lines in your script by wrapping them in <code>set -x</code> and <code>set +x</code> e.g. </p>
<div class="sourceCode" id="cb448"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true"></a></span>
<span id="cb448-2"><a href="#cb448-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb448-3"><a href="#cb448-3" aria-hidden="true"></a><span class="ex">...</span></span>
<span id="cb448-4"><a href="#cb448-4" aria-hidden="true"></a><span class="kw">if [[</span> <span class="ot">!</span> <span class="ot">-e</span> <span class="va">$OUT_FILE</span><span class="kw"> ]]</span>;</span>
<span id="cb448-5"><a href="#cb448-5" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb448-6"><a href="#cb448-6" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;grabbing </span><span class="va">$URL</span><span class="st">&quot;</span></span>
<span id="cb448-7"><a href="#cb448-7" aria-hidden="true"></a>   <span class="kw">set</span> <span class="ex">-x</span></span>
<span id="cb448-8"><a href="#cb448-8" aria-hidden="true"></a>   <span class="ex">curl</span> --fail --noproxy <span class="va">$SERV</span> -s -S <span class="va">$URL</span> -o <span class="va">$OUT_FILE</span></span>
<span id="cb448-9"><a href="#cb448-9" aria-hidden="true"></a>   <span class="kw">set</span> <span class="ex">+x</span></span>
<span id="cb448-10"><a href="#cb448-10" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-current-directory-name-without-full-path-in-a-bash-script-score-626208-in-2018" class="level3">
<h3>53: Get current directory name (without full path) in a Bash script (score <a href="https://stackoverflow.com/q/1371261.html">626208</a> in 2018)</h3>
<section id="question-52" class="level4">
<h4>Question</h4>
<p>How would I get just the current working directory name in a bash script, or even better, just a terminal command.</p>
<p><code>pwd</code> gives the full path of the current working directory, e.g. <code>/opt/local/bin</code> but I only want <code>bin</code></p>
</section>
<section id="answer-accepted-score-1017" class="level4">
<h4>Answer accepted (score 1017)</h4>
<p>No need for basename, and especially no need for a subshell running pwd (which <A HREF="http://mywiki.wooledge.org/SubShell" rel="noreferrer">adds an extra, and expensive, fork operation</A>); the shell can do this internally using <A HREF="http://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html" rel="noreferrer">parameter expansion</A>:</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb449-1"><a href="#cb449-1" aria-hidden="true"></a><span class="va">result=${PWD</span></span>
<span id="cb449-2"><a href="#cb449-2" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span>          # <span class="ex">to</span> assign to a variable</span>
<span id="cb449-3"><a href="#cb449-3" aria-hidden="true"></a></span>
<span id="cb449-4"><a href="#cb449-4" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${PWD</span></span>
<span id="cb449-5"><a href="#cb449-5" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span><span class="st">&quot;</span> <span class="co"># to print to stdout</span></span>
<span id="cb449-6"><a href="#cb449-6" aria-hidden="true"></a></span>
<span id="cb449-7"><a href="#cb449-7" aria-hidden="true"></a><span class="co"># ...more robust than echo for unusual names</span></span>
<span id="cb449-8"><a href="#cb449-8" aria-hidden="true"></a></span>
<span id="cb449-9"><a href="#cb449-9" aria-hidden="true"></a><span class="co">#    (consider a directory named -e or -n)</span></span>
<span id="cb449-10"><a href="#cb449-10" aria-hidden="true"></a></span>
<span id="cb449-11"><a href="#cb449-11" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&#39;%q\n&#39;</span> <span class="st">&quot;</span><span class="va">${PWD</span></span>
<span id="cb449-12"><a href="#cb449-12" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span><span class="st">&quot;</span> <span class="co"># to print to stdout, quoted for use as shell input</span></span>
<span id="cb449-13"><a href="#cb449-13" aria-hidden="true"></a></span>
<span id="cb449-14"><a href="#cb449-14" aria-hidden="true"></a><span class="co"># ...useful to make hidden characters readable.</span></span></code></pre></div>
<hr>
<p>Note that if you’re applying this technique in other circumstances (not <code>PWD</code>, but some other variable holding a directory name), you might need to trim any trailing slashes. The below uses bash’s <a href="http://wiki.bash-hackers.org/syntax/pattern
#extended_pattern_language" rel="noreferrer">extglob support</a> to work even with multiple trailing slashes:</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true"></a><span class="va">dirname=</span>/path/to/somewhere//</span>
<span id="cb450-2"><a href="#cb450-2" aria-hidden="true"></a><span class="bu">shopt</span> -s extglob</span>
<span id="cb450-3"><a href="#cb450-3" aria-hidden="true"></a><span class="co"># enable +(...) glob syntax</span></span>
<span id="cb450-4"><a href="#cb450-4" aria-hidden="true"></a><span class="va">result=${dirname%%</span>+(/)<span class="va">}</span></span>
<span id="cb450-5"><a href="#cb450-5" aria-hidden="true"></a><span class="co"># trim however many trailing slashes exist</span></span>
<span id="cb450-6"><a href="#cb450-6" aria-hidden="true"></a><span class="va">result=${result</span></span>
<span id="cb450-7"><a href="#cb450-7" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span>       # <span class="ex">remove</span> everything before the last / that still remains</span>
<span id="cb450-8"><a href="#cb450-8" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$result</span><span class="st">&quot;</span></span></code></pre></div>
<p>Alternatively, without <code>extglob</code>:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true"></a><span class="va">dirname=</span><span class="st">&quot;/path/to/somewhere//&quot;</span></span>
<span id="cb451-2"><a href="#cb451-2" aria-hidden="true"></a><span class="va">result=</span><span class="st">&quot;</span><span class="va">${dirname%</span><span class="st">&quot;</span><span class="va">${dirname</span></span>
<span id="cb451-3"><a href="#cb451-3" aria-hidden="true"></a><span class="va">##</span>*[!/]<span class="va">}</span><span class="st">&quot;</span><span class="va">}</span><span class="st">&quot;</span> # <span class="ex">extglob-free</span> multi-trailing-/ trim</span>
<span id="cb451-4"><a href="#cb451-4" aria-hidden="true"></a><span class="va">result=</span><span class="st">&quot;</span><span class="va">${result</span></span>
<span id="cb451-5"><a href="#cb451-5" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span><span class="st">&quot;</span>                  # <span class="ex">remove</span> everything before the last /</span></code></pre></div>
</section>
<section id="answer-2-score-280" class="level4">
<h4>Answer 2 (score 280)</h4>
<p>Use the <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/basename.html" rel="noreferrer"><code>basename</code></a> program. For your case:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true"></a><span class="ex">%</span> basename <span class="st">&quot;</span><span class="va">$PWD</span><span class="st">&quot;</span></span>
<span id="cb452-2"><a href="#cb452-2" aria-hidden="true"></a><span class="ex">bin</span></span></code></pre></div>
</section>
<section id="answer-3-score-132" class="level4">
<h4>Answer 3 (score 132)</h4>
<div class="sourceCode" id="cb453"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${PWD</span></span>
<span id="cb453-2"><a href="#cb453-2" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span><span class="st">&quot;</span></span></code></pre></div>
<p>&amp; #8203;​​​​</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="if-elif-else-statement-issues-in-bash-score-625671-in-2018" class="level3">
<h3>54: if, elif, else statement issues in Bash (score <a href="https://stackoverflow.com/q/16034749.html">625671</a> in 2018)</h3>
<section id="question-53" class="level4">
<h4>Question</h4>
<p>I can’t seem to work out what the issue with the following <code>if</code> statement is in regards to the <code>elif</code> and <code>then</code>. Keep in mind the <code>printf</code> is still under development I just haven’t been able to test it yet in the statement so is more than likely wrong.</p>
<p>The error I’m getting is:</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true"></a><span class="ex">.</span>/timezone_string.sh: <span class="ex">line</span> 14: syntax error near unexpected token <span class="kw">`</span><span class="ex">then</span><span class="st">&#39;</span></span>
<span id="cb454-2"><a href="#cb454-2" aria-hidden="true"></a><span class="st">./timezone_string.sh: line 14: `then&#39;</span></span></code></pre></div>
<p>And the statement is like so.</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$seconds</span><span class="st">&quot;</span> <span class="ot">-eq</span> 0<span class="bu"> ]</span>;<span class="kw">then</span></span>
<span id="cb455-2"><a href="#cb455-2" aria-hidden="true"></a>   <span class="va">$timezone_string</span>=<span class="st">&quot;Z&quot;</span></span>
<span id="cb455-3"><a href="#cb455-3" aria-hidden="true"></a><span class="ex">elif</span>[ <span class="st">&quot;</span><span class="va">$seconds</span><span class="st">&quot;</span> -gt 0 ]</span>
<span id="cb455-4"><a href="#cb455-4" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb455-5"><a href="#cb455-5" aria-hidden="true"></a>   <span class="va">$timezone_string</span>=<span class="kw">`</span><span class="bu">printf</span> <span class="st">&quot;%02d:%02d&quot;</span> <span class="va">$seconds</span>/3600 (<span class="va">$seconds</span>/60)<span class="ex">%60</span><span class="kw">`</span></span>
<span id="cb455-6"><a href="#cb455-6" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb455-7"><a href="#cb455-7" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;Unknown parameter&quot;</span></span>
<span id="cb455-8"><a href="#cb455-8" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-407" class="level4">
<h4>Answer accepted (score 407)</h4>
<p>There is a space missing between <code>elif</code> and <code>[</code>:</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true"></a><span class="ex">elif</span>[ <span class="st">&quot;</span><span class="va">$seconds</span><span class="st">&quot;</span> -gt 0 ]</span></code></pre></div>
<p>should be</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb457-1"><a href="#cb457-1" aria-hidden="true"></a><span class="kw">elif</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$seconds</span><span class="st">&quot;</span> <span class="ot">-gt</span> 0<span class="bu"> ]</span></span></code></pre></div>
<hr>
<p>As I see this question is getting a lot of views, it is important to indicate that the syntax to follow is:</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> conditions<span class="bu"> ]</span></span>
<span id="cb458-2"><a href="#cb458-2" aria-hidden="true"></a></span>
<span id="cb458-3"><a href="#cb458-3" aria-hidden="true"></a><span class="co"># ^ ^          ^</span></span></code></pre></div>
<p>meaning that <strong>spaces are needed around the brackets</strong>. Otherwise, it won’t work. This is because <code>[</code> itself <em>is</em> a command.</p>
<p>The reason why you are not seeing something like <code>elif[: command not found</code> (or similar) is that after seeing <code>if</code> and <code>then</code>, the shell is looking for either <code>elif</code>, <code>else</code>, or <code>fi</code>. However it finds another <code>then</code> (after the mis-formatted <code>elif[</code>). Only <em>after</em> having parsed the statement it would be executed (and an error message like <code>elif[: command not found</code> would be output).</p>
</section>
<section id="answer-2-score-266-1" class="level4">
<h4>Answer 2 (score 266)</h4>
<p>You have some syntax issues with your script. Here is a fixed version:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb459-1"><a href="#cb459-1" aria-hidden="true"></a></span>
<span id="cb459-2"><a href="#cb459-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb459-3"><a href="#cb459-3" aria-hidden="true"></a></span>
<span id="cb459-4"><a href="#cb459-4" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$seconds</span><span class="st">&quot;</span> <span class="ot">-eq</span> 0<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb459-5"><a href="#cb459-5" aria-hidden="true"></a>   <span class="va">timezone_string=</span><span class="st">&quot;Z&quot;</span></span>
<span id="cb459-6"><a href="#cb459-6" aria-hidden="true"></a><span class="kw">elif</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$seconds</span><span class="st">&quot;</span> <span class="ot">-gt</span> 0<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb459-7"><a href="#cb459-7" aria-hidden="true"></a>   <span class="va">timezone_string=$(</span><span class="bu">printf</span> <span class="st">&quot;%02d:%02d&quot;</span> <span class="va">$((</span>seconds/3600<span class="va">))</span> <span class="va">$((</span>(seconds / 60) % 60<span class="va">)))</span></span>
<span id="cb459-8"><a href="#cb459-8" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb459-9"><a href="#cb459-9" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;Unknown parameter&quot;</span></span>
<span id="cb459-10"><a href="#cb459-10" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-3-score-23" class="level4">
<h4>Answer 3 (score 23)</h4>
<p><code>[</code> is a command (or a builtin in some shells). It must be separated by whitespace from the preceding statement:</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true"></a><span class="kw">elif</span><span class="bu"> [</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-and-replace-inside-a-text-file-from-a-bash-command-score-614510-in-2017" class="level3">
<h3>55: Find and Replace Inside a Text File from a Bash Command (score <a href="https://stackoverflow.com/q/525592.html">614510</a> in 2017)</h3>
<section id="question-54" class="level4">
<h4>Question</h4>
<p>What’s the simplest way to do a find and replace for a given input string, say <code>abc</code>, and replace with another string, say <code>XYZ</code> in file <code>/tmp/file.txt</code>?</p>
<p>I am writting an app and using IronPython to execute commands through SSH — but I don’t know Unix that well and don’t know what to look for.</p>
<p>I have heard that Bash, apart from being a command line interface, can be a very powerful scripting language. So, if this is true, I assume you can perform actions like these.</p>
<p>Can I do it with bash, and what’s the simplest (one line) script to achieve my goal?</p>
</section>
<section id="answer-accepted-score-864" class="level4">
<h4>Answer accepted (score 864)</h4>
<p>The easiest way is to use sed (or perl):</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb461-1"><a href="#cb461-1" aria-hidden="true"></a><span class="fu">sed</span> -i -e <span class="st">&#39;s/abc/XYZ/g&#39;</span> /tmp/file.txt</span></code></pre></div>
<p>Which will invoke sed to do an in-place edit due to the <code>-i</code> option. This can be called from bash.</p>
<p>If you really really want to use just bash, then the following can work:</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">read</span> <span class="va">a</span>; <span class="kw">do</span></span>
<span id="cb462-2"><a href="#cb462-2" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="va">${a//</span>abc<span class="va">/</span>XYZ<span class="va">}</span></span>
<span id="cb462-3"><a href="#cb462-3" aria-hidden="true"></a><span class="kw">done</span> <span class="op">&lt;</span> <span class="ex">/tmp/file.txt</span> <span class="op">&gt;</span> /tmp/file.txt.t</span>
<span id="cb462-4"><a href="#cb462-4" aria-hidden="true"></a><span class="fu">mv</span> /tmp/file.txt<span class="dt">{.t,}</span></span></code></pre></div>
<p>This loops over each line, doing a substitution, and writing to a temporary file (don’t want to clobber the input). The move at the end just moves temporary to the original name.</p>
</section>
<section id="answer-2-score-157" class="level4">
<h4>Answer 2 (score 157)</h4>
<p>File manipulation isn’t normally done by Bash, but by programs invoked by Bash, e.g.:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb463-1"><a href="#cb463-1" aria-hidden="true"></a><span class="fu">perl</span> -pi -e <span class="st">&#39;s/abc/XYZ/g&#39;</span> /tmp/file.txt</span></code></pre></div>
<p>The <code>-i</code> flag tells it to do an in-place replacement.</p>
<p>See <code>man perlrun</code> for more details, including how to take a backup of the original file.</p>
</section>
<section id="answer-3-score-66-1" class="level4">
<h4>Answer 3 (score 66)</h4>
<p>I was surprised because i stumbled over this…</p>
<p>There is a <strong>“replace”</strong> command which ships with the package <strong>“mysql-server”</strong>, so if you have installed it try it out:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true"></a></span>
<span id="cb464-2"><a href="#cb464-2" aria-hidden="true"></a><span class="co"># replace string abc to XYZ in files</span></span>
<span id="cb464-3"><a href="#cb464-3" aria-hidden="true"></a><span class="ex">replace</span> <span class="st">&quot;abc&quot;</span> <span class="st">&quot;XYZ&quot;</span> -- file.txt file2.txt file3.txt</span>
<span id="cb464-4"><a href="#cb464-4" aria-hidden="true"></a></span>
<span id="cb464-5"><a href="#cb464-5" aria-hidden="true"></a></span>
<span id="cb464-6"><a href="#cb464-6" aria-hidden="true"></a><span class="co"># or pipe an echo to replace</span></span>
<span id="cb464-7"><a href="#cb464-7" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;abcdef&quot;</span> <span class="kw">|</span><span class="ex">replace</span> <span class="st">&quot;abc&quot;</span> <span class="st">&quot;XYZ&quot;</span></span></code></pre></div>
<p>See <strong>man replace</strong> for more on this…</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-if-a-program-exists-from-a-bash-script-score-603726-in-2018" class="level3">
<h3>56: How to check if a program exists from a Bash script? (score <a href="https://stackoverflow.com/q/592620.html">603726</a> in 2018)</h3>
<section id="question-55" class="level4">
<h4>Question</h4>
<p>How would I validate that a program exists, in a way that will either return an error and exit, or continue with the script?</p>
<p>It seems like it should be easy, but it’s been stumping me.</p>
</section>
<section id="answer-accepted-score-2766" class="level4">
<h4>Answer accepted (score 2766)</h4>
<h5>
Answer
</h2>
<p>POSIX compatible:</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb465-1"><a href="#cb465-1" aria-hidden="true"></a><span class="bu">command</span> -v <span class="op">&lt;</span>the_command<span class="op">&gt;</span></span></code></pre></div>
<p>For <code>bash</code> specific environments:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true"></a><span class="bu">hash</span> <span class="op">&lt;</span>the_command<span class="op">&gt;</span></span>
<span id="cb466-2"><a href="#cb466-2" aria-hidden="true"></a><span class="co"># For regular commands. Or...</span></span>
<span id="cb466-3"><a href="#cb466-3" aria-hidden="true"></a><span class="bu">type</span> <span class="op">&lt;</span>the_command<span class="op">&gt;</span></span>
<span id="cb466-4"><a href="#cb466-4" aria-hidden="true"></a><span class="co"># To check built-ins and keywords</span></span></code></pre></div>
<h5>
Explanation
</h2>
<p>Avoid <code>which</code>. Not only is it an external process you’re launching for doing very little (meaning builtins like <code>hash</code>, <code>type</code> or <code>command</code> are way cheaper), you can also rely on the builtins to actually do what you want, while the effects of external commands can easily vary from system to system.</p>
<p>Why care?</p>
<ul>
<li>
Many operating systems have a <code>which</code> that <strong>doesn’t even set an exit status</strong>, meaning the <code>if which foo</code> won’t even work there and will <strong>always</strong> report that <code>foo</code> exists, even if it doesn’t (note that some POSIX shells appear to do this for <code>hash</code> too).
</li>
<li>
Many operating systems make <code>which</code> do custom and evil stuff like change the output or even hook into the package manager.
</li>
</ul>
<p>So, don’t use <code>which</code>. Instead use one of these:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb467-1"><a href="#cb467-1" aria-hidden="true"></a>$ <span class="bu">command</span> -v foo <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">||</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="op">&gt;&amp;2</span> <span class="st">&quot;I require foo but it&#39;s not installed.  Aborting.&quot;</span><span class="kw">;</span> <span class="bu">exit</span> 1<span class="kw">;</span> <span class="kw">}</span></span>
<span id="cb467-2"><a href="#cb467-2" aria-hidden="true"></a>$ <span class="bu">type</span> foo <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">||</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="op">&gt;&amp;2</span> <span class="st">&quot;I require foo but it&#39;s not installed.  Aborting.&quot;</span><span class="kw">;</span> <span class="bu">exit</span> 1<span class="kw">;</span> <span class="kw">}</span></span>
<span id="cb467-3"><a href="#cb467-3" aria-hidden="true"></a>$ <span class="bu">hash</span> foo <span class="op">2&gt;</span>/dev/null <span class="kw">||</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="op">&gt;&amp;2</span> <span class="st">&quot;I require foo but it&#39;s not installed.  Aborting.&quot;</span><span class="kw">;</span> <span class="bu">exit</span> 1<span class="kw">;</span> <span class="kw">}</span></span></code></pre></div>
<p>(Minor side-note: some will suggest <code>2&amp;gt;&amp;amp;-</code> is the same <code>2&amp;gt;/dev/null</code> but shorter – <em>this is untrue</em>. <code>2&amp;gt;&amp;amp;-</code> closes FD 2 which causes an <strong>error</strong> in the program when it tries to write to stderr, which is very different from successfully writing to it and discarding the output (and dangerous!))</p>
<p>If your hash bang is <code>/bin/sh</code> then you should care about what POSIX says. <code>type</code> and <code>hash</code>’s exit codes aren’t terribly well defined by POSIX, and <code>hash</code> is seen to exit successfully when the command doesn’t exist (haven’t seen this with <code>type</code> yet). <code>command</code>’s exit status is well defined by POSIX, so that one is probably the safest to use.</p>
<p>If your script uses <code>bash</code> though, POSIX rules don’t really matter anymore and both <code>type</code> and <code>hash</code> become perfectly safe to use. <code>type</code> now has a <code>-P</code> to search just the <code>PATH</code> and <code>hash</code> has the side-effect that the command’s location will be hashed (for faster lookup next time you use it), which is usually a good thing since you probably check for its existence in order to actually use it.</p>
<p>As a simple example, here’s a function that runs <code>gdate</code> if it exists, otherwise <code>date</code>:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb468-1"><a href="#cb468-1" aria-hidden="true"></a><span class="fu">gnudate()</span> <span class="kw">{</span></span>
<span id="cb468-2"><a href="#cb468-2" aria-hidden="true"></a>    <span class="kw">if</span> <span class="bu">hash</span> gdate <span class="op">2&gt;</span>/dev/null<span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb468-3"><a href="#cb468-3" aria-hidden="true"></a>        <span class="ex">gdate</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></span>
<span id="cb468-4"><a href="#cb468-4" aria-hidden="true"></a>    <span class="kw">else</span></span>
<span id="cb468-5"><a href="#cb468-5" aria-hidden="true"></a>        <span class="fu">date</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></span>
<span id="cb468-6"><a href="#cb468-6" aria-hidden="true"></a>    <span class="kw">fi</span></span>
<span id="cb468-7"><a href="#cb468-7" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
</section>
<section id="answer-2-score-459" class="level4">
<h4>Answer 2 (score 459)</h4>
<p>The following is a portable way to check whether a command exists in <code>$PATH</code> <em>and</em> is executable:</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb469-1"><a href="#cb469-1" aria-hidden="true"></a><span class="bu">[</span> <span class="ot">-x</span> <span class="st">&quot;</span><span class="va">$(</span><span class="bu">command</span> -v foo<span class="va">)</span><span class="st">&quot;</span><span class="bu"> ]</span></span></code></pre></div>
<p>Example:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true"></a><span class="kw">if</span> !<span class="bu"> [</span> <span class="ot">-x</span> <span class="st">&quot;</span><span class="va">$(</span><span class="bu">command</span> -v git<span class="va">)</span><span class="st">&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb470-2"><a href="#cb470-2" aria-hidden="true"></a>  <span class="bu">echo</span> <span class="st">&#39;Error: git is not installed.&#39;</span> <span class="op">&gt;&amp;2</span></span>
<span id="cb470-3"><a href="#cb470-3" aria-hidden="true"></a>  <span class="bu">exit</span> 1</span>
<span id="cb470-4"><a href="#cb470-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>The executable check is needed because bash returns a non-executable file if no executable file with that name is found in <code>$PATH</code>.</p>
<p>Also note that if a non-executable file with the same name as the executable exists earlier in <code>$PATH</code>, dash returns the former, even though the latter would be executed. This is a bug and is in violation of the POSIX standard. [<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=874264" rel="noreferrer">Bug report</a>] [<a href="http://pubs.opengroup.org/onlinepubs/009696899/utilities/command.html" rel="noreferrer">Standard</a>]</p>
<p>In addition, this will fail if the command you are looking for has been defined as an alias.</p>
</section>
<section id="answer-3-score-199" class="level4">
<h4>Answer 3 (score 199)</h4>
<p>I agree with lhunath to discourage use of <code>which</code>, and his solution is perfectly valid <em>for BASH users</em>. However, to be more portable, <code>command -v</code> shall be used instead:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb471-1"><a href="#cb471-1" aria-hidden="true"></a>$ <span class="bu">command</span> -v foo <span class="op">&gt;</span>/dev/null <span class="op">2&gt;&amp;1</span> <span class="kw">||</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="st">&quot;I require foo but it&#39;s not installed.  Aborting.&quot;</span> <span class="op">&gt;&amp;2</span><span class="kw">;</span> <span class="bu">exit</span> 1<span class="kw">;</span> <span class="kw">}</span></span></code></pre></div>
<p>Command <code>command</code> is POSIX compliant, see here for its specification: <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/command.html" rel="noreferrer">http://pubs.opengroup.org/onlinepubs/9699919799/utilities/command.html</a></p>
<p>Note: <code>type</code> is POSIX compliant, but <code>type -P</code> is not.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="syntax-for-a-single-line-bash-infinite-while-loop-score-601934-in-2017" class="level3">
<h3>57: Syntax for a single-line Bash infinite while loop (score <a href="https://stackoverflow.com/q/1289026.html">601934</a> in 2017)</h3>
<section id="question-56" class="level4">
<h4>Question</h4>
<p>I am having trouble coming up with the right combination of semicolons and/or braces. I’d like to do this, but as a one-liner from the command line:</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true"></a><span class="kw">while</span><span class="bu"> [</span> 1<span class="bu"> ]</span></span>
<span id="cb472-2"><a href="#cb472-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb472-3"><a href="#cb472-3" aria-hidden="true"></a>    <span class="ex">foo</span></span>
<span id="cb472-4"><a href="#cb472-4" aria-hidden="true"></a>    <span class="fu">sleep</span> 2</span>
<span id="cb472-5"><a href="#cb472-5" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-1121" class="level4">
<h4>Answer accepted (score 1121)</h4>
<div class="sourceCode" id="cb473"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb473-1"><a href="#cb473-1" aria-hidden="true"></a><span class="kw">while</span> <span class="fu">true</span><span class="kw">;</span> <span class="kw">do</span> <span class="ex">foo</span><span class="kw">;</span> <span class="fu">sleep</span> 2<span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
<p>By the way, if you type it as a multiline (as you are showing) at the command prompt and then call the history with arrow up, you will get it on a single line, correctly punctuated.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb474-1"><a href="#cb474-1" aria-hidden="true"></a>$ <span class="kw">while</span> <span class="fu">true</span></span>
<span id="cb474-2"><a href="#cb474-2" aria-hidden="true"></a><span class="op">&gt;</span> <span class="kw">do</span></span>
<span id="cb474-3"><a href="#cb474-3" aria-hidden="true"></a><span class="op">&gt;</span>    <span class="bu">echo</span> <span class="st">&quot;hello&quot;</span></span>
<span id="cb474-4"><a href="#cb474-4" aria-hidden="true"></a><span class="op">&gt;</span>    <span class="fu">sleep</span> 2</span>
<span id="cb474-5"><a href="#cb474-5" aria-hidden="true"></a><span class="op">&gt;</span> <span class="kw">done</span></span>
<span id="cb474-6"><a href="#cb474-6" aria-hidden="true"></a><span class="ex">hello</span></span>
<span id="cb474-7"><a href="#cb474-7" aria-hidden="true"></a><span class="ex">hello</span></span>
<span id="cb474-8"><a href="#cb474-8" aria-hidden="true"></a><span class="ex">hello</span></span>
<span id="cb474-9"><a href="#cb474-9" aria-hidden="true"></a>^<span class="ex">C</span></span>
<span id="cb474-10"><a href="#cb474-10" aria-hidden="true"></a>$ <span class="op">&lt;</span><span class="ex">arrow</span> up<span class="op">&gt;</span> while true<span class="kw">;</span> <span class="kw">do</span>    <span class="bu">echo</span> <span class="st">&quot;hello&quot;</span><span class="kw">;</span>    <span class="fu">sleep</span> 2<span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
</section>
<section id="answer-2-score-159" class="level4">
<h4>Answer 2 (score 159)</h4>
<p>It’s also possible to use sleep command in while’s condition. Making one-liner looking more clean imho.</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb475-1"><a href="#cb475-1" aria-hidden="true"></a><span class="kw">while</span> <span class="fu">sleep</span> 2<span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> thinking<span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
</section>
<section id="answer-3-score-67" class="level4">
<h4>Answer 3 (score 67)</h4>
<p>Colon is always “true”:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb476-1"><a href="#cb476-1" aria-hidden="true"></a><span class="kw">while</span> <span class="bu">:</span><span class="kw">;</span> <span class="kw">do</span> <span class="ex">foo</span><span class="kw">;</span> <span class="fu">sleep</span> 2<span class="kw">;</span> <span class="kw">done</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ubuntu-says-bash-.program-permission-denied-score-599338-in-2017" class="level3">
<h3>58: Ubuntu says “bash: ./program Permission denied” (score <a href="https://stackoverflow.com/q/18960689.html">599338</a> in 2017)</h3>
<section id="question-57" class="level4">
<h4>Question</h4>
<p>I am running Ubuntu on computer 1 and computer 2. I compiled a C++ program on computer 1, and I can execute it from the terminal using <code>./program_name</code>. It runs fine.</p>
<p>However, when I try to do this on computer 2, it says: <code>bash: ./program_name: permission denied</code></p>
<p>What’s wrong and what can I do about it?</p>
</section>
<section id="answer-accepted-score-349" class="level4">
<h4>Answer accepted (score 349)</h4>
<p><code>chmod u+x program_name</code>. Then execute it.</p>
<p>If that does not work, copy the program from the USB device to a native volume on the system. Then <code>chmod u+x program_name</code> on the local copy and execute that.</p>
<p>Unix and Unix-like systems generally will not execute a program unless it is marked with permission to execute. The way you copied the file from one system to another (or mounted an external volume) may have turned off execute permission (as a safety feature). The command <code>chmod u+x name</code> adds permission for the user that owns the file to execute it.</p>
<p>That command only changes the permissions associated with the file; it does not change the security controls associated with the entire volume. If it is security controls on the volume that are interfering with execution (for example, a <code>noexec</code> option may be specified for a volume in the Unix <code>fstab</code> file, which says not to allow execute permission for files on the volume), then you can remount the volume with options to allow execution. However, copying the file to a local volume may be a quicker and easier solution.</p>
</section>
<section id="answer-2-score-28" class="level4">
<h4>Answer 2 (score 28)</h4>
<p>Try this:</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb477-1"><a href="#cb477-1" aria-hidden="true"></a><span class="fu">sudo</span> chmod +x program_name</span>
<span id="cb477-2"><a href="#cb477-2" aria-hidden="true"></a><span class="ex">./program_name</span> </span></code></pre></div>
</section>
<section id="answer-3-score-10" class="level4">
<h4>Answer 3 (score 10)</h4>
<p>Sounds like you don’t have the execute flag set on the file permissions, try:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb478-1"><a href="#cb478-1" aria-hidden="true"></a><span class="fu">chmod</span> u+x program_name</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-test-if-a-variable-is-a-number-in-bash-score-596633-in-2017" class="level3">
<h3>59: How do I test if a variable is a number in Bash? (score <a href="https://stackoverflow.com/q/806906.html">596633</a> in 2017)</h3>
<section id="question-58" class="level4">
<h4>Question</h4>
<p>I just can’t figure out how do I make sure an argument passed to my script is a number or not.</p>
<p>All I want to do is something like this:</p>
<div class="sourceCode" id="cb479"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb479-1"><a href="#cb479-1" aria-hidden="true"></a><span class="bu">test</span> *isnumber* <span class="va">$1</span> <span class="kw">&amp;&amp;</span> <span class="va">VAR=$1</span> <span class="kw">||</span> <span class="bu">echo</span> <span class="st">&quot;need a number&quot;</span></span></code></pre></div>
<p>Any help?</p>
</section>
<section id="answer-accepted-score-720" class="level4">
<h4>Answer accepted (score 720)</h4>
<p>One approach is to use a regular expression, like so:</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb480-1"><a href="#cb480-1" aria-hidden="true"></a><span class="va">re=</span><span class="st">&#39;^[0-9]+$&#39;</span></span>
<span id="cb480-2"><a href="#cb480-2" aria-hidden="true"></a><span class="kw">if</span> !<span class="kw"> [[</span> <span class="va">$yournumber</span> =~ <span class="va">$re</span><span class="kw"> ]]</span> ; <span class="kw">then</span></span>
<span id="cb480-3"><a href="#cb480-3" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="st">&quot;error: Not a number&quot;</span> <span class="op">&gt;&amp;2</span><span class="kw">;</span> <span class="bu">exit</span> 1</span>
<span id="cb480-4"><a href="#cb480-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>If the value is not necessarily an integer, consider amending the regex appropriately; for instance:</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb481-1"><a href="#cb481-1" aria-hidden="true"></a>^[<span class="ex">0-9</span>]+([.][0-9]+)<span class="ex">?</span>$</span></code></pre></div>
<p>…or, to handle numbers with a sign:</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb482-1"><a href="#cb482-1" aria-hidden="true"></a>^[<span class="ex">+-</span>]?[0-9]+([.][0-9]+)<span class="ex">?</span>$</span></code></pre></div>
</section>
<section id="answer-2-score-257" class="level4">
<h4>Answer 2 (score 257)</h4>
<p>Without bashisms (works even in the System V sh),</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb483-1"><a href="#cb483-1" aria-hidden="true"></a><span class="kw">case</span> <span class="va">$string</span><span class="kw"> in</span></span>
<span id="cb483-2"><a href="#cb483-2" aria-hidden="true"></a>    <span class="st">&#39;&#39;</span><span class="kw">|</span>*[!0-9]*<span class="kw">)</span> <span class="bu">echo</span> bad <span class="kw">;;</span></span>
<span id="cb483-3"><a href="#cb483-3" aria-hidden="true"></a>    <span class="ex">*</span>) <span class="bu">echo</span> good <span class="kw">;;</span></span>
<span id="cb483-4"><a href="#cb483-4" aria-hidden="true"></a><span class="kw">esac</span></span></code></pre></div>
<p>This rejects empty strings and strings containing non-digits, accepting everything else.</p>
<p>Negative or floating-point numbers need some additional work. An idea is to exclude <code>-</code> / <code>.</code> in the first “bad” pattern and add more “bad” patterns containing the inappropriate uses of them (<code>?*-*</code> / <code>*.*.*</code>)</p>
</section>
<section id="answer-3-score-170" class="level4">
<h4>Answer 3 (score 170)</h4>
<p>The following solution can also be used in basic shells such as Bourne without the need for regular expressions. Basically any numeric value evaluation operations using non-numbers will result in an error which will be implicitly considered as false in shell:</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb484-1"><a href="#cb484-1" aria-hidden="true"></a><span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span> <span class="ex">-eq</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span></span></code></pre></div>
<p>as in:</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb485-1"><a href="#cb485-1" aria-hidden="true"></a></span>
<span id="cb485-2"><a href="#cb485-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb485-3"><a href="#cb485-3" aria-hidden="true"></a></span>
<span id="cb485-4"><a href="#cb485-4" aria-hidden="true"></a><span class="va">var=</span>a</span>
<span id="cb485-5"><a href="#cb485-5" aria-hidden="true"></a></span>
<span id="cb485-6"><a href="#cb485-6" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span><span class="bu"> ]</span> <span class="kw">&amp;&amp;</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span> <span class="ot">-eq</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span><span class="bu"> ]</span> <span class="op">2&gt;</span><span class="ex">/dev/null</span>; <span class="kw">then</span></span>
<span id="cb485-7"><a href="#cb485-7" aria-hidden="true"></a>  <span class="bu">echo</span> number</span>
<span id="cb485-8"><a href="#cb485-8" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb485-9"><a href="#cb485-9" aria-hidden="true"></a>  <span class="bu">echo</span> not a number</span>
<span id="cb485-10"><a href="#cb485-10" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>You can can also test for $? the return code of the operation which is more explicit:</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb486-1"><a href="#cb486-1" aria-hidden="true"></a><span class="bu">[</span> <span class="ot">-n</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span><span class="bu"> ]</span> <span class="kw">&amp;&amp;</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span> <span class="ot">-eq</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span><span class="bu"> ]</span> <span class="op">2&gt;</span><span class="ex">/dev/null</span></span>
<span id="cb486-2"><a href="#cb486-2" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$?</span> <span class="ot">-ne</span> 0<span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb486-3"><a href="#cb486-3" aria-hidden="true"></a>   <span class="bu">echo</span> <span class="va">$var</span> is not number</span>
<span id="cb486-4"><a href="#cb486-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Redirection of standard error is there to hide the “integer expression expected” message that bash prints out in case we do not have a number.</p>
<p><strong>CAVEATS</strong> (thanks to the comments below):</p>
<ul>
<li>
Numbers with decimal points are <em>not</em> identified as valid “numbers”
</li>
<li>
Using <code>[[ ]]</code> instead of <code>[ ]</code> will always evaluate to <code>true</code>
</li>
<li>
Most non-Bash shells will always evaluate this expression as <code>true</code>
</li>
<li>
The behavior in Bash is undocumented and may therefore change without warning
</li>
<li>
If the value includes spaces after the number (e.g. “1 a”) produces error, like <code>bash: [[: 1 a: syntax error in expression (error token is "a")</code>
</li>
<li>
If the value is the same as var-name (e.g. i=“i”), produces error, like <code>bash: [[: i: expression recursion level exceeded (error token is "i")</code>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="open-and-write-data-to-text-file-using-bash-score-586748-in-2019" class="level3">
<h3>60: Open and write data to text file using Bash? (score <a href="https://stackoverflow.com/q/11162406.html">586748</a> in 2019)</h3>
<section id="question-59" class="level4">
<h4>Question</h4>
<p>How can I write data to a text file automatically by shell scripting in Linux?</p>
<p>I was able to open the file. However, I don’t know how to write data to it.</p>
</section>
<section id="answer-accepted-score-338" class="level4">
<h4>Answer accepted (score 338)</h4>
<div class="sourceCode" id="cb487"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb487-1"><a href="#cb487-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;some data for the file&quot;</span> <span class="op">&gt;&gt;</span> fileName</span></code></pre></div>
</section>
<section id="answer-2-score-126" class="level4">
<h4>Answer 2 (score 126)</h4>
<div class="sourceCode" id="cb488"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb488-1"><a href="#cb488-1" aria-hidden="true"></a></span>
<span id="cb488-2"><a href="#cb488-2" aria-hidden="true"></a><span class="co">#!/bin/sh</span></span>
<span id="cb488-3"><a href="#cb488-3" aria-hidden="true"></a></span>
<span id="cb488-4"><a href="#cb488-4" aria-hidden="true"></a><span class="va">FILE=</span><span class="st">&quot;/path/to/file&quot;</span></span>
<span id="cb488-5"><a href="#cb488-5" aria-hidden="true"></a></span>
<span id="cb488-6"><a href="#cb488-6" aria-hidden="true"></a><span class="ex">/bin/cat</span> <span class="op">&lt;&lt;EOM</span> <span class="op">&gt;</span><span class="va">$FILE</span></span>
<span id="cb488-7"><a href="#cb488-7" aria-hidden="true"></a>text1</span>
<span id="cb488-8"><a href="#cb488-8" aria-hidden="true"></a>text2</span>
<span id="cb488-9"><a href="#cb488-9" aria-hidden="true"></a># This comment will be inside of the file.</span>
<span id="cb488-10"><a href="#cb488-10" aria-hidden="true"></a>The keyword EOM can be any text, but it must start the line and be alone.</span>
<span id="cb488-11"><a href="#cb488-11" aria-hidden="true"></a> EOM</span>
<span id="cb488-12"><a href="#cb488-12" aria-hidden="true"></a># This will be also inside of the file, see the space in front of EOM.</span>
<span id="cb488-13"><a href="#cb488-13" aria-hidden="true"></a>EOM</span>
<span id="cb488-14"><a href="#cb488-14" aria-hidden="true"></a># No comments and spaces around here, or it will not work.</span>
<span id="cb488-15"><a href="#cb488-15" aria-hidden="true"></a>text4 </span>
<span id="cb488-16"><a href="#cb488-16" aria-hidden="true"></a>EOM</span></code></pre></div>
</section>
<section id="answer-3-score-52" class="level4">
<h4>Answer 3 (score 52)</h4>
<p>You can redirect the output of a command to a file:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb489-1"><a href="#cb489-1" aria-hidden="true"></a>$ <span class="fu">cat</span> file <span class="op">&gt;</span> copy_file</span></code></pre></div>
<p>or append to it</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb490-1"><a href="#cb490-1" aria-hidden="true"></a>$ <span class="fu">cat</span> file <span class="op">&gt;&gt;</span> copy_file</span></code></pre></div>
<p>If you want to write directly the command is <code>echo 'text'</code></p>
<div class="sourceCode" id="cb491"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb491-1"><a href="#cb491-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&#39;Hello World&#39;</span> <span class="op">&gt;</span> file</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-run-the-sftp-command-with-a-password-from-bash-script-score-581214-in-2017" class="level3">
<h3>61: How to run the sftp command with a password from Bash script? (score <a href="https://stackoverflow.com/q/5386482.html">581214</a> in 2017)</h3>
<section id="question-60" class="level4">
<h4>Question</h4>
<p>I need to transfer a log file to a remote host using <a href="http://en.wikipedia.org/wiki/Secure_file_transfer_program" rel="noreferrer">sftp</a> from a Linux host. I have been provided credentials for the same from my operations group. However, since I don’t have control over other host, I cannot generate and share RSA keys with the other host.</p>
<p>So is there a way to run the <code>sftp</code> command (with the username/password provided) from inside the Bash script through a <a href="http://en.wikipedia.org/wiki/Cron" rel="noreferrer">cron</a> job?</p>
<p>I found a similar Stack Overflow question, <em><a href="https://stackoverflow.com/questions/5268865">Specify password to sftp in a Bash script</a></em>, but there was no satisfactory answer to my problem.</p>
</section>
<section id="answer-accepted-score-167" class="level4">
<h4>Answer accepted (score 167)</h4>
<p>You have a few options other than using public key authentication:</p>
<ol>
<li>
Use <a href="http://www.cyberciti.biz/faq/ssh-passwordless-login-with-keychain-for-scripts/" rel="noreferrer">keychain</a>
</li>
<li>
Use <a href="http://www.cyberciti.biz/faq/noninteractive-shell-script-ssh-password-provider/" rel="noreferrer">sshpass</a> (less secured but probably that meets your requirement)
</li>
<li>
Use <a href="http://www.linux-bsd-central.com/index.php/content/view/26/29/" rel="noreferrer">expect</a> (least secured and more coding needed)
</li>
</ol>
<p>If you decide to give sshpass a chance here is a working script snippet to do so:</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb492-1"><a href="#cb492-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">SSHPASS=</span>your-password-here</span>
<span id="cb492-2"><a href="#cb492-2" aria-hidden="true"></a><span class="ex">sshpass</span> -e sftp -oBatchMode=no -b - sftp-user@remote-host <span class="op">&lt;&lt; !</span></span>
<span id="cb492-3"><a href="#cb492-3" aria-hidden="true"></a>   cd incoming</span>
<span id="cb492-4"><a href="#cb492-4" aria-hidden="true"></a>   put your-log-file.log</span>
<span id="cb492-5"><a href="#cb492-5" aria-hidden="true"></a>   bye</span>
<span id="cb492-6"><a href="#cb492-6" aria-hidden="true"></a>!</span></code></pre></div>
</section>
<section id="answer-2-score-89" class="level4">
<h4>Answer 2 (score 89)</h4>
<p>Another way would be to use lftp:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb493-1"><a href="#cb493-1" aria-hidden="true"></a><span class="ex">lftp</span> sftp://user:password@host  -e <span class="st">&quot;put local-file.name; bye&quot;</span></span></code></pre></div>
<p>The disadvantage of this method is that other users on the computer can read the password from tools like <code>ps</code> and that the password can become part of your shell history.</p>
<p>A more secure alternative which is available since LFTP 4.5.0 is setting the <code>LFTP_PASSWORD</code>environment variable and executing lftp with <code>--env-password</code>. Here’s a full example:</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb494-1"><a href="#cb494-1" aria-hidden="true"></a><span class="va">LFTP_PASSWORD=</span><span class="st">&quot;just_an_example&quot;</span></span>
<span id="cb494-2"><a href="#cb494-2" aria-hidden="true"></a><span class="ex">lftp</span> --env-password sftp://user@host  -e <span class="st">&quot;put local-file.name; bye&quot;</span></span></code></pre></div>
<p>LFTP also includes a cool mirroring feature (can include delete after confirmed transfer ‘–Remove-source-files’):</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb495-1"><a href="#cb495-1" aria-hidden="true"></a><span class="ex">lftp</span> -e <span class="st">&#39;mirror -R /local/log/path/ /remote/path/&#39;</span> --env-password -u user sftp.foo.com</span></code></pre></div>
</section>
<section id="answer-3-score-47" class="level4">
<h4>Answer 3 (score 47)</h4>
<p>Expect is a great program to use.</p>
<p>On Ubuntu install it with:</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb496-1"><a href="#cb496-1" aria-hidden="true"></a><span class="fu">sudo</span> apt-get install expect</span></code></pre></div>
<p>On a CentOS Machine install it with:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb497-1"><a href="#cb497-1" aria-hidden="true"></a><span class="ex">yum</span> install expect</span></code></pre></div>
<p>Lets say you want to make a connection to a sftp server and then upload a local file from your local machine to the remote sftp server</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb498-1"><a href="#cb498-1" aria-hidden="true"></a></span>
<span id="cb498-2"><a href="#cb498-2" aria-hidden="true"></a><span class="co">#!/usr/bin/expect</span></span>
<span id="cb498-3"><a href="#cb498-3" aria-hidden="true"></a></span>
<span id="cb498-4"><a href="#cb498-4" aria-hidden="true"></a><span class="ex">spawn</span> sftp username@hostname.com</span>
<span id="cb498-5"><a href="#cb498-5" aria-hidden="true"></a><span class="ex">expect</span> <span class="st">&quot;password:&quot;</span></span>
<span id="cb498-6"><a href="#cb498-6" aria-hidden="true"></a><span class="ex">send</span> <span class="st">&quot;yourpasswordhere\n&quot;</span></span>
<span id="cb498-7"><a href="#cb498-7" aria-hidden="true"></a><span class="ex">expect</span> <span class="st">&quot;sftp&gt;&quot;</span></span>
<span id="cb498-8"><a href="#cb498-8" aria-hidden="true"></a><span class="ex">send</span> <span class="st">&quot;cd logdirectory\n&quot;</span></span>
<span id="cb498-9"><a href="#cb498-9" aria-hidden="true"></a><span class="ex">expect</span> <span class="st">&quot;sftp&gt;&quot;</span></span>
<span id="cb498-10"><a href="#cb498-10" aria-hidden="true"></a><span class="ex">send</span> <span class="st">&quot;put /var/log/file.log\n&quot;</span></span>
<span id="cb498-11"><a href="#cb498-11" aria-hidden="true"></a><span class="ex">expect</span> <span class="st">&quot;sftp&gt;&quot;</span></span>
<span id="cb498-12"><a href="#cb498-12" aria-hidden="true"></a><span class="ex">send</span> <span class="st">&quot;exit\n&quot;</span></span>
<span id="cb498-13"><a href="#cb498-13" aria-hidden="true"></a><span class="ex">interact</span></span></code></pre></div>
<p>This opens a sftp connection with your password to the server.</p>
<p>Then it goes to the directory where you want to upload your file, in this case “logdirectory”</p>
<p>This uploads a log file from the local directory found at /var/log/ with the files name being file.log to the “logdirectory” on the remote server</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="in-a-bash-script-how-can-i-exit-the-entire-script-if-a-certain-condition-occurs-score-580639-in-2017" class="level3">
<h3>62: In a Bash script, how can I exit the entire script if a certain condition occurs? (score <a href="https://stackoverflow.com/q/1378274.html">580639</a> in 2017)</h3>
<section id="question-61" class="level4">
<h4>Question</h4>
<p>I’m writing a script in Bash to test some code. However, it seems silly to run the tests if compiling the code fails in the first place, in which case I’ll just abort the tests.</p>
<p>Is there a way I can do this without wrapping the entire script inside of a while loop and using breaks? Something like a <strong>dun dun dun</strong> goto?</p>
</section>
<section id="answer-accepted-score-702" class="level4">
<h4>Answer accepted (score 702)</h4>
<p>Try this statement:</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb499-1"><a href="#cb499-1" aria-hidden="true"></a><span class="bu">exit</span> 1</span></code></pre></div>
<p>Replace <code>1</code> with appropriate error codes. See also <a href="http://www.tldp.org/LDP/abs/html/exitcodes.html" rel="noreferrer">Exit Codes With Special Meanings</a>.</p>
</section>
<section id="answer-2-score-651" class="level4">
<h4>Answer 2 (score 651)</h4>
<p>Use <strong>set -e</strong></p>
<div class="sourceCode" id="cb500"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb500-1"><a href="#cb500-1" aria-hidden="true"></a></span>
<span id="cb500-2"><a href="#cb500-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb500-3"><a href="#cb500-3" aria-hidden="true"></a></span>
<span id="cb500-4"><a href="#cb500-4" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-e</span></span>
<span id="cb500-5"><a href="#cb500-5" aria-hidden="true"></a></span>
<span id="cb500-6"><a href="#cb500-6" aria-hidden="true"></a><span class="ex">/bin/command-that-fails</span></span>
<span id="cb500-7"><a href="#cb500-7" aria-hidden="true"></a><span class="ex">/bin/command-that-fails2</span></span></code></pre></div>
<p>The script will terminate after the first line that fails (returns nonzero exit code). In this case, <em>command-that-fails2</em> will not run.</p>
<p>If you were to check the return status of every single command, your script would look like this:</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb501-1"><a href="#cb501-1" aria-hidden="true"></a></span>
<span id="cb501-2"><a href="#cb501-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb501-3"><a href="#cb501-3" aria-hidden="true"></a></span>
<span id="cb501-4"><a href="#cb501-4" aria-hidden="true"></a></span>
<span id="cb501-5"><a href="#cb501-5" aria-hidden="true"></a><span class="co"># I&#39;m assuming you&#39;re using make</span></span>
<span id="cb501-6"><a href="#cb501-6" aria-hidden="true"></a></span>
<span id="cb501-7"><a href="#cb501-7" aria-hidden="true"></a><span class="bu">cd</span> /project-dir</span>
<span id="cb501-8"><a href="#cb501-8" aria-hidden="true"></a><span class="fu">make</span></span>
<span id="cb501-9"><a href="#cb501-9" aria-hidden="true"></a><span class="kw">if [[</span> <span class="va">$?</span> <span class="ot">-ne</span> 0<span class="kw"> ]]</span> ; <span class="kw">then</span></span>
<span id="cb501-10"><a href="#cb501-10" aria-hidden="true"></a>    <span class="bu">exit</span> 1</span>
<span id="cb501-11"><a href="#cb501-11" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb501-12"><a href="#cb501-12" aria-hidden="true"></a></span>
<span id="cb501-13"><a href="#cb501-13" aria-hidden="true"></a><span class="bu">cd</span> /project-dir2</span>
<span id="cb501-14"><a href="#cb501-14" aria-hidden="true"></a><span class="fu">make</span></span>
<span id="cb501-15"><a href="#cb501-15" aria-hidden="true"></a><span class="kw">if [[</span> <span class="va">$?</span> <span class="ot">-ne</span> 0<span class="kw"> ]]</span> ; <span class="kw">then</span></span>
<span id="cb501-16"><a href="#cb501-16" aria-hidden="true"></a>    <span class="bu">exit</span> 1</span>
<span id="cb501-17"><a href="#cb501-17" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>With <strong>set -e</strong> it would look like:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb502-1"><a href="#cb502-1" aria-hidden="true"></a></span>
<span id="cb502-2"><a href="#cb502-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb502-3"><a href="#cb502-3" aria-hidden="true"></a></span>
<span id="cb502-4"><a href="#cb502-4" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-e</span></span>
<span id="cb502-5"><a href="#cb502-5" aria-hidden="true"></a></span>
<span id="cb502-6"><a href="#cb502-6" aria-hidden="true"></a><span class="bu">cd</span> /project-dir</span>
<span id="cb502-7"><a href="#cb502-7" aria-hidden="true"></a><span class="fu">make</span></span>
<span id="cb502-8"><a href="#cb502-8" aria-hidden="true"></a></span>
<span id="cb502-9"><a href="#cb502-9" aria-hidden="true"></a><span class="bu">cd</span> /project-dir2</span>
<span id="cb502-10"><a href="#cb502-10" aria-hidden="true"></a><span class="fu">make</span></span></code></pre></div>
<p>Any command that fails will cause the entire script to fail and return an exit status you can check with <strong>$?</strong>. If your script is very long or you’re building a lot of stuff it’s going to get pretty ugly if you add return status checks everywhere.</p>
</section>
<section id="answer-3-score-206" class="level4">
<h4>Answer 3 (score 206)</h4>
<p>A bad-arse SysOps guy once taught me the Three-Fingered Claw technique:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb503-1"><a href="#cb503-1" aria-hidden="true"></a><span class="fu">yell()</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$0</span><span class="st">: </span><span class="va">$*</span><span class="st">&quot;</span> <span class="op">&gt;&amp;2</span><span class="kw">;</span> <span class="kw">}</span></span>
<span id="cb503-2"><a href="#cb503-2" aria-hidden="true"></a><span class="fu">die()</span> <span class="kw">{</span> <span class="ex">yell</span> <span class="st">&quot;</span><span class="va">$*</span><span class="st">&quot;</span><span class="kw">;</span> <span class="bu">exit</span> 111<span class="kw">;</span> <span class="kw">}</span></span>
<span id="cb503-3"><a href="#cb503-3" aria-hidden="true"></a><span class="fu">try()</span> <span class="kw">{</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> <span class="kw">||</span> <span class="ex">die</span> <span class="st">&quot;cannot </span><span class="va">$*</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">}</span></span></code></pre></div>
<p>These functions are *NIX OS and shell flavor-robust. Put them at the beginning of your script (bash or otherwise), <code>try()</code> your statement and code on.</p>
<h5>
Explanation
</h3>
<p>(based on <a href="https://stackoverflow.com/users/247482/flying-sheep">flying sheep</a> comment).</p>
<ul>
<li>
<p><code>yell</code>: print the script name and all arguments to <code>stderr</code>:</p>
<ul>
<li>
<code>$0</code> is the path to the script ;
</li>
<li>
<code>$*</code> are all arguments.
</li>
<li>
<code>&amp;gt;&amp;amp;2</code> means <em><code>&amp;gt;</code> redirect stdout to &amp; pipe <code>2</code></em>. <em>pipe <code>1</code></em> would be <code>stdout</code> itself.
</li>
</ul>
</li>
<li>
<code>die</code> does the same as <code>yell</code>, but exits with a <em>non-0 exit status</em>, which means “fail”.
</li>
<li>
<p><code>try</code> uses the <code>||</code> (boolean <code>OR</code>), which only evaluates the right side if the left one failed.</p>
<ul>
<li>
<code>$@</code> is all arguments again, but <a href="https://stackoverflow.com/q/9915610/802365">different</a>.
</li>
</ul>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-iterate-over-arguments-in-a-bash-script-score-574001-in-2017" class="level3">
<h3>63: How to iterate over arguments in a Bash script (score <a href="https://stackoverflow.com/q/255898.html">574001</a> in 2017)</h3>
<section id="question-62" class="level4">
<h4>Question</h4>
<p>I have a complex command that I’d like to make a shell/bash script of. I can write it in terms of <code>$1</code> easily:</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb504-1"><a href="#cb504-1" aria-hidden="true"></a><span class="ex">foo</span> <span class="va">$1</span> args -o <span class="va">$1</span>.ext</span></code></pre></div>
<p>I want to be able to pass multiple input names to the script. What’s the right way to do it?</p>
<p>And, of course, I want to handle filenames with spaces in them.</p>
</section>
<section id="answer-accepted-score-1351" class="level4">
<h4>Answer accepted (score 1351)</h4>
<p>Use <code>"$@"</code> to represent all the arguments:</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb505-1"><a href="#cb505-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">var</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></span>
<span id="cb505-2"><a href="#cb505-2" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb505-3"><a href="#cb505-3" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span></span>
<span id="cb505-4"><a href="#cb505-4" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
<p>This will iterate over each argument and print it out on a separate line. $@ behaves like $* except that when quoted the arguments are broken up properly if there are spaces in them:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb506-1"><a href="#cb506-1" aria-hidden="true"></a><span class="fu">sh</span> test.sh 1 2 <span class="st">&#39;3 4&#39;</span></span>
<span id="cb506-2"><a href="#cb506-2" aria-hidden="true"></a><span class="ex">1</span></span>
<span id="cb506-3"><a href="#cb506-3" aria-hidden="true"></a><span class="ex">2</span></span>
<span id="cb506-4"><a href="#cb506-4" aria-hidden="true"></a><span class="ex">3</span> 4</span></code></pre></div>
</section>
<section id="answer-2-score-227" class="level4">
<h4>Answer 2 (score 227)</h4>
<p><sup><em>Rewrite of a now-deleted <a href="https://stackoverflow.com/a/255939/">answer</a> by <a href="https://stackoverflow.com/users/6309/vonc">VonC</a>.</em></sup></p>
<p>
Robert Gamble’s succinct answer deals directly with the question. This one amplifies on some issues with filenames containing spaces.
</p>
<p>See also: <a href="https://stackoverflow.com/questions/154625/1-in-binsh"><span class="math inline">${1:+"$</span>@"} in /bin/sh</a></p>
<p>
<strong>Basic thesis:</strong> <code>"$@"</code> is correct, and <code>$*</code> (unquoted) is almost always wrong. This is because <code>"$@"</code> works fine when arguments contain spaces, and works the same as <code>$*</code> when they don’t. In some circumstances, <code>"$*"</code> is OK too, but <code>"$@"</code> usually (but not always) works in the same places. Unquoted, <code>$@</code> and <code>$*</code> are equivalent (and almost always wrong).
</p>
<p>
So, what is the difference between <code>$*</code>, <code>$@</code>, <code>"$*"</code>, and <code>"$@"</code>? They are all related to ‘all the arguments to the shell’, but they do different things. When unquoted, <code>$*</code> and <code>$@</code> do the same thing. They treat each ‘word’ (sequence of non-whitespace) as a separate argument. The quoted forms are quite different, though: <code>"$*"</code> treats the argument list as a single space-separated string, whereas <code>"$@"</code> treats the arguments almost exactly as they were when specified on the command line. <code>"$@"</code> expands to nothing at all when there are no positional arguments; <code>"$*"</code> expands to an empty string — and yes, there’s a difference, though it can be hard to perceive it. See more information below, after the introduction of the (non-standard) command <code>al</code>.
</p>
<p>
<strong>Secondary thesis:</strong> if you need to process arguments with spaces and then pass them on to other commands, then you sometimes need non-standard tools to assist. (Or you should use arrays, carefully: <code>"${array[@]}"</code> behaves analogously to <code>"$@"</code>.)
</p>
<p><em>Example:</em></p>
<div class="sourceCode" id="cb507"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb507-1"><a href="#cb507-1" aria-hidden="true"></a>    $ <span class="fu">mkdir</span> <span class="st">&quot;my dir&quot;</span> anotherdir</span>
<span id="cb507-2"><a href="#cb507-2" aria-hidden="true"></a>    $ <span class="fu">ls</span></span>
<span id="cb507-3"><a href="#cb507-3" aria-hidden="true"></a>    <span class="ex">anotherdir</span>      my dir</span>
<span id="cb507-4"><a href="#cb507-4" aria-hidden="true"></a>    $ <span class="fu">cp</span> /dev/null <span class="st">&quot;my dir/my file&quot;</span></span>
<span id="cb507-5"><a href="#cb507-5" aria-hidden="true"></a>    $ <span class="fu">cp</span> /dev/null <span class="st">&quot;anotherdir/myfile&quot;</span></span>
<span id="cb507-6"><a href="#cb507-6" aria-hidden="true"></a>    $ <span class="fu">ls</span> -Fltr</span>
<span id="cb507-7"><a href="#cb507-7" aria-hidden="true"></a>    <span class="ex">total</span> 0</span>
<span id="cb507-8"><a href="#cb507-8" aria-hidden="true"></a>    <span class="ex">drwxr-xr-x</span>   3 jleffler  staff  102 Nov  1 14:55 my dir/</span>
<span id="cb507-9"><a href="#cb507-9" aria-hidden="true"></a>    <span class="ex">drwxr-xr-x</span>   3 jleffler  staff  102 Nov  1 14:55 anotherdir/</span>
<span id="cb507-10"><a href="#cb507-10" aria-hidden="true"></a>    $ <span class="fu">ls</span> -Fltr *</span>
<span id="cb507-11"><a href="#cb507-11" aria-hidden="true"></a>    <span class="ex">my</span> dir:</span>
<span id="cb507-12"><a href="#cb507-12" aria-hidden="true"></a>    <span class="ex">total</span> 0</span>
<span id="cb507-13"><a href="#cb507-13" aria-hidden="true"></a>    <span class="ex">-rw-r--r--</span>   1 jleffler  staff  0 Nov  1 14:55 my file</span>
<span id="cb507-14"><a href="#cb507-14" aria-hidden="true"></a></span>
<span id="cb507-15"><a href="#cb507-15" aria-hidden="true"></a>    <span class="ex">anotherdir</span>:</span>
<span id="cb507-16"><a href="#cb507-16" aria-hidden="true"></a>    <span class="ex">total</span> 0</span>
<span id="cb507-17"><a href="#cb507-17" aria-hidden="true"></a>    <span class="ex">-rw-r--r--</span>   1 jleffler  staff  0 Nov  1 14:55 myfile</span>
<span id="cb507-18"><a href="#cb507-18" aria-hidden="true"></a>    $ <span class="fu">ls</span> -Fltr <span class="st">&quot;./my dir&quot;</span> <span class="st">&quot;./anotherdir&quot;</span></span>
<span id="cb507-19"><a href="#cb507-19" aria-hidden="true"></a>    <span class="ex">./my</span> dir:</span>
<span id="cb507-20"><a href="#cb507-20" aria-hidden="true"></a>    <span class="ex">total</span> 0</span>
<span id="cb507-21"><a href="#cb507-21" aria-hidden="true"></a>    <span class="ex">-rw-r--r--</span>   1 jleffler  staff  0 Nov  1 14:55 my file</span>
<span id="cb507-22"><a href="#cb507-22" aria-hidden="true"></a></span>
<span id="cb507-23"><a href="#cb507-23" aria-hidden="true"></a>    <span class="ex">.</span>/anotherdir:</span>
<span id="cb507-24"><a href="#cb507-24" aria-hidden="true"></a>    <span class="ex">total</span> 0</span>
<span id="cb507-25"><a href="#cb507-25" aria-hidden="true"></a>    <span class="ex">-rw-r--r--</span>   1 jleffler  staff  0 Nov  1 14:55 myfile</span>
<span id="cb507-26"><a href="#cb507-26" aria-hidden="true"></a>    $ <span class="va">var=</span><span class="st">&#39;&quot;./my dir&quot; &quot;./anotherdir&quot;&#39;</span> <span class="kw">&amp;&amp;</span> <span class="bu">echo</span> <span class="va">$var</span></span>
<span id="cb507-27"><a href="#cb507-27" aria-hidden="true"></a>    <span class="st">&quot;./my dir&quot;</span> <span class="st">&quot;./anotherdir&quot;</span></span>
<span id="cb507-28"><a href="#cb507-28" aria-hidden="true"></a>    $ <span class="fu">ls</span> -Fltr <span class="va">$var</span></span>
<span id="cb507-29"><a href="#cb507-29" aria-hidden="true"></a>    <span class="ex">ls</span>: <span class="st">&quot;./anotherdir&quot;</span>: No such file or directory</span>
<span id="cb507-30"><a href="#cb507-30" aria-hidden="true"></a>    <span class="ex">ls</span>: <span class="st">&quot;./my: No such file or directory</span></span>
<span id="cb507-31"><a href="#cb507-31" aria-hidden="true"></a><span class="st">    ls: dir&quot;</span>: No such file or directory</span>
<span id="cb507-32"><a href="#cb507-32" aria-hidden="true"></a>    $</span></code></pre></div>
<p>
Why doesn’t that work? It doesn’t work because the shell processes quotes before it expands variables. So, to get the shell to pay attention to the quotes embedded in <code>$var</code>, you have to use <code>eval</code>:
</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb508-1"><a href="#cb508-1" aria-hidden="true"></a>    $ <span class="bu">eval</span> ls -Fltr <span class="va">$var</span></span>
<span id="cb508-2"><a href="#cb508-2" aria-hidden="true"></a>    <span class="ex">./my</span> dir:</span>
<span id="cb508-3"><a href="#cb508-3" aria-hidden="true"></a>    <span class="ex">total</span> 0</span>
<span id="cb508-4"><a href="#cb508-4" aria-hidden="true"></a>    <span class="ex">-rw-r--r--</span>   1 jleffler  staff  0 Nov  1 14:55 my file</span>
<span id="cb508-5"><a href="#cb508-5" aria-hidden="true"></a></span>
<span id="cb508-6"><a href="#cb508-6" aria-hidden="true"></a>    <span class="ex">.</span>/anotherdir:</span>
<span id="cb508-7"><a href="#cb508-7" aria-hidden="true"></a>    <span class="ex">total</span> 0</span>
<span id="cb508-8"><a href="#cb508-8" aria-hidden="true"></a>    <span class="ex">-rw-r--r--</span>   1 jleffler  staff  0 Nov  1 14:55 myfile</span>
<span id="cb508-9"><a href="#cb508-9" aria-hidden="true"></a>    $ </span></code></pre></div>
<p>
This gets really tricky when you have file names such as “<code>He said,”Don’t do this!“</code>” (with quotes and double quotes and spaces).
</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb509-1"><a href="#cb509-1" aria-hidden="true"></a>    $ <span class="fu">cp</span> /dev/null <span class="st">&quot;He said, </span><span class="dt">\&quot;</span><span class="st">Don&#39;t do this!</span><span class="dt">\&quot;</span><span class="st">&quot;</span></span>
<span id="cb509-2"><a href="#cb509-2" aria-hidden="true"></a>    $ <span class="fu">ls</span></span>
<span id="cb509-3"><a href="#cb509-3" aria-hidden="true"></a>    <span class="ex">He</span> said, <span class="st">&quot;Don&#39;t do this!&quot;</span>       anotherdir                      my dir</span>
<span id="cb509-4"><a href="#cb509-4" aria-hidden="true"></a>    $ <span class="fu">ls</span> -l</span>
<span id="cb509-5"><a href="#cb509-5" aria-hidden="true"></a>    <span class="ex">total</span> 0</span>
<span id="cb509-6"><a href="#cb509-6" aria-hidden="true"></a>    <span class="ex">-rw-r--r--</span>   1 jleffler  staff    0 Nov  1 15:54 He said, <span class="st">&quot;Don&#39;t do this!&quot;</span></span>
<span id="cb509-7"><a href="#cb509-7" aria-hidden="true"></a>    <span class="ex">drwxr-xr-x</span>   3 jleffler  staff  102 Nov  1 14:55 anotherdir</span>
<span id="cb509-8"><a href="#cb509-8" aria-hidden="true"></a>    <span class="ex">drwxr-xr-x</span>   3 jleffler  staff  102 Nov  1 14:55 my dir</span>
<span id="cb509-9"><a href="#cb509-9" aria-hidden="true"></a>    $ </span></code></pre></div>
<p>
The shells (all of them) do not make it particularly easy to handle such stuff, so (funnily enough) many Unix programs do not do a good job of handling them. On Unix, a filename (single component) can contain any characters except slash and NUL <code>'\0'</code>. However, the shells strongly encourage no spaces or newlines or tabs anywhere in a path names. It is also why standard Unix file names do not contain spaces, etc.
</p>
<p>
When dealing with file names that may contain spaces and other troublesome characters, you have to be extremely careful, and I found long ago that I needed a program that is not standard on Unix. I call it <code>escape</code> (version 1.1 was dated 1989-08-23T16:01:45Z).
</p>
<p>
Here is an example of <code>escape</code> in use - with the SCCS control system. It is a cover script that does both a <code>delta</code> (think <em>check-in</em>) and a <code>get</code> (think <em>check-out</em>). Various arguments, especially <code>-y</code> (the reason why you made the change) would contain blanks and newlines. Note that the script dates from 1992, so it uses back-ticks instead of <code>$(cmd ...)</code> notation and does not use <code>#!/bin/sh</code> on the first line.
</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb510-1"><a href="#cb510-1" aria-hidden="true"></a><span class="bu">:</span>   <span class="st">&quot;@(</span></span>
<span id="cb510-2"><a href="#cb510-2" aria-hidden="true"></a><span class="st">#)</span><span class="va">$Id</span><span class="st">: delget.sh,v 1.8 1992/12/29 10:46:21 jl Exp $&quot;</span></span>
<span id="cb510-3"><a href="#cb510-3" aria-hidden="true"></a></span>
<span id="cb510-4"><a href="#cb510-4" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb510-5"><a href="#cb510-5" aria-hidden="true"></a></span>
<span id="cb510-6"><a href="#cb510-6" aria-hidden="true"></a><span class="co">#   Delta and get files</span></span>
<span id="cb510-7"><a href="#cb510-7" aria-hidden="true"></a></span>
<span id="cb510-8"><a href="#cb510-8" aria-hidden="true"></a><span class="co">#   Uses escape to allow for all weird combinations of quotes in arguments</span></span>
<span id="cb510-9"><a href="#cb510-9" aria-hidden="true"></a></span>
<span id="cb510-10"><a href="#cb510-10" aria-hidden="true"></a><span class="kw">case</span> <span class="kw">`</span><span class="fu">basename</span> <span class="va">$0</span> .sh<span class="kw">` in</span></span>
<span id="cb510-11"><a href="#cb510-11" aria-hidden="true"></a>deledit<span class="kw">)</span>    <span class="va">eflag=</span><span class="st">&quot;-e&quot;</span><span class="kw">;;</span></span>
<span id="cb510-12"><a href="#cb510-12" aria-hidden="true"></a><span class="kw">esac</span></span>
<span id="cb510-13"><a href="#cb510-13" aria-hidden="true"></a></span>
<span id="cb510-14"><a href="#cb510-14" aria-hidden="true"></a><span class="va">sflag=</span><span class="st">&quot;-s&quot;</span></span>
<span id="cb510-15"><a href="#cb510-15" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">arg</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></span>
<span id="cb510-16"><a href="#cb510-16" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb510-17"><a href="#cb510-17" aria-hidden="true"></a>    <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$arg</span><span class="st">&quot;</span><span class="kw"> in</span></span>
<span id="cb510-18"><a href="#cb510-18" aria-hidden="true"></a>    -r*<span class="kw">)</span>    <span class="va">gargs=</span><span class="st">&quot;</span><span class="va">$gargs</span><span class="st"> </span><span class="kw">`</span><span class="ex">escape</span> <span class="dt">\&quot;</span><span class="va">$arg</span><span class="dt">\&quot;</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb510-19"><a href="#cb510-19" aria-hidden="true"></a>            <span class="va">dargs=</span><span class="st">&quot;</span><span class="va">$dargs</span><span class="st"> </span><span class="kw">`</span><span class="ex">escape</span> <span class="dt">\&quot;</span><span class="va">$arg</span><span class="dt">\&quot;</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb510-20"><a href="#cb510-20" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb510-21"><a href="#cb510-21" aria-hidden="true"></a>    -e<span class="kw">)</span>     <span class="va">gargs=</span><span class="st">&quot;</span><span class="va">$gargs</span><span class="st"> </span><span class="kw">`</span><span class="ex">escape</span> <span class="dt">\&quot;</span><span class="va">$arg</span><span class="dt">\&quot;</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb510-22"><a href="#cb510-22" aria-hidden="true"></a>            <span class="va">sflag=</span><span class="st">&quot;&quot;</span></span>
<span id="cb510-23"><a href="#cb510-23" aria-hidden="true"></a>            <span class="va">eflag=</span><span class="st">&quot;&quot;</span></span>
<span id="cb510-24"><a href="#cb510-24" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb510-25"><a href="#cb510-25" aria-hidden="true"></a>    -*<span class="kw">)</span>     <span class="va">dargs=</span><span class="st">&quot;</span><span class="va">$dargs</span><span class="st"> </span><span class="kw">`</span><span class="ex">escape</span> <span class="dt">\&quot;</span><span class="va">$arg</span><span class="dt">\&quot;</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb510-26"><a href="#cb510-26" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb510-27"><a href="#cb510-27" aria-hidden="true"></a>    *<span class="kw">)</span>      <span class="va">gargs=</span><span class="st">&quot;</span><span class="va">$gargs</span><span class="st"> </span><span class="kw">`</span><span class="ex">escape</span> <span class="dt">\&quot;</span><span class="va">$arg</span><span class="dt">\&quot;</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb510-28"><a href="#cb510-28" aria-hidden="true"></a>            <span class="va">dargs=</span><span class="st">&quot;</span><span class="va">$dargs</span><span class="st"> </span><span class="kw">`</span><span class="ex">escape</span> <span class="dt">\&quot;</span><span class="va">$arg</span><span class="dt">\&quot;</span><span class="kw">`</span><span class="st">&quot;</span></span>
<span id="cb510-29"><a href="#cb510-29" aria-hidden="true"></a>            <span class="kw">;;</span></span>
<span id="cb510-30"><a href="#cb510-30" aria-hidden="true"></a>    <span class="kw">esac</span></span>
<span id="cb510-31"><a href="#cb510-31" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb510-32"><a href="#cb510-32" aria-hidden="true"></a></span>
<span id="cb510-33"><a href="#cb510-33" aria-hidden="true"></a><span class="bu">eval</span> delta <span class="st">&quot;</span><span class="va">$dargs</span><span class="st">&quot;</span> <span class="kw">&amp;&amp;</span> <span class="bu">eval</span> get <span class="va">$eflag</span> <span class="va">$sflag</span> <span class="st">&quot;</span><span class="va">$gargs</span><span class="st">&quot;</span></span></code></pre></div>
<p>
(I would probably not use escape quite so thoroughly these days - it is not needed with the <code>-e</code> argument, for example - but overall, this is one of my simpler scripts using <code>escape</code>.)
</p>
<p>
The <code>escape</code> program simply outputs its arguments, rather like <code>echo</code> does, but it ensures that the arguments are protected for use with <code>eval</code> (one level of <code>eval</code>; I do have a program which did remote shell execution, and that needed to escape the output of <code>escape</code>).
</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb511-1"><a href="#cb511-1" aria-hidden="true"></a>    $ <span class="ex">escape</span> <span class="va">$var</span></span>
<span id="cb511-2"><a href="#cb511-2" aria-hidden="true"></a>    <span class="st">&#39;&quot;./my&#39;</span> <span class="st">&#39;dir&quot;&#39;</span> <span class="st">&#39;&quot;./anotherdir&quot;&#39;</span></span>
<span id="cb511-3"><a href="#cb511-3" aria-hidden="true"></a>    $ <span class="ex">escape</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span></span>
<span id="cb511-4"><a href="#cb511-4" aria-hidden="true"></a>    <span class="st">&#39;&quot;./my dir&quot; &quot;./anotherdir&quot;&#39;</span></span>
<span id="cb511-5"><a href="#cb511-5" aria-hidden="true"></a>    $ <span class="ex">escape</span> x y z</span>
<span id="cb511-6"><a href="#cb511-6" aria-hidden="true"></a>    <span class="ex">x</span> y z</span>
<span id="cb511-7"><a href="#cb511-7" aria-hidden="true"></a>    $ </span></code></pre></div>
<p>
I have another program called <code>al</code> that lists its arguments one per line (and it is even more ancient: version 1.1 dated 1987-01-27T14:35:49). It is most useful when debugging scripts, as it can be plugged into a command line to see what arguments are actually passed to the command.
</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb512-1"><a href="#cb512-1" aria-hidden="true"></a>    $ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span></span>
<span id="cb512-2"><a href="#cb512-2" aria-hidden="true"></a>    <span class="st">&quot;./my dir&quot;</span> <span class="st">&quot;./anotherdir&quot;</span></span>
<span id="cb512-3"><a href="#cb512-3" aria-hidden="true"></a>    $ <span class="ex">al</span> <span class="va">$var</span></span>
<span id="cb512-4"><a href="#cb512-4" aria-hidden="true"></a>    <span class="st">&quot;./my</span></span>
<span id="cb512-5"><a href="#cb512-5" aria-hidden="true"></a><span class="st">    dir&quot;</span></span>
<span id="cb512-6"><a href="#cb512-6" aria-hidden="true"></a>    <span class="st">&quot;./anotherdir&quot;</span></span>
<span id="cb512-7"><a href="#cb512-7" aria-hidden="true"></a>    $ <span class="ex">al</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span></span>
<span id="cb512-8"><a href="#cb512-8" aria-hidden="true"></a>    <span class="st">&quot;./my dir&quot;</span> <span class="st">&quot;./anotherdir&quot;</span></span>
<span id="cb512-9"><a href="#cb512-9" aria-hidden="true"></a>    $</span></code></pre></div>
<p>
[<em>Added:</em> And now to show the difference between the various <code>"$@"</code> notations, here is one more example:
</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb513-1"><a href="#cb513-1" aria-hidden="true"></a>$ <span class="fu">cat</span> xx.sh</span>
<span id="cb513-2"><a href="#cb513-2" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">-x</span></span>
<span id="cb513-3"><a href="#cb513-3" aria-hidden="true"></a><span class="ex">al</span> <span class="va">$@</span></span>
<span id="cb513-4"><a href="#cb513-4" aria-hidden="true"></a><span class="ex">al</span> <span class="va">$*</span></span>
<span id="cb513-5"><a href="#cb513-5" aria-hidden="true"></a><span class="ex">al</span> <span class="st">&quot;</span><span class="va">$*</span><span class="st">&quot;</span></span>
<span id="cb513-6"><a href="#cb513-6" aria-hidden="true"></a><span class="ex">al</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></span>
<span id="cb513-7"><a href="#cb513-7" aria-hidden="true"></a>$ <span class="fu">sh</span> xx.sh     *      */*</span>
<span id="cb513-8"><a href="#cb513-8" aria-hidden="true"></a><span class="ex">+</span> al He said, <span class="st">&#39;&quot;Don&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;t&#39;</span> do <span class="st">&#39;this!&quot;&#39;</span> anotherdir my dir xx.sh anotherdir/myfile my dir/my file</span>
<span id="cb513-9"><a href="#cb513-9" aria-hidden="true"></a><span class="ex">He</span></span>
<span id="cb513-10"><a href="#cb513-10" aria-hidden="true"></a><span class="ex">said</span>,</span>
<span id="cb513-11"><a href="#cb513-11" aria-hidden="true"></a><span class="st">&quot;Don&#39;t</span></span>
<span id="cb513-12"><a href="#cb513-12" aria-hidden="true"></a><span class="st">do</span></span>
<span id="cb513-13"><a href="#cb513-13" aria-hidden="true"></a><span class="st">this!&quot;</span></span>
<span id="cb513-14"><a href="#cb513-14" aria-hidden="true"></a><span class="ex">anotherdir</span></span>
<span id="cb513-15"><a href="#cb513-15" aria-hidden="true"></a><span class="ex">my</span></span>
<span id="cb513-16"><a href="#cb513-16" aria-hidden="true"></a><span class="fu">dir</span></span>
<span id="cb513-17"><a href="#cb513-17" aria-hidden="true"></a><span class="ex">xx.sh</span></span>
<span id="cb513-18"><a href="#cb513-18" aria-hidden="true"></a><span class="ex">anotherdir/myfile</span></span>
<span id="cb513-19"><a href="#cb513-19" aria-hidden="true"></a><span class="ex">my</span></span>
<span id="cb513-20"><a href="#cb513-20" aria-hidden="true"></a><span class="ex">dir/my</span></span>
<span id="cb513-21"><a href="#cb513-21" aria-hidden="true"></a><span class="fu">file</span></span>
<span id="cb513-22"><a href="#cb513-22" aria-hidden="true"></a><span class="ex">+</span> al He said, <span class="st">&#39;&quot;Don&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;t&#39;</span> do <span class="st">&#39;this!&quot;&#39;</span> anotherdir my dir xx.sh anotherdir/myfile my dir/my file</span>
<span id="cb513-23"><a href="#cb513-23" aria-hidden="true"></a><span class="ex">He</span></span>
<span id="cb513-24"><a href="#cb513-24" aria-hidden="true"></a><span class="ex">said</span>,</span>
<span id="cb513-25"><a href="#cb513-25" aria-hidden="true"></a><span class="st">&quot;Don&#39;t</span></span>
<span id="cb513-26"><a href="#cb513-26" aria-hidden="true"></a><span class="st">do</span></span>
<span id="cb513-27"><a href="#cb513-27" aria-hidden="true"></a><span class="st">this!&quot;</span></span>
<span id="cb513-28"><a href="#cb513-28" aria-hidden="true"></a><span class="ex">anotherdir</span></span>
<span id="cb513-29"><a href="#cb513-29" aria-hidden="true"></a><span class="ex">my</span></span>
<span id="cb513-30"><a href="#cb513-30" aria-hidden="true"></a><span class="fu">dir</span></span>
<span id="cb513-31"><a href="#cb513-31" aria-hidden="true"></a><span class="ex">xx.sh</span></span>
<span id="cb513-32"><a href="#cb513-32" aria-hidden="true"></a><span class="ex">anotherdir/myfile</span></span>
<span id="cb513-33"><a href="#cb513-33" aria-hidden="true"></a><span class="ex">my</span></span>
<span id="cb513-34"><a href="#cb513-34" aria-hidden="true"></a><span class="ex">dir/my</span></span>
<span id="cb513-35"><a href="#cb513-35" aria-hidden="true"></a><span class="fu">file</span></span>
<span id="cb513-36"><a href="#cb513-36" aria-hidden="true"></a><span class="ex">+</span> al <span class="st">&#39;He said, &quot;Don&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;t do this!&quot; anotherdir my dir xx.sh anotherdir/myfile my dir/my file&#39;</span></span>
<span id="cb513-37"><a href="#cb513-37" aria-hidden="true"></a><span class="ex">He</span> said, <span class="st">&quot;Don&#39;t do this!&quot;</span> anotherdir my dir xx.sh anotherdir/myfile my dir/my file</span>
<span id="cb513-38"><a href="#cb513-38" aria-hidden="true"></a><span class="ex">+</span> al <span class="st">&#39;He said, &quot;Don&#39;</span><span class="dt">\&#39;</span><span class="st">&#39;t do this!&quot;&#39;</span> anotherdir <span class="st">&#39;my dir&#39;</span> xx.sh anotherdir/myfile <span class="st">&#39;my dir/my file&#39;</span></span>
<span id="cb513-39"><a href="#cb513-39" aria-hidden="true"></a><span class="ex">He</span> said, <span class="st">&quot;Don&#39;t do this!&quot;</span></span>
<span id="cb513-40"><a href="#cb513-40" aria-hidden="true"></a><span class="ex">anotherdir</span></span>
<span id="cb513-41"><a href="#cb513-41" aria-hidden="true"></a><span class="ex">my</span> dir</span>
<span id="cb513-42"><a href="#cb513-42" aria-hidden="true"></a><span class="ex">xx.sh</span></span>
<span id="cb513-43"><a href="#cb513-43" aria-hidden="true"></a><span class="ex">anotherdir/myfile</span></span>
<span id="cb513-44"><a href="#cb513-44" aria-hidden="true"></a><span class="ex">my</span> dir/my file</span>
<span id="cb513-45"><a href="#cb513-45" aria-hidden="true"></a>$</span></code></pre></div>
<p>Notice that nothing preserves the original blanks between the <code>*</code> and <code>*/*</code> on the command line. Also, note that you can change the ‘command line arguments’ in the shell by using:</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb514-1"><a href="#cb514-1" aria-hidden="true"></a><span class="kw">set</span> <span class="ex">--</span> -new -opt and <span class="st">&quot;arg with space&quot;</span></span></code></pre></div>
<p>
This sets 4 options, ‘<code>-new</code>’, ‘<code>-opt</code>’, ‘<code>and</code>’, and ‘<code>arg with space</code>’. <br> ]
</p>
<p>
Hmm, that’s quite a long <em>answer</em> - perhaps <em>exegesis</em> is the better term. Source code for <code>escape</code> available on request (email to firstname dot lastname at gmail dot com). The source code for <code>al</code> is incredibly simple:
</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb515-1"><a href="#cb515-1" aria-hidden="true"></a></span>
<span id="cb515-2"><a href="#cb515-2" aria-hidden="true"></a><span class="co">#include &lt;stdio.h&gt;</span></span>
<span id="cb515-3"><a href="#cb515-3" aria-hidden="true"></a><span class="ex">int</span> main(int argc, char **argv)</span>
<span id="cb515-4"><a href="#cb515-4" aria-hidden="true"></a><span class="kw">{</span></span>
<span id="cb515-5"><a href="#cb515-5" aria-hidden="true"></a>    <span class="kw">while</span> <span class="kw">(</span><span class="ex">*++argv</span> != 0<span class="kw">)</span></span>
<span id="cb515-6"><a href="#cb515-6" aria-hidden="true"></a>        <span class="ex">puts</span>(*argv);</span>
<span id="cb515-7"><a href="#cb515-7" aria-hidden="true"></a>    <span class="bu">return</span>(0);</span>
<span id="cb515-8"><a href="#cb515-8" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p>That’s all. It is equivalent to the <code>test.sh</code> script that Robert Gamble showed, and could be written as a shell function (but shell functions didn’t exist in the local version of Bourne shell when I first wrote <code>al</code>).</p>
<p>Also note that you can write <code>al</code> as a simple shell script:</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb516-1"><a href="#cb516-1" aria-hidden="true"></a><span class="bu">[</span> $</span>
<span id="cb516-2"><a href="#cb516-2" aria-hidden="true"></a><span class="co"># != 0 ] &amp;&amp; printf &quot;%s\n&quot; &quot;$@&quot;</span></span></code></pre></div>
<p>The conditional is needed so that it produces no output when passed no arguments. The <code>printf</code> command will produce a blank line with only the format string argument, but the C program produces nothing.</p>
</section>
<section id="answer-3-score-124" class="level4">
<h4>Answer 3 (score 124)</h4>
<p>Note that Robert’s answer is correct, and it works in <code>sh</code> as well. You can (portably) simplify it even further:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb517-1"><a href="#cb517-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></span></code></pre></div>
<p>is equivalent to:</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb518-1"><a href="#cb518-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span></span></code></pre></div>
<p>I.e., you don’t need anything!</p>
<p>Testing (<code>$</code> is command prompt):</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb519-1"><a href="#cb519-1" aria-hidden="true"></a>$ <span class="kw">set</span> <span class="ex">a</span> b <span class="st">&quot;spaces here&quot;</span> d</span>
<span id="cb519-2"><a href="#cb519-2" aria-hidden="true"></a>$ <span class="kw">for</span> <span class="ex">i</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$i</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">done</span></span>
<span id="cb519-3"><a href="#cb519-3" aria-hidden="true"></a><span class="ex">a</span></span>
<span id="cb519-4"><a href="#cb519-4" aria-hidden="true"></a><span class="ex">b</span></span>
<span id="cb519-5"><a href="#cb519-5" aria-hidden="true"></a><span class="ex">spaces</span> here</span>
<span id="cb519-6"><a href="#cb519-6" aria-hidden="true"></a><span class="ex">d</span></span>
<span id="cb519-7"><a href="#cb519-7" aria-hidden="true"></a>$ <span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$i</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">done</span></span>
<span id="cb519-8"><a href="#cb519-8" aria-hidden="true"></a><span class="ex">a</span></span>
<span id="cb519-9"><a href="#cb519-9" aria-hidden="true"></a><span class="ex">b</span></span>
<span id="cb519-10"><a href="#cb519-10" aria-hidden="true"></a><span class="ex">spaces</span> here</span>
<span id="cb519-11"><a href="#cb519-11" aria-hidden="true"></a><span class="ex">d</span></span></code></pre></div>
<p>I first read about this in <em>Unix Programming Environment</em> by Kernighan and Pike.</p>
<p>In <code>bash</code>, <code>help for</code> documents this:</p>
<blockquote>
<p><code>for NAME [in WORDS ... ;] do COMMANDS; done</code></p>
If <code>'in WORDS ...;'</code> is not present, then <code>'in "$@"'</code> is assumed.
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-do-you-need-to-put-binbash-at-the-beginning-of-a-script-file-score-573690-in-2018" class="level3">
<h3>64: Why do you need to put #!/bin/bash at the beginning of a script file? (score <a href="https://stackoverflow.com/q/8967902.html">573690</a> in 2018)</h3>
<section id="question-63" class="level4">
<h4>Question</h4>
<p>I have made <a href="http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29" rel="noreferrer">Bash</a> scripts before and they all ran fine without this at the beginning. What’s the point of putting it in? Would things be any different?</p>
<p>Also, how do you pronounce <code>#</code>? I know that <code>!</code> is pronounced as “bang.”</p>
<p>How is <code>#!</code> pronounced?</p>
</section>
<section id="answer-accepted-score-398" class="level4">
<h4>Answer accepted (score 398)</h4>
<p>It’s a convention so the *nix shell knows what kind of interpreter to run.</p>
<p>For example, older flavors of ATT defaulted to <em>sh</em> (the Bourne shell), while older versions of BSD defaulted to <em>csh</em> (the C shell).</p>
<p>Even today (where most systems run bash, the <em>“Bourne Again Shell”</em>), scripts can be in bash, python, perl, ruby, PHP, etc, etc. For example, you might see <code>#!/bin/perl</code> or <code>#!/bin/perl5</code>.</p>
<p>
PS: The exclamation mark (<code>!</code>) is affectionately called <em>“bang”</em>. The shell comment symbol (<code>#</code>) is sometimes called <em>“hash”</em>.
</p>
<p>
PPS: Remember - under *nix, associating a suffix with a file type is merely a <em>convention</em>, not a <em>“rule”</em>. An <em>executable</em> can be a binary program, any one of a million script types and other things as well. Hence the need for <code>#!/bin/bash</code>.
</p>
</section>
<section id="answer-2-score-124" class="level4">
<h4>Answer 2 (score 124)</h4>
<p>To be more precise the <a href="https://en.wikipedia.org/wiki/Shebang_%28Unix%29" rel="noreferrer">shebang</a> <code>#!</code>, when it is the first two bytes of an <em>executable</em> (<code>x</code> <a href="https://en.wikipedia.org/wiki/Modes_%28Unix%29" rel="noreferrer">mode</a>) file, is interpreted by the <a href="http://linux.die.net/man/2/execve" rel="noreferrer">execve(2)</a> system call (which execute programs). But <a href="http://pubs.opengroup.org/onlinepubs/009695299/functions/execve.html" rel="noreferrer">POSIX specification for <code>execve</code></a> don’t mention the shebang.</p>
<p>It must be followed by a file path of an interpreter executable (which BTW could even be relative, but most often is absolute).</p>
<p>A nice trick (or perhaps <a href="https://unix.stackexchange.com/a/29620/50557">not so nice</a> one) to find an interpreter (e.g. <code>python</code>) in the user’s <code>$PATH</code> is to use the <code>env</code> program (always at <code>/usr/bin/env</code> on all Linux) like e.g. </p>
<div class="sourceCode" id="cb520"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb520-1"><a href="#cb520-1" aria-hidden="true"></a></span>
<span id="cb520-2"><a href="#cb520-2" aria-hidden="true"></a><span class="co">#!/usr/bin/env python</span></span></code></pre></div>
<p>Any ELF executable can be an interpreter. You could even use <code>#!/bin/cat</code> or <code>#!/bin/true</code> if you wanted to! (but that would be often useless)</p>
</section>
<section id="answer-3-score-47-1" class="level4">
<h4>Answer 3 (score 47)</h4>
<p>It’s called a <a href="http://en.wikipedia.org/wiki/Shebang_%28Unix%29">shebang</a>. In unix-speak, # is called sharp (like in music) or hash (like hashtags on twitter), and ! is called bang. (You can actually reference your previous shell command with !!, called bang-bang). So when put together, you get haSH-BANG, or shebang.</p>
<p>The part after the #! tells Unix what program to use to run it. If it isn’t specified, it will try with bash (or sh, or zsh, or whatever your $SHELL variable is) but if it’s there it will use that program. Plus, # is a comment in most languages, so the line gets ignored in the subsequent execution.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-obtain-the-number-of-cpuscores-in-linux-from-the-command-line-score-571310-in-2015" class="level3">
<h3>65: How to obtain the number of CPUs/cores in Linux from the command line? (score <a href="https://stackoverflow.com/q/6481005.html">571310</a> in 2015)</h3>
<section id="question-64" class="level4">
<h4>Question</h4>
<p>I have this script, but I do not know how to get the last element in the printout:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb521-1"><a href="#cb521-1" aria-hidden="true"></a><span class="fu">cat</span> /proc/cpuinfo <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^processor/{print $3}&#39;</span></span></code></pre></div>
<p>The last element should be the number of CPUs, minus 1.</p>
</section>
<section id="answer-accepted-score-595" class="level4">
<h4>Answer accepted (score 595)</h4>
<div class="sourceCode" id="cb522"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb522-1"><a href="#cb522-1" aria-hidden="true"></a><span class="fu">cat</span> /proc/cpuinfo <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/^processor/{print $3}&#39;</span> <span class="kw">|</span> <span class="fu">wc</span> -l</span></code></pre></div>
<p>or simply</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb523-1"><a href="#cb523-1" aria-hidden="true"></a><span class="fu">grep</span> -c ^processor /proc/cpuinfo     </span></code></pre></div>
<p>which will count the number of lines starting with “processor” in <code>/proc/cpuinfo</code></p>
<p>For systems with hyper-threading, you can use</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb524-1"><a href="#cb524-1" aria-hidden="true"></a><span class="fu">grep</span> ^cpu<span class="dt">\\</span>scores /proc/cpuinfo <span class="kw">|</span> <span class="fu">uniq</span> <span class="kw">|</span>  <span class="fu">awk</span> <span class="st">&#39;{print $4}&#39;</span> </span></code></pre></div>
<p>which should return (for example) <code>8</code> (whereas the command above would return <code>16</code>)</p>
</section>
<section id="answer-2-score-596" class="level4">
<h4>Answer 2 (score 596)</h4>
<p>Processing the contents of <code>/proc/cpuinfo</code> is needlessly baroque. Use <a href="http://www.gnu.org/software/coreutils/manual/html_node/nproc-invocation.html" rel="noreferrer"><strong>nproc</strong></a> which is part of coreutils, so it should be available on most Linux installs.</p>
<p>Command <code>nproc</code> prints the number of processing units available to the current process, which may be less than the number of online processors.</p>
<p>To find the number of all installed cores/processors use <code>nproc --all</code></p>
<p>On my 8-core machine:</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb525-1"><a href="#cb525-1" aria-hidden="true"></a>$ <span class="ex">nproc</span> --all</span>
<span id="cb525-2"><a href="#cb525-2" aria-hidden="true"></a><span class="ex">8</span></span></code></pre></div>
</section>
<section id="answer-3-score-243" class="level4">
<h4>Answer 3 (score 243)</h4>
<p>The most portable solution I have found is the <code>getconf</code> command:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb526-1"><a href="#cb526-1" aria-hidden="true"></a><span class="ex">getconf</span> _NPROCESSORS_ONLN</span></code></pre></div>
<p>This works on both Linux and Mac OS X. Another benefit of this over some of the other approaches is that getconf has been around for a long time. Some of the older Linux machines I have to do development on don’t have the <code>nproc</code> or <code>lscpu</code> commands available, but they have <code>getconf</code>.</p>
<p>
<sup>Editor’s note: While <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/getconf.html" rel="noreferrer">the <code>getconf</code> <em>utility</em> is POSIX-mandated</a>, the specific <code>_NPROCESSORS_ONLN</code> and <code>_NPROCESSORS_CONF</code> <em>values</em> are not. That said, as stated, they work on Linux platforms as well as on macOS; on FreeBSD/PC-BSD, you must omit the leading <code>_</code>.</sup>
</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-redirect-output-to-a-file-and-stdout-score-560328-in-2014" class="level3">
<h3>66: How to redirect output to a file and stdout (score <a href="https://stackoverflow.com/q/418896.html">560328</a> in 2014)</h3>
<section id="question-65" class="level4">
<h4>Question</h4>
<p>In bash, calling <code>foo</code> would display any output from that command on the stdout.</p>
<p>Calling <code>foo &amp;gt; output</code> would redirect any output from that command to the file specified (in this case ‘output’).</p>
<p>Is there a way to redirect output to a file <em>and</em> have it display on stdout?</p>
</section>
<section id="answer-accepted-score-1200" class="level4">
<h4>Answer accepted (score 1200)</h4>
<p>The command you want is named <strong><a href="http://www.gnu.org/software/coreutils/manual/html_node/tee-invocation.html" rel="noreferrer"><code>tee</code></a></strong>:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb527-1"><a href="#cb527-1" aria-hidden="true"></a><span class="ex">foo</span> <span class="kw">|</span> <span class="fu">tee</span> output.file</span></code></pre></div>
<p>For example, if you only care about stdout:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb528-1"><a href="#cb528-1" aria-hidden="true"></a><span class="fu">ls</span> -a <span class="kw">|</span> <span class="fu">tee</span> output.file</span></code></pre></div>
<p>If you want to include stderr, do:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb529-1"><a href="#cb529-1" aria-hidden="true"></a><span class="ex">program</span> [arguments...] <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">tee</span> outfile</span></code></pre></div>
<p><code>2&amp;gt;&amp;amp;1</code> redirects channel 2 (stderr/standard error) into channel 1 (stdout/standard output), such that both is written as stdout. It is also directed to the given output file as of the <code>tee</code> command.</p>
<p>Furthermore, if you want to <em>append</em> to the log file, use <code>tee -a</code> as:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb530-1"><a href="#cb530-1" aria-hidden="true"></a><span class="ex">program</span> [arguments...] <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">tee</span> -a outfile</span></code></pre></div>
</section>
<section id="answer-2-score-481" class="level4">
<h4>Answer 2 (score 481)</h4>
<div class="sourceCode" id="cb531"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb531-1"><a href="#cb531-1" aria-hidden="true"></a>$ <span class="ex">program</span> [arguments...] <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">tee</span> outfile</span></code></pre></div>
<p>
<code>2&amp;gt;&amp;amp;1</code> dumps the stderr and stdout streams. <code>tee outfile</code> takes the stream it gets and writes it to the screen and to the file “outfile”.
</p>
<p>This is probably what most people are looking for. The likely situation is some program or script is working hard for a long time and producing a lot of output. The user wants to check it periodically for progress, but also wants the output written to a file.</p>
<p>The problem (especially when mixing stdout and stderr streams) is that there is reliance on the streams being flushed by the program. If, for example, all the writes to stdout are <em>not</em> flushed, but all the writes to stderr <em>are</em> flushed, then they’ll end up out of chronological order in the output file and on the screen.</p>
<p>It’s also bad if the program only outputs 1 or 2 lines every few minutes to report progress. In such a case, if the output was not flushed by the program, the user wouldn’t even see any output on the screen for hours, because none of it would get pushed through the pipe for hours.</p>
<p>Update: The program <code>unbuffer</code>, part of the <code>expect</code> package, will solve the buffering problem. This will cause stdout and stderr to write to the screen and file immediately and keep them in sync when being combined and redirected to <code>tee</code>. E.g.:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb532-1"><a href="#cb532-1" aria-hidden="true"></a>$ <span class="ex">unbuffer</span> program [arguments...] <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">tee</span> outfile</span></code></pre></div>
</section>
<section id="answer-3-score-117" class="level4">
<h4>Answer 3 (score 117)</h4>
<p>Another way that works for me is,</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb533-1"><a href="#cb533-1" aria-hidden="true"></a><span class="op">&lt;</span><span class="bu">command</span><span class="op">&gt;</span> <span class="kw">|&amp;</span> <span class="fu">tee</span>  <span class="op">&lt;</span>outputFile<span class="op">&gt;</span></span></code></pre></div>
<p>as shown in <a href="http://www.gnu.org/software/bash/manual/bashref.html
#Pipelines" rel="noreferrer">gnu bash manual</a></p>
<p>Example:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb534-1"><a href="#cb534-1" aria-hidden="true"></a><span class="fu">ls</span> <span class="kw">|&amp;</span> <span class="fu">tee</span> files.txt</span></code></pre></div>
<blockquote>
<em>If ‘|&amp;’ is used, command1’s <strong>standard error</strong>, in addition to its <strong>standard output</strong>, is connected to command2’s standard input through the pipe; it is <strong>shorthand for 2&gt;&amp;1</strong> |. This implicit redirection of the standard error to the standard output is performed after any redirections specified by the command.</em>
</blockquote>
<p>For more information, refer <a href="http://www.gnu.org/software/bash/manual/bashref.html
#Redirections" rel="noreferrer">redirection</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="in-bash-how-can-i-check-if-a-string-begins-with-some-value-score-554528-in-2016" class="level3">
<h3>67: In bash, how can I check if a string begins with some value? (score <a href="https://stackoverflow.com/q/2172352.html">554528</a> in 2016)</h3>
<section id="question-66" class="level4">
<h4>Question</h4>
<p>I would like to check if a string begins with “node” e.g. “node001”. Something like</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb535-1"><a href="#cb535-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$HOST</span> <span class="ot">==</span> user*<span class="bu"> ]</span>  </span>
<span id="cb535-2"><a href="#cb535-2" aria-hidden="true"></a>  <span class="kw">then</span>  </span>
<span id="cb535-3"><a href="#cb535-3" aria-hidden="true"></a>  <span class="bu">echo</span> yes  </span>
<span id="cb535-4"><a href="#cb535-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>How can I do it correctly？</p>
<hr>
<p>I further need to combine expressions to check if HOST is either “user1” or begins with “node”</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb536-1"><a href="#cb536-1" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> [[ <span class="va">$HOST</span> <span class="ot">==</span> user1 ]] <span class="ot">-o</span> [[ <span class="va">$HOST</span> <span class="ot">==</span> node* ]]<span class="bu"> ]</span>;  </span>
<span id="cb536-2"><a href="#cb536-2" aria-hidden="true"></a><span class="kw">then</span>  </span>
<span id="cb536-3"><a href="#cb536-3" aria-hidden="true"></a><span class="bu">echo</span> yes </span>
<span id="cb536-4"><a href="#cb536-4" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb536-5"><a href="#cb536-5" aria-hidden="true"></a></span>
<span id="cb536-6"><a href="#cb536-6" aria-hidden="true"></a><span class="op">&gt;</span> <span class="op">&gt;</span> <span class="op">&gt;</span> <span class="ex">-bash</span>: [: too many arguments</span></code></pre></div>
<p>How to do it correctly?</p>
</section>
<section id="answer-accepted-score-941" class="level4">
<h4>Answer accepted (score 941)</h4>
<p>This snippet on the <a href="http://tldp.org/LDP/abs/html/comparison-ops.html" rel="noreferrer">Advanced Bash Scripting Guide</a> says:</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb537-1"><a href="#cb537-1" aria-hidden="true"></a></span>
<span id="cb537-2"><a href="#cb537-2" aria-hidden="true"></a><span class="co"># The == comparison operator behaves differently within a double-brackets</span></span>
<span id="cb537-3"><a href="#cb537-3" aria-hidden="true"></a></span>
<span id="cb537-4"><a href="#cb537-4" aria-hidden="true"></a><span class="co"># test than within single brackets.</span></span>
<span id="cb537-5"><a href="#cb537-5" aria-hidden="true"></a></span>
<span id="cb537-6"><a href="#cb537-6" aria-hidden="true"></a><span class="kw">[[</span> <span class="va">$a</span> <span class="ot">==</span> z*<span class="kw"> ]]</span></span>
<span id="cb537-7"><a href="#cb537-7" aria-hidden="true"></a><span class="co"># True if $a starts with a &quot;z&quot; (wildcard matching).</span></span>
<span id="cb537-8"><a href="#cb537-8" aria-hidden="true"></a><span class="kw">[[</span> <span class="va">$a</span> <span class="ot">==</span> <span class="st">&quot;z*&quot;</span><span class="kw"> ]]</span></span>
<span id="cb537-9"><a href="#cb537-9" aria-hidden="true"></a><span class="co"># True if $a is equal to z* (literal matching).</span></span></code></pre></div>
<p>So you had it <em>nearly</em> correct; you needed <em>double</em> brackets, not single brackets.</p>
<hr>
<p>With regards to your second question, you can write it this way:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb538-1"><a href="#cb538-1" aria-hidden="true"></a><span class="va">HOST=</span>user1</span>
<span id="cb538-2"><a href="#cb538-2" aria-hidden="true"></a><span class="kw">if</span>  [[ <span class="va">$HOST</span> == <span class="ex">user1</span> ]] <span class="kw">|| [[</span> <span class="va">$HOST</span> <span class="ot">==</span> node*<span class="kw"> ]]</span> ;</span>
<span id="cb538-3"><a href="#cb538-3" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb538-4"><a href="#cb538-4" aria-hidden="true"></a>    <span class="bu">echo</span> yes1</span>
<span id="cb538-5"><a href="#cb538-5" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb538-6"><a href="#cb538-6" aria-hidden="true"></a></span>
<span id="cb538-7"><a href="#cb538-7" aria-hidden="true"></a><span class="va">HOST=</span>node001</span>
<span id="cb538-8"><a href="#cb538-8" aria-hidden="true"></a><span class="kw">if [[</span> <span class="va">$HOST</span> <span class="ot">==</span> user1<span class="kw"> ]]</span> <span class="kw">|| [[</span> <span class="va">$HOST</span> <span class="ot">==</span> node*<span class="kw"> ]]</span> ;</span>
<span id="cb538-9"><a href="#cb538-9" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb538-10"><a href="#cb538-10" aria-hidden="true"></a>    <span class="bu">echo</span> yes2</span>
<span id="cb538-11"><a href="#cb538-11" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Which will echo</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb539-1"><a href="#cb539-1" aria-hidden="true"></a><span class="ex">yes1</span></span>
<span id="cb539-2"><a href="#cb539-2" aria-hidden="true"></a><span class="ex">yes2</span></span></code></pre></div>
<p>Bash’s <code>if</code> syntax is hard to get used to (IMO).</p>
</section>
<section id="answer-2-score-183" class="level4">
<h4>Answer 2 (score 183)</h4>
<p>If you’re using a recent bash (v3+), I suggest bash regex comparison operator <code>=~</code>, i.e. </p>
<div class="sourceCode" id="cb540"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb540-1"><a href="#cb540-1" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$HOST</span><span class="st">&quot;</span> =~ ^user.*<span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb540-2"><a href="#cb540-2" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;yes&quot;</span></span>
<span id="cb540-3"><a href="#cb540-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<hr>
<p>To match <code>this or that</code> in a regex use <code>|</code>, i.e. </p>
<div class="sourceCode" id="cb541"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb541-1"><a href="#cb541-1" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$HOST</span><span class="st">&quot;</span> =~ ^user.*|^host1<span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb541-2"><a href="#cb541-2" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;yes&quot;</span></span>
<span id="cb541-3"><a href="#cb541-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Note - this is ‘proper’ regular expression syntax.</p>
<ul>
<li>
<code>user*</code> means <code>use</code> and zero-or-more occurrences of <code>r</code>, so <code>use</code> and <code>userrrr</code> will match.
</li>
<li>
<code>user.*</code> means <code>user</code> and zero-or-more occurrences of any character, so <code>user1</code>, <code>userX</code> will match.
</li>
<li>
<code>^user.*</code> means match the pattern <code>user.*</code> at the begin of $HOST.
</li>
</ul>
<p>If you’re not familiar with regular expression syntax, try referring to <a href="http://www.regular-expressions.info/reference.html" rel="noreferrer">this resource</a>.</p>
<p>Note - it’s better if you ask each new question as a new question, it makes stackoverflow tidier and more useful. You can always include a link back to a previous question for reference.</p>
</section>
<section id="answer-3-score-118" class="level4">
<h4>Answer 3 (score 118)</h4>
<p>I always try to stick with POSIX sh instead of using bash extensions, since one of the major points of scripting is portability. (Besides <strong>connecting</strong> programs, not replacing them)</p>
<p>In sh, there is an easy way to check for an “is-prefix” condition.</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb542-1"><a href="#cb542-1" aria-hidden="true"></a><span class="kw">case</span> <span class="va">$HOST</span><span class="kw"> in</span> node*<span class="kw">)</span></span>
<span id="cb542-2"><a href="#cb542-2" aria-hidden="true"></a>    <span class="ex">your</span> code here</span>
<span id="cb542-3"><a href="#cb542-3" aria-hidden="true"></a><span class="kw">esac</span></span></code></pre></div>
<p>Given how old, arcane and crufty sh is (and bash is not the cure: It’s more complicated, less consistent and less portable), I’d like to point out a very nice functional aspect: While some syntax elements like <code>case</code> are built-in, the resulting constructs are no different than any other job. They can be composed in the same way:</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb543-1"><a href="#cb543-1" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">case</span> <span class="va">$HOST</span><span class="kw"> in</span> node*<span class="kw">)</span> <span class="fu">true</span><span class="kw">;;</span> <span class="ex">*</span>) <span class="fu">false</span><span class="kw">;;</span> <span class="ex">esac</span><span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb543-2"><a href="#cb543-2" aria-hidden="true"></a>    <span class="ex">your</span> code here</span>
<span id="cb543-3"><a href="#cb543-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Or even shorter</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb544-1"><a href="#cb544-1" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">case</span> <span class="va">$HOST</span><span class="kw"> in</span> node*<span class="kw">)</span> <span class="kw">;;</span> *<span class="kw">)</span> <span class="fu">false</span><span class="kw">;;</span> <span class="ex">esac</span><span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb544-2"><a href="#cb544-2" aria-hidden="true"></a>    <span class="ex">your</span> code here</span>
<span id="cb544-3"><a href="#cb544-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Or <em>even</em> shorter (just to present <code>!</code> as a language element – but this is bad style now)</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb545-1"><a href="#cb545-1" aria-hidden="true"></a><span class="kw">if</span> ! <span class="kw">case</span> <span class="va">$HOST</span><span class="kw"> in</span> node*<span class="kw">)</span> <span class="fu">false</span><span class="kw">;;</span> <span class="ex">esac</span><span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb545-2"><a href="#cb545-2" aria-hidden="true"></a>    <span class="ex">your</span> code here</span>
<span id="cb545-3"><a href="#cb545-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>If you like being explicit, build your own language element:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb546-1"><a href="#cb546-1" aria-hidden="true"></a><span class="fu">beginswith()</span> <span class="kw">{</span> <span class="kw">case</span> <span class="va">$2</span><span class="kw"> in</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span>*<span class="kw">)</span> <span class="fu">true</span><span class="kw">;;</span> <span class="ex">*</span>) <span class="fu">false</span><span class="kw">;;</span> <span class="ex">esac</span><span class="kw">;</span> }</span></code></pre></div>
<p>Isn’t this actually quite nice?</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb547-1"><a href="#cb547-1" aria-hidden="true"></a><span class="kw">if</span> <span class="ex">beginswith</span> node <span class="st">&quot;</span><span class="va">$HOST</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb547-2"><a href="#cb547-2" aria-hidden="true"></a>    <span class="ex">your</span> code here</span>
<span id="cb547-3"><a href="#cb547-3" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>And since sh is basically only jobs and string-lists (and internally processes, out of which jobs are composed), we can now even do some light functional programming:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb548-1"><a href="#cb548-1" aria-hidden="true"></a><span class="fu">beginswith()</span> <span class="kw">{</span> <span class="kw">case</span> <span class="va">$2</span><span class="kw"> in</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span>*<span class="kw">)</span> <span class="fu">true</span><span class="kw">;;</span> <span class="ex">*</span>) <span class="fu">false</span><span class="kw">;;</span> <span class="ex">esac</span><span class="kw">;</span> }</span>
<span id="cb548-2"><a href="#cb548-2" aria-hidden="true"></a><span class="fu">checkresult()</span> <span class="kw">{</span> <span class="kw">if</span><span class="bu"> [</span> <span class="va">$?</span> <span class="ot">=</span> 0<span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">echo</span> TRUE<span class="kw">;</span> <span class="kw">else</span> <span class="bu">echo</span> FALSE<span class="kw">;</span> <span class="kw">fi</span>; <span class="kw">}</span></span>
<span id="cb548-3"><a href="#cb548-3" aria-hidden="true"></a></span>
<span id="cb548-4"><a href="#cb548-4" aria-hidden="true"></a><span class="fu">all()</span> <span class="kw">{</span></span>
<span id="cb548-5"><a href="#cb548-5" aria-hidden="true"></a>    <span class="va">test=$1</span>; <span class="bu">shift</span></span>
<span id="cb548-6"><a href="#cb548-6" aria-hidden="true"></a>    <span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb548-7"><a href="#cb548-7" aria-hidden="true"></a>        <span class="va">$test</span> <span class="st">&quot;</span><span class="va">$i</span><span class="st">&quot;</span> <span class="kw">||</span> <span class="bu">return</span></span>
<span id="cb548-8"><a href="#cb548-8" aria-hidden="true"></a>    <span class="kw">done</span></span>
<span id="cb548-9"><a href="#cb548-9" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb548-10"><a href="#cb548-10" aria-hidden="true"></a></span>
<span id="cb548-11"><a href="#cb548-11" aria-hidden="true"></a><span class="ex">all</span> <span class="st">&quot;beginswith x&quot;</span> x xy xyz <span class="kw">;</span> <span class="ex">checkresult</span></span>
<span id="cb548-12"><a href="#cb548-12" aria-hidden="true"></a><span class="co"># prints TRUE</span></span>
<span id="cb548-13"><a href="#cb548-13" aria-hidden="true"></a><span class="ex">all</span> <span class="st">&quot;beginswith x&quot;</span> x xy abc <span class="kw">;</span> <span class="ex">checkresult</span></span>
<span id="cb548-14"><a href="#cb548-14" aria-hidden="true"></a><span class="co"># prints FALSE</span></span></code></pre></div>
<p>This is elegant. Not that I’d advocate using sh for anything serious – it breaks all too quickly on real world requirements (no lambdas, so must use strings. But nesting function calls with strings is not possible, pipes are not possible…)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ls-command-how-can-i-get-a-recursive-full-path-listing-one-line-per-file-score-549377-in-2013" class="level3">
<h3>68: ls command: how can I get a recursive full-path listing, one line per file? (score <a href="https://stackoverflow.com/q/1767384.html">549377</a> in 2013)</h3>
<section id="question-67" class="level4">
<h4>Question</h4>
<p>How can I get ls to spit out a flat list of recursive one-per-line paths?</p>
<p>For example, I just want a flat listing of files with their full paths:</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb549-1"><a href="#cb549-1" aria-hidden="true"></a><span class="ex">/home/dreftymac/.</span></span>
<span id="cb549-2"><a href="#cb549-2" aria-hidden="true"></a><span class="ex">/home/dreftymac/foo.txt</span></span>
<span id="cb549-3"><a href="#cb549-3" aria-hidden="true"></a><span class="ex">/home/dreftymac/bar.txt</span></span>
<span id="cb549-4"><a href="#cb549-4" aria-hidden="true"></a><span class="ex">/home/dreftymac/stackoverflow</span></span>
<span id="cb549-5"><a href="#cb549-5" aria-hidden="true"></a><span class="ex">/home/dreftymac/stackoverflow/alpha.txt</span></span>
<span id="cb549-6"><a href="#cb549-6" aria-hidden="true"></a><span class="ex">/home/dreftymac/stackoverflow/bravo.txt</span></span>
<span id="cb549-7"><a href="#cb549-7" aria-hidden="true"></a><span class="ex">/home/dreftymac/stackoverflow/charlie.txt</span></span></code></pre></div>
<p><code>ls -a1</code> almost does what I need, but I do not want path fragments, I want full paths.</p>
</section>
<section id="answer-accepted-score-362" class="level4">
<h4>Answer accepted (score 362)</h4>
<p>If you really want to use <code>ls</code>, then format its output using awk:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb550-1"><a href="#cb550-1" aria-hidden="true"></a><span class="fu">ls</span> -R /path <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;</span></span>
<span id="cb550-2"><a href="#cb550-2" aria-hidden="true"></a><span class="st">/:$/&amp;&amp;f{s=$0;f=0}</span></span>
<span id="cb550-3"><a href="#cb550-3" aria-hidden="true"></a><span class="st">/:$/&amp;&amp;!f{sub(/:$/,&quot;&quot;);s=$0;f=1;next}</span></span>
<span id="cb550-4"><a href="#cb550-4" aria-hidden="true"></a><span class="st">NF&amp;&amp;f{ print s&quot;/&quot;$0 }&#39;</span></span></code></pre></div>
</section>
<section id="answer-2-score-527" class="level4">
<h4>Answer 2 (score 527)</h4>
<p>Use find:</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb551-1"><a href="#cb551-1" aria-hidden="true"></a><span class="fu">find</span> .</span>
<span id="cb551-2"><a href="#cb551-2" aria-hidden="true"></a><span class="fu">find</span> /home/dreftymac</span></code></pre></div>
<p>If you want files only (omit directories, devices, etc):</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb552-1"><a href="#cb552-1" aria-hidden="true"></a><span class="fu">find</span> . -type f</span>
<span id="cb552-2"><a href="#cb552-2" aria-hidden="true"></a><span class="fu">find</span> /home/dreftymac -type f</span></code></pre></div>
</section>
<section id="answer-3-score-71-1" class="level4">
<h4>Answer 3 (score 71)</h4>
<p><code>ls -ld $(find .)</code></p>
<p>if you want to sort your output by modification time:</p>
<p><code>ls -ltd $(find .)</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-run-a-shell-script-without-using-sh-or-bash-commands-score-530846-in-2013" class="level3">
<h3>69: How do I run a shell script without using “sh” or “bash” commands? (score <a href="https://stackoverflow.com/q/8779951.html">530846</a> in 2013)</h3>
<section id="question-68" class="level4">
<h4>Question</h4>
<p>I have a shell script which I want to run without using the “sh” or “bash” commands. For example:</p>
<p>Instead of: <code>sh script.sh</code></p>
<p>I want to use: <code>script.sh</code></p>
<p>How can I do this?</p>
<p>P.S. (i) I don’t use shell script much and I tried reading about aliases, but I did not understand how to use them.</p>
<ol start="2" type="i">
<li>I also read about linking the script with another file in the PATH variables. I am using my university server and I don’t have permissions to create a file in those locations.</li>
</ol>
</section>
<section id="answer-accepted-score-414" class="level4">
<h4>Answer accepted (score 414)</h4>
<p>Add a “shebang” at the top of your file:</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb553-1"><a href="#cb553-1" aria-hidden="true"></a></span>
<span id="cb553-2"><a href="#cb553-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span></code></pre></div>
<p>And make your file executable (<code>chmod +x script.sh</code>).</p>
<p>Finally, modify your path to add the directory where your script is located:</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb554-1"><a href="#cb554-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">PATH=$PATH</span>:/appropriate/directory</span></code></pre></div>
<p>(typically, you want <code>$HOME/bin</code> for storing your own scripts)</p>
</section>
<section id="answer-2-score-66-1" class="level4">
<h4>Answer 2 (score 66)</h4>
<p>These are some of the prerequisites of directly using the script name:</p>
<ol>
<li>
Add the <code>she-bang ( #!/bin/bash)</code> line at the very top.
</li>
<li>
Using <code>chmod u+x scriptname</code> make the script executable. (where <code>scriptname</code> is the name of your script)
</li>
<li>
Place the script under <code>/usr/local/bin</code> folder.
</li>
<li>
Run the script using just the name of the script.
</li>
</ol>
<p><strong>Note:</strong> The reason I suggested to place it under <code>/usr/local/bin</code> folder is because most likely that will be path already added to your <code>PATH variable</code>.</p>
<h5>
Update:
</h3>
<p>If you don’t have access to the <code>/usr/local/bin</code> folder then do the following:</p>
<ol>
<li>
Create a folder in your home directory and let’s call it <code>myscripts</code>.
</li>
<li>
Do <code>ls -lart</code> on your home directory, to identify the start-up script your shell is using. It should either be <code>.profile</code> or <code>.bashrc</code>.
</li>
<li>
Once you have identified the start up script, add the following line in your script - <code>export set PATH=$PATH:~/myscript</code>.
</li>
<li>
Once added, source your start-up script or log out and log back in.
</li>
<li>
Execute your script using <code>scriptname</code>.
</li>
</ol>
</section>
<section id="answer-3-score-20" class="level4">
<h4>Answer 3 (score 20)</h4>
<p>Just make sure it is executable, using <code>chmod +x</code>. By default, the current directory is not on your PATH, so you will need to execute it as <code>./script.sh</code> - or otherwise reference it by a qualified path. Alternatively, if you truly need just <code>script.sh</code>, you would need to add it to your PATH. (You may not have access to modify the system path, but you can almost certainly modify the PATH of your own current environment.) This also assumes that your script starts with something like <code>#!/bin/sh</code>.</p>
<p>You could also still use an alias, which is not really related to shell scripting but just the shell, and is simple as:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb555-1"><a href="#cb555-1" aria-hidden="true"></a><span class="bu">alias</span> script.sh=<span class="st">&#39;sh script.sh&#39;</span></span></code></pre></div>
<p>Which would allow you to use just simply <code>script.sh</code> (literally - this won’t work for any other <code>*.sh</code> file) instead of <code>sh script.sh</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-test-if-string-exists-in-file-with-bash-score-526448-in-2018" class="level3">
<h3>70: How to test if string exists in file with Bash? (score <a href="https://stackoverflow.com/q/4749330.html">526448</a> in 2018)</h3>
<section id="question-69" class="level4">
<h4>Question</h4>
<p>I have a file that contains directory names:</p>
<p><code>my_list.txt</code> :</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb556-1"><a href="#cb556-1" aria-hidden="true"></a><span class="ex">/tmp</span></span>
<span id="cb556-2"><a href="#cb556-2" aria-hidden="true"></a><span class="ex">/var/tmp</span></span></code></pre></div>
<p>I’d like to check in Bash before I’ll add a directory name if that name already exists in the file.</p>
</section>
<section id="answer-accepted-score-584" class="level4">
<h4>Answer accepted (score 584)</h4>
<div class="sourceCode" id="cb557"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb557-1"><a href="#cb557-1" aria-hidden="true"></a><span class="fu">grep</span> -Fxq <span class="st">&quot;</span><span class="va">$FILENAME</span><span class="st">&quot;</span> my_list.txt</span></code></pre></div>
<p>The exit status is 0 (true) if the name was found, 1 (false) if not, so:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb558-1"><a href="#cb558-1" aria-hidden="true"></a><span class="kw">if</span> <span class="fu">grep</span> -Fxq <span class="st">&quot;</span><span class="va">$FILENAME</span><span class="st">&quot;</span> my_list.txt</span>
<span id="cb558-2"><a href="#cb558-2" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb558-3"><a href="#cb558-3" aria-hidden="true"></a></span>
<span id="cb558-4"><a href="#cb558-4" aria-hidden="true"></a><span class="co"># code if found</span></span>
<span id="cb558-5"><a href="#cb558-5" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb558-6"><a href="#cb558-6" aria-hidden="true"></a></span>
<span id="cb558-7"><a href="#cb558-7" aria-hidden="true"></a><span class="co"># code if not found</span></span>
<span id="cb558-8"><a href="#cb558-8" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<h5>
Explanation
</h3>
<p>Here are the relevant sections of <a href="https://linux.die.net/man/1/grep" rel="noreferrer">the man page for <code>grep</code></a>:</p>
<blockquote>
<div class="sourceCode" id="cb559"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb559-1"><a href="#cb559-1" aria-hidden="true"></a><span class="fu">grep</span> [options] PATTERN [FILE...]</span></code></pre></div>
<p><code>-F</code>, <code>--fixed-strings</code></p>
<p>        Interpret PATTERN as a list of fixed strings, separated by newlines, any of which is to be matched.</p>
<p><code>-x</code>, <code>--line-regexp</code></p>
<p>        Select only those matches that exactly match the whole line.</p>
<p><code>-q</code>, <code>--quiet</code>, <code>--silent</code></p>
        Quiet; do not write anything to standard output. Exit immediately with zero status if any match is found, even if an error was detected. Also see the <code>-s</code> or <code>--no-messages</code> option.
</blockquote>
<h5>
Error handling
</h3>
<p>As rightfully pointed out in the comments, the above approach silently treats error cases as if the string was found. If you want to handle errors in a different way, you’ll have to omit the <code>-q</code> option, and detect errors based on the exit status:</p>
<blockquote>
Normally, the exit status is 0 if selected lines are found and 1 otherwise. But the exit status is 2 if an error occurred, unless the <code>-q</code> or <code>--quiet</code> or <code>--silent</code> option is used and a selected line is found. Note, however, that POSIX only mandates, for programs such as <code>grep</code>, <code>cmp</code>, and <code>diff</code>, that the exit status in case of error be greater than 1; it is therefore advisable, for the sake of portability, to use logic that tests for this general condition instead of strict equality with 2.
</blockquote>
<p>To suppress the normal output from <code>grep</code>, you can redirect it to <code>/dev/null</code>. Note that standard error remains undirected, so any error messages that <code>grep</code> might print will end up on the console as you’d probably want.</p>
<p>To handle the three cases, we can use a <code>case</code> statement:</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb560-1"><a href="#cb560-1" aria-hidden="true"></a><span class="kw">case</span> <span class="kw">`</span><span class="fu">grep</span> -Fx <span class="st">&quot;</span><span class="va">$FILENAME</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$LIST</span><span class="st">&quot;</span> <span class="op">&gt;</span>/dev/null<span class="kw">;</span> <span class="bu">echo</span> <span class="va">$?</span><span class="kw">` in</span></span>
<span id="cb560-2"><a href="#cb560-2" aria-hidden="true"></a>  0<span class="kw">)</span></span>
<span id="cb560-3"><a href="#cb560-3" aria-hidden="true"></a></span>
<span id="cb560-4"><a href="#cb560-4" aria-hidden="true"></a><span class="co"># code if found</span></span>
<span id="cb560-5"><a href="#cb560-5" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb560-6"><a href="#cb560-6" aria-hidden="true"></a>  1<span class="kw">)</span></span>
<span id="cb560-7"><a href="#cb560-7" aria-hidden="true"></a></span>
<span id="cb560-8"><a href="#cb560-8" aria-hidden="true"></a><span class="co"># code if not found</span></span>
<span id="cb560-9"><a href="#cb560-9" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb560-10"><a href="#cb560-10" aria-hidden="true"></a>  *<span class="kw">)</span></span>
<span id="cb560-11"><a href="#cb560-11" aria-hidden="true"></a></span>
<span id="cb560-12"><a href="#cb560-12" aria-hidden="true"></a><span class="co"># code if an error occurred</span></span>
<span id="cb560-13"><a href="#cb560-13" aria-hidden="true"></a>    <span class="kw">;;</span></span>
<span id="cb560-14"><a href="#cb560-14" aria-hidden="true"></a><span class="kw">esac</span></span></code></pre></div>
</section>
<section id="answer-2-score-86" class="level4">
<h4>Answer 2 (score 86)</h4>
<p>Regarding the following solution:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb561-1"><a href="#cb561-1" aria-hidden="true"></a><span class="fu">grep</span> -Fxq <span class="st">&quot;</span><span class="va">$FILENAME</span><span class="st">&quot;</span> my_list.txt</span></code></pre></div>
<p>In case you are wondering (as I did) what <code>-Fxq</code> means in plain English:</p>
<ul>
<li>
<code>F</code>: Affects how PATTERN is interpreted (fixed string instead of a regex)
</li>
<li>
<code>x</code>: Match whole line
</li>
<li>
<code>q</code>: Shhhhh… minimal printing
</li>
</ul>
<p>From the man file:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb562-1"><a href="#cb562-1" aria-hidden="true"></a><span class="ex">-F</span>, --fixed-strings</span>
<span id="cb562-2"><a href="#cb562-2" aria-hidden="true"></a>    <span class="ex">Interpret</span>  PATTERN  as  a  list of fixed strings, separated by newlines, any of which is to be matched.</span>
<span id="cb562-3"><a href="#cb562-3" aria-hidden="true"></a>    <span class="kw">(</span><span class="ex">-F</span> is specified by POSIX.<span class="kw">)</span></span>
<span id="cb562-4"><a href="#cb562-4" aria-hidden="true"></a><span class="ex">-x</span>, --line-regexp</span>
<span id="cb562-5"><a href="#cb562-5" aria-hidden="true"></a>    <span class="ex">Select</span> only those matches that exactly match the whole line.  (-x is specified by POSIX.)</span>
<span id="cb562-6"><a href="#cb562-6" aria-hidden="true"></a><span class="ex">-q</span>, --quiet, --silent</span>
<span id="cb562-7"><a href="#cb562-7" aria-hidden="true"></a>    <span class="ex">Quiet</span><span class="kw">;</span> <span class="kw">do</span> <span class="ex">not</span> write anything to standard output.  Exit immediately with zero status  if  any  match  is</span>
<span id="cb562-8"><a href="#cb562-8" aria-hidden="true"></a>          <span class="ex">found</span>,  even  if  an error was detected.  Also see the -s or --no-messages option.  (-q is specified by</span>
<span id="cb562-9"><a href="#cb562-9" aria-hidden="true"></a>          <span class="ex">POSIX.</span>)</span></code></pre></div>
</section>
<section id="answer-3-score-38-1" class="level4">
<h4>Answer 3 (score 38)</h4>
<p>Three methods in my mind:<br></p>
<ol type="1">
<li>Short test for a name in a path (I’m not sure this might be your case)</li>
</ol>
<div class="sourceCode" id="cb563"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb563-1"><a href="#cb563-1" aria-hidden="true"></a><span class="fu">ls</span> -a <span class="st">&quot;path&quot;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;name&quot;</span></span></code></pre></div>
<p>
<br> 2) Short test for a string in a file
</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb564-1"><a href="#cb564-1" aria-hidden="true"></a><span class="fu">grep</span> -R <span class="st">&quot;string&quot;</span> <span class="st">&quot;filepath&quot;</span></span></code></pre></div>
<p>
<br> 3) Longer bash script using regex:
</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb565-1"><a href="#cb565-1" aria-hidden="true"></a></span>
<span id="cb565-2"><a href="#cb565-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb565-3"><a href="#cb565-3" aria-hidden="true"></a></span>
<span id="cb565-4"><a href="#cb565-4" aria-hidden="true"></a><span class="bu">declare</span> <span class="va">file=</span><span class="st">&quot;content.txt&quot;</span></span>
<span id="cb565-5"><a href="#cb565-5" aria-hidden="true"></a><span class="bu">declare</span> <span class="va">regex=</span><span class="st">&quot;\s+string\s+&quot;</span></span>
<span id="cb565-6"><a href="#cb565-6" aria-hidden="true"></a></span>
<span id="cb565-7"><a href="#cb565-7" aria-hidden="true"></a><span class="bu">declare</span> <span class="va">file_content=$(</span> <span class="fu">cat</span> <span class="st">&quot;</span><span class="va">${file}</span><span class="st">&quot;</span> <span class="va">)</span></span>
<span id="cb565-8"><a href="#cb565-8" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot; </span><span class="va">$file_content</span><span class="st"> &quot;</span> =~ <span class="va">$regex</span><span class="kw"> ]]</span></span>
<span id="cb565-9"><a href="#cb565-9" aria-hidden="true"></a><span class="co"># please note the space before and after the file content</span></span>
<span id="cb565-10"><a href="#cb565-10" aria-hidden="true"></a>    <span class="kw">then</span></span>
<span id="cb565-11"><a href="#cb565-11" aria-hidden="true"></a>        <span class="bu">echo</span> <span class="st">&quot;found&quot;</span></span>
<span id="cb565-12"><a href="#cb565-12" aria-hidden="true"></a>    <span class="kw">else</span></span>
<span id="cb565-13"><a href="#cb565-13" aria-hidden="true"></a>        <span class="bu">echo</span> <span class="st">&quot;not found&quot;</span></span>
<span id="cb565-14"><a href="#cb565-14" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb565-15"><a href="#cb565-15" aria-hidden="true"></a></span>
<span id="cb565-16"><a href="#cb565-16" aria-hidden="true"></a><span class="bu">exit</span></span></code></pre></div>
<p>This should be <strong>quicker</strong> if you have <strong>to test multiple string on a file</strong> content using a loop for example changing the regex at any cicle.<br></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="add-a-new-element-to-an-array-without-specifying-the-index-in-bash-score-525121-in-2017" class="level3">
<h3>71: Add a new element to an array without specifying the index in Bash (score <a href="https://stackoverflow.com/q/1951506.html">525121</a> in 2017)</h3>
<section id="question-70" class="level4">
<h4>Question</h4>
<p>Is there a way to do something like PHPs <code>$array[] = 'foo';</code> in bash vs doing:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb566-1"><a href="#cb566-1" aria-hidden="true"></a><span class="ex">array</span>[0] = <span class="st">&#39;foo&#39;</span></span>
<span id="cb566-2"><a href="#cb566-2" aria-hidden="true"></a><span class="ex">array</span>[1] = <span class="st">&#39;bar&#39;</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-1405" class="level4">
<h4>Answer accepted (score 1405)</h4>
<p>Yes there is:</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb567-1"><a href="#cb567-1" aria-hidden="true"></a><span class="va">ARRAY=()</span></span>
<span id="cb567-2"><a href="#cb567-2" aria-hidden="true"></a><span class="va">ARRAY+=(</span><span class="st">&#39;foo&#39;</span><span class="va">)</span></span>
<span id="cb567-3"><a href="#cb567-3" aria-hidden="true"></a><span class="va">ARRAY+=(</span><span class="st">&#39;bar&#39;</span><span class="va">)</span></span></code></pre></div>
<p><a href="http://www.gnu.org/software/bash/manual/bashref.html
#Shell-Parameters" rel="noreferrer">Bash Reference Manual</a>:</p>
<blockquote>
In the context where an assignment statement is assigning a value to a shell variable or array index (see Arrays), the ‘+=’ operator can be used to append to or add to the variable’s previous value.
</blockquote>
</section>
<section id="answer-2-score-72" class="level4">
<h4>Answer 2 (score 72)</h4>
<p>As <strong>Dumb Guy</strong> points out, it’s important to note whether the array starts at zero and is sequential. Since you can make assignments to and unset non-contiguous indices <code>${ #array[@]}</code> is not always the next item at the end of the array.</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb568-1"><a href="#cb568-1" aria-hidden="true"></a>$ <span class="va">array=(</span>a b c d e f g h<span class="va">)</span></span>
<span id="cb568-2"><a href="#cb568-2" aria-hidden="true"></a>$ <span class="va">array[42]=</span><span class="st">&quot;i&quot;</span></span>
<span id="cb568-3"><a href="#cb568-3" aria-hidden="true"></a>$ <span class="bu">unset</span> <span class="va">array[2]</span></span>
<span id="cb568-4"><a href="#cb568-4" aria-hidden="true"></a>$ <span class="bu">unset</span> <span class="va">array[3]</span></span>
<span id="cb568-5"><a href="#cb568-5" aria-hidden="true"></a>$ <span class="bu">declare</span> -p <span class="va">array</span></span>
<span id="cb568-6"><a href="#cb568-6" aria-hidden="true"></a><span class="co"># dump the array so we can see what it contains</span></span>
<span id="cb568-7"><a href="#cb568-7" aria-hidden="true"></a><span class="bu">declare</span> -a <span class="va">array=</span><span class="st">&#39;([0]=&quot;a&quot; [1]=&quot;b&quot; [4]=&quot;e&quot; [5]=&quot;f&quot; [6]=&quot;g&quot; [7]=&quot;h&quot; [42]=&quot;i&quot;)&#39;</span></span>
<span id="cb568-8"><a href="#cb568-8" aria-hidden="true"></a>$ <span class="bu">echo</span> ${</span>
<span id="cb568-9"><a href="#cb568-9" aria-hidden="true"></a><span class="co">#array[@]}</span></span>
<span id="cb568-10"><a href="#cb568-10" aria-hidden="true"></a><span class="ex">7</span></span>
<span id="cb568-11"><a href="#cb568-11" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">${array[${</span></span>
<span id="cb568-12"><a href="#cb568-12" aria-hidden="true"></a><span class="va">#array[@]}</span>]}</span>
<span id="cb568-13"><a href="#cb568-13" aria-hidden="true"></a><span class="ex">h</span></span></code></pre></div>
<p>Here’s how to get the last index:</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb569-1"><a href="#cb569-1" aria-hidden="true"></a>$ <span class="va">end=(${!array[@]})</span></span>
<span id="cb569-2"><a href="#cb569-2" aria-hidden="true"></a><span class="co"># put all the indices in an array</span></span>
<span id="cb569-3"><a href="#cb569-3" aria-hidden="true"></a>$ <span class="va">end=${end[@]: -1}</span></span>
<span id="cb569-4"><a href="#cb569-4" aria-hidden="true"></a><span class="co"># get the last one</span></span>
<span id="cb569-5"><a href="#cb569-5" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">$end</span></span>
<span id="cb569-6"><a href="#cb569-6" aria-hidden="true"></a><span class="ex">42</span></span></code></pre></div>
<p>That illustrates how to get the last element of an array. You’ll often see this:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb570-1"><a href="#cb570-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">${array[${</span></span>
<span id="cb570-2"><a href="#cb570-2" aria-hidden="true"></a><span class="va">#array[@]}</span> - 1]}</span>
<span id="cb570-3"><a href="#cb570-3" aria-hidden="true"></a><span class="ex">g</span></span></code></pre></div>
<p>As you can see, because we’re dealing with a sparse array, this isn’t the last element. This works on both sparse and contiguous arrays, though:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb571-1"><a href="#cb571-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">${array[@]: -1}</span></span>
<span id="cb571-2"><a href="#cb571-2" aria-hidden="true"></a><span class="ex">i</span></span></code></pre></div>
</section>
<section id="answer-3-score-47-2" class="level4">
<h4>Answer 3 (score 47)</h4>
<div class="sourceCode" id="cb572"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb572-1"><a href="#cb572-1" aria-hidden="true"></a>$ <span class="bu">declare</span> -a <span class="va">arr</span></span>
<span id="cb572-2"><a href="#cb572-2" aria-hidden="true"></a>$ <span class="va">arr=(</span><span class="st">&quot;a&quot;</span><span class="va">)</span></span>
<span id="cb572-3"><a href="#cb572-3" aria-hidden="true"></a>$ <span class="va">arr=(</span><span class="st">&quot;</span><span class="va">${arr[@]}</span><span class="st">&quot;</span> <span class="st">&quot;new&quot;</span><span class="va">)</span></span>
<span id="cb572-4"><a href="#cb572-4" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">${arr[@]}</span></span>
<span id="cb572-5"><a href="#cb572-5" aria-hidden="true"></a><span class="ex">a</span> new</span>
<span id="cb572-6"><a href="#cb572-6" aria-hidden="true"></a>$ <span class="va">arr=(</span><span class="st">&quot;</span><span class="va">${arr[@]}</span><span class="st">&quot;</span> <span class="st">&quot;newest&quot;</span><span class="va">)</span></span>
<span id="cb572-7"><a href="#cb572-7" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">${arr[@]}</span></span>
<span id="cb572-8"><a href="#cb572-8" aria-hidden="true"></a><span class="ex">a</span> new newest</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="create-timestamp-variable-in-bash-script-score-514810-in-2013" class="level3">
<h3>72: Create timestamp variable in bash script (score <a href="https://stackoverflow.com/q/17066250.html">514810</a> in 2013)</h3>
<section id="question-71" class="level4">
<h4>Question</h4>
<p>I am trying to create a timestamp variable in a shell script to make the logging a little easier. I want to create the variable at the beginning of the script and have it print out the current time whenever I issue <code>echo $timestamp</code>. It proving to be more difficult then I thought. Here are some things I’ve tried:</p>
<p><code>timestamp="(date +"%T")"</code> echo prints out <code>(date +"%T")</code></p>
<p><code>timestamp="$(date +"%T")"</code> echo prints the time when the variable was initialized.</p>
<p>Other things I’ve tried are just slight variations that didn’t work any better. Does anyone know how to accomplish what I’m trying to do?</p>
</section>
<section id="answer-accepted-score-267" class="level4">
<h4>Answer accepted (score 267)</h4>
<p>In order to get the current timestamp and not the time of when a fixed variable is defined, the trick is to use a function and <strong>not</strong> a variable:</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb573-1"><a href="#cb573-1" aria-hidden="true"></a></span>
<span id="cb573-2"><a href="#cb573-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb573-3"><a href="#cb573-3" aria-hidden="true"></a></span>
<span id="cb573-4"><a href="#cb573-4" aria-hidden="true"></a></span>
<span id="cb573-5"><a href="#cb573-5" aria-hidden="true"></a><span class="co"># Define a timestamp function</span></span>
<span id="cb573-6"><a href="#cb573-6" aria-hidden="true"></a><span class="fu">timestamp()</span> <span class="kw">{</span></span>
<span id="cb573-7"><a href="#cb573-7" aria-hidden="true"></a>  <span class="fu">date</span> +<span class="st">&quot;%T&quot;</span></span>
<span id="cb573-8"><a href="#cb573-8" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb573-9"><a href="#cb573-9" aria-hidden="true"></a></span>
<span id="cb573-10"><a href="#cb573-10" aria-hidden="true"></a></span>
<span id="cb573-11"><a href="#cb573-11" aria-hidden="true"></a><span class="co"># do something...</span></span>
<span id="cb573-12"><a href="#cb573-12" aria-hidden="true"></a><span class="ex">timestamp</span></span>
<span id="cb573-13"><a href="#cb573-13" aria-hidden="true"></a><span class="co"># print timestamp</span></span>
<span id="cb573-14"><a href="#cb573-14" aria-hidden="true"></a></span>
<span id="cb573-15"><a href="#cb573-15" aria-hidden="true"></a><span class="co"># do something else...</span></span>
<span id="cb573-16"><a href="#cb573-16" aria-hidden="true"></a><span class="ex">timestamp</span></span>
<span id="cb573-17"><a href="#cb573-17" aria-hidden="true"></a><span class="co"># print another timestamp</span></span>
<span id="cb573-18"><a href="#cb573-18" aria-hidden="true"></a></span>
<span id="cb573-19"><a href="#cb573-19" aria-hidden="true"></a><span class="co"># continue...</span></span></code></pre></div>
<p>If you don’t like the format given by the <code>%T</code> specifier you can combine the other time conversion specifiers accepted by <code>date</code>. For GNU <code>date</code>, you can find the complete list of these specifiers in the official documentation here: <a href="https://www.gnu.org/software/coreutils/manual/html_node/Time-conversion-specifiers.html
#Time-conversion-specifiers">https://www.gnu.org/software/coreutils/manual/html_node/Time-conversion-specifiers.html#Time-conversion-specifiers</a></p>
</section>
<section id="answer-2-score-511" class="level4">
<h4>Answer 2 (score 511)</h4>
<p>If you want to get unix timestamp, then you need to use:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb574-1"><a href="#cb574-1" aria-hidden="true"></a><span class="va">timestamp=$(</span><span class="fu">date</span> +%s<span class="va">)</span></span></code></pre></div>
<p><code>%T</code> will give you just the time; same as <code>%H:%M:%S</code> (via <a href="http://www.cyberciti.biz/faq/linux-unix-formatting-dates-for-display/" rel="noreferrer">http://www.cyberciti.biz/faq/linux-unix-formatting-dates-for-display/</a>)</p>
</section>
<section id="answer-3-score-52-1" class="level4">
<h4>Answer 3 (score 52)</h4>
<div class="sourceCode" id="cb575"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb575-1"><a href="#cb575-1" aria-hidden="true"></a><span class="va">DATE=</span><span class="kw">`</span><span class="fu">date</span> <span class="st">&quot;+%Y%m%d&quot;</span><span class="kw">`</span></span>
<span id="cb575-2"><a href="#cb575-2" aria-hidden="true"></a></span>
<span id="cb575-3"><a href="#cb575-3" aria-hidden="true"></a><span class="va">DATE_WITH_TIME=</span><span class="kw">`</span><span class="fu">date</span> <span class="st">&quot;+%Y%m%d-%H%M%S&quot;</span><span class="kw">`</span></span>
<span id="cb575-4"><a href="#cb575-4" aria-hidden="true"></a><span class="co">#add %3N as we want millisecond too</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-run-.sh-on-windows-command-prompt-score-510971-in" class="level3">
<h3>73: How to run .sh on Windows Command Prompt? (score <a href="https://stackoverflow.com/q/26522789.html">510971</a> in )</h3>
<section id="question-72" class="level4">
<h4>Question</h4>
<p>How can I run .sh on Windows 7 Command Prompt? I always get this error when I try to run this line in it,</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb576-1"><a href="#cb576-1" aria-hidden="true"></a><span class="ex">app/build/build.sh</span></span></code></pre></div>
<p>error,</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb577-1"><a href="#cb577-1" aria-hidden="true"></a><span class="st">&#39;app&#39;</span> <span class="ex">is</span> not recognized...</span></code></pre></div>
<p>or,</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb578-1"><a href="#cb578-1" aria-hidden="true"></a><span class="fu">bash</span> app/build/build.sh</span></code></pre></div>
<p>error,</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb579-1"><a href="#cb579-1" aria-hidden="true"></a><span class="st">&#39;bash&#39;</span> <span class="ex">is</span> not recognized...</span></code></pre></div>
<p>Any ideas what have I missed?</p>
<p>
Here the screen grab, <img src="https://i.stack.imgur.com/0mcPj.jpg" alt="enter image description here">
</p>
</section>
<section id="answer-accepted-score-51" class="level4">
<h4>Answer accepted (score 51)</h4>
<p>The error message indicates that you have not installed <code>bash</code>, or it is not in your <code>PATH</code>.</p>
<p>The top Google hit is <a href="http://win-bash.sourceforge.net/">http://win-bash.sourceforge.net/</a> but you also need to understand that most Bash scripts expect a Unix-like environment; so just installing Bash is probably unlikely to allow you to run a script you found on the net, unless it was specifically designed for this particular usage scenario. The usual solution to that is <a href="https://www.cygwin.com/">https://www.cygwin.com/</a> but there are many possible alternatives, depending on what exactly it is that you want to accomplish.</p>
<p>If Windows is not central to your usage scenario, installing a free OS (perhaps virtualized) might be the simplest way forward.</p>
<p>The second error message is due to the fact that Windows nominally accepts forward slash as a directory separator, but in this context, it is being interpreted as a switch separator. In other words, Windows parses your command line as <code>app /build /build.sh</code> (or, to paraphrase with Unix option conventions, <code>app --build --build.sh</code>). You could try <code>app\build\build.sh</code> but it is unlikely to work, because of the circumstances outlined above.</p>
</section>
<section id="answer-2-score-111" class="level4">
<h4>Answer 2 (score 111)</h4>
<p>Install <a href="https://git-scm.com/downloads" rel="noreferrer">GIT</a>. During installation of GIT, add GIT Bash to windows context menu by selecting its option. After installation right click in your folder select <code>GIT Bash Here</code> (see attached pic) and use your sh command like for example:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb580-1"><a href="#cb580-1" aria-hidden="true"></a><span class="fu">sh</span> test.sh</span></code></pre></div>
<p><a href="https://i.stack.imgur.com/soecn.png" rel="noreferrer"><img src="https://i.stack.imgur.com/soecn.png" alt="enter image description here"></a></p>
</section>
<section id="answer-3-score-47-3" class="level4">
<h4>Answer 3 (score 47)</h4>
<p>The most common way to run a <a href="http://en.wikipedia.org/wiki/Bourne_shell" rel="noreferrer"><strong>.sh</strong></a> file is using the <strong>sh</strong> command:</p>
<div class="sourceCode" id="cb581"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb581-1"><a href="#cb581-1" aria-hidden="true"></a><span class="ex">C</span>:<span class="dt">\&gt;</span>sh my-script-test.sh </span></code></pre></div>
<p>other good option is installing <a href="https://www.cygwin.com/" rel="noreferrer"><strong>CygWin</strong></a></p>
<p>in <code>Windows</code> the <code>home</code> is located in:</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb582-1"><a href="#cb582-1" aria-hidden="true"></a><span class="ex">C</span>:\cygwin64\home<span class="dt">\[</span>user]</span></code></pre></div>
<p>for example i execute my <code>my-script-test.sh</code> file using the <a href="http://linux.about.com/library/cmd/blcmdl1_bash.htm" rel="noreferrer"><strong>bash</strong></a> command as:</p>
<div class="sourceCode" id="cb583"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb583-1"><a href="#cb583-1" aria-hidden="true"></a><span class="ex">jorgesys@INT024P</span> ~$ bash /home/[user]/my-script-test.sh </span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="changing-default-shell-in-linux-score-504666-in-2019" class="level3">
<h3>74: Changing default shell in Linux (score <a href="https://stackoverflow.com/q/13046192.html">504666</a> in 2019)</h3>
<section id="question-73" class="level4">
<h4>Question</h4>
<p>How is it possible to change the default shell? The <code>env</code> command currently says:</p>
<div class="sourceCode" id="cb584"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb584-1"><a href="#cb584-1" aria-hidden="true"></a><span class="va">SHELL=</span>/bin/tcsh</span></code></pre></div>
<p>and I want to change that to Bash.</p>
</section>
<section id="answer-accepted-score-391" class="level4">
<h4>Answer accepted (score 391)</h4>
<p>Try linux command <code>chsh</code>.</p>
<p>
The detailed command is <code>chsh -s /bin/bash</code>. It will prompt you to enter your password. Your default login shell is <code>/bin/bash</code> now. <strong>You must log out and log back in to see this change.</strong>
</p>
<p>The following is quoted from man page:</p>
<blockquote>
<p>
The chsh command changes the user login shell. This determines the name of the users initial login command. A normal user may only change the login shell for her own account, the superuser may change the login shell for any account
</p>
</blockquote>
<p>This command will change the default login shell permanently.</p>
<p>Note: If your user account is remote such as on Kerberos authentication (e.g. Enterprise RHEL) then you will not be able to use <code>chsh</code>.</p>
</section>
<section id="answer-2-score-142" class="level4">
<h4>Answer 2 (score 142)</h4>
<p>You can change the passwd file directly for the particular user or use the below command</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb585-1"><a href="#cb585-1" aria-hidden="true"></a><span class="fu">chsh</span> -s /usr/local/bin/bash username</span></code></pre></div>
<p><strong>Then log out and log in</strong></p>
</section>
<section id="answer-3-score-16" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>You should have a ‘skeleton’ somewhere in <code>/etc</code>, probably <code>/etc/skeleton</code>, or check the default settings, probably <code>/etc/default</code> or something. Those are scripts that define standard environment variables getting set during a login.</p>
<p>If it is just for your own account: check the (hidden) file <code>~/.profile</code> and <code>~/.login</code>. Or generate them, if they don’t exist. These are also evaluated by the login process.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="echo-that-outputs-to-stderr-score-493483-in-2014" class="level3">
<h3>75: echo that outputs to stderr (score <a href="https://stackoverflow.com/q/2990414.html">493483</a> in 2014)</h3>
<section id="question-74" class="level4">
<h4>Question</h4>
<p>Is there a standard Bash tool that acts like echo but outputs to stderr rather than stdout?</p>
<p>I know I can do <code>echo foo 1&amp;gt;&amp;amp;2</code> but it’s kinda ugly and, I suspect, error prone (e.g. more likely to get edited wrong when things change).</p>
</section>
<section id="answer-accepted-score-1283" class="level4">
<h4>Answer accepted (score 1283)</h4>
<p>You could do this, which facilitates reading:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb586-1"><a href="#cb586-1" aria-hidden="true"></a><span class="op">&gt;&amp;2</span> <span class="bu">echo</span> <span class="st">&quot;error&quot;</span></span></code></pre></div>
<p><code>&amp;gt;&amp;amp;2</code> copies file descriptor #2 to file descriptor #1. Therefore, after this redirection is performed, both file descriptors will refer to the same file: the one file descriptor #2 was <strong>originally</strong> referring to. For more information see the <a href="http://wiki.bash-hackers.org/howto/redirection_tutorial" rel="noreferrer">Bash Hackers Illustrated Redirection Tutorial</a>.</p>
</section>
<section id="answer-2-score-398" class="level4">
<h4>Answer 2 (score 398)</h4>
<p>You could define a function:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb587-1"><a href="#cb587-1" aria-hidden="true"></a><span class="fu">echoerr()</span> <span class="kw">{</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> <span class="op">1&gt;&amp;2</span><span class="kw">;</span> <span class="kw">}</span></span>
<span id="cb587-2"><a href="#cb587-2" aria-hidden="true"></a><span class="ex">echoerr</span> hello world</span></code></pre></div>
<p>This would be faster than a script and have no dependencies.</p>
<p>Camilo Martin’s bash specific suggestion uses a “here string” and will print anything you pass to it, including arguments (-n) that echo would normally swallow:</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb588-1"><a href="#cb588-1" aria-hidden="true"></a><span class="fu">echoerr()</span> <span class="kw">{</span> <span class="fu">cat</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> <span class="op">1&gt;&amp;2</span><span class="kw">;</span> <span class="kw">}</span></span></code></pre></div>
<p>Glenn Jackman’s solution also avoids the argument swallowing problem:</p>
<div class="sourceCode" id="cb589"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb589-1"><a href="#cb589-1" aria-hidden="true"></a><span class="fu">echoerr()</span> <span class="kw">{</span> <span class="bu">printf</span> <span class="st">&quot;%s\n&quot;</span> <span class="st">&quot;</span><span class="va">$*</span><span class="st">&quot;</span> <span class="op">&gt;&amp;2</span><span class="kw">;</span> <span class="kw">}</span></span></code></pre></div>
</section>
<section id="answer-3-score-230" class="level4">
<h4>Answer 3 (score 230)</h4>
<p>Since <code>1</code> is the standard output, you do not have to explicitly name it in front of an output redirection like <code>&amp;gt;</code> but instead can simply type:</p>
<pre>
echo This message goes to stderr >&2
</pre>
<p>Since you seem to be worried that <code>1&amp;gt;&amp;amp;2</code> will be difficult for you to reliably type, the elimination of the redundant <code>1</code> might be a slight encouragement to you!</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="bash-if-statement-with-multiple-conditions-throws-an-error-score-493173-in-2017" class="level3">
<h3>76: Bash if statement with multiple conditions throws an error (score <a href="https://stackoverflow.com/q/16203088.html">493173</a> in 2017)</h3>
<section id="question-75" class="level4">
<h4>Question</h4>
<p>I’m trying to write a script that will check two error flags, and in case one flag (or both) are changed it’ll echo– error happened. My script:</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb590-1"><a href="#cb590-1" aria-hidden="true"></a><span class="va">my_error_flag=</span>0</span>
<span id="cb590-2"><a href="#cb590-2" aria-hidden="true"></a><span class="va">my_error_flag_o=</span>0</span>
<span id="cb590-3"><a href="#cb590-3" aria-hidden="true"></a><span class="kw">do</span> <span class="ex">something.....</span></span>
<span id="cb590-4"><a href="#cb590-4" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;</span><span class="va">$my_error_flag</span><span class="st">&quot;</span>==<span class="st">&quot;1&quot;</span> || <span class="st">&quot;</span><span class="va">$my_error_flag_o</span><span class="st">&quot;</span>==<span class="st">&quot;2&quot;</span> ] || [ <span class="st">&quot;</span><span class="va">$my_error_flag</span><span class="st">&quot;</span>=<span class="st">&quot;1&quot;</span> &amp;&amp;     <span class="st">&quot;</span><span class="va">$my_error_flag_o</span><span class="st">&quot;</span>=<span class="st">&quot;2&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb590-5"><a href="#cb590-5" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$my_error_flag</span><span class="st">&quot;</span></span>
<span id="cb590-6"><a href="#cb590-6" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb590-7"><a href="#cb590-7" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;no flag&quot;</span></span>
<span id="cb590-8"><a href="#cb590-8" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Basically, it should be, something along:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb591-1"><a href="#cb591-1" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">((</span>a=1 or b=2) or (a=1 and b=2))</span>
<span id="cb591-2"><a href="#cb591-2" aria-hidden="true"></a>  then</span>
<span id="cb591-3"><a href="#cb591-3" aria-hidden="true"></a>     display error</span>
<span id="cb591-4"><a href="#cb591-4" aria-hidden="true"></a>else</span>
<span id="cb591-5"><a href="#cb591-5" aria-hidden="true"></a>     no error</span>
<span id="cb591-6"><a href="#cb591-6" aria-hidden="true"></a>fi</span></code></pre></div>
<p>The error I get is:</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb592-1"><a href="#cb592-1" aria-hidden="true"></a> <span class="ex">line</span> 26: conditional binary operator expected</span>
<span id="cb592-2"><a href="#cb592-2" aria-hidden="true"></a> <span class="ex">line</span> 26: syntax error near <span class="kw">`</span>]<span class="st">&#39;</span></span>
<span id="cb592-3"><a href="#cb592-3" aria-hidden="true"></a><span class="st"> line 26: `if [[ &quot;$my_error_flag&quot;==&quot;1&quot; || &quot;$my_error_flag_o&quot;==&quot;2&quot; ] || [ &quot;$my_error_flag&quot;=&quot;1&quot; &amp;&amp; &quot;$my_error_flag_o&quot;=&quot;2&quot; ]]; then&#39;</span></span></code></pre></div>
<p>Are my brackets messed up?</p>
</section>
<section id="answer-accepted-score-211" class="level4">
<h4>Answer accepted (score 211)</h4>
<p>Use <code>-a</code> (for and) and <code>-o</code> (for or) operations.</p>
<p><a href="http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html">tldp.org/LDP/Bash-Beginners-Guide/html/sect_07_01.html</a></p>
<p>Update</p>
<p>Actually you could still use <code>&amp;amp;&amp;amp;</code> and <code>||</code> with the <code>-eq</code> operation. So your script would be like this:</p>
<div class="sourceCode" id="cb593"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb593-1"><a href="#cb593-1" aria-hidden="true"></a><span class="va">my_error_flag=</span>1</span>
<span id="cb593-2"><a href="#cb593-2" aria-hidden="true"></a><span class="va">my_error_flag_o=</span>1</span>
<span id="cb593-3"><a href="#cb593-3" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$my_error_flag</span> <span class="ot">-eq</span> 1<span class="bu"> ]</span> <span class="kw">||</span>  [ <span class="va">$my_error_flag_o</span> <span class="ex">-eq</span> 2 ] <span class="kw">||</span> <span class="kw">(</span>[ <span class="va">$my_error_flag</span> <span class="ex">-eq</span> 1 ] <span class="kw">&amp;&amp;</span><span class="bu"> [</span> <span class="va">$my_error_flag_o</span> <span class="ot">-eq</span> 2 ]); then</span>
<span id="cb593-4"><a href="#cb593-4" aria-hidden="true"></a>      echo <span class="st">&quot;</span><span class="va">$my_error_flag</span><span class="st">&quot;</span></span>
<span id="cb593-5"><a href="#cb593-5" aria-hidden="true"></a>else</span>
<span id="cb593-6"><a href="#cb593-6" aria-hidden="true"></a>    echo <span class="st">&quot;no flag&quot;</span></span>
<span id="cb593-7"><a href="#cb593-7" aria-hidden="true"></a>fi</span></code></pre></div>
<p>Although in your case you can discard the last two expressions and just stick with one or operation like this:</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb594-1"><a href="#cb594-1" aria-hidden="true"></a><span class="va">my_error_flag=</span>1</span>
<span id="cb594-2"><a href="#cb594-2" aria-hidden="true"></a><span class="va">my_error_flag_o=</span>1</span>
<span id="cb594-3"><a href="#cb594-3" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="va">$my_error_flag</span> <span class="ot">-eq</span> 1<span class="bu"> ]</span> <span class="kw">||</span>  [ <span class="va">$my_error_flag_o</span> <span class="ex">-eq</span> 2 ]<span class="kw">;</span> <span class="kw">then</span></span>
<span id="cb594-4"><a href="#cb594-4" aria-hidden="true"></a>      <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$my_error_flag</span><span class="st">&quot;</span></span>
<span id="cb594-5"><a href="#cb594-5" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb594-6"><a href="#cb594-6" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;no flag&quot;</span></span>
<span id="cb594-7"><a href="#cb594-7" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-2-score-58-1" class="level4">
<h4>Answer 2 (score 58)</h4>
<p>You can use either <code>[[</code> or <code>((</code> keyword. When you use <code>[[</code> keyword, you have to use string operators such as <code>-eq</code>, <code>-lt</code>. I think, <code>((</code> is most preferred for arithmetic, because you can directly use operators such as <code>==</code>, <code>&amp;lt;</code> and <code>&amp;gt;</code>.</p>
<p>Using <code>[[</code> operator</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb595-1"><a href="#cb595-1" aria-hidden="true"></a><span class="va">a=$1</span></span>
<span id="cb595-2"><a href="#cb595-2" aria-hidden="true"></a><span class="va">b=$2</span></span>
<span id="cb595-3"><a href="#cb595-3" aria-hidden="true"></a><span class="kw">if [[</span> a <span class="ot">-eq</span> 1 || b <span class="ot">-eq</span> 2<span class="kw"> ]]</span> <span class="kw">|| [[</span> a <span class="ot">-eq</span> 3 &amp;&amp; b <span class="ot">-eq</span> 4<span class="kw"> ]]</span></span>
<span id="cb595-4"><a href="#cb595-4" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb595-5"><a href="#cb595-5" aria-hidden="true"></a>     <span class="bu">echo</span> <span class="st">&quot;Error&quot;</span></span>
<span id="cb595-6"><a href="#cb595-6" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb595-7"><a href="#cb595-7" aria-hidden="true"></a>     <span class="bu">echo</span> <span class="st">&quot;No Error&quot;</span></span>
<span id="cb595-8"><a href="#cb595-8" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Using <code>((</code> operator</p>
<div class="sourceCode" id="cb596"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb596-1"><a href="#cb596-1" aria-hidden="true"></a><span class="va">a=$1</span></span>
<span id="cb596-2"><a href="#cb596-2" aria-hidden="true"></a><span class="va">b=$2</span></span>
<span id="cb596-3"><a href="#cb596-3" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">((</span> a == 1 || b == 2 <span class="kw">))</span> <span class="kw">||</span> <span class="kw">((</span> a == 3 &amp;&amp; b == 4 <span class="kw">))</span></span>
<span id="cb596-4"><a href="#cb596-4" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb596-5"><a href="#cb596-5" aria-hidden="true"></a>     <span class="bu">echo</span> <span class="st">&quot;Error&quot;</span></span>
<span id="cb596-6"><a href="#cb596-6" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb596-7"><a href="#cb596-7" aria-hidden="true"></a>     <span class="bu">echo</span> <span class="st">&quot;No Error&quot;</span></span>
<span id="cb596-8"><a href="#cb596-8" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Do not use <code>-a</code> or <code>-o</code> operators Since it is not Portable.</p>
</section>
<section id="answer-3-score-7" class="level4">
<h4>Answer 3 (score 7)</h4>
<p>Please try following</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb597-1"><a href="#cb597-1" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">(</span>[ <span class="va">$dateR</span> <span class="ex">-ge</span> 234 ] <span class="kw">&amp;&amp;</span><span class="bu"> [</span> <span class="va">$dateR</span> <span class="ot">-lt</span> 238 ]) || ([ <span class="va">$dateR</span> -ge 834 ] &amp;&amp; [ <span class="va">$dateR</span> -lt 838 ]) || ([ <span class="va">$dateR</span> -ge 1434 ] &amp;&amp; [ <span class="va">$dateR</span> -lt 1438 ]) || ([ <span class="va">$dateR</span> -ge 2034 ] &amp;&amp; [ <span class="va">$dateR</span> -lt 2038 ]) ;</span>
<span id="cb597-2"><a href="#cb597-2" aria-hidden="true"></a>then</span>
<span id="cb597-3"><a href="#cb597-3" aria-hidden="true"></a>    echo <span class="st">&quot;WORKING&quot;</span></span>
<span id="cb597-4"><a href="#cb597-4" aria-hidden="true"></a>else</span>
<span id="cb597-5"><a href="#cb597-5" aria-hidden="true"></a>    echo <span class="st">&quot;Out of range!&quot;</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-use-as-awk-field-separator-score-491168-in-2010" class="level3">
<h3>77: How to use “:” as awk field separator? (score <a href="https://stackoverflow.com/q/2609552.html">491168</a> in 2010)</h3>
<section id="question-76" class="level4">
<h4>Question</h4>
<p>Given following command:</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb598-1"><a href="#cb598-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;1: &quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;/1/ -F &quot;:&quot; {print $1}&#39;</span></span></code></pre></div>
<p>why does awk output:</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb599-1"><a href="#cb599-1" aria-hidden="true"></a><span class="ex">1</span>: </span></code></pre></div>
</section>
<section id="answer-accepted-score-348" class="level4">
<h4>Answer accepted (score 348)</h4>
<p>“-F” is a command line argument not awk syntax, try:</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb600-1"><a href="#cb600-1" aria-hidden="true"></a> <span class="bu">echo</span> <span class="st">&quot;1: &quot;</span> <span class="kw">|</span> <span class="fu">awk</span> -F  <span class="st">&quot;:&quot;</span> <span class="st">&#39;/1/ {print $1}&#39;</span></span></code></pre></div>
</section>
<section id="answer-2-score-59" class="level4">
<h4>Answer 2 (score 59)</h4>
<p>If you want to do it programatically, you can use the <code>FS</code> variable:</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb601-1"><a href="#cb601-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;1: &quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;BEGIN { FS=&quot;:&quot; } /1/ { print $1 }&#39;</span></span></code></pre></div>
<p>Note that if you change it in the main loop rather than the <code>BEGIN</code> loop, it takes affect for the <em>next</em> line read in, since the current line has already been split.</p>
</section>
<section id="answer-3-score-27" class="level4">
<h4>Answer 3 (score 27)</h4>
<p>You have multiple ways to set <code>:</code> as separator:</p>
<div class="sourceCode" id="cb602"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb602-1"><a href="#cb602-1" aria-hidden="true"></a><span class="fu">awk</span> -F: <span class="st">&#39;{print $1}&#39;</span></span>
<span id="cb602-2"><a href="#cb602-2" aria-hidden="true"></a></span>
<span id="cb602-3"><a href="#cb602-3" aria-hidden="true"></a><span class="fu">awk</span> -v FS=: <span class="st">&#39;{print $1}&#39;</span></span>
<span id="cb602-4"><a href="#cb602-4" aria-hidden="true"></a></span>
<span id="cb602-5"><a href="#cb602-5" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span> FS=:</span>
<span id="cb602-6"><a href="#cb602-6" aria-hidden="true"></a></span>
<span id="cb602-7"><a href="#cb602-7" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;BEGIN{FS=&quot;:&quot;} {print $1}&#39;</span></span></code></pre></div>
<p>All of them are equivalent and for an will return <code>1</code> for a sample input “1:2:3”:</p>
<div class="sourceCode" id="cb603"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb603-1"><a href="#cb603-1" aria-hidden="true"></a>$ <span class="fu">awk</span> -F: <span class="st">&#39;{print $1}&#39;</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;1:2:3&quot;</span></span>
<span id="cb603-2"><a href="#cb603-2" aria-hidden="true"></a><span class="ex">1</span></span>
<span id="cb603-3"><a href="#cb603-3" aria-hidden="true"></a>$ <span class="fu">awk</span> -v FS=: <span class="st">&#39;{print $1}&#39;</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;1:2:3&quot;</span></span>
<span id="cb603-4"><a href="#cb603-4" aria-hidden="true"></a><span class="ex">1</span></span>
<span id="cb603-5"><a href="#cb603-5" aria-hidden="true"></a>$ <span class="fu">awk</span> <span class="st">&#39;{print $1}&#39;</span> FS=: <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;1:2:3&quot;</span></span>
<span id="cb603-6"><a href="#cb603-6" aria-hidden="true"></a><span class="ex">1</span></span>
<span id="cb603-7"><a href="#cb603-7" aria-hidden="true"></a>$ <span class="fu">awk</span> <span class="st">&#39;BEGIN{FS=&quot;:&quot;} {print $1}&#39;</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;1:2:3&quot;</span></span>
<span id="cb603-8"><a href="#cb603-8" aria-hidden="true"></a><span class="ex">1</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-remove-the-first-line-of-a-text-file-using-bashsed-script-score-486346-in-2011" class="level3">
<h3>78: How can I remove the first line of a text file using bash/sed script? (score <a href="https://stackoverflow.com/q/339483.html">486346</a> in 2011)</h3>
<section id="question-77" class="level4">
<h4>Question</h4>
<p>I need to repeatedly remove the first line from a huge text file using a bash script.</p>
<p>Right now I am using <code>sed -i -e "1d" $FILE</code> - but it takes around a minute to do the deletion.</p>
<p>Is there a more efficient way to accomplish this?</p>
</section>
<section id="answer-accepted-score-948" class="level4">
<h4>Answer accepted (score 948)</h4>
<p>Try <a href="http://man7.org/linux/man-pages/man1/tail.1.html" rel="noreferrer">tail</a>:</p>
<div class="sourceCode" id="cb604"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb604-1"><a href="#cb604-1" aria-hidden="true"></a><span class="fu">tail</span> -n +2 <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">&quot;</span></span></code></pre></div>
<p><code>-n x</code>: Just print the last <code>x</code> lines. <code>tail -n 5</code> would give you the last 5 lines of the input. The <code>+</code> sign kind of inverts the argument and make <code>tail</code> print anything but the first <code>x-1</code> lines. <code>tail -n +1</code> would print the whole file, <code>tail -n +2</code> everything but the first line, etc.</p>
<p>GNU <code>tail</code> is much faster than <code>sed</code>. <code>tail</code> is also available on BSD and the <code>-n +2</code> flag is consistent across both tools. Check the <a href="https://www.freebsd.org/cgi/man.cgi?query=tail" rel="noreferrer">FreeBSD</a> or <a href="https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/tail.1.html" rel="noreferrer">OS X</a> man pages for more.</p>
<p>The BSD version can be much slower than <code>sed</code>, though. I wonder how they managed that; <code>tail</code> should just read a file line by line while <code>sed</code> does pretty complex operations involving interpreting a script, applying regular expressions and the like.</p>
<p>Note: You may be tempted to use</p>
<div class="sourceCode" id="cb605"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb605-1"><a href="#cb605-1" aria-hidden="true"></a></span>
<span id="cb605-2"><a href="#cb605-2" aria-hidden="true"></a><span class="co"># THIS WILL GIVE YOU AN EMPTY FILE!</span></span>
<span id="cb605-3"><a href="#cb605-3" aria-hidden="true"></a><span class="fu">tail</span> -n +2 <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">&quot;</span> <span class="op">&gt;</span> <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">&quot;</span></span></code></pre></div>
<p>but this will give you an <strong>empty file</strong>. The reason is that the redirection (<code>&amp;gt;</code>) happens before <code>tail</code> is invoked by the shell:</p>
<ol>
<li>
Shell truncates file <code>$FILE</code>
</li>
<li>
Shell creates a new process for <code>tail</code>
</li>
<li>
Shell redirects stdout of the <code>tail</code> process to <code>$FILE</code>
</li>
<li>
<code>tail</code> reads from the now empty <code>$FILE</code>
</li>
</ol>
<p>If you want to remove the first line inside the file, you should use:</p>
<div class="sourceCode" id="cb606"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb606-1"><a href="#cb606-1" aria-hidden="true"></a><span class="fu">tail</span> -n +2 <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">&quot;</span> <span class="op">&gt;</span> <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">.tmp&quot;</span> <span class="kw">&amp;&amp;</span> <span class="fu">mv</span> <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">.tmp&quot;</span> <span class="st">&quot;</span><span class="va">$FILE</span><span class="st">&quot;</span></span></code></pre></div>
<p>The <code>&amp;amp;&amp;amp;</code> will make sure that the file doesn’t get overwritten when there is a problem.</p>
</section>
<section id="answer-2-score-152" class="level4">
<h4>Answer 2 (score 152)</h4>
<p>You can use -i to update the file without using ‘&gt;’ operator. The following command will delete the first line from the file and save it to the file.</p>
<div class="sourceCode" id="cb607"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb607-1"><a href="#cb607-1" aria-hidden="true"></a><span class="fu">sed</span> -i <span class="st">&#39;1d&#39;</span> filename</span></code></pre></div>
</section>
<section id="answer-3-score-71-2" class="level4">
<h4>Answer 3 (score 71)</h4>
<p>For those who are on SunOS which is non-GNU, the following code will help:</p>
<div class="sourceCode" id="cb608"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb608-1"><a href="#cb608-1" aria-hidden="true"></a><span class="fu">sed</span> <span class="st">&#39;1d&#39;</span> test.dat <span class="op">&gt;</span> tmp.dat </span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="configure-binshm-bad-interpreter-score-480455-in-2010" class="level3">
<h3>79: ./configure : /bin/sh^M : bad interpreter (score <a href="https://stackoverflow.com/q/2920416.html">480455</a> in 2010)</h3>
<section id="question-78" class="level4">
<h4>Question</h4>
<p>I’ve been trying to install lpng142 on my fed 12 system. Seems like a problem to me. I get this error</p>
<div class="sourceCode" id="cb609"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb609-1"><a href="#cb609-1" aria-hidden="true"></a>[<span class="ex">root@localhost</span> lpng142]</span>
<span id="cb609-2"><a href="#cb609-2" aria-hidden="true"></a><span class="co"># ./configure</span></span>
<span id="cb609-3"><a href="#cb609-3" aria-hidden="true"></a><span class="ex">bash</span>: ./configure: /bin/sh^M: bad interpreter: No such file or directory</span>
<span id="cb609-4"><a href="#cb609-4" aria-hidden="true"></a>[<span class="ex">root@localhost</span> lpng142]</span>
<span id="cb609-5"><a href="#cb609-5" aria-hidden="true"></a><span class="co"># </span></span></code></pre></div>
<p>How do I fix this? The <code>/etc/fstab</code> file:</p>
<div class="sourceCode" id="cb610"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb610-1"><a href="#cb610-1" aria-hidden="true"></a></span>
<span id="cb610-2"><a href="#cb610-2" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb610-3"><a href="#cb610-3" aria-hidden="true"></a></span>
<span id="cb610-4"><a href="#cb610-4" aria-hidden="true"></a><span class="co"># /etc/fstab</span></span>
<span id="cb610-5"><a href="#cb610-5" aria-hidden="true"></a></span>
<span id="cb610-6"><a href="#cb610-6" aria-hidden="true"></a><span class="co"># Created by anaconda on Wed May 26 18:12:05 2010</span></span>
<span id="cb610-7"><a href="#cb610-7" aria-hidden="true"></a></span>
<span id="cb610-8"><a href="#cb610-8" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb610-9"><a href="#cb610-9" aria-hidden="true"></a></span>
<span id="cb610-10"><a href="#cb610-10" aria-hidden="true"></a><span class="co"># Accessible filesystems, by reference, are maintained under &#39;/dev/disk&#39;</span></span>
<span id="cb610-11"><a href="#cb610-11" aria-hidden="true"></a></span>
<span id="cb610-12"><a href="#cb610-12" aria-hidden="true"></a><span class="co"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span></span>
<span id="cb610-13"><a href="#cb610-13" aria-hidden="true"></a></span>
<span id="cb610-14"><a href="#cb610-14" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb610-15"><a href="#cb610-15" aria-hidden="true"></a><span class="ex">/dev/mapper/VolGroup-lv_root</span> /                       ext4    defaults        1 1</span>
<span id="cb610-16"><a href="#cb610-16" aria-hidden="true"></a><span class="va">UUID=</span>ce67cf79-22c3-45d4-8374-bd0075617cc8 <span class="ex">/boot</span>                   ext4    </span>
<span id="cb610-17"><a href="#cb610-17" aria-hidden="true"></a><span class="ex">defaults</span>        1 2</span>
<span id="cb610-18"><a href="#cb610-18" aria-hidden="true"></a><span class="ex">/dev/mapper/VolGroup-lv_swap</span> swap                    swap    defaults        0 0</span>
<span id="cb610-19"><a href="#cb610-19" aria-hidden="true"></a><span class="ex">tmpfs</span>                   /dev/shm                tmpfs   defaults        0 0</span>
<span id="cb610-20"><a href="#cb610-20" aria-hidden="true"></a><span class="ex">devpts</span>                  /dev/pts                devpts  gid=5,mode=620  0 0</span>
<span id="cb610-21"><a href="#cb610-21" aria-hidden="true"></a><span class="ex">sysfs</span>                   /sys                    sysfs   defaults        0 0</span>
<span id="cb610-22"><a href="#cb610-22" aria-hidden="true"></a><span class="ex">proc</span>                    /proc                   proc    defaults        0 0</span></code></pre></div>
</section>
<section id="answer-accepted-score-717-1" class="level4">
<h4>Answer accepted (score 717)</h4>
<p>To fix, open your script with vi or vim and enter in vi command mode (key <KBD>Esc</KBD>), then type this:</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb611-1"><a href="#cb611-1" aria-hidden="true"></a>:<span class="ex">set</span> fileformat=unix</span></code></pre></div>
<p>Finally save it</p>
<p><code>:x!</code> or <code>:wq!</code></p>
</section>
<section id="answer-2-score-360" class="level4">
<h4>Answer 2 (score 360)</h4>
<p>Looks like you have a dos line ending file. The clue is the <code>^M</code>.</p>
<p>You need to re-save the file using Unix line endings.</p>
<p>You might have a <code>dos2unix</code> command line utility that will also do this for you.</p>
</section>
<section id="answer-3-score-94" class="level4">
<h4>Answer 3 (score 94)</h4>
<p>Or if you want to do this with a script:</p>
<div class="sourceCode" id="cb612"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb612-1"><a href="#cb612-1" aria-hidden="true"></a><span class="fu">sed</span> -i <span class="st">&#39;s/\r//&#39;</span> filename</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-do-a-recursive-findreplace-of-a-string-with-awk-or-sed-score-478857-in-2018" class="level3">
<h3>80: How to do a recursive find/replace of a string with awk or sed? (score <a href="https://stackoverflow.com/q/1583219.html">478857</a> in 2018)</h3>
<section id="question-79" class="level4">
<h4>Question</h4>
<p>How do I find and replace every occurrence of:</p>
<div class="sourceCode" id="cb613"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb613-1"><a href="#cb613-1" aria-hidden="true"></a><span class="ex">subdomainA.example.com</span></span></code></pre></div>
<p>with</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb614-1"><a href="#cb614-1" aria-hidden="true"></a><span class="ex">subdomainB.example.com</span></span></code></pre></div>
<p>in every text file under the <code>/home/www/</code> directory tree recursively?</p>
</section>
<section id="answer-2-score-809" class="level4">
<h4>Answer 2 (score 809)</h4>
<div class="sourceCode" id="cb615"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb615-1"><a href="#cb615-1" aria-hidden="true"></a><span class="fu">find</span> /home/www <span class="dt">\(</span> -type d -name .git -prune <span class="dt">\)</span> -o -type f -print0 <span class="kw">|</span> <span class="fu">xargs</span> -0 sed -i <span class="st">&#39;s/subdomainA\.example\.com/subdomainB.example.com/g&#39;</span></span></code></pre></div>
<p>From <code>man find</code>:</p>
<blockquote>
<strong>-print0</strong> (GNU <code>find</code> only) tells <code>find</code> to use the null character (<code>\0</code>) instead of whitespace as the output delimiter between pathnames found. This is a safer option if your files can contain blanks or other special characters. It is recommended to use the <code>-print0</code> argument to <code>find</code> if you use <code>-exec &amp;lt;command&amp;gt;</code> or <code>xargs</code> (the <code>-0</code> argument is needed in <code>xargs</code>.)
</blockquote>
</section>
<section id="answer-3-score-238" class="level4">
<h4>Answer 3 (score 238)</h4>
<p><strong>Note</strong>: Do not run this command on a folder including a git repo - changes to .git could corrupt your git index.</p>
<div class="sourceCode" id="cb616"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb616-1"><a href="#cb616-1" aria-hidden="true"></a><span class="fu">find</span> /home/www/ -type f -exec <span class="kw">\</span></span>
<span id="cb616-2"><a href="#cb616-2" aria-hidden="true"></a>    <span class="fu">sed</span> -i <span class="st">&#39;s/subdomainA\.example\.com/subdomainB.example.com/g&#39;</span> {} <span class="ex">+</span></span></code></pre></div>
<p>Compared to other answers here, this is simpler than most and uses sed instead of perl, which is what the original question asked for.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-get-the-primary-ip-address-of-the-local-machine-on-linux-and-os-x-score-477129-in-2019" class="level3">
<h3>81: How to get the primary IP address of the local machine on Linux and OS X? (score <a href="https://stackoverflow.com/q/13322485.html">477129</a> in 2019)</h3>
<section id="question-80" class="level4">
<h4>Question</h4>
<p>I am looking for a command line solution that would return me the primary (first) IP address of the localhost, other than 127.0.0.1</p>
<p>The solution should work at least for Linux (Debian and RedHat) and OS X 10.7+</p>
<p>I am aware that <code>ifconfig</code> is available on both but its output is not so consistent between these platforms.</p>
</section>
<section id="answer-accepted-score-447" class="level4">
<h4>Answer accepted (score 447)</h4>
<p>Use <code>grep</code> to filter IP address from <code>ifconfig</code>:</p>
<p><code>ifconfig | grep -Eo 'inet (addr:)?([0-9]*\.){3}[0-9]*' | grep -Eo '([0-9]*\.){3}[0-9]*' | grep -v '127.0.0.1'</code></p>
<p>Or with <code>sed</code>:</p>
<p><code>ifconfig | sed -En 's/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p'</code></p>
<p>If you are only interested in certain interfaces, wlan0, eth0, etc. then:</p>
<p><code>ifconfig wlan0 | ...</code></p>
<p>You can alias the command in your <code>.bashrc</code> to <em>create</em> your own command called <code>myip</code> for instance.</p>
<p><code>alias myip="ifconfig | sed -En 's/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p'"</code></p>
<p>A much simpler way is <code>hostname -I</code> (<code>hostname -i</code> for older versions of <code>hostname</code> but see comments). However, this is on Linux only.</p>
</section>
<section id="answer-2-score-214" class="level4">
<h4>Answer 2 (score 214)</h4>
<p>For linux machines (not OS X) :</p>
<div class="sourceCode" id="cb617"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb617-1"><a href="#cb617-1" aria-hidden="true"></a><span class="fu">hostname</span> --ip-address</span></code></pre></div>
</section>
<section id="answer-3-score-210" class="level4">
<h4>Answer 3 (score 210)</h4>
<p>The following will work on Linux but not OSX.</p>
<p>This doesn’t rely on DNS at all, and it works even if <code>/etc/hosts</code> is not set correctly (<code>1</code> is shorthand for <code>1.0.0.0</code>):</p>
<div class="sourceCode" id="cb618"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb618-1"><a href="#cb618-1" aria-hidden="true"></a><span class="ex">ip</span> route get 1 <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $NF;exit}&#39;</span></span></code></pre></div>
<p>or avoiding <code>awk</code> and using Google’s public DNS at <code>8.8.8.8</code> for obviousness:</p>
<div class="sourceCode" id="cb619"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb619-1"><a href="#cb619-1" aria-hidden="true"></a><span class="ex">ip</span> route get 8.8.8.8 <span class="kw">|</span> <span class="fu">head</span> -1 <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">&#39; &#39;</span> -f8</span></code></pre></div>
<p>A less reliable way: (see comment below)</p>
<div class="sourceCode" id="cb620"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb620-1"><a href="#cb620-1" aria-hidden="true"></a><span class="fu">hostname</span> -I <span class="kw">|</span> <span class="fu">cut</span> -d<span class="st">&#39; &#39;</span> -f1</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-append-output-to-the-end-of-a-text-file-score-475123-in-2018" class="level3">
<h3>82: How to append output to the end of a text file (score <a href="https://stackoverflow.com/q/6207573.html">475123</a> in 2018)</h3>
<section id="question-81" class="level4">
<h4>Question</h4>
<p>How do I append the output of a command to the end of a text file?</p>
</section>
<section id="answer-2-score-582" class="level4">
<h4>Answer 2 (score 582)</h4>
<p>Use <code>&amp;gt;&amp;gt;</code> instead of <code>&amp;gt;</code> when directing output to a file:</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb621-1"><a href="#cb621-1" aria-hidden="true"></a><span class="ex">your_command</span> <span class="op">&gt;&gt;</span> file_to_append_to</span></code></pre></div>
<p>If <code>file_to_append_to</code> does not exist, it will be created.</p>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb622"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb622-1"><a href="#cb622-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;hello&quot;</span> <span class="op">&gt;</span> file</span>
<span id="cb622-2"><a href="#cb622-2" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;world&quot;</span> <span class="op">&gt;&gt;</span> file</span>
<span id="cb622-3"><a href="#cb622-3" aria-hidden="true"></a>$ <span class="fu">cat</span> file </span>
<span id="cb622-4"><a href="#cb622-4" aria-hidden="true"></a><span class="ex">hello</span></span>
<span id="cb622-5"><a href="#cb622-5" aria-hidden="true"></a><span class="ex">world</span></span></code></pre></div>
</section>
<section id="answer-3-score-74" class="level4">
<h4>Answer 3 (score 74)</h4>
<p>To <code>append</code> a file use <code>&amp;gt;&amp;gt;</code></p>
<blockquote>
<div class="sourceCode" id="cb623"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb623-1"><a href="#cb623-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;hello world&quot;</span>  <span class="op">&gt;&gt;</span> read.txt   </span>
<span id="cb623-2"><a href="#cb623-2" aria-hidden="true"></a><span class="fu">cat</span> read.txt     </span>
<span id="cb623-3"><a href="#cb623-3" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;hello siva&quot;</span> <span class="op">&gt;&gt;</span> read.txt   </span>
<span id="cb623-4"><a href="#cb623-4" aria-hidden="true"></a><span class="fu">cat</span> read.txt</span></code></pre></div>
<p>then the output should be</p>
<div class="sourceCode" id="cb624"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb624-1"><a href="#cb624-1" aria-hidden="true"></a><span class="ex">hello</span> world</span>
<span id="cb624-2"><a href="#cb624-2" aria-hidden="true"></a><span class="co"># from 1st echo command</span></span>
<span id="cb624-3"><a href="#cb624-3" aria-hidden="true"></a><span class="ex">hello</span> world</span>
<span id="cb624-4"><a href="#cb624-4" aria-hidden="true"></a><span class="co"># from 2nd echo command</span></span>
<span id="cb624-5"><a href="#cb624-5" aria-hidden="true"></a><span class="ex">hello</span> siva</span></code></pre></div>
</blockquote>
<p>To <code>overwrite</code> a file use <code>&amp;gt;</code></p>
<blockquote>
<div class="sourceCode" id="cb625"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb625-1"><a href="#cb625-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;hello tom&quot;</span> <span class="op">&gt;</span> read.txt</span>
<span id="cb625-2"><a href="#cb625-2" aria-hidden="true"></a><span class="fu">cat</span> read.txt  </span></code></pre></div>
<p>then the out put is</p>
<code>hello tom</code>
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="given-two-directory-trees-how-can-i-find-out-which-files-differ-score-474513-in" class="level3">
<h3>83: Given two directory trees, how can I find out which files differ? (score <a href="https://stackoverflow.com/q/4997693.html">474513</a> in )</h3>
<section id="question-82" class="level4">
<h4>Question</h4>
<p>If I want find the differences between two directory trees, I usually just execute:</p>
<div class="sourceCode" id="cb626"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb626-1"><a href="#cb626-1" aria-hidden="true"></a><span class="fu">diff</span> -r dir1/ dir2/</span></code></pre></div>
<p>This outputs exactly what the differences are between corresponding files. I’m interested in just getting a list of corresponding files whose content differs. I assumed that this would simply be a matter of passing a command line option to <code>diff</code>, but I couldn’t find anything on the man page.</p>
<p>Any suggestions?</p>
</section>
<section id="answer-accepted-score-1052" class="level4">
<h4>Answer accepted (score 1052)</h4>
<p>You said Linux, so you luck out (at least it should be available, not sure when it was added):</p>
<div class="sourceCode" id="cb627"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb627-1"><a href="#cb627-1" aria-hidden="true"></a><span class="fu">diff</span> --brief --recursive dir1/ dir2/</span>
<span id="cb627-2"><a href="#cb627-2" aria-hidden="true"></a><span class="co"># GNU long options</span></span>
<span id="cb627-3"><a href="#cb627-3" aria-hidden="true"></a><span class="fu">diff</span> -qr dir1/ dir2/</span>
<span id="cb627-4"><a href="#cb627-4" aria-hidden="true"></a><span class="co"># common short options</span></span></code></pre></div>
<p>Should do what you need.</p>
<p>If you also want to see differences for files that may not exist in either directory:</p>
<div class="sourceCode" id="cb628"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb628-1"><a href="#cb628-1" aria-hidden="true"></a><span class="fu">diff</span> --brief --recursive --new-file dir1/ dir2/</span>
<span id="cb628-2"><a href="#cb628-2" aria-hidden="true"></a><span class="co"># GNU long options</span></span>
<span id="cb628-3"><a href="#cb628-3" aria-hidden="true"></a><span class="fu">diff</span> -qrN dir1/ dir2/</span>
<span id="cb628-4"><a href="#cb628-4" aria-hidden="true"></a><span class="co"># common short options</span></span></code></pre></div>
</section>
<section id="answer-2-score-284" class="level4">
<h4>Answer 2 (score 284)</h4>
<p>The command I use is:</p>
<div class="sourceCode" id="cb629"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb629-1"><a href="#cb629-1" aria-hidden="true"></a><span class="fu">diff</span> -qr dir1/ dir2/</span></code></pre></div>
<p>It is exactly the same as Mark’s :) But his answer bothered me as it uses different <em>types</em> of flags, and it made me look twice. Using Mark’s more verbose flags it would be:</p>
<div class="sourceCode" id="cb630"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb630-1"><a href="#cb630-1" aria-hidden="true"></a><span class="fu">diff</span>  --brief --recursive dir1/ dir2/</span></code></pre></div>
<p><sub>I apologise for posting when the other answer is perfectly acceptable. Could not stop myself… working on being less pedantic.</sub></p>
</section>
<section id="answer-3-score-96" class="level4">
<h4>Answer 3 (score 96)</h4>
<p>I like to use <code>git diff --no-index dir1/ dir2/</code>, because it can show the differences in color (if you have that option set in your git config) and because it shows all of the differences in a long paged output using “less”.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-i-exclude-all-permission-denied-messages-from-find-score-470044-in-2015" class="level3">
<h3>84: How can I exclude all “permission denied” messages from “find”? (score <a href="https://stackoverflow.com/q/762348.html">470044</a> in 2015)</h3>
<section id="question-83" class="level4">
<h4>Question</h4>
<p>I need to hide all <em>permission denied</em> messages from:</p>
<div class="sourceCode" id="cb631"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb631-1"><a href="#cb631-1" aria-hidden="true"></a><span class="fu">find</span> . <span class="op">&gt;</span> files_and_folders</span></code></pre></div>
<p>I am experimenting when such message arises. I need to gather all folders and files, to which it does not arise.</p>
<p>Is it possible to direct the permission levels to the <code>files_and_folders</code> file?</p>
<p>How can I hide the errors at the same time?</p>
</section>
<section id="answer-accepted-score-246" class="level4">
<h4>Answer accepted (score 246)</h4>
<p>
<sup>Note:<br> * This answer probably goes deeper than the use case warrants, and <code>find 2&amp;gt;/dev/null</code> may be good enough in many situations. It may still be of interest for a cross-platform perspective and for its discussion of some advanced shell techniques in the interest of finding a solution that is as robust as possible, even though the cases guarded against may be largely hypothetical.<br> * <strong>If your system is configured to show <em>localized</em> error messages</strong>, prefix the <code>find</code> calls below with <code>LC_ALL=C</code> (<code>LC_ALL=C find ...</code>) to ensure that <em>English</em> messages are reported, so that <code>grep -v 'Permission denied'</code> works as intended. Invariably, however, any error messages that <em>do</em> get displayed will then be in English as well.
</p>
<p>If your <strong>shell is <code>bash</code> or <code>zsh</code></strong>, there’s <strong>a solution that is robust while being reasonably simple</strong>, using <strong>only POSIX-compliant <code>find</code> features</strong>; while <code>bash</code> itself is not part of POSIX, most modern Unix platforms come with it, making this solution widely portable:</p>
<div class="sourceCode" id="cb632"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb632-1"><a href="#cb632-1" aria-hidden="true"></a><span class="fu">find</span> . <span class="op">&gt;</span> files_and_folders <span class="op">2&gt;</span> <span class="op">&gt;(</span><span class="fu">grep</span> -v <span class="st">&#39;Permission denied&#39;</span> <span class="op">&gt;&amp;2)</span></span></code></pre></div>
<p>Note: There’s a small chance that some of <code>grep</code>’s output may arrive <em>after</em> <code>find</code> completes, because the overall command doesn’t wait for the command inside <code>&amp;gt;(...)</code> to finish. In <code>bash</code>, you can prevent this by appending <code>| cat</code> to the command.</sup></p>
<ul>
<li>
<p>
<code>&amp;gt;(...)</code> is a (rarely used) <em>output</em> <a href="http://mywiki.wooledge.org/ProcessSubstitution" rel="noreferrer">process substitution</a> that allows redirecting output (in this case, <em>stderr</em> output (<code>2&amp;gt;</code>) to the stdin of the command inside <code>&amp;gt;(...)</code>.<br> In addition to <code>bash</code> and <code>zsh</code>, <code>ksh</code> supports them as well <em>in principle</em>, but trying to combine them with redirection from <em>stderr</em>, as is done here (<code>2&amp;gt; &amp;gt;(...)</code>), appears to be silently ignored (in <code>ksh 93u+</code>).
</p>
<ul>
<li>
<code>grep -v 'Permission denied'</code> filters <em>out</em> (<code>-v</code>) all lines (from the <code>find</code> command’s stderr stream) that contain the phrase <code>Permission denied</code> and outputs the remaining lines to stderr (<code>&amp;gt;&amp;amp;2</code>).
</li>
</ul>
</li>
</ul>
<p>This approach is:</p>
<ul>
<li>
<p>
<strong>robust</strong>: <code>grep</code> is only applied to <em>error messages</em> (and not to a combination of file paths and error messages, potentially leading to false positives), and error messages other than permission-denied ones are passed through, to stderr.
</p>
</li>
<li>
<p>
<strong>side-effect free</strong>: <code>find</code>’s exit code is preserved: the inability to access at least one of the filesystem items encountered results in exit code <code>1</code> (although that won’t tell you whether errors <em>other</em> than permission-denied ones occurred (too)).
</p>
</li>
</ul>
<hr>
<h5>
POSIX-compliant solutions:
</h3>
<p>Fully POSIX-compliant solutions either have limitations or require additional work.</p>
<p><strong>If <code>find</code>’s output is to be captured in a <em>file</em> anyway</strong> (or suppressed altogether), then the pipeline-based solution from <a href="https://stackoverflow.com/a/762360/45375">Jonathan Leffler’s answer</a> is simple, robust, and POSIX-compliant:</p>
<div class="sourceCode" id="cb633"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb633-1"><a href="#cb633-1" aria-hidden="true"></a><span class="fu">find</span> . <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span>files_and_folders <span class="kw">|</span> <span class="fu">grep</span> -v <span class="st">&#39;Permission denied&#39;</span> <span class="op">&gt;&amp;2</span></span></code></pre></div>
<p>Note that the order of the redirections matters: <code>2&amp;gt;&amp;amp;1</code> must come <em>first</em>.</p>
<p>Capturing stdout output in a file up front allows <code>2&amp;gt;&amp;amp;1</code> to send <em>only</em> error messages through the pipeline, which <code>grep</code> can then unambiguously operate on.</p>
<p>
The <strong>only downside is that the <em>overall exit code</em> will be the <code>grep</code> command’s</strong>, not <code>find</code>’s, which in this case means: if there are <em>no</em> errors at all or <em>only</em> permission-denied errors, the exit code will be <code>1</code> (signaling <em>failure</em>), otherwise (errors other than permission-denied ones) <code>0</code> - which is the opposite of the intent.<br> <strong>That said, <code>find</code>’s exit code is rarely used anyway</strong>, as it often conveys little information beyond <em>fundamental</em> failure such as passing a non-existent path.<br> However, the specific case of even only <em>some</em> of the input paths being inaccessible due to lack of permissions <em>is</em> reflected in <code>find</code>’s exit code (in both GNU and BSD <code>find</code>): if a permissions-denied error occurs for <em>any</em> of the files processed, the exit code is set to <code>1</code>.
</p>
<p>The following variation addresses that:</p>
<div class="sourceCode" id="cb634"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb634-1"><a href="#cb634-1" aria-hidden="true"></a><span class="fu">find</span> . <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span>files_and_folders <span class="kw">|</span> <span class="kw">{</span> <span class="fu">grep</span> -v <span class="st">&#39;Permission denied&#39;</span> <span class="op">&gt;&amp;2</span><span class="kw">;</span><span class="bu"> [</span> <span class="va">$?</span> <span class="ot">-eq</span> 1<span class="bu"> ]</span>; <span class="kw">}</span></span></code></pre></div>
<p>
Now, the exit code indicates whether any errors <em>other than</em> <code>Permission denied</code> occurred: <code>1</code> if so, <code>0</code> otherwise.<br> In other words: the exit code now reflects the true intent of the command: success (<code>0</code>) is reported, if no errors at all or <em>only</em> permission-denied errors occurred.<br> This is arguably even better than just passing <code>find</code>’s exit code through, as in the solution at the top.
</p>
<hr>
<p><a href="https://stackoverflow.com/users/1815797/gniourf-gniourf">gniourf_gniourf</a> in the comments proposes a (still POSIX-compliant) <strong>generalization of this solution using sophisticated redirections</strong>, which <strong>works even with the default behavior of printing the file paths to <em>stdout</em></strong>:</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb635-1"><a href="#cb635-1" aria-hidden="true"></a><span class="kw">{</span> <span class="fu">find</span> . <span class="op">3&gt;&amp;2</span> <span class="op">2&gt;&amp;1</span> <span class="op">1&gt;&amp;3</span> <span class="kw">|</span> <span class="fu">grep</span> -v <span class="st">&#39;Permission denied&#39;</span> <span class="op">&gt;&amp;3</span><span class="kw">;</span> <span class="kw">}</span> <span class="op">3&gt;&amp;2</span> <span class="op">2&gt;&amp;1</span></span></code></pre></div>
<p>In short: Custom file descriptor <code>3</code> is used to temporarily swap stdout (<code>1</code>) and stderr (<code>2</code>), so that error messages <em>alone</em> can be piped to <code>grep</code> via stdout.</p>
<p>Without these redirections, both data (file paths) <em>and</em> error messages would be piped to <code>grep</code> via stdout, and <code>grep</code> would then not be able to distinguish between <em>error message</em> <code>Permission denied</code> and a (hypothetical) <em>file whose name happens to contain</em> the phrase <code>Permission denied</code>.</p>
<p>As in the first solution, however, the the exit code reported will be <code>grep</code>’s, not <code>find</code>’s, but the same fix as above can be applied.</p>
<hr>
<h5>
Notes on the existing answers:
</h3>
<ul>
<li>
<p>
There are several points to note about <a href="https://stackoverflow.com/a/25234419/45375">Michael Brux’s answer</a>, <code>find . ! -readable -prune -o -print</code>:
</p>
<ul>
<li>
<p>
It requires <em>GNU</em> <code>find</code>; notably, it won’t work on macOS. Of course, if you only ever need the command to work with GNU <code>find</code>, this won’t be a problem for you.
</p>
</li>
<li>
<p>
Some <code>Permission denied</code> errors may <em>still</em> surface: <code>find ! -readable -prune</code> reports such errors for the <em>child</em> items of directories for which the current user does have <code>r</code> permission, but lacks <code>x</code> (executable) permission. The reason is that because the directory itself <em>is</em> readable, <code>-prune</code> is not executed, and the attempt to descend <em>into</em> that directory then triggers the error messages. That said, the <em>typical</em> case is for the <code>r</code> permission to be missing.
</p>
</li>
<li>
<p>
Note: The following point is a matter of philosophy and/or specific use case, and you may decide it is not relevant to you and that the command fits your needs well, especially if simply <em>printing</em> the paths is all you do:
</p>
<ul>
<li>
<em>If</em> you conceptualize the filtering of the permission-denied error messages a <em>separate</em> task that you want to be able to apply to <em>any</em> <code>find</code> command, then the opposite approach of proactively <em>preventing</em> permission-denied errors requires introducing “noise” into the <code>find</code> command, which also introduces complexity and logical <em>pitfalls</em>.
</li>
<li>
For instance, the most up-voted comment on Michael’s answer (as of this writing) attempts to show how to <em>extend</em> the command by including a <code>-name</code> filter, as follows:<br> <code>find . ! -readable -prune -o -name '*.txt'</code><br> This, however, does <em>not</em> work as intended, because the trailing <code>-print</code> action is <em>required</em> (an explanation can be found in <a href="https://stackoverflow.com/questions/1489277/how-to-use-prune-option-of-find-in-sh">this answer</a>). Such subtleties can introduce bugs.
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>
The first solution in <a href="https://stackoverflow.com/a/762360/45375">Jonathan Leffler’s answer</a>, <code>find . 2&amp;gt;/dev/null &amp;gt; files_and_folders</code>, as he himself states, <strong>blindly silences <em>all</em> error messages</strong> (and the workaround is cumbersome and not fully robust, as he also explains). <strong>Pragmatically speaking</strong>, however, it is the <strong>simplest solution</strong>, as you may be content to assume that any and all errors would be permission-related.
</p>
</li>
<li>
<p>
<a href="https://stackoverflow.com/a/27503763/45375">mist’s answer</a>, <code>sudo find . &amp;gt; files_and_folders</code>, <strong>is concise and pragmatic, but ill-advised for anything other than merely <em>printing</em> filenames</strong>, for security reasons: because you’re running as the <em>root</em> user, “you risk having your whole system being messed up by a bug in find or a malicious version, or an incorrect invocation which writes something unexpectedly, which could not happen if you ran this with normal privileges” (from a comment on mist’s answer by <a href="https://stackoverflow.com/users/874188/tripleee">tripleee</a>).
</p>
</li>
<li>
<p>
The 2nd solution in <a href="https://stackoverflow.com/a/762377/45375">viraptor’s answer</a>, <code>find . 2&amp;gt;&amp;amp;1 | grep -v 'Permission denied' &amp;gt; some_file</code> runs the risk of false positives (due to sending a mix of stdout and stderr through the pipeline), and, potentially, instead of reporting <em>non</em>-permission-denied errors via stderr, captures them alongside the output paths in the output file.
</p>
</li>
</ul>
</section>
<section id="answer-2-score-533" class="level4">
<h4>Answer 2 (score 533)</h4>
<p>Use:</p>
<div class="sourceCode" id="cb636"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb636-1"><a href="#cb636-1" aria-hidden="true"></a><span class="fu">find</span> . <span class="op">2&gt;</span>/dev/null <span class="op">&gt;</span> files_and_folders</span></code></pre></div>
<p>This hides not just the <code>Permission denied</code> errors, of course, but all error messages.</p>
<p>If you really want to keep other possible errors, such as too many hops on a symlink, but not the permission denied ones, then you’d probably have to take a flying guess that you don’t have many files called ‘permission denied’ and try:</p>
<div class="sourceCode" id="cb637"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb637-1"><a href="#cb637-1" aria-hidden="true"></a><span class="fu">find</span> . <span class="op">2&gt;&amp;1</span> <span class="kw">|</span> <span class="fu">grep</span> -v <span class="st">&#39;Permission denied&#39;</span> <span class="op">&gt;</span> files_and_folders</span></code></pre></div>
<hr>
<p>If you strictly want to filter just standard error, you can use the more elaborate construction:</p>
<div class="sourceCode" id="cb638"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb638-1"><a href="#cb638-1" aria-hidden="true"></a><span class="fu">find</span> . <span class="op">2&gt;&amp;1</span> <span class="op">&gt;</span> files_and_folders <span class="kw">|</span> <span class="fu">grep</span> -v <span class="st">&#39;Permission denied&#39;</span> <span class="op">&gt;&amp;2</span></span></code></pre></div>
<p>
The I/O redirection on the <code>find</code> command is: <code>2&amp;gt;&amp;amp;1 &amp;gt; files_and_folders |</code>. The pipe redirects standard output to the <code>grep</code> command and is applied first. The <code>2&amp;gt;&amp;amp;1</code> sends standard error to the same place as standard output (the pipe). The <code>&amp;gt; files_and_folders</code> sends standard output (but not standard error) to a file. The net result is that messages written to standard error are sent down the pipe and the regular output of <code>find</code> is written to the file. The <code>grep</code> filters the standard output (you can decide how selective you want it to be, and may have to change the spelling depending on locale and O/S) and the final <code>&amp;gt;&amp;amp;2</code> means that the surviving error messages (written to standard output) go to standard error once more. The final redirection could be regarded as optional at the terminal, but would be a very good idea to use it in a script so that error messages appear on standard error.
</p>
<p>There are endless variations on this theme, depending on what you want to do. This will work on any variant of Unix with any Bourne shell derivative (Bash, Korn, …) and any POSIX-compliant version of <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/find.html" rel="noreferrer"><code>find</code></a>.</p>
<p>If you wish to adapt to the specific version of <code>find</code> you have on your system, there may be alternative options available. GNU <code>find</code> in particular has a myriad options not available in other versions — see the currently accepted answer for one such set of options.</p>
</section>
<section id="answer-3-score-277" class="level4">
<h4>Answer 3 (score 277)</h4>
<p>Use:</p>
<div class="sourceCode" id="cb639"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb639-1"><a href="#cb639-1" aria-hidden="true"></a><span class="fu">find</span> . ! -readable -prune -o -print</span></code></pre></div>
<p>or more generally</p>
<div class="sourceCode" id="cb640"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb640-1"><a href="#cb640-1" aria-hidden="true"></a><span class="fu">find</span> <span class="op">&lt;</span>paths<span class="op">&gt;</span> ! -readable -prune -o <span class="op">&lt;</span>other conditions like -name<span class="op">&gt;</span> -print</span></code></pre></div>
<ul>
<li>
to avoid “Permission denied”
</li>
<li>
AND do NOT suppress (other) error messages
</li>
<li>
AND get exit status 0 (“all files are processed successfully”)
</li>
</ul>
<p>
Works with: find (GNU findutils) 4.4.2. Background:
</p>
<ul>
<li>
The <code>-readable</code> test matches readable files. The <code>!</code> operator returns true, when test is false. And <code>! -readable</code> matches not readable directories (&amp;files).
</li>
<li>
The <code>-prune</code> action does not descend into directory.
</li>
<li>
<code>! -readable -prune</code> can be translated to: if directory is not readable, do not descend into it.
</li>
<li>
The <code>-readable</code> test takes into account access control lists and other permissions artefacts which the <code>-perm</code> test ignores.
</li>
</ul>
<p>See also <a href="http://man7.org/linux/man-pages/man1/find.1.html" rel="noreferrer"><code>find</code>(1) manpage</a> for many more details.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-wait-in-bash-for-several-subprocesses-to-finish-and-return-exit-code-0-when-any-subprocess-ends-with-code-0-score-469941-in-2018" class="level3">
<h3>85: How to wait in bash for several subprocesses to finish and return exit code !=0 when any subprocess ends with code !=0? (score <a href="https://stackoverflow.com/q/356100.html">469941</a> in 2018)</h3>
<section id="question-84" class="level4">
<h4>Question</h4>
<p>How to wait in a bash script for several subprocesses spawned from that script to finish and return exit code !=0 when any of the subprocesses ends with code !=0 ?</p>
<p>Simple script:</p>
<div class="sourceCode" id="cb641"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb641-1"><a href="#cb641-1" aria-hidden="true"></a></span>
<span id="cb641-2"><a href="#cb641-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb641-3"><a href="#cb641-3" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="kw">`</span><span class="fu">seq</span> 0 9<span class="kw">`;</span> <span class="kw">do</span></span>
<span id="cb641-4"><a href="#cb641-4" aria-hidden="true"></a>  <span class="ex">doCalculations</span> <span class="va">$i</span> <span class="kw">&amp;</span></span>
<span id="cb641-5"><a href="#cb641-5" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb641-6"><a href="#cb641-6" aria-hidden="true"></a><span class="bu">wait</span></span></code></pre></div>
<p>The above script will wait for all 10 spawned subprocesses, but it will always give exit status 0 (see <code>help wait</code>). How can I modify this script so it will discover exit statuses of spawned subprocesses and return exit code 1 when any of subprocesses ends with code !=0?</p>
<p>Is there any better solution for that than collecting PIDs of the subprocesses, wait for them in order and sum exit statuses?</p>
</section>
<section id="answer-accepted-score-460" class="level4">
<h4>Answer accepted (score 460)</h4>
<p>
<a href="https://www.gnu.org/software/bash/manual/html_node/Job-Control-Builtins.html
#index-wait" rel="noreferrer"><code>wait</code></a> also (optionally) takes the PID of the process to wait for, and with $! you get the PID of the last command launched in background. Modify the loop to store the PID of each spawned sub-process into an array, and then loop again waiting on each PID.
</p>
<div class="sourceCode" id="cb642"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb642-1"><a href="#cb642-1" aria-hidden="true"></a></span>
<span id="cb642-2"><a href="#cb642-2" aria-hidden="true"></a><span class="co"># run processes and store pids in array</span></span>
<span id="cb642-3"><a href="#cb642-3" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">i</span> in <span class="va">$n_procs</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb642-4"><a href="#cb642-4" aria-hidden="true"></a>    <span class="ex">.</span>/<span class="ex">procs</span>[<span class="va">${i}</span>] <span class="kw">&amp;</span></span>
<span id="cb642-5"><a href="#cb642-5" aria-hidden="true"></a>    <span class="va">pids[${i}]=$!</span></span>
<span id="cb642-6"><a href="#cb642-6" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb642-7"><a href="#cb642-7" aria-hidden="true"></a></span>
<span id="cb642-8"><a href="#cb642-8" aria-hidden="true"></a></span>
<span id="cb642-9"><a href="#cb642-9" aria-hidden="true"></a><span class="co"># wait for all pids</span></span>
<span id="cb642-10"><a href="#cb642-10" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">pid</span> in <span class="va">${pids[*]}</span><span class="kw">;</span> <span class="kw">do</span></span>
<span id="cb642-11"><a href="#cb642-11" aria-hidden="true"></a>    <span class="bu">wait</span> <span class="va">$pid</span></span>
<span id="cb642-12"><a href="#cb642-12" aria-hidden="true"></a><span class="kw">done</span></span></code></pre></div>
</section>
<section id="answer-2-score-273" class="level4">
<h4>Answer 2 (score 273)</h4>
<p><a href="http://jeremy.zawodny.com/blog/archives/010717.html" rel="noreferrer">http://jeremy.zawodny.com/blog/archives/010717.html</a> :</p>
<div class="sourceCode" id="cb643"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb643-1"><a href="#cb643-1" aria-hidden="true"></a></span>
<span id="cb643-2"><a href="#cb643-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb643-3"><a href="#cb643-3" aria-hidden="true"></a></span>
<span id="cb643-4"><a href="#cb643-4" aria-hidden="true"></a><span class="va">FAIL=</span>0</span>
<span id="cb643-5"><a href="#cb643-5" aria-hidden="true"></a></span>
<span id="cb643-6"><a href="#cb643-6" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;starting&quot;</span></span>
<span id="cb643-7"><a href="#cb643-7" aria-hidden="true"></a></span>
<span id="cb643-8"><a href="#cb643-8" aria-hidden="true"></a><span class="ex">./sleeper</span> 2 0 <span class="kw">&amp;</span></span>
<span id="cb643-9"><a href="#cb643-9" aria-hidden="true"></a><span class="ex">./sleeper</span> 2 1 <span class="kw">&amp;</span></span>
<span id="cb643-10"><a href="#cb643-10" aria-hidden="true"></a><span class="ex">./sleeper</span> 3 0 <span class="kw">&amp;</span></span>
<span id="cb643-11"><a href="#cb643-11" aria-hidden="true"></a><span class="ex">./sleeper</span> 2 0 <span class="kw">&amp;</span></span>
<span id="cb643-12"><a href="#cb643-12" aria-hidden="true"></a></span>
<span id="cb643-13"><a href="#cb643-13" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">job</span> in <span class="kw">`</span><span class="bu">jobs</span> -p<span class="kw">`</span></span>
<span id="cb643-14"><a href="#cb643-14" aria-hidden="true"></a><span class="kw">do</span></span>
<span id="cb643-15"><a href="#cb643-15" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$job</span></span>
<span id="cb643-16"><a href="#cb643-16" aria-hidden="true"></a>    <span class="bu">wait</span> <span class="va">$job</span> <span class="kw">||</span> <span class="bu">let</span> <span class="st">&quot;FAIL+=1&quot;</span></span>
<span id="cb643-17"><a href="#cb643-17" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb643-18"><a href="#cb643-18" aria-hidden="true"></a></span>
<span id="cb643-19"><a href="#cb643-19" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$FAIL</span></span>
<span id="cb643-20"><a href="#cb643-20" aria-hidden="true"></a></span>
<span id="cb643-21"><a href="#cb643-21" aria-hidden="true"></a><span class="kw">if</span><span class="bu"> [</span> <span class="st">&quot;</span><span class="va">$FAIL</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;0&quot;</span><span class="bu"> ]</span>;</span>
<span id="cb643-22"><a href="#cb643-22" aria-hidden="true"></a><span class="kw">then</span></span>
<span id="cb643-23"><a href="#cb643-23" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;YAY!&quot;</span></span>
<span id="cb643-24"><a href="#cb643-24" aria-hidden="true"></a><span class="kw">else</span></span>
<span id="cb643-25"><a href="#cb643-25" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;FAIL! (</span><span class="va">$FAIL</span><span class="st">)&quot;</span></span>
<span id="cb643-26"><a href="#cb643-26" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-3-score-46" class="level4">
<h4>Answer 3 (score 46)</h4>
<p>If you have GNU Parallel installed you can do:</p>
<div class="sourceCode" id="cb644"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb644-1"><a href="#cb644-1" aria-hidden="true"></a></span>
<span id="cb644-2"><a href="#cb644-2" aria-hidden="true"></a><span class="co"># If doCalculations is a function</span></span>
<span id="cb644-3"><a href="#cb644-3" aria-hidden="true"></a><span class="bu">export</span> -f <span class="va">doCalculations</span></span>
<span id="cb644-4"><a href="#cb644-4" aria-hidden="true"></a><span class="fu">seq</span> 0 9 <span class="kw">|</span> <span class="ex">parallel</span> doCalculations {}</span></code></pre></div>
<p>GNU Parallel will give you exit code:</p>
<ul>
<li>
<p>
0 - All jobs ran without error.
</p>
</li>
<li>
<p>
1-253 - Some of the jobs failed. The exit status gives the number of failed jobs
</p>
</li>
<li>
<p>
254 - More than 253 jobs failed.
</p>
</li>
<li>
<p>
255 - Other error.
</p>
</li>
</ul>
<p>Watch the intro videos to learn more: <a href="http://pi.dk/1" rel="nofollow noreferrer">http://pi.dk/1</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="extract-file-basename-without-path-and-extension-in-bash-score-465033-in-2017" class="level3">
<h3>86: Extract file basename without path and extension in bash (score <a href="https://stackoverflow.com/q/2664740.html">465033</a> in 2017)</h3>
<section id="question-85" class="level4">
<h4>Question</h4>
<p>Given file names like these:</p>
<div class="sourceCode" id="cb645"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb645-1"><a href="#cb645-1" aria-hidden="true"></a><span class="ex">/the/path/foo.txt</span></span>
<span id="cb645-2"><a href="#cb645-2" aria-hidden="true"></a><span class="ex">bar.txt</span></span></code></pre></div>
<p>I hope to get:</p>
<div class="sourceCode" id="cb646"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb646-1"><a href="#cb646-1" aria-hidden="true"></a><span class="ex">foo</span></span>
<span id="cb646-2"><a href="#cb646-2" aria-hidden="true"></a><span class="ex">bar</span></span></code></pre></div>
<p>Why this doesn’t work?</p>
<div class="sourceCode" id="cb647"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb647-1"><a href="#cb647-1" aria-hidden="true"></a></span>
<span id="cb647-2"><a href="#cb647-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb647-3"><a href="#cb647-3" aria-hidden="true"></a></span>
<span id="cb647-4"><a href="#cb647-4" aria-hidden="true"></a><span class="va">fullfile=$1</span></span>
<span id="cb647-5"><a href="#cb647-5" aria-hidden="true"></a><span class="va">fname=$(</span><span class="fu">basename</span> <span class="va">$fullfile)</span></span>
<span id="cb647-6"><a href="#cb647-6" aria-hidden="true"></a><span class="va">fbname=${fname%</span>.*<span class="va">}</span></span>
<span id="cb647-7"><a href="#cb647-7" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$fbname</span></span></code></pre></div>
<p>What’s the right way to do it?</p>
</section>
<section id="answer-accepted-score-587" class="level4">
<h4>Answer accepted (score 587)</h4>
<p>You don’t have to call the external <code>basename</code> command. Instead, you could use the following commands:</p>
<div class="sourceCode" id="cb648"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb648-1"><a href="#cb648-1" aria-hidden="true"></a>$ <span class="va">s=</span>/the/path/foo.txt</span>
<span id="cb648-2"><a href="#cb648-2" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">${s</span></span>
<span id="cb648-3"><a href="#cb648-3" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span></span>
<span id="cb648-4"><a href="#cb648-4" aria-hidden="true"></a><span class="ex">foo.txt</span></span>
<span id="cb648-5"><a href="#cb648-5" aria-hidden="true"></a>$ <span class="va">s=${s</span></span>
<span id="cb648-6"><a href="#cb648-6" aria-hidden="true"></a><span class="va">##</span>*/<span class="va">}</span></span>
<span id="cb648-7"><a href="#cb648-7" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">${s%</span>.txt<span class="va">}</span></span>
<span id="cb648-8"><a href="#cb648-8" aria-hidden="true"></a><span class="ex">foo</span></span>
<span id="cb648-9"><a href="#cb648-9" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">${s%</span>.*<span class="va">}</span></span>
<span id="cb648-10"><a href="#cb648-10" aria-hidden="true"></a><span class="ex">foo</span></span></code></pre></div>
<p>Note that this solution should work in all recent (<em>post 2004</em>) <em>POSIX</em> compliant shells, (e.g. <code>bash</code>, <code>dash</code>, <code>ksh</code>, etc.).</p>
<p>Source: <a href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html
#tag_18_06_02" rel="noreferrer">Shell Command Language 2.6.2 Parameter Expansion</a></p>
<p>More on bash String Manipulations: <a href="http://tldp.org/LDP/LG/issue18/bash.html" rel="noreferrer">http://tldp.org/LDP/LG/issue18/bash.html</a></p>
</section>
<section id="answer-2-score-267" class="level4">
<h4>Answer 2 (score 267)</h4>
<p>The <a href="http://opengroup.org/onlinepubs/007908799/xcu/basename.html">basename</a> command has two different invocations; in one, you specify just the path, in which case it gives you the last component, while in the other you also give a suffix that it will remove. So, you can simplify your example code by using the second invocation of basename. Also, be careful to correctly quote things:</p>
<pre>
fbname=$(basename "$1" .txt)
echo "$fbname"
</pre>
</section>
<section id="answer-3-score-57" class="level4">
<h4>Answer 3 (score 57)</h4>
<p>A combination of basename and cut works fine, even in case of double ending like <code>.tar.gz</code>:</p>
<div class="sourceCode" id="cb649"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb649-1"><a href="#cb649-1" aria-hidden="true"></a><span class="va">fbname=$(</span><span class="fu">basename</span> <span class="st">&quot;</span><span class="va">$fullfile</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">cut</span> -d. -f1<span class="va">)</span></span></code></pre></div>
<p>Would be interesting if this solution needs less arithmetic power than Bash Parameter Expansion.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="make-a-bash-alias-that-takes-a-parameter-score-463475-in-2017" class="level3">
<h3>87: Make a Bash alias that takes a parameter? (score <a href="https://stackoverflow.com/q/7131670.html">463475</a> in 2017)</h3>
<section id="question-86" class="level4">
<h4>Question</h4>
<p>I used to use CShell (<a href="/questions/tagged/csh" class="post-tag" title="show questions tagged &
#39;csh&#39;" rel="tag">csh</a>), which lets you make an alias that takes a parameter. The notation was something like</p>
<div class="sourceCode" id="cb650"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb650-1"><a href="#cb650-1" aria-hidden="true"></a><span class="bu">alias</span> junk=<span class="st">&quot;mv </span><span class="dt">\\</span><span class="st">!* ~/.Trash&quot;</span></span></code></pre></div>
<p>In Bash, this does not seem to work. Given that Bash has a multitude of useful features, I would assume that this one has been implemented but I am wondering how.</p>
</section>
<section id="answer-accepted-score-1928" class="level4">
<h4>Answer accepted (score 1928)</h4>
<p>Bash alias does not directly accept parameters. You will have to create a function.</p>
<p><code>alias</code> does not accept parameters but a function can be called just like an alias. For example:</p>
<div class="sourceCode" id="cb651"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb651-1"><a href="#cb651-1" aria-hidden="true"></a><span class="fu">myfunction()</span> <span class="kw">{</span></span>
<span id="cb651-2"><a href="#cb651-2" aria-hidden="true"></a></span>
<span id="cb651-3"><a href="#cb651-3" aria-hidden="true"></a><span class="co">#do things with parameters like $1 such as</span></span>
<span id="cb651-4"><a href="#cb651-4" aria-hidden="true"></a>    <span class="fu">mv</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">.bak&quot;</span></span>
<span id="cb651-5"><a href="#cb651-5" aria-hidden="true"></a>    <span class="fu">cp</span> <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb651-6"><a href="#cb651-6" aria-hidden="true"></a><span class="kw">}</span></span>
<span id="cb651-7"><a href="#cb651-7" aria-hidden="true"></a></span>
<span id="cb651-8"><a href="#cb651-8" aria-hidden="true"></a></span>
<span id="cb651-9"><a href="#cb651-9" aria-hidden="true"></a><span class="ex">myfunction</span> old.conf new.conf</span>
<span id="cb651-10"><a href="#cb651-10" aria-hidden="true"></a><span class="co">#calls `myfunction`</span></span></code></pre></div>
<p>By the way, Bash functions defined in your <code>.bashrc</code> and other files are available as commands within your shell. So for instance you can call the earlier function like this</p>
<div class="sourceCode" id="cb652"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb652-1"><a href="#cb652-1" aria-hidden="true"></a>$ <span class="ex">myfunction</span> original.conf my.conf</span></code></pre></div>
</section>
<section id="answer-2-score-193" class="level4">
<h4>Answer 2 (score 193)</h4>
<p>Refining the answer above, you can get 1-line syntax like you can for aliases, which is more convenient for ad-hoc definitions in a shell or .bashrc files:</p>
<div class="sourceCode" id="cb653"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb653-1"><a href="#cb653-1" aria-hidden="true"></a><span class="ex">bash</span>$ myfunction() <span class="kw">{</span> <span class="fu">mv</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">.bak&quot;</span> <span class="kw">&amp;&amp;</span> <span class="fu">cp</span> -i <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">}</span></span>
<span id="cb653-2"><a href="#cb653-2" aria-hidden="true"></a></span>
<span id="cb653-3"><a href="#cb653-3" aria-hidden="true"></a><span class="ex">bash</span>$ myfunction original.conf my.conf</span></code></pre></div>
<p>Don’t forget the semi-colon before the closing right-bracket. Similarly, for the actual question:</p>
<div class="sourceCode" id="cb654"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb654-1"><a href="#cb654-1" aria-hidden="true"></a><span class="ex">csh%</span> alias junk=<span class="st">&quot;mv </span><span class="dt">\\</span><span class="st">!* ~/.Trash&quot;</span></span>
<span id="cb654-2"><a href="#cb654-2" aria-hidden="true"></a></span>
<span id="cb654-3"><a href="#cb654-3" aria-hidden="true"></a><span class="ex">bash</span>$ junk() <span class="kw">{</span> <span class="fu">mv</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> ~/.Trash/<span class="kw">;</span> <span class="kw">}</span></span></code></pre></div>
<p>Or:</p>
<div class="sourceCode" id="cb655"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb655-1"><a href="#cb655-1" aria-hidden="true"></a><span class="ex">bash</span>$ junk() <span class="kw">{</span> <span class="kw">for</span> <span class="ex">item</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> <span class="kw">;</span> <span class="kw">do</span> <span class="bu">echo</span> <span class="st">&quot;Trashing: </span><span class="va">$item</span><span class="st">&quot;</span> <span class="kw">;</span> <span class="fu">mv</span> <span class="st">&quot;</span><span class="va">$item</span><span class="st">&quot;</span> ~/.Trash/<span class="kw">;</span> <span class="kw">done</span>; <span class="kw">}</span></span></code></pre></div>
</section>
<section id="answer-3-score-105" class="level4">
<h4>Answer 3 (score 105)</h4>
<p>The question is simply asked wrong. You don’t make an alias that takes parameters because <code>alias</code> just adds a second name for something that already exists. The functionality the OP wants is the <code>function</code> command to create a new function. You do not need to alias the function as the function already has a name.</p>
<p>I think you want something like this :</p>
<div class="sourceCode" id="cb656"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb656-1"><a href="#cb656-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> trash()</span> <span class="kw">{</span> <span class="fu">mv</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> ~/.Trash<span class="kw">;</span> <span class="kw">}</span></span></code></pre></div>
<p>That’s it! You can use parameters $1, $2, $3, etc, or just stuff them all with $@</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-all-storage-devices-attached-to-a-linux-machine-score-460866-in-2013" class="level3">
<h3>88: Find all storage devices attached to a Linux machine (score <a href="https://stackoverflow.com/q/200960.html">460866</a> in 2013)</h3>
<section id="question-87" class="level4">
<h4>Question</h4>
<p>I have a need to find all of the writable storage devices attached to a given machine, <strong>whether or not</strong> they are mounted.</p>
<p>The dopey way to do this would be to <em>try</em> every entry in <code>/dev</code> that corresponds to a writable devices (<code>hd* and sd*</code>)……</p>
<p>Is there a better solution, or should I stick with this one?</p>
</section>
<section id="answer-accepted-score-78" class="level4">
<h4>Answer accepted (score 78)</h4>
<p><code>/proc/partitions</code> will list all the block devices and partitions that the system recognizes. You can then try using <code>file -s &amp;lt;device&amp;gt;</code> to determine what kind of filesystem is present on the partition, if any.</p>
</section>
<section id="answer-2-score-71" class="level4">
<h4>Answer 2 (score 71)</h4>
<p>You can always do <code>fdisk -l</code> which seems to work pretty well, even on strange setups such as EC2 xvda devices.</p>
<p>Here is a dump for a m1.large instance:</p>
<div class="sourceCode" id="cb657"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb657-1"><a href="#cb657-1" aria-hidden="true"></a><span class="ex">root@ip-10-126-247-82</span>:~</span>
<span id="cb657-2"><a href="#cb657-2" aria-hidden="true"></a><span class="co"># fdisk -l</span></span>
<span id="cb657-3"><a href="#cb657-3" aria-hidden="true"></a></span>
<span id="cb657-4"><a href="#cb657-4" aria-hidden="true"></a><span class="ex">Disk</span> /dev/xvda1: 10.7 GB, 10737418240 bytes</span>
<span id="cb657-5"><a href="#cb657-5" aria-hidden="true"></a><span class="ex">255</span> heads, 63 sectors/track, 1305 cylinders, total 20971520 sectors</span>
<span id="cb657-6"><a href="#cb657-6" aria-hidden="true"></a><span class="ex">Units</span> = sectors of 1 * 512 = 512 bytes</span>
<span id="cb657-7"><a href="#cb657-7" aria-hidden="true"></a><span class="ex">Sector</span> size (logical/physical)<span class="bu">:</span> 512 bytes / 512 bytes</span>
<span id="cb657-8"><a href="#cb657-8" aria-hidden="true"></a><span class="ex">I/O</span> size (minimum/optimal)<span class="bu">:</span> 512 bytes / 512 bytes</span>
<span id="cb657-9"><a href="#cb657-9" aria-hidden="true"></a><span class="ex">Disk</span> identifier: 0x00000000</span>
<span id="cb657-10"><a href="#cb657-10" aria-hidden="true"></a></span>
<span id="cb657-11"><a href="#cb657-11" aria-hidden="true"></a><span class="ex">Disk</span> /dev/xvda1 doesn<span class="st">&#39;t contain a valid partition table</span></span>
<span id="cb657-12"><a href="#cb657-12" aria-hidden="true"></a></span>
<span id="cb657-13"><a href="#cb657-13" aria-hidden="true"></a><span class="st">Disk /dev/xvda2: 365.0 GB, 365041287168 bytes</span></span>
<span id="cb657-14"><a href="#cb657-14" aria-hidden="true"></a><span class="st">255 heads, 63 sectors/track, 44380 cylinders, total 712971264 sectors</span></span>
<span id="cb657-15"><a href="#cb657-15" aria-hidden="true"></a><span class="st">Units = sectors of 1 * 512 = 512 bytes</span></span>
<span id="cb657-16"><a href="#cb657-16" aria-hidden="true"></a><span class="st">Sector size (logical/physical): 512 bytes / 512 bytes</span></span>
<span id="cb657-17"><a href="#cb657-17" aria-hidden="true"></a><span class="st">I/O size (minimum/optimal): 512 bytes / 512 bytes</span></span>
<span id="cb657-18"><a href="#cb657-18" aria-hidden="true"></a><span class="st">Disk identifier: 0x00000000</span></span>
<span id="cb657-19"><a href="#cb657-19" aria-hidden="true"></a></span>
<span id="cb657-20"><a href="#cb657-20" aria-hidden="true"></a><span class="st">Disk /dev/xvda2 doesn&#39;</span>t contain a valid partition table</span>
<span id="cb657-21"><a href="#cb657-21" aria-hidden="true"></a></span>
<span id="cb657-22"><a href="#cb657-22" aria-hidden="true"></a><span class="ex">Disk</span> /dev/xvda3: 939 MB, 939524096 bytes</span>
<span id="cb657-23"><a href="#cb657-23" aria-hidden="true"></a><span class="ex">255</span> heads, 63 sectors/track, 114 cylinders, total 1835008 sectors</span>
<span id="cb657-24"><a href="#cb657-24" aria-hidden="true"></a><span class="ex">Units</span> = sectors of 1 * 512 = 512 bytes</span>
<span id="cb657-25"><a href="#cb657-25" aria-hidden="true"></a><span class="ex">Sector</span> size (logical/physical)<span class="bu">:</span> 512 bytes / 512 bytes</span>
<span id="cb657-26"><a href="#cb657-26" aria-hidden="true"></a><span class="ex">I/O</span> size (minimum/optimal)<span class="bu">:</span> 512 bytes / 512 bytes</span>
<span id="cb657-27"><a href="#cb657-27" aria-hidden="true"></a><span class="ex">Disk</span> identifier: 0x00000000</span>
<span id="cb657-28"><a href="#cb657-28" aria-hidden="true"></a></span>
<span id="cb657-29"><a href="#cb657-29" aria-hidden="true"></a><span class="ex">Disk</span> /dev/xvda3 doesn<span class="st">&#39;t contain a valid partition table</span></span></code></pre></div>
<p>While <code>mount</code> says:</p>
<div class="sourceCode" id="cb658"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb658-1"><a href="#cb658-1" aria-hidden="true"></a><span class="ex">root@ip-10-126-247-82</span>:~</span>
<span id="cb658-2"><a href="#cb658-2" aria-hidden="true"></a><span class="co"># mount</span></span>
<span id="cb658-3"><a href="#cb658-3" aria-hidden="true"></a><span class="ex">/dev/xvda1</span> on / type ext4 (rw)</span>
<span id="cb658-4"><a href="#cb658-4" aria-hidden="true"></a><span class="ex">proc</span> on /proc type proc (rw,noexec,nosuid,nodev)</span>
<span id="cb658-5"><a href="#cb658-5" aria-hidden="true"></a><span class="ex">sysfs</span> on /sys type sysfs (rw,noexec,nosuid,nodev)</span>
<span id="cb658-6"><a href="#cb658-6" aria-hidden="true"></a><span class="ex">fusectl</span> on /sys/fs/fuse/connections type fusectl (rw)</span>
<span id="cb658-7"><a href="#cb658-7" aria-hidden="true"></a><span class="ex">none</span> on /sys/kernel/debug type debugfs (rw)</span>
<span id="cb658-8"><a href="#cb658-8" aria-hidden="true"></a><span class="ex">none</span> on /sys/kernel/security type securityfs (rw)</span>
<span id="cb658-9"><a href="#cb658-9" aria-hidden="true"></a><span class="ex">udev</span> on /dev type devtmpfs (rw,mode=0755)</span>
<span id="cb658-10"><a href="#cb658-10" aria-hidden="true"></a><span class="ex">devpts</span> on /dev/pts type devpts (rw,noexec,nosuid,gid=5,mode=0620)</span>
<span id="cb658-11"><a href="#cb658-11" aria-hidden="true"></a><span class="ex">tmpfs</span> on /run type tmpfs (rw,noexec,nosuid,size=10%,mode=0755)</span>
<span id="cb658-12"><a href="#cb658-12" aria-hidden="true"></a><span class="ex">none</span> on /run/lock type tmpfs (rw,noexec,nosuid,nodev,size=5242880)</span>
<span id="cb658-13"><a href="#cb658-13" aria-hidden="true"></a><span class="ex">none</span> on /run/shm type tmpfs (rw,nosuid,nodev)</span>
<span id="cb658-14"><a href="#cb658-14" aria-hidden="true"></a><span class="ex">/dev/xvda2</span> on /mnt type ext3 (rw)</span></code></pre></div>
<p>And <code>/proc/partitions</code> says:</p>
<div class="sourceCode" id="cb659"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb659-1"><a href="#cb659-1" aria-hidden="true"></a><span class="ex">root@ip-10-126-247-82</span>:~</span>
<span id="cb659-2"><a href="#cb659-2" aria-hidden="true"></a><span class="co"># cat /proc/partitions</span></span>
<span id="cb659-3"><a href="#cb659-3" aria-hidden="true"></a><span class="ex">major</span> minor</span>
<span id="cb659-4"><a href="#cb659-4" aria-hidden="true"></a><span class="co">#blocks  name</span></span>
<span id="cb659-5"><a href="#cb659-5" aria-hidden="true"></a></span>
<span id="cb659-6"><a href="#cb659-6" aria-hidden="true"></a> <span class="ex">202</span>        1   10485760 xvda1</span>
<span id="cb659-7"><a href="#cb659-7" aria-hidden="true"></a> <span class="ex">202</span>        2  356485632 xvda2</span>
<span id="cb659-8"><a href="#cb659-8" aria-hidden="true"></a> <span class="ex">202</span>        3     917504 xvda3</span></code></pre></div>
<h5>
Side Note
</h1>
<p>How <code>fdisk -l</code> works is something I would love to know myself.</p>
</section>
<section id="answer-3-score-35" class="level4">
<h4>Answer 3 (score 35)</h4>
<p>you can also try <strong>lsblk</strong> … is in util-linux … but i have a question too</p>
<div class="sourceCode" id="cb660"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb660-1"><a href="#cb660-1" aria-hidden="true"></a><span class="ex">fdisk</span> -l /dev/sdl</span></code></pre></div>
<p>no result</p>
<div class="sourceCode" id="cb661"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb661-1"><a href="#cb661-1" aria-hidden="true"></a><span class="fu">grep</span> sdl /proc/partitions      </span>
<span id="cb661-2"><a href="#cb661-2" aria-hidden="true"></a>   <span class="ex">8</span>      176   15632384 sdl</span>
<span id="cb661-3"><a href="#cb661-3" aria-hidden="true"></a>   <span class="ex">8</span>      177   15628288 sdl1</span>
<span id="cb661-4"><a href="#cb661-4" aria-hidden="true"></a></span>
<span id="cb661-5"><a href="#cb661-5" aria-hidden="true"></a><span class="ex">lsblk</span> <span class="kw">|</span> <span class="fu">grep</span> sdl</span>
<span id="cb661-6"><a href="#cb661-6" aria-hidden="true"></a><span class="ex">sdl</span>       8:176  1  14.9G  0 disk  </span>
<span id="cb661-7"><a href="#cb661-7" aria-hidden="true"></a><span class="kw">`</span><span class="ex">-sdl1</span>    8:177  1  14.9G  0 part  </span></code></pre></div>
<p>fdisk is good but not that good … seems like it cannot “see” everything</p>
<p>in my particular example i have a stick that have also a card reader build in it and i can see only the stick using fdisk:</p>
<div class="sourceCode" id="cb662"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb662-1"><a href="#cb662-1" aria-hidden="true"></a><span class="ex">fdisk</span> -l /dev/sdk</span>
<span id="cb662-2"><a href="#cb662-2" aria-hidden="true"></a></span>
<span id="cb662-3"><a href="#cb662-3" aria-hidden="true"></a><span class="ex">Disk</span> /dev/sdk: 15.9 GB, 15931539456 bytes</span>
<span id="cb662-4"><a href="#cb662-4" aria-hidden="true"></a><span class="ex">255</span> heads, 63 sectors/track, 1936 cylinders, total 31116288 sectors</span>
<span id="cb662-5"><a href="#cb662-5" aria-hidden="true"></a><span class="ex">Units</span> = sectors of 1 * 512 = 512 bytes</span>
<span id="cb662-6"><a href="#cb662-6" aria-hidden="true"></a><span class="ex">Sector</span> size (logical/physical)<span class="bu">:</span> 512 bytes / 512 bytes</span>
<span id="cb662-7"><a href="#cb662-7" aria-hidden="true"></a><span class="ex">I/O</span> size (minimum/optimal)<span class="bu">:</span> 512 bytes / 512 bytes</span>
<span id="cb662-8"><a href="#cb662-8" aria-hidden="true"></a><span class="ex">Disk</span> identifier: 0xbe24be24</span>
<span id="cb662-9"><a href="#cb662-9" aria-hidden="true"></a></span>
<span id="cb662-10"><a href="#cb662-10" aria-hidden="true"></a>   <span class="ex">Device</span> Boot      Start         End      Blocks   Id  System</span>
<span id="cb662-11"><a href="#cb662-11" aria-hidden="true"></a><span class="ex">/dev/sdk1</span>   *        8192    31116287    15554048    c  W95 FAT32 (LBA)</span></code></pre></div>
<p>but not the card (card being /dev/sdl)</p>
<p>also, file -s is inefficient …</p>
<div class="sourceCode" id="cb663"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb663-1"><a href="#cb663-1" aria-hidden="true"></a><span class="fu">file</span> -s /dev/sdl1</span>
<span id="cb663-2"><a href="#cb663-2" aria-hidden="true"></a><span class="ex">/dev</span>/sdl1: <span class="ex">sticky</span> x86 boot sector, code offset 0x52, OEM-ID <span class="st">&quot;NTFS    &quot;</span>, sectors/cluster 8, reserved sectors 0, Media descriptor 0xf8, heads 255, hidden sectors 8192, dos <span class="op">&lt;</span> 4.0 BootSector (0x0)</span></code></pre></div>
<p>that’s nice … BUT</p>
<div class="sourceCode" id="cb664"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb664-1"><a href="#cb664-1" aria-hidden="true"></a><span class="ex">fdisk</span> -l /dev/sdb</span>
<span id="cb664-2"><a href="#cb664-2" aria-hidden="true"></a><span class="ex">/dev/sdb1</span>            2048   156301487    78149720   fd  Linux raid autodetect</span>
<span id="cb664-3"><a href="#cb664-3" aria-hidden="true"></a><span class="ex">/dev/sdb2</span>       156301488   160086527     1892520   82  Linux swap / Solaris</span>
<span id="cb664-4"><a href="#cb664-4" aria-hidden="true"></a></span>
<span id="cb664-5"><a href="#cb664-5" aria-hidden="true"></a><span class="fu">file</span> -s /dev/sdb1</span>
<span id="cb664-6"><a href="#cb664-6" aria-hidden="true"></a><span class="ex">/dev</span>/sdb1: <span class="ex">sticky</span> \0</span></code></pre></div>
<p>to see information about a disk that cannot be accesed by fdisk, you can use parted:</p>
<div class="sourceCode" id="cb665"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb665-1"><a href="#cb665-1" aria-hidden="true"></a><span class="ex">parted</span> /dev/sdl print</span>
<span id="cb665-2"><a href="#cb665-2" aria-hidden="true"></a></span>
<span id="cb665-3"><a href="#cb665-3" aria-hidden="true"></a><span class="ex">Model</span>: Mass Storage Device (scsi)</span>
<span id="cb665-4"><a href="#cb665-4" aria-hidden="true"></a><span class="ex">Disk</span> /dev/sdl: 16.0GB</span>
<span id="cb665-5"><a href="#cb665-5" aria-hidden="true"></a><span class="ex">Sector</span> size (logical/physical)<span class="bu">:</span> 512B/512B</span>
<span id="cb665-6"><a href="#cb665-6" aria-hidden="true"></a><span class="ex">Partition</span> Table: msdos</span>
<span id="cb665-7"><a href="#cb665-7" aria-hidden="true"></a></span>
<span id="cb665-8"><a href="#cb665-8" aria-hidden="true"></a><span class="ex">Number</span>  Start   End     Size    Type     File system  Flags</span>
<span id="cb665-9"><a href="#cb665-9" aria-hidden="true"></a> <span class="ex">1</span>      4194kB  16.0GB  16.0GB  primary  ntfs</span>
<span id="cb665-10"><a href="#cb665-10" aria-hidden="true"></a></span>
<span id="cb665-11"><a href="#cb665-11" aria-hidden="true"></a></span>
<span id="cb665-12"><a href="#cb665-12" aria-hidden="true"></a></span>
<span id="cb665-13"><a href="#cb665-13" aria-hidden="true"></a></span>
<span id="cb665-14"><a href="#cb665-14" aria-hidden="true"></a><span class="ex">arted</span> /dev/sdb print </span>
<span id="cb665-15"><a href="#cb665-15" aria-hidden="true"></a><span class="ex">Model</span>: ATA Maxtor 6Y080P0 (scsi)</span>
<span id="cb665-16"><a href="#cb665-16" aria-hidden="true"></a><span class="ex">Disk</span> /dev/sdb: 82.0GB</span>
<span id="cb665-17"><a href="#cb665-17" aria-hidden="true"></a><span class="ex">Sector</span> size (logical/physical)<span class="bu">:</span> 512B/512B</span>
<span id="cb665-18"><a href="#cb665-18" aria-hidden="true"></a><span class="ex">Partition</span> Table: msdos</span>
<span id="cb665-19"><a href="#cb665-19" aria-hidden="true"></a></span>
<span id="cb665-20"><a href="#cb665-20" aria-hidden="true"></a><span class="ex">Number</span>  Start   End     Size    Type     File system     Flags</span>
<span id="cb665-21"><a href="#cb665-21" aria-hidden="true"></a> <span class="ex">1</span>      1049kB  80.0GB  80.0GB  primary                  raid</span>
<span id="cb665-22"><a href="#cb665-22" aria-hidden="true"></a> <span class="ex">2</span>      80.0GB  82.0GB  1938MB  primary  linux-swap(v1)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="length-of-string-in-bash-score-460216-in-2017" class="level3">
<h3>89: Length of string in bash (score <a href="https://stackoverflow.com/q/17368067.html">460216</a> in 2017)</h3>
<section id="question-88" class="level4">
<h4>Question</h4>
<p>How do you get the length of a string stored in a variable and assign that to another variable?</p>
<div class="sourceCode" id="cb666"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb666-1"><a href="#cb666-1" aria-hidden="true"></a><span class="va">myvar=</span><span class="st">&quot;some string&quot;</span></span>
<span id="cb666-2"><a href="#cb666-2" aria-hidden="true"></a><span class="bu">echo</span> ${</span>
<span id="cb666-3"><a href="#cb666-3" aria-hidden="true"></a><span class="co">#myvar}  </span></span>
<span id="cb666-4"><a href="#cb666-4" aria-hidden="true"></a></span>
<span id="cb666-5"><a href="#cb666-5" aria-hidden="true"></a><span class="co"># 11</span></span></code></pre></div>
<p>How do you set another variable to the output <code>11</code>?</p>
</section>
<section id="answer-accepted-score-234" class="level4">
<h4>Answer accepted (score 234)</h4>
<h5>
UTF-8 string length
</h3>
<p>In addition to <a href="https://stackoverflow.com/a/17368090/1983854">fedorqui’s correct answer</a>, I would like to show the difference between string length and byte length:</p>
<div class="sourceCode" id="cb667"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb667-1"><a href="#cb667-1" aria-hidden="true"></a><span class="va">myvar=</span><span class="st">&#39;Généralités&#39;</span></span>
<span id="cb667-2"><a href="#cb667-2" aria-hidden="true"></a><span class="va">chrlen=</span>$<span class="kw">{</span></span>
<span id="cb667-3"><a href="#cb667-3" aria-hidden="true"></a><span class="co">#myvar}</span></span>
<span id="cb667-4"><a href="#cb667-4" aria-hidden="true"></a><span class="va">oLang=$LANG</span> <span class="va">oLcAll=$LC_ALL</span></span>
<span id="cb667-5"><a href="#cb667-5" aria-hidden="true"></a><span class="va">LANG=</span>C <span class="va">LC_ALL=</span>C</span>
<span id="cb667-6"><a href="#cb667-6" aria-hidden="true"></a><span class="va">bytlen=</span>$<span class="kw">{</span></span>
<span id="cb667-7"><a href="#cb667-7" aria-hidden="true"></a><span class="co">#myvar}</span></span>
<span id="cb667-8"><a href="#cb667-8" aria-hidden="true"></a><span class="va">LANG=$oLang</span> <span class="va">LC_ALL=$oLcAll</span></span>
<span id="cb667-9"><a href="#cb667-9" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&quot;%s is %d char len, but %d bytes len.\n&quot;</span> <span class="st">&quot;</span><span class="va">${myvar}</span><span class="st">&quot;</span> <span class="va">$chrlen</span> <span class="va">$bytlen</span></span></code></pre></div>
<p>will render:</p>
<div class="sourceCode" id="cb668"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb668-1"><a href="#cb668-1" aria-hidden="true"></a><span class="ex">G</span>énéralités is 11 char len, but 14 bytes len.</span></code></pre></div>
<p>you could even have a look at stored chars:</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb669-1"><a href="#cb669-1" aria-hidden="true"></a><span class="va">myvar=</span><span class="st">&#39;Généralités&#39;</span></span>
<span id="cb669-2"><a href="#cb669-2" aria-hidden="true"></a><span class="va">chrlen=</span>$<span class="kw">{</span></span>
<span id="cb669-3"><a href="#cb669-3" aria-hidden="true"></a><span class="co">#myvar}</span></span>
<span id="cb669-4"><a href="#cb669-4" aria-hidden="true"></a><span class="va">oLang=$LANG</span> <span class="va">oLcAll=$LC_ALL</span></span>
<span id="cb669-5"><a href="#cb669-5" aria-hidden="true"></a><span class="va">LANG=</span>C <span class="va">LC_ALL=</span>C</span>
<span id="cb669-6"><a href="#cb669-6" aria-hidden="true"></a><span class="va">bytlen=</span>$<span class="kw">{</span></span>
<span id="cb669-7"><a href="#cb669-7" aria-hidden="true"></a><span class="co">#myvar}</span></span>
<span id="cb669-8"><a href="#cb669-8" aria-hidden="true"></a><span class="bu">printf</span> -v myreal <span class="st">&quot;%q&quot;</span> <span class="st">&quot;</span><span class="va">$myvar</span><span class="st">&quot;</span></span>
<span id="cb669-9"><a href="#cb669-9" aria-hidden="true"></a><span class="va">LANG=$oLang</span> <span class="va">LC_ALL=$oLcAll</span></span>
<span id="cb669-10"><a href="#cb669-10" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&quot;%s has %d chars, %d bytes: (%s).\n&quot;</span> <span class="st">&quot;</span><span class="va">${myvar}</span><span class="st">&quot;</span> <span class="va">$chrlen</span> <span class="va">$bytlen</span> <span class="st">&quot;</span><span class="va">$myreal</span><span class="st">&quot;</span></span></code></pre></div>
<p>will answer:</p>
<div class="sourceCode" id="cb670"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb670-1"><a href="#cb670-1" aria-hidden="true"></a><span class="ex">G</span>énéralités has 11 chars, 14 bytes: (<span class="st">$&#39;G</span><span class="dt">\303\251</span><span class="st">n</span><span class="dt">\303\251</span><span class="st">ralit</span><span class="dt">\303\251</span><span class="st">s&#39;</span>)<span class="ex">.</span></span></code></pre></div>
<p><strong>Nota:</strong> According to <a href="https://stackoverflow.com/questions/17368067/length-of-string-in-bash/31009961
#comment69945980_31009961">Isabell Cowan’s comment</a>, I’ve added setting to <code>$LC_ALL</code> along with <code>$LANG</code>.</p>
<h5>
Length of an argument
</h3>
<p>Argument work same as regular variables</p>
<div class="sourceCode" id="cb671"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb671-1"><a href="#cb671-1" aria-hidden="true"></a><span class="fu">strLen()</span> <span class="kw">{</span></span>
<span id="cb671-2"><a href="#cb671-2" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">bytlen</span> <span class="va">sreal</span> <span class="va">oLang=$LANG</span> <span class="va">oLcAll=$LC_ALL</span></span>
<span id="cb671-3"><a href="#cb671-3" aria-hidden="true"></a>    <span class="va">LANG=</span>C <span class="va">LC_ALL=</span>C</span>
<span id="cb671-4"><a href="#cb671-4" aria-hidden="true"></a>    <span class="va">bytlen=</span>$<span class="kw">{</span></span>
<span id="cb671-5"><a href="#cb671-5" aria-hidden="true"></a><span class="co">#1}</span></span>
<span id="cb671-6"><a href="#cb671-6" aria-hidden="true"></a>    <span class="bu">printf</span> -v sreal %q <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb671-7"><a href="#cb671-7" aria-hidden="true"></a>    <span class="va">LANG=$oLang</span> <span class="va">LC_ALL=$oLcAll</span></span>
<span id="cb671-8"><a href="#cb671-8" aria-hidden="true"></a>    <span class="bu">printf</span> <span class="st">&quot;String &#39;%s&#39; is %d bytes, but %d chars len: %s.\n&quot;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="va">$bytlen</span> ${</span>
<span id="cb671-9"><a href="#cb671-9" aria-hidden="true"></a><span class="co">#1} &quot;$sreal&quot;</span></span>
<span id="cb671-10"><a href="#cb671-10" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p>will work as</p>
<div class="sourceCode" id="cb672"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb672-1"><a href="#cb672-1" aria-hidden="true"></a><span class="ex">strLen</span> théorème</span>
<span id="cb672-2"><a href="#cb672-2" aria-hidden="true"></a><span class="ex">String</span> <span class="st">&#39;théorème&#39;</span> is 10 bytes, but 8 chars len: <span class="st">$&#39;th</span><span class="dt">\303\251</span><span class="st">or</span><span class="dt">\303\250</span><span class="st">me&#39;</span></span></code></pre></div>
<h5>
Useful <code>printf</code> correction tool:
</h3>
<p>If you:</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb673-1"><a href="#cb673-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">string</span> in Généralités Language Théorème Février  <span class="st">&quot;Left: ←&quot;</span> <span class="st">&quot;Yin Yang ☯&quot;</span><span class="kw">;do</span></span>
<span id="cb673-2"><a href="#cb673-2" aria-hidden="true"></a>    <span class="bu">printf</span> <span class="st">&quot; - %-14s is %2d char length\n&quot;</span> <span class="st">&quot;&#39;</span><span class="va">$string</span><span class="st">&#39;&quot;</span>  ${</span>
<span id="cb673-3"><a href="#cb673-3" aria-hidden="true"></a><span class="co">#string}</span></span>
<span id="cb673-4"><a href="#cb673-4" aria-hidden="true"></a><span class="kw">done</span></span>
<span id="cb673-5"><a href="#cb673-5" aria-hidden="true"></a></span>
<span id="cb673-6"><a href="#cb673-6" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Généralités&#39;</span> is 11 char length</span>
<span id="cb673-7"><a href="#cb673-7" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Language&#39;</span>     is  8 char length</span>
<span id="cb673-8"><a href="#cb673-8" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Théorème&#39;</span>   is  8 char length</span>
<span id="cb673-9"><a href="#cb673-9" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Février&#39;</span>     is  7 char length</span>
<span id="cb673-10"><a href="#cb673-10" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Left: ←&#39;</span>    is  7 char length</span>
<span id="cb673-11"><a href="#cb673-11" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Yin Yang ☯&#39;</span> is 10 char length</span></code></pre></div>
<p>Not really <em>pretty</em>… For this, there is a little function:</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb674-1"><a href="#cb674-1" aria-hidden="true"></a><span class="fu">strU8DiffLen ()</span> <span class="kw">{</span> </span>
<span id="cb674-2"><a href="#cb674-2" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">bytlen</span> <span class="va">oLang=$LANG</span> <span class="va">oLcAll=$LC_ALL</span></span>
<span id="cb674-3"><a href="#cb674-3" aria-hidden="true"></a>    <span class="va">LANG=</span>C <span class="va">LC_ALL=</span>C</span>
<span id="cb674-4"><a href="#cb674-4" aria-hidden="true"></a>    <span class="va">bytlen=</span>$<span class="kw">{</span></span>
<span id="cb674-5"><a href="#cb674-5" aria-hidden="true"></a><span class="co">#1}</span></span>
<span id="cb674-6"><a href="#cb674-6" aria-hidden="true"></a>    <span class="va">LANG=$oLang</span> <span class="va">LC_ALL=$oLcAll</span></span>
<span id="cb674-7"><a href="#cb674-7" aria-hidden="true"></a>    <span class="bu">return</span> <span class="va">$((</span> bytlen - ${</span>
<span id="cb674-8"><a href="#cb674-8" aria-hidden="true"></a><span class="co">#1} ))</span></span>
<span id="cb674-9"><a href="#cb674-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>Then now:</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb675-1"><a href="#cb675-1" aria-hidden="true"></a><span class="kw">for</span> <span class="ex">string</span> in Généralités Language Théorème Février  <span class="st">&quot;Left: ←&quot;</span> <span class="st">&quot;Yin Yang ☯&quot;</span><span class="kw">;do</span></span>
<span id="cb675-2"><a href="#cb675-2" aria-hidden="true"></a>    <span class="ex">strU8DiffLen</span> <span class="st">&quot;</span><span class="va">$string</span><span class="st">&quot;</span></span>
<span id="cb675-3"><a href="#cb675-3" aria-hidden="true"></a>    <span class="bu">printf</span> <span class="st">&quot; - %-</span><span class="va">$((</span>14+<span class="va">$?))</span><span class="st">s is %2d chars length, but uses %2d bytes\n&quot;</span> <span class="kw">\</span></span>
<span id="cb675-4"><a href="#cb675-4" aria-hidden="true"></a>        <span class="st">&quot;&#39;</span><span class="va">$string</span><span class="st">&#39;&quot;</span> $<span class="kw">{</span></span>
<span id="cb675-5"><a href="#cb675-5" aria-hidden="true"></a><span class="co">#string} $((${#string}+$?))</span></span>
<span id="cb675-6"><a href="#cb675-6" aria-hidden="true"></a>  <span class="kw">done</span> </span>
<span id="cb675-7"><a href="#cb675-7" aria-hidden="true"></a></span>
<span id="cb675-8"><a href="#cb675-8" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Généralités&#39;</span>  is 11 chars length, but uses 14 bytes</span>
<span id="cb675-9"><a href="#cb675-9" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Language&#39;</span>     is  8 chars length, but uses  8 bytes</span>
<span id="cb675-10"><a href="#cb675-10" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Théorème&#39;</span>     is  8 chars length, but uses 10 bytes</span>
<span id="cb675-11"><a href="#cb675-11" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Février&#39;</span>      is  7 chars length, but uses  8 bytes</span>
<span id="cb675-12"><a href="#cb675-12" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Left: ←&#39;</span>      is  7 chars length, but uses  9 bytes</span>
<span id="cb675-13"><a href="#cb675-13" aria-hidden="true"></a> <span class="ex">-</span> <span class="st">&#39;Yin Yang ☯&#39;</span>   is 10 chars length, but uses 12 bytes</span></code></pre></div>
<p>But there left some strange UTF-8 behaviour, like double-spaced chars, zero spaced chars, reverse deplacement and other that could not be as simple… Have a look at <a href="https://f-hauri.ch/vrac/diffU8test.sh" rel="noreferrer">diffU8test.sh</a> or <a href="https://f-hauri.ch/vrac/diffU8test.sh.txt" rel="noreferrer">diffU8test.sh.txt</a> for more limitations.</p>
</section>
<section id="answer-2-score-442" class="level4">
<h4>Answer 2 (score 442)</h4>
<p>To get the length of a string stored in a variable, say:</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb676-1"><a href="#cb676-1" aria-hidden="true"></a><span class="va">myvar=</span><span class="st">&quot;some string&quot;</span></span>
<span id="cb676-2"><a href="#cb676-2" aria-hidden="true"></a><span class="va">size=</span>$<span class="kw">{</span></span>
<span id="cb676-3"><a href="#cb676-3" aria-hidden="true"></a><span class="co">#myvar} </span></span></code></pre></div>
<p>To confirm it was properly saved, <code>echo</code> it:</p>
<div class="sourceCode" id="cb677"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb677-1"><a href="#cb677-1" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$size</span><span class="st">&quot;</span></span>
<span id="cb677-2"><a href="#cb677-2" aria-hidden="true"></a><span class="ex">11</span></span></code></pre></div>
</section>
<section id="answer-3-score-22" class="level4">
<h4>Answer 3 (score 22)</h4>
<p>You can use:</p>
<div class="sourceCode" id="cb678"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb678-1"><a href="#cb678-1" aria-hidden="true"></a><span class="va">MYSTRING=</span><span class="st">&quot;abc123&quot;</span></span>
<span id="cb678-2"><a href="#cb678-2" aria-hidden="true"></a><span class="va">MYLENGTH=$(</span><span class="bu">printf</span> <span class="st">&quot;%s&quot;</span> <span class="st">&quot;</span><span class="va">$MYSTRING</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">wc</span> -c<span class="va">)</span></span></code></pre></div>
<ul>
<li>
<code>wc -c</code> or <code>wc --bytes</code> for byte counts = Unicode characters are counted with 2, 3 or more bytes.
</li>
<li>
<code>wc -m</code> or <code>wc --chars</code> for character counts = Unicode characters are counted single until they use more bytes.
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="get-current-time-in-seconds-since-the-epoch-on-linux-bash-score-459374-in-2018" class="level3">
<h3>90: Get current time in seconds since the Epoch on Linux, Bash (score <a href="https://stackoverflow.com/q/1092631.html">459374</a> in 2018)</h3>
<section id="question-89" class="level4">
<h4>Question</h4>
<p>I need something simple like <code>date</code>, but in seconds since 1970 instead of the current date, hours, minutes, and seconds.</p>
<p><code>date</code> doesn’t seem to offer that option. Is there an easy way?</p>
</section>
<section id="answer-accepted-score-1026" class="level4">
<h4>Answer accepted (score 1026)</h4>
<p>This should work:</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb679-1"><a href="#cb679-1" aria-hidden="true"></a><span class="fu">date</span> +%s</span></code></pre></div>
</section>
<section id="answer-2-score-119" class="level4">
<h4>Answer 2 (score 119)</h4>
<p>
Just to add.<br><BR> Get the seconds since epoch(Jan 1 1970) for any given date(e.g Oct 21 1973).
</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb680-1"><a href="#cb680-1" aria-hidden="true"></a><span class="fu">date</span> -d <span class="st">&quot;Oct 21 1973&quot;</span> +%s</span></code></pre></div>
<p>
<br> Convert the number of seconds back to date
</p>
<div class="sourceCode" id="cb681"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb681-1"><a href="#cb681-1" aria-hidden="true"></a><span class="fu">date</span> --date @120024000</span></code></pre></div>
<p>
<br> The command <code>date</code> is pretty versatile. Another cool thing you can do with date(shamelessly copied from <code>date --help</code>). Show the local time for 9AM next Friday on the west coast of the US
</p>
<div class="sourceCode" id="cb682"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb682-1"><a href="#cb682-1" aria-hidden="true"></a><span class="fu">date</span> --date=<span class="st">&#39;TZ=&quot;America/Los_Angeles&quot; 09:00 next Fri&#39;</span></span></code></pre></div>
<p>
Better yet, take some time to read the man page <a href="http://man7.org/linux/man-pages/man1/date.1.html" rel="noreferrer">http://man7.org/linux/man-pages/man1/date.1.html</a>
</p>
</section>
<section id="answer-3-score-36-1" class="level4">
<h4>Answer 3 (score 36)</h4>
<p>So far, all the answers use the external program <code>date</code>.</p>
<p>Since Bash 4.2, <code>printf</code> has a new modifier <code>%(dateformat)T</code> that, when used with argument <code>-1</code> outputs the current date with format given by <code>dateformat</code>, handled by <code>strftime(3)</code> (<code>man 3 strftime</code> for informations about the formats).</p>
<p>So, for a pure Bash solution:</p>
<div class="sourceCode" id="cb683"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb683-1"><a href="#cb683-1" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&#39;%(%s)T\n&#39;</span> -1</span></code></pre></div>
<p>or if you need to store the result in a variable <code>var</code>:</p>
<div class="sourceCode" id="cb684"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb684-1"><a href="#cb684-1" aria-hidden="true"></a><span class="bu">printf</span> -v var <span class="st">&#39;%(%s)T&#39;</span> -1</span></code></pre></div>
<p>No external programs and no subshells!</p>
<p>Since Bash 4.3, it’s even possible to not specify the <code>-1</code>:</p>
<div class="sourceCode" id="cb685"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb685-1"><a href="#cb685-1" aria-hidden="true"></a><span class="bu">printf</span> -v var <span class="st">&#39;%(%s)T&#39;</span></span></code></pre></div>
<p>(but it might be wiser to always give the argument <code>-1</code> nonetheless).</p>
<p>If you use <code>-2</code> as argument instead of <code>-1</code>, Bash will use the time the shell was started instead of the current date (but why would you want this?).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-edit-path-.bash_profile-on-osx-score-458023-in-2019" class="level3">
<h3>91: How do I edit $PATH (.bash_profile) on OSX? (score <a href="https://stackoverflow.com/q/30461201.html">458023</a> in 2019)</h3>
<section id="question-90" class="level4">
<h4>Question</h4>
<p>I am trying to edit an entry to PATH, as I did something wrong.</p>
<p>I am using Mac OS X 10.10.3</p>
<p>I have tried:</p>
<div class="sourceCode" id="cb686"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb686-1"><a href="#cb686-1" aria-hidden="true"></a><span class="op">&gt;</span> <span class="fu">touch</span> ~/.bash_profile<span class="kw">;</span> <span class="ex">open</span> ~/.bash_profile</span></code></pre></div>
<p>But the file editor opens with nothing inside.</p>
<p>My problem:</p>
<p>I am trying to install ANDROID_HOME to my PATH</p>
<p>I misspelled it, but when I closed the terminal and went back it was gone, so I tried again:</p>
<blockquote>
<div class="sourceCode" id="cb687"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb687-1"><a href="#cb687-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">ANDROID_HOME=</span>/<span class="op">&lt;</span><span class="ex">installation</span> location<span class="op">&gt;</span>/android-sdk-macosx</span>
<span id="cb687-2"><a href="#cb687-2" aria-hidden="true"></a><span class="bu">export</span> <span class="va">PATH=${PATH}</span>:<span class="va">$ANDROID_HOME</span>/tools:<span class="va">$ANDROID_HOME</span>/platform-tools</span></code></pre></div>
</blockquote>
<p>This time, I typed the command correctly but, when I closed the terminal, my settings disappeared again.</p>
<p>How do I execute my desired settings?</p>
<p>If I was to edit bash.profile, how would I enter the above code?</p>
<p>Thanks!</p>
</section>
<section id="answer-accepted-score-300" class="level4">
<h4>Answer accepted (score 300)</h4>
<p>You have to open that file with a text editor and then save it.</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb688-1"><a href="#cb688-1" aria-hidden="true"></a><span class="fu">touch</span> ~/.bash_profile<span class="kw">;</span> <span class="ex">open</span> ~/.bash_profile</span></code></pre></div>
<p>It will open the file with TextEdit, paste your things and then save it. If you open it again you’ll find your edits.</p>
<p>You can use other editors:</p>
<div class="sourceCode" id="cb689"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb689-1"><a href="#cb689-1" aria-hidden="true"></a><span class="fu">nano</span> ~/.bash_profile</span>
<span id="cb689-2"><a href="#cb689-2" aria-hidden="true"></a><span class="ex">mate</span> ~/.bash_profile</span>
<span id="cb689-3"><a href="#cb689-3" aria-hidden="true"></a><span class="ex">vim</span> ~/.bash_profile</span></code></pre></div>
<p>But if you don’t know how to use them, it’s easier to use the <code>open</code> approach.</p>
<hr>
<p>Alternatively, you can rely on <code>pbpaste</code>. Copy</p>
<div class="sourceCode" id="cb690"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb690-1"><a href="#cb690-1" aria-hidden="true"></a><span class="bu">export</span> <span class="va">ANDROID_HOME=</span>/<span class="op">&lt;</span><span class="ex">installation</span> location<span class="op">&gt;</span>/android-sdk-macosx</span>
<span id="cb690-2"><a href="#cb690-2" aria-hidden="true"></a><span class="bu">export</span> <span class="va">PATH=${PATH}</span>:<span class="va">$ANDROID_HOME</span>/tools:<span class="va">$ANDROID_HOME</span>/platform-tools</span></code></pre></div>
<p>in the system clipboard and then in a shell run</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb691-1"><a href="#cb691-1" aria-hidden="true"></a><span class="ex">pbpaste</span> <span class="op">&gt;</span> ~/.bash_profile</span></code></pre></div>
<hr>
<p>Or alternatively you can also use <code>cat</code></p>
<div class="sourceCode" id="cb692"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb692-1"><a href="#cb692-1" aria-hidden="true"></a><span class="fu">cat</span> <span class="op">&gt;</span> ~/.bash_profile</span></code></pre></div>
<p>(now <code>cat</code> waits for input: paste the two export definitions and then hit ctrl-D).</p>
</section>
<section id="answer-2-score-64" class="level4">
<h4>Answer 2 (score 64)</h4>
<p>A bit more detailed for beginners:</p>
<p>First, make sure the <strong>.bash_profile file is existing?</strong> Remember that the .bash_profile file isn’t there by default. You have to create it on your own.</p>
<p>
Go into your <strong>user folder in finder</strong>. The .bash_profile file should be findable there. -&gt; <strong>HD/Users/[USERNAME]</strong>
</p>
<p>Remember: Files with a point at the beginning <strong>‘.’ are hidden</strong> by default.</p>
<p>To show hidden files in Mac OS Finder:</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb693-1"><a href="#cb693-1" aria-hidden="true"></a><span class="ex">Press</span>: Command + Shift + .</span></code></pre></div>
<p>If it’s not existing, <strong>you have to create .bash_profile</strong> on your own.</p>
<p><strong>Open terminal</strong> app and switch into <strong>user folder</strong> with simple command:</p>
<div class="sourceCode" id="cb694"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb694-1"><a href="#cb694-1" aria-hidden="true"></a><span class="bu">cd</span></span></code></pre></div>
<p>If it’s not existing, use this <strong>command to create the file</strong>:</p>
<div class="sourceCode" id="cb695"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb695-1"><a href="#cb695-1" aria-hidden="true"></a><span class="fu">touch</span> .bash_profile</span></code></pre></div>
<p>Second, if you can’t memorise the nerdy commands for save and close in vim, nano etc (the way recommended above) the easiest way to edit is to open .bash_profile file in your favored code editor (Sublime etc.).</p>
<p>Finder -&gt; User folder. Right click -&gt; open with : Sublime Text (or other code editor). Or drag it on app in dock.</p>
<p>… and there you can edit it, pass export commands in new lines.</p>
</section>
<section id="answer-3-score-8" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>For beginners: To create your <code>.bash_profile</code> file in your home directory on MacOS, run:</p>
<p><code>nano ~/.bash_profile</code></p>
<p>Then you can paste in the following:</p>
<p><a href="https://gist.github.com/mocon/0baf15e62163a07cb957888559d1b054" rel="noreferrer">https://gist.github.com/mocon/0baf15e62163a07cb957888559d1b054</a></p>
<p>As you can see, it includes some example aliases and an environment variable at the bottom.</p>
<p>One you’re done making your changes, follow the instructions at the bottom of the Nano editor window to WriteOut (<code>Ctrl-O</code>) and Exit (<code>Ctrl-X</code>). Then quit your Terminal and reopen it, and you will be able to use your newly defined aliases and environment variables.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="bash-script-and-binbashm-bad-interpreter-no-such-file-or-directory-score-456363-in-2019" class="level3">
<h3>92: Bash script and /bin/bash^M: bad interpreter: No such file or directory (score <a href="https://stackoverflow.com/q/14219092.html">456363</a> in 2019)</h3>
<section id="question-91" class="level4">
<h4>Question</h4>
<p>I’m learning through this tutorial to learn <a href="http://linuxcommand.org/wss0010.php" rel="noreferrer">bash scripts</a> to automate a few tasks for me. I’m connecting to a server using putty.</p>
<p>The script, located in <code>.../Documents/LOG</code>, is:</p>
<div class="sourceCode" id="cb696"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb696-1"><a href="#cb696-1" aria-hidden="true"></a></span>
<span id="cb696-2"><a href="#cb696-2" aria-hidden="true"></a><span class="co">#!/bin/bash</span></span>
<span id="cb696-3"><a href="#cb696-3" aria-hidden="true"></a></span>
<span id="cb696-4"><a href="#cb696-4" aria-hidden="true"></a><span class="co"># My first script</span></span>
<span id="cb696-5"><a href="#cb696-5" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;Hello World!&quot;</span></span></code></pre></div>
<p>And I executed the following for read/write/execute permissions</p>
<div class="sourceCode" id="cb697"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb697-1"><a href="#cb697-1" aria-hidden="true"></a><span class="fu">chmod</span> 755 my_script</span></code></pre></div>
<p>Then, when I enter <code>./my_script</code>, I’m getting the error given in the title.</p>
<p>Some similar questions wanted to see these, so I think they might help:</p>
<div class="sourceCode" id="cb698"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb698-1"><a href="#cb698-1" aria-hidden="true"></a><span class="fu">which</span> bash</span></code></pre></div>
<blockquote>
/bin/bash
</blockquote>
<p>and</p>
<div class="sourceCode" id="cb699"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb699-1"><a href="#cb699-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$PATH</span></span></code></pre></div>
<blockquote>
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/bin/mh
</blockquote>
<p>I tried adding current directory to <code>PATH</code>, but that doesn’t work..</p>
</section>
<section id="answer-accepted-score-501" class="level4">
<h4>Answer accepted (score 501)</h4>
<p>I have seen this issue when creating scripts in Windows env and then porting over to run on a Unix environment.</p>
<p>Try running <code>dos2unix</code> on the script:</p>
<p><a href="http://dos2unix.sourceforge.net/" rel="noreferrer">http://dos2unix.sourceforge.net/</a></p>
<p>Or just rewrite the script in your Unix env using <code>vi</code> and test.</p>
<p>Unix uses different line endings so can’t read the file you created on Windows. Hence it is seeing ^M as an illegal character.</p>
<p>If you want to write a file on Windows and then port over, make sure your editor is set to create files in UNIX format.</p>
<p>In notepad++ in the bottom right of the screen, it tells you the document format. By default, it will say <code>Dos\Windows</code>. To change it go to</p>
<ul>
<li>
settings-&gt;preferences
</li>
<li>
new document / default directory tab
</li>
<li>
select the format as unix and close
</li>
<li>
create a new document
</li>
</ul>
</section>
<section id="answer-2-score-430" class="level4">
<h4>Answer 2 (score 430)</h4>
<p>Run following command in terminal</p>
<div class="sourceCode" id="cb700"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb700-1"><a href="#cb700-1" aria-hidden="true"></a><span class="fu">sed</span> -i -e <span class="st">&#39;s/\r$//&#39;</span> scriptname.sh</span></code></pre></div>
<p>Then try</p>
<div class="sourceCode" id="cb701"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb701-1"><a href="#cb701-1" aria-hidden="true"></a><span class="ex">./scriptname.sh</span></span></code></pre></div>
<p>It should work.</p>
</section>
<section id="answer-3-score-116" class="level4">
<h4>Answer 3 (score 116)</h4>
<p>If you use <strong>Sublime Text</strong> on Windows or Mac to edit your scripts:</p>
<p>Click on <code>View &amp;gt; Line Endings &amp;gt; Unix</code> and <strong>save</strong> the file again.</p>
<p><img src="https://i.stack.imgur.com/jkZER.png" alt="enter image description here"></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-if-a-bash-array-contains-a-value-score-456169-in-2017" class="level3">
<h3>93: Check if a Bash array contains a value (score <a href="https://stackoverflow.com/q/3685970.html">456169</a> in 2017)</h3>
<section id="question-92" class="level4">
<h4>Question</h4>
<p>In Bash, what is the simplest way to test if an array contains a certain value?</p>
<p><strong>Edit</strong>: With help from the answers and the comments, after some testing, I came up with this:</p>
<div class="sourceCode" id="cb702"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb702-1"><a href="#cb702-1" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> contains()</span> <span class="kw">{</span></span>
<span id="cb702-2"><a href="#cb702-2" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">n=</span>$</span>
<span id="cb702-3"><a href="#cb702-3" aria-hidden="true"></a><span class="co">#</span></span>
<span id="cb702-4"><a href="#cb702-4" aria-hidden="true"></a>    <span class="bu">local</span> <span class="va">value=${!n}</span></span>
<span id="cb702-5"><a href="#cb702-5" aria-hidden="true"></a>    <span class="kw">for</span> <span class="kw">((</span>i=1;i &lt; $</span>
<span id="cb702-6"><a href="#cb702-6" aria-hidden="true"></a><span class="co">#;i++)) {</span></span>
<span id="cb702-7"><a href="#cb702-7" aria-hidden="true"></a>        if [ <span class="st">&quot;</span><span class="va">${!i}</span><span class="st">&quot;</span> == <span class="st">&quot;</span><span class="va">${value}</span><span class="st">&quot;</span> ]; then</span>
<span id="cb702-8"><a href="#cb702-8" aria-hidden="true"></a>            echo <span class="st">&quot;y&quot;</span></span>
<span id="cb702-9"><a href="#cb702-9" aria-hidden="true"></a>            return 0</span>
<span id="cb702-10"><a href="#cb702-10" aria-hidden="true"></a>        fi</span>
<span id="cb702-11"><a href="#cb702-11" aria-hidden="true"></a>    }</span>
<span id="cb702-12"><a href="#cb702-12" aria-hidden="true"></a>    echo <span class="st">&quot;n&quot;</span></span>
<span id="cb702-13"><a href="#cb702-13" aria-hidden="true"></a>    return 1</span>
<span id="cb702-14"><a href="#cb702-14" aria-hidden="true"></a>}</span>
<span id="cb702-15"><a href="#cb702-15" aria-hidden="true"></a></span>
<span id="cb702-16"><a href="#cb702-16" aria-hidden="true"></a>A=(<span class="st">&quot;one&quot;</span> <span class="st">&quot;two&quot;</span> <span class="st">&quot;three four&quot;</span>)</span>
<span id="cb702-17"><a href="#cb702-17" aria-hidden="true"></a>if [ <span class="va">$(</span><span class="ex">contains</span> <span class="st">&quot;</span><span class="va">${A[@]}</span><span class="st">&quot;</span> <span class="st">&quot;one&quot;</span><span class="va">)</span> == <span class="st">&quot;y&quot;</span> ]; then</span>
<span id="cb702-18"><a href="#cb702-18" aria-hidden="true"></a>    echo <span class="st">&quot;contains one&quot;</span></span>
<span id="cb702-19"><a href="#cb702-19" aria-hidden="true"></a>fi</span>
<span id="cb702-20"><a href="#cb702-20" aria-hidden="true"></a>if [ <span class="va">$(</span><span class="ex">contains</span> <span class="st">&quot;</span><span class="va">${A[@]}</span><span class="st">&quot;</span> <span class="st">&quot;three&quot;</span><span class="va">)</span> == <span class="st">&quot;y&quot;</span> ]; then</span>
<span id="cb702-21"><a href="#cb702-21" aria-hidden="true"></a>    echo <span class="st">&quot;contains three&quot;</span></span>
<span id="cb702-22"><a href="#cb702-22" aria-hidden="true"></a>fi</span></code></pre></div>
<p>I’m not sure if it’s the best solution, but it seems to work.</p>
</section>
<section id="answer-accepted-score-7" class="level4">
<h4>Answer accepted (score 7)</h4>
<p>There is <a href="http://tldp.org/LDP/abs/html/arrays.html
#ARRAYSTROPS" rel="nofollow noreferrer">sample code that shows how to replace a substring from an array</a>. You can make a copy of the array and try to remove the target value from the copy. If the copy and original are then different, then the target value exists in the original string.</p>
<p>The straightforward (but potentially more time-consuming) solution is to simply iterate through the entire array and check each item individually. This is what I typically do because it is easy to implement and you can wrap it in a function (see <a href="http://www.faqs.org/docs/abs/HTML/assortedtips.html
#ARRFUNC" rel="nofollow noreferrer">this info on passing an array to a function</a>).</p>
</section>
<section id="answer-2-score-368" class="level4">
<h4>Answer 2 (score 368)</h4>
<p>This approach has the advantage of not needing to loop over all the elements (at least not explicitly). But since <code>array_to_string_internal()</code> in <a href="http://git.savannah.gnu.org/cgit/bash.git/tree/array.c" rel="noreferrer">array.c</a> still loops over array elements and concatenates them into a string, it’s probably not more efficient than the looping solutions proposed, but it’s more readable.</p>
<div class="sourceCode" id="cb703"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb703-1"><a href="#cb703-1" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot; </span><span class="va">${array[@]}</span><span class="st"> &quot;</span> =~ <span class="st">&quot; </span><span class="va">${value}</span><span class="st"> &quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb703-2"><a href="#cb703-2" aria-hidden="true"></a></span>
<span id="cb703-3"><a href="#cb703-3" aria-hidden="true"></a><span class="co"># whatever you want to do when arr contains value</span></span>
<span id="cb703-4"><a href="#cb703-4" aria-hidden="true"></a><span class="kw">fi</span></span>
<span id="cb703-5"><a href="#cb703-5" aria-hidden="true"></a></span>
<span id="cb703-6"><a href="#cb703-6" aria-hidden="true"></a><span class="kw">if [[</span> <span class="ot">!</span> <span class="st">&quot; </span><span class="va">${array[@]}</span><span class="st"> &quot;</span> =~ <span class="st">&quot; </span><span class="va">${value}</span><span class="st"> &quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb703-7"><a href="#cb703-7" aria-hidden="true"></a></span>
<span id="cb703-8"><a href="#cb703-8" aria-hidden="true"></a><span class="co"># whatever you want to do when arr doesn&#39;t contain value</span></span>
<span id="cb703-9"><a href="#cb703-9" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
<p>Note that in cases where the value you are searching for is one of the words in an array element with spaces, it will give false positives. For example</p>
<div class="sourceCode" id="cb704"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb704-1"><a href="#cb704-1" aria-hidden="true"></a><span class="va">array=(</span><span class="st">&quot;Jack Brown&quot;</span><span class="va">)</span></span>
<span id="cb704-2"><a href="#cb704-2" aria-hidden="true"></a><span class="va">value=</span><span class="st">&quot;Jack&quot;</span></span></code></pre></div>
<p>The regex will see <code>Jack</code> as being in the array even though it isn’t. So you’ll have to change <code>IFS</code> and the separator characters on your regex if you want still to use this solution, like this</p>
<div class="sourceCode" id="cb705"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb705-1"><a href="#cb705-1" aria-hidden="true"></a><span class="va">IFS=</span><span class="st">$&#39;</span><span class="dt">\t</span><span class="st">&#39;</span></span>
<span id="cb705-2"><a href="#cb705-2" aria-hidden="true"></a><span class="va">array=(</span><span class="st">&quot;Jack Brown\tJack Smith&quot;</span><span class="va">)</span></span>
<span id="cb705-3"><a href="#cb705-3" aria-hidden="true"></a><span class="bu">unset</span> <span class="va">IFS</span></span>
<span id="cb705-4"><a href="#cb705-4" aria-hidden="true"></a></span>
<span id="cb705-5"><a href="#cb705-5" aria-hidden="true"></a><span class="va">value=</span><span class="st">&quot;Jack Smith&quot;</span></span>
<span id="cb705-6"><a href="#cb705-6" aria-hidden="true"></a></span>
<span id="cb705-7"><a href="#cb705-7" aria-hidden="true"></a><span class="kw">if [[</span> <span class="st">&quot;\t</span><span class="va">${array[@]}</span><span class="st">\t&quot;</span> =~ <span class="st">&quot;\t</span><span class="va">${value}</span><span class="st">\t&quot;</span><span class="kw"> ]]</span>; <span class="kw">then</span></span>
<span id="cb705-8"><a href="#cb705-8" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;yep, it&#39;s there&quot;</span></span>
<span id="cb705-9"><a href="#cb705-9" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-3-score-366" class="level4">
<h4>Answer 3 (score 366)</h4>
<p>Below is a small function for achieving this. The search string is the first argument and the rest are the array elements:</p>
<div class="sourceCode" id="cb706"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb706-1"><a href="#cb706-1" aria-hidden="true"></a><span class="fu">containsElement ()</span> <span class="kw">{</span></span>
<span id="cb706-2"><a href="#cb706-2" aria-hidden="true"></a>  <span class="bu">local</span> <span class="va">e</span> <span class="va">match=</span><span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb706-3"><a href="#cb706-3" aria-hidden="true"></a>  <span class="bu">shift</span></span>
<span id="cb706-4"><a href="#cb706-4" aria-hidden="true"></a>  <span class="kw">for</span> <span class="ex">e</span><span class="kw">;</span> <span class="kw">do [[</span> <span class="st">&quot;</span><span class="va">$e</span><span class="st">&quot;</span> <span class="ot">==</span> <span class="st">&quot;</span><span class="va">$match</span><span class="st">&quot;</span><span class="kw"> ]]</span> <span class="kw">&amp;&amp;</span> <span class="bu">return</span> 0<span class="kw">;</span> <span class="kw">done</span></span>
<span id="cb706-5"><a href="#cb706-5" aria-hidden="true"></a>  <span class="bu">return</span> 1</span>
<span id="cb706-6"><a href="#cb706-6" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p>A test run of that function could look like:</p>
<div class="sourceCode" id="cb707"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb707-1"><a href="#cb707-1" aria-hidden="true"></a>$ <span class="va">array=(</span><span class="st">&quot;something to search for&quot;</span> <span class="st">&quot;a string&quot;</span> <span class="st">&quot;test2000&quot;</span><span class="va">)</span></span>
<span id="cb707-2"><a href="#cb707-2" aria-hidden="true"></a>$ <span class="ex">containsElement</span> <span class="st">&quot;a string&quot;</span> <span class="st">&quot;</span><span class="va">${array[@]}</span><span class="st">&quot;</span></span>
<span id="cb707-3"><a href="#cb707-3" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">$?</span></span>
<span id="cb707-4"><a href="#cb707-4" aria-hidden="true"></a><span class="ex">0</span></span>
<span id="cb707-5"><a href="#cb707-5" aria-hidden="true"></a>$ <span class="ex">containsElement</span> <span class="st">&quot;blaha&quot;</span> <span class="st">&quot;</span><span class="va">${array[@]}</span><span class="st">&quot;</span></span>
<span id="cb707-6"><a href="#cb707-6" aria-hidden="true"></a>$ <span class="ex">echo</span> <span class="va">$?</span></span>
<span id="cb707-7"><a href="#cb707-7" aria-hidden="true"></a><span class="ex">1</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-and-kill-a-process-in-one-line-using-bash-and-regex-score-456080-in-2010" class="level3">
<h3>94: Find and kill a process in one line using bash and regex (score <a href="https://stackoverflow.com/q/3510673.html">456080</a> in 2010)</h3>
<section id="question-93" class="level4">
<h4>Question</h4>
<p>I often need to kill a process during programming.</p>
<p>The way I do it now is:</p>
<div class="sourceCode" id="cb708"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb708-1"><a href="#cb708-1" aria-hidden="true"></a>[<span class="ex">~</span>]$ <span class="fu">ps</span> aux <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;python csp_build.py&#39;</span></span>
<span id="cb708-2"><a href="#cb708-2" aria-hidden="true"></a><span class="ex">user</span>    5124  1.0  0.3 214588 13852 pts/4    Sl+  11:19   0:00 python csp_build.py</span>
<span id="cb708-3"><a href="#cb708-3" aria-hidden="true"></a><span class="ex">user</span>    5373  0.0  0.0   8096   960 pts/6    S+   11:20   0:00 grep python csp_build.py</span>
<span id="cb708-4"><a href="#cb708-4" aria-hidden="true"></a>[<span class="ex">~</span>]$ <span class="bu">kill</span> 5124</span></code></pre></div>
<p>How can I extract the process id automatically and kill it in the same line?</p>
<p>Like this:</p>
<div class="sourceCode" id="cb709"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb709-1"><a href="#cb709-1" aria-hidden="true"></a>[<span class="ex">~</span>]$ <span class="fu">ps</span> aux <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;python csp_build.py&#39;</span> <span class="kw">|</span> <span class="bu">kill</span> <span class="op">&lt;</span>regex that returns the pid<span class="op">&gt;</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-1287" class="level4">
<h4>Answer accepted (score 1287)</h4>
<p>In <code>bash</code>, you should be able to do:</p>
<div class="sourceCode" id="cb710"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb710-1"><a href="#cb710-1" aria-hidden="true"></a><span class="bu">kill</span> <span class="va">$(</span><span class="fu">ps</span> aux <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;[p]ython csp_build.py&#39;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $2}&#39;</span><span class="va">)</span></span></code></pre></div>
<p>Details on its workings are as follows:</p>
<ul>
<li>
The <code>ps</code> gives you the list of all the processes.
</li>
<li>
The <code>grep</code> filters that based on your search string, <code>[p]</code> is a trick to stop you picking up the actual <code>grep</code> process itself.
</li>
<li>
The <code>awk</code> just gives you the second field of each line, which is the PID.
</li>
<li>
The <code>$(x)</code> construct means to execute <code>x</code> then take its output and put it on the command line. The output of that <code>ps</code> pipeline inside that construct above is the list of process IDs so you end up with a command like <code>kill 1234 1122 7654</code>.
</li>
</ul>
<p>Here’s a transcript showing it in action:</p>
<div class="sourceCode" id="cb711"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb711-1"><a href="#cb711-1" aria-hidden="true"></a><span class="ex">pax</span><span class="op">&gt;</span> sleep 3600 <span class="kw">&amp;</span></span>
<span id="cb711-2"><a href="#cb711-2" aria-hidden="true"></a>[<span class="ex">1</span>] 2225</span>
<span id="cb711-3"><a href="#cb711-3" aria-hidden="true"></a><span class="ex">pax</span><span class="op">&gt;</span> sleep 3600 <span class="kw">&amp;</span></span>
<span id="cb711-4"><a href="#cb711-4" aria-hidden="true"></a>[<span class="ex">2</span>] 2226</span>
<span id="cb711-5"><a href="#cb711-5" aria-hidden="true"></a><span class="ex">pax</span><span class="op">&gt;</span> sleep 3600 <span class="kw">&amp;</span></span>
<span id="cb711-6"><a href="#cb711-6" aria-hidden="true"></a>[<span class="ex">3</span>] 2227</span>
<span id="cb711-7"><a href="#cb711-7" aria-hidden="true"></a><span class="ex">pax</span><span class="op">&gt;</span> sleep 3600 <span class="kw">&amp;</span></span>
<span id="cb711-8"><a href="#cb711-8" aria-hidden="true"></a>[<span class="ex">4</span>] 2228</span>
<span id="cb711-9"><a href="#cb711-9" aria-hidden="true"></a><span class="ex">pax</span><span class="op">&gt;</span> sleep 3600 <span class="kw">&amp;</span></span>
<span id="cb711-10"><a href="#cb711-10" aria-hidden="true"></a>[<span class="ex">5</span>] 2229</span>
<span id="cb711-11"><a href="#cb711-11" aria-hidden="true"></a><span class="ex">pax</span><span class="op">&gt;</span> kill <span class="va">$(</span><span class="fu">ps</span> aux <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;[s]leep&#39;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $2}&#39;</span><span class="va">)</span></span>
<span id="cb711-12"><a href="#cb711-12" aria-hidden="true"></a>[<span class="ex">5</span>]+  Terminated              sleep 3600</span>
<span id="cb711-13"><a href="#cb711-13" aria-hidden="true"></a>[<span class="ex">1</span>]   Terminated              sleep 3600</span>
<span id="cb711-14"><a href="#cb711-14" aria-hidden="true"></a>[<span class="ex">2</span>]   Terminated              sleep 3600</span>
<span id="cb711-15"><a href="#cb711-15" aria-hidden="true"></a>[<span class="ex">3</span>]-  Terminated              sleep 3600</span>
<span id="cb711-16"><a href="#cb711-16" aria-hidden="true"></a>[<span class="ex">4</span>]+  Terminated              sleep 3600</span></code></pre></div>
<p>and you can see it terminating all the sleepers.</p>
<hr>
<p>Explaining the <code>grep '[p]ython csp_build.py'</code> bit in a bit more detail:</p>
<p>When you do <code>sleep 3600 &amp;amp;</code> followed by <code>ps -ef | grep sleep</code>, you tend to get <em>two</em> processes with <code>sleep</code> in it, the <code>sleep 3600</code> and the <code>grep sleep</code> (because they both have <code>sleep</code> in them, that’s not rocket science).</p>
<p>However, <code>ps -ef | grep '[s]leep'</code> won’t create a process with <code>sleep</code> in it, it instead creates <code>grep '[s]leep'</code> and here’s the tricky bit: the <code>grep</code> doesn’t find it because it’s looking for the regular expression "any character from the character class <code>[s]</code> (which is <code>s</code>) followed by <code>leep</code>.</p>
<p>In other words, it’s looking for <code>sleep</code> but the grep process is <code>grep '[s]leep'</code> which doesn’t have <code>sleep</code> in it.</p>
<p>When I was shown this (by someone here on SO), I immediately started using it because</p>
<ul>
<li>
it’s one less process than adding <code>| grep -v grep</code>; and
</li>
<li>
it’s elegant <em>and</em> sneaky, a rare combination :-)
</li>
</ul>
</section>
<section id="answer-2-score-125" class="level4">
<h4>Answer 2 (score 125)</h4>
<p>if you have pkill,</p>
<div class="sourceCode" id="cb712"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb712-1"><a href="#cb712-1" aria-hidden="true"></a><span class="ex">pkill</span> -f csp_build.py</span></code></pre></div>
<p>If you only want to grep against the process name (instead of the full argument list) then leave off <code>-f</code>.</p>
</section>
<section id="answer-3-score-82" class="level4">
<h4>Answer 3 (score 82)</h4>
<h5>
One liner:
</h2>
<p><strong><code>ps aux  |  grep -i csp_build  |  awk '{print $2}'  |  xargs sudo kill -9</code></strong></p>
<ul>
<li>
Print out column 2: <code>awk '{print $2}'</code>
</li>
<li>
<strong><code>sudo</code></strong> is optional
</li>
<li>
Run <code>kill -9 5124</code>, <code>kill -9 5373</code> etc (kill -15 is more graceful but slightly slower)
</li>
</ul>
<hr>
<h5>
Bonus:
</h2>
<p>
I also have 2 shortcut functions defined in my .bash_profile (~/.bash_profile is for osx, you have to see what works for your *nix machine).
</p>
<ol>
<li>
<p><strong>p</strong> <em>keyword</em></p>
<ul>
<li>
lists out all <strong>P</strong>rocesses containing keyword
</li>
<li>
usage e.g: <code>p csp_build</code> , <code>p python</code> etc
</li>
</ul>
</li>
</ol>
<p><em>bash_profile code:</em></p>
<div class="sourceCode" id="cb713"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb713-1"><a href="#cb713-1" aria-hidden="true"></a></span>
<span id="cb713-2"><a href="#cb713-2" aria-hidden="true"></a><span class="co"># FIND PROCESS</span></span>
<span id="cb713-3"><a href="#cb713-3" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> p()</span><span class="kw">{</span></span>
<span id="cb713-4"><a href="#cb713-4" aria-hidden="true"></a>        <span class="fu">ps</span> aux <span class="kw">|</span> <span class="fu">grep</span> -i <span class="va">$1</span> <span class="kw">|</span> <span class="fu">grep</span> -v grep</span>
<span id="cb713-5"><a href="#cb713-5" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<ol start="2">
<li>
<p><strong>ka</strong> <em>keyword</em></p>
<ul>
<li>
<strong>K</strong>ills <strong>A</strong>ll processes that have this keyword
</li>
<li>
usage e.g: <code>ka csp_build</code> , <code>ka python</code> etc
</li>
<li>
optional kill level e.g: <code>ka csp_build 15</code>, <code>ka python 9</code>
</li>
</ul>
</li>
</ol>
<p><em>bash_profile code:</em></p>
<div class="sourceCode" id="cb714"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb714-1"><a href="#cb714-1" aria-hidden="true"></a></span>
<span id="cb714-2"><a href="#cb714-2" aria-hidden="true"></a><span class="co"># KILL ALL</span></span>
<span id="cb714-3"><a href="#cb714-3" aria-hidden="true"></a><span class="kw">function</span><span class="fu"> ka()</span><span class="kw">{</span></span>
<span id="cb714-4"><a href="#cb714-4" aria-hidden="true"></a></span>
<span id="cb714-5"><a href="#cb714-5" aria-hidden="true"></a>    <span class="va">cnt=$(</span> <span class="ex">p</span> <span class="va">$1</span> <span class="kw">|</span> <span class="fu">wc</span> -l<span class="va">)</span></span>
<span id="cb714-6"><a href="#cb714-6" aria-hidden="true"></a><span class="co"># total count of processes found</span></span>
<span id="cb714-7"><a href="#cb714-7" aria-hidden="true"></a>    <span class="va">klevel=${2:-</span>15<span class="va">}</span></span>
<span id="cb714-8"><a href="#cb714-8" aria-hidden="true"></a><span class="co"># kill level, defaults to 15 if argument 2 is empty</span></span>
<span id="cb714-9"><a href="#cb714-9" aria-hidden="true"></a></span>
<span id="cb714-10"><a href="#cb714-10" aria-hidden="true"></a>    <span class="bu">echo</span> -e <span class="st">&quot;\nSearching for &#39;</span><span class="va">$1</span><span class="st">&#39; -- Found&quot;</span> <span class="va">$cnt</span> <span class="st">&quot;Running Processes .. &quot;</span></span>
<span id="cb714-11"><a href="#cb714-11" aria-hidden="true"></a>    <span class="ex">p</span> <span class="va">$1</span></span>
<span id="cb714-12"><a href="#cb714-12" aria-hidden="true"></a></span>
<span id="cb714-13"><a href="#cb714-13" aria-hidden="true"></a>    <span class="bu">echo</span> -e <span class="st">&#39;\nTerminating&#39;</span> <span class="va">$cnt</span> <span class="st">&#39;processes .. &#39;</span></span>
<span id="cb714-14"><a href="#cb714-14" aria-hidden="true"></a></span>
<span id="cb714-15"><a href="#cb714-15" aria-hidden="true"></a>    <span class="fu">ps</span> aux  <span class="kw">|</span>  <span class="fu">grep</span> -i <span class="va">$1</span> <span class="kw">|</span>  <span class="fu">grep</span> -v grep   <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $2}&#39;</span> <span class="kw">|</span> <span class="fu">xargs</span> sudo kill -klevel</span>
<span id="cb714-16"><a href="#cb714-16" aria-hidden="true"></a>    <span class="bu">echo</span> -e <span class="st">&quot;Done!\n&quot;</span></span>
<span id="cb714-17"><a href="#cb714-17" aria-hidden="true"></a></span>
<span id="cb714-18"><a href="#cb714-18" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;Running search again:&quot;</span></span>
<span id="cb714-19"><a href="#cb714-19" aria-hidden="true"></a>    <span class="ex">p</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb714-20"><a href="#cb714-20" aria-hidden="true"></a>    <span class="bu">echo</span> -e <span class="st">&quot;\n&quot;</span></span>
<span id="cb714-21"><a href="#cb714-21" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-determine-the-current-shell-im-working-on-score-455839-in-2013" class="level3">
<h3>95: How to determine the current shell I’m working on? (score <a href="https://stackoverflow.com/q/3327013.html">455839</a> in 2013)</h3>
<section id="question-94" class="level4">
<h4>Question</h4>
<p>How can I determine the current shell I am working on?</p>
<p>Would the output of the <code>ps</code> command alone be sufficient?</p>
<p>How can this be done in different flavors of UNIX?</p>
</section>
<section id="answer-accepted-score-738" class="level4">
<h4>Answer accepted (score 738)</h4>
<ul>
<li>
<p>
There are 3 approaches to finding the <strong>name</strong> of the current shell’s executable:
</p>
<p>Please note that all 3 approaches can be fooled if the executable of the shell is <code>/bin/sh</code> but it’s really a renamed <code>bash</code>, for example (which frequently happens).</p>
<p><em>Thus your second question of whether <code>ps</code> output will do is answered with “<strong>not always</strong>”.</em></p>
<ol>
<li>
<p>
<code>echo $0</code> - will print the program name… which in the case of shell is the actual shell
</p>
</li>
<li>
<p>
<code>ps  -ef | grep $$ | grep -v grep</code> - This will look for the current process ID in the list of running processes. Since the current process is shell, it will be included.
</p>
This is not 100% reliable, as you might have OTHER processes whose <code>ps</code> listing includes the same number as shell’s process ID, especially if that ID is a small # (e.g. if shell’s PID is “5”, you may find processes called “java5” or “perl5” in the same <code>grep</code> output!). <em>This is the second problem with the “ps” approach, on top of not being able to rely on the shell name.</em>
</li>
<li>
<p>
<code>echo $SHELL</code> - The path to the current shell is stored as the <code>SHELL</code> variable for any shell. The caveat for this one is that if you launch a shell explicitly as a subprocess (e.g. it’s not your login shell), you will get your login shell’s value instead. If that’s a possibility, use the <code>ps</code> or <code>$0</code> approach.
</p>
</li>
</ol>
<hr>
</li>
<li>
<p>
If, however, the executable doesn’t match your actual shell (e.g. <code>/bin/sh</code> is actually bash or ksh), you need heuristics. Here are some environmental variables specific to various shells:
</p>
<ul>
<li>
<p>
<code>$version</code> is set on tcsh
</p>
</li>
<li>
<p>
<code>$BASH</code> is set on bash
</p>
</li>
<li>
<p>
<code>$shell</code> (lowercase) is set to actual shell name in csh or tcsh
</p>
</li>
<li>
<p>
<code>$ZSH_NAME</code> is set on zsh
</p>
</li>
<li>
<p>
ksh has <code>$PS3</code> and <code>$PS4</code> set, whereas normal Bourne shell (<code>sh</code>) only has <code>$PS1</code> and <code>$PS2</code> set. This generally seems like the hardest to distinguish - the ONLY difference in entire set of envionmental variables between <code>sh</code> and <code>ksh</code> we have installed on Solaris boxen is <code>$ERRNO</code>, <code>$FCEDIT</code>, <code>$LINENO</code>, <code>$PPID</code>, <code>$PS3</code>, <code>$PS4</code>, <code>$RANDOM</code>, <code>$SECONDS</code>, <code>$TMOUT</code>.
</p>
</li>
</ul>
</li>
</ul>
</section>
<section id="answer-2-score-89-1" class="level4">
<h4>Answer 2 (score 89)</h4>
<p><code>ps -p $$</code></p>
<p>should work anywhere that the solutions involving <code>ps -ef</code> and <code>grep</code> do (on any Unix variant which supports <a href="http://www.opengroup.org/onlinepubs/009695399/utilities/ps.html" rel="noreferrer">POSIX options for <code>ps</code></a>) and will not suffer from the false positives introduced by grepping for a sequence of digits which may appear elsewhere.</p>
</section>
<section id="answer-3-score-38-2" class="level4">
<h4>Answer 3 (score 38)</h4>
<p>Try</p>
<div class="sourceCode" id="cb715"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb715-1"><a href="#cb715-1" aria-hidden="true"></a><span class="fu">ps</span> -p <span class="va">$$</span> -oargs=</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb716"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb716-1"><a href="#cb716-1" aria-hidden="true"></a><span class="fu">ps</span> -p <span class="va">$$</span> -ocomm=</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="running-bash-commands-in-python-score-452753-in-2019" class="level3">
<h3>96: Running Bash commands in Python (score <a href="https://stackoverflow.com/q/4256107.html">452753</a> in 2019)</h3>
<section id="question-95" class="level4">
<h4>Question</h4>
<p>On my local machine, I run a python script which contains this line</p>
<div class="sourceCode" id="cb717"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb717-1"><a href="#cb717-1" aria-hidden="true"></a><span class="ex">bashCommand</span> = <span class="st">&quot;cwm --rdf test.rdf --ntriples &gt; test.nt&quot;</span></span>
<span id="cb717-2"><a href="#cb717-2" aria-hidden="true"></a><span class="ex">os.system</span>(bashCommand)</span></code></pre></div>
<p>This works fine.</p>
<p>Then I run the same code on a server and I get the following error message</p>
<div class="sourceCode" id="cb718"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb718-1"><a href="#cb718-1" aria-hidden="true"></a><span class="st">&#39;import site&#39;</span> <span class="ex">failed</span><span class="kw">;</span> <span class="ex">use</span> -v for traceback</span>
<span id="cb718-2"><a href="#cb718-2" aria-hidden="true"></a><span class="ex">Traceback</span> (most recent call last)<span class="bu">:</span></span>
<span id="cb718-3"><a href="#cb718-3" aria-hidden="true"></a><span class="ex">File</span> <span class="st">&quot;/usr/bin/cwm&quot;</span>, line 48, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb718-4"><a href="#cb718-4" aria-hidden="true"></a><span class="ex">from</span> swap import  diag</span>
<span id="cb718-5"><a href="#cb718-5" aria-hidden="true"></a><span class="ex">ImportError</span>: No module named swap</span></code></pre></div>
<p>So what I did then is I inserted a <code>print bashCommand</code> which prints me than the command in the terminal before it runs it with <code>os.system()</code>.</p>
<p>Of course, I get again the error (caused by <code>os.system(bashCommand)</code>) but before that error it prints the command in the terminal. Then I just copied that output and did a copy paste into the terminal and hit enter and it works…</p>
<p>Does anyone have a clue what’s going on?</p>
</section>
<section id="answer-2-score-276" class="level4">
<h4>Answer 2 (score 276)</h4>
<p>Don’t use <code>os.system</code>. It has been deprecated in favor of <a href="http://docs.python.org/library/subprocess.html" rel="noreferrer">subprocess</a>. From the <a href="https://docs.python.org/3/library/subprocess.html" rel="noreferrer">docs</a>: “This module intends to replace several older modules and functions: <code>os.system</code>, <code>os.spawn</code>”.</p>
<p>Like in your case:</p>
<div class="sourceCode" id="cb719"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb719-1"><a href="#cb719-1" aria-hidden="true"></a><span class="ex">bashCommand</span> = <span class="st">&quot;cwm --rdf test.rdf --ntriples &gt; test.nt&quot;</span></span>
<span id="cb719-2"><a href="#cb719-2" aria-hidden="true"></a><span class="ex">import</span> subprocess</span>
<span id="cb719-3"><a href="#cb719-3" aria-hidden="true"></a><span class="ex">process</span> = subprocess.Popen(bashCommand.split(), <span class="va">stdout=</span>subprocess.PIPE)</span>
<span id="cb719-4"><a href="#cb719-4" aria-hidden="true"></a><span class="ex">output</span>, error = process.communicate()</span></code></pre></div>
</section>
<section id="answer-3-score-101" class="level4">
<h4>Answer 3 (score 101)</h4>
<p>To somewhat expand on the earlier answers here, there are a number of details which are commonly overlooked.</p>
<ul>
<li>
Prefer <code>subprocess.run()</code> over <code>subprocess.check_call()</code> and friends over <code>subprocess.call()</code> over <code>subprocess.Popen()</code> over <code>os.system()</code> over <code>os.popen()</code>
</li>
<li>
Understand and probably use <code>text=True</code>, aka <code>universal_newlines=True</code>.
</li>
<li>
Understand the meaning of <code>shell=True</code> or <code>shell=False</code> and how it changes quoting and the availability of shell conveniences.
</li>
<li>
Understand differences between <code>sh</code> and Bash
</li>
<li>
Understand how a subprocess is separate from its parent, and generally cannot change the parent.
</li>
<li>
Avoid running the Python interpreter as a subprocess of Python.
</li>
</ul>
<p>These topics are covered in some more detail below.</p>
<h5>
Prefer <code>subprocess.run()</code> or <code>subprocess.check_call()</code>
</h1>
<p>The <code>subprocess.Popen()</code> function is a low-level workhorse but it is tricky to use correctly and you end up copy/pasting multiple lines of code … which conveniently already exist in the standard library as a set of higher-level wrapper functions for various purposes, which are presented in more detail in the following.</p>
<p>Here’s a paragraph from the <a href="https://docs.python.org/3/library/subprocess.html
#using-the-subprocess-module" rel="noreferrer">documentation</a>:</p>
<blockquote>
The recommended approach to invoking subprocesses is to use the <code>run()</code> function for all use cases it can handle. For more advanced use cases, the underlying <code>Popen</code> interface can be used directly.
</blockquote>
<p>Unfortunately, the availability of these wrapper functions differs between Python versions.</p>
<ul>
<li>
<code>subprocess.run()</code> was officially introduced in Python 3.5. It is meant to replace all of the following.
</li>
<li>
<code>subprocess.check_output()</code> was introduced in Python 2.7 / 3.1. It is basically equivalent to <code>subprocess.run(..., check=True, stdout=subprocess.PIPE).stdout</code>
</li>
<li>
<code>subprocess.check_call()</code> was introduced in Python 2.5. It is basically equivalent to <code>subprocess.run(..., check=True)</code>
</li>
<li>
<code>subprocess.call()</code> was introduced in Python 2.4 in the original <code>subprocess</code> module (<a href="https://www.python.org/dev/peps/pep-0324/" rel="noreferrer">PEP-324</a>). It is basically equivalent to <code>subprocess.run(...).returncode</code>
</li>
</ul>
<h5>
High-level API vs <code>subprocess.Popen()</code>
</h3>
<p>The refactored and extended <code>subprocess.run()</code> is more logical and more versatile than the older legacy functions it replaces. It returns a <a href="https://docs.python.org/3/library/subprocess.html
#subprocess.CompletedProcess" rel="noreferrer"><code>CompletedProcess</code></a> object which has various methods which allow you to retrieve the exit status, the standard output, and a few other results and status indicators from the finished subprocess.</p>
<p><code>subprocess.run()</code> is the way to go if you simply need a program to run and return control to Python. For more involved scenarios (background processes, perhaps with interactive I/O with the Python parent program) you still need to use <code>subprocess.Popen()</code> and take care of all the plumbing yourself. This requires a fairly intricate understanding of all the moving parts and should not be undertaken lightly. The simpler <a href="https://docs.python.org/3/library/subprocess.html
#subprocess.Popen" rel="noreferrer"><code>Popen</code> object</a> represents the (possibly still-running) process which needs to be managed from your code for the remainder of the lifetime of the subprocess.</p>
<p>It should perhaps be emphasized that just <code>subprocess.Popen()</code> merely creates a process. If you leave it at that, you have a subprocess running concurrently alongside with Python, so a “background” process. If it doesn’t need to do input or output or otherwise coordinate with you, it can do useful work in parallel with your Python program.</p>
<h5>
Avoid <code>os.system()</code> and <code>os.popen()</code>
</h3>
<p>Since time eternal (well, since Python 2.5) the <a href="https://docs.python.org/release/2.5.2/lib/os-process.html" rel="noreferrer"><code>os</code> module documentation</a> has contained the recommendation to prefer <code>subprocess</code> over <code>os.system()</code>:</p>
<blockquote>
The <code>subprocess</code> module provides more powerful facilities for spawning new processes and retrieving their results; using that module is preferable to using this function.
</blockquote>
<p>The problems with <code>system()</code> are that it’s obviously system-dependent and doesn’t offer ways to interact with the subprocess. It simply runs, with standard output and standard error outside of Python’s reach. The only information Python receives back is the exit status of the command (zero means success, though the meaning of non-zero values is also somewhat system-dependent).</p>
<p><a href="https://www.python.org/dev/peps/pep-0324/" rel="noreferrer">PEP-324</a> (which was already mentioned above) contains a more detailed rationale for why <code>os.system</code> is problematic and how <code>subprocess</code> attempts to solve those issues.</p>
<p><code>os.popen()</code> used to be even more <a href="https://docs.python.org/2/library/os.html
#os.popen" rel="noreferrer">strongly discouraged</a>:</p>
<blockquote>
<em>Deprecated since version 2.6:</em> This function is obsolete. Use the <code>subprocess</code> module.
</blockquote>
<p>However, since sometime in Python 3, it has been reimplemented to simply use <code>subprocess</code>, and redirects to the <code>subprocess.Popen()</code> documentation for details.</p>
<h5>
Understand and usually use <code>check=True</code>
</h3>
<p>You’ll also notice that <code>subprocess.call()</code> has many of the same limitations as <code>os.system()</code>. In regular use, you should generally check whether the process finished successfully, which <code>subprocess.check_call()</code> and <code>subprocess.check_output()</code> do (where the latter also returns the standard output of the finished subprocess). Similarly, you should usually use <code>check=True</code> with <code>subprocess.run()</code> unless you specifically need to allow the subprocess to return an error status.</p>
<p>In practice, with <code>check=True</code> or <code>subprocess.check_*</code>, Python will throw a <a href="https://docs.python.org/3/library/subprocess.html
#subprocess.CalledProcessError" rel="noreferrer"><code>CalledProcessError</code> exception</a> if the subprocess returns a nonzero exit status.</p>
<p>A common error with <code>subprocess.run()</code> is to omit <code>check=True</code> and be surprised when downstream code fails if the subprocess failed.</p>
<p>On the other hand, a common problem with <code>check_call()</code> and <code>check_output()</code> was that users who blindly used these functions were surprised when the exception was raised e.g. when <code>grep</code> did not find a match. (You should probably replace <code>grep</code> with native Python code anyway, as outlined below.)</p>
<p>All things counted, you need to understand how shell commands return an exit code, and under what conditions they will return a non-zero (error) exit code, and make a conscious decision how exactly it should be handled.</p>
<h5>
Understand and probably use <code>text=True</code> aka <code>universal_newlines=True</code>
</h1>
<p>Since Python 3, strings internal to Python are Unicode strings. But there is no guarantee that a subprocess generates Unicode output, or strings at all.</p>
<p>(If the differences are not immediately obvious, Ned Batchelder’s <a href="https://nedbatchelder.com/text/unipain.html" rel="noreferrer">Pragmatic Unicode</a> is recommended, if not outright obligatory, reading. There is a 36-minute video presentation behind the link if you prefer, though reading the page yourself will probably take significantly less time.)</p>
<p>Deep down, Python has to fetch a <code>bytes</code> buffer and interpret it somehow. If it contains a blob of binary data, it <em>shouldn’t</em> be decoded into a Unicode string, because that’s error-prone and bug-inducing behavior - precisely the sort of pesky behavior which riddled many Python 2 scripts, before there was a way to properly distinguish between encoded text and binary data.</p>
<p>With <code>text=True</code>, you tell Python that you, in fact, expect back textual data in the system’s default encoding, and that it should be decoded into a Python (Unicode) string to the best of Python’s ability (usually UTF-8 on any moderately up to date system, except perhaps Windows?)</p>
<p>If that’s <em>not</em> what you request back, Python will just give you <code>bytes</code> strings in the <code>stdout</code> and <code>stderr</code> strings. Maybe at some later point you <em>do</em> know that they were text strings after all, and you know their encoding. Then, you can decode them.</p>
<div class="sourceCode" id="cb720"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb720-1"><a href="#cb720-1" aria-hidden="true"></a><span class="ex">normal</span> = subprocess.run([external, arg],</span>
<span id="cb720-2"><a href="#cb720-2" aria-hidden="true"></a>    <span class="va">stdout=</span>subprocess.PIPE, <span class="va">stderr=</span>subprocess.PIPE,</span>
<span id="cb720-3"><a href="#cb720-3" aria-hidden="true"></a>    <span class="va">check=</span>True,</span>
<span id="cb720-4"><a href="#cb720-4" aria-hidden="true"></a>    <span class="va">text=</span>True)</span>
<span id="cb720-5"><a href="#cb720-5" aria-hidden="true"></a><span class="ex">print</span>(normal.stdout)</span>
<span id="cb720-6"><a href="#cb720-6" aria-hidden="true"></a></span>
<span id="cb720-7"><a href="#cb720-7" aria-hidden="true"></a><span class="ex">convoluted</span> = subprocess.run([external, arg],</span>
<span id="cb720-8"><a href="#cb720-8" aria-hidden="true"></a>    <span class="va">stdout=</span>subprocess.PIPE, <span class="va">stderr=</span>subprocess.PIPE,</span>
<span id="cb720-9"><a href="#cb720-9" aria-hidden="true"></a>    <span class="va">check=</span>True)</span>
<span id="cb720-10"><a href="#cb720-10" aria-hidden="true"></a></span>
<span id="cb720-11"><a href="#cb720-11" aria-hidden="true"></a><span class="co"># You have to know (or guess) the encoding</span></span>
<span id="cb720-12"><a href="#cb720-12" aria-hidden="true"></a><span class="ex">print</span>(convoluted.stdout.decode(<span class="st">&#39;utf-8&#39;</span>))</span></code></pre></div>
<p>Python 3.7 introduced the shorter and more descriptive and understandable alias <code>text</code> for the keyword argument which was previously somewhat misleadingly called <code>universal_newlines</code>.</p>
<h5>
Understand <code>shell=True</code> vs <code>shell=False</code>
</h1>
<p>With <code>shell=True</code> you pass a single string to your shell, and the shell takes it from there.</p>
<p>With <code>shell=False</code> you pass a list of arguments to the OS, bypassing the shell.</p>
<p>When you don’t have a shell, you save a process and get rid of a <a href="/questions/3172470/actual-meaning-of-shell-true-in-subprocess">fairly substantial amount of hidden complexity, which may or may not harbor bugs or even security problems.</a></p>
<p>On the other hand, when you don’t have a shell, you don’t have redirection, wildcard expansion, job control, and a large number of other shell features.</p>
<p>A common mistake is to use <code>shell=True</code> and then still pass Python a list of tokens, or vice versa. This happens to work in some cases, but is really ill-defined and could break in interesting ways.</p>
<div class="sourceCode" id="cb721"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb721-1"><a href="#cb721-1" aria-hidden="true"></a></span>
<span id="cb721-2"><a href="#cb721-2" aria-hidden="true"></a><span class="co"># XXX AVOID THIS </span><span class="al">BUG</span></span>
<span id="cb721-3"><a href="#cb721-3" aria-hidden="true"></a><span class="ex">buggy</span> = subprocess.run(<span class="st">&#39;dig +short stackoverflow.com&#39;</span>)</span>
<span id="cb721-4"><a href="#cb721-4" aria-hidden="true"></a></span>
<span id="cb721-5"><a href="#cb721-5" aria-hidden="true"></a></span>
<span id="cb721-6"><a href="#cb721-6" aria-hidden="true"></a><span class="co"># XXX AVOID THIS </span><span class="al">BUG</span><span class="co"> TOO</span></span>
<span id="cb721-7"><a href="#cb721-7" aria-hidden="true"></a><span class="ex">broken</span> = subprocess.run([<span class="st">&#39;dig&#39;</span>, <span class="st">&#39;+short&#39;</span>, <span class="st">&#39;stackoverflow.com&#39;</span>],</span>
<span id="cb721-8"><a href="#cb721-8" aria-hidden="true"></a>    <span class="va">shell=</span>True)</span>
<span id="cb721-9"><a href="#cb721-9" aria-hidden="true"></a></span>
<span id="cb721-10"><a href="#cb721-10" aria-hidden="true"></a></span>
<span id="cb721-11"><a href="#cb721-11" aria-hidden="true"></a><span class="co"># XXX DEFINITELY AVOID THIS</span></span>
<span id="cb721-12"><a href="#cb721-12" aria-hidden="true"></a><span class="ex">pathological</span> = subprocess.run([<span class="st">&#39;dig +short stackoverflow.com&#39;</span>],</span>
<span id="cb721-13"><a href="#cb721-13" aria-hidden="true"></a>    <span class="va">shell=</span>True)</span>
<span id="cb721-14"><a href="#cb721-14" aria-hidden="true"></a></span>
<span id="cb721-15"><a href="#cb721-15" aria-hidden="true"></a><span class="ex">correct</span> = subprocess.run([<span class="st">&#39;dig&#39;</span>, <span class="st">&#39;+short&#39;</span>, <span class="st">&#39;stackoverflow.com&#39;</span>],</span>
<span id="cb721-16"><a href="#cb721-16" aria-hidden="true"></a></span>
<span id="cb721-17"><a href="#cb721-17" aria-hidden="true"></a><span class="co"># Probably don&#39;t forget these, too</span></span>
<span id="cb721-18"><a href="#cb721-18" aria-hidden="true"></a>    <span class="va">check=</span>True, <span class="va">text=</span>True)</span>
<span id="cb721-19"><a href="#cb721-19" aria-hidden="true"></a></span>
<span id="cb721-20"><a href="#cb721-20" aria-hidden="true"></a></span>
<span id="cb721-21"><a href="#cb721-21" aria-hidden="true"></a><span class="co"># XXX Probably better avoid shell=True</span></span>
<span id="cb721-22"><a href="#cb721-22" aria-hidden="true"></a></span>
<span id="cb721-23"><a href="#cb721-23" aria-hidden="true"></a><span class="co"># but this is nominally correct</span></span>
<span id="cb721-24"><a href="#cb721-24" aria-hidden="true"></a><span class="ex">fixed_but_fugly</span> = subprocess.run(<span class="st">&#39;dig +short stackoverflow.com&#39;</span>,</span>
<span id="cb721-25"><a href="#cb721-25" aria-hidden="true"></a>    <span class="va">shell=</span>True,</span>
<span id="cb721-26"><a href="#cb721-26" aria-hidden="true"></a></span>
<span id="cb721-27"><a href="#cb721-27" aria-hidden="true"></a><span class="co"># Probably don&#39;t forget these, too</span></span>
<span id="cb721-28"><a href="#cb721-28" aria-hidden="true"></a>    <span class="va">check=</span>True, <span class="va">text=</span>True)</span></code></pre></div>
<p>The common retort “but it works for me” is not a useful rebuttal unless you understand exactly under what circumstances it could stop working.</p>
<h5>
Refactoring Example
</h3>
<p>Very often, the features of the shell can be replaced with native Python code. Simple Awk or <code>sed</code> scripts should probably simply be translated to Python instead.</p>
<p>To partially illustrate this, here is a typical but slightly silly example which involves many shell features.</p>
<div class="sourceCode" id="cb722"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb722-1"><a href="#cb722-1" aria-hidden="true"></a><span class="ex">cmd</span> = <span class="st">&#39;&#39;&#39;while read -r x;</span></span>
<span id="cb722-2"><a href="#cb722-2" aria-hidden="true"></a><span class="st">   do ping -c 3 &quot;$x&quot; | grep &#39;</span>round-trip min/avg/max<span class="st">&#39;</span></span>
<span id="cb722-3"><a href="#cb722-3" aria-hidden="true"></a><span class="st">   done &lt;hosts.txt&#39;&#39;&#39;</span></span>
<span id="cb722-4"><a href="#cb722-4" aria-hidden="true"></a></span>
<span id="cb722-5"><a href="#cb722-5" aria-hidden="true"></a></span>
<span id="cb722-6"><a href="#cb722-6" aria-hidden="true"></a><span class="co"># Trivial but horrible</span></span>
<span id="cb722-7"><a href="#cb722-7" aria-hidden="true"></a><span class="ex">results</span> = subprocess.run(</span>
<span id="cb722-8"><a href="#cb722-8" aria-hidden="true"></a>    <span class="ex">cmd</span>, shell=True, universal_newlines=True, check=True)</span>
<span id="cb722-9"><a href="#cb722-9" aria-hidden="true"></a><span class="ex">print</span>(results.stdout)</span>
<span id="cb722-10"><a href="#cb722-10" aria-hidden="true"></a></span>
<span id="cb722-11"><a href="#cb722-11" aria-hidden="true"></a></span>
<span id="cb722-12"><a href="#cb722-12" aria-hidden="true"></a><span class="co"># Reimplement with shell=False</span></span>
<span id="cb722-13"><a href="#cb722-13" aria-hidden="true"></a><span class="ex">with</span> open(<span class="st">&#39;hosts.txt&#39;</span>) <span class="fu">as</span> hosts:</span>
<span id="cb722-14"><a href="#cb722-14" aria-hidden="true"></a>    <span class="kw">for</span> <span class="ex">host</span> in hosts:</span>
<span id="cb722-15"><a href="#cb722-15" aria-hidden="true"></a>        <span class="ex">host</span> = host.rstrip(<span class="st">&#39;\n&#39;</span>)</span>
<span id="cb722-16"><a href="#cb722-16" aria-hidden="true"></a><span class="co"># drop newline</span></span>
<span id="cb722-17"><a href="#cb722-17" aria-hidden="true"></a>        <span class="fu">ping</span> = subprocess.run(</span>
<span id="cb722-18"><a href="#cb722-18" aria-hidden="true"></a>             [<span class="st">&#39;ping&#39;</span>, <span class="st">&#39;-c&#39;</span>, <span class="st">&#39;3&#39;</span>, <span class="ex">host</span>],</span>
<span id="cb722-19"><a href="#cb722-19" aria-hidden="true"></a>             <span class="va">text=</span>True,</span>
<span id="cb722-20"><a href="#cb722-20" aria-hidden="true"></a>             <span class="va">stdout=</span>subprocess.PIPE,</span>
<span id="cb722-21"><a href="#cb722-21" aria-hidden="true"></a>             <span class="va">check=</span>True)</span>
<span id="cb722-22"><a href="#cb722-22" aria-hidden="true"></a>        <span class="kw">for</span> <span class="ex">line</span> in ping.stdout.split(<span class="st">&#39;\n&#39;</span>)<span class="bu">:</span></span>
<span id="cb722-23"><a href="#cb722-23" aria-hidden="true"></a>             <span class="kw">if</span> <span class="st">&#39;round-trip min/avg/max&#39;</span> <span class="kw">in</span> <span class="ex">line</span>:</span>
<span id="cb722-24"><a href="#cb722-24" aria-hidden="true"></a>                 <span class="ex">print</span>(<span class="st">&#39;{}: {}&#39;</span>.format(host, line))</span></code></pre></div>
<p>Some things to note here:</p>
<ul>
<li>
With <code>shell=False</code> you don’t need the quoting that the shell requires around strings. Putting quotes anyway is probably an error.
</li>
<li>
It often makes sense to run as little code as possible in a subprocess. This gives you more control over execution from within your Python code.
</li>
<li>
Having said that, complex shell pipelines are tedious and sometimes challenging to reimplement in Python.
</li>
</ul>
<p>The refactored code also illustrates just how much the shell really does for you with a very terse syntax – for better or for worse. Python says <em>explicit is better than implicit</em> but the Python code <em>is</em> rather verbose and arguably looks more complex than this really is. On the other hand, it offers a number of points where you can grab control in the middle of something else, as trivially exemplified by the enhancement that we can easily include the host name along with the shell command output. (This is by no means challenging to do in the shell, either, but at the expense of yet another diversion and perhaps another process.)</p>
<h5>
Common Shell Constructs
</h3>
<p>For completeness, here are brief explanations of some of these shell features, and some notes on how they can perhaps be replaced with native Python facilities.</p>
<ul>
<li>
Globbing aka wildcard expansion can be replaced with <code>glob.glob()</code> or very often with simple Python string comparisons like <code>for file in os.listdir('.'): if not file.endswith('.png'): continue</code>. Bash has various other expansion facilities like <code>.{png,jpg}</code> brace expansion and <code>{1..100}</code> as well as tilde expansion (<code>~</code> expands to your home directory, and more generally <code>~account</code> to the home directory of another user)
</li>
<li>
Shell variables like <code>$SHELL</code> or <code>$my_exported_var</code> can sometimes simply be replaced with Python variables. Exported shell variables are available as e.g. <code>os.environ['SHELL']</code> (the meaning of <code>export</code> is to make the variable available to subprocesses – a variable which is not available to subprocesses will obviously not be available to Python running as a subprocess of the shell, or vice versa. The <code>env=</code> keyword argument to <code>subprocess</code> methods allows you to define the environment of the subprocess as a dictionary, so that’s one way to make a Python variable visible to a subprocess). With <code>shell=False</code> you will need to understand how to remove any quotes; for example, <code>cd "$HOME"</code> is equivalent to <code>os.chdir(os.environ['HOME'])</code> without quotes around the directory name. (Very often <code>cd</code> is not useful or necessary anyway, and many beginners omit the double quotes around the variable and get away with it <a href="/questions/10067266/when-to-wrap-quotes-around-a-shell-variable">until one day …</a>)
</li>
<li>
Redirection allows you to read from a file as your standard input, and write your standard output to a file. <code>grep 'foo' &amp;lt;inputfile &amp;gt;outputfile</code> opens <code>outputfile</code> for writing and <code>inputfile</code> for reading, and passes its contents as standard input to <code>grep</code>, whose standard output then lands in <code>outputfile</code>. This is not generally hard to replace with native Python code.
</li>
<li>
Pipelines are a form of redirection. <code>echo foo | nl</code> runs two subprocesses, where the standard output of <code>echo</code> is the standard input of <code>nl</code> (on the OS level, in Unix-like systems, this is a single file handle). If you cannot replace one or both ends of the pipeline with native Python code, perhaps think about using a shell after all, especially if the pipeline has more than two or three processes (though look at the <a href="https://docs.python.org/3.7/library/pipes.html" rel="noreferrer"><code>pipes</code> module in the Python standard library</a> or a number of more modern and versatile third-party competitors).
</li>
<li>
Job control lets you interrupt jobs, run them in the background, return them to the foreground, etc. The basic Unix signals to stop and continue a process are of course available from Python, too. But jobs are a higher-level abstraction in the shell which involve process groups etc which you have to understand if you want to do something like this from Python.
</li>
</ul>
<h5>
Understand differences between <code>sh</code> and Bash
</h1>
<p><code>subprocess</code> runs your shell commands with <code>/bin/sh</code> unless you specifically request otherwise (except of course on Windows, where it uses the value of the <code>COMSPEC</code> variable). This means that <a href="/a/42666651/874188">various Bash-only features like arrays, <code>[[</code> etc</a> are not available.</p>
<p>
If you need to use Bash-only syntax, you can pass in the path to the shell as <code>executable='/bin/bash'</code> (where of course if your Bash is installed somewhere else, you need to adjust the path).
</p>
<div class="sourceCode" id="cb723"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb723-1"><a href="#cb723-1" aria-hidden="true"></a><span class="ex">subprocess.run</span>(<span class="st">&#39;&#39;&#39;</span></span>
<span id="cb723-2"><a href="#cb723-2" aria-hidden="true"></a></span>
<span id="cb723-3"><a href="#cb723-3" aria-hidden="true"></a><span class="st"># This for loop syntax is Bash only</span></span>
<span id="cb723-4"><a href="#cb723-4" aria-hidden="true"></a><span class="st">    for((i=1;i&lt;=$</span></span>
<span id="cb723-5"><a href="#cb723-5" aria-hidden="true"></a><span class="st">#;i++)); do</span></span>
<span id="cb723-6"><a href="#cb723-6" aria-hidden="true"></a></span>
<span id="cb723-7"><a href="#cb723-7" aria-hidden="true"></a><span class="st"># Arrays are Bash-only</span></span>
<span id="cb723-8"><a href="#cb723-8" aria-hidden="true"></a><span class="st">        array[i]+=123</span></span>
<span id="cb723-9"><a href="#cb723-9" aria-hidden="true"></a><span class="st">    done&#39;&#39;&#39;</span>,</span>
<span id="cb723-10"><a href="#cb723-10" aria-hidden="true"></a>    <span class="va">shell=</span>True, <span class="va">check=</span>True,</span>
<span id="cb723-11"><a href="#cb723-11" aria-hidden="true"></a>    <span class="va">executable=</span><span class="st">&#39;/bin/bash&#39;</span>)</span></code></pre></div>
<h5>
A <code>subprocess</code> is separate from its parent, and cannot change it
</h1>
<p>A somewhat common mistake is doing something like</p>
<div class="sourceCode" id="cb724"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb724-1"><a href="#cb724-1" aria-hidden="true"></a><span class="ex">subprocess.run</span>(<span class="st">&#39;foo=bar&#39;</span>, shell=True)</span>
<span id="cb724-2"><a href="#cb724-2" aria-hidden="true"></a><span class="ex">subprocess.run</span>(<span class="st">&#39;echo &quot;$foo&quot;&#39;</span>, shell=True)</span>
<span id="cb724-3"><a href="#cb724-3" aria-hidden="true"></a><span class="co"># Doesn&#39;t work</span></span></code></pre></div>
<p>which aside from the lack of elegance also betrays a fundamental lack of understanding of the “sub” part of the name “subprocess”.</p>
<p>A child process runs completely separate from Python, and when it finishes, Python has no idea what it did (apart from the vague indicators that it can infer from the exit status and output from the child process). A child generally cannot change the parent’s environment; it cannot set a variable, change the working directory, or, in so many words, communicate with its parent without cooperation from the parent.</p>
<p>The immediate fix in this particular case is to run both commands in a single subprocess;</p>
<div class="sourceCode" id="cb725"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb725-1"><a href="#cb725-1" aria-hidden="true"></a><span class="ex">subprocess.run</span>(<span class="st">&#39;foo=bar; echo &quot;$foo&quot;&#39;</span>, shell=True)</span></code></pre></div>
<p>though obviously this particular use case doesn’t require the shell at all. Remember, you can manipulate the environment of the current process (and thus also its children) via</p>
<div class="sourceCode" id="cb726"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb726-1"><a href="#cb726-1" aria-hidden="true"></a><span class="ex">os.environ</span>[<span class="st">&#39;foo&#39;</span>] = <span class="st">&#39;bar&#39;</span></span></code></pre></div>
<p>or pass an environment setting to a child process with</p>
<div class="sourceCode" id="cb727"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb727-1"><a href="#cb727-1" aria-hidden="true"></a><span class="ex">subprocess.run</span>(<span class="st">&#39;echo &quot;$foo&quot;&#39;</span>, shell=True, env={<span class="st">&#39;foo&#39;</span>: <span class="st">&#39;bar&#39;</span>})</span></code></pre></div>
<p>(not to mention the obvious refactoring <code>subprocess.run(['echo', 'bar'])</code>; but <code>echo</code> is a poor example of something to run in a subprocess in the first place, of course).</p>
<h5>
Don’t run Python from Python
</h1>
<p>This is slightly dubious advice; there are certainly situations where it does make sense or is even an absolute requirement to run the Python interpreter as a subprocess from a Python script. But very frequently, the correct approach is simply to <code>import</code> the other Python module into your calling script and call its functions directly.</p>
<p>If the other Python script is under your control, and it isn’t a module, consider <a href="/questions/15746675/how-to-write-a-python-module-package">turning it into one</a>. (This answer is too long already so I will not delve into details here.)</p>
<p>If you need parallelism, you can run Python functions in subprocesses with the <a href="https://docs.python.org/3/library/multiprocessing.html?highlight=multiprocessing" rel="noreferrer"><code>multiprocessing</code> module.</a> There is also <a href="https://docs.python.org/3/library/threading.html
#module-threading" rel="noreferrer"><code>threading</code></a> which runs multiple tasks in a single process (which is more lightweight and gives you more control, but also more constrained in that threads within a process are tightly coupled, and bound to a single <a href="https://docs.python.org/3/glossary.html#term-global-interpreter-lock" rel="noreferrer">GIL</a>.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="pipe-tofrom-the-clipboard-in-bash-script-score-452594-in-2018" class="level3">
<h3>97: Pipe to/from the clipboard in Bash script (score <a href="https://stackoverflow.com/q/749544.html">452594</a> in 2018)</h3>
<section id="question-96" class="level4">
<h4>Question</h4>
<p>Is it possible to pipe to/from the clipboard in Bash?</p>
<p>Whether it is piping to/from a device handle or using an auxiliary application, I can’t find anything.</p>
<p>For example, if <code>/dev/clip</code> was a device linking to the clipboard we could do:</p>
<div class="sourceCode" id="cb728"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb728-1"><a href="#cb728-1" aria-hidden="true"></a><span class="fu">cat</span> /dev/clip</span>
<span id="cb728-2"><a href="#cb728-2" aria-hidden="true"></a><span class="co"># Dump the contents of the clipboard</span></span>
<span id="cb728-3"><a href="#cb728-3" aria-hidden="true"></a><span class="fu">cat</span> foo <span class="op">&gt;</span> /dev/clip</span>
<span id="cb728-4"><a href="#cb728-4" aria-hidden="true"></a><span class="co"># Dump the contents of &quot;foo&quot; into the clipboard</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-793" class="level4">
<h4>Answer accepted (score 793)</h4>
<p>There’s a wealth of clipboards you could be dealing with. I expect you’re probably a Linux user who wants to put stuff in the X Windows primary clipboard. Usually, the clipboard you want to talk to has a utility that lets you talk to it.</p>
<p>In the case of X, there’s <code>xclip</code> (and others). <code>xclip -selection c</code> will send data to the clipboard that works with <kbd>Ctrl + C</kbd>, <kbd>Ctrl + V</kbd> in most applications.</p>
<p>If you’re on Mac OS X, there’s <code>pbcopy</code>.</p>
<p>If you’re in Linux terminal mode (no X) then look into <code>gpm</code> or <a href="http://www.gnu.org/software/screen/" rel="noreferrer">screen</a> which has a clipboard. Try the <code>screen</code> command <code>readreg</code>.</p>
<p>Under Windows 10+ or cygwin, use <code>/dev/clipboard</code> or <code>clip</code>.</p>
</section>
<section id="answer-2-score-257-1" class="level4">
<h4>Answer 2 (score 257)</h4>
<p>
Make sure you are using alias <code>xclip="xclip -selection c"</code> otherwise you can’t just use to <kbd>Ctrl</kbd>+<kbd>v</kbd> to paste it back in a different place.
</p>
<div class="sourceCode" id="cb729"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb729-1"><a href="#cb729-1" aria-hidden="true"></a><span class="bu">echo</span> test <span class="kw">|</span> <span class="ex">xclip</span>    </span></code></pre></div>
<p><kbd>Ctrl</kbd>+<kbd>v</kbd> <code>=== test</code></p>
</section>
<section id="answer-3-score-165" class="level4">
<h4>Answer 3 (score 165)</h4>
<h5>
Install
</h1>
<div class="sourceCode" id="cb730"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb730-1"><a href="#cb730-1" aria-hidden="true"></a></span>
<span id="cb730-2"><a href="#cb730-2" aria-hidden="true"></a><span class="co"># You can install xclip using `apt-get`</span></span>
<span id="cb730-3"><a href="#cb730-3" aria-hidden="true"></a><span class="ex">apt-get</span> install xclip</span>
<span id="cb730-4"><a href="#cb730-4" aria-hidden="true"></a></span>
<span id="cb730-5"><a href="#cb730-5" aria-hidden="true"></a></span>
<span id="cb730-6"><a href="#cb730-6" aria-hidden="true"></a><span class="co"># or `pacman`</span></span>
<span id="cb730-7"><a href="#cb730-7" aria-hidden="true"></a><span class="ex">pacman</span> -S xclip</span>
<span id="cb730-8"><a href="#cb730-8" aria-hidden="true"></a></span>
<span id="cb730-9"><a href="#cb730-9" aria-hidden="true"></a></span>
<span id="cb730-10"><a href="#cb730-10" aria-hidden="true"></a><span class="co"># or `dnf`</span></span>
<span id="cb730-11"><a href="#cb730-11" aria-hidden="true"></a><span class="ex">dnf</span> install xclip</span></code></pre></div>
<p>If you do not have access to <code>apt-get</code> nor <code>pacman</code>, nor <code>dnf</code>, the sources are available on <a href="http://sourceforge.net/projects/xclip/" rel="noreferrer">sourceforge</a>.</p>
<h5>
Set-up
</h1>
<h5>
Bash
</h2>
<p>In <code>~/.bash_aliases</code>, add:</p>
<div class="sourceCode" id="cb731"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb731-1"><a href="#cb731-1" aria-hidden="true"></a><span class="bu">alias</span> setclip=<span class="st">&quot;xclip -selection c&quot;</span></span>
<span id="cb731-2"><a href="#cb731-2" aria-hidden="true"></a><span class="bu">alias</span> getclip=<span class="st">&quot;xclip -selection c -o&quot;</span></span></code></pre></div>
<p><em>Do not forget to load your new configuration using <code>. ~/.bash_aliases</code> or by restarting your profile.</em></p>
<h5>
Fish
</h2>
<p>In <code>~/.config/fish/config.fish</code>, add:</p>
<div class="sourceCode" id="cb732"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb732-1"><a href="#cb732-1" aria-hidden="true"></a><span class="ex">abbr</span> setclip <span class="st">&quot;xclip -selection c&quot;</span></span>
<span id="cb732-2"><a href="#cb732-2" aria-hidden="true"></a><span class="ex">abbr</span> getclip <span class="st">&quot;xclip -selection c -o&quot;</span></span></code></pre></div>
<p><em>Do not forget to restart your fish instance by restarting your terminal for changes to apply.</em></p>
<h5>
Usage
</h1>
<p>You can now use <code>setclip</code> and <code>getclip</code>, e.g:</p>
<div class="sourceCode" id="cb733"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb733-1"><a href="#cb733-1" aria-hidden="true"></a>$ <span class="bu">echo</span> foo <span class="kw">|</span> <span class="ex">setclip</span></span>
<span id="cb733-2"><a href="#cb733-2" aria-hidden="true"></a>$ <span class="ex">getclip</span></span>
<span id="cb733-3"><a href="#cb733-3" aria-hidden="true"></a><span class="ex">foo</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-use-shell-variables-in-an-awk-script-score-452441-in-2018" class="level3">
<h3>98: How do I use shell variables in an awk script? (score <a href="https://stackoverflow.com/q/19075671.html">452441</a> in 2018)</h3>
<section id="question-97" class="level4">
<h4>Question</h4>
<p>I found some ways to pass external shell variables to an <code>awk</code> script, but I’m confused about <code>'</code> and <code>"</code>.</p>
<p>First, I tried with a shell script:</p>
<div class="sourceCode" id="cb734"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb734-1"><a href="#cb734-1" aria-hidden="true"></a>$ <span class="va">v=</span>123test</span>
<span id="cb734-2"><a href="#cb734-2" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="va">$v</span></span>
<span id="cb734-3"><a href="#cb734-3" aria-hidden="true"></a><span class="ex">123test</span></span>
<span id="cb734-4"><a href="#cb734-4" aria-hidden="true"></a>$ <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$v</span><span class="st">&quot;</span></span>
<span id="cb734-5"><a href="#cb734-5" aria-hidden="true"></a><span class="ex">123test</span></span></code></pre></div>
<p>Then tried awk:</p>
<div class="sourceCode" id="cb735"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb735-1"><a href="#cb735-1" aria-hidden="true"></a>$ <span class="fu">awk</span> <span class="st">&#39;BEGIN{print &quot;&#39;</span><span class="va">$v</span><span class="st">&#39;&quot;}&#39;</span></span>
<span id="cb735-2"><a href="#cb735-2" aria-hidden="true"></a>$ <span class="ex">123test</span></span>
<span id="cb735-3"><a href="#cb735-3" aria-hidden="true"></a>$ <span class="fu">awk</span> <span class="st">&#39;BEGIN{print &#39;&quot;</span><span class="va">$v</span><span class="st">&quot;&#39;}&#39;</span></span>
<span id="cb735-4"><a href="#cb735-4" aria-hidden="true"></a>$ <span class="ex">123</span></span></code></pre></div>
<p>Why is the difference?</p>
<p>Lastly I tried this:</p>
<div class="sourceCode" id="cb736"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb736-1"><a href="#cb736-1" aria-hidden="true"></a>$ <span class="fu">awk</span> <span class="st">&#39;BEGIN{print &quot; &#39;</span><span class="va">$v</span><span class="st">&#39; &quot;}&#39;</span></span>
<span id="cb736-2"><a href="#cb736-2" aria-hidden="true"></a>$  <span class="ex">123test</span></span>
<span id="cb736-3"><a href="#cb736-3" aria-hidden="true"></a>$ <span class="fu">awk</span> <span class="st">&#39;BEGIN{print &#39;</span> <span class="st">&quot;</span><span class="va">$v</span><span class="st">&quot;</span> <span class="st">&#39;}&#39;</span></span>
<span id="cb736-4"><a href="#cb736-4" aria-hidden="true"></a><span class="ex">awk</span>: cmd. line:1: BEGIN{print</span>
<span id="cb736-5"><a href="#cb736-5" aria-hidden="true"></a><span class="ex">awk</span>: cmd. line:1:             ^ unexpected newline or end of string </span></code></pre></div>
<p>I’m confused about this.</p>
</section>
<section id="answer-accepted-score-437" class="level4">
<h4>Answer accepted (score 437)</h4>
<blockquote>
<h5>
Getting shell variables into <code>awk</code>
</h1>
may be done in several ways. Some are better than others. This should cover most of them. If you have a comment, please leave below.<br />

</blockquote>
<hr>
<h5>
Using <code>-v</code> (The best way, most portable)
</h2>
<p>Use the <code>-v</code> option: (P.S. use a space after <code>-v</code> or it will be less portable. E.g., <code>awk -v var=</code> not <code>awk -vvar=</code>)</p>
<div class="sourceCode" id="cb737"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb737-1"><a href="#cb737-1" aria-hidden="true"></a><span class="va">variable=</span><span class="st">&quot;line one\nline two&quot;</span></span>
<span id="cb737-2"><a href="#cb737-2" aria-hidden="true"></a><span class="fu">awk</span> -v var=<span class="st">&quot;</span><span class="va">$variable</span><span class="st">&quot;</span> <span class="st">&#39;BEGIN {print var}&#39;</span></span>
<span id="cb737-3"><a href="#cb737-3" aria-hidden="true"></a><span class="ex">line</span> one</span>
<span id="cb737-4"><a href="#cb737-4" aria-hidden="true"></a><span class="ex">line</span> two</span></code></pre></div>
<p>This should be compatible with most <code>awk</code>, and the variable is available in the <code>BEGIN</code> block as well:</p>
<p>If you have multiple variables:</p>
<div class="sourceCode" id="cb738"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb738-1"><a href="#cb738-1" aria-hidden="true"></a><span class="fu">awk</span> -v a=<span class="st">&quot;</span><span class="va">$var1</span><span class="st">&quot;</span> -v b=<span class="st">&quot;</span><span class="va">$var2</span><span class="st">&quot;</span> <span class="st">&#39;BEGIN {print a,b}&#39;</span></span></code></pre></div>
<p><strong>Warning</strong>. As Ed Morton writes, escape sequences will be interpreted so <code>\t</code> becomes a real <code>tab</code> and not <code>\t</code> if that is what you search for. Can be solved by using <code>ENVIRON[]</code> or access it via <code>ARGV[]</code></p>
<p><strong>PS</strong> If you like three vertical bar as separator <code>|||</code>, it can’t be escaped, so use <code>-F"[|][|][|]"</code></p>
<blockquote>
Example on getting data from a program/function inn to <code>awk</code> (here date is used)
</blockquote>
<div class="sourceCode" id="cb739"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb739-1"><a href="#cb739-1" aria-hidden="true"></a><span class="fu">awk</span> -v time=<span class="st">&quot;</span><span class="va">$(</span><span class="fu">date</span> +<span class="st">&quot;%F %H:%M&quot;</span> -d <span class="st">&#39;-1 minute&#39;</span><span class="va">)</span><span class="st">&quot;</span> <span class="st">&#39;BEGIN {print time}&#39;</span></span></code></pre></div>
<hr>
<h5>
Variable after code block
</h2>
<p>Here we get the variable after the <code>awk</code> code. This will work fine as long as you do not need the variable in the <code>BEGIN</code> block:</p>
<div class="sourceCode" id="cb740"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb740-1"><a href="#cb740-1" aria-hidden="true"></a><span class="va">variable=</span><span class="st">&quot;line one\nline two&quot;</span></span>
<span id="cb740-2"><a href="#cb740-2" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;input data&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print var}&#39;</span> var=<span class="st">&quot;</span><span class="va">${variable}</span><span class="st">&quot;</span></span>
<span id="cb740-3"><a href="#cb740-3" aria-hidden="true"></a><span class="ex">or</span></span>
<span id="cb740-4"><a href="#cb740-4" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;{print var}&#39;</span> var=<span class="st">&quot;</span><span class="va">${variable}</span><span class="st">&quot;</span> file</span></code></pre></div>
<p>
This also works with multiple variables <code>awk '{print a,b,$0}' a="$var1" b="$var2" file</code>
</p>
<p>Using variable this way does not work in <code>BEGIN</code> block:</p>
<div class="sourceCode" id="cb741"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb741-1"><a href="#cb741-1" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;input data&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;BEGIN {print var}&#39;</span> var=<span class="st">&quot;</span><span class="va">${variable}</span><span class="st">&quot;</span></span></code></pre></div>
<hr>
<h5>
Here-string
</h2>
<p>Variable can also be added to <code>awk</code> using a <a href="http://en.wikipedia.org/wiki/Here_document" rel="noreferrer">here-string</a> from shells that support them (including Bash):</p>
<div class="sourceCode" id="cb742"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb742-1"><a href="#cb742-1" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;{print $0}&#39;</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;</span><span class="va">$variable</span><span class="st">&quot;</span></span>
<span id="cb742-2"><a href="#cb742-2" aria-hidden="true"></a><span class="bu">test</span></span></code></pre></div>
<p>This is the same as:</p>
<div class="sourceCode" id="cb743"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb743-1"><a href="#cb743-1" aria-hidden="true"></a><span class="bu">printf</span> <span class="st">&#39;%s&#39;</span> <span class="st">&quot;</span><span class="va">$variable</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;{print $0}&#39;</span></span></code></pre></div>
<p>P.S. this treats the variable as a file input.</p>
<hr>
<h5>
<code>ENVIRON</code> input
</h2>
<p>
As TrueY writes, you can use the <code>ENVIRON</code> to print <strong>Environment Variables</strong>. Setting a variable before running AWK, you can print it out like this:
</p>
<div class="sourceCode" id="cb744"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb744-1"><a href="#cb744-1" aria-hidden="true"></a><span class="va">X=</span>MyVar</span>
<span id="cb744-2"><a href="#cb744-2" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;BEGIN{print ENVIRON[&quot;X&quot;],ENVIRON[&quot;SHELL&quot;]}&#39;</span></span>
<span id="cb744-3"><a href="#cb744-3" aria-hidden="true"></a><span class="ex">MyVar</span> /bin/bash</span></code></pre></div>
<hr>
<h5>
<code>ARGV</code> input
</h2>
<p>As Steven Penny writes, you can use <code>ARGV</code> to get the data into awk:</p>
<div class="sourceCode" id="cb745"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb745-1"><a href="#cb745-1" aria-hidden="true"></a><span class="va">v=</span><span class="st">&quot;my data&quot;</span></span>
<span id="cb745-2"><a href="#cb745-2" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;BEGIN {print ARGV[1]}&#39;</span> <span class="st">&quot;</span><span class="va">$v</span><span class="st">&quot;</span></span>
<span id="cb745-3"><a href="#cb745-3" aria-hidden="true"></a><span class="ex">my</span> data</span></code></pre></div>
<p>To get the data into the code itself, not just the BEGIN:</p>
<div class="sourceCode" id="cb746"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb746-1"><a href="#cb746-1" aria-hidden="true"></a><span class="va">v=</span><span class="st">&quot;my data&quot;</span></span>
<span id="cb746-2"><a href="#cb746-2" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;test&quot;</span> <span class="kw">|</span> <span class="fu">awk</span> <span class="st">&#39;BEGIN{var=ARGV[1];ARGV[1]=&quot;&quot;} {print var, $0}&#39;</span> <span class="st">&quot;</span><span class="va">$v</span><span class="st">&quot;</span></span>
<span id="cb746-3"><a href="#cb746-3" aria-hidden="true"></a><span class="ex">my</span> data test</span></code></pre></div>
<hr>
<h5>
Variable within the code: USE WITH CAUTION
</h2>
<p>You can use a variable within the <code>awk</code> code, but it’s messy and hard to read, and as <code>Charles Duffy</code> points out, this version may also be a victim of code injection. If someone adds bad stuff to the variable, it will be executed as part of the <code>awk</code> code.</p>
<p>This works by extracting the variable within the code, so it becomes a part of it.</p>
<p>If you want to make an <code>awk</code> that changes dynamically with use of variables, you can do it this way, but DO NOT use it for normal variables.</p>
<div class="sourceCode" id="cb747"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb747-1"><a href="#cb747-1" aria-hidden="true"></a><span class="va">variable=</span><span class="st">&quot;line one\nline two&quot;</span></span>
<span id="cb747-2"><a href="#cb747-2" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;BEGIN {print &quot;&#39;&quot;</span><span class="va">$variable</span><span class="st">&quot;&#39;&quot;}&#39;</span></span>
<span id="cb747-3"><a href="#cb747-3" aria-hidden="true"></a><span class="ex">line</span> one</span>
<span id="cb747-4"><a href="#cb747-4" aria-hidden="true"></a><span class="ex">line</span> two</span></code></pre></div>
<p>Here is an example of code injection:</p>
<div class="sourceCode" id="cb748"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb748-1"><a href="#cb748-1" aria-hidden="true"></a><span class="va">variable=</span><span class="st">&#39;line one\nline two&quot; ; for (i=1;i&lt;=1000;++i) print i&quot;&#39;</span></span>
<span id="cb748-2"><a href="#cb748-2" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;BEGIN {print &quot;&#39;&quot;</span><span class="va">$variable</span><span class="st">&quot;&#39;&quot;}&#39;</span></span>
<span id="cb748-3"><a href="#cb748-3" aria-hidden="true"></a><span class="ex">line</span> one</span>
<span id="cb748-4"><a href="#cb748-4" aria-hidden="true"></a><span class="ex">line</span> two</span>
<span id="cb748-5"><a href="#cb748-5" aria-hidden="true"></a><span class="ex">1</span></span>
<span id="cb748-6"><a href="#cb748-6" aria-hidden="true"></a><span class="ex">2</span></span>
<span id="cb748-7"><a href="#cb748-7" aria-hidden="true"></a><span class="ex">3</span></span>
<span id="cb748-8"><a href="#cb748-8" aria-hidden="true"></a><span class="ex">.</span></span>
<span id="cb748-9"><a href="#cb748-9" aria-hidden="true"></a><span class="ex">.</span></span>
<span id="cb748-10"><a href="#cb748-10" aria-hidden="true"></a><span class="ex">1000</span></span></code></pre></div>
<p>You can add lots of commands to <code>awk</code> this way. Even make it crash with non valid commands.</p>
<hr>
<h5>
Extra info:
</h2>
<h5>
Use of double quote
</h3>
<p>
It’s always good to double quote variable <code>"$variable"</code><br> If not, multiple lines will be added as a long single line.
</p>
<p>Example:</p>
<div class="sourceCode" id="cb749"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb749-1"><a href="#cb749-1" aria-hidden="true"></a><span class="va">var=</span><span class="st">&quot;Line one</span></span>
<span id="cb749-2"><a href="#cb749-2" aria-hidden="true"></a><span class="st">This is line two&quot;</span></span>
<span id="cb749-3"><a href="#cb749-3" aria-hidden="true"></a></span>
<span id="cb749-4"><a href="#cb749-4" aria-hidden="true"></a><span class="bu">echo</span> <span class="va">$var</span></span>
<span id="cb749-5"><a href="#cb749-5" aria-hidden="true"></a><span class="ex">Line</span> one This is line two</span>
<span id="cb749-6"><a href="#cb749-6" aria-hidden="true"></a></span>
<span id="cb749-7"><a href="#cb749-7" aria-hidden="true"></a><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$var</span><span class="st">&quot;</span></span>
<span id="cb749-8"><a href="#cb749-8" aria-hidden="true"></a><span class="ex">Line</span> one</span>
<span id="cb749-9"><a href="#cb749-9" aria-hidden="true"></a><span class="ex">This</span> is line two</span></code></pre></div>
<p>Other errors you can get without double quote:</p>
<div class="sourceCode" id="cb750"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb750-1"><a href="#cb750-1" aria-hidden="true"></a><span class="va">variable=</span><span class="st">&quot;line one\nline two&quot;</span></span>
<span id="cb750-2"><a href="#cb750-2" aria-hidden="true"></a><span class="fu">awk</span> -v var=<span class="va">$variable</span> <span class="st">&#39;BEGIN {print var}&#39;</span></span>
<span id="cb750-3"><a href="#cb750-3" aria-hidden="true"></a><span class="ex">awk</span>: cmd. line:1: one\nline</span>
<span id="cb750-4"><a href="#cb750-4" aria-hidden="true"></a><span class="ex">awk</span>: cmd. line:1:    ^ backslash not last character on line</span>
<span id="cb750-5"><a href="#cb750-5" aria-hidden="true"></a><span class="ex">awk</span>: cmd. line:1: one\nline</span>
<span id="cb750-6"><a href="#cb750-6" aria-hidden="true"></a><span class="ex">awk</span>: cmd. line:1:    ^ syntax error</span></code></pre></div>
<p>And with single quote, it does not expand the value of the variable:</p>
<div class="sourceCode" id="cb751"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb751-1"><a href="#cb751-1" aria-hidden="true"></a><span class="fu">awk</span> -v var=<span class="st">&#39;$variable&#39;</span> <span class="st">&#39;BEGIN {print var}&#39;</span></span>
<span id="cb751-2"><a href="#cb751-2" aria-hidden="true"></a><span class="va">$variable</span></span></code></pre></div>
<h5>
More info about AWK and variables
</h3>
<p><a href="http://cfajohnson.com/shell/cus-faq-2.html
#Q24" rel="noreferrer">Read this faq</a>.</p>
</section>
<section id="answer-2-score-26" class="level4">
<h4>Answer 2 (score 26)</h4>
<p>It seems that the good-old <code>ENVIRON</code> <a href="/questions/tagged/awk" class="post-tag" title="show questions tagged &
#39;awk&#39;" rel="tag">awk</a> built-in hash is not mentioned at all. An example of its usage:</p>
<div class="sourceCode" id="cb752"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb752-1"><a href="#cb752-1" aria-hidden="true"></a>$ <span class="va">X=</span>Solaris <span class="fu">awk</span> <span class="st">&#39;BEGIN{print ENVIRON[&quot;X&quot;], ENVIRON[&quot;TERM&quot;]}&#39;</span></span>
<span id="cb752-2"><a href="#cb752-2" aria-hidden="true"></a><span class="ex">Solaris</span> rxvt</span></code></pre></div>
</section>
<section id="answer-3-score-9" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>Use either of these depending how you want backslashes in the shell variables handled (<code>avar</code> is an awk variable, <code>svar</code> is a shell variable):</p>
<div class="sourceCode" id="cb753"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb753-1"><a href="#cb753-1" aria-hidden="true"></a><span class="fu">awk</span> -v avar=<span class="st">&quot;</span><span class="va">$svar</span><span class="st">&quot;</span> <span class="st">&#39;... avar ...&#39;</span> file</span>
<span id="cb753-2"><a href="#cb753-2" aria-hidden="true"></a><span class="fu">awk</span> <span class="st">&#39;BEGIN{avar=ARGV[1];ARGV[1]=&quot;&quot;}... avar ...&#39;</span> <span class="st">&quot;</span><span class="va">$svar</span><span class="st">&quot;</span> file</span></code></pre></div>
<p>See <a href="http://cfajohnson.com/shell/cus-faq-2.html
#Q24">http://cfajohnson.com/shell/cus-faq-2.html#Q24</a> for details and other options. The first method above is almost always your best option and has the most obvious semantics.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-make-if-not-true-condition-score-449960-in-2018" class="level3">
<h3>99: How to make “if not true condition”? (score <a href="https://stackoverflow.com/q/10552711.html">449960</a> in 2018)</h3>
<section id="question-98" class="level4">
<h4>Question</h4>
<p>I would like to have the <code>echo</code> command executed when <code>cat /etc/passwd | grep "sysa"</code> is not true.</p>
<p>What am I doing wrong?</p>
<div class="sourceCode" id="cb754"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb754-1"><a href="#cb754-1" aria-hidden="true"></a><span class="kw">if</span> !<span class="bu"> [</span> <span class="va">$(</span><span class="fu">cat</span> /etc/passwd <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&quot;sysa&quot;</span><span class="va">)</span><span class="bu"> ]</span>; <span class="kw">then</span></span>
<span id="cb754-2"><a href="#cb754-2" aria-hidden="true"></a>        <span class="bu">echo</span> <span class="st">&quot;ERROR - The user sysa could not be looked up&quot;</span></span>
<span id="cb754-3"><a href="#cb754-3" aria-hidden="true"></a>        <span class="bu">exit</span> 2</span>
<span id="cb754-4"><a href="#cb754-4" aria-hidden="true"></a><span class="kw">fi</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-411" class="level4">
<h4>Answer accepted (score 411)</h4>
<p>try</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb755-1"><a href="#cb755-1" aria-hidden="true"></a><span class="kw">if</span> ! <span class="fu">grep</span> -q sysa /etc/passwd <span class="kw">;</span> <span class="kw">then</span></span></code></pre></div>
<p><code>grep</code> returns <code>true</code> if it finds the search target, and <code>false</code> if it doesn’t.</p>
<p>So NOT <code>false</code> == <code>true</code>.</p>
<p><code>if</code> evaluation in shells are designed to be very flexible, and many times doesn’t require chains of commands (as you have written).</p>
<p>Also, looking at your code as is, your use of the <code>$( ... )</code> form of cmd-substitution is to be commended, but think about what is coming out of the process. Try <code>echo $(cat /etc/passwd | grep "sysa")</code> to see what I mean. You can take that further by using the <code>-c</code> (count) option to grep and then do <code>if ! [ $(grep -c "sysa" /etc/passwd) -eq 0 ] ; then</code> which works but is rather old school.</p>
<p>BUT, you could use the newest shell features (arithmetic evaluation) like</p>
<div class="sourceCode" id="cb756"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb756-1"><a href="#cb756-1" aria-hidden="true"></a><span class="kw">if</span> ! <span class="kw">((</span> <span class="va">$(</span><span class="fu">grep</span> -c <span class="st">&quot;sysa&quot;</span> /etc/passwd<span class="va">)</span> == 0 <span class="kw">))</span> ; <span class="kw">then</span> <span class="ex">...</span><span class="kw">`</span></span></code></pre></div>
<p>which also gives you the benefit of using the c-lang based comparison operators, <code>==,&amp;lt;,&amp;gt;,&amp;gt;=,&amp;lt;=,%</code> and maybe a few others.</p>
<p>In this case, per a comment by Orwellophile, the arithmetic evaluation can be pared down even further, like</p>
<div class="sourceCode" id="cb757"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb757-1"><a href="#cb757-1" aria-hidden="true"></a><span class="kw">if</span> ! <span class="kw">((</span> <span class="va">$(</span><span class="fu">grep</span> -c <span class="st">&quot;sysa&quot;</span> /etc/passwd<span class="va">)</span> <span class="kw">))</span> ; <span class="kw">then</span> <span class="ex">....</span></span></code></pre></div>
<p>OR</p>
<div class="sourceCode" id="cb758"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb758-1"><a href="#cb758-1" aria-hidden="true"></a><span class="kw">if</span> <span class="kw">((</span> ! <span class="va">$(</span><span class="fu">grep</span> -c <span class="st">&quot;sysa&quot;</span> /etc/passwd<span class="va">)</span> <span class="kw">))</span> ; <span class="kw">then</span> <span class="ex">....</span></span></code></pre></div>
<p>Finally, there is an <em>award</em> called the <code>Useless Use of Cat (UUOC)</code>. :-) Some people will jump up and down and cry gothca! I’ll just say that <code>grep</code> can take a file name on its cmd-line, so why invoke extra processes and pipe constructions when you don’t have to? ;-)</p>
<p>I hope this helps.</p>
</section>
<section id="answer-2-score-30" class="level4">
<h4>Answer 2 (score 30)</h4>
<p>I think it can be simplified into:</p>
<div class="sourceCode" id="cb759"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb759-1"><a href="#cb759-1" aria-hidden="true"></a><span class="fu">grep</span> sysa /etc/passwd <span class="kw">||</span> <span class="kw">{</span></span>
<span id="cb759-2"><a href="#cb759-2" aria-hidden="true"></a>    <span class="bu">echo</span> <span class="st">&quot;ERROR - The user sysa could not be looked up&quot;</span></span>
<span id="cb759-3"><a href="#cb759-3" aria-hidden="true"></a>    <span class="bu">exit</span> 2</span>
<span id="cb759-4"><a href="#cb759-4" aria-hidden="true"></a><span class="kw">}</span></span></code></pre></div>
<p>or in a single command line</p>
<p><code>$ grep sysa /etc/passwd || { echo "ERROR - The user sysa could not be looked up"; exit 2; }</code></p>
</section>
<section id="answer-3-score-6" class="level4">
<h4>Answer 3 (score 6)</h4>
<blockquote>
What am I doing wrong?
</blockquote>
<p><code>$(...)</code> holds the <strong>value</strong>, not the exit status, that is why this approach is wrong. However, in this specific case, it does indeed work because <code>sysa</code> will be printed which makes the test statement come true. However, <code>if ! [ $(true) ]; then echo false; fi</code> would always print <code>false</code> because the <code>true</code> command does not write anything to stdout (even though the exit code is 0). That is why it needs to be rephrased to <code>if ! grep ...; then</code>.</p>
<p>An alternative would be <code>cat /etc/passwd | grep "sysa" || echo error</code>. Edit: As Alex pointed out, <a href="https://stackoverflow.com/questions/11710552/useless-use-of-cat">cat is useless here</a>: <code>grep "sysa" /etc/passwd || echo error</code>.</p>
<p>Found the other answers rather confusing, hope this helps someone.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="whats-the-difference-between-.bashrc-.bash_profile-and-.environment-score-448999-in" class="level3">
<h3>100: What’s the difference between .bashrc, .bash_profile, and .environment? (score <a href="https://stackoverflow.com/q/415403.html">448999</a> in )</h3>
<section id="question-99" class="level4">
<h4>Question</h4>
<p>I’ve used a number of different *nix-based systems of the years, and it seems like every flavor of Bash I use has a different algorithm for deciding which startup scripts to run. For the purposes of tasks like setting up environment variables and aliases and printing startup messages (e.g. MOTDs), which startup script is the appropriate place to do these?</p>
<p>What’s the difference between putting things in <code>.bashrc</code>, <code>.bash_profile</code>, and <code>.environment</code>? I’ve also seen other files such as <code>.login</code>, <code>.bash_login</code>, and <code>.profile</code>; are these ever relevant? What are the differences in which ones get run when logging in physically, logging in remotely via ssh, and opening a new terminal window? Are there any significant differences across platforms (including Mac OS X (and its Terminal.app) and Cygwin Bash)?</p>
</section>
<section id="answer-accepted-score-73" class="level4">
<h4>Answer accepted (score 73)</h4>
<p>The main difference with shell config files is that some are only read by “login” shells (eg. when you login from another host, or login at the text console of a local unix machine). these are the ones called, say, <code>.login</code> or <code>.profile</code> or <code>.zlogin</code> (depending on which shell you’re using).</p>
<p>Then you have config files that are read by “interactive” shells (as in, ones connected to a terminal (or pseudo-terminal in the case of, say, a terminal emulator running under a windowing system). these are the ones with names like <code>.bashrc</code>, <code>.tcshrc</code>, <code>.zshrc</code>, etc.</p>
<p><code>bash</code> complicates this in that <code>.bashrc</code> is <strong>only read by a shell that’s both <em>interactive</em> and <em>non-login</em></strong>, so you’ll find most people end up telling their <code>.bash_profile</code> to also read <code>.bashrc</code> with something like</p>
<p><code>[[ -r ~/.bashrc ]] &amp;amp;&amp;amp; . ~/.bashrc</code></p>
<p>Other shells behave differently - eg with <code>zsh</code>, <code>.zshrc</code> is always read for an interactive shell, whether it’s a login one or not.</p>
<p>The manual page for bash explains the circumstances under which each file is read. Yes, behaviour is generally consistent between machines.</p>
<p><code>.profile</code> is simply the login script filename originally used by <code>/bin/sh</code>. <code>bash</code>, being generally backwards-compatible with <code>/bin/sh</code>, will read <code>.profile</code> if one exists.</p>
</section>
<section id="answer-2-score-48" class="level4">
<h4>Answer 2 (score 48)</h4>
<p>That’s simple. It’s explained in <code>man bash</code>:</p>
<div class="sourceCode" id="cb760"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb760-1"><a href="#cb760-1" aria-hidden="true"></a><span class="ex">/bin/bash</span></span>
<span id="cb760-2"><a href="#cb760-2" aria-hidden="true"></a>       <span class="ex">The</span> bash executable</span>
<span id="cb760-3"><a href="#cb760-3" aria-hidden="true"></a><span class="ex">/etc/profile</span></span>
<span id="cb760-4"><a href="#cb760-4" aria-hidden="true"></a>       <span class="ex">The</span> systemwide initialization file, executed for login shells</span>
<span id="cb760-5"><a href="#cb760-5" aria-hidden="true"></a><span class="ex">~/.bash_profile</span></span>
<span id="cb760-6"><a href="#cb760-6" aria-hidden="true"></a>       <span class="ex">The</span> personal initialization file, executed for login shells</span>
<span id="cb760-7"><a href="#cb760-7" aria-hidden="true"></a><span class="ex">~/.bashrc</span></span>
<span id="cb760-8"><a href="#cb760-8" aria-hidden="true"></a>       <span class="ex">The</span> individual per-interactive-shell startup file</span>
<span id="cb760-9"><a href="#cb760-9" aria-hidden="true"></a><span class="ex">~/.bash_logout</span></span>
<span id="cb760-10"><a href="#cb760-10" aria-hidden="true"></a>       <span class="ex">The</span> individual login shell cleanup file, executed when a login shell exits</span>
<span id="cb760-11"><a href="#cb760-11" aria-hidden="true"></a><span class="ex">~/.inputrc</span></span>
<span id="cb760-12"><a href="#cb760-12" aria-hidden="true"></a>       <span class="ex">Individual</span> readline initialization file</span></code></pre></div>
<p>Login shells are the ones that are read one you login (so, they are not executed when merely starting up xterm, for example). There are other ways to login. For example using an X display manager. Those have other ways to read and export environment variables at login time.</p>
<p>Also read the <code>INVOCATION</code> chapter in the manual. It says <em>“The following paragraphs describe how bash executes its startup files.”</em>, i think that’s a spot-on :) It explains what an “interactive” shell is too.</p>
<p>Bash does not know about <code>.environment</code>. I suspect that’s a file of your distribution, to set environment variables independent of the shell that you drive.</p>
</section>
<section id="answer-3-score-9-1" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>Classically, <code>~/.profile</code> is used by Bourne Shell, and is probably supported by Bash as a legacy measure. Again, <code>~/.login</code> and <code>~/.cshrc</code> were used by C Shell - I’m not sure that Bash uses them at all.</p>
<p>The <code>~/.bash_profile</code> would be used once, at login. The <code>~/.bashrc</code> script is read every time a shell is started. This is analogous to <code>/.cshrc</code> for C Shell.</p>
<p>One consequence is that stuff in <code>~/.bashrc</code> should be as lightweight (minimal) as possible to reduce the overhead when starting a non-login shell.</p>
I believe the <code>~/.environment</code> file is a compatibility file for Korn Shell.<br />

</section>
</section>
</section>
</body>
</html>
