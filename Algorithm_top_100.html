<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Algorithm_top_100.md – Algorithm &lt;- StackOverflow top 100</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #232629;
        color: #7a7c7d;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
    div.sourceCode
      { color: #cfcfc2; background-color: #232629; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #cfcfc2; } /* Normal */
    code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
    code span.an { color: #3f8058; } /* Annotation */
    code span.at { color: #2980b9; } /* Attribute */
    code span.bn { color: #f67400; } /* BaseN */
    code span.bu { color: #7f8c8d; } /* BuiltIn */
    code span.cf { color: #fdbc4b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #3daee9; } /* Char */
    code span.cn { color: #27aeae; font-weight: bold; } /* Constant */
    code span.co { color: #7a7c7d; } /* Comment */
    code span.cv { color: #7f8c8d; } /* CommentVar */
    code span.do { color: #a43340; } /* Documentation */
    code span.dt { color: #2980b9; } /* DataType */
    code span.dv { color: #f67400; } /* DecVal */
    code span.er { color: #da4453; text-decoration: underline; } /* Error */
    code span.ex { color: #0099ff; font-weight: bold; } /* Extension */
    code span.fl { color: #f67400; } /* Float */
    code span.fu { color: #8e44ad; } /* Function */
    code span.im { color: #27ae60; } /* Import */
    code span.in { color: #c45b00; } /* Information */
    code span.kw { color: #cfcfc2; font-weight: bold; } /* Keyword */
    code span.op { color: #cfcfc2; } /* Operator */
    code span.ot { color: #27ae60; } /* Other */
    code span.pp { color: #27ae60; } /* Preprocessor */
    code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #da4453; } /* SpecialString */
    code span.st { color: #f44f4f; } /* String */
    code span.va { color: #27aeae; } /* Variable */
    code span.vs { color: #da4453; } /* VerbatimString */
    code span.wa { color: #da4453; } /* Warning */
  </style>
  <link rel="stylesheet" href=" ../Css/color_dark_solarized.css -c  ../Css/layout_toc.css" />
  <script type="text/javascript" src="../Css/js_masonry_desandro.js"></script>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Algorithm &lt;- StackOverflow top 100</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#how-do-i-check-if-an-array-includes-a-value-in-javascript-score-2382154-in-2019">1: How do I check if an array includes a value in JavaScript? (score <span>2382154</span> in 2019)</a></li>
<li><a href="#removing-duplicates-in-lists-score-1337045-in-2019">2: Removing duplicates in lists (score <span>1337045</span> in 2019)</a></li>
<li><a href="#what-is-the-optimal-algorithm-for-the-game-2048-score-909734-in-2017">3: What is the optimal algorithm for the game 2048? (score <span>909734</span> in 2017)</a></li>
<li><a href="#calculate-distance-between-two-latitude-longitude-points-haversine-formula-score-708973-in-2017">4: Calculate distance between two latitude-longitude points? (Haversine formula) (score <span>708973</span> in 2017)</a></li>
<li><a href="#what-is-a-plain-english-explanation-of-big-o-notation-score-668590-in-2016">5: What is a plain English explanation of “Big O” notation? (score <span>668590</span> in 2016)</a></li>
<li><a href="#how-to-find-time-complexity-of-an-algorithm-score-615483-in-2017">6: How to find time complexity of an algorithm (score <span>615483</span> in 2017)</a></li>
<li><a href="#best-way-to-reverse-a-string-score-602944-in-2013">7: Best way to reverse a string (score <span>602944</span> in 2013)</a></li>
<li><a href="#how-to-generate-all-permutations-of-a-list-in-python-score-563081-in-2017">8: How to generate all permutations of a list in Python (score <span>563081</span> in 2017)</a></li>
<li><a href="#finding-the-maxmin-value-in-an-array-of-primitives-using-java-score-549345-in-2015">9: Finding the max/min value in an array of primitives using Java (score <span>549345</span> in 2015)</a></li>
<li><a href="#generating-all-permutations-of-a-given-string-score-535495-in-2013">10: Generating all permutations of a given string (score <span>535495</span> in 2013)</a></li>
<li><a href="#how-to-count-the-number-of-set-bits-in-a-32-bit-integer-score-513420-in-2014">11: How to count the number of set bits in a 32-bit integer? (score <span>513420</span> in 2014)</a></li>
<li><a href="#how-to-replace-all-occurrences-of-a-character-in-string-score-446818-in-2016">12: How to replace all occurrences of a character in string? (score <span>446818</span> in 2016)</a></li>
<li><a href="#how-do-you-detect-credit-card-type-based-on-number-score-438429-in-2011">13: How do you detect Credit card type based on number? (score <span>438429</span> in 2011)</a></li>
<li><a href="#algorithm-to-return-all-combinations-of-k-elements-from-n-score-429861-in-2011">14: Algorithm to return all combinations of k elements from n (score <span>429861</span> in 2011)</a></li>
<li><a href="#what-is-tail-recursion-score-409205-in-2016">15: What is tail recursion? (score <span>409205</span> in 2016)</a></li>
<li><a href="#big-o-how-do-you-calculateapproximate-it-score-405090-in-2011">16: Big O, how do you calculate/approximate it? (score <span>405090</span> in 2011)</a></li>
<li><a href="#how-to-pair-socks-from-a-pile-efficiently-score-403361-in-2016">17: How to pair socks from a pile efficiently? (score <span>403361</span> in 2016)</a></li>
<li><a href="#what-is-the-most-effective-way-for-float-and-double-comparison-score-384339-in-2016">18: What is the most effective way for float and double comparison? (score <span>384339</span> in 2016)</a></li>
<li><a href="#printing-prime-numbers-from-1-through-100-score-366862-in-2011">19: Printing prime numbers from 1 through 100 (score <span>366862</span> in 2011)</a></li>
<li><a href="#a-simple-explanation-of-naive-bayes-classification-score-352799-in-2016">20: A simple explanation of Naive Bayes Classification (score <span>352799</span> in 2016)</a></li>
<li><a href="#finding-all-possible-combinations-of-numbers-to-reach-a-given-sum-score-319931-in-2019">21: Finding all possible combinations of numbers to reach a given sum (score <span>319931</span> in 2019)</a></li>
<li><a href="#fast-way-to-copy-one-vector-into-another-score-317328-in-2016">22: fast way to copy one vector into another (score <span>317328</span> in 2016)</a></li>
<li><a href="#which-is-the-fastest-algorithm-to-find-prime-numbers-score-295053-in-2015">23: Which is the fastest algorithm to find prime numbers? (score <span>295053</span> in 2015)</a></li>
<li><a href="#what-is-the-difference-between-linear-search-and-binary-search-score-293714-in-2019">24: What is the difference between Linear search and Binary search? (score <span>293714</span> in 2019)</a></li>
<li><a href="#how-do-you-rotate-a-two-dimensional-array-score-288099-in-2016">25: How do you rotate a two dimensional array? (score <span>288099</span> in 2016)</a></li>
<li><a href="#how-to-implement-a-queue-using-two-stacks-score-287130-in-2016">26: How to implement a queue using two stacks? (score <span>287130</span> in 2016)</a></li>
<li><a href="#best-algorithm-for-detecting-cycles-in-a-directed-graph-score-284410-in-2014">27: Best algorithm for detecting cycles in a directed graph (score <span>284410</span> in 2014)</a></li>
<li><a href="#image-comparison---fast-algorithm-score-284319-in-2013">28: Image comparison - fast algorithm (score <span>284319</span> in 2013)</a></li>
<li><a href="#find-a-pair-of-elements-from-an-array-whose-sum-equals-a-given-number-score-280616-in-2017">29: Find a pair of elements from an array whose sum equals a given number (score <span>280616</span> in 2017)</a></li>
<li><a href="#check-if-all-elements-in-a-list-are-identical-score-270180-in-2016">30: check if all elements in a list are identical (score <span>270180</span> in 2016)</a></li>
<li><a href="#how-to-create-the-most-compact-mapping-n-isprimen-up-to-a-limit-n-score-268425-in-2019">31: How to create the most compact mapping n → isprime(n) up to a limit N? (score <span>268425</span> in 2019)</a></li>
<li><a href="#how-do-i-calculate-a-point-on-a-circles-circumference-score-260479-in-2019">32: How do I calculate a point on a circle’s circumference? (score <span>260479</span> in 2019)</a></li>
<li><a href="#how-to-reverse-a-singly-linked-list-using-only-two-pointers-score-259554-in-2019">33: How to reverse a singly linked list using only two pointers? (score <span>259554</span> in 2019)</a></li>
<li><a href="#easy-interview-question-got-harder-given-numbers-1..100-find-the-missing-numbers-given-exactly-k-are-missing-score-256244-in-2019">34: Easy interview question got harder: given numbers 1..100, find the missing number(s) given exactly k are missing (score <span>256244</span> in 2019)</a></li>
<li><a href="#how-to-merge-two-sorted-arrays-into-a-sorted-array-score-245609-in-2015">35: How to merge two sorted arrays into a sorted array? (score <span>245609</span> in 2015)</a></li>
<li><a href="#unfamiliar-symbol-in-algorithm-what-does-mean-score-245509-in-2016">36: Unfamiliar symbol in algorithm: what does ∀ mean? (score <span>245509</span> in 2016)</a></li>
<li><a href="#how-do-i-create-a-url-shortener-score-241313-in-2018">37: How do I create a URL shortener? (score <span>241313</span> in 2018)</a></li>
<li><a href="#quickest-way-to-find-missing-number-in-an-array-of-numbers-score-240643-in-2012">38: Quickest way to find missing number in an array of numbers (score <span>240643</span> in 2012)</a></li>
<li><a href="#equation-for-testing-if-a-point-is-inside-a-circle-score-239091-in-2013">39: Equation for testing if a point is inside a circle (score <span>239091</span> in 2013)</a></li>
<li><a href="#determine-if-two-rectangles-overlap-each-other-score-237792-in-2017">40: Determine if two rectangles overlap each other? (score <span>237792</span> in 2017)</a></li>
<li><a href="#how-can-building-a-heap-be-on-time-complexity-score-234466-in-2016">41: How can building a heap be O(n) time complexity? (score <span>234466</span> in 2016)</a></li>
<li><a href="#what-is-an-np-complete-in-computer-science-score-231051-in-2017">42: What is an NP-complete in computer science? (score <span>231051</span> in 2017)</a></li>
<li><a href="#quick-sort-vs-merge-sort-score-226941-in-2009">43: Quick Sort Vs Merge Sort (score <span>226941</span> in 2009)</a></li>
<li><a href="#efficient-algorithm-for-bit-reversal-from-msb-lsb-to-lsb-msb-in-c-score-220739-in-2019">44: Efficient Algorithm for Bit Reversal (from MSB-&gt;LSB to LSB-&gt;MSB) in C (score <span>220739</span> in 2019)</a></li>
<li><a href="#how-might-i-find-the-largest-number-contained-in-a-javascript-array-score-220533-in-2009">45: How might I find the largest number contained in a JavaScript array? (score <span>220533</span> in 2009)</a></li>
<li><a href="#how-to-calculate-binary-search-complexity-score-220524-in-2016">46: how to calculate binary search complexity (score <span>220524</span> in 2016)</a></li>
<li><a href="#difference-between-big-o-and-little-o-notation-score-219336-in-2017">47: Difference between Big-O and Little-O Notation (score <span>219336</span> in 2017)</a></li>
<li><a href="#what-is-the-difference-between-a-generative-and-a-discriminative-algorithm-score-216847-in-2018">48: What is the difference between a generative and a discriminative algorithm? (score <span>216847</span> in 2018)</a></li>
<li><a href="#how-to-find-the-kth-largest-element-in-an-unsorted-array-of-length-n-in-on-score-216472-in-2012">49: How to find the kth largest element in an unsorted array of length n in O(n)? (score <span>216472</span> in 2012)</a></li>
<li><a href="#when-is-it-practical-to-use-depth-first-search-dfs-vs-breadth-first-search-bfs-score-211438-in-2018">50: When is it practical to use Depth-First Search (DFS) vs Breadth-First Search (BFS)? (score <span>211438</span> in 2018)</a></li>
<li><a href="#how-do-i-check-if-a-number-is-a-palindrome-score-208946-in-2014">51: How do I check if a number is a palindrome? (score <span>208946</span> in 2014)</a></li>
<li><a href="#how-to-check-if-a-number-is-a-power-of-2-score-208869-in-2015">52: How to check if a number is a power of 2 (score <span>208869</span> in 2015)</a></li>
<li><a href="#finding-all-cycles-in-a-directed-graph-score-208242-in-2017">53: Finding all cycles in a directed graph (score <span>208242</span> in 2017)</a></li>
<li><a href="#how-to-determine-if-a-point-is-in-a-2d-triangle-score-200577-in-2016">54: How to determine if a point is in a 2D triangle? (score <span>200577</span> in 2016)</a></li>
<li><a href="#algorithm-to-generate-all-possible-permutations-of-a-list-score-199006-in-2010">55: Algorithm to generate all possible permutations of a list? (score <span>199006</span> in 2010)</a></li>
<li><a href="#expand-a-random-range-from-15-to-17-score-196936-in-2012">56: Expand a random range from 1–5 to 1–7 (score <span>196936</span> in 2012)</a></li>
<li><a href="#good-java-graph-algorithm-library-score-195402-in-2013">57: Good Java graph algorithm library? (score <span>195402</span> in 2013)</a></li>
<li><a href="#java-shifting-elements-in-an-array-score-194435-in-2016">58: Java, Shifting Elements in an Array (score <span>194435</span> in 2016)</a></li>
<li><a href="#what-is-the-difference-between-tree-depth-and-height-score-193043-in-2019">59: What is the difference between tree depth and height? (score <span>193043</span> in 2019)</a></li>
<li><a href="#how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver-score-192810-in-2019">60: How to find list of possible words from a letter matrix [Boggle Solver] (score <span>192810</span> in 2019)</a></li>
<li><a href="#algorithm-to-find-largest-prime-factor-of-a-number-score-192218-in-2018">61: Algorithm to find Largest prime factor of a number (score <span>192218</span> in 2018)</a></li>
<li><a href="#algorithm-efficient-way-to-remove-duplicate-integers-from-an-array-score-192123-in-2009">62: Algorithm: efficient way to remove duplicate integers from an array (score <span>192123</span> in 2009)</a></li>
<li><a href="#what-is-the-best-algorithm-for-overriding-gethashcode-score-191331-in-2019">63: What is the best algorithm for overriding GetHashCode? (score <span>191331</span> in 2019)</a></li>
<li><a href="#implement-stack-using-two-queues-score-190469-in-2017">64: Implement Stack using Two Queues (score <span>190469</span> in 2017)</a></li>
<li><a href="#the-most-efficient-way-to-implement-an-integer-based-power-function-powint-int-score-190337-in-2015">65: The most efficient way to implement an integer based power function pow(int, int) (score <span>190337</span> in 2015)</a></li>
<li><a href="#reverse-the-ordering-of-words-in-a-string-score-189299-in-2012">66: Reverse the ordering of words in a string (score <span>189299</span> in 2012)</a></li>
<li><a href="#hash-function-for-string-score-187771-in-2011">67: hash function for string (score <span>187771</span> in 2011)</a></li>
<li><a href="#why-is-quicksort-better-than-mergesort-score-187146-in-2013">68: Why is quicksort better than mergesort? (score <span>187146</span> in 2013)</a></li>
<li><a href="#how-to-calculate-an-angle-from-three-points-score-185647-in-2013">69: How to calculate an angle from three points? (score <span>185647</span> in 2013)</a></li>
<li><a href="#how-to-find-all-combinations-of-coins-when-given-some-dollar-value-score-185566-in-2019">70: How to find all combinations of coins when given some dollar value (score <span>185566</span> in 2019)</a></li>
<li><a href="#efficient-way-to-apply-multiple-filters-to-pandas-dataframe-or-series-score-184876-in">71: Efficient way to apply multiple filters to pandas DataFrame or Series (score <span>184876</span> in )</a></li>
<li><a href="#effective-method-to-hide-email-from-spam-bots-score-181121-in-2015">72: Effective method to hide email from spam bots (score <span>181121</span> in 2015)</a></li>
<li><a href="#how-to-find-the-lowest-common-ancestor-of-two-nodes-in-any-binary-tree-score-177343-in-2019">73: How to find the lowest common ancestor of two nodes in any binary tree? (score <span>177343</span> in 2019)</a></li>
<li><a href="#image-processing-algorithm-improvement-for-coca-cola-can-recognition-score-176294-in-2016">74: Image Processing: Algorithm Improvement for ‘Coca-Cola Can’ Recognition (score <span>176294</span> in 2016)</a></li>
<li><a href="#picking-a-random-element-from-a-set-score-176234-in-2008">75: Picking a random element from a set (score <span>176234</span> in 2008)</a></li>
<li><a href="#is-logn-θnlogn-score-171644-in-2018">76: Is log(n!) = Θ(n·log(n))? (score <span>171644</span> in 2018)</a></li>
<li><a href="#how-to-determine-the-longest-increasing-subsequence-using-dynamic-programming-score-171257-in-2016">77: How to determine the longest increasing subsequence using dynamic programming? (score <span>171257</span> in 2016)</a></li>
<li><a href="#how-to-implement-a-binary-tree-score-167458-in-2018">78: How to Implement a Binary Tree? (score <span>167458</span> in 2018)</a></li>
<li><a href="#when-should-i-use-kruskal-as-opposed-to-prim-and-vice-versa-score-166855-in-2019">79: When should I use Kruskal as opposed to Prim (and vice versa)? (score <span>166855</span> in 2019)</a></li>
<li><a href="#is-it-possible-to-get-all-arguments-of-a-function-as-single-object-inside-that-function-score-166771-in-2017">80: Is it possible to get all arguments of a function as single object inside that function? (score <span>166771</span> in 2017)</a></li>
<li><a href="#insertion-sort-vs.-selection-sort-score-163201-in-2015">81: Insertion Sort vs. Selection Sort (score <span>163201</span> in 2015)</a></li>
<li><a href="#writing-your-own-square-root-function-score-160732-in-2015">82: Writing your own square root function (score <span>160732</span> in 2015)</a></li>
<li><a href="#quicksort-with-python-score-160578-in-2016">83: Quicksort with Python (score <span>160578</span> in 2016)</a></li>
<li><a href="#algorithm-to-convert-rgb-to-hsv-and-hsv-to-rgb-in-range-0-255-for-both-score-160084-in-2013">84: Algorithm to convert RGB to HSV and HSV to RGB in range 0-255 for both (score <span>160084</span> in 2013)</a></li>
<li><a href="#how-to-detect-a-loop-in-a-linked-list-score-159991-in-2013">85: How to detect a loop in a linked list? (score <span>159991</span> in 2013)</a></li>
<li><a href="#leap-year-calculation-score-159483-in-2019">86: Leap year calculation (score <span>159483</span> in 2019)</a></li>
<li><a href="#write-a-function-that-returns-the-longest-palindrome-in-a-given-string-score-159347-in-2012">87: Write a function that returns the longest palindrome in a given string (score <span>159347</span> in 2012)</a></li>
<li><a href="#algorithm-for-determining-tic-tac-toe-game-over-score-157814-in-2017">88: Algorithm for Determining Tic Tac Toe Game Over (score <span>157814</span> in 2017)</a></li>
<li><a href="#ukkonens-suffix-tree-algorithm-in-plain-english-score-155783-in-2018">89: Ukkonen’s suffix tree algorithm in plain English (score <span>155783</span> in 2018)</a></li>
<li><a href="#javascript---get-the-first-day-of-the-week-from-current-date-score-154994-in-2019">90: JavaScript - get the first day of the week from current date (score <span>154994</span> in 2019)</a></li>
<li><a href="#what-is-a-loop-invariant-score-154787-in-2018">91: What is a loop invariant? (score <span>154787</span> in 2018)</a></li>
<li><a href="#what-is-stability-in-sorting-algorithms-and-why-is-it-important-score-154663-in-2017">92: What is stability in sorting algorithms and why is it important? (score <span>154663</span> in 2017)</a></li>
<li><a href="#find-running-median-from-a-stream-of-integers-score-149481-in-2017">93: Find running median from a stream of integers (score <span>149481</span> in 2017)</a></li>
<li><a href="#swap-two-variables-without-using-a-temporary-variable-score-147942-in-2016">94: Swap two variables without using a temporary variable (score <span>147942</span> in 2016)</a></li>
<li><a href="#what-is-a-good-hash-function-score-146894-in-2012">95: What is a good Hash Function? (score <span>146894</span> in 2012)</a></li>
<li><a href="#what-is-tail-call-optimization-score-145617-in-2014">96: What Is Tail Call Optimization? (score <span>145617</span> in 2014)</a></li>
<li><a href="#algorithm-to-calculate-the-number-of-divisors-of-a-given-number-score-143140-in-2014">97: Algorithm to calculate the number of divisors of a given number (score <span>143140</span> in 2014)</a></li>
<li><a href="#the-best-way-to-calculate-the-height-in-a-binary-search-tree-balancing-an-avl-tree-score-142948-in-2014">98: The best way to calculate the height in a binary search tree? (balancing an AVL-tree) (score <span>142948</span> in 2014)</a></li>
<li><a href="#what-exactly-does-big-ө-notation-represent-score-142128-in-2015">99: What exactly does big Ө notation represent? (score <span>142128</span> in 2015)</a></li>
<li><a href="#how-to-check-if-two-words-are-anagrams-score-141961-in-2015">100: How to check if two words are anagrams (score <span>141961</span> in 2015)</a></li>
</ul>
</nav>
<section class="level2">
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
<section id="how-do-i-check-if-an-array-includes-a-value-in-javascript-score-2382154-in-2019" class="level3">
<h3>1: How do I check if an array includes a value in JavaScript? (score <a href="https://stackoverflow.com/q/237104.html">2382154</a> in 2019)</h3>
<section id="question" class="level4">
<h4>Question</h4>
<p>What is the most concise and efficient way to find out if a JavaScript array contains a value?</p>
<p>This is the only way I know to do it:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>function contains(a, obj) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>    <span class="cf">for</span> (var i = <span class="dv">0</span>; i &lt; a.length; i++) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>        <span class="cf">if</span> (a[i] === obj) {</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>            <span class="cf">return</span> true;</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>        }</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>    }</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>    <span class="cf">return</span> false;</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>Is there a better and more concise way to accomplish this?</p>
<p>This is very closely related to Stack Overflow question <em><a href="https://stackoverflow.com/questions/143847/best-way-to-find-an-item-in-a-javascript-array">Best way to find an item in a JavaScript Array?</a></em> which addresses finding objects in an array using <code>indexOf</code>.</p>
</section>
<section id="answer-accepted-score-4127" class="level4">
<h4>Answer accepted (score 4127)</h4>
<p>Current browsers have <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes
#Browser_compatibility" rel="noreferrer"><code>Array#includes</code></a>, which does <em>exactly</em> that, <a href="https://kangax.github.io/compat-table/es2016plus/#test-Array.prototype.includes" rel="noreferrer">is widely supported</a>, and has a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes#Polyfill" rel="noreferrer">polyfill</a> for older browsers.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>&gt; [&#39;joe&#39;, &#39;jane&#39;, &#39;mary&#39;].includes(&#39;jane&#39;);</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>true </span></code></pre></div>
<p>You can also use <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf" rel="noreferrer"><code>Array #indexOf</code></a>, which is less direct, but doesn’t require Polyfills for out of date browsers.</p>
<p>jQuery offers <a href="http://api.jquery.com/jquery.inarray/" rel="noreferrer"><code>$.inArray</code></a>, which is functionally equivalent to <code>Array #indexOf</code>.</p>
<p><a href="http://underscorejs.org/
#" rel="noreferrer">underscore.js</a>, a JavaScript utility library, offers <a href="http://underscorejs.org/#contains" rel="noreferrer"><code>_.contains(list, value)</code></a>, alias <code>_.include(list, value)</code>, both of which use <a href="http://underscorejs.org/#indexOf" rel="noreferrer">indexOf</a> internally if passed a JavaScript array.</p>
<p>Some other frameworks offer similar methods:</p>
<ul>
<li>
Dojo Toolkit: <a href="http://dojotoolkit.org/reference-guide/dojo/indexOf.html" rel="noreferrer"><code>dojo.indexOf(array, value, [fromIndex, findLast])</code></a>
</li>
<li>
Prototype: <a href="http://api.prototypejs.org/language/Array/prototype/indexOf/" rel="noreferrer"><code>array.indexOf(value)</code></a>
</li>
<li>
MooTools: <a href="https://mootools.net/core/docs/1.6.0/Types/Array
#Array:indexOf" rel="noreferrer"><code>array.indexOf(value)</code></a>
</li>
<li>
MochiKit: <a href="http://mochi.github.io/mochikit/doc/html/MochiKit/Base.html
#fn-findvalue" rel="noreferrer"><code>findValue(array, value)</code></a>
</li>
<li>
MS Ajax: <a href="http://www.asp.net/ajaxlibrary/Reference.Array-indexOf-Function.ashx" rel="noreferrer"><code>array.indexOf(value)</code></a>
</li>
<li>
Ext: <a href="http://docs.sencha.com/extjs/4.0.0/
#/api/Ext.Array-method-contains" rel="noreferrer"><code>Ext.Array.contains(array, value)</code></a>
</li>
<li>
Lodash: <a href="https://lodash.com/docs
#includes" rel="noreferrer"><code>_.includes(array, value, [from])</code></a> (is <code>_.contains</code> prior 4.0.0)
</li>
<li>
ECMAScript 2016: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" rel="noreferrer"><code>array.includes(value)</code></a>
</li>
</ul>
<p>Notice that some frameworks implement this as a function, while others add the function to the array prototype.</p>
</section>
<section id="answer-2-score-399" class="level4">
<h4>Answer 2 (score 399)</h4>
<p><strong>Update from 2019: This answer is from 2008 (11 years old!) and is not relevant for modern JS usage. The promised performance improvement was based on a benchmark done in browsers of that time. It might not be relevant to modern JS execution contexts. If you need an easy solution, look for other answers. If you need the best performance, benchmark for yourself in the relevant execution environments.</strong></p>
<p>As others have said, the iteration through the array is probably the best way, but it <a href="http://blogs.oracle.com/greimer/entry/best_way_to_code_a" rel="noreferrer">has been proven</a> that a decreasing <code>while</code> loop is the fastest way to iterate in JavaScript. So you may want to rewrite your code as follows:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>function contains(a, obj) {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>    var i = a.length;</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>    <span class="cf">while</span> (i--) {</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>       <span class="cf">if</span> (a[i] === obj) {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>           <span class="cf">return</span> true;</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a>       }</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>    }</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a>    <span class="cf">return</span> false;</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>Of course, you may as well extend Array prototype:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>Array.prototype.contains = function(obj) {</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>    var i = this.length;</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>    <span class="cf">while</span> (i--) {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>        <span class="cf">if</span> (this[i] === obj) {</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>            <span class="cf">return</span> true;</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>        }</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>    }</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>    <span class="cf">return</span> false;</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>And now you can simply use the following:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a>alert([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>].contains(<span class="dv">2</span>)); <span class="co">// =&gt; true</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>alert([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>].contains(<span class="ch">&#39;2&#39;</span>)); <span class="co">// =&gt; false</span></span></code></pre></div>
</section>
<section id="answer-3-score-189" class="level4">
<h4>Answer 3 (score 189)</h4>
<p><a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/indexOf" rel="noreferrer"><code>indexOf</code></a> maybe, but it’s a “JavaScript extension to the ECMA-262 standard; as such it may not be present in other implementations of the standard.”</p>
<p>Example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>].indexOf(<span class="dv">1</span>) =&gt; <span class="dv">0</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>[<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>, <span class="st">&quot;baz&quot;</span>].indexOf(<span class="st">&quot;bar&quot;</span>) =&gt; <span class="dv">1</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>].indexOf(<span class="dv">4</span>) =&gt; -<span class="dv">1</span></span></code></pre></div>
<p>AFAICS <a href="http://msdn.microsoft.com/en-us/library/k4h76zbx%5C%28VS.85%5C%29.aspx" rel="noreferrer">Microsoft does <em>not</em> offer some kind of alternative</a> to this, but you can add similar functionality to arrays in Internet Explorer (and other browsers that don’t support <code>indexOf</code>) if you want to, as a <a href="http://google.com/search?q=indexof%20internet%20explorer" rel="noreferrer">quick Google search reveals</a> (for example, <a href="http://soledadpenades.com/2007/05/17/arrayindexof-in-internet-explorer/" rel="noreferrer">this one</a>).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="removing-duplicates-in-lists-score-1337045-in-2019" class="level3">
<h3>2: Removing duplicates in lists (score <a href="https://stackoverflow.com/q/7961363.html">1337045</a> in 2019)</h3>
<section id="question-1" class="level4">
<h4>Question</h4>
<p>Pretty much I need to write a program to check if a list has any duplicates and if it does it removes them and returns a new list with the items that weren’t duplicated/removed. This is what I have but to be honest I do not know what to do.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>def remove_duplicates():</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a>    t = [<span class="ch">&#39;a&#39;</span>, <span class="ch">&#39;b&#39;</span>, <span class="ch">&#39;c&#39;</span>, <span class="ch">&#39;d&#39;</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a>    t2 = [<span class="ch">&#39;a&#39;</span>, <span class="ch">&#39;c&#39;</span>, <span class="ch">&#39;d&#39;</span>]</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a>    <span class="cf">for</span> t in t2:</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a>        t.append(t.remove())</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a>    <span class="cf">return</span> t</span></code></pre></div>
</section>
<section id="answer-accepted-score-1446" class="level4">
<h4>Answer accepted (score 1446)</h4>
<p>The common approach to get a unique collection of items is to use a <a href="http://docs.python.org/3/library/stdtypes.html
#set-types-set-frozenset" rel="noreferrer"><code>set</code></a>. Sets are <em>unordered</em> collections of <em>distinct</em> objects. To create a set from any iterable, you can simply pass it to the built-in <a href="http://docs.python.org/3/library/functions.html#func-set" rel="noreferrer"><code>set()</code></a> function. If you later need a real list again, you can similarly pass the set to the <a href="http://docs.python.org/3/library/functions.html#func-list" rel="noreferrer"><code>list()</code></a> function.</p>
<p>The following example should cover whatever you are trying to do:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>&gt;&gt;&gt; t = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a>&gt;&gt;&gt; t</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a>&gt;&gt;&gt; list(set(t))</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a>&gt;&gt;&gt; s = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a>&gt;&gt;&gt; list(set(t) - set(s))</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a>[<span class="dv">8</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>]</span></code></pre></div>
<p>As you can see from the example result, <em>the original order is not maintained</em>. As mentioned above, sets themselves are unordered collections, so the order is lost. When converting a set back to a list, an arbitrary order is created.</p>
<h5>
Maintaining order
</h3>
<p>If order is important to you, then you will have to use a different mechanism. A very common solution for this is to rely on <a href="https://docs.python.org/3/library/collections.html
#collections.OrderedDict" rel="noreferrer"><code>OrderedDict</code></a> to keep the order of keys during insertion:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a>&gt;&gt;&gt; from collections import OrderedDict</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a>&gt;&gt;&gt; list(OrderedDict.fromkeys(t))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span></code></pre></div>
<p><a href="https://mail.python.org/pipermail/python-dev/2017-December/151283.html" rel="noreferrer">Starting with Python 3.7</a>, the built-in dictionary is guaranteed to maintain the insertion order as well, so you can also use that directly if you are on Python 3.7 or later (or CPython 3.6):</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>&gt;&gt;&gt; list(dict.fromkeys(t))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span></code></pre></div>
<p>Note that this has the overhead of creating a dictionary first, and then creating a list from it. If you don’t actually need to preserve the order, you’re better off using a set. Check out <a href="https://stackoverflow.com/q/480214/216074">this question</a> for more details and alternative ways to preserve the order when removing duplicates.</p>
<hr>
<p>Finally note that both the <code>set</code> as well as the <code>OrderedDict</code>/<code>dict</code> solutions require your items to be <em>hashable</em>. This usually means that they have to be immutable. If you have to deal with items that are not hashable (e.g. list objects), then you will have to use a slow approach in which you will basically have to compare every item with every other item in a nested loop.</p>
</section>
<section id="answer-2-score-383" class="level4">
<h4>Answer 2 (score 383)</h4>
<p><strong>In Python 2.7</strong>, the new way of removing duplicates from an iterable while keeping it in the original order is:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a>&gt;&gt;&gt; from collections import OrderedDict</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a>&gt;&gt;&gt; list(OrderedDict.fromkeys(&#39;abracadabra&#39;))</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true"></a>[<span class="ch">&#39;a&#39;</span>, <span class="ch">&#39;b&#39;</span>, <span class="ch">&#39;r&#39;</span>, <span class="ch">&#39;c&#39;</span>, <span class="ch">&#39;d&#39;</span>]</span></code></pre></div>
<p><strong>In Python 3.5</strong>, the OrderedDict has a C implementation. My timings show that this is now both the fastest and shortest of the various approaches for Python 3.5.</p>
<p><strong>In Python 3.6</strong>, the regular dict became both ordered and compact. (This feature is holds for CPython and PyPy but may not present in other implementations). That gives us a new fastest way of deduping while retaining order:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>&gt;&gt;&gt; list(dict.fromkeys(&#39;abracadabra&#39;))</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a>[<span class="ch">&#39;a&#39;</span>, <span class="ch">&#39;b&#39;</span>, <span class="ch">&#39;r&#39;</span>, <span class="ch">&#39;c&#39;</span>, <span class="ch">&#39;d&#39;</span>]</span></code></pre></div>
<p><strong>In Python 3.7</strong>, the regular dict is guaranteed to both ordered across all implementations. <strong>So, the shortest and fastest solution is:</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a>&gt;&gt;&gt; list(dict.fromkeys(&#39;abracadabra&#39;))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a>[<span class="ch">&#39;a&#39;</span>, <span class="ch">&#39;b&#39;</span>, <span class="ch">&#39;r&#39;</span>, <span class="ch">&#39;c&#39;</span>, <span class="ch">&#39;d&#39;</span>]</span></code></pre></div>
</section>
<section id="answer-3-score-180" class="level4">
<h4>Answer 3 (score 180)</h4>
<p>It’s a one-liner: <code>list(set(source_list))</code> will do the trick.</p>
<p>A <code>set</code> is something that can’t possibly have duplicates.</p>
<p>Update: an order-preserving approach is two lines:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a>from collections import OrderedDict</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a>OrderedDict((x, True) <span class="cf">for</span> x in source_list).keys()</span></code></pre></div>
<p>Here we use the fact that <code>OrderedDict</code> remembers the insertion order of keys, and does not change it when a value at a particular key is updated. We insert <code>True</code> as values, but we could insert anything, values are just not used. (<code>set</code> works a lot like a <code>dict</code> with ignored values, too.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-optimal-algorithm-for-the-game-2048-score-909734-in-2017" class="level3">
<h3>3: What is the optimal algorithm for the game 2048? (score <a href="https://stackoverflow.com/q/22342854.html">909734</a> in 2017)</h3>
<section id="question-2" class="level4">
<h4>Question</h4>
<p>I have recently stumbled upon the game <a href="http://gabrielecirulli.github.io/2048/" rel="noreferrer">2048</a>. You merge similar tiles by moving them in any of the four directions to make “bigger” tiles. After each move, a new tile appears at random empty position with a value of either <code>2</code> or <code>4</code>. The game terminates when all the boxes are filled and there are no moves that can merge tiles, or you create a tile with a value of <code>2048</code>.</p>
<p>One, I need to follow a well-defined strategy to reach the goal. So, I thought of writing a program for it.</p>
<p>My current algorithm:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a><span class="cf">while</span> (!game_over) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a>    <span class="cf">for</span> each possible move:</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a>        count_no_of_merges_for_2-tiles and <span class="dv">4</span>-tiles</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a>    choose the move with a large number of merges</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>What I am doing is at any point, I will try to merge the tiles with values <code>2</code> and <code>4</code>, that is, I try to have <code>2</code> and <code>4</code> tiles, as minimum as possible. If I try it this way, all other tiles were automatically getting merged and the strategy seems good.</p>
<p>But, when I actually use this algorithm, I only get around 4000 points before the game terminates. Maximum points AFAIK is slightly more than 20,000 points which is way larger than my current score. Is there a better algorithm than the above?</p>
</section>
<section id="answer-accepted-score-1235" class="level4">
<h4>Answer accepted (score 1235)</h4>
<p>I developed a 2048 AI using <em>expectimax</em> optimization, instead of the minimax search used by <span class="citation" data-cites="ovolve">@ovolve</span>’s algorithm. The AI simply performs maximization over all possible moves, followed by expectation over all possible tile spawns (weighted by the probability of the tiles, i.e. 10% for a 4 and 90% for a 2). As far as I’m aware, it is not possible to prune expectimax optimization (except to remove branches that are exceedingly unlikely), and so the algorithm used is a carefully optimized brute force search.</p>
<h5>
Performance
</h2>
<p>The AI in its default configuration (max search depth of 8) takes anywhere from 10ms to 200ms to execute a move, depending on the complexity of the board position. In testing, the AI achieves an average move rate of 5-10 moves per second over the course of an entire game. If the search depth is limited to 6 moves, the AI can easily execute 20+ moves per second, which makes for some <a href="https://www.youtube.com/watch?v=96ab_dK6JM0">interesting watching</a>.</p>
<p>To assess the score performance of the AI, I ran the AI 100 times (connected to the browser game via remote control). For each tile, here are the proportions of games in which that tile was achieved at least once:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="dv">2048</span>: <span class="dv">100</span>%</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true"></a><span class="dv">4096</span>: <span class="dv">100</span>%</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true"></a><span class="dv">8192</span>: <span class="dv">100</span>%</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true"></a><span class="dv">16384</span>: <span class="dv">94</span>%</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true"></a><span class="dv">32768</span>: <span class="dv">36</span>%</span></code></pre></div>
<p>The minimum score over all runs was 124024; the maximum score achieved was 794076. The median score is 387222. The AI never failed to obtain the 2048 tile (so it never lost the game even once in 100 games); in fact, it achieved the <strong>8192</strong> tile at least once in every run!</p>
<p>Here’s the screenshot of the best run:</p>
<p><img src="https://i.stack.imgur.com/jG2CL.png" alt="32768 tile, score 794076"></p>
<p>This game took 27830 moves over 96 minutes, or an average of 4.8 moves per second.</p>
<h5>
Implementation
</h2>
<p>My approach encodes the entire board (16 entries) as a single 64-bit integer (where tiles are the nybbles, i.e. 4-bit chunks). On a 64-bit machine, this enables the entire board to be passed around in a single machine register.</p>
<p>Bit shift operations are used to extract individual rows and columns. A single row or column is a 16-bit quantity, so a table of size 65536 can encode transformations which operate on a single row or column. For example, moves are implemented as 4 lookups into a precomputed “move effect table” which describes how each move affects a single row or column (for example, the “move right” table contains the entry “1122 -&gt; 0023” describing how the row [2,2,4,4] becomes the row [0,0,4,8] when moved to the right).</p>
<p>Scoring is also done using table lookup. The tables contain heuristic scores computed on all possible rows/columns, and the resultant score for a board is simply the sum of the table values across each row and column.</p>
<p>This board representation, along with the table lookup approach for movement and scoring, allows the AI to search a huge number of game states in a short period of time (over 10,000,000 game states per second on one core of my mid-2011 laptop).</p>
<p>The expectimax search itself is coded as a recursive search which alternates between “expectation” steps (testing all possible tile spawn locations and values, and weighting their optimized scores by the probability of each possibility), and “maximization” steps (testing all possible moves and selecting the one with the best score). The tree search terminates when it sees a previously-seen position (using a <a href="http://en.wikipedia.org/wiki/Transposition_table">transposition table</a>), when it reaches a predefined depth limit, or when it reaches a board state that is highly unlikely (e.g. it was reached by getting 6 “4” tiles in a row from the starting position). The typical search depth is 4-8 moves.</p>
<h5>
Heuristics
</h2>
<p>Several heuristics are used to direct the optimization algorithm towards favorable positions. The precise choice of heuristic has a huge effect on the performance of the algorithm. The various heuristics are weighted and combined into a positional score, which determines how “good” a given board position is. The optimization search will then aim to maximize the average score of all possible board positions. The actual score, as shown by the game, is <em>not</em> used to calculate the board score, since it is too heavily weighted in favor of merging tiles (when delayed merging could produce a large benefit).</p>
<p>Initially, I used two very simple heuristics, granting “bonuses” for open squares and for having large values on the edge. These heuristics performed pretty well, frequently achieving 16384 but never getting to 32768.</p>
<p>Petr Morávek (<span class="citation" data-cites="xificurk">@xificurk</span>) took my AI and added two new heuristics. The first heuristic was a penalty for having non-monotonic rows and columns which increased as the ranks increased, ensuring that non-monotonic rows of small numbers would not strongly affect the score, but non-monotonic rows of large numbers hurt the score substantially. The second heuristic counted the number of potential merges (adjacent equal values) in addition to open spaces. These two heuristics served to push the algorithm towards monotonic boards (which are easier to merge), and towards board positions with lots of merges (encouraging it to align merges where possible for greater effect).</p>
<p>Furthermore, Petr also optimized the heuristic weights using a “meta-optimization” strategy (using an algorithm called <a href="https://en.wikipedia.org/wiki/CMA-ES">CMA-ES</a>), where the weights themselves were adjusted to obtain the highest possible average score.</p>
<p>The effect of these changes are extremely significant. The algorithm went from achieving the 16384 tile around 13% of the time to achieving it over 90% of the time, and the algorithm began to achieve 32768 over 1/3 of the time (whereas the old heuristics never once produced a 32768 tile).</p>
<p>I believe there’s still room for improvement on the heuristics. This algorithm definitely isn’t yet “optimal”, but I feel like it’s getting pretty close.</p>
<hr>
<p>That the AI achieves the 32768 tile in over a third of its games is a huge milestone; I will be surprised to hear if any human players have achieved 32768 on the official game (i.e. without using tools like savestates or undo). I think the 65536 tile is within reach!</p>
<p>You can try the AI for yourself. The code is available at <a href="https://github.com/nneonneo/2048-ai">https://github.com/nneonneo/2048-ai</a>.</p>
</section>
<section id="answer-2-score-1245" class="level4">
<h4>Answer 2 (score 1245)</h4>
<p>I’m the author of the AI program that others have mentioned in this thread. You can view the AI in <a href="http://ovolve.github.io/2048-AI/" rel="noreferrer">action</a> or read the <a href="https://github.com/ovolve/2048-AI" rel="noreferrer">source</a>.</p>
<p>Currently, the program achieves about a 90% win rate running in javascript in the browser on my laptop given about 100 milliseconds of thinking time per move, so while not perfect (yet!) it performs pretty well.</p>
<p>Since the game is a discrete state space, perfect information, turn-based game like chess and checkers, I used the same methods that have been proven to work on those games, namely <a href="http://www.flyingmachinestudios.com/programming/minimax/" rel="noreferrer">minimax</a> <a href="http://xkcd.com/832/" rel="noreferrer">search</a> with <a href="http://cs.ucla.edu/~rosen/161/notes/alphabeta.html" rel="noreferrer">alpha-beta pruning</a>. Since there is already a lot of info on that algorithm out there, I’ll just talk about the two main heuristics that I use in the <a href="http://en.wikipedia.org/wiki/Evaluation_function" rel="noreferrer">static evaluation function</a> and which formalize many of the intuitions that other people have expressed here.</p>
<h5>
Monotonicity
</h3>
<p>This heuristic tries to ensure that the values of the tiles are all either increasing or decreasing along both the left/right and up/down directions. This heuristic alone captures the intuition that many others have mentioned, that higher valued tiles should be clustered in a corner. It will typically prevent smaller valued tiles from getting orphaned and will keep the board very organized, with smaller tiles cascading in and filling up into the larger tiles.</p>
<p>Here’s a screenshot of a perfectly monotonic grid. I obtained this by running the algorithm with the eval function set to disregard the other heuristics and only consider monotonicity.</p>
<p><img src="https://i.stack.imgur.com/Oce4N.png" alt="A perfectly monotonic 2048 board"></p>
<h5>
Smoothness
</h3>
<p>The above heuristic alone tends to create structures in which adjacent tiles are decreasing in value, but of course in order to merge, adjacent tiles need to be the same value. Therefore, the smoothness heuristic just measures the value difference between neighboring tiles, trying to minimize this count.</p>
<p>A commenter on Hacker News gave <a href="https://news.ycombinator.com/item?id=7381082" rel="noreferrer">an interesting formalization</a> of this idea in terms of graph theory.</p>
<p>Here’s a screenshot of a perfectly smooth grid, courtesy of <a href="http://jennypeng.me/2048/" rel="noreferrer">this excellent parody fork</a>.</p>
<p><img src="https://i.stack.imgur.com/wxgDV.png" alt="A perfectly smooth 2048 board"></p>
<h5>
Free Tiles
</h3>
<p>And finally, there is a penalty for having too few free tiles, since options can quickly run out when the game board gets too cramped.</p>
<p>And that’s it! Searching through the game space while optimizing these criteria yields remarkably good performance. One advantage to using a generalized approach like this rather than an explicitly coded move strategy is that the algorithm can often find interesting and unexpected solutions. If you watch it run, it will often make surprising but effective moves, like suddenly switching which wall or corner it’s building up against.</p>
<h5>
<em>Edit:</em>
</h2>
<p>Here’s a demonstration of the power of this approach. I uncapped the tile values (so it kept going after reaching 2048) and here is the best result after eight trials.</p>
<p><img src="https://i.stack.imgur.com/x69jZ.png" alt="4096"></p>
<p>Yes, that’s a 4096 alongside a 2048. =) That means it achieved the elusive 2048 tile three times on the same board.</p>
</section>
<section id="answer-3-score-134" class="level4">
<h4>Answer 3 (score 134)</h4>
<p>I became interested in the idea of an AI for this game containing <strong>no hard-coded intelligence</strong> (i.e no heuristics, scoring functions etc). The AI should <em>“know”</em> only the game rules, and <em>“figure out”</em> the game play. This is in contrast to most AIs (like the ones in this thread) where the game play is essentially brute force steered by a scoring function representing human understanding of the game.</p>
<h5>
AI Algorithm
</h2>
<p>I found a simple yet surprisingly good playing algorithm: To determine the next move for a given board, the AI plays the game in memory using <strong>random moves</strong> until the game is over. This is done several times while keeping track of the end game score. Then the average end score <em>per starting move</em> is calculated. The starting move with the highest average end score is chosen as the next move.</p>
<p>With just 100 runs (i.e in memory games) per move, the AI achieves the 2048 tile 80% of the times and the 4096 tile 50% of the times. Using 10000 runs gets the 2048 tile 100%, 70% for 4096 tile, and about 1% for the 8192 tile.</p>
<p><a href="http://ronzil.github.io/2048-AI/" rel="noreferrer">See it in action</a></p>
<p>The best achieved score is shown here:</p>
<p><img src="https://i.stack.imgur.com/zk5Pu.png" alt="best score"></p>
<p>An interesting fact about this algorithm is that while the random-play games are unsurprisingly quite bad, choosing the best (or least bad) move leads to very good game play: A typical AI game can reach 70000 points and last 3000 moves, yet the in-memory random play games from any given position yield an average of 340 additional points in about 40 extra moves before dying. (You can see this for yourself by running the AI and opening the debug console.)</p>
<p>This graph illustrates this point: The blue line shows the board score after each move. The red line shows the algorithm’s <strong>best</strong> random-run end game score from that position. In essence, the red values are “pulling” the blue values upwards towards them, as they are the algorithm’s best guess. It’s interesting to see the red line is just a tiny bit above the blue line at each point, yet the blue line continues to increase more and more.</p>
<p><img src="https://i.stack.imgur.com/gXI6b.png" alt="scoring graph"></p>
<p>I find it quite surprising that the algorithm doesn’t need to actually foresee good game play in order to chose the moves that produce it.</p>
<p>Searching later I found this algorithm might be classified as a <a href="http://en.wikipedia.org/wiki/Monte-Carlo_tree_search
#Pure_Monte_Carlo_game_search" rel="noreferrer">Pure Monte Carlo Tree Search</a> algorithm.</p>
<h5>
Implementation and Links
</h2>
<p>
First I created a JavaScript version which can be <a href="http://ronzil.github.io/2048-AI/" rel="noreferrer">seen in action here</a>. This version can run 100’s of runs in decent time. Open the console for extra info. (<a href="https://github.com/ronzil/2048-AI" rel="noreferrer">source</a>)
</p>
<p>
Later, in order to play around some more I used <span class="citation" data-cites="nneonneo">@nneonneo</span> highly optimized infrastructure and implemented my version in C++. This version allows for up to 100000 runs per move and even 1000000 if you have the patience. Building instructions provided. It runs in the console and also has a remote-control to play the web version. (<a href="https://github.com/ronzil/2048-ai-cpp" rel="noreferrer">source</a>)
</p>
<h5>
Results
</h2>
<p>Surprisingly, increasing the number of runs does not drastically improve the game play. There seems to be a limit to this strategy at around 80000 points with the 4096 tile and all the smaller ones, very close to the achieving the 8192 tile. Increasing the number of runs from 100 to 100000 increases the <strong>odds</strong> of getting to this score limit (from 5% to 40%) but not breaking through it.</p>
<p>Running 10000 runs with a temporary increase to 1000000 near critical positions managed to break this barrier less than 1% of the times achieving a max score of 129892 and the 8192 tile.</p>
<h5>
Improvements
</h2>
<p>After implementing this algorithm I tried many improvements including using the min or max scores, or a combination of min,max,and avg. I also tried using depth: Instead of trying K runs per move, I tried K moves per move <em>list</em> of a given length (“up,up,left” for example) and selecting the first move of the best scoring move list.</p>
<p>Later I implemented a scoring tree that took into account the conditional probability of being able to play a move after a given move list.</p>
<p>However, none of these ideas showed any real advantage over the simple first idea. I left the code for these ideas commented out in the C++ code.</p>
<p>I did add a “Deep Search” mechanism that increased the run number temporarily to 1000000 when any of the runs managed to accidentally reach the next highest tile. This offered a time improvement.</p>
<p>I’d be interested to hear if anyone has other improvement ideas that maintain the domain-independence of the AI.</p>
<h5>
2048 Variants and Clones
</h2>
<p>Just for fun, I’ve also <a href="http://ronzil.github.io/2048AI-AllClones/" rel="noreferrer">implemented the AI as a bookmarklet</a>, hooking into the game’s controls. This allows the AI to work with the original game and <strong>many of its variants</strong>.</p>
<p>This is possible due to domain-independent nature of the AI. Some of the variants are quite distinct, such as the Hexagonal clone.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="calculate-distance-between-two-latitude-longitude-points-haversine-formula-score-708973-in-2017" class="level3">
<h3>4: Calculate distance between two latitude-longitude points? (Haversine formula) (score <a href="https://stackoverflow.com/q/27928.html">708973</a> in 2017)</h3>
<section id="question-3" class="level4">
<h4>Question</h4>
<p>How do I calculate the distance between two points specified by latitude and longitude?</p>
<p>For clarification, I’d like the distance in kilometers; the points use the WGS84 system and I’d like to understand the relative accuracies of the approaches available.</p>
</section>
<section id="answer-accepted-score-1051" class="level4">
<h4>Answer accepted (score 1051)</h4>
<p>This <a href="http://www.movable-type.co.uk/scripts/latlong.html" rel="noreferrer">link</a> might be helpful to you, as it details the use of the <a href="http://en.wikipedia.org/wiki/Haversine_formula" rel="noreferrer">Haversine formula</a> to calculate the distance.</p>
<p>Excerpt:</p>
<blockquote>
<p>
This script [in Javascript] calculates great-circle distances between the two points – that is, the shortest distance over the earth’s surface – using the ‘Haversine’ formula.
</p>
</blockquote>
<div class="sourceCode" id="cb17"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a>function getDistanceFromLatLonInKm(lat1,lon1,lat2,lon2) {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a>  var R = <span class="dv">6371</span>; <span class="co">// Radius of the earth in km</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a>  var dLat = deg2rad(lat2-lat1);  <span class="co">// deg2rad below</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true"></a>  var dLon = deg2rad(lon2-lon1); </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true"></a>  var a = </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true"></a>    Math.sin(dLat/<span class="dv">2</span>) * Math.sin(dLat/<span class="dv">2</span>) +</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true"></a>    Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true"></a>    Math.sin(dLon/<span class="dv">2</span>) * Math.sin(dLon/<span class="dv">2</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true"></a>    ; </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true"></a>  var c = <span class="dv">2</span> * Math.atan2(Math.sqrt(a), Math.sqrt(<span class="dv">1</span>-a)); </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true"></a>  var d = R * c; <span class="co">// Distance in km</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true"></a>  <span class="cf">return</span> d;</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true"></a>}</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true"></a>function deg2rad(deg) {</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true"></a>  <span class="cf">return</span> deg * (Math.PI/<span class="dv">180</span>)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-324" class="level4">
<h4>Answer 2 (score 324)</h4>
<p>I needed to calculate a lot of distances between the points for my project, so I went ahead and tried to optimize the code, I have found here. On average in different browsers my new implementation <strong>runs 2 times faster</strong> than the most upvoted answer.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a>function distance(lat1, lon1, lat2, lon2) {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a>  var p = <span class="fl">0.017453292519943295</span>;    <span class="co">// Math.PI / 180</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true"></a>  var c = Math.cos;</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true"></a>  var a = <span class="fl">0.5</span> - c((lat2 - lat1) * p)/<span class="dv">2</span> + </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true"></a>          c(lat1 * p) * c(lat2 * p) * </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true"></a>          (<span class="dv">1</span> - c((lon2 - lon1) * p))/<span class="dv">2</span>;</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true"></a>  <span class="cf">return</span> <span class="dv">12742</span> * Math.asin(Math.sqrt(a)); <span class="co">// 2 * R; R = 6371 km</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>You can play with my jsPerf and see the <a href="http://jsperf.com/haversine-salvador/8" rel="noreferrer">results here</a>.</p>
<p>Recently I needed to do the same in python, so here is a <strong>python implementation</strong>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a>from math import cos, asin, sqrt</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true"></a>def distance(lat1, lon1, lat2, lon2):</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true"></a>    p = <span class="fl">0.017453292519943295</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true"></a><span class="er">#Pi/180</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true"></a>    a = <span class="fl">0.5</span> - cos((lat2 - lat1) * p)/<span class="dv">2</span> + cos(lat1 * p) * cos(lat2 * p) * (<span class="dv">1</span> - cos((lon2 - lon1) * p)) / <span class="dv">2</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">12742</span> * asin(sqrt(a))</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true"></a><span class="er">#2*R*asin...</span></span></code></pre></div>
<p>And for the sake of completeness: <a href="https://en.wikipedia.org/wiki/Haversine_formula" rel="noreferrer">Haversine</a> on wiki.</p>
</section>
<section id="answer-3-score-64" class="level4">
<h4>Answer 3 (score 64)</h4>
<p>Here is a C # Implementation:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true"></a><span class="dt">static</span> class DistanceAlgorithm</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true"></a>{</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true"></a>    <span class="dt">const</span> <span class="dt">double</span> PIx = <span class="fl">3.141592653589793</span>;</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true"></a>    <span class="dt">const</span> <span class="dt">double</span> RADIUS = <span class="fl">6378.16</span>;</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true"></a></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;summary&gt;</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true"></a>    <span class="co">/// Convert degrees to Radians</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;/summary&gt;</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">&quot;x&quot;</span><span class="kw">&gt;</span><span class="co">Degrees</span><span class="kw">&lt;/param&gt;</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;returns&gt;</span><span class="co">The equivalent in radians</span><span class="kw">&lt;/returns&gt;</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">double</span> Radians(<span class="dt">double</span> x)</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true"></a>    {</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true"></a>        <span class="cf">return</span> x * PIx / <span class="dv">180</span>;</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true"></a>    }</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;summary&gt;</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true"></a>    <span class="co">/// Calculate the distance between two places.</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;/summary&gt;</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">&quot;lon1&quot;</span><span class="kw">&gt;&lt;/param&gt;</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">&quot;lat1&quot;</span><span class="kw">&gt;&lt;/param&gt;</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">&quot;lon2&quot;</span><span class="kw">&gt;&lt;/param&gt;</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;param</span><span class="ot"> name=</span><span class="dt">&quot;lat2&quot;</span><span class="kw">&gt;&lt;/param&gt;</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;returns&gt;&lt;/returns&gt;</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">double</span> DistanceBetweenPlaces(</span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true"></a>        <span class="dt">double</span> lon1,</span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true"></a>        <span class="dt">double</span> lat1,</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true"></a>        <span class="dt">double</span> lon2,</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true"></a>        <span class="dt">double</span> lat2)</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true"></a>    {</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true"></a>        <span class="dt">double</span> dlon = Radians(lon2 - lon1);</span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true"></a>        <span class="dt">double</span> dlat = Radians(lat2 - lat1);</span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true"></a></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true"></a>        <span class="dt">double</span> a = (Math.Sin(dlat / <span class="dv">2</span>) * Math.Sin(dlat / <span class="dv">2</span>)) + Math.Cos(Radians(lat1)) * Math.Cos(Radians(lat2)) * (Math.Sin(dlon / <span class="dv">2</span>) * Math.Sin(dlon / <span class="dv">2</span>));</span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true"></a>        <span class="dt">double</span> angle = <span class="dv">2</span> * Math.Atan2(Math.Sqrt(a), Math.Sqrt(<span class="dv">1</span> - a));</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true"></a>        <span class="cf">return</span> angle * RADIUS;</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true"></a>    }</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true"></a></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-a-plain-english-explanation-of-big-o-notation-score-668590-in-2016" class="level3">
<h3>5: What is a plain English explanation of “Big O” notation? (score <a href="https://stackoverflow.com/q/487258.html">668590</a> in 2016)</h3>
<section id="question-4" class="level4">
<h4>Question</h4>
<p>I’d prefer as little formal definition as possible and simple mathematics.</p>
</section>
<section id="answer-accepted-score-6464" class="level4">
<h4>Answer accepted (score 6464)</h4>
<p>Quick note, this is almost certainly confusing <a href="http://en.wikipedia.org/wiki/Big_O_notation" rel="noreferrer">Big O notation</a> (which is an upper bound) with Theta notation “Θ” (which is a two-side bound). In my experience, this is actually typical of discussions in non-academic settings. Apologies for any confusion caused.</p>
<hr>
<p>Big O complexity can be visualized with this graph:</p>
<p><img src="https://i.stack.imgur.com/WcBRI.png" alt="Big O Analysis"></p>
<p>The simplest definition I can give for Big-O notation is this:</p>
<p><strong>Big-O notation is a relative representation of the complexity of an algorithm.</strong></p>
<p>There are some important and deliberately chosen words in that sentence:</p>
<blockquote>
<ul>
<li>
<strong>relative:</strong> you can only compare apples to apples. You can’t compare an algorithm to do arithmetic multiplication to an algorithm that sorts a list of integers. But a comparison of two algorithms to do arithmetic operations (one multiplication, one addition) will tell you something meaningful;
</li>
<li>
<strong>representation:</strong> Big-O (in its simplest form) reduces the comparison between algorithms to a single variable. That variable is chosen based on observations or assumptions. For example, sorting algorithms are typically compared based on comparison operations (comparing two nodes to determine their relative ordering). This assumes that comparison is expensive. But what if comparison is cheap but swapping is expensive? It changes the comparison; and
</li>
<li>
<strong>complexity:</strong> if it takes me one second to sort 10,000 elements how long will it take me to sort one million? Complexity in this instance is a relative measure to something else.
</li>
</ul>
</blockquote>
<p>Come back and reread the above when you’ve read the rest.</p>
<p>The best example of Big-O I can think of is doing arithmetic. Take two numbers (123456 and 789012). The basic arithmetic operations we learnt in school were:</p>
<blockquote>
<ul>
<li>
addition;
</li>
<li>
subtraction;
</li>
<li>
multiplication; and
</li>
<li>
division.
</li>
</ul>
</blockquote>
<p>Each of these is an operation or a problem. A method of solving these is called an <strong>algorithm</strong>.</p>
<p>Addition is the simplest. You line the numbers up (to the right) and add the digits in a column writing the last number of that addition in the result. The ‘tens’ part of that number is carried over to the next column.</p>
<p>Let’s assume that the addition of these numbers is the most expensive operation in this algorithm. It stands to reason that to add these two numbers together we have to add together 6 digits (and possibly carry a 7th). If we add two 100 digit numbers together we have to do 100 additions. If we add <strong>two</strong> 10,000 digit numbers we have to do 10,000 additions.</p>
<p>See the pattern? The <strong>complexity</strong> (being the number of operations) is directly proportional to the number of digits <em>n</em> in the larger number. We call this <strong>O(n)</strong> or <strong>linear complexity</strong>.</p>
<p>Subtraction is similar (except you may need to borrow instead of carry).</p>
<p>Multiplication is different. You line the numbers up, take the first digit in the bottom number and multiply it in turn against each digit in the top number and so on through each digit. So to multiply our two 6 digit numbers we must do 36 multiplications. We may need to do as many as 10 or 11 column adds to get the end result too.</p>
<p>If we have two 100-digit numbers we need to do 10,000 multiplications and 200 adds. For two one million digit numbers we need to do one trillion (10<sup>12</sup>) multiplications and two million adds.</p>
<p>As the algorithm scales with n-<em>squared</em>, this is <strong>O(n<sup>2</sup>)</strong> or <strong>quadratic complexity</strong>. This is a good time to introduce another important concept:</p>
<p><strong>We only care about the most significant portion of complexity.</strong></p>
<p>The astute may have realized that we could express the number of operations as: n<sup>2</sup> + 2n. But as you saw from our example with two numbers of a million digits apiece, the second term (2n) becomes insignificant (accounting for 0.0002% of the total operations by that stage).</p>
<p>One can notice that we’ve assumed the worst case scenario here. While multiplying 6 digit numbers if one of them is 4 digit and the other one is 6 digit, then we only have 24 multiplications. Still we calculate the worst case scenario for that ‘n’, i.e when both are 6 digit numbers. Hence Big-O notation is about the Worst-case scenario of an algorithm</p>
<h5>
The Telephone Book
</h1>
<p>The next best example I can think of is the telephone book, normally called the White Pages or similar but it’ll vary from country to country. But I’m talking about the one that lists people by surname and then initials or first name, possibly address and then telephone numbers.</p>
<p>Now if you were instructing a computer to look up the phone number for “John Smith” in a telephone book that contains 1,000,000 names, what would you do? Ignoring the fact that you could guess how far in the S’s started (let’s assume you can’t), what would you do?</p>
<p>A typical implementation might be to open up to the middle, take the 500,000<sup>th</sup> and compare it to “Smith”. If it happens to be “Smith, John”, we just got real lucky. Far more likely is that “John Smith” will be before or after that name. If it’s after we then divide the last half of the phone book in half and repeat. If it’s before then we divide the first half of the phone book in half and repeat. And so on.</p>
<p>This is called a <strong>binary search</strong> and is used every day in programming whether you realize it or not.</p>
<p>So if you want to find a name in a phone book of a million names you can actually find any name by doing this at most 20 times. In comparing search algorithms we decide that this comparison is our ‘n’.</p>
<blockquote>
<ul>
<li>
For a phone book of 3 names it takes 2 comparisons (at most).
</li>
<li>
For 7 it takes at most 3.
</li>
<li>
For 15 it takes 4.
</li>
<li>
…
</li>
<li>
For 1,000,000 it takes 20.
</li>
</ul>
</blockquote>
<p>That is staggeringly good isn’t it?</p>
<p>In Big-O terms this is <strong>O(log n)</strong> or <strong>logarithmic complexity</strong>. Now the logarithm in question could be ln (base e), log<sub>10</sub>, log<sub>2</sub> or some other base. It doesn’t matter it’s still O(log n) just like O(2n<sup>2</sup>) and O(100n<sup>2</sup>) are still both O(n<sup>2</sup>).</p>
<p>It’s worthwhile at this point to explain that Big O can be used to determine three cases with an algorithm:</p>
<blockquote>
<ul>
<li>
<strong>Best Case:</strong> In the telephone book search, the best case is that we find the name in one comparison. This is <strong>O(1)</strong> or <strong>constant complexity</strong>;
</li>
<li>
<strong>Expected Case:</strong> As discussed above this is O(log n); and
</li>
<li>
<strong>Worst Case:</strong> This is also O(log n).
</li>
</ul>
</blockquote>
<p>Normally we don’t care about the best case. We’re interested in the expected and worst case. Sometimes one or the other of these will be more important.</p>
<p>Back to the telephone book.</p>
<p>What if you have a phone number and want to find a name? The police have a reverse phone book but such look-ups are denied to the general public. Or are they? Technically you can reverse look-up a number in an ordinary phone book. How?</p>
<p>You start at the first name and compare the number. If it’s a match, great, if not, you move on to the next. You have to do it this way because the phone book is <strong>unordered</strong> (by phone number anyway).</p>
<p>So to find a name given the phone number (reverse lookup):</p>
<blockquote>
<ul>
<li>
<strong>Best Case:</strong> O(1);
</li>
<li>
<strong>Expected Case:</strong> O(n) (for 500,000); and
</li>
<li>
<strong>Worst Case:</strong> O(n) (for 1,000,000).
</li>
</ul>
</blockquote>
<h5>
The Travelling Salesman
</h1>
<p>This is quite a famous problem in computer science and deserves a mention. In this problem you have N towns. Each of those towns is linked to 1 or more other towns by a road of a certain distance. The Travelling Salesman problem is to find the shortest tour that visits every town.</p>
<p>Sounds simple? Think again.</p>
<p>If you have 3 towns A, B and C with roads between all pairs then you could go:</p>
<blockquote>
<ul>
<li>
A → B → C
</li>
<li>
A → C → B
</li>
<li>
B → C → A
</li>
<li>
B → A → C
</li>
<li>
C → A → B
</li>
<li>
C → B → A
</li>
</ul>
</blockquote>
<p>Well actually there’s less than that because some of these are equivalent (A → B → C and C → B → A are equivalent, for example, because they use the same roads, just in reverse).</p>
<p>In actuality there are 3 possibilities.</p>
<blockquote>
<ul>
<li>
Take this to 4 towns and you have (iirc) 12 possibilities.
</li>
<li>
With 5 it’s 60.
</li>
<li>
6 becomes 360.
</li>
</ul>
</blockquote>
<p>This is a function of a mathematical operation called a <strong>factorial</strong>. Basically:</p>
<blockquote>
<ul>
<li>
5! = 5 × 4 × 3 × 2 × 1 = 120
</li>
<li>
6! = 6 × 5 × 4 × 3 × 2 × 1 = 720
</li>
<li>
7! = 7 × 6 × 5 × 4 × 3 × 2 × 1 = 5040
</li>
<li>
…
</li>
<li>
25! = 25 × 24 × … × 2 × 1 = 15,511,210,043,330,985,984,000,000
</li>
<li>
…
</li>
<li>
50! = 50 × 49 × … × 2 × 1 = 3.04140932 × 10<sup>64</sup>
</li>
</ul>
</blockquote>
<p>So the Big-O of the Travelling Salesman problem is <strong>O(n!)</strong> or <strong>factorial or combinatorial complexity</strong>.</p>
<p><strong>By the time you get to 200 towns there isn’t enough time left in the universe to solve the problem with traditional computers.</strong></p>
<p>Something to think about.</p>
<h5>
Polynomial Time
</h1>
<p>Another point I wanted to make quick mention of is that any algorithm that has a complexity of <strong>O(n<sup>a</sup>)</strong> is said to have <strong>polynomial complexity</strong> or is solvable in <strong>polynomial time</strong>.</p>
<p>O(n), O(n<sup>2</sup>) etc. are all polynomial time. Some problems cannot be solved in polynomial time. Certain things are used in the world because of this. <a href="https://en.wikipedia.org/wiki/Public-key_cryptography" rel="noreferrer">Public Key Cryptography</a> is a prime example. It is computationally hard to find two prime factors of a very large number. If it wasn’t, we couldn’t use the public key systems we use.</p>
<p>Anyway, that’s it for my (hopefully plain English) explanation of Big O (revised).</p>
</section>
<section id="answer-2-score-707" class="level4">
<h4>Answer 2 (score 707)</h4>
<p>It shows how an algorithm scales.</p>
<p><strong>O(n<sup>2</sup>)</strong>: known as <strong>Quadratic complexity</strong></p>
<ul>
<li>
1 item: 1 second
</li>
<li>
10 items: 100 seconds
</li>
<li>
100 items: 10000 seconds
</li>
</ul>
<p>Notice that the number of items increases by a factor of 10, but the time increases by a factor of 10<sup>2</sup>. Basically, n=10 and so O(n<sup>2</sup>) gives us the scaling factor n<sup>2</sup> which is 10<sup>2</sup>.</p>
<p><strong>O(n)</strong>: known as <strong>Linear complexity</strong></p>
<ul>
<li>
1 item: 1 second
</li>
<li>
10 items: 10 seconds
</li>
<li>
100 items: 100 seconds
</li>
</ul>
<p>This time the number of items increases by a factor of 10, and so does the time. n=10 and so O(n)’s scaling factor is 10.</p>
<p><strong>O(1)</strong>: known as <strong>Constant complexity</strong></p>
<ul>
<li>
1 item: 1 second
</li>
<li>
10 items: 1 second
</li>
<li>
100 items: 1 second
</li>
</ul>
<p>The number of items is still increasing by a factor of 10, but the scaling factor of O(1) is always 1.</p>
<p><strong>O(log n)</strong>: known as <strong>Logarithmic complexity</strong></p>
<ul>
<li>
1 item: 1 second
</li>
<li>
10 items: 2 seconds
</li>
<li>
100 items: 3 seconds
</li>
<li>
1000 items: 4 seconds
</li>
<li>
10000 items: 5 seconds
</li>
</ul>
<p>The number of computations is only increased by a log of the input value. So in this case, assuming each computation takes 1 second, the log of the input <code>n</code> is the time required, hence <code>log n</code>.</p>
<p>That’s the gist of it. They reduce the maths down so it might not be exactly n<sup>2</sup> or whatever they say it is, but that’ll be the dominating factor in the scaling.</p>
</section>
<section id="answer-3-score-389" class="level4">
<h4>Answer 3 (score 389)</h4>
<p>Big-O notation (also called “asymptotic growth” notation) is <em>what functions “look like” when you ignore constant factors and stuff near the origin</em>. We use it to talk about <strong>how thing scale</strong>.</p>
<hr>
<p><strong>Basics</strong></p>
<p><strong>for “sufficiently” large inputs…</strong></p>
<ul>
<li>
<code>f(x) ∈ O(upperbound)</code> means <code>f</code> “grows no faster than” <code>upperbound</code>
</li>
<li>
<code>f(x) ∈ Ɵ(justlikethis)</code> mean <code>f</code> “grows exactly like” <code>justlikethis</code>
</li>
<li>
<code>f(x) ∈ Ω(lowerbound)</code> means <code>f</code> “grows no slower than” <code>lowerbound</code>
</li>
</ul>
<p>big-O notation doesn’t care about constant factors: the function <code>9x²</code> is said to “grow exactly like” <code>10x²</code>. Neither does big-O <em>asymptotic</em> notation care about <em>non-asymptotic</em> stuff (“stuff near the origin” or “what happens when the problem size is small”): the function <code>10x²</code> is said to “grow exactly like” <code>10x² - x + 2</code>.</p>
<p>Why would you want to ignore the smaller parts of the equation? Because they become completely dwarfed by the big parts of the equation as you consider larger and larger scales; their contribution becomes dwarfed and irrelevant. (See example section.)</p>
<p>Put another way, it’s all about the <strong>ratio</strong> as you go to infinity. <em>If you divide the actual time it takes by the <code>O(...)</code>, you will get a constant factor in the limit of large inputs.</em> Intuitively this makes sense: functions “scale like” one another if you can multiply one to get the other. That is, when we say…</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a>actualAlgorithmTime(N) ∈ O(bound(N))</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a>                                       e.g. <span class="st">&quot;time to mergesort N elements </span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true"></a>                                             is O(N log(N))<span class="st">&quot;</span></span></code></pre></div>
<p>… this means that <strong><em>for “large enough” problem sizes N</em></strong> (if we ignore stuff near the origin), there exists some constant (e.g. 2.5, completely made up) such that:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a>actualAlgorithmTime(N)                 e.g. <span class="st">&quot;mergesort_duration(N)       &quot;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true"></a>────────────────────── &lt; constant            ───────────────────── &lt; <span class="fl">2.5</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true"></a>       bound(N)                                    N log(N)         </span></code></pre></div>
<p>There are many choices of constant; often the “best” choice is known as the “constant factor” of the algorithm… but we often ignore it like we ignore non-largest terms (see Constant Factors section for why they don’t usually matter). You can also think of the above equation as a bound, saying “<em>In the worst-case scenario, the time it takes will never be worse than roughly <code>N*log(N)</code>, within a factor of 2.5 (a constant factor we don’t care much about)</em>”.</p>
<p>In general, <code>O(...)</code> is the most useful one because we often care about worst-case behavior. If <code>f(x)</code> represents something “bad” like processor or memory usage, then “<code>f(x) ∈ O(upperbound)</code>” means “<code>upperbound</code> is the worst-case scenario of processor/memory usage”.</p>
<hr>
<p><strong>Applications</strong></p>
<p>As a purely mathematical construct, big-O notation is not limited to talking about processing time and memory. You can use it to discuss the asymptotics of anything where scaling is meaningful, such as:</p>
<ul>
<li>
the number of possibly handshakes among <code>N</code> people at a party (<code>Ɵ(N²)</code>, specifically <code>N(N-1)/2</code>, but what matters is that it “scales like” <code>N²</code>)
</li>
<li>
probabilistic expected number of people who have seen some viral marketing as a function of time
</li>
<li>
how website latency scales with the number of processing units in a CPU or GPU or computer cluster
</li>
<li>
how heat output scales on CPU dies as a function of transistor count, voltage, etc.
</li>
<li>
how much time an algorithm needs to run, as a function of input size
</li>
<li>
how much space an algorithm needs to run, as a function of input size
</li>
</ul>
<hr>
<p><strong>Example</strong></p>
<p>For the handshake example above, everyone in a room shakes everyone else’s hand. In that example, <code>#handshakes ∈ Ɵ(N²)</code>. Why?</p>
<p>Back up a bit: the number of handshakes is exactly n-choose-2 or <code>N*(N-1)/2</code> (each of N people shakes the hands of N-1 other people, but this double-counts handshakes so divide by 2):</p>
<p><a href="https://i.stack.imgur.com/L4HUw.png" rel="noreferrer"><img src="https://i.stack.imgur.com/L4HUw.png" alt="everyone handshakes everyone else. Image credit and license per wikipedia/wikimedia commons &quot;complete graph&quot; article."></a> <a href="https://i.stack.imgur.com/rqQMF.png" rel="noreferrer"><img src="https://i.stack.imgur.com/rqQMF.png" alt="adjacency matrix"></a></p>
<p>However, for very large numbers of people, the linear term <code>N</code> is dwarfed and effectively contributes 0 to the ratio (in the chart: the fraction of empty boxes on the diagonal over total boxes gets smaller as the number of participants becomes larger). Therefore the scaling behavior is <code>order N²</code>, or the number of handshakes “grows like N²”.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true"></a><span class="er">#handshakes(N)</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true"></a>────────────── ≈ <span class="dv">1</span>/<span class="dv">2</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true"></a>     N²</span></code></pre></div>
<p>It’s as if the empty boxes on the diagonal of the chart (N*(N-1)/2 checkmarks) weren’t even there (N<sup>2</sup> checkmarks asymptotically).</p>
<p>(temporary digression from “plain English”:) If you wanted to prove this to yourself, you could perform some simple algebra on the ratio to split it up into multiple terms (<code>lim</code> means “considered in the limit of”, just ignore it if you haven’t seen it, it’s just notation for “and N is really really big”):</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true"></a>    N²/<span class="dv">2</span> - N/<span class="dv">2</span>         (N²)/<span class="dv">2</span>   N/<span class="dv">2</span>         <span class="dv">1</span>/<span class="dv">2</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true"></a>lim ────────── = lim ( ────── - ─── ) = lim ─── = <span class="dv">1</span>/<span class="dv">2</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true"></a>N→∞     N²       N→∞     N²     N²      N→∞  <span class="dv">1</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true"></a>                               ┕━━━┙</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true"></a>             this is <span class="dv">0</span> in the limit of N→∞:</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true"></a>             graph it, or plug in a really large number <span class="cf">for</span> N</span></code></pre></div>
<p><strong>tl;dr: The number of handshakes ‘looks like’ x² so much for large values, that if we were to write down the ratio #handshakes/x², the fact that we don’t need <em>exactly</em> x² handshakes wouldn’t even show up in the decimal for an arbitrarily large while.</strong></p>
<blockquote>
e.g. for x=1million, ratio #handshakes/x²: 0.499999…
</blockquote>
<hr>
<p><strong>Building Intuition</strong></p>
<p>This lets us make statements like…</p>
<blockquote>
"For large enough inputsize=N, no matter what the constant factor is, if I <strong><em>double</strong> the input size</em>…
</blockquote>
<ul>
<li>
<p>… I double the time an O(N) (“linear time”) algorithm takes."</p>
<blockquote class="spoiler">
<strong>N</strong> → (2N) = 2(<strong>N</strong>)
</blockquote>
</li>
<li>
<p>… I double-squared (quadruple) the time an O(N²) (“quadratic time”) algorithm takes." <em>(e.g. a problem 100x as big takes 100²=10000x as long… possibly unsustainable)</em></p>
<blockquote class="spoiler">
<strong>N²</strong> → (2N)² = 4(<strong>N²</strong>)
</blockquote>
</li>
<li>
<p>… I double-cubed (octuple) the time an O(N³) (“cubic time”) algorithm takes." <em>(e.g. a problem 100x as big takes 100³=1000000x as long… very unsustainable)</em></p>
<blockquote class="spoiler">
<strong>cN³</strong> → c(2N)³ = 8(<strong>cN³</strong>)
</blockquote>
</li>
<li>
<p>… I add a fixed amount to the time an O(log(N)) (“logarithmic time”) algorithm takes." <em>(cheap!)</em></p>
<blockquote class="spoiler">
<strong>c log(N)</strong> → c log(2N) = (c log(2))+(<strong>c log(N)</strong>) = (fixed amount)+(<strong>c log(N)</strong>)
</blockquote>
</li>
<li>
<p>… I don’t change the time an O(1) (“constant time”) algorithm takes." <em>(the cheapest!)</em></p>
<blockquote class="spoiler">
<strong>c<em>1</strong> → <strong>c</em>1</strong>
</blockquote>
</li>
<li>
<p>… I “(basically) double” the time an O(N log(N)) algorithm takes." <em>(fairly common)</em></p>
<blockquote class="spoiler">
it’s less than O(N<sup>1.000001</sup>), which you might be willing to call basically linear
</blockquote>
</li>
<li>
<p>… I ridiculously increase the time a O(2<sup>N</sup>) (“exponential time”) algorithm takes." <em>(you’d double (or triple, etc.) the time just by increasing the problem by a single unit)</em></p>
<blockquote class="spoiler">
<strong>2<sup>N</sup></strong> → 2<sup>2N</sup> = (4<sup>N</sup>)…………put another way…… <strong>2<sup>N</sup></strong> → 2<sup>N+1</sup> = 2<sup>N</sup>2<sup>1</sup> = 2 <strong>2<sup>N</sup></strong>
</blockquote>
</li>
</ul>
<p>[for the mathematically inclined, you can mouse over the spoilers for minor sidenotes]</p>
<p>(with credit to <a href="https://stackoverflow.com/a/487292/711085">https://stackoverflow.com/a/487292/711085</a> )</p>
<p>(technically the constant factor could maybe matter in some more esoteric examples, but I’ve phrased things above (e.g. in log(N)) such that it doesn’t)</p>
<p>These are the bread-and-butter orders of growth that programmers and applied computer scientists use as reference points. They see these all the time. (So while you could technically think “Doubling the input makes an O(√N) algorithm 1.414 times slower,” it’s better to think of it as “this is worse than logarithmic but better than linear”.)</p>
<hr>
<p><strong>Constant factors</strong></p>
<p>Usually we don’t care what the specific constant factors are, because they don’t affect the way the function grows. For example, two algorithms may both take <code>O(N)</code> time to complete, but one may be twice as slow as the other. We usually don’t care too much unless the factor is very large, since optimizing is tricky business ( <a href="https://stackoverflow.com/questions/385506/when-is-optimisation-premature">When is optimisation premature?</a> ); also the mere act of picking an algorithm with a better big-O will often improve performance by orders of magnitude.</p>
<p>Some asymptotically superior algorithms (e.g. a non-comparison <code>O(N log(log(N)))</code> sort) can have so large a constant factor (e.g. <code>100000*N log(log(N))</code>), or overhead that is relatively large like <code>O(N log(log(N)))</code> with a hidden <code>+ 100*N</code>, that they are rarely worth using even on “big data”.</p>
<hr>
<p><strong>Why O(N) is sometimes the best you can do, i.e. why we need datastructures</strong></p>
<p><code>O(N)</code> algorithms are in some sense the “best” algorithms if you need to read all your data. The <strong>very act of reading</strong> a bunch of data is an <code>O(N)</code> operation. Loading it into memory is usually <code>O(N)</code> (or faster if you have hardware support, or no time at all if you’ve already read the data). However if you touch or even <em>look</em> at every piece of data (or even every other piece of data), your algorithm will take <code>O(N)</code> time to perform this looking. Nomatter how long your actual algorithm takes, it will be at least <code>O(N)</code> because it spent that time looking at all the data.</p>
<p>The same can be said for the <strong>very act of writing</strong>. All algorithms which print out N things will take N time, because the output is at least that long (e.g. printing out all permutations (ways to rearrange) a set of N playing cards is factorial: <code>O(N!)</code>).</p>
<p>This motivates the use of <strong>data structures</strong>: a data structure requires reading the data only once (usually <code>O(N)</code> time), plus some arbitrary amount of preprocessing (e.g. <code>O(N)</code> or <code>O(N log(N))</code> or <code>O(N²)</code>) which we try to keep small. Thereafter, modifying the data structure (insertions / deletions / etc.) and making queries on the data take very little time, such as <code>O(1)</code> or <code>O(log(N))</code>. You then proceed to make a large number of queries! In general, the more work you’re willing to do ahead of time, the less work you’ll have to do later on.</p>
<p>For example, say you had the latitude and longitude coordinates of millions of roads segments, and wanted to find all street intersections.</p>
<ul>
<li>
Naive method: If you had the coordinates of a street intersection, and wanted to examine nearby streets, you would have to go through the millions of segments each time, and check each one for adjacency.
</li>
<li>
If you only needed to do this once, it would not be a problem to have to do the naive method of <code>O(N)</code> work only once, but if you want to do it many times (in this case, <code>N</code> times, once for each segment), we’d have to do <code>O(N²)</code> work, or 1000000²=1000000000000 operations. Not good (a modern computer can perform about a billion operations per second).
</li>
<li>
If we use a simple structure called a hash table (an instant-speed lookup table, also known as a hashmap or dictionary), we pay a small cost by preprocessing everything in <code>O(N)</code> time. Thereafter, it only takes constant time on average to look up something by its key (in this case, our key is the latitude and longitude coordinates, rounded into a grid; we search the adjacent gridspaces of which there are only 9, which is a constant).
</li>
<li>
Our task went from an infeasible <code>O(N²)</code> to a manageable <code>O(N)</code>, and all we had to do was pay a minor cost to make a hash table.
</li>
<li>
<strong>analogy</strong>: The analogy in this particular case is a jigsaw puzzle: We created a data structure which exploits some property of the data. If our road segments are like puzzle pieces, we group them by matching color and pattern. We then exploit this to avoid doing extra work later (comparing puzzle pieces of like color to each other, not to every other single puzzle piece).
</li>
</ul>
<p>The moral of the story: a data structure lets us speed up operations. Even more advanced data structures can let you combine, delay, or even ignore operations in incredibly clever ways. Different problems would have different analogies, but they’d all involve organizing the data in a way that exploits some structure we care about, or which we’ve artificially imposed on it for bookkeeping. We do work ahead of time (basically planning and organizing), and now repeated tasks are much much easier!</p>
<hr>
<p><strong>Practical example: visualizing orders of growth while coding</strong></p>
<p>Asymptotic notation is, at its core, quite separate from programming. Asymptotic notation is a mathematical framework for thinking about how things scale, and can be used in many different fields. That said… this is how you <em>apply</em> asymptotic notation to coding.</p>
<p>The basics: Whenever we interact with every element in a collection of size A (such as an array, a set, all keys of a map, etc.), or perform A iterations of a loop, that is a multiplcative factor of size A. Why do I say “a multiplicative factor”?–because loops and functions (almost by definition) have multiplicative running time: the number of iterations, times work done in the loop (or for functions: the number of times you call the function, times work done in the function). (This holds if we don’t do anything fancy, like skip loops or exit the loop early, or change control flow in the function based on arguments, which is very common.) Here are some examples of visualization techniques, with accompanying pseudocode.</p>
<p>(here, the <code>x</code>s represent constant-time units of work, processor instructions, interpreter opcodes, whatever)</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a><span class="cf">for</span>(i=<span class="dv">0</span>; i&lt;A; i++)        <span class="co">// A * ...</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a>    some O(<span class="dv">1</span>) operation     <span class="co">// 1</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true"></a>--&gt; A*<span class="dv">1</span> --&gt; O(A) time</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true"></a></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true"></a>visualization:</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true"></a>|&lt;------ A -------&gt;|</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true"></a><span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> x x ... x</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true"></a></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true"></a>other languages, multiplying orders of growth:</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true"></a>  javascript, O(A) time and space</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true"></a>    someListOfSizeA.map((x,i) =&gt; [x,i])               </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true"></a>  python, O(rows*cols) time and space</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true"></a>    [[r*c <span class="cf">for</span> c in range(cols)] <span class="cf">for</span> r in range(rows)]</span></code></pre></div>
<p>Example 2:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a><span class="cf">for</span> every x in listOfSizeA:   <span class="co">// A * (...</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true"></a>    some O(<span class="dv">1</span>) operation         <span class="co">// 1</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true"></a>    some O(B) operation         <span class="co">// B</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true"></a>    <span class="cf">for</span> every y in listOfSizeC: <span class="co">// C * (...</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true"></a>        some O(<span class="dv">1</span>) operation       <span class="co">// 1))</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true"></a>--&gt; O(A*(<span class="dv">1</span> + B + C))</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true"></a>    O(A*(B+C))        (<span class="dv">1</span> is dwarfed)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true"></a></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true"></a>visualization:</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true"></a>|&lt;------ A -------&gt;|</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true"></a><span class="dv">1</span> x x x x x x ... x</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true"></a><span class="dv">2</span> x x x x x x ... x ^</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true"></a><span class="dv">3</span> x x x x x x ... x |</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true"></a><span class="dv">4</span> x x x x x x ... x |</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true"></a><span class="dv">5</span> x x x x x x ... x B  &lt;-- A*B</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true"></a>x x x x x x x ... x |</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true"></a>................... |</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true"></a>x x x x x x x ... x v</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true"></a></span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true"></a>x x x x x x x ... x ^</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true"></a>x x x x x x x ... x |</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true"></a>x x x x x x x ... x |</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true"></a>x x x x x x x ... x C  &lt;-- A*C</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true"></a>x x x x x x x ... x |</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true"></a>................... |</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true"></a>x x x x x x x ... x v</span></code></pre></div>
<p>Example 3:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true"></a>function nSquaredFunction(n) {</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true"></a>    total = <span class="dv">0</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true"></a>    <span class="cf">for</span> i in <span class="fl">1.</span><span class="er">.n</span>:        <span class="co">// N *</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true"></a>        <span class="cf">for</span> j in <span class="fl">1.</span><span class="er">.n</span>:      <span class="co">// N *</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true"></a>            total += i*k      <span class="co">// 1</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true"></a>    <span class="cf">return</span> total</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true"></a>}</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true"></a><span class="co">// O(n^2)</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true"></a>function nCubedFunction(a) {</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true"></a>    <span class="cf">for</span> i in <span class="fl">1.</span><span class="er">.n</span>:                <span class="co">// A *</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true"></a>        print(nSquaredFunction(a))  <span class="co">// A^2</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true"></a>}</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true"></a><span class="co">// O(a^3)</span></span></code></pre></div>
<p>If we do something slightly complicated, you might still be able to imagine visually what’s going on:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true"></a><span class="cf">for</span> x in range(A):</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true"></a>    <span class="cf">for</span> y in range(<span class="fl">1.</span><span class="er">.x</span>):</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true"></a>        simpleOperation(x*y)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true"></a>x x x x x x x x x x |</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true"></a>x x x x x x x x x   |</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true"></a>x x x x x x x x     |</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true"></a>x x x x x x x       |</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true"></a>x x x x x x         |</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true"></a>x x x x x           |</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true"></a>x x x x             |</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true"></a>x x x               |</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true"></a>x x                 |</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true"></a>x___________________|</span></code></pre></div>
<p>Here, the smallest recognizable outline you can draw is what matters; a triangle is a two dimensional shape (0.5 A^2), just like a square is a two-dimensional shape (A^2); the constant factor of two here remains in the asymptotic ratio between the two, however we ignore it like all factors… (There are some unfortunate nuances to this technique I don’t go into here; it can mislead you.)</p>
<p>Of course this does not mean that loops and functions are bad; on the contrary, they are the building blocks of modern programming languages, and we love them. However, we can see that the way we weave loops and functions and conditionals together with our data (control flow, etc.) mimics the time and space usage of our program! If time and space usage becomes an issue, that is when we resort to cleverness, and find an easy algorithm or data structure we hadn’t considered, to reduce the order of growth somehow. Nevertheless, these visualization techniques (though they don’t always work) can give you a naive guess at a worst-case running time.</p>
<p>Here is another thing we can recognize visually:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a>&lt;----------------------------- N -----------------------------&gt;</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true"></a>x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true"></a>x x x x x x x x x x x x x x x x</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true"></a>x x x x x x x x</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true"></a>x x x x</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true"></a>x x</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true"></a>x</span></code></pre></div>
<p>We can just rearrange this and see it’s O(N):</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a>&lt;----------------------------- N -----------------------------&gt;</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true"></a>x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x x</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true"></a>x x x x x x x x x x x x x x x x|x x x x x x x x|x x x x|x x|x</span></code></pre></div>
<p>Or maybe you do log(N) passes of the data, for O(N*log(N)) total time:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true"></a>   &lt;----------------------------- N -----------------------------&gt;</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true"></a> ^  x x x x x x x x x x x x x x x x|x x x x x x x x x x x x x x x x</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true"></a> |  x x x x x x x x|x x x x x x x x|x x x x x x x x|x x x x x x x x</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true"></a>lgN x x x x|x x x x|x x x x|x x x x|x x x x|x x x x|x x x x|x x x x</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true"></a> |  x x|x x|x x|x x|x x|x x|x x|x x|x x|x x|x x|x x|x x|x x|x x|x x</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true"></a> v  x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x|x</span></code></pre></div>
<p>Unrelatedly but worth mentioning again: If we perform a hash (e.g. a dictionary / hashtable lookup), that is a factor of O(1). That’s pretty fast.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a>[myDictionary.has(x) <span class="cf">for</span> x in listOfSizeA]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true"></a> \----- O(<span class="dv">1</span>) ------/    </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true"></a>--&gt; A*<span class="dv">1</span> --&gt; O(A)</span></code></pre></div>
<p>If we do something very complicated, such as with a recursive function or divide-and-conquer algorithm, <strike>you can use the <a href="https://en.wikipedia.org/wiki/Master_theorem" rel="noreferrer">Master Theorem</a> (usually works), or in ridiculous cases the Akra-Bazzi Theorem (almost always works)</strike> you look up the running time of your algorithm on Wikipedia.</p>
<p>But, programmers don’t think like this because eventually, algorithm intuition just becomes second nature. You will start to code something inefficient, and immediately think “am I doing something <strong>grossly inefficient?</strong>”. If the answer is “yes” AND you foresee it actually mattering, then you can take a step back and think of various tricks to make things run faster (the answer is almost always “use a hashtable”, rarely “use a tree”, and very rarely something a bit more complicated).</p>
<hr>
<p><strong>Amortized and average-case complexity</strong></p>
<p>There is also the concept of “amortized” and/or “average case” (note that these are different).</p>
<p><strong>Average Case</strong>: This is no more than using big-O notation for the expected value of a function, rather than the function itself. In the usual case where you consider all inputs to be equally likely, the average case is just the average of the running time. For example with quicksort, even though the worst-case is <code>O(N^2)</code> for some really bad inputs, the average case is the usual <code>O(N log(N))</code> (the really bad inputs are very small in number, so few that we don’t notice them in the average case).</p>
<p><strong>Amortized Worst-Case</strong>: Some data structures may have a worst-case complexity that is large, but guarantee that if you do many of these operations, the average amount of work you do will be better than worst-case. For example you may have a data structure that normally takes constant <code>O(1)</code> time. However, occasionally it will ‘hiccup’ and take <code>O(N)</code> time for one random operation, because maybe it needs to do some bookkeeping or garbage collection or something… but it promises you that if it does hiccup, it won’t hiccup again for N more operations. The worst-case cost is still <code>O(N)</code> per operation, but the amortized cost <em>over many runs</em> is <code>O(N)/N</code> = <code>O(1)</code> per operation. Because the big operations are sufficiently rare, the massive amount of occasional work can be considered to blend in with the rest of the work as a constant factor. We say the work is “amortized” over a sufficiently large number of calls that it disappears asymptotically.</p>
<blockquote>
<p>The analogy for amortized analysis:</p>
<p>
You drive a car. Occasionally, you need to spend 10 minutes going to the gas station and then spend 1 minute refilling the tank with gas. If you did this every time you went anywhere with your car (spend 10 minutes driving to the gas station, spend a few seconds filling up a fraction of a gallon), it would be very inefficient. But if you fill up the tank once every few days, the 11 minutes spent driving to the gas station is “amortized” over a sufficiently large number of trips, that you can ignore it and pretend all your trips were maybe 5% longer.
</p>
</blockquote>
<p>Comparison between average-case and amortized worst-case:</p>
<ul>
<li>
Average-case: We make some assumptions about our inputs; i.e. if our inputs have different probabilities, then our outputs/runtimes will have different probabilities (which we take the average of). Usually we assume that our inputs are all equally likely (uniform probability), but if the real-world inputs don’t fit our assumptions of “average input”, the average output/runtime calculations may be meaningless. If you anticipate uniformly random inputs though, this is useful to think about!
</li>
<li>
Amortized worst-case: If you use an amortized worst-case data structure, the performance is guaranteed to be within the amortized worst-case… eventually (even if the inputs are chosen by an evil demon who knows everything and is trying to screw you over). Usually we use this to analyze algorithms which may be very ‘choppy’ in performance with unexpected large hiccups, but over time perform just as well as other algorithms. (However unless your data structure has upper limits for much outstanding work it is willing to procrastinate on, an evil attacker could perhaps force you to catch up on the maximum amount of procrastinated work all-at-once.
</li>
</ul>
<p>Though, if you’re <a href="https://www.usenix.org/conference/12th-usenix-security-symposium/denial-service-algorithmic-complexity-attacks" rel="noreferrer">reasonably worried</a> about an attacker, there are many other algorithmic attack vectors to worry about besides amortization and average-case.)</p>
<p>Both average-case and amortization are incredibly useful tools for thinking about and designing with scaling in mind.</p>
<p>(See <a href="https://stackoverflow.com/q/7333376/711085">Difference between average case and amortized analysis</a> if interested on this subtopic.)</p>
<hr>
<p><strong>Multidimensional big-O</strong></p>
<p>Most of the time, people don’t realize that there’s more than one variable at work. For example, in a string-search algorithm, your algorithm may take time <code>O([length of text] + [length of query])</code>, i.e. it is linear in two variables like <code>O(N+M)</code>. Other more naive algorithms may be <code>O([length of text]*[length of query])</code> or <code>O(N*M)</code>. Ignoring multiple variables is one of the most common oversights I see in algorithm analysis, and can handicap you when designing an algorithm.</p>
<hr>
<p><strong>The whole story</strong></p>
<p>Keep in mind that big-O is not the whole story. You can drastically speed up some algorithms by using caching, making them cache-oblivious, avoiding bottlenecks by working with RAM instead of disk, using parallelization, or doing work ahead of time – these techniques are often <em>independent</em> of the order-of-growth “big-O” notation, though you will often see the number of cores in the big-O notation of parallel algorithms.</p>
<p>Also keep in mind that due to hidden constraints of your program, you might not really care about asymptotic behavior. You may be working with a bounded number of values, for example:</p>
<ul>
<li>
If you’re sorting something like 5 elements, you don’t want to use the speedy <code>O(N log(N))</code> quicksort; you want to use insertion sort, which happens to perform well on small inputs. These situations often comes up in divide-and-conquer algorithms, where you split up the problem into smaller and smaller subproblems, such as recursive sorting, fast Fourier transforms, or matrix multiplication.
</li>
<li>
If some values are effectively bounded due to some hidden fact (e.g. the average human name is softly bounded at perhaps 40 letters, and human age is softly bounded at around 150). You can also impose bounds on your input to effectively make terms constant.
</li>
</ul>
<p>In practice, even among algorithms which have the same or similar asymptotic performance, their relative merit may actually be driven by other things, such as: other performance factors (quicksort and mergesort are both <code>O(N log(N))</code>, but quicksort takes advantage of CPU caches); non-performance considerations, like ease of implementation; whether a library is available, and how reputable and maintained the library is.</p>
<p>Programs will also run slower on a 500MHz computer vs 2GHz computer. We don’t really consider this as part of the resource bounds, because we think of the scaling in terms of machine resources (e.g. per clock cycle), not per real second. However, there are similar things which can ‘secretly’ affect performance, such as whether you are running under emulation, or whether the compiler optimized code or not. These might make some basic operations take longer (even relative to each other), or even speed up or slow down some operations asymptotically (even relative to each other). The effect may be small or large between different implementation and/or environment. Do you switch languages or machines to eke out that little extra work? That depends on a hundred other reasons (necessity, skills, coworkers, programmer productivity, the monetary value of your time, familiarity, workarounds, why not assembly or GPU, etc…), which may be more important than performance.</p>
<p>The above issues, like programming language, are almost never considered as part of the constant factor (nor should they be); yet one should be aware of them, because <em>sometimes</em> (though rarely) they may affect things. For example in cpython, the native priority queue implementation is asymptotically non-optimal (<code>O(log(N))</code> rather than <code>O(1)</code> for your choice of insertion or find-min); do you use another implementation? Probably not, since the C implementation is probably faster, and there are probably other similar issues elsewhere. There are tradeoffs; sometimes they matter and sometimes they don’t.</p>
<hr>
<p>(<em>edit</em>: The “plain English” explanation ends here.)</p>
<p><em>Math addenda</em></p>
<p><i>For completeness, the precise definition of big-O notation is as follows: <code>f(x) ∈ O(g(x))</code> means that "f is asymptotically upper-bounded by const*g“: ignoring everything below some finite value of x, there exists a constant such that <code>|f(x)| ≤ const * |g(x)|</code>. (The other symbols are as follows: just like <code>O</code> means ≤, <code>Ω</code> means ≥. There are lowercase variants: <code>o</code> means &lt;, and <code>ω</code> means &gt;.) <code>f(x) ∈ Ɵ(g(x))</code> means both <code>f(x) ∈ O(g(x))</code> and <code>f(x) ∈ Ω(g(x))</code> (upper- and lower-bounded by g): there exists some constants such that f will always lie in the”band" between <code>const1*g(x)</code> and <code>const2*g(x)</code>. It is the strongest asymptotic statement you can make and roughly equivalent to <code>==</code>. (Sorry, I elected to delay the mention of the absolute-value symbols until now, for clarity’s sake; especially because I have never seen negative values come up in a computer science context.)</p>
<p>People will often use <code>= O(...)</code>, which is perhaps the more correct ‘comp-sci’ notation, and entirely legitimate to use; “f = O(…)” is read “f is order … / f is xxx-bounded by …” and is thought of as “f is some expression whose asymptotics are …”. I was taught to use the more rigorous <code>∈ O(...)</code>. <code>∈</code> means “is an element of” (still read as before). In this particular case, <code>O(N²)</code> contains elements like {<code>2 N²</code>, <code>3 N²</code>, <code>1/2 N²</code>, <code>2 N² + log(N)</code>, <code>- N² + N^1.9</code>, …} and is infinitely large, but it’s still a set.</p>
<p>O and Ω are not symmetric (n = O(n²), but n² is not O(n)), but Ɵ is symmetric, and (since these relations are all transitive and reflexive) Ɵ therefore is symmetric and transitive and reflexive, and therefore partitions the set of all functions into <em>equivalence classes</em>. An equivalence class is a set of things which we consider to be the same. That is to say, given any function you can think of, you can find a canonical/unique ‘asymptotic representative’ of the class (by generally taking the limit… I <em>think</em>); just like you can group all integers into odds or evens, you can group all functions with Ɵ into x-ish, log(x)^2-ish, etc… by basically ignoring smaller terms (but sometimes you might be stuck with more complicated functions which are separate classes unto themselves).</p>
<p>The <code>=</code> notation might be the more common one, and is even used in papers by world-renowned computer scientists. Additionally, it is often the case that in a casual setting, people will say <code>O(...)</code> when they mean <code>Ɵ(...)</code>; this is technically true since the set of things <code>Ɵ(exactlyThis)</code> is a subset of <code>O(noGreaterThanThis)</code>… and it’s easier to type. ;-)</i></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-find-time-complexity-of-an-algorithm-score-615483-in-2017" class="level3">
<h3>6: How to find time complexity of an algorithm (score <a href="https://stackoverflow.com/q/11032015.html">615483</a> in 2017)</h3>
<section id="question-5" class="level4">
<h4>Question</h4>
<p><strong>The Question</strong></p>
<p>How to find time complexity of an algorithm?</p>
<p><strong>What have I done before posting a question on SO ?</strong></p>
<p>I have gone through <a href="https://www.google.co.in/search?aq=f&amp;sugexp=chrome,mod=19&amp;sourceid=chrome&amp;ie=UTF-8&amp;q=How%20to%20find%20time%20complexity%20of%20an%20algorithm" rel="noreferrer">this</a>, <a href="https://stackoverflow.com/search?q=how%20to%20calculate%20time%20complexity%20of%20an%20algorithm">this</a> and many other links</p>
<p>But no where I was able to find a clear and straight forward explanation for how to calculate time complexity.</p>
<p><strong>What do I know ?</strong></p>
<p>Say for a code as simple as the one below:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true"></a><span class="dt">char</span> h = <span class="ch">&#39;y&#39;</span>; <span class="co">// This will be executed 1 time</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true"></a><span class="dt">int</span> abc = <span class="dv">0</span>; <span class="co">// This will be executed 1 time</span></span></code></pre></div>
<p>Say for a loop like the one below:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; N; i++) {        </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true"></a>    Console.Write(&#39;Hello World !&#39;);</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true"></a>}</span></code></pre></div>
<p>
<strong>int i=0;</strong> This will be executed only <strong>once</strong>. The time is actually calculated to <code>i=0</code> and not the declaration.
</p>
<p><strong>i &lt; N;</strong> This will be executed <strong>N+1</strong> times</p>
<p><strong>i++ ;</strong> This will be executed <strong>N</strong> times</p>
<p>So the number of operations required by this loop are</p>
<p><strong>{1+(N+1)+N} = 2N+2</strong></p>
<p>Note: This still may be wrong, as I am not confident about my understanding on calculating time complexity</p>
<p><strong>What I want to know ?</strong></p>
<p>Ok, so these small basic calculations I think I know, but in most cases I have seen the time complexity as</p>
<p><strong>O(N), O(n2), O(log n), O(n!)</strong>…. and many <a href="http://en.wikipedia.org/wiki/Time_complexity" rel="noreferrer">other</a>,</p>
<p>Can anyone help me understand how does one calculate time complexity of an algorithm? I am sure there are plenty of newbies like me wanting to know this.</p>
</section>
<section id="answer-accepted-score-368" class="level4">
<h4>Answer accepted (score 368)</h4>
<blockquote>
How to find time complexity of an algorithm
</blockquote>
<p>You add up how many machine instructions it will execute as a function of the size of its input, and then simplify the expression to the largest (when N is very large) term and can include any simplifying constant factor.</p>
<p>For example, lets see how we simplify <code>2N + 2</code> machine instructions to describe this as just <code>O(N)</code>.</p>
<p><strong>Why do we remove the two <code>2</code>s ?</strong></p>
<p>We are interested in the performance of the algorithm as N becomes large.</p>
<p>Consider the two terms 2N and 2.</p>
<p>What is the relative influence of these two terms as N becomes large? Suppose N is a million.</p>
<p>Then the first term is 2 million and the second term is only 2.</p>
<p>For this reason, we drop all but the largest terms for large N.</p>
<p>So, now we have gone from <code>2N + 2</code> to <code>2N</code>.</p>
<p>Traditionally, we are only interested in performance <em>up to constant factors</em>.</p>
<p>This means that we don’t really care if there is some constant multiple of difference in performance when N is large. The unit of 2N is not well-defined in the first place anyway. So we can multiply or divide by a constant factor to get to the simplest expression.</p>
<p>So <code>2N</code> becomes just <code>N</code>.</p>
</section>
<section id="answer-2-score-371" class="level4">
<h4>Answer 2 (score 371)</h4>
<p>
This is an excellent article : <a href="http://www.daniweb.com/software-development/computer-science/threads/13488/time-complexity-of-algorithm" rel="noreferrer">http://www.daniweb.com/software-development/computer-science/threads/13488/time-complexity-of-algorithm</a>
</p>
<p><strong>The below answer is copied from above (in case the excellent link goes bust)</strong></p>
<p>The most common metric for calculating time complexity is Big O notation. This removes all constant factors so that the running time can be estimated in relation to N as N approaches infinity. In general you can think of it like this:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true"></a>statement;</span></code></pre></div>
<p>Is constant. The running time of the statement will not change in relation to N.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true"></a><span class="cf">for</span> ( i = <span class="dv">0</span>; i &lt; N; i++ )</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true"></a>     statement;</span></code></pre></div>
<p>Is linear. The running time of the loop is directly proportional to N. When N doubles, so does the running time.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true"></a><span class="cf">for</span> ( i = <span class="dv">0</span>; i &lt; N; i++ ) {</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true"></a>  <span class="cf">for</span> ( j = <span class="dv">0</span>; j &lt; N; j++ )</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true"></a>    statement;</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true"></a>}</span></code></pre></div>
<p>Is quadratic. The running time of the two loops is proportional to the square of N. When N doubles, the running time increases by N * N.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true"></a><span class="cf">while</span> ( low &lt;= high ) {</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true"></a>  mid = ( low + high ) / <span class="dv">2</span>;</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true"></a>  <span class="cf">if</span> ( target &lt; list[mid] )</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true"></a>    high = mid - <span class="dv">1</span>;</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true"></a>  <span class="cf">else</span> <span class="cf">if</span> ( target &gt; list[mid] )</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true"></a>    low = mid + <span class="dv">1</span>;</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true"></a>  <span class="cf">else</span> <span class="cf">break</span>;</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>Is logarithmic. The running time of the algorithm is proportional to the number of times N can be divided by 2. This is because the algorithm divides the working area in half with each iteration.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true"></a><span class="dt">void</span> quicksort ( <span class="dt">int</span> list[], <span class="dt">int</span> left, <span class="dt">int</span> right )</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true"></a>{</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true"></a>  <span class="dt">int</span> pivot = partition ( list, left, right );</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true"></a>  quicksort ( list, left, pivot - <span class="dv">1</span> );</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true"></a>  quicksort ( list, pivot + <span class="dv">1</span>, right );</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true"></a>}</span></code></pre></div>
<p>Is N * log ( N ). The running time consists of N loops (iterative or recursive) that are logarithmic, thus the algorithm is a combination of linear and logarithmic.</p>
<p>In general, doing something with every item in one dimension is linear, doing something with every item in two dimensions is quadratic, and dividing the working area in half is logarithmic. There are other Big O measures such as cubic, exponential, and square root, but they’re not nearly as common. Big O notation is described as O ( ) where is the measure. The quicksort algorithm would be described as O ( N * log ( N ) ).</p>
<p>Note that none of this has taken into account best, average, and worst case measures. Each would have its own Big O notation. Also note that this is a VERY simplistic explanation. Big O is the most common, but it’s also more complex that I’ve shown. There are also other notations such as big omega, little o, and big theta. You probably won’t encounter them outside of an algorithm analysis course. ;)</p>
</section>
<section id="answer-3-score-155" class="level4">
<h4>Answer 3 (score 155)</h4>
<p>Taken from here - <a href="https://web.archive.org/web/20140929181245/http://careerbaba.in/2014/01/introduction-to-time-complexity-of-an-algorithm/" rel="noreferrer">Introduction to Time Complexity of an Algorithm</a></p>
<h5>
<ol type="1">
<li>Introduction
</h2></li>
</ol>
<p>In computer science, the time complexity of an algorithm quantifies the amount of time taken by an algorithm to run as a function of the length of the string representing the input.</p>
<h5>
<ol start="2" type="1">
<li>Big O notation
</h2></li>
</ol>
<p>The time complexity of an algorithm is commonly expressed using big O notation, which excludes coefficients and lower order terms. When expressed this way, the time complexity is said to be described asymptotically, i.e., as the input size goes to infinity.</p>
<p>For example, if the time required by an algorithm on all inputs of size n is at most 5n<sup>3</sup> + 3n, the asymptotic time complexity is O(n<sup>3</sup>). More on that later.</p>
<p>Few more Examples:</p>
<ul>
<li>
1 = O(n)
</li>
<li>
n = O(n<sup>2</sup>)
</li>
<li>
log(n) = O(n)
</li>
<li>
2 n + 1 = O(n)
</li>
</ul>
<h5>
<ol start="3" type="1">
<li>O(1) Constant Time:
</h2></li>
</ol>
<p>An algorithm is said to run in constant time if it requires the same amount of time regardless of the input size.</p>
<p>Examples:</p>
<ul>
<li>
array: accessing any element
</li>
<li>
fixed-size stack: push and pop methods
</li>
<li>
fixed-size queue: enqueue and dequeue methods
</li>
</ul>
<h5>
<ol start="4" type="1">
<li>O(n) Linear Time
</h2></li>
</ol>
<p>An algorithm is said to run in linear time if its time execution is directly proportional to the input size, i.e. time grows linearly as input size increases.</p>
<p>Consider the following examples, below I am linearly searching for an element, this has a time complexity of O(n).</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true"></a><span class="dt">int</span> find = <span class="dv">66</span>;</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true"></a>var numbers = new <span class="dt">int</span>[] { <span class="dv">33</span>, <span class="dv">435</span>, <span class="dv">36</span>, <span class="dv">37</span>, <span class="dv">43</span>, <span class="dv">45</span>, <span class="dv">66</span>, <span class="dv">656</span>, <span class="dv">2232</span> };</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; numbers.Length - <span class="dv">1</span>; i++)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true"></a>{</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true"></a>    <span class="cf">if</span>(find == numbers[i])</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true"></a>    {</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true"></a>        <span class="cf">return</span>;</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true"></a>    }</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>More Examples:</p>
<ul>
<li>
Array: Linear Search, Traversing, Find minimum etc
</li>
<li>
ArrayList: contains method
</li>
<li>
Queue: contains method
</li>
</ul>
<h5>
<ol start="5" type="1">
<li>O(log n) Logarithmic Time:
</h2></li>
</ol>
<p>An algorithm is said to run in logarithmic time if its time execution is proportional to the logarithm of the input size.</p>
<p>Example: <a href="http://en.wikipedia.org/wiki/Binary_search" rel="noreferrer">Binary Search</a></p>
<p>Recall the “twenty questions” game - the task is to guess the value of a hidden number in an interval. Each time you make a guess, you are told whether your guess is too high or too low. Twenty questions game implies a strategy that uses your guess number to halve the interval size. This is an example of the general problem-solving method known as binary search</p>
<h5>
<ol start="6" type="1">
<li>O(n2) Quadratic Time
</h2></li>
</ol>
<p>An algorithm is said to run in quadratic time if its time execution is proportional to the square of the input size.</p>
<p>Examples:</p>
<ul>
<li>
<a href="http://en.wikipedia.org/wiki/Bubble_sort" rel="noreferrer">Bubble Sort</a>
</li>
<li>
<a href="http://en.wikipedia.org/wiki/Selection_sort" rel="noreferrer">Selection Sort</a>
</li>
<li>
<a href="http://en.wikipedia.org/wiki/Insertion_Sort" rel="noreferrer">Insertion Sort</a>
</li>
</ul>
<h5>
<ol start="7" type="1">
<li>Some Useful links
</h2></li>
</ol>
<ul>
<li>
<a href="http://ssp.impulsetrain.com/big-o.html" rel="noreferrer">Big-O Misconceptions</a>
</li>
<li>
<a href="http://philipstel.wordpress.com/2011/03/07/determining-the-complexity-of-an-algorithm-the-basic-part/" rel="noreferrer">Determining The Complexity Of Algorithm</a>
</li>
<li>
<a href="http://bigocheatsheet.com/" rel="noreferrer">Big O Cheat Sheet</a>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="best-way-to-reverse-a-string-score-602944-in-2013" class="level3">
<h3>7: Best way to reverse a string (score <a href="https://stackoverflow.com/q/228038.html">602944</a> in 2013)</h3>
<section id="question-6" class="level4">
<h4>Question</h4>
<p>I’ve just had to write a string reverse function in C # 2.0 (i.e. LINQ not available) and came up with this:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true"></a>public string Reverse(string text)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true"></a>{</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true"></a>    <span class="dt">char</span>[] cArray = text.ToCharArray();</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true"></a>    string reverse = String.Empty;</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = cArray.Length - <span class="dv">1</span>; i &gt; -<span class="dv">1</span>; i--)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true"></a>    {</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true"></a>        reverse += cArray[i];</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true"></a>    }</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true"></a>    <span class="cf">return</span> reverse;</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true"></a>}</span></code></pre></div>
<p>Personally I’m not crazy about the function and am convinced that there’s a better way to do it. Is there?</p>
</section>
<section id="answer-accepted-score-544" class="level4">
<h4>Answer accepted (score 544)</h4>
<div class="sourceCode" id="cb42"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true"></a>public <span class="dt">static</span> string Reverse( string s )</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true"></a>{</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true"></a>    <span class="dt">char</span>[] charArray = s.ToCharArray();</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true"></a>    Array.Reverse( charArray );</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true"></a>    <span class="cf">return</span> new string( charArray );</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-170" class="level4">
<h4>Answer 2 (score 170)</h4>
<p>Here a solution that properly reverses the string <code>"Les Mise\\u0301rables"</code> as <code>"selbare\\u0301siM seL"</code>. This should render just like <code>selbarésiM seL</code>, not <code>selbaŕesiM seL</code> (note the position of the accent), as would the result of most implementations based on code units (<code>Array.Reverse</code>, etc) or even code points (reversing with special care for surrogate pairs).</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true"></a>using System;</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true"></a>using System.Collections.Generic;</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true"></a>using System.Globalization;</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true"></a>using System.Linq;</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true"></a></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true"></a>public <span class="dt">static</span> class Test</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true"></a>{</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true"></a>    private <span class="dt">static</span> IEnumerable&lt;string&gt; GraphemeClusters(this string s) {</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true"></a>        var enumerator = StringInfo.GetTextElementEnumerator(s);</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true"></a>        <span class="cf">while</span>(enumerator.MoveNext()) {</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true"></a>            yield <span class="cf">return</span> (string)enumerator.Current;</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true"></a>        }</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true"></a>    }</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true"></a>    private <span class="dt">static</span> string ReverseGraphemeClusters(this string s) {</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true"></a>        <span class="cf">return</span> string.Join(<span class="st">&quot;&quot;</span>, s.GraphemeClusters().Reverse().ToArray());</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true"></a>    }</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">void</span> Main()</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true"></a>    {</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true"></a>        var s = <span class="st">&quot;Les Mise</span><span class="sc">\\</span><span class="st">u0301rables&quot;</span>;</span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true"></a>        var r = s.ReverseGraphemeClusters();</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true"></a>        Console.WriteLine(r);</span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true"></a>    }</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true"></a>}</span></code></pre></div>
<p>(And live running example here: <a href="https://ideone.com/DqAeMJ">https://ideone.com/DqAeMJ</a>)</p>
<p>It simply uses the .NET <a href="http://msdn.microsoft.com/en-us/library/x2f3k4f6.aspx">API for grapheme cluster iteration</a>, which has been there since ever, but a bit “hidden” from view, it seems.</p>
</section>
<section id="answer-3-score-125" class="level4">
<h4>Answer 3 (score 125)</h4>
<p>This is turning out to be a surprisingly tricky question.</p>
<p>I would recommend using Array.Reverse for most cases as it is coded natively and it is very simple to maintain and understand.</p>
<p>It seems to outperform StringBuilder in all the cases I tested.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true"></a>public string Reverse(string text)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true"></a>{</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true"></a>   <span class="cf">if</span> (text == null) <span class="cf">return</span> null;</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true"></a>   <span class="co">// this was posted by petebob as well </span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true"></a>   <span class="dt">char</span>[] array = text.ToCharArray();</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true"></a>   Array.Reverse(array);</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true"></a>   <span class="cf">return</span> new String(array);</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>There is a second approach that can be faster for certain string lengths which <a href="http://www.sqljunkies.com/WebLog/amachanic/archive/2006/07/17/22253.aspx" rel="noreferrer">uses Xor</a>.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true"></a>    public <span class="dt">static</span> string ReverseXor(string s)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true"></a>    {</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true"></a>        <span class="cf">if</span> (s == null) <span class="cf">return</span> null;</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true"></a>        <span class="dt">char</span>[] charArray = s.ToCharArray();</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true"></a>        <span class="dt">int</span> len = s.Length - <span class="dv">1</span>;</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; len; i++, len--)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true"></a>        {</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true"></a>            charArray[i] ^= charArray[len];</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true"></a>            charArray[len] ^= charArray[i];</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true"></a>            charArray[i] ^= charArray[len];</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true"></a>        }</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true"></a>        <span class="cf">return</span> new string(charArray);</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true"></a>    }</span></code></pre></div>
<p><strong>Note</strong> If you want to support the full Unicode UTF16 charset <a href="https://stackoverflow.com/questions/228038/best-way-to-reverse-a-string-in-c-20
#228460">read this</a>. And use the implementation there instead. It can be further optimized by using one of the above algorithms and running through the string to clean it up after the chars are reversed.</p>
<p>Here is a performance comparison between the StringBuilder, Array.Reverse and Xor method.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true"></a>using System;</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true"></a>using System.Collections.Generic;</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true"></a>using System.Linq;</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true"></a>using System.Text;</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true"></a>using System.Diagnostics;</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true"></a>namespace ConsoleApplication4</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true"></a>{</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true"></a>    class Program</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true"></a>    {</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true"></a>        delegate string StringDelegate(string s);</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true"></a></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true"></a>        <span class="dt">static</span> <span class="dt">void</span> Benchmark(string description, StringDelegate d, <span class="dt">int</span> times, string text)</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true"></a>        {</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true"></a>            Stopwatch sw = new Stopwatch();</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true"></a>            sw.Start();</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true"></a>            <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; times; j++)</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true"></a>            {</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true"></a>                d(text);</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true"></a>            }</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true"></a>            sw.Stop();</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true"></a>            Console.WriteLine(<span class="st">&quot;{0} Ticks {1} : called {2} times.&quot;</span>, sw.ElapsedTicks, description, times);</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true"></a>        }</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true"></a></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true"></a>        public <span class="dt">static</span> string ReverseXor(string s)</span>
<span id="cb46-26"><a href="#cb46-26" aria-hidden="true"></a>        {</span>
<span id="cb46-27"><a href="#cb46-27" aria-hidden="true"></a>            <span class="dt">char</span>[] charArray = s.ToCharArray();</span>
<span id="cb46-28"><a href="#cb46-28" aria-hidden="true"></a>            <span class="dt">int</span> len = s.Length - <span class="dv">1</span>;</span>
<span id="cb46-29"><a href="#cb46-29" aria-hidden="true"></a></span>
<span id="cb46-30"><a href="#cb46-30" aria-hidden="true"></a>            <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; len; i++, len--)</span>
<span id="cb46-31"><a href="#cb46-31" aria-hidden="true"></a>            {</span>
<span id="cb46-32"><a href="#cb46-32" aria-hidden="true"></a>                charArray[i] ^= charArray[len];</span>
<span id="cb46-33"><a href="#cb46-33" aria-hidden="true"></a>                charArray[len] ^= charArray[i];</span>
<span id="cb46-34"><a href="#cb46-34" aria-hidden="true"></a>                charArray[i] ^= charArray[len];</span>
<span id="cb46-35"><a href="#cb46-35" aria-hidden="true"></a>            }</span>
<span id="cb46-36"><a href="#cb46-36" aria-hidden="true"></a></span>
<span id="cb46-37"><a href="#cb46-37" aria-hidden="true"></a>            <span class="cf">return</span> new string(charArray);</span>
<span id="cb46-38"><a href="#cb46-38" aria-hidden="true"></a>        }</span>
<span id="cb46-39"><a href="#cb46-39" aria-hidden="true"></a></span>
<span id="cb46-40"><a href="#cb46-40" aria-hidden="true"></a>        public <span class="dt">static</span> string ReverseSB(string text)</span>
<span id="cb46-41"><a href="#cb46-41" aria-hidden="true"></a>        {</span>
<span id="cb46-42"><a href="#cb46-42" aria-hidden="true"></a>            StringBuilder builder = new StringBuilder(text.Length);</span>
<span id="cb46-43"><a href="#cb46-43" aria-hidden="true"></a>            <span class="cf">for</span> (<span class="dt">int</span> i = text.Length - <span class="dv">1</span>; i &gt;= <span class="dv">0</span>; i--)</span>
<span id="cb46-44"><a href="#cb46-44" aria-hidden="true"></a>            {</span>
<span id="cb46-45"><a href="#cb46-45" aria-hidden="true"></a>                builder.Append(text[i]);</span>
<span id="cb46-46"><a href="#cb46-46" aria-hidden="true"></a>            }</span>
<span id="cb46-47"><a href="#cb46-47" aria-hidden="true"></a>            <span class="cf">return</span> builder.ToString();</span>
<span id="cb46-48"><a href="#cb46-48" aria-hidden="true"></a>        }</span>
<span id="cb46-49"><a href="#cb46-49" aria-hidden="true"></a></span>
<span id="cb46-50"><a href="#cb46-50" aria-hidden="true"></a>        public <span class="dt">static</span> string ReverseArray(string text)</span>
<span id="cb46-51"><a href="#cb46-51" aria-hidden="true"></a>        {</span>
<span id="cb46-52"><a href="#cb46-52" aria-hidden="true"></a>            <span class="dt">char</span>[] array = text.ToCharArray();</span>
<span id="cb46-53"><a href="#cb46-53" aria-hidden="true"></a>            Array.Reverse(array);</span>
<span id="cb46-54"><a href="#cb46-54" aria-hidden="true"></a>            <span class="cf">return</span> (new string(array));</span>
<span id="cb46-55"><a href="#cb46-55" aria-hidden="true"></a>        }</span>
<span id="cb46-56"><a href="#cb46-56" aria-hidden="true"></a></span>
<span id="cb46-57"><a href="#cb46-57" aria-hidden="true"></a>        public <span class="dt">static</span> string StringOfLength(<span class="dt">int</span> length)</span>
<span id="cb46-58"><a href="#cb46-58" aria-hidden="true"></a>        {</span>
<span id="cb46-59"><a href="#cb46-59" aria-hidden="true"></a>            Random random = new Random();</span>
<span id="cb46-60"><a href="#cb46-60" aria-hidden="true"></a>            StringBuilder sb = new StringBuilder();</span>
<span id="cb46-61"><a href="#cb46-61" aria-hidden="true"></a>            <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; length; i++)</span>
<span id="cb46-62"><a href="#cb46-62" aria-hidden="true"></a>            {</span>
<span id="cb46-63"><a href="#cb46-63" aria-hidden="true"></a>                sb.Append(Convert.ToChar(Convert.ToInt32(Math.Floor(<span class="dv">26</span> * random.NextDouble() + <span class="dv">65</span>))));</span>
<span id="cb46-64"><a href="#cb46-64" aria-hidden="true"></a>            }</span>
<span id="cb46-65"><a href="#cb46-65" aria-hidden="true"></a>            <span class="cf">return</span> sb.ToString();</span>
<span id="cb46-66"><a href="#cb46-66" aria-hidden="true"></a>        }</span>
<span id="cb46-67"><a href="#cb46-67" aria-hidden="true"></a></span>
<span id="cb46-68"><a href="#cb46-68" aria-hidden="true"></a>        <span class="dt">static</span> <span class="dt">void</span> Main(string[] args)</span>
<span id="cb46-69"><a href="#cb46-69" aria-hidden="true"></a>        {</span>
<span id="cb46-70"><a href="#cb46-70" aria-hidden="true"></a></span>
<span id="cb46-71"><a href="#cb46-71" aria-hidden="true"></a>            <span class="dt">int</span>[] lengths = new <span class="dt">int</span>[] {<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">25</span>,<span class="dv">50</span>,<span class="dv">75</span>,<span class="dv">100</span>,<span class="dv">1000</span>,<span class="dv">100000</span>};</span>
<span id="cb46-72"><a href="#cb46-72" aria-hidden="true"></a></span>
<span id="cb46-73"><a href="#cb46-73" aria-hidden="true"></a>            foreach (<span class="dt">int</span> l in lengths)</span>
<span id="cb46-74"><a href="#cb46-74" aria-hidden="true"></a>            {</span>
<span id="cb46-75"><a href="#cb46-75" aria-hidden="true"></a>                <span class="dt">int</span> iterations = <span class="dv">10000</span>;</span>
<span id="cb46-76"><a href="#cb46-76" aria-hidden="true"></a>                string text = StringOfLength(l);</span>
<span id="cb46-77"><a href="#cb46-77" aria-hidden="true"></a>                Benchmark(String.Format(<span class="st">&quot;String Builder (Length: {0})&quot;</span>, l), ReverseSB, iterations, text);</span>
<span id="cb46-78"><a href="#cb46-78" aria-hidden="true"></a>                Benchmark(String.Format(<span class="st">&quot;Array.Reverse (Length: {0})&quot;</span>, l), ReverseArray, iterations, text);</span>
<span id="cb46-79"><a href="#cb46-79" aria-hidden="true"></a>                Benchmark(String.Format(<span class="st">&quot;Xor (Length: {0})&quot;</span>, l), ReverseXor, iterations, text);</span>
<span id="cb46-80"><a href="#cb46-80" aria-hidden="true"></a></span>
<span id="cb46-81"><a href="#cb46-81" aria-hidden="true"></a>                Console.WriteLine();    </span>
<span id="cb46-82"><a href="#cb46-82" aria-hidden="true"></a>            }</span>
<span id="cb46-83"><a href="#cb46-83" aria-hidden="true"></a></span>
<span id="cb46-84"><a href="#cb46-84" aria-hidden="true"></a>            Console.Read();</span>
<span id="cb46-85"><a href="#cb46-85" aria-hidden="true"></a>        }</span>
<span id="cb46-86"><a href="#cb46-86" aria-hidden="true"></a>    }</span>
<span id="cb46-87"><a href="#cb46-87" aria-hidden="true"></a>}</span></code></pre></div>
<p>Here are the results:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true"></a><span class="dv">26251</span> Ticks String Builder (Length: <span class="dv">1</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true"></a><span class="dv">33373</span> Ticks Array.Reverse (Length: <span class="dv">1</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true"></a><span class="dv">20162</span> Ticks Xor (Length: <span class="dv">1</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true"></a><span class="dv">51321</span> Ticks String Builder (Length: <span class="dv">10</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true"></a><span class="dv">37105</span> Ticks Array.Reverse (Length: <span class="dv">10</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true"></a><span class="dv">23974</span> Ticks Xor (Length: <span class="dv">10</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true"></a><span class="dv">66570</span> Ticks String Builder (Length: <span class="dv">15</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true"></a><span class="dv">26027</span> Ticks Array.Reverse (Length: <span class="dv">15</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true"></a><span class="dv">24017</span> Ticks Xor (Length: <span class="dv">15</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true"></a></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true"></a><span class="dv">101609</span> Ticks String Builder (Length: <span class="dv">25</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true"></a><span class="dv">28472</span> Ticks Array.Reverse (Length: <span class="dv">25</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true"></a><span class="dv">35355</span> Ticks Xor (Length: <span class="dv">25</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true"></a></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true"></a><span class="dv">161601</span> Ticks String Builder (Length: <span class="dv">50</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true"></a><span class="dv">35839</span> Ticks Array.Reverse (Length: <span class="dv">50</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true"></a><span class="dv">51185</span> Ticks Xor (Length: <span class="dv">50</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true"></a></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true"></a><span class="dv">230898</span> Ticks String Builder (Length: <span class="dv">75</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true"></a><span class="dv">40628</span> Ticks Array.Reverse (Length: <span class="dv">75</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true"></a><span class="dv">78906</span> Ticks Xor (Length: <span class="dv">75</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true"></a></span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true"></a><span class="dv">312017</span> Ticks String Builder (Length: <span class="dv">100</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true"></a><span class="dv">52225</span> Ticks Array.Reverse (Length: <span class="dv">100</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true"></a><span class="dv">110195</span> Ticks Xor (Length: <span class="dv">100</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true"></a></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true"></a><span class="dv">2970691</span> Ticks String Builder (Length: <span class="dv">1000</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true"></a><span class="dv">292094</span> Ticks Array.Reverse (Length: <span class="dv">1000</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true"></a><span class="dv">846585</span> Ticks Xor (Length: <span class="dv">1000</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true"></a></span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true"></a><span class="dv">305564115</span> Ticks String Builder (Length: <span class="dv">100000</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true"></a><span class="dv">74884495</span> Ticks Array.Reverse (Length: <span class="dv">100000</span>) : called <span class="dv">10000</span> times.</span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true"></a><span class="dv">125409674</span> Ticks Xor (Length: <span class="dv">100000</span>) : called <span class="dv">10000</span> times.</span></code></pre></div>
<p>It seems that Xor can be faster for short strings.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-generate-all-permutations-of-a-list-in-python-score-563081-in-2017" class="level3">
<h3>8: How to generate all permutations of a list in Python (score <a href="https://stackoverflow.com/q/104420.html">563081</a> in 2017)</h3>
<section id="question-7" class="level4">
<h4>Question</h4>
<p>How do you generate all the permutations of a list in Python, independently of the type of elements in that list?</p>
<p>For example:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true"></a>permutations([])</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true"></a>[]</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true"></a>permutations([<span class="dv">1</span>])</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true"></a>[<span class="dv">1</span>]</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true"></a>permutations([<span class="dv">1</span>, <span class="dv">2</span>])</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true"></a>[<span class="dv">2</span>, <span class="dv">1</span>]</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true"></a></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true"></a>permutations([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true"></a>[<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>]</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true"></a>[<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>]</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true"></a>[<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>]</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true"></a>[<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true"></a>[<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>]</span></code></pre></div>
</section>
<section id="answer-accepted-score-430" class="level4">
<h4>Answer accepted (score 430)</h4>
<p><strong>Starting with Python 2.6</strong> (and if you’re on Python 3) you have a <strong>standard-library</strong> tool for this: <a href="https://docs.python.org/2/library/itertools.html
#itertools.permutations" rel="noreferrer"><code>itertools.permutations</code></a>.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true"></a>import itertools</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true"></a>list(itertools.permutations([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]))</span></code></pre></div>
<hr>
<p>If you’re using an <strong>older Python (&lt;2.6)</strong> for some reason or are just curious to know how it works, here’s one nice approach, taken from <a href="http://code.activestate.com/recipes/252178/" rel="noreferrer">http://code.activestate.com/recipes/252178/</a>:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true"></a>def all_perms(elements):</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true"></a>    <span class="cf">if</span> len(elements) &lt;=<span class="dv">1</span>:</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true"></a>        yield elements</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true"></a>    <span class="cf">else</span>:</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true"></a>        <span class="cf">for</span> perm in all_perms(elements[<span class="dv">1</span>:]):</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true"></a>            <span class="cf">for</span> i in range(len(elements)):</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true"></a></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true"></a><span class="er"># nb elements[0:1] works in both string and list contexts</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true"></a>                yield perm[:i] + elements[<span class="dv">0</span>:<span class="dv">1</span>] + perm[i:]</span></code></pre></div>
<p>A couple of alternative approaches are listed in the documentation of <code>itertools.permutations</code>. Here’s one:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true"></a>def permutations(iterable, r=None):</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true"></a><span class="er"># permutations(&#39;ABCD&#39;, 2) --&gt; AB AC AD BA BC BD CA CB CD DA DB DC</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true"></a><span class="er"># permutations(range(3)) --&gt; 012 021 102 120 201 210</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true"></a>    pool = tuple(iterable)</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true"></a>    n = len(pool)</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true"></a>    r = n <span class="cf">if</span> r is None <span class="cf">else</span> r</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true"></a>    <span class="cf">if</span> r &gt; n:</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true"></a>        <span class="cf">return</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true"></a>    indices = range(n)</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true"></a>    cycles = range(n, n-r, -<span class="dv">1</span>)</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true"></a>    yield tuple(pool[i] <span class="cf">for</span> i in indices[:r])</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true"></a>    <span class="cf">while</span> n:</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true"></a>        <span class="cf">for</span> i in reversed(range(r)):</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true"></a>            cycles[i] -= <span class="dv">1</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true"></a>            <span class="cf">if</span> cycles[i] == <span class="dv">0</span>:</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true"></a>                indices[i:] = indices[i+<span class="dv">1</span>:] + indices[i:i+<span class="dv">1</span>]</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true"></a>                cycles[i] = n - i</span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true"></a>            <span class="cf">else</span>:</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true"></a>                j = cycles[i]</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true"></a>                indices[i], indices[-j] = indices[-j], indices[i]</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true"></a>                yield tuple(pool[i] <span class="cf">for</span> i in indices[:r])</span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true"></a>                <span class="cf">break</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true"></a>            <span class="cf">return</span></span></code></pre></div>
<p>And another, based on <code>itertools.product</code>:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true"></a>def permutations(iterable, r=None):</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true"></a>    pool = tuple(iterable)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true"></a>    n = len(pool)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true"></a>    r = n <span class="cf">if</span> r is None <span class="cf">else</span> r</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true"></a>    <span class="cf">for</span> indices in product(range(n), repeat=r):</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true"></a>        <span class="cf">if</span> len(set(indices)) == r:</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true"></a>            yield tuple(pool[i] <span class="cf">for</span> i in indices)</span></code></pre></div>
</section>
<section id="answer-2-score-330" class="level4">
<h4>Answer 2 (score 330)</h4>
<p>And in <a href="http://docs.python.org/dev/whatsnew/2.6.html" rel="noreferrer">Python 2.6</a> onwards:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true"></a>import itertools</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true"></a>itertools.permutations([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>])</span></code></pre></div>
<p>(returned as a generator. Use <code>list(permutations(l))</code> to return as a list.)</p>
</section>
<section id="answer-3-score-262" class="level4">
<h4>Answer 3 (score 262)</h4>
<p><em>The following code with Python 2.6 and above ONLY</em></p>
<p>First, import <code>itertools</code>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true"></a>import itertools</span></code></pre></div>
<h5>
Permutation (order matters):
</h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true"></a>print list(itertools.permutations([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>], <span class="dv">2</span>))</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true"></a>[(<span class="dv">1</span>, <span class="dv">2</span>), (<span class="dv">1</span>, <span class="dv">3</span>), (<span class="dv">1</span>, <span class="dv">4</span>),</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true"></a>(<span class="dv">2</span>, <span class="dv">1</span>), (<span class="dv">2</span>, <span class="dv">3</span>), (<span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true"></a>(<span class="dv">3</span>, <span class="dv">1</span>), (<span class="dv">3</span>, <span class="dv">2</span>), (<span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true"></a>(<span class="dv">4</span>, <span class="dv">1</span>), (<span class="dv">4</span>, <span class="dv">2</span>), (<span class="dv">4</span>, <span class="dv">3</span>)]</span></code></pre></div>
<h5>
Combination (order does NOT matter):
</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true"></a>print list(itertools.combinations(&#39;<span class="dv">123</span><span class="er">&#39;</span>, <span class="dv">2</span>))</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true"></a>[(<span class="ch">&#39;1&#39;</span>, <span class="ch">&#39;2&#39;</span>), (<span class="ch">&#39;1&#39;</span>, <span class="ch">&#39;3&#39;</span>), (<span class="ch">&#39;2&#39;</span>, <span class="ch">&#39;3&#39;</span>)]</span></code></pre></div>
<h5>
Cartesian product (with several iterables):
</h3>
<div class="sourceCode" id="cb57"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true"></a>print list(itertools.product([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>], [<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]))</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true"></a>[(<span class="dv">1</span>, <span class="dv">4</span>), (<span class="dv">1</span>, <span class="dv">5</span>), (<span class="dv">1</span>, <span class="dv">6</span>),</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true"></a>(<span class="dv">2</span>, <span class="dv">4</span>), (<span class="dv">2</span>, <span class="dv">5</span>), (<span class="dv">2</span>, <span class="dv">6</span>),</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true"></a>(<span class="dv">3</span>, <span class="dv">4</span>), (<span class="dv">3</span>, <span class="dv">5</span>), (<span class="dv">3</span>, <span class="dv">6</span>)]</span></code></pre></div>
<h5>
Cartesian product (with one iterable and itself):
</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true"></a>print list(itertools.product([<span class="dv">1</span>,<span class="dv">2</span>], repeat=<span class="dv">3</span>))</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true"></a>[(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), (<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>), (<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true"></a>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>), (<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>), (<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>), (<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>)]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="finding-the-maxmin-value-in-an-array-of-primitives-using-java-score-549345-in-2015" class="level3">
<h3>9: Finding the max/min value in an array of primitives using Java (score <a href="https://stackoverflow.com/q/1484347.html">549345</a> in 2015)</h3>
<section id="question-8" class="level4">
<h4>Question</h4>
<p>It’s trivial to write a function to determine the min/max value in an array, such as:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true"></a><span class="co">/**</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true"></a><span class="co"> * </span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">chars</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true"></a><span class="co"> * </span><span class="an">@return</span><span class="co"> the max value in the array of chars</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true"></a><span class="co"> */</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true"></a>private <span class="dt">static</span> <span class="dt">int</span> maxValue(<span class="dt">char</span>[] chars) {</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true"></a>    <span class="dt">int</span> max = chars[<span class="dv">0</span>];</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> ktr = <span class="dv">0</span>; ktr &lt; chars.length; ktr++) {</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true"></a>        <span class="cf">if</span> (chars[ktr] &gt; max) {</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true"></a>            max = chars[ktr];</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true"></a>        }</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true"></a>    }</span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true"></a>    <span class="cf">return</span> max;</span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true"></a>}</span></code></pre></div>
<p>but isn’t this already done somewhere?</p>
</section>
<section id="answer-accepted-score-162" class="level4">
<h4>Answer accepted (score 162)</h4>
<p>Using Commons Lang (to convert) + Collections (to min/max)</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true"></a>import java.util.Arrays;</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true"></a>import java.util.Collections;</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true"></a>import org.apache.commons.lang.ArrayUtils;</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true"></a>public class MinMaxValue {</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true"></a></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">void</span> main(String[] args) {</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true"></a>        <span class="dt">char</span>[] a = {<span class="ch">&#39;3&#39;</span>, <span class="ch">&#39;5&#39;</span>, <span class="ch">&#39;1&#39;</span>, <span class="ch">&#39;4&#39;</span>, <span class="ch">&#39;2&#39;</span>};</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true"></a></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true"></a>        List b = Arrays.asList(ArrayUtils.toObject(a));</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true"></a></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true"></a>        System.out.println(Collections.min(b));</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true"></a>        System.out.println(Collections.max(b));</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true"></a>   }</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true"></a>}</span></code></pre></div>
<p>Note that <code>Arrays.asList()</code> wraps the underlying array, so it should not be too memory intensive and it should not perform a copy on the elements of the array.</p>
</section>
<section id="answer-2-score-73" class="level4">
<h4>Answer 2 (score 73)</h4>
<p>You can simply use the new Java 8 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html" rel="noreferrer"><code>Stream</code>s</a> but you have to work with <code>int</code>.</p>
<p>The <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html
#stream-int:A-" rel="noreferrer"><code>stream</code></a> method of the utility class <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html" rel="noreferrer"><code>Arrays</code></a> gives you an <a href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html" rel="noreferrer"><code>IntStream</code></a> on which you can use the <a href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#min--" rel="noreferrer"><code>min</code></a> method. You can also do <a href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#max--" rel="noreferrer"><code>max</code></a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#sum--" rel="noreferrer"><code>sum</code></a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#average--" rel="noreferrer"><code>average</code></a>,…</p>
<p>The <a href="http://docs.oracle.com/javase/8/docs/api/java/util/OptionalInt.html
#getAsInt--" rel="noreferrer"><code>getAsInt</code></a> method is used to get the value from the <a href="http://docs.oracle.com/javase/8/docs/api/java/util/OptionalInt.html" rel="noreferrer"><code>OptionalInt</code></a></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true"></a>import java.util.Arrays;</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true"></a>public class Test {</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">void</span> main(String[] args){</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true"></a>        <span class="dt">int</span>[] tab = {<span class="dv">12</span>, <span class="dv">1</span>, <span class="dv">21</span>, <span class="dv">8</span>};</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true"></a>        <span class="dt">int</span> min = Arrays.stream(tab).min().getAsInt();</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true"></a>        <span class="dt">int</span> max = Arrays.stream(tab).max().getAsInt();</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true"></a>        System.out.println(<span class="st">&quot;Min = &quot;</span> + min);</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true"></a>        System.out.println(<span class="st">&quot;Max = &quot;</span> + max)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true"></a>    }</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true"></a></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true"></a>}</span></code></pre></div>
<p><strong>==UPDATE==</strong></p>
<p>If execution time is important and you want to go through the data only once you can use the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html
#summaryStatistics--" rel="noreferrer"><code>summaryStatistics()</code></a> method like this</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true"></a>import java.util.Arrays;</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true"></a>import java.util.IntSummaryStatistics;</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true"></a>public class SOTest {</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">void</span> main(String[] args){</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true"></a>        <span class="dt">int</span>[] tab = {<span class="dv">12</span>, <span class="dv">1</span>, <span class="dv">21</span>, <span class="dv">8</span>};</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true"></a>        IntSummaryStatistics stat = Arrays.stream(tab).summaryStatistics();</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true"></a>        <span class="dt">int</span> min = stat.getMin();</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true"></a>        <span class="dt">int</span> max = stat.getMax();</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true"></a>        System.out.println(<span class="st">&quot;Min = &quot;</span> + min);</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true"></a>        System.out.println(<span class="st">&quot;Max = &quot;</span> + max);</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true"></a>    }</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true"></a>}</span></code></pre></div>
<p>This approach can give better performance than classical loop because the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html
#summaryStatistics--" rel="noreferrer"><code>summaryStatistics</code></a> method is a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html#Reduction" rel="noreferrer">reduction operation</a> and it allows parallelization.</p>
</section>
<section id="answer-3-score-56" class="level4">
<h4>Answer 3 (score 56)</h4>
<p>The <a href="http://code.google.com/p/guava-libraries/" rel="noreferrer">Google Guava library</a> has min and max methods in its Chars, Ints, Longs, etc. classes.</p>
<p>So you can simply use:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true"></a>Chars.min(myarray)</span></code></pre></div>
<p>No conversions are required and presumably it’s efficiently implemented.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="generating-all-permutations-of-a-given-string-score-535495-in-2013" class="level3">
<h3>10: Generating all permutations of a given string (score <a href="https://stackoverflow.com/q/4240080.html">535495</a> in 2013)</h3>
<section id="question-9" class="level4">
<h4>Question</h4>
<p>What is an elegant way to find all the permutations of a string. E.g. <code>ba</code>, would be <code>ba</code> and <code>ab</code>, but what about <code>abcdefgh</code>? Is there any example Java implementation?</p>
</section>
<section id="answer-accepted-score-581" class="level4">
<h4>Answer accepted (score 581)</h4>
<div class="sourceCode" id="cb64"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true"></a>public <span class="dt">static</span> <span class="dt">void</span> permutation(String str) { </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true"></a>    permutation(<span class="st">&quot;&quot;</span>, str); </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true"></a>}</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true"></a>private <span class="dt">static</span> <span class="dt">void</span> permutation(String prefix, String str) {</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true"></a>    <span class="dt">int</span> n = str.length();</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true"></a>    <span class="cf">if</span> (n == <span class="dv">0</span>) System.out.println(prefix);</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true"></a>    <span class="cf">else</span> {</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; n; i++)</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true"></a>            permutation(prefix + str.charAt(i), str.substring(<span class="dv">0</span>, i) + str.substring(i+<span class="dv">1</span>, n));</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true"></a>    }</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true"></a>}</span></code></pre></div>
<p>(via <a href="http://introcs.cs.princeton.edu/java/23recursion/Permutations.java.html" rel="noreferrer">Introduction to Programming in Java</a>)</p>
</section>
<section id="answer-2-score-193" class="level4">
<h4>Answer 2 (score 193)</h4>
<p>Use recursion.</p>
<ul>
<li>
Try each of the letters in turn as the first letter and then find all the permutations of the remaining letters using a recursive call.
</li>
<li>
The base case is when the input is an empty string the only permutation is the empty string.
</li>
</ul>
</section>
<section id="answer-3-score-65" class="level4">
<h4>Answer 3 (score 65)</h4>
<p>Here is my solution that is based on the idea of the book “Cracking the Coding Interview” (P54):</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true"></a><span class="co">/**</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true"></a><span class="co"> * List permutations of a string.</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true"></a><span class="co"> * </span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">s</span><span class="co"> the input string</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true"></a><span class="co"> * </span><span class="an">@return</span><span class="co">  the list of permutations</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true"></a><span class="co"> */</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true"></a>public <span class="dt">static</span> ArrayList&lt;String&gt; permutation(String s) {</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true"></a>    <span class="co">// The result</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true"></a>    ArrayList&lt;String&gt; res = new ArrayList&lt;String&gt;();</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true"></a>    <span class="co">// If input string&#39;s length is 1, return {s}</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true"></a>    <span class="cf">if</span> (s.length() == <span class="dv">1</span>) {</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true"></a>        res.add(s);</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true"></a>    } <span class="cf">else</span> <span class="cf">if</span> (s.length() &gt; <span class="dv">1</span>) {</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true"></a>        <span class="dt">int</span> lastIndex = s.length() - <span class="dv">1</span>;</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true"></a>        <span class="co">// Find out the last character</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true"></a>        String last = s.substring(lastIndex);</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true"></a>        <span class="co">// Rest of the string</span></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true"></a>        String rest = s.substring(<span class="dv">0</span>, lastIndex);</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true"></a>        <span class="co">// Perform permutation on the rest string and</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true"></a>        <span class="co">// merge with the last character</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true"></a>        res = merge(permutation(rest), last);</span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true"></a>    }</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true"></a>    <span class="cf">return</span> res;</span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true"></a>}</span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true"></a></span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true"></a><span class="co">/**</span></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">list</span><span class="co"> a result of permutation, e.g. {&quot;ab&quot;, &quot;ba&quot;}</span></span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">c</span><span class="co">    the last character</span></span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true"></a><span class="co"> * </span><span class="an">@return</span><span class="co">     a merged new list, e.g. {&quot;cab&quot;, &quot;acb&quot; ... }</span></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true"></a><span class="co"> */</span></span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true"></a>public <span class="dt">static</span> ArrayList&lt;String&gt; merge(ArrayList&lt;String&gt; list, String c) {</span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true"></a>    ArrayList&lt;String&gt; res = new ArrayList&lt;&gt;();</span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true"></a>    <span class="co">// Loop through all the string in the list</span></span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true"></a>    <span class="cf">for</span> (String s : list) {</span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true"></a>        <span class="co">// For each string, insert the last character to all possible positions</span></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true"></a>        <span class="co">// and add them to the new list</span></span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt;= s.length(); ++i) {</span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true"></a>            String ps = new StringBuffer(s).insert(i, c).toString();</span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true"></a>            res.add(ps);</span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true"></a>        }</span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true"></a>    }</span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true"></a>    <span class="cf">return</span> res;</span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true"></a>}</span></code></pre></div>
<hr>
<p>Running output of string “abcd”:</p>
<ul>
<li>
<p>
Step 1: Merge [a] and b: [ba, ab]
</p>
</li>
<li>
<p>
Step 2: Merge [ba, ab] and c: [cba, bca, bac, cab, acb, abc]
</p>
</li>
<li>
<p>
Step 3: Merge [cba, bca, bac, cab, acb, abc] and d: [dcba, cdba, cbda, cbad, dbca, bdca, bcda, bcad, dbac, bdac, badc, bacd, dcab, cdab, cadb, cabd, dacb, adcb, acdb, acbd, dabc, adbc, abdc, abcd]
</p>
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-count-the-number-of-set-bits-in-a-32-bit-integer-score-513420-in-2014" class="level3">
<h3>11: How to count the number of set bits in a 32-bit integer? (score <a href="https://stackoverflow.com/q/109023.html">513420</a> in 2014)</h3>
<section id="question-10" class="level4">
<h4>Question</h4>
<p>8 bits representing the number 7 look like this:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true"></a><span class="bn">00000111</span></span></code></pre></div>
<p>Three bits are set.</p>
<p>What are algorithms to determine the number of set bits in a 32-bit integer?</p>
</section>
<section id="answer-accepted-score-823" class="level4">
<h4>Answer accepted (score 823)</h4>
<p>This is known as the ‘<a href="https://en.wikipedia.org/wiki/Hamming_weight" rel="noreferrer">Hamming Weight</a>’, ‘popcount’ or ‘sideways addition’.</p>
<p>The ‘best’ algorithm really depends on which CPU you are on and what your usage pattern is.</p>
<p>Some CPUs have a single built-in instruction to do it and others have parallel instructions which act on bit vectors. The parallel instructions (like x86’s <code>popcnt</code>, on CPUs where it’s supported) will almost certainly be fastest. Some other architectures may have a slow instruction implemented with a microcoded loop that tests a bit per cycle (<em>citation needed</em>).</p>
<p>A pre-populated table lookup method can be very fast if your CPU has a large cache and/or you are doing lots of these instructions in a tight loop. However it can suffer because of the expense of a ‘cache miss’, where the CPU has to fetch some of the table from main memory.</p>
<p>If you know that your bytes will be mostly 0’s or mostly 1’s then there are very efficient algorithms for these scenarios.</p>
<p>I believe a very good general purpose algorithm is the following, known as ‘parallel’ or ‘variable-precision SWAR algorithm’. I have expressed this in a C-like pseudo language, you may need to adjust it to work for a particular language (e.g. using uint32_t for C++ and &gt;&gt;&gt; in Java):</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true"></a><span class="dt">int</span> numberOfSetBits(<span class="dt">int</span> i)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true"></a>{</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true"></a>     <span class="co">// Java: use &gt;&gt;&gt; instead of &gt;&gt;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true"></a>     <span class="co">// C or C++: use uint32_t</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true"></a>     i = i - ((i &gt;&gt; <span class="dv">1</span>) &amp; <span class="bn">0x55555555</span>);</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true"></a>     i = (i &amp; <span class="bn">0x33333333</span>) + ((i &gt;&gt; <span class="dv">2</span>) &amp; <span class="bn">0x33333333</span>);</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true"></a>     <span class="cf">return</span> (((i + (i &gt;&gt; <span class="dv">4</span>)) &amp; <span class="bn">0x0F0F0F0F</span>) * <span class="bn">0x01010101</span>) &gt;&gt; <span class="dv">24</span>;</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>This has the best worst-case behaviour of any of the algorithms discussed, so will efficiently deal with any usage pattern or values you throw at it.</p>
<hr>
<p>This bitwise-SWAR algorithm could parallelize to be done in multiple vector elements at once, instead of in a single integer register, for a speedup on CPUs with SIMD but no usable popcount instruction. (e.g. x86-64 code that has to run on any CPU, not just Nehalem or later.)</p>
<p>However, the best way to use vector instructions for popcount is usually by using a variable-shuffle to do a table-lookup for 4 bits at a time of each byte in parallel. (The 4 bits index a 16 entry table held in a vector register).</p>
<p>On Intel CPUs, the hardware 64bit popcnt instruction can outperform an <a href="http://wm.ite.pl/articles/sse-popcount.html" rel="noreferrer">SSSE3 <code>PSHUFB</code> bit-parallel implementation</a> by about a factor of 2, but only <a href="http://danluu.com/assembly-intrinsics/" rel="noreferrer">if your compiler gets it just right</a>. Otherwise SSE can come out significantly ahead. Newer compiler versions are aware of the <a href="https://stackoverflow.com/a/25089720/224132">popcnt false dependency</a> <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=62011" rel="noreferrer">problem on Intel</a>.</p>
<p>References:</p>
<p><a href="https://graphics.stanford.edu/~seander/bithacks.html
#CountBitsSetParallel" rel="noreferrer">https://graphics.stanford.edu/~seander/bithacks.html</a></p>
<p><a href="https://en.wikipedia.org/wiki/Hamming_weight" rel="noreferrer">https://en.wikipedia.org/wiki/Hamming_weight</a></p>
<p><a href="http://gurmeet.net/puzzles/fast-bit-counting-routines/" rel="noreferrer">http://gurmeet.net/puzzles/fast-bit-counting-routines/</a></p>
<p><a href="http://aggregate.ee.engr.uky.edu/MAGIC/
#Population%20Count%20(Ones%20Count)" rel="noreferrer">http://aggregate.ee.engr.uky.edu/MAGIC/#Population%20Count%20(Ones%20Count)</a></p>
</section>
<section id="answer-2-score-206" class="level4">
<h4>Answer 2 (score 206)</h4>
<p>Also consider the built-in functions of your compilers.</p>
<p>On the GNU compiler for example you can just use:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true"></a><span class="dt">int</span> __builtin_popcount (<span class="dt">unsigned</span> <span class="dt">int</span> x);</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true"></a><span class="dt">int</span> __builtin_popcountll (<span class="dt">unsigned</span> <span class="dt">long</span> <span class="dt">long</span> x);</span></code></pre></div>
<p>In the worst case the compiler will generate a call to a function. In the best case the compiler will emit a cpu instruction to do the same job faster.</p>
<p>The GCC intrinsics even work across multiple platforms. Popcount will become mainstream in the x86 architecture, so it makes sense to start using the intrinsic now. Other architectures have the popcount for years.</p>
<hr>
<p>On x86, you can tell the compiler that it can assume support for <code>popcnt</code> instruction with <code>-mpopcnt</code> or <code>-msse4.2</code> to also enable the vector instructions that were added in the same generation. See <a href="https://gcc.gnu.org/onlinedocs/gcc/x86-Options.html" rel="noreferrer">GCC x86 options</a>. <code>-march=nehalem</code> (or <code>-march=</code> whatever CPU you want your code to assume and to tune for) could be a good choice. Running the resulting binary on an older CPU will result in an illegal-instruction fault.</p>
<p>To make binaries optimized for the machine you build them on, use <code>-march=native</code> (with gcc, clang, or ICC).</p>
<p><a href="https://stackoverflow.com/questions/3849337/msvc-equivalent-to-builtin-popcount">MSVC provides an intrinsic for the x86 <code>popcnt</code> instruction</a>, but unlike gcc it’s really an intrinsic for the hardware instruction and requires hardware support.</p>
<hr>
<p><strong>Using <code>std::bitset&amp;lt;&amp;gt;::count()</code> instead of a built-in</strong></p>
<p>In theory, any compiler that knows how to popcount efficiently for the target CPU should expose that functionality through ISO C++ <a href="http://en.cppreference.com/w/cpp/utility/bitset/count" rel="noreferrer"><code>std::bitset&amp;lt;&amp;gt;</code></a>. In practice, you might be better off with the bit-hack AND/shift/ADD in some cases for some target CPUs.</p>
<p>For target architectures where hardware popcount is an optional extension (like x86), not all compilers have a <code>std::bitset</code> that takes advantage of it when available. For example, MSVC has no way to enable <code>popcnt</code> support at compile time, and always uses <a href="https://stackoverflow.com/questions/12324081/how-does-this-implementation-of-bitsetcount-work">a table lookup</a>, even with <code>/Ox /arch:AVX</code> (which implies SSE4.2, although technically there is a separate feature bit for <code>popcnt</code>.)</p>
<p>But at least you get something portable that works everywhere, and with gcc/clang with the right target options, you get hardware popcount for architectures that support it.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true"></a></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;bitset&gt;</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;limits&gt;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true"></a></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;type_traits&gt;</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true"></a></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true"></a>template&lt;typename T&gt;</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true"></a><span class="co">//static inline  // static if you want to compile with -mpopcnt in one compilation unit but not others</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true"></a>typename std::enable_if&lt;std::is_integral&lt;T&gt;::value,  <span class="dt">unsigned</span> &gt;::type </span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true"></a>popcount(T x)</span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true"></a>{</span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true"></a>    static_assert(std::numeric_limits&lt;T&gt;::radix == <span class="dv">2</span>, <span class="st">&quot;non-binary type&quot;</span>);</span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true"></a></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true"></a>    <span class="co">// sizeof(x)*CHAR_BIT</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true"></a>    constexpr <span class="dt">int</span> bitwidth = std::numeric_limits&lt;T&gt;::digits + std::numeric_limits&lt;T&gt;::is_signed;</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true"></a>    <span class="co">// std::bitset constructor was only unsigned long before C++11.  Beware if porting to C++03</span></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true"></a>    static_assert(bitwidth &lt;= std::numeric_limits&lt;<span class="dt">unsigned</span> <span class="dt">long</span> <span class="dt">long</span>&gt;::digits, <span class="st">&quot;arg too wide for std::bitset() constructor&quot;</span>);</span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true"></a></span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true"></a>    <span class="kw">typedef</span> typename std::make_unsigned&lt;T&gt;::type UT;        <span class="co">// probably not needed, bitset width chops after sign-extension</span></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true"></a></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true"></a>    std::bitset&lt;bitwidth&gt; bs( static_cast&lt;UT&gt;(x) );</span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true"></a>    <span class="cf">return</span> bs.count();</span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true"></a>}</span></code></pre></div>
<p>See <a href="https://gcc.godbolt.org/
#z:OYLghAFBqd5TKALEBjA9gEwKYFFMCWALugE4A0BIEAViAIzkDO6ArqatiAOQCkATAGYCAO1QAbVjgDUvQQGEARsSbYic3LwAMAQQHCxkmXPniCAWxUbteoaIlTsshUQCeAB2wB9IqQCGVoKaugD0IdIAqqrSREhOSOieAGas4uKuALTA6FjSTESYICDKRKpERRisIkQQAJTSFu7i2ObY1X5EBOgi0klk0n6kJf6krg3V2MDYpDEe2Ew2YdI6AG7oBJhMeQTAIhnYAB5EbYQiwNu72Jizngu6i%2BEA8j3AqKgDItcSfmfk0tgAR1YBBWfma1Ri6GkXi8imB4k6Ii87kSlWqaTqD2kmHQAHcREwNlwBuJcX5XFtWKotgA2AAsGRK0kS0x%2BmAyhIAXk4IN1pPTGcRpPIAApRWpYgBiZE4W25pHQ%2ByObUJfJI/IZJQAdFidOIWHlxHjptJccQEqwiNIkINMGTSE4Ue40UQ/vNPKgCGD0qbzQMYn5FM0Mkb0ABrVjuaSh9w60JPHoHAAcNL%2BuLI0ViCtYwCQ7ktzJ6OgAsgARaQAIVS4hx8oyST8lh9sR%2B0kE/EFVqdqGquv1ULJ%2BXm/oASrgABrSdwOpIEA5xvS6Y7mJodbAmNyeESNpwAFWs8fyHQI71EZhETmkSyPnVPSWkrjYpp%2BVvVGBXBGavti0gyK9REKiIWTjvu4n7HnyVRCnCVoiOgVrwXEpB3Dom5tDueQFEU6FBt4BBJCY%2BSFCABBMF4ojHMA/jiCY%2B5BEUoKSNgfzSFUhKXNcGhFGhsi6N2bDVBAu7SAcEr3AA7BWNjaAAnDeJ5eH4TCqKQNREUUIisK0pAKWYlilLRXEgP4hAHM4pZyOW/B/AI/BwXsyjbqMNzrvw/ASoIUn3N5MnXgQ3LoEkECiQAVPIAASOgjl4FYAJL7j5GAEscBzTuMVolGamA/pZmHEZp2m6RYgTyHRuBFIQwAqLI/AVnlGladMRX6QsChlUUpFeOxF6YHIXmLr54TqcUKhqNISX5KQrCoCQMyDoWPpsTsPXRt05yKNgfQOsKAhSbV9D0Fq0iVtg9pOPhU5kIi5zqvIu27Vogg2Mdx3yaginKdMNSZRsOUKLlw0FU1716SVS0catZyQ8ARmVSoNluYMN05L6MhbfVI2lGodTjd0k3TbNtkef10laDJaE4PeaHbq0GPmH4YbeODPWGfRIA8REdF1S9PNLNO6CKIGPpwbB2BXFcfwlGUqM/qgCTuFsfhJMcMzdUqxwEl0Iik3JWGY2UJg/dlSAaNIihMBAmHHu9qBKeoCicxowX1MTOsOkQ7A9ObWoupinnSeJFneYuOjM1cMTzEQyKogJUdMAkqkQPHV0DPUvCSdI7ue5dzqxxAfjE7Igc2GH1zHPk0e51UUcURAFGp0XdVZ6QPT8dX%2BeF%2BnQc6GEpcRxXbfVF4pcQH3BeN5najZ4PNQF31Rfd335dRzP9IQEaUMb%2Bc4/p03U8tznvtz55C9YjhzTkfe%2BSJFssSkb0CrmLjH7nsj/o4qwuEZBofdJSs0yqm1vGJekdK7vQ/rhCAECvw7wzs3VuMd27Hzql3UmId659HQEnBOVo/B/C3tDM2adJJu33j0HWh8847x8rtSh7dFCu10C9PqAdu5oKWDCCi9B%2BBJgaFsLKJoWw9D7gQre0k7D3noDVGkAgaTYk2qIK4EAYQAGVYoAC1cCPElF4WKAA5Xc3CkwwjEj3cIsQnBvQ%2BipK018FYxCQPfJIj9n5gVftICA6pug%2BhdA4pwRpcTWjBEkUxvdNYQ2XmA2ORjlHkWqEYhuu9J4ewPjPDu89UHByWLuRxWwbSoDDKaMgYYth8leKgEI3wzggAGMpRqZtRpWnvmCMkFJejiA6NIVo5gyCuBAM9F6SxYrRk2q%2BXJzICyBT8RHFcHTjhm2wLbKk50iBgG4FsEWl1VJC3XD5MI%2BEk7%2BWwIFZ2zhcDbACkFERa1oa1DTns8IL1umoHcK4CAsjzYIxpAcP4XJjlBXNnclhwd9D2CME4EwqBJqiBhkEEu4SVr5LDFE6uMTOHxJ4YkkhPlhpSzUCYIxptzbpP9j5Z5rz3n8BpJ86ReCLn/IgICwuV5wj2hEDCmpGBXkwo%2BMyRQNBFkIXvPZDIvgQRenEC5DxZofww1qrtUxsl4FmyYD7POjC9DF3uEIE4%2BEbDcFqOQcQPAACs3ByAiB4Foc16AeB3XlbVPIbAOAQqEPQc15RuDWrueQMMIBBBJi1FoGk4lxL0BkgGmkSYkxaC0HSI1PA6TmvMCAcSWgtT0BpDSdsWhM3Zv4Lm1MlqvU2p4OapgIAtDkE9d68gcBYAoFAp%2BaYlBqBNuaKQEA7hnT0maMAbNVbZwIgAdQRQVrzXvlaNUZ46Rx3kEIA6GaIJ5hzootgY1JbDVmHNvAQ1iROh4x4BkAA6t6X8jxBC/iIpZXYrB7r7XdcwZ1nAGBbtNea4t1ryC2u4CKY0pARTyA1PyLUggg0ePwMQfo%2BhGDCnQC/E0MHagevHT6uIfgcCdrqAm7gSbyApv4DJLUSZBCCBDTJEjZHxIUYDRaudP7y2Vurahw1fqA1BpDWGiNKZo2xvjRuwQH76NluY5uutiB63IDQPBtxLaqAQHbdMNAHSzhkZ%2BUOlWFbGVzsnW0IgM6%2BklvnQQRdnR/4VqM2ujdtbt0VsgHu9wB6CRHuvYIUst770VgOlego27LLbtQJ538p60jnsvX%2BbsEI/yDDlpZG0TBcTrvEOW59XBGBkmnY52KIg%2Bg8HdW%2B7gZq6NGZ/cmGkGR6TjRU%2BcMDciICQdmjVQQsH5AyebTMfQghkOie9Ya9DmHqCsf9YGmSdIkwmpkuJJMdITUxqozhvDKbSPEfoLm3NMkZLcJNVNmSxWv0MeYExmtBrxPwAgI2trHbW0Kcu0p4AdJRvkA0yO2JXgtCDfIGOozunp0iFnUZhdgrl0Wa/VZudNAgTTEM2B/gGbzXgmALEBg5BpzYBWI8flgrqAwje9QLknJmj0BNcG4Nm2TV0jG4IagVRKaKMKOvSYJx4D0HEoINNu2q3cHy3crdbREcoEYKj9HmOZrY5hO92gABFVgUP2yrZI4RmSNJHoza0MTjbJr6DUEIEwVchmTv48J8T5XNIycU5I9Tz4CierUD7UzyALO2dk3IJz7nPqEdI/oDzo1BAd32e/Y5rWFmT1noyBenzvU3MeYdV5qREWAJWmixwE2bn4uJbSCl9gL6vc4aK5%2B0t3AysVbpNIcp0g6RaiIyX%2BrhBGswb%2BK1hDHWhAmu68d93ibk3%2BpNcRmkE2c1K7I3SAtJq9sF8Y1W9vp2G3Sab9dxTnaTyoBZ09z8mmxe4%2Bw19r9P39N/cM1%2BwHS7zOromNZ81EOZejB4DDuHRq%2Bee5Rw6YXArRevYl4b7AROSem6J%2Bbqno8Vus4NuDOUwnwzO4kBaq2Lu5AXOBq3uHuAuT%2BaOGOr%2B5Q7%2B1ANA0usu/A8u7YG2yuggqu6uMkmu2upEeuZahqn%2B3%2BJuZulOlutOIBdu4BDukBa2MBcBPOvOZwnuCBvudm2G%2B6QeR6IWkqYe4Wrm7mmknm3m8ezoUW9Myelk24Zm2AmeLqr6ueQmJWPARelWS%2B0gLOEGte0GbqDet2zeRBbeLG5A/WSm2GG6i2/q6a7YggSuE23CbO1GY%2B36ImFak%2BthbGYGY2fej0SYrO/AkBYaOGgmvhB2U%2Bkm52s%2BsmFA8mC%2Bym4aXg9Iq%2Bw6yEo6Om8GU6e%2B/2h%2BJmQOJ%2BlmZ%2BqGPufuQhgeh63AIQjwZkIQMWKAOgAAauOBodnuQBlvplljlj%2BvltofEXoSmMXsKAADJGEyTSBQHiTSAji7jHomFQZWEtaWFNbuQoabpDY8JagU7bbiQhruHTaQF94LY6H7b%2BFHa2Ebr8Bd6rZVr55%2BHcB7G9bkD/zIRawgB0hAA%3D" rel="noreferrer">asm from gcc, clang, icc, and MSVC</a> on the Godbolt compiler explorer.</p>
<p>x86-64 <code>gcc -O3 -std=gnu++11 -mpopcnt</code> emits this:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true"></a><span class="dt">unsigned</span> test_short(<span class="dt">short</span> a) { <span class="cf">return</span> popcount(a); }</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true"></a>    movzx   eax, di</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true"></a><span class="er"># note zero-extension, not sign-extension</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true"></a>    popcnt  rax, rax</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true"></a>    ret</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true"></a><span class="dt">unsigned</span> test_int(<span class="dt">int</span> a) { <span class="cf">return</span> popcount(a); }</span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true"></a>    mov     eax, edi</span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true"></a>    popcnt  rax, rax</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true"></a>    ret</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true"></a><span class="dt">unsigned</span> test_u64(<span class="dt">unsigned</span> <span class="dt">long</span> <span class="dt">long</span> a) { <span class="cf">return</span> popcount(a); }</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true"></a>    xor     eax, eax</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true"></a><span class="er"># gcc avoids false dependencies for Intel CPUs</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true"></a>    popcnt  rax, rdi</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true"></a>    ret</span></code></pre></div>
<p>PowerPC64 <code>gcc -O3 -std=gnu++11</code> emits (for the <code>int</code> arg version):</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true"></a>    rldicl <span class="dv">3</span>,<span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">32</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true"></a><span class="er"># zero-extend from 32 to 64-bit</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true"></a>    popcntd <span class="dv">3</span>,<span class="dv">3</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true"></a><span class="er"># popcount</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true"></a>    blr</span></code></pre></div>
<p>This source isn’t x86-specific or GNU-specific at all, but only compiles well for x86 with gcc/clang/icc.</p>
<p>Also note that gcc’s fallback for architectures without single-instruction popcount is a byte-at-a-time table lookup. This isn’t wonderful <a href="https://stackoverflow.com/questions/15736602/fastest-way-to-count-number-of-1s-in-a-register-arm-assembly">for ARM, for example</a>.</p>
</section>
<section id="answer-3-score-179" class="level4">
<h4>Answer 3 (score 179)</h4>
<p>In my opinion, the “best” solution is the one that can be read by another programmer (or the original programmer two years later) without copious comments. You may well want the fastest or cleverest solution which some have already provided but I prefer readability over cleverness any time.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> bitCount (<span class="dt">unsigned</span> <span class="dt">int</span> value) {</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> count = <span class="dv">0</span>;</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true"></a>    <span class="cf">while</span> (value &gt; <span class="dv">0</span>) {           <span class="co">// until all bits are zero</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true"></a>        <span class="cf">if</span> ((value &amp; <span class="dv">1</span>) == <span class="dv">1</span>)     <span class="co">// check lower bit</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true"></a>            count++;</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true"></a>        value &gt;&gt;= <span class="dv">1</span>;              <span class="co">// shift bits, removing lower bit</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true"></a>    }</span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true"></a>    <span class="cf">return</span> count;</span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>If you want more speed (and assuming you document it well to help out your successors), you could use a table lookup:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true"></a><span class="co">// Lookup table for fast calculation of bits set in 8-bit unsigned char.</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true"></a><span class="dt">static</span> <span class="dt">unsigned</span> <span class="dt">char</span> oneBitsInUChar[] = {</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true"></a><span class="co">//  0  1  2  3  4  5  6  7  8  9  A  B  C  D  E  F (&lt;- n)</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true"></a><span class="co">//  =====================================================</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true"></a>    <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="co">// 0n</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true"></a>    <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="co">// 1n</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true"></a>    : : :</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true"></a>    <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="co">// Fn</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true"></a>};</span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true"></a></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true"></a><span class="co">// Function for fast calculation of bits set in 16-bit unsigned short.</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true"></a></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> oneBitsInUShort (<span class="dt">unsigned</span> <span class="dt">short</span> x) {</span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true"></a>    <span class="cf">return</span> oneBitsInUChar [x &gt;&gt;    <span class="dv">8</span>]</span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true"></a>         + oneBitsInUChar [x &amp;  <span class="bn">0xff</span>];</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true"></a>}</span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true"></a></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true"></a><span class="co">// Function for fast calculation of bits set in 32-bit unsigned int.</span></span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true"></a></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> oneBitsInUInt (<span class="dt">unsigned</span> <span class="dt">int</span> x) {</span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true"></a>    <span class="cf">return</span> oneBitsInUShort (x &gt;&gt;     <span class="dv">16</span>)</span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true"></a>         + oneBitsInUShort (x &amp;  <span class="bn">0xffff</span>);</span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true"></a>}</span></code></pre></div>
<p>Although these rely on specific data type sizes so they’re not that portable. But, since many performance optimisations aren’t portable anyway, that may not be an issue. If you want portability, I’d stick to the readable solution.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-replace-all-occurrences-of-a-character-in-string-score-446818-in-2016" class="level3">
<h3>12: How to replace all occurrences of a character in string? (score <a href="https://stackoverflow.com/q/2896600.html">446818</a> in 2016)</h3>
<section id="question-11" class="level4">
<h4>Question</h4>
<p>What is the effective way to replace all occurrences of a character with another character in <code>std::string</code>?</p>
</section>
<section id="answer-accepted-score-682" class="level4">
<h4>Answer accepted (score 682)</h4>
<p><code>std::string</code> doesn’t contain such function but you could use stand-alone <code>replace</code> function from <code>algorithm</code> header.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true"></a></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;algorithm&gt;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true"></a></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;string&gt;</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true"></a></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true"></a><span class="dt">void</span> some_func() {</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true"></a>  std::string s = <span class="st">&quot;example string&quot;</span>;</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true"></a>  std::replace( s.begin(), s.end(), <span class="ch">&#39;x&#39;</span>, <span class="ch">&#39;y&#39;</span>); <span class="co">// replace all &#39;x&#39; to &#39;y&#39;</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-125" class="level4">
<h4>Answer 2 (score 125)</h4>
<p>I thought I’d toss in the <a href="http://www.boost.org/doc/libs/release/libs/algorithm/string">boost solution</a> as well:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true"></a></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;boost/algorithm/string/replace.hpp&gt;</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true"></a></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true"></a><span class="co">// in place</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true"></a>std::string in_place = <span class="st">&quot;blah</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true"></a><span class="er">#blah&quot;;</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true"></a>boost::replace_all(in_place, <span class="st">&quot;</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true"></a><span class="er">#&quot;, &quot;@&quot;);</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true"></a></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true"></a><span class="co">// copy</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true"></a><span class="dt">const</span> std::string input = <span class="st">&quot;blah</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true"></a><span class="er">#blah&quot;;</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true"></a>std::string output = boost::replace_all_copy(input, <span class="st">&quot;</span></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true"></a><span class="er">#&quot;, &quot;@&quot;);</span></span></code></pre></div>
</section>
<section id="answer-3-score-112" class="level4">
<h4>Answer 3 (score 112)</h4>
<p>The question is centered on <code>character</code> replacement, but, as I found this page very useful (especially <a href="https://stackoverflow.com/users/18664/konrad">Konrad</a>’s remark), I’d like to share this more generalized implementation, which allows to deal with <code>substrings</code> as well:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true"></a>std::string ReplaceAll(std::string str, <span class="dt">const</span> std::string&amp; from, <span class="dt">const</span> std::string&amp; to) {</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true"></a>    <span class="dt">size_t</span> start_pos = <span class="dv">0</span>;</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true"></a>    <span class="cf">while</span>((start_pos = str.find(from, start_pos)) != std::string::npos) {</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true"></a>        str.replace(start_pos, from.length(), to);</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true"></a>        start_pos += to.length(); <span class="co">// Handles case where &#39;to&#39; is a substring of &#39;from&#39;</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true"></a>    }</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true"></a>    <span class="cf">return</span> str;</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>Usage:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true"></a>std::cout &lt;&lt; ReplaceAll(string(<span class="st">&quot;Number Of Beans&quot;</span>), std::string(<span class="st">&quot; &quot;</span>), std::string(<span class="st">&quot;_&quot;</span>)) &lt;&lt; std::endl;</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true"></a>std::cout &lt;&lt; ReplaceAll(string(<span class="st">&quot;ghghjghugtghty&quot;</span>), std::string(<span class="st">&quot;gh&quot;</span>), std::string(<span class="st">&quot;X&quot;</span>)) &lt;&lt; std::endl;</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true"></a>std::cout &lt;&lt; ReplaceAll(string(<span class="st">&quot;ghghjghugtghty&quot;</span>), std::string(<span class="st">&quot;gh&quot;</span>), std::string(<span class="st">&quot;h&quot;</span>)) &lt;&lt; std::endl;</span></code></pre></div>
<p>Outputs:</p>
<blockquote>
<p>Number_Of_Beans</p>
<p>XXjXugtXty</p>
hhjhugthty
</blockquote>
<hr>
<p><strong>EDIT:</strong></p>
<p><em>The above can be implemented in a more suitable way, in case performances are of your concern, by returning nothing (<code>void</code>) and performing the changes directly on the string <code>str</code> given as argument, passed <strong>by address</strong> instead of <strong>by value</strong>. This would avoid useless and costly copy of the original string, while returning the result. Your call, then…</em></p>
<p><em>Code :</em></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true"></a><span class="dt">static</span> <span class="kw">inline</span> <span class="dt">void</span> ReplaceAll2(std::string &amp;str, <span class="dt">const</span> std::string&amp; from, <span class="dt">const</span> std::string&amp; to)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true"></a>{</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true"></a>    <span class="co">// Same inner code...</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true"></a>    <span class="co">// No return statement</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true"></a>}</span></code></pre></div>
<hr>
<p>Hope this will be helpful for some others…</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-detect-credit-card-type-based-on-number-score-438429-in-2011" class="level3">
<h3>13: How do you detect Credit card type based on number? (score <a href="https://stackoverflow.com/q/72768.html">438429</a> in 2011)</h3>
<section id="question-12" class="level4">
<h4>Question</h4>
<p>I’m trying to figure out how to detect the type of credit card based purely on its number. Does anyone know of a definitive, reliable way to find this?</p>
</section>
<section id="answer-accepted-score-735" class="level4">
<h4>Answer accepted (score 735)</h4>
<p>The credit/debit card number is referred to as a <strong>PAN</strong>, or <em>Primary Account Number</em>. The first six digits of the PAN are taken from the <strong>IIN</strong>, or <em>Issuer Identification Number</em>, belonging to the issuing bank (IINs were previously known as BIN — Bank Identification Numbers — so you may see references to that terminology in some documents). These six digits are subject to an international standard, <a href="http://en.wikipedia.org/wiki/ISO/IEC_7812" rel="noreferrer">ISO/IEC 7812</a>, and can be used to determine the type of card from the number.</p>
<p>Unfortunately the actual ISO/IEC 7812 database is not publicly available, however, there are unofficial lists, both commercial and free, including <a href="http://en.wikipedia.org/wiki/Bank_card_number" rel="noreferrer">on Wikipedia</a>.</p>
<p>Anyway, to detect the type from the number, you can use a regular expression like the ones below: <a href="http://www.regular-expressions.info/creditcard.html" rel="noreferrer">Credit for original expressions</a></p>
<p><strong>Visa:</strong> <code>^4[0-9]{6,}$</code> Visa card numbers start with a 4.</p>
<p><strong>MasterCard:</strong> <code>^5[1-5][0-9]{5,}|222[1-9][0-9]{3,}|22[3-9][0-9]{4,}|2[3-6][0-9]{5,}|27[01][0-9]{4,}|2720[0-9]{3,}$</code> Before 2016, MasterCard numbers start with the numbers 51 through 55, <strong>but this will only detect MasterCard credit cards</strong>; there are other cards issued using the MasterCard system that do not fall into this IIN range. In 2016, they will add numbers in the range (222100-272099).</p>
<p><strong>American Express:</strong> <code>^3[47][0-9]{5,}$</code> American Express card numbers start with 34 or 37.</p>
<p><strong>Diners Club:</strong> <code>^3(?:0[0-5]|[68][0-9])[0-9]{4,}$</code> Diners Club card numbers begin with 300 through 305, 36 or 38. There are Diners Club cards that begin with 5 and have 16 digits. These are a joint venture between Diners Club and MasterCard and should be processed like a MasterCard.</p>
<p><strong>Discover:</strong> <code>^6(?:011|5[0-9]{2})[0-9]{3,}$</code> Discover card numbers begin with 6011 or 65.</p>
<p><strong>JCB:</strong> <code>^(?:2131|1800|35[0-9]{3})[0-9]{3,}$</code> JCB cards begin with 2131, 1800 or 35.</p>
<p>Unfortunately, there are a number of card types processed with the MasterCard system that do not live in MasterCard’s IIN range (numbers starting 51…55); the most important case is that of Maestro cards, many of which have been issued from other banks’ IIN ranges and so are located all over the number space. As a result, <strong>it may be best to assume that any card that is not of some other type you accept must be a MasterCard</strong>.</p>
<p><strong>Important</strong>: card numbers do vary in length; for instance, Visa has in the past issued cards with 13 digit PANs and cards with 16 digit PANs. Visa’s documentation currently indicates that it may issue or may have issued numbers with between 12 and 19 digits. <strong>Therefore, you should not check the length of the card number, other than to verify that it has at least 7 digits</strong> (for a complete IIN plus one check digit, which should match the value predicted by <a href="http://en.wikipedia.org/wiki/Luhn_algorithm" rel="noreferrer">the Luhn algorithm</a>).</p>
<p>One further hint: <strong>before processing a cardholder PAN, strip any whitespace and punctuation characters from the input</strong>. Why? Because it’s typically <em>much</em> easier to enter the digits in groups, similar to how they’re displayed on the front of an actual credit card, i.e. </p>
<div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true"></a><span class="dv">4444</span> <span class="dv">4444</span> <span class="dv">4444</span> <span class="dv">4444</span></span></code></pre></div>
<p>is much easier to enter correctly than</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true"></a><span class="dv">4444444444444444</span></span></code></pre></div>
<p>There’s really no benefit in chastising the user because they’ve entered characters you don’t expect here.</p>
<p><strong>This also implies making sure that your entry fields have room for <em>at least</em> 24 characters, otherwise users who enter spaces will run out of room.</strong> I’d recommend that you make the field wide enough to display 32 characters and allow up to 64; that gives plenty of headroom for expansion.</p>
<p>Here’s an image that gives a little more insight:</p>
<p><strong>UPDATE (2014):</strong> The checksum method <strong>no longer appears to be a valid way of verifying a card’s authenticity</strong> as noted in the comments on this answer.</p>
<p><strong>UPDATE (2016):</strong> Mastercard is to implement new BIN ranges starting <a href="http://achpayment.net/" rel="noreferrer">Ach Payment</a>.</p>
<p><img src="https://i.stack.imgur.com/Cu7PG.jpg" alt="Credit Card Verification"></p>
</section>
<section id="answer-2-score-71" class="level4">
<h4>Answer 2 (score 71)</h4>
<p>In javascript:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true"></a>function detectCardType(number) {</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true"></a>    var re = {</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true"></a>        electron: /^(<span class="dv">4026</span>|<span class="dv">417500</span>|<span class="dv">4405</span>|<span class="dv">4508</span>|<span class="dv">4844</span>|<span class="dv">4913</span>|<span class="dv">4917</span>)\d+$/,</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true"></a>        maestro: /^(<span class="dv">5018</span>|<span class="dv">5020</span>|<span class="dv">5038</span>|<span class="dv">5612</span>|<span class="dv">5893</span>|<span class="dv">6304</span>|<span class="dv">6759</span>|<span class="dv">6761</span>|<span class="dv">6762</span>|<span class="dv">6763</span>|<span class="bn">0604</span>|<span class="dv">6390</span>)\d+$/,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true"></a>        dankort: /^(<span class="dv">5019</span>)\d+$/,</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true"></a>        interpayment: /^(<span class="dv">636</span>)\d+$/,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true"></a>        unionpay: /^(<span class="dv">62</span>|<span class="dv">88</span>)\d+$/,</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true"></a>        visa: /^<span class="dv">4</span>[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">12</span>}(?:[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">3</span>})?$/,</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true"></a>        mastercard: /^<span class="dv">5</span>[<span class="dv">1</span>-<span class="dv">5</span>][<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">14</span>}$/,</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true"></a>        amex: /^<span class="dv">3</span>[<span class="dv">47</span>][<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">13</span>}$/,</span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true"></a>        diners: /^<span class="dv">3</span>(?:<span class="dv">0</span>[<span class="dv">0</span>-<span class="dv">5</span>]|[<span class="dv">68</span>][<span class="dv">0</span>-<span class="dv">9</span>])[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">11</span>}$/,</span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true"></a>        discover: /^<span class="dv">6</span>(?:<span class="bn">011</span>|<span class="dv">5</span>[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">2</span>})[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">12</span>}$/,</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true"></a>        jcb: /^(?:<span class="dv">2131</span>|<span class="dv">1800</span>|<span class="dv">35</span>\d{<span class="dv">3</span>})\d{<span class="dv">11</span>}$/</span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true"></a>    }</span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true"></a></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true"></a>    <span class="cf">for</span>(var key in re) {</span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true"></a>        <span class="cf">if</span>(re[key].test(number)) {</span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true"></a>            <span class="cf">return</span> key</span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true"></a>        }</span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true"></a>    }</span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true"></a>}</span></code></pre></div>
<p>Unit test:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true"></a>describe(&#39;CreditCard&#39;, function() {</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true"></a>    describe(&#39;</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true"></a><span class="er">#detectCardType&#39;, function() {</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true"></a></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true"></a>        var cards = {</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true"></a>            &#39;<span class="dv">8800000000000000</span><span class="er">&#39;</span>: &#39;UNIONPAY&#39;,</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true"></a></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true"></a>            &#39;<span class="dv">4026000000000000</span><span class="er">&#39;</span>: &#39;ELECTRON&#39;,</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true"></a>            &#39;<span class="dv">4175000000000000</span><span class="er">&#39;</span>: &#39;ELECTRON&#39;,</span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true"></a>            &#39;<span class="dv">4405000000000000</span><span class="er">&#39;</span>: &#39;ELECTRON&#39;,</span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true"></a>            &#39;<span class="dv">4508000000000000</span><span class="er">&#39;</span>: &#39;ELECTRON&#39;,</span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true"></a>            &#39;<span class="dv">4844000000000000</span><span class="er">&#39;</span>: &#39;ELECTRON&#39;,</span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true"></a>            &#39;<span class="dv">4913000000000000</span><span class="er">&#39;</span>: &#39;ELECTRON&#39;,</span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true"></a>            &#39;<span class="dv">4917000000000000</span><span class="er">&#39;</span>: &#39;ELECTRON&#39;,</span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true"></a></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true"></a>            &#39;<span class="dv">5019000000000000</span><span class="er">&#39;</span>: &#39;DANKORT&#39;,</span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true"></a></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true"></a>            &#39;<span class="dv">5018000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true"></a>            &#39;<span class="dv">5020000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-20"><a href="#cb82-20" aria-hidden="true"></a>            &#39;<span class="dv">5038000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-21"><a href="#cb82-21" aria-hidden="true"></a>            &#39;<span class="dv">5612000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-22"><a href="#cb82-22" aria-hidden="true"></a>            &#39;<span class="dv">5893000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-23"><a href="#cb82-23" aria-hidden="true"></a>            &#39;<span class="dv">6304000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-24"><a href="#cb82-24" aria-hidden="true"></a>            &#39;<span class="dv">6759000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-25"><a href="#cb82-25" aria-hidden="true"></a>            &#39;<span class="dv">6761000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-26"><a href="#cb82-26" aria-hidden="true"></a>            &#39;<span class="dv">6762000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-27"><a href="#cb82-27" aria-hidden="true"></a>            &#39;<span class="dv">6763000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-28"><a href="#cb82-28" aria-hidden="true"></a>            &#39;<span class="bn">0604000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-29"><a href="#cb82-29" aria-hidden="true"></a>            &#39;<span class="dv">6390000000000000</span><span class="er">&#39;</span>: &#39;MAESTRO&#39;,</span>
<span id="cb82-30"><a href="#cb82-30" aria-hidden="true"></a></span>
<span id="cb82-31"><a href="#cb82-31" aria-hidden="true"></a>            &#39;<span class="dv">3528000000000000</span><span class="er">&#39;</span>: &#39;JCB&#39;,</span>
<span id="cb82-32"><a href="#cb82-32" aria-hidden="true"></a>            &#39;<span class="dv">3589000000000000</span><span class="er">&#39;</span>: &#39;JCB&#39;,</span>
<span id="cb82-33"><a href="#cb82-33" aria-hidden="true"></a>            &#39;<span class="dv">3529000000000000</span><span class="er">&#39;</span>: &#39;JCB&#39;,</span>
<span id="cb82-34"><a href="#cb82-34" aria-hidden="true"></a></span>
<span id="cb82-35"><a href="#cb82-35" aria-hidden="true"></a>            &#39;<span class="dv">6360000000000000</span><span class="er">&#39;</span>: &#39;INTERPAYMENT&#39;,</span>
<span id="cb82-36"><a href="#cb82-36" aria-hidden="true"></a></span>
<span id="cb82-37"><a href="#cb82-37" aria-hidden="true"></a>            &#39;<span class="dv">4916338506082832</span><span class="er">&#39;</span>: &#39;VISA&#39;,</span>
<span id="cb82-38"><a href="#cb82-38" aria-hidden="true"></a>            &#39;<span class="dv">4556015886206505</span><span class="er">&#39;</span>: &#39;VISA&#39;,</span>
<span id="cb82-39"><a href="#cb82-39" aria-hidden="true"></a>            &#39;<span class="dv">4539048040151731</span><span class="er">&#39;</span>: &#39;VISA&#39;,</span>
<span id="cb82-40"><a href="#cb82-40" aria-hidden="true"></a>            &#39;<span class="dv">4024007198964305</span><span class="er">&#39;</span>: &#39;VISA&#39;,</span>
<span id="cb82-41"><a href="#cb82-41" aria-hidden="true"></a>            &#39;<span class="dv">4716175187624512</span><span class="er">&#39;</span>: &#39;VISA&#39;,</span>
<span id="cb82-42"><a href="#cb82-42" aria-hidden="true"></a></span>
<span id="cb82-43"><a href="#cb82-43" aria-hidden="true"></a>            &#39;<span class="dv">5280934283171080</span><span class="er">&#39;</span>: &#39;MASTERCARD&#39;,</span>
<span id="cb82-44"><a href="#cb82-44" aria-hidden="true"></a>            &#39;<span class="dv">5456060454627409</span><span class="er">&#39;</span>: &#39;MASTERCARD&#39;,</span>
<span id="cb82-45"><a href="#cb82-45" aria-hidden="true"></a>            &#39;<span class="dv">5331113404316994</span><span class="er">&#39;</span>: &#39;MASTERCARD&#39;,</span>
<span id="cb82-46"><a href="#cb82-46" aria-hidden="true"></a>            &#39;<span class="dv">5259474113320034</span><span class="er">&#39;</span>: &#39;MASTERCARD&#39;,</span>
<span id="cb82-47"><a href="#cb82-47" aria-hidden="true"></a>            &#39;<span class="dv">5442179619690834</span><span class="er">&#39;</span>: &#39;MASTERCARD&#39;,</span>
<span id="cb82-48"><a href="#cb82-48" aria-hidden="true"></a></span>
<span id="cb82-49"><a href="#cb82-49" aria-hidden="true"></a>            &#39;<span class="dv">6011894492395579</span><span class="er">&#39;</span>: &#39;DISCOVER&#39;,</span>
<span id="cb82-50"><a href="#cb82-50" aria-hidden="true"></a>            &#39;<span class="dv">6011388644154687</span><span class="er">&#39;</span>: &#39;DISCOVER&#39;,</span>
<span id="cb82-51"><a href="#cb82-51" aria-hidden="true"></a>            &#39;<span class="dv">6011880085013612</span><span class="er">&#39;</span>: &#39;DISCOVER&#39;,</span>
<span id="cb82-52"><a href="#cb82-52" aria-hidden="true"></a>            &#39;<span class="dv">6011652795433988</span><span class="er">&#39;</span>: &#39;DISCOVER&#39;,</span>
<span id="cb82-53"><a href="#cb82-53" aria-hidden="true"></a>            &#39;<span class="dv">6011375973328347</span><span class="er">&#39;</span>: &#39;DISCOVER&#39;,</span>
<span id="cb82-54"><a href="#cb82-54" aria-hidden="true"></a></span>
<span id="cb82-55"><a href="#cb82-55" aria-hidden="true"></a>            &#39;<span class="dv">345936346788903</span><span class="er">&#39;</span>: &#39;AMEX&#39;,</span>
<span id="cb82-56"><a href="#cb82-56" aria-hidden="true"></a>            &#39;<span class="dv">377669501013152</span><span class="er">&#39;</span>: &#39;AMEX&#39;,</span>
<span id="cb82-57"><a href="#cb82-57" aria-hidden="true"></a>            &#39;<span class="dv">373083634595479</span><span class="er">&#39;</span>: &#39;AMEX&#39;,</span>
<span id="cb82-58"><a href="#cb82-58" aria-hidden="true"></a>            &#39;<span class="dv">370710819865268</span><span class="er">&#39;</span>: &#39;AMEX&#39;,</span>
<span id="cb82-59"><a href="#cb82-59" aria-hidden="true"></a>            &#39;<span class="dv">371095063560404</span><span class="er">&#39;</span>: &#39;AMEX&#39;</span>
<span id="cb82-60"><a href="#cb82-60" aria-hidden="true"></a>        };</span>
<span id="cb82-61"><a href="#cb82-61" aria-hidden="true"></a></span>
<span id="cb82-62"><a href="#cb82-62" aria-hidden="true"></a>        Object.keys(cards).forEach(function(number) {</span>
<span id="cb82-63"><a href="#cb82-63" aria-hidden="true"></a>            it(&#39;should detect card &#39; + number + &#39; as &#39; + cards[number], function() {</span>
<span id="cb82-64"><a href="#cb82-64" aria-hidden="true"></a>                Basket.detectCardType(number).should.equal(cards[number]);</span>
<span id="cb82-65"><a href="#cb82-65" aria-hidden="true"></a>            });</span>
<span id="cb82-66"><a href="#cb82-66" aria-hidden="true"></a>        });</span>
<span id="cb82-67"><a href="#cb82-67" aria-hidden="true"></a>    });</span>
<span id="cb82-68"><a href="#cb82-68" aria-hidden="true"></a>});</span></code></pre></div>
</section>
<section id="answer-3-score-33" class="level4">
<h4>Answer 3 (score 33)</h4>
<p><strong>Updated: 15th June 2016</strong> (as an ultimate solution currently)</p>
<p>Please note that I even give vote up for the one is top voted, but to make it clear these are the regexps actually works i tested it with thousands of real BIN codes. <strong>The most important is to use start strings (^) otherwise it will give false results in real world!</strong></p>
<p><strong>JCB</strong> <code>^(?:2131|1800|35)[0-9]{0,}$</code> Start with: <strong>2131, 1800, 35 (3528-3589)</strong></p>
<p><strong>American Express</strong> <code>^3[47][0-9]{0,}$</code> Start with: <strong>34, 37</strong></p>
<p><strong>Diners Club</strong> <code>^3(?:0[0-59]{1}|[689])[0-9]{0,}$</code> Start with: <strong>300-305, 309, 36, 38-39</strong></p>
<p><strong>Visa</strong> <code>^4[0-9]{0,}$</code> Start with: <strong>4</strong></p>
<p><strong>MasterCard</strong> <code>^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720)[0-9]{0,}$</code> Start with: <strong>2221-2720, 51-55</strong></p>
<p><strong>Maestro</strong> <code>^(5[06789]|6)[0-9]{0,}$</code> Maestro always growing in the range: <strong>60-69</strong>, started with / not something else, but starting 5 must be encoded as mastercard anyway. Maestro cards must be detected in the end of the code because some others has in the range of 60-69. Please look at the code.</p>
<p><strong>Discover</strong> <code>^(6011|65|64[4-9]|62212[6-9]|6221[3-9]|622[2-8]|6229[01]|62292[0-5])[0-9]{0,}$</code> Discover quite difficult to code, start with: <strong>6011, 622126-622925, 644-649, 65</strong></p>
<p>In <strong>javascript</strong> I use this function. This is good when u assign it to an onkeyup event and it give result as soon as possible.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true"></a>function cc_brand_id(cur_val) {</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true"></a>  <span class="co">// the regular expressions check for possible matches as you type, hence the OR operators based on the number of chars</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true"></a>  <span class="co">// regexp string length {0} provided for soonest detection of beginning of the card numbers this way it could be used for BIN CODE detection also</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true"></a></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true"></a>  <span class="co">//JCB</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true"></a>  jcb_regex = new RegExp(&#39;^(?:<span class="dv">2131</span>|<span class="dv">1800</span>|<span class="dv">35</span>)[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">0</span>,}$&#39;); <span class="co">//2131, 1800, 35 (3528-3589)</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true"></a>  <span class="co">// American Express</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true"></a>  amex_regex = new RegExp(&#39;^<span class="dv">3</span>[<span class="dv">47</span>][<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">0</span>,}$&#39;); <span class="co">//34, 37</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true"></a>  <span class="co">// Diners Club</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true"></a>  diners_regex = new RegExp(&#39;^<span class="dv">3</span>(?:<span class="dv">0</span>[<span class="dv">0</span>-<span class="dv">59</span>]{<span class="dv">1</span>}|[<span class="dv">689</span>])[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">0</span>,}$&#39;); <span class="co">//300-305, 309, 36, 38-39</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true"></a>  <span class="co">// Visa</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true"></a>  visa_regex = new RegExp(&#39;^<span class="dv">4</span>[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">0</span>,}$&#39;); <span class="co">//4</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true"></a>  <span class="co">// MasterCard</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true"></a>  mastercard_regex = new RegExp(&#39;^(<span class="dv">5</span>[<span class="dv">1</span>-<span class="dv">5</span>]|<span class="dv">222</span>[<span class="dv">1</span>-<span class="dv">9</span>]|<span class="dv">22</span>[<span class="dv">3</span>-<span class="dv">9</span>]|<span class="dv">2</span>[<span class="dv">3</span>-<span class="dv">6</span>]|<span class="dv">27</span>[<span class="bn">01</span>]|<span class="dv">2720</span>)[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">0</span>,}$&#39;); <span class="co">//2221-2720, 51-55</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true"></a>  maestro_regex = new RegExp(&#39;^(<span class="dv">5</span>[<span class="bn">067</span><span class="er">89</span>]|<span class="dv">6</span>)[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">0</span>,}$&#39;); <span class="co">//always growing in the range: 60-69, started with / not something else, but starting 5 must be encoded as mastercard anyway</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true"></a>  <span class="co">//Discover</span></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true"></a>  discover_regex = new RegExp(&#39;^(<span class="dv">6011</span>|<span class="dv">65</span>|<span class="dv">64</span>[<span class="dv">4</span>-<span class="dv">9</span>]|<span class="dv">62212</span>[<span class="dv">6</span>-<span class="dv">9</span>]|<span class="dv">6221</span>[<span class="dv">3</span>-<span class="dv">9</span>]|<span class="dv">622</span>[<span class="dv">2</span>-<span class="dv">8</span>]|<span class="dv">6229</span>[<span class="bn">01</span>]|<span class="dv">62292</span>[<span class="dv">0</span>-<span class="dv">5</span>])[<span class="dv">0</span>-<span class="dv">9</span>]{<span class="dv">0</span>,}$&#39;);</span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true"></a>  <span class="co">////6011, 622126-622925, 644-649, 65</span></span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true"></a></span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true"></a></span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true"></a>  <span class="co">// get rid of anything but numbers</span></span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true"></a>  cur_val = cur_val.replace(/\D/g, &#39;&#39;);</span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true"></a></span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true"></a>  <span class="co">// checks per each, as their could be multiple hits</span></span>
<span id="cb83-25"><a href="#cb83-25" aria-hidden="true"></a>  <span class="co">//fix: ordering matter in detection, otherwise can give false results in rare cases</span></span>
<span id="cb83-26"><a href="#cb83-26" aria-hidden="true"></a>  var sel_brand = <span class="st">&quot;unknown&quot;</span>;</span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true"></a>  <span class="cf">if</span> (cur_val.match(jcb_regex)) {</span>
<span id="cb83-28"><a href="#cb83-28" aria-hidden="true"></a>    sel_brand = <span class="st">&quot;jcb&quot;</span>;</span>
<span id="cb83-29"><a href="#cb83-29" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (cur_val.match(amex_regex)) {</span>
<span id="cb83-30"><a href="#cb83-30" aria-hidden="true"></a>    sel_brand = <span class="st">&quot;amex&quot;</span>;</span>
<span id="cb83-31"><a href="#cb83-31" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (cur_val.match(diners_regex)) {</span>
<span id="cb83-32"><a href="#cb83-32" aria-hidden="true"></a>    sel_brand = <span class="st">&quot;diners_club&quot;</span>;</span>
<span id="cb83-33"><a href="#cb83-33" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (cur_val.match(visa_regex)) {</span>
<span id="cb83-34"><a href="#cb83-34" aria-hidden="true"></a>    sel_brand = <span class="st">&quot;visa&quot;</span>;</span>
<span id="cb83-35"><a href="#cb83-35" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (cur_val.match(mastercard_regex)) {</span>
<span id="cb83-36"><a href="#cb83-36" aria-hidden="true"></a>    sel_brand = <span class="st">&quot;mastercard&quot;</span>;</span>
<span id="cb83-37"><a href="#cb83-37" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (cur_val.match(discover_regex)) {</span>
<span id="cb83-38"><a href="#cb83-38" aria-hidden="true"></a>    sel_brand = <span class="st">&quot;discover&quot;</span>;</span>
<span id="cb83-39"><a href="#cb83-39" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (cur_val.match(maestro_regex)) {</span>
<span id="cb83-40"><a href="#cb83-40" aria-hidden="true"></a>    <span class="cf">if</span> (cur_val[<span class="dv">0</span>] == <span class="ch">&#39;5&#39;</span>) { <span class="co">//started 5 must be mastercard</span></span>
<span id="cb83-41"><a href="#cb83-41" aria-hidden="true"></a>      sel_brand = <span class="st">&quot;mastercard&quot;</span>;</span>
<span id="cb83-42"><a href="#cb83-42" aria-hidden="true"></a>    } <span class="cf">else</span> {</span>
<span id="cb83-43"><a href="#cb83-43" aria-hidden="true"></a>      sel_brand = <span class="st">&quot;maestro&quot;</span>; <span class="co">//maestro is all 60-69 which is not something else, thats why this condition in the end</span></span>
<span id="cb83-44"><a href="#cb83-44" aria-hidden="true"></a>    }</span>
<span id="cb83-45"><a href="#cb83-45" aria-hidden="true"></a>  }</span>
<span id="cb83-46"><a href="#cb83-46" aria-hidden="true"></a></span>
<span id="cb83-47"><a href="#cb83-47" aria-hidden="true"></a>  <span class="cf">return</span> sel_brand;</span>
<span id="cb83-48"><a href="#cb83-48" aria-hidden="true"></a>}</span></code></pre></div>
<p>Here you can play with it:</p>
<p><a href="http://jsfiddle.net/upN3L/69/" rel="noreferrer">http://jsfiddle.net/upN3L/69/</a></p>
<p><strong>For PHP use this function, this detects some sub VISA/MC cards too:</strong></p>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true"></a><span class="co"> * Obtain a brand constant from a PAN </span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true"></a><span class="co"> *</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">type</span><span class="co"> $pan               Credit card number</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true"></a><span class="co"> * </span><span class="an">@param</span><span class="co"> </span><span class="cv">type</span><span class="co"> $include_sub_types Include detection of sub visa brands</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true"></a><span class="co"> * </span><span class="an">@return</span><span class="co"> string</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true"></a><span class="co"> */</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true"></a>public <span class="dt">static</span> function getCardBrand($pan, $include_sub_types = false)</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true"></a>{</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true"></a>    <span class="co">//maximum length is not fixed now, there are growing number of CCs has more numbers in length, limiting can give false negatives atm</span></span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true"></a></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true"></a>    <span class="co">//these regexps accept not whole cc numbers too</span></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true"></a>    <span class="co">//visa        </span></span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true"></a>    $visa_regex = <span class="st">&quot;/^4[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-15"><a href="#cb84-15" aria-hidden="true"></a>    $vpreca_regex = <span class="st">&quot;/^428485[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-16"><a href="#cb84-16" aria-hidden="true"></a>    $postepay_regex = <span class="st">&quot;/^(402360|402361|403035|417631|529948){0,}$/&quot;</span>;</span>
<span id="cb84-17"><a href="#cb84-17" aria-hidden="true"></a>    $cartasi_regex = <span class="st">&quot;/^(432917|432930|453998)[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-18"><a href="#cb84-18" aria-hidden="true"></a>    $entropay_regex = <span class="st">&quot;/^(406742|410162|431380|459061|533844|522093)[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-19"><a href="#cb84-19" aria-hidden="true"></a>    $o2money_regex = <span class="st">&quot;/^(422793|475743)[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-20"><a href="#cb84-20" aria-hidden="true"></a></span>
<span id="cb84-21"><a href="#cb84-21" aria-hidden="true"></a>    <span class="co">// MasterCard</span></span>
<span id="cb84-22"><a href="#cb84-22" aria-hidden="true"></a>    $mastercard_regex = <span class="st">&quot;/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[01]|2720)[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-23"><a href="#cb84-23" aria-hidden="true"></a>    $maestro_regex = <span class="st">&quot;/^(5[06789]|6)[0-9]{0,}$/&quot;</span>; </span>
<span id="cb84-24"><a href="#cb84-24" aria-hidden="true"></a>    $kukuruza_regex = <span class="st">&quot;/^525477[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-25"><a href="#cb84-25" aria-hidden="true"></a>    $yunacard_regex = <span class="st">&quot;/^541275[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-26"><a href="#cb84-26" aria-hidden="true"></a></span>
<span id="cb84-27"><a href="#cb84-27" aria-hidden="true"></a>    <span class="co">// American Express</span></span>
<span id="cb84-28"><a href="#cb84-28" aria-hidden="true"></a>    $amex_regex = <span class="st">&quot;/^3[47][0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-29"><a href="#cb84-29" aria-hidden="true"></a></span>
<span id="cb84-30"><a href="#cb84-30" aria-hidden="true"></a>    <span class="co">// Diners Club</span></span>
<span id="cb84-31"><a href="#cb84-31" aria-hidden="true"></a>    $diners_regex = <span class="st">&quot;/^3(?:0[0-59]{1}|[689])[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-32"><a href="#cb84-32" aria-hidden="true"></a></span>
<span id="cb84-33"><a href="#cb84-33" aria-hidden="true"></a>    <span class="co">//Discover</span></span>
<span id="cb84-34"><a href="#cb84-34" aria-hidden="true"></a>    $discover_regex = <span class="st">&quot;/^(6011|65|64[4-9]|62212[6-9]|6221[3-9]|622[2-8]|6229[01]|62292[0-5])[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-35"><a href="#cb84-35" aria-hidden="true"></a></span>
<span id="cb84-36"><a href="#cb84-36" aria-hidden="true"></a>    <span class="co">//JCB</span></span>
<span id="cb84-37"><a href="#cb84-37" aria-hidden="true"></a>    $jcb_regex = <span class="st">&quot;/^(?:2131|1800|35)[0-9]{0,}$/&quot;</span>;</span>
<span id="cb84-38"><a href="#cb84-38" aria-hidden="true"></a></span>
<span id="cb84-39"><a href="#cb84-39" aria-hidden="true"></a>    <span class="co">//ordering matter in detection, otherwise can give false results in rare cases</span></span>
<span id="cb84-40"><a href="#cb84-40" aria-hidden="true"></a>    <span class="cf">if</span> (preg_match($jcb_regex, $pan)) {</span>
<span id="cb84-41"><a href="#cb84-41" aria-hidden="true"></a>        <span class="cf">return</span> <span class="st">&quot;jcb&quot;</span>;</span>
<span id="cb84-42"><a href="#cb84-42" aria-hidden="true"></a>    }</span>
<span id="cb84-43"><a href="#cb84-43" aria-hidden="true"></a></span>
<span id="cb84-44"><a href="#cb84-44" aria-hidden="true"></a>    <span class="cf">if</span> (preg_match($amex_regex, $pan)) {</span>
<span id="cb84-45"><a href="#cb84-45" aria-hidden="true"></a>        <span class="cf">return</span> <span class="st">&quot;amex&quot;</span>;</span>
<span id="cb84-46"><a href="#cb84-46" aria-hidden="true"></a>    }</span>
<span id="cb84-47"><a href="#cb84-47" aria-hidden="true"></a></span>
<span id="cb84-48"><a href="#cb84-48" aria-hidden="true"></a>    <span class="cf">if</span> (preg_match($diners_regex, $pan)) {</span>
<span id="cb84-49"><a href="#cb84-49" aria-hidden="true"></a>        <span class="cf">return</span> <span class="st">&quot;diners_club&quot;</span>;</span>
<span id="cb84-50"><a href="#cb84-50" aria-hidden="true"></a>    }</span>
<span id="cb84-51"><a href="#cb84-51" aria-hidden="true"></a></span>
<span id="cb84-52"><a href="#cb84-52" aria-hidden="true"></a>    <span class="co">//sub visa/mastercard cards</span></span>
<span id="cb84-53"><a href="#cb84-53" aria-hidden="true"></a>    <span class="cf">if</span> ($include_sub_types) {</span>
<span id="cb84-54"><a href="#cb84-54" aria-hidden="true"></a>        <span class="cf">if</span> (preg_match($vpreca_regex, $pan)) {</span>
<span id="cb84-55"><a href="#cb84-55" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;v-preca&quot;</span>;</span>
<span id="cb84-56"><a href="#cb84-56" aria-hidden="true"></a>        }</span>
<span id="cb84-57"><a href="#cb84-57" aria-hidden="true"></a>        <span class="cf">if</span> (preg_match($postepay_regex, $pan)) {</span>
<span id="cb84-58"><a href="#cb84-58" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;postepay&quot;</span>;</span>
<span id="cb84-59"><a href="#cb84-59" aria-hidden="true"></a>        }</span>
<span id="cb84-60"><a href="#cb84-60" aria-hidden="true"></a>        <span class="cf">if</span> (preg_match($cartasi_regex, $pan)) {</span>
<span id="cb84-61"><a href="#cb84-61" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;cartasi&quot;</span>;</span>
<span id="cb84-62"><a href="#cb84-62" aria-hidden="true"></a>        }</span>
<span id="cb84-63"><a href="#cb84-63" aria-hidden="true"></a>        <span class="cf">if</span> (preg_match($entropay_regex, $pan)) {</span>
<span id="cb84-64"><a href="#cb84-64" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;entropay&quot;</span>;</span>
<span id="cb84-65"><a href="#cb84-65" aria-hidden="true"></a>        }</span>
<span id="cb84-66"><a href="#cb84-66" aria-hidden="true"></a>        <span class="cf">if</span> (preg_match($o2money_regex, $pan)) {</span>
<span id="cb84-67"><a href="#cb84-67" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;o2money&quot;</span>;</span>
<span id="cb84-68"><a href="#cb84-68" aria-hidden="true"></a>        }</span>
<span id="cb84-69"><a href="#cb84-69" aria-hidden="true"></a>        <span class="cf">if</span> (preg_match($kukuruza_regex, $pan)) {</span>
<span id="cb84-70"><a href="#cb84-70" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;kukuruza&quot;</span>;</span>
<span id="cb84-71"><a href="#cb84-71" aria-hidden="true"></a>        }</span>
<span id="cb84-72"><a href="#cb84-72" aria-hidden="true"></a>        <span class="cf">if</span> (preg_match($yunacard_regex, $pan)) {</span>
<span id="cb84-73"><a href="#cb84-73" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;yunacard&quot;</span>;</span>
<span id="cb84-74"><a href="#cb84-74" aria-hidden="true"></a>        }</span>
<span id="cb84-75"><a href="#cb84-75" aria-hidden="true"></a>    }</span>
<span id="cb84-76"><a href="#cb84-76" aria-hidden="true"></a></span>
<span id="cb84-77"><a href="#cb84-77" aria-hidden="true"></a>    <span class="cf">if</span> (preg_match($visa_regex, $pan)) {</span>
<span id="cb84-78"><a href="#cb84-78" aria-hidden="true"></a>        <span class="cf">return</span> <span class="st">&quot;visa&quot;</span>;</span>
<span id="cb84-79"><a href="#cb84-79" aria-hidden="true"></a>    }</span>
<span id="cb84-80"><a href="#cb84-80" aria-hidden="true"></a></span>
<span id="cb84-81"><a href="#cb84-81" aria-hidden="true"></a>    <span class="cf">if</span> (preg_match($mastercard_regex, $pan)) {</span>
<span id="cb84-82"><a href="#cb84-82" aria-hidden="true"></a>        <span class="cf">return</span> <span class="st">&quot;mastercard&quot;</span>;</span>
<span id="cb84-83"><a href="#cb84-83" aria-hidden="true"></a>    }</span>
<span id="cb84-84"><a href="#cb84-84" aria-hidden="true"></a></span>
<span id="cb84-85"><a href="#cb84-85" aria-hidden="true"></a>    <span class="cf">if</span> (preg_match($discover_regex, $pan)) {</span>
<span id="cb84-86"><a href="#cb84-86" aria-hidden="true"></a>        <span class="cf">return</span> <span class="st">&quot;discover&quot;</span>;</span>
<span id="cb84-87"><a href="#cb84-87" aria-hidden="true"></a>    }</span>
<span id="cb84-88"><a href="#cb84-88" aria-hidden="true"></a></span>
<span id="cb84-89"><a href="#cb84-89" aria-hidden="true"></a>    <span class="cf">if</span> (preg_match($maestro_regex, $pan)) {</span>
<span id="cb84-90"><a href="#cb84-90" aria-hidden="true"></a>        <span class="cf">if</span> ($pan[<span class="dv">0</span>] == <span class="ch">&#39;5&#39;</span>) {<span class="co">//started 5 must be mastercard</span></span>
<span id="cb84-91"><a href="#cb84-91" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;mastercard&quot;</span>;</span>
<span id="cb84-92"><a href="#cb84-92" aria-hidden="true"></a>        }</span>
<span id="cb84-93"><a href="#cb84-93" aria-hidden="true"></a>            <span class="cf">return</span> <span class="st">&quot;maestro&quot;</span>; <span class="co">//maestro is all 60-69 which is not something else, thats why this condition in the end</span></span>
<span id="cb84-94"><a href="#cb84-94" aria-hidden="true"></a></span>
<span id="cb84-95"><a href="#cb84-95" aria-hidden="true"></a>    }</span>
<span id="cb84-96"><a href="#cb84-96" aria-hidden="true"></a></span>
<span id="cb84-97"><a href="#cb84-97" aria-hidden="true"></a>    <span class="cf">return</span> <span class="st">&quot;unknown&quot;</span>; <span class="co">//unknown for this system</span></span>
<span id="cb84-98"><a href="#cb84-98" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="algorithm-to-return-all-combinations-of-k-elements-from-n-score-429861-in-2011" class="level3">
<h3>14: Algorithm to return all combinations of k elements from n (score <a href="https://stackoverflow.com/q/127704.html">429861</a> in 2011)</h3>
<section id="question-13" class="level4">
<h4>Question</h4>
<p>I want to write a function that takes an array of letters as an argument and a number of those letters to select.</p>
<p>Say you provide an array of 8 letters and want to select 3 letters from that. Then you should get:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true"></a><span class="dv">8</span>! / ((<span class="dv">8</span> - <span class="dv">3</span>)! * <span class="dv">3</span>!) = <span class="dv">56</span></span></code></pre></div>
<p>Arrays (or words) in return consisting of 3 letters each.</p>
</section>
<section id="answer-accepted-score-399" class="level4">
<h4>Answer accepted (score 399)</h4>
<p><a href="http://portal.acm.org/citation.cfm?id=1036677&amp;dl=&amp;coll=" rel="noreferrer">Art of Computer Programming Volume 4: Fascicle 3</a> has a ton of these that might fit your particular situation better than how I describe.</p>
<h5>
Gray Codes
</h2>
<p>An issue that you will come across is of course memory and pretty quickly, you’ll have problems by 20 elements in your set – <sup>20</sup>C<sub>3</sub> = 1140. And if you want to iterate over the set it’s best to use a modified gray code algorithm so you aren’t holding all of them in memory. These generate the next combination from the previous and avoid repetitions. There are many of these for different uses. Do we want to maximize the differences between successive combinations? minimize? et cetera.</p>
<p>Some of the original papers describing gray codes:</p>
<ol>
<li>
<a href="http://portal.acm.org/citation.cfm?id=2422.322413" rel="noreferrer">Some Hamilton Paths and a Minimal Change Algorithm</a>
</li>
<li>
<a href="http://portal.acm.org/citation.cfm?id=49203&amp;jmp=indexterms&amp;coll=GUIDE&amp;dl=GUIDE&amp;CFID=81503149&amp;CFTOKEN=96444237" rel="noreferrer">Adjacent Interchange Combination Generation Algorithm</a>
</li>
</ol>
<p>Here are some other papers covering the topic:</p>
<ol>
<li>
<a href="http://www.cs.uvic.ca/~ruskey/Publications/EHR/HoughRuskey.pdf" rel="noreferrer">An Efficient Implementation of the Eades, Hickey, Read Adjacent Interchange Combination Generation Algorithm</a> (PDF, with code in Pascal)
</li>
<li>
<a href="http://portal.acm.org/citation.cfm?doid=355826.355830" rel="noreferrer">Combination Generators</a>
</li>
<li>
<a href="http://www4.ncsu.edu/~savage/AVAILABLE_FOR_MAILING/survey.ps" rel="noreferrer">Survey of Combinatorial Gray Codes</a> (PostScript)
</li>
<li>
<a href="http://www.springerlink.com/content/7lvmm575n85xv5v0/" rel="noreferrer">An Algorithm for Gray Codes</a>
</li>
</ol>
<h5>
Chase’s Twiddle (algorithm)
</h2>
<p>Phillip J Chase, `<a href="http://portal.acm.org/citation.cfm?id=362502" rel="noreferrer">Algorithm 382: Combinations of M out of N Objects</a>’ (1970)</p>
<p><a href="http://www.netlib.no/netlib/toms/382" rel="noreferrer">The algorithm in C</a>…</p>
<h5>
Index of Combinations in Lexicographical Order (Buckles Algorithm 515)
</h2>
<p>You can also reference a combination by its index (in lexicographical order). Realizing that the index should be some amount of change from right to left based on the index we can construct something that should recover a combination.</p>
<p>So, we have a set {1,2,3,4,5,6}… and we want three elements. Let’s say {1,2,3} we can say that the difference between the elements is one and in order and minimal. {1,2,4} has one change and is lexicographically number 2. So the number of ‘changes’ in the last place accounts for one change in the lexicographical ordering. The second place, with one change {1,3,4} has one change but accounts for more change since it’s in the second place (proportional to the number of elements in the original set).</p>
<p>
The method I’ve described is a deconstruction, as it seems, from set to the index, we need to do the reverse – which is much trickier. This is how <a href="http://portal.acm.org/citation.cfm?id=355739" rel="noreferrer">Buckles</a> solves the problem. I wrote some <a href="https://stackoverflow.com/questions/561/using-combinations-of-sets-as-test-data
#794">C to compute them</a>, with minor changes – I used the index of the sets rather than a number range to represent the set, so we are always working from 0…n. Note:
</p>
<ol>
<li>
Since combinations are unordered, {1,3,2} = {1,2,3} –we order them to be lexicographical.
</li>
<li>
This method has an implicit 0 to start the set for the first difference.
</li>
</ol>
<h5>
Index of Combinations in Lexicographical Order (McCaffrey)
</h2>
<p>There is <a href="https://web.archive.org/web/20170325012457/https://msdn.microsoft.com/en-us/library/aa289166.aspx" rel="noreferrer">another way</a>:, its concept is easier to grasp and program but it’s without the optimizations of Buckles. Fortunately, it also does not produce duplicate combinations:</p>
<p>The set <a href="https://i.stack.imgur.com/Txetz.gif" rel="noreferrer"><img src="https://i.stack.imgur.com/Txetz.gif" alt="x_k...x_1 in N"></a> that maximizes <a href="https://i.stack.imgur.com/HOj5o.gif" rel="noreferrer"><img src="https://i.stack.imgur.com/HOj5o.gif" alt="i = C(x_1,k) + C(x_2,k-1) + ... + C(x_k,1)"></a>, where <a href="https://i.stack.imgur.com/vIeiI.gif" rel="noreferrer"><img src="https://i.stack.imgur.com/vIeiI.gif" alt="C(n,r) = {n choose r}"></a>.</p>
<p>For an example: <code>27 = C(6,4) + C(5,3) + C(2,2) + C(1,1)</code>. So, the 27th lexicographical combination of four things is: {1,2,5,6}, those are the indexes of whatever set you want to look at. Example below (OCaml), requires <code>choose</code> function, left to reader:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true"></a>(* this will find the [x] combination of a [set] list when taking [k] elements *)</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true"></a>let combination_maccaffery set k x =</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true"></a>    (* maximize function -- maximize a that is aCb              *)</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true"></a>    (* <span class="cf">return</span> largest c where c &lt; i and choose(c,i) &lt;= z        *)</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true"></a>    let rec maximize a b x =</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true"></a>        <span class="cf">if</span> (choose a b ) &lt;= x then a <span class="cf">else</span> maximize (a-<span class="dv">1</span>) b x</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true"></a>    in</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true"></a>    let rec iterate n x i = match i with</span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true"></a>        | <span class="dv">0</span> -&gt; []</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true"></a>        | i -&gt;</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true"></a>            let max = maximize n i x in</span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true"></a>            max :: iterate n (x - (choose max i)) (i-<span class="dv">1</span>)</span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true"></a>    in</span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true"></a>    <span class="cf">if</span> x &lt; <span class="dv">0</span> then failwith <span class="st">&quot;errors&quot;</span> <span class="cf">else</span></span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true"></a>    let idxs =  iterate (List.length set) x k in</span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true"></a>    List.map (List.nth set) (List.sort (-) idxs)</span></code></pre></div>
<h5>
A small and simple combinations iterator
</h2>
<p>
The following two algorithms are provided for didactic purposes. They implement an iterator and (a more general) folder overall combinations. They are as fast as possible, having the complexity O(<sup>n</sup>C<sub>k</sub>). The memory consumption is bound by <code>k</code>.
</p>
<p>We will start with the iterator, which will call a user provided function for each combination</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true"></a>let iter_combs n k f =</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true"></a>  let rec iter v s j =</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true"></a>    <span class="cf">if</span> j = k then f v</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true"></a>    <span class="cf">else</span> <span class="cf">for</span> i = s to n - <span class="dv">1</span> <span class="cf">do</span> iter (i::v) (i+<span class="dv">1</span>) (j+<span class="dv">1</span>) done in</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true"></a>  iter [] <span class="dv">0</span> <span class="dv">0</span></span></code></pre></div>
<p>A more general version will call the user provided function along with the state variable, starting from the initial state. Since we need to pass the state between different states we won’t use the for-loop, but instead, use recursion,</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true"></a>let fold_combs n k f x =</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true"></a>  let rec loop i s c x =</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true"></a>    <span class="cf">if</span> i &lt; n then</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true"></a>      loop (i+<span class="dv">1</span>) s c @@</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true"></a>      let c = i::c and s = s + <span class="dv">1</span> and i = i + <span class="dv">1</span> in</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true"></a>      <span class="cf">if</span> s &lt; k then loop i s c x <span class="cf">else</span> f c x</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true"></a>    <span class="cf">else</span> x in</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true"></a>  loop <span class="dv">0</span> <span class="dv">0</span> [] x</span></code></pre></div>
</section>
<section id="answer-2-score-189" class="level4">
<h4>Answer 2 (score 189)</h4>
In C #:
</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true"></a>public <span class="dt">static</span> IEnumerable&lt;IEnumerable&lt;T&gt;&gt; Combinations&lt;T&gt;(this IEnumerable&lt;T&gt; elements, <span class="dt">int</span> k)</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true"></a>{</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true"></a>  <span class="cf">return</span> k == <span class="dv">0</span> ? new[] { new T[<span class="dv">0</span>] } :</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true"></a>    elements.SelectMany((e, i) =&gt;</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true"></a>      elements.Skip(i + <span class="dv">1</span>).Combinations(k - <span class="dv">1</span>).Select(c =&gt; (new[] {e}).Concat(c)));</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true"></a>}</span></code></pre></div>
<p>Usage:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true"></a>var result = Combinations(new[] { <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span> }, <span class="dv">3</span>);</span></code></pre></div>
<p>Result:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true"></a><span class="dv">123</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true"></a><span class="dv">124</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true"></a><span class="dv">125</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true"></a><span class="dv">134</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true"></a><span class="dv">135</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true"></a><span class="dv">145</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true"></a><span class="dv">234</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true"></a><span class="dv">235</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true"></a><span class="dv">245</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true"></a><span class="dv">345</span></span></code></pre></div>
</section>
<section id="answer-3-score-76" class="level4">
<h4>Answer 3 (score 76)</h4>
Short java solution:
</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true"></a>import java.util.Arrays;</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true"></a></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true"></a>public class Combination {</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">void</span> main(String[] args){</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true"></a>        String[] arr = {<span class="st">&quot;A&quot;</span>,<span class="st">&quot;B&quot;</span>,<span class="st">&quot;C&quot;</span>,<span class="st">&quot;D&quot;</span>,<span class="st">&quot;E&quot;</span>,<span class="st">&quot;F&quot;</span>};</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true"></a>        combinations2(arr, <span class="dv">3</span>, <span class="dv">0</span>, new String[<span class="dv">3</span>]);</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true"></a>    }</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true"></a></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true"></a>    <span class="dt">static</span> <span class="dt">void</span> combinations2(String[] arr, <span class="dt">int</span> len, <span class="dt">int</span> startPosition, String[] result){</span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true"></a>        <span class="cf">if</span> (len == <span class="dv">0</span>){</span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true"></a>            System.out.println(Arrays.toString(result));</span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true"></a>            <span class="cf">return</span>;</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true"></a>        }       </span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> i = startPosition; i &lt;= arr.length-len; i++){</span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true"></a>            result[result.length - len] = arr[i];</span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true"></a>            combinations2(arr, len-<span class="dv">1</span>, i+<span class="dv">1</span>, result);</span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true"></a>        }</span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true"></a>    }       </span>
<span id="cb92-19"><a href="#cb92-19" aria-hidden="true"></a>}</span></code></pre></div>
<p>Result will be</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true"></a>[A, B, C]</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true"></a>[A, B, D]</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true"></a>[A, B, E]</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true"></a>[A, B, F]</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true"></a>[A, C, D]</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true"></a>[A, C, E]</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true"></a>[A, C, F]</span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true"></a>[A, D, E]</span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true"></a>[A, D, F]</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true"></a>[A, E, F]</span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true"></a>[B, C, D]</span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true"></a>[B, C, E]</span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true"></a>[B, C, F]</span>
<span id="cb93-14"><a href="#cb93-14" aria-hidden="true"></a>[B, D, E]</span>
<span id="cb93-15"><a href="#cb93-15" aria-hidden="true"></a>[B, D, F]</span>
<span id="cb93-16"><a href="#cb93-16" aria-hidden="true"></a>[B, E, F]</span>
<span id="cb93-17"><a href="#cb93-17" aria-hidden="true"></a>[C, D, E]</span>
<span id="cb93-18"><a href="#cb93-18" aria-hidden="true"></a>[C, D, F]</span>
<span id="cb93-19"><a href="#cb93-19" aria-hidden="true"></a>[C, E, F]</span>
<span id="cb93-20"><a href="#cb93-20" aria-hidden="true"></a>[D, E, F]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-tail-recursion-score-409205-in-2016" class="level3">
<h3>15: What is tail recursion? (score <a href="https://stackoverflow.com/q/33923.html">409205</a> in 2016)</h3>
<section id="question-14" class="level4">
<h4>Question</h4>
<p>Whilst starting to learn lisp, I’ve come across the term <em>tail-recursive</em>. What does it mean exactly?</p>
</section>
<section id="answer-accepted-score-1588" class="level4">
<h4>Answer accepted (score 1588)</h4>
<p>Consider a simple function that adds the first N integers. (e.g. <code>sum(5) = 1 + 2 + 3 + 4 + 5 = 15</code>).</p>
<p>Here is a simple JavaScript implementation that uses recursion:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true"></a>function recsum(x) {</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true"></a>    <span class="cf">if</span> (x===<span class="dv">1</span>) {</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true"></a>        <span class="cf">return</span> x;</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true"></a>    } <span class="cf">else</span> {</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true"></a>        <span class="cf">return</span> x + recsum(x-<span class="dv">1</span>);</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true"></a>    }</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true"></a>}</span></code></pre></div>
<p>If you called <code>recsum(5)</code>, this is what the JavaScript interpreter would evaluate:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true"></a>recsum(<span class="dv">5</span>)</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true"></a><span class="dv">5</span> + recsum(<span class="dv">4</span>)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true"></a><span class="dv">5</span> + (<span class="dv">4</span> + recsum(<span class="dv">3</span>))</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true"></a><span class="dv">5</span> + (<span class="dv">4</span> + (<span class="dv">3</span> + recsum(<span class="dv">2</span>)))</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true"></a><span class="dv">5</span> + (<span class="dv">4</span> + (<span class="dv">3</span> + (<span class="dv">2</span> + recsum(<span class="dv">1</span>))))</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true"></a><span class="dv">5</span> + (<span class="dv">4</span> + (<span class="dv">3</span> + (<span class="dv">2</span> + <span class="dv">1</span>)))</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true"></a><span class="dv">15</span></span></code></pre></div>
<p>Note how every recursive call has to complete before the JavaScript interpreter begins to actually do the work of calculating the sum.</p>
<p>Here’s a tail-recursive version of the same function:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true"></a>function tailrecsum(x, running_total=<span class="dv">0</span>) {</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true"></a>    <span class="cf">if</span> (x===<span class="dv">0</span>) {</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true"></a>        <span class="cf">return</span> running_total;</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true"></a>    } <span class="cf">else</span> {</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true"></a>        <span class="cf">return</span> tailrecsum(x-<span class="dv">1</span>, running_total+x);</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true"></a>    }</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true"></a>}</span></code></pre></div>
<p>Here’s the sequence of events that would occur if you called <code>tailrecsum(5)</code>, (which would effectively be <code>tailrecsum(5, 0)</code>, because of the default second argument).</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true"></a>tailrecsum(<span class="dv">5</span>, <span class="dv">0</span>)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true"></a>tailrecsum(<span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true"></a>tailrecsum(<span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true"></a>tailrecsum(<span class="dv">2</span>, <span class="dv">12</span>)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true"></a>tailrecsum(<span class="dv">1</span>, <span class="dv">14</span>)</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true"></a>tailrecsum(<span class="dv">0</span>, <span class="dv">15</span>)</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true"></a><span class="dv">15</span></span></code></pre></div>
<p>In the tail-recursive case, with each evaluation of the recursive call, the <code>running_total</code> is updated.</p>
<p><em>Note: The original answer used examples from Python. These have been changed to JavaScript, since Python interpreters don’t support <a href="https://stackoverflow.com/questions/310974/what-is-tail-call-optimization">tail call optimization</a>. However, while tail call optimization is <a href="http://www.ecma-international.org/ecma-262/6.0/
#sec-tail-position-calls" rel="noreferrer">part of the ECMAScript 2015 spec</a>, most JavaScript interpreters <a href="https://kangax.github.io/compat-table/es6/#test-proper_tail_calls_(tail_call_optimisation)" rel="noreferrer">don’t support it</a>.</em></p>
</section>
<section id="answer-2-score-658" class="level4">
<h4>Answer 2 (score 658)</h4>
<p>In <strong>traditional recursion</strong>, the typical model is that you perform your recursive calls first, and then you take the return value of the recursive call and calculate the result. In this manner, you don’t get the result of your calculation until you have returned from every recursive call.</p>
<p>In <strong>tail recursion</strong>, you perform your calculations first, and then you execute the recursive call, passing the results of your current step to the next recursive step. This results in the last statement being in the form of <code>(return (recursive-function params))</code>. <strong>Basically, the return value of any given recursive step is the same as the return value of the next recursive call</strong>.</p>
<p>The consequence of this is that once you are ready to perform your next recursive step, you don’t need the current stack frame any more. This allows for some optimization. In fact, with an appropriately written compiler, you should never have a stack overflow <em>snicker</em> with a tail recursive call. Simply reuse the current stack frame for the next recursive step. I’m pretty sure Lisp does this.</p>
</section>
<section id="answer-3-score-192" class="level4">
<h4>Answer 3 (score 192)</h4>
<p>An important point is that tail recursion is essentially equivalent to looping. It’s not just a matter of compiler optimization, but a fundamental fact about expressiveness. This goes both ways: you can take any loop of the form</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true"></a><span class="cf">while</span>(E) { S }; <span class="cf">return</span> Q</span></code></pre></div>
<p>where <code>E</code> and <code>Q</code> are expressions and <code>S</code> is a sequence of statements, and turn it into a tail recursive function</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true"></a>f() = <span class="cf">if</span> E then { S; <span class="cf">return</span> f() } <span class="cf">else</span> { <span class="cf">return</span> Q }</span></code></pre></div>
<p>Of course, <code>E</code>, <code>S</code>, and <code>Q</code> have to be defined to compute some interesting value over some variables. For example, the looping function</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true"></a>sum(n) {</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true"></a>  <span class="dt">int</span> i = <span class="dv">1</span>, k = <span class="dv">0</span>;</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true"></a>  <span class="cf">while</span>( i &lt;= n ) {</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true"></a>    k += i;</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true"></a>    ++i;</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true"></a>  }</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true"></a>  <span class="cf">return</span> k;</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>is equivalent to the tail-recursive function(s)</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true"></a>sum_aux(n,i,k) {</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true"></a>  <span class="cf">if</span>( i &lt;= n ) {</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true"></a>    <span class="cf">return</span> sum_aux(n,i+<span class="dv">1</span>,k+i);</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true"></a>    <span class="cf">return</span> k;</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true"></a>  }</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true"></a>}</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true"></a></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true"></a>sum(n) {</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true"></a>  <span class="cf">return</span> sum_aux(n,<span class="dv">1</span>,<span class="dv">0</span>);</span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true"></a>}</span></code></pre></div>
<p>(This “wrapping” of the tail-recursive function with a function with fewer parameters is a common functional idiom.)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="big-o-how-do-you-calculateapproximate-it-score-405090-in-2011" class="level3">
<h3>16: Big O, how do you calculate/approximate it? (score <a href="https://stackoverflow.com/q/3255.html">405090</a> in 2011)</h3>
<section id="question-15" class="level4">
<h4>Question</h4>
<p>
Most people with a degree in CS will certainly know what <a href="http://www.nist.gov/dads/HTML/bigOnotation.html" rel="noreferrer">Big O stands for</a>. It helps us to measure how (in)efficient an algorithm really is and if you know in <a href="http://en.wikipedia.org/wiki/List_of_complexity_classes" rel="noreferrer">what category the problem you are trying to solve lays in</a> you can figure out if it is still possible to squeeze out that little extra performance.<sup>1</sup>
</p>
<p>But I’m curious, how do <em>you</em> calculate or approximate the complexity of your algorithms?</p>
<p><sup>1</sup> <sub>but as they say, don’t overdo it, <a href="http://en.wikipedia.org/wiki/Optimization_(computer_science)
#When_to_optimize" rel="noreferrer">premature optimization is the root of all evil</a>, and optimization without a justified cause should deserve that name as well.</sub></p>
</section>
<section id="answer-accepted-score-1454" class="level4">
<h4>Answer accepted (score 1454)</h4>
<p>I’ll do my best to explain it here on simple terms, but be warned that this topic takes my students a couple of months to finally grasp. You can find more information on the Chapter 2 of the <a href="https://rads.stackoverflow.com/amzn/click/com/0321370139" rel="noreferrer" rel="nofollow noreferrer">Data Structures and Algorithms in Java</a> book.</p>
<hr>
<p>There is no <a href="http://en.wikipedia.org/wiki/Halting_problem" rel="noreferrer">mechanical procedure</a> that can be used to get the BigOh.</p>
<p>As a “cookbook”, to obtain the <a href="http://en.wikipedia.org/wiki/Big_Oh_notation" rel="noreferrer">BigOh</a> from a piece of code you first need to realize that you are creating a math formula to count how many steps of computations get executed given an input of some size.</p>
<p>The purpose is simple: to compare algorithms from a theoretical point of view, without the need to execute the code. The lesser the number of steps, the faster the algorithm.</p>
<p>For example, let’s say you have this piece of code:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true"></a><span class="dt">int</span> sum(<span class="dt">int</span>* data, <span class="dt">int</span> N) {</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true"></a>    <span class="dt">int</span> result = <span class="dv">0</span>;               <span class="co">// 1</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; N; i++) { <span class="co">// 2</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true"></a>        result += data[i];        <span class="co">// 3</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true"></a>    }</span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true"></a></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true"></a>    <span class="cf">return</span> result;                <span class="co">// 4</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>This function returns the sum of all the elements of the array, and we want to create a formula to count the <a href="http://en.wikipedia.org/wiki/Computational_complexity_theory" rel="noreferrer">computational complexity</a> of that function:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true"></a>Number_Of_Steps = f(N)</span></code></pre></div>
<p>So we have <code>f(N)</code>, a function to count the number of computational steps. The input of the function is the size of the structure to process. It means that this function is called such as:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true"></a>Number_Of_Steps = f(data.length)</span></code></pre></div>
<p>The parameter <code>N</code> takes the <code>data.length</code> value. Now we need the actual definition of the function <code>f()</code>. This is done from the source code, in which each interesting line is numbered from 1 to 4.</p>
<p>There are many ways to calculate the BigOh. From this point forward we are going to assume that every sentence that doesn’t depend on the size of the input data takes a constant <code>C</code> number computational steps.</p>
<p>We are going to add the individual number of steps of the function, and neither the local variable declaration nor the return statement depends on the size of the <code>data</code> array.</p>
<p>That means that lines 1 and 4 takes C amount of steps each, and the function is somewhat like this:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true"></a>f(N) = C + ??? + C</span></code></pre></div>
<p>The next part is to define the value of the <code>for</code> statement. Remember that we are counting the number of computational steps, meaning that the body of the <code>for</code> statement gets executed <code>N</code> times. That’s the same as adding <code>C</code>, <code>N</code> times:</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true"></a>f(N) = C + (C + C + ... + C) + C = C + N * C + C</span></code></pre></div>
<p>There is no mechanical rule to count how many times the body of the <code>for</code> gets executed, you need to count it by looking at what does the code do. To simplify the calculations, we are ignoring the variable initialization, condition and increment parts of the <code>for</code> statement.</p>
<p>To get the actual BigOh we need the <a href="http://en.wikipedia.org/wiki/Asymptotic_analysis" rel="noreferrer">Asymptotic analysis</a> of the function. This is roughly done like this:</p>
<ol>
<li>
Take away all the constants <code>C</code>.
</li>
<li>
From <code>f()</code> get the <a href="http://en.wikipedia.org/wiki/Polynomial" rel="noreferrer">polynomium</a> in its <code>standard form</code>.
</li>
<li>
Divide the terms of the polynomium and sort them by the rate of growth.
</li>
<li>
Keep the one that grows bigger when <code>N</code> approaches <code>infinity</code>.
</li>
</ol>
<p>Our <code>f()</code> has two terms:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true"></a>f(N) = <span class="dv">2</span> * C * N ^ <span class="dv">0</span> + <span class="dv">1</span> * C * N ^ <span class="dv">1</span></span></code></pre></div>
<p>Taking away all the <code>C</code> constants and redundant parts:</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true"></a>f(N) = <span class="dv">1</span> + N ^ <span class="dv">1</span></span></code></pre></div>
<p>Since the last term is the one which grows bigger when <code>f()</code> approaches infinity (think on <a href="http://en.wikipedia.org/wiki/Limit_%28mathematics%29" rel="noreferrer">limits</a>) this is the BigOh argument, and the <code>sum()</code> function has a BigOh of:</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true"></a>O(N)</span></code></pre></div>
<hr>
<p>There are a few tricks to solve some tricky ones: use <a href="http://en.wikipedia.org/wiki/Summation" rel="noreferrer">summations</a> whenever you can.</p>
<p>As an example, this code can be easily solved using summations:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true"></a><span class="cf">for</span> (i = <span class="dv">0</span>; i &lt; <span class="dv">2</span>*n; i += <span class="dv">2</span>) {  <span class="co">// 1</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true"></a>    <span class="cf">for</span> (j=n; j &gt; i; j--) {     <span class="co">// 2</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true"></a>        foo();                  <span class="co">// 3</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true"></a>    }</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>The first thing you needed to be asked is the order of execution of <code>foo()</code>. While the usual is to be <code>O(1)</code>, you need to ask your professors about it. <code>O(1)</code> means (almost, mostly) constant <code>C</code>, independent of the size <code>N</code>.</p>
<p>The <code>for</code> statement on the sentence number one is tricky. While the index ends at <code>2 * N</code>, the increment is done by two. That means that the first <code>for</code> gets executed only <code>N</code> steps, and we need to divide the count by two.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true"></a>f(N) = Summation(i from <span class="dv">1</span> to <span class="dv">2</span> * N / <span class="dv">2</span>)( ... ) = </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true"></a>     = Summation(i from <span class="dv">1</span> to N)( ... )</span></code></pre></div>
<p>The sentence number <em>two</em> is even trickier since it depends on the value of <code>i</code>. Take a look: the index i takes the values: 0, 2, 4, 6, 8, …, 2 * N, and the second <code>for</code> get executed: N times the first one, N - 2 the second, N - 4 the third… up to the N / 2 stage, on which the second <code>for</code> never gets executed.</p>
<p>On formula, that means:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true"></a>f(N) = Summation(i from <span class="dv">1</span> to N)( Summation(j = ???)(  ) )</span></code></pre></div>
<p>Again, we are counting <strong>the number of steps</strong>. And by definition, every summation should always start at one, and end at a number bigger-or-equal than one.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true"></a>f(N) = Summation(i from <span class="dv">1</span> to N)( Summation(j = <span class="dv">1</span> to (N - (i - <span class="dv">1</span>) * <span class="dv">2</span>)( C ) )</span></code></pre></div>
<p>(We are assuming that <code>foo()</code> is <code>O(1)</code> and takes <code>C</code> steps.)</p>
<p>We have a problem here: when <code>i</code> takes the value <code>N / 2 + 1</code> upwards, the inner Summation ends at a negative number! That’s impossible and wrong. We need to split the summation in two, being the pivotal point the moment <code>i</code> takes <code>N / 2 + 1</code>.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true"></a>f(N) = Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span>)( Summation(j = <span class="dv">1</span> to (N - (i - <span class="dv">1</span>) * <span class="dv">2</span>)) * ( C ) ) + Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span>) * ( C )</span></code></pre></div>
<p>Since the pivotal moment <code>i &amp;gt; N / 2</code>, the inner <code>for</code> won’t get executed, and we are assuming a constant C execution complexity on its body.</p>
<p>Now the summations can be simplified using some identity rules:</p>
<ol>
<li>
Summation(w from 1 to N)( C ) = N * C
</li>
<li>
Summation(w from 1 to N)( A (+/-) B ) = Summation(w from 1 to N)( A ) (+/-) Summation(w from 1 to N)( B )
</li>
<li>
Summation(w from 1 to N)( w * C ) = C * Summation(w from 1 to N)( w ) (C is a constant, independent of <code>w</code>)
</li>
<li>
Summation(w from 1 to N)( w ) = (N * (N + 1)) / 2
</li>
</ol>
<p>Applying some algebra:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true"></a>f(N) = Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span>)( (N - (i - <span class="dv">1</span>) * <span class="dv">2</span>) * ( C ) ) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true"></a></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true"></a>f(N) = C * Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span>)( (N - (i - <span class="dv">1</span>) * <span class="dv">2</span>)) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true"></a></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true"></a>f(N) = C * (Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span>)( N ) - Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span>)( (i - <span class="dv">1</span>) * <span class="dv">2</span>)) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true"></a></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true"></a>f(N) = C * (( N ^ <span class="dv">2</span> / <span class="dv">2</span> ) - <span class="dv">2</span> * Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span>)( i - <span class="dv">1</span> )) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true"></a></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true"></a>=&gt; Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span>)( i - <span class="dv">1</span> ) = Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span> - <span class="dv">1</span>)( i )</span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true"></a></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true"></a>f(N) = C * (( N ^ <span class="dv">2</span> / <span class="dv">2</span> ) - <span class="dv">2</span> * Summation(i from <span class="dv">1</span> to N / <span class="dv">2</span> - <span class="dv">1</span>)( i )) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true"></a></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true"></a>f(N) = C * (( N ^ <span class="dv">2</span> / <span class="dv">2</span> ) - <span class="dv">2</span> * ( (N / <span class="dv">2</span> - <span class="dv">1</span>) * (N / <span class="dv">2</span> - <span class="dv">1</span> + <span class="dv">1</span>) / <span class="dv">2</span>) ) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true"></a></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true"></a>=&gt; (N / <span class="dv">2</span> - <span class="dv">1</span>) * (N / <span class="dv">2</span> - <span class="dv">1</span> + <span class="dv">1</span>) / <span class="dv">2</span> = </span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true"></a></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true"></a>   (N / <span class="dv">2</span> - <span class="dv">1</span>) * (N / <span class="dv">2</span>) / <span class="dv">2</span> = </span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true"></a></span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true"></a>   ((N ^ <span class="dv">2</span> / <span class="dv">4</span>) - (N / <span class="dv">2</span>)) / <span class="dv">2</span> = </span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true"></a></span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true"></a>   (N ^ <span class="dv">2</span> / <span class="dv">8</span>) - (N / <span class="dv">4</span>)</span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true"></a></span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true"></a>f(N) = C * (( N ^ <span class="dv">2</span> / <span class="dv">2</span> ) - <span class="dv">2</span> * ( (N ^ <span class="dv">2</span> / <span class="dv">8</span>) - (N / <span class="dv">4</span>) )) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true"></a></span>
<span id="cb115-25"><a href="#cb115-25" aria-hidden="true"></a>f(N) = C * (( N ^ <span class="dv">2</span> / <span class="dv">2</span> ) - ( (N ^ <span class="dv">2</span> / <span class="dv">4</span>) - (N / <span class="dv">2</span>) )) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-26"><a href="#cb115-26" aria-hidden="true"></a></span>
<span id="cb115-27"><a href="#cb115-27" aria-hidden="true"></a>f(N) = C * (( N ^ <span class="dv">2</span> / <span class="dv">2</span> ) - (N ^ <span class="dv">2</span> / <span class="dv">4</span>) + (N / <span class="dv">2</span>)) + (N / <span class="dv">2</span>)( C )</span>
<span id="cb115-28"><a href="#cb115-28" aria-hidden="true"></a></span>
<span id="cb115-29"><a href="#cb115-29" aria-hidden="true"></a>f(N) = C * ( N ^ <span class="dv">2</span> / <span class="dv">4</span> ) + C * (N / <span class="dv">2</span>) + C * (N / <span class="dv">2</span>)</span>
<span id="cb115-30"><a href="#cb115-30" aria-hidden="true"></a></span>
<span id="cb115-31"><a href="#cb115-31" aria-hidden="true"></a>f(N) = C * ( N ^ <span class="dv">2</span> / <span class="dv">4</span> ) + <span class="dv">2</span> * C * (N / <span class="dv">2</span>)</span>
<span id="cb115-32"><a href="#cb115-32" aria-hidden="true"></a></span>
<span id="cb115-33"><a href="#cb115-33" aria-hidden="true"></a>f(N) = C * ( N ^ <span class="dv">2</span> / <span class="dv">4</span> ) + C * N</span>
<span id="cb115-34"><a href="#cb115-34" aria-hidden="true"></a></span>
<span id="cb115-35"><a href="#cb115-35" aria-hidden="true"></a>f(N) = C * <span class="dv">1</span>/<span class="dv">4</span> * N ^ <span class="dv">2</span> + C * N</span></code></pre></div>
<p>And the BigOh is:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true"></a>O(N²)</span></code></pre></div>
</section>
<section id="answer-2-score-200" class="level4">
<h4>Answer 2 (score 200)</h4>
<p>Big O gives the upper bound for time complexity of an algorithm. It is usually used in conjunction with processing data sets (lists) but can be used elsewhere.</p>
<p>A few examples of how it’s used in C code.</p>
<p>Say we have an array of n elements</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true"></a><span class="dt">int</span> array[n];</span></code></pre></div>
<p>If we wanted to access the first element of the array this would be O(1) since it doesn’t matter how big the array is, it always takes the same constant time to get the first item.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true"></a>x = array[<span class="dv">0</span>];</span></code></pre></div>
<p>If we wanted to find a number in the list:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true"></a><span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; n; i++){</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true"></a>    <span class="cf">if</span>(array[i] == numToFind){ <span class="cf">return</span> i; }</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true"></a>}</span></code></pre></div>
<p>This would be O(n) since at most we would have to look through the entire list to find our number. The Big-O is still O(n) even though we might find our number the first try and run through the loop once because Big-O describes the upper bound for an algorithm (omega is for lower bound and theta is for tight bound).</p>
<p>When we get to nested loops:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true"></a><span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; n; i++){</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true"></a>    <span class="cf">for</span>(<span class="dt">int</span> j = i; j &lt; n; j++){</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true"></a>        array[j] += <span class="dv">2</span>;</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true"></a>    }</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>This is O(n^2) since for each pass of the outer loop ( O(n) ) we have to go through the entire list again so the n’s multiply leaving us with n squared.</p>
<p>This is barely scratching the surface but when you get to analyzing more complex algorithms complex math involving proofs comes into play. Hope this familiarizes you with the basics at least though.</p>
</section>
<section id="answer-3-score-94" class="level4">
<h4>Answer 3 (score 94)</h4>
<p>While knowing how to figure out the Big O time for your particular problem is useful, knowing some general cases can go a long way in helping you make decisions in your algorithm.</p>
<p>Here are some of the most common cases, lifted from <a href="http://en.wikipedia.org/wiki/Big_O_notation
#Orders_of_common_functions" rel="noreferrer">http://en.wikipedia.org/wiki/Big_O_notation#Orders_of_common_functions</a>:</p>
<p>O(1) - Determining if a number is even or odd; using a constant-size lookup table or hash table</p>
<p>O(logn) - Finding an item in a sorted array with a binary search</p>
<p>O(n) - Finding an item in an unsorted list; adding two n-digit numbers</p>
<p>O(n<sup>2</sup>) - Multiplying two n-digit numbers by a simple algorithm; adding two n×n matrices; bubble sort or insertion sort</p>
<p>O(n<sup>3</sup>) - Multiplying two n×n matrices by simple algorithm</p>
<p>O(c<sup>n</sup>) - Finding the (exact) solution to the traveling salesman problem using dynamic programming; determining if two logical statements are equivalent using brute force</p>
<p>O(n!) - Solving the traveling salesman problem via brute-force search</p>
<p>O(n<sup>n</sup>) - Often used instead of O(n!) to derive simpler formulas for asymptotic complexity</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-pair-socks-from-a-pile-efficiently-score-403361-in-2016" class="level3">
<h3>17: How to pair socks from a pile efficiently? (score <a href="https://stackoverflow.com/q/14415881.html">403361</a> in 2016)</h3>
<section id="question-16" class="level4">
<h4>Question</h4>
<p>Yesterday I was pairing the socks from the clean laundry and figured out the way I was doing it is not very efficient. I was doing a naive search — picking one sock and “iterating” the pile in order to find its pair. This requires iterating over n/2 * n/4 = n<sup>2</sup>/8 socks on average.</p>
<p>As a computer scientist I was thinking what I could do? Sorting (according to size/color/…) of course came to mind to achieve an O(NlogN) solution.</p>
<p>Hashing or other not-in-place solutions are not an option, because I am not able to duplicate my socks (though it could be nice if I could).</p>
<p><strong>So, the question is basically:</strong></p>
<p>Given a pile of <code>n</code> pairs of socks, containing <code>2n</code> elements (assume each sock has exactly one matching pair), what is the best way to pair them up efficiently with up to logarithmic extra space? (I believe I can remember that amount of info if needed.)</p>
<p>I will appreciate an answer that addresses the following aspects:</p>
<ul>
<li>
A general <em>theoretical</em> solution for a huge number of socks.
</li>
<li>
The actual number of socks is not that large, I don’t believe my spouse and I have more than 30 pairs. (And it is fairly easy to distinguish between my socks and hers; can this be used as well?)
</li>
<li>
Is it equivalent to the <a href="http://en.wikipedia.org/wiki/Element_distinctness_problem">element distinctness problem</a>?
</li>
</ul>
</section>
<section id="answer-accepted-score-2407" class="level4">
<h4>Answer accepted (score 2407)</h4>
<p>Sorting solutions have been proposed, but <strong>sorting is a little too much</strong>: We don’t need order; <strong>we just need equality groups</strong>.</p>
<p>So <strong>hashing</strong> would be enough (and faster).</p>
<ol>
<li>
For each color of socks, <strong>form a pile</strong>. Iterate over all socks in your input basket <strong>and distribute them onto the color piles</strong>.
</li>
<li>
Iterate over each pile and <strong>distribute it by some other metric</strong> (e.g. pattern) into the second set of piles
</li>
<li>
<strong>Recursively apply this scheme</strong> until you have distributed all socks onto <strong>very small piles that you can visually process immediately</strong>
</li>
</ol>
<p>This kind of recursive hash partitioning is actually being done by <a href="http://en.wikipedia.org/wiki/Microsoft_SQL_Server" rel="noreferrer">SQL Server</a> when it needs to hash join or hash aggregate over huge data sets. It distributes its build input stream into many partitions which are independent. This scheme scales to arbitrary amounts of data and multiple CPUs linearly.</p>
<p>You don’t need recursive partitioning if you can find a distribution key (hash key) that <strong>provides enough buckets</strong> that each bucket is small enough to be processed very quickly. Unfortunately, I don’t think socks have such a property.</p>
<p>If each sock had an integer called “PairID” one could easily distribute them into 10 buckets according to <code>PairID % 10</code> (the last digit).</p>
<p>The best real-world partitioning I can think of is creating a <strong>rectangle of piles</strong>: one dimension is color, the other is the pattern. Why a rectangle? Because we need O(1) random-access to piles. (A 3D <a href="http://en.wikipedia.org/wiki/Cuboid" rel="noreferrer">cuboid</a> would also work, but that is not very practical.)</p>
<hr/>
<p>Update:</p>
<p>What about <strong>parallelism</strong>? Can multiple humans match the socks faster?</p>
<ol>
<li>
The simplest parallelization strategy is to have multiple workers take from the input basket and put the socks onto the piles. This only scales up so much - imagine 100 people fighting over 10 piles. <strong>The synchronization costs</strong> (manifesting themselves as hand-collisions and human communication) <strong>destroy efficiency and speed-up</strong> (see the <a href="http://www.perfdynamics.com/Manifesto/USLscalability.html" rel="noreferrer">Universal Scalability Law</a>!). Is this prone to <strong>deadlocks</strong>? No, because each worker only needs to access one pile at a time. With just one “lock” there cannot be a deadlock. <strong>Livelocks</strong> might be possible depending on how the humans coordinate access to piles. They might just use <a href="http://en.wikipedia.org/wiki/Exponential_backoff" rel="noreferrer">random backoff</a> like network cards do that on a physical level to determine what card can exclusively access the network wire. If it works for <a href="http://en.wikipedia.org/wiki/Network_interface_controller" rel="noreferrer">NICs</a>, it should work for humans as well.
</li>
<li>
It scales nearly indefinitely if <strong>each worker has its own set of piles</strong>. Workers can then take big chunks of socks from the input basket (very little contention as they are doing it rarely) and they do not need to synchronise when distributing the socks at all (because they have thread-local piles). At the end, all workers need to union their pile-sets. I believe that can be done in O(log (worker count * piles per worker)) if the workers form an <strong>aggregation tree</strong>.
</li>
</ol>
<p>What about the <a href="http://en.wikipedia.org/wiki/Element_distinctness_problem" rel="noreferrer">element distinctness problem</a>? As the article states, the element distinctness problem can be solved in <code>O(N)</code>. This is the same for the socks problem (also <code>O(N)</code>, if you need only one distribution step (I proposed multiple steps only because humans are bad at calculations - one step is enough if you distribute on <code>md5(color, length, pattern, ...)</code>, i.e. a <strong>perfect hash</strong> of all attributes)).</p>
<p>Clearly, one cannot go faster than <code>O(N)</code>, so we have reached the <strong>optimal lower bound</strong>.</p>
<p>Although the outputs are not exactly the same (in one case, just a boolean. In the other case, the pairs of socks), the asymptotic complexities are the same.</p>
</section>
<section id="answer-2-score-569" class="level4">
<h4>Answer 2 (score 569)</h4>
<p>As the architecture of the human brain is completely different than a modern CPU, this question makes no practical sense.</p>
<p>Humans can win over CPU algorithms using the fact that “finding a matching pair” can be one operation for a set that isn’t too big.</p>
<p>My algorithm:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true"></a>spread_all_socks_on_flat_surface();</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true"></a><span class="cf">while</span> (socks_left_on_a_surface()) {</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true"></a>     <span class="co">// Thanks to human visual SIMD, this is one, quick operation.</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true"></a>     pair = notice_any_matching_pair();</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true"></a>     remove_socks_pair_from_surface(pair);</span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true"></a>}</span></code></pre></div>
<p>At least this is what I am using in real life, and I find it very efficient. The downside is it requires a flat surface, but it’s usually abundant.</p>
</section>
<section id="answer-3-score-250" class="level4">
<h4>Answer 3 (score 250)</h4>
<p><strong>Case 1</strong>: All socks are identical (this is what I do in real life by the way).</p>
<p>Pick any two of them to make a pair. Constant time.</p>
<p><strong>Case 2</strong>: There are a constant number of combinations (ownership, color, size, texture, etc.).</p>
<p>Use <a href="http://en.wikipedia.org/wiki/Radix_sort">radix sort</a>. This is only linear time since comparison is not required.</p>
<p><strong>Case 3</strong>: The number of combinations is not known in advance (general case).</p>
<p>We have to do comparison to check whether two socks come in pair. Pick one of the <code>O(n log n)</code> comparison-based sorting algorithms.</p>
<p>However in real life when the number of socks is relatively small (constant), these theoretically optimal algorithms wouldn’t work well. It might take even more time than sequential search, which theoretically requires quadratic time.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-most-effective-way-for-float-and-double-comparison-score-384339-in-2016" class="level3">
<h3>18: What is the most effective way for float and double comparison? (score <a href="https://stackoverflow.com/q/17333.html">384339</a> in 2016)</h3>
<section id="question-17" class="level4">
<h4>Question</h4>
<p>What would be the most efficient way to compare two <code>double</code> or two <code>float</code> values?</p>
<p>Simply doing this is not correct:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true"></a><span class="dt">bool</span> CompareDoubles1 (<span class="dt">double</span> A, <span class="dt">double</span> B)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true"></a>{</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true"></a>   <span class="cf">return</span> A == B;</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true"></a>}</span></code></pre></div>
<p>But something like:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true"></a><span class="dt">bool</span> CompareDoubles2 (<span class="dt">double</span> A, <span class="dt">double</span> B) </span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true"></a>{</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true"></a>   diff = A - B;</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true"></a>   <span class="cf">return</span> (diff &lt; EPSILON) &amp;&amp; (-diff &lt; EPSILON);</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>Seems to waste processing.</p>
<p>Does anyone know a smarter float comparer?</p>
</section>
<section id="answer-2-score-436" class="level4">
<h4>Answer 2 (score 436)</h4>
<p>Be extremely careful using any of the other suggestions. It all depends on context.</p>
<p>I have spent a long time tracing a bugs in a system that presumed <code>a==b</code> if <code>|a-b|&amp;lt;epsilon</code>. The underlying problems were:</p>
<ol>
<li>
<p>
The implicit presumption in an algorithm that if <code>a==b</code> and <code>b==c</code> then <code>a==c</code>.
</p>
</li>
<li>
<p>
Using the same epsilon for lines measured in inches and lines measured in mils (.001 inch). That is <code>a==b</code> but <code>1000a!=1000b</code>. (This is why AlmostEqual2sComplement asks for the epsilon or max ULPS).
</p>
</li>
<li>
<p>
The use of the same epsilon for both the cosine of angles and the length of lines!
</p>
</li>
<li>
<p>
Using such a compare function to sort items in a collection. (In this case using the builtin C++ operator == for doubles produced correct results.)
</p>
</li>
</ol>
<p>Like I said: it all depends on context and the expected size of <code>a</code> and <code>b</code>.</p>
<p>BTW, <code>std::numeric_limits&amp;lt;double&amp;gt;::epsilon()</code> is the “machine epsilon”. It is the difference between 1.0 and the next value representable by a double. I guess that it could be used in the compare function but only if the expected values are less than 1. (This is in response to <span class="citation" data-cites="cdv">@cdv</span>’s answer…)</p>
<p>Also, if you basically have <code>int</code> arithmetic in <code>doubles</code> (here we use doubles to hold int values in certain cases) your arithmetic will be correct. For example 4.0/2.0 will be the same as 1.0+1.0. This is as long as you do not do things that result in fractions (4.0/3.0) or do not go outside of the size of an int.</p>
</section>
<section id="answer-3-score-174" class="level4">
<h4>Answer 3 (score 174)</h4>
<p>The comparison with an epsilon value is what most people do (even in game programming).</p>
<p>You should change your implementation a little though:</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true"></a><span class="dt">bool</span> AreSame(<span class="dt">double</span> a, <span class="dt">double</span> b)</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true"></a>{</span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true"></a>    <span class="cf">return</span> fabs(a - b) &lt; EPSILON;</span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true"></a>}</span></code></pre></div>
<hr>
<p>Edit: Christer has added a stack of great info on this topic on a <a href="http://realtimecollisiondetection.net/blog/?p=89" rel="noreferrer">recent blog post</a>. Enjoy.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="printing-prime-numbers-from-1-through-100-score-366862-in-2011" class="level3">
<h3>19: Printing prime numbers from 1 through 100 (score <a href="https://stackoverflow.com/q/5200879.html">366862</a> in 2011)</h3>
<section id="question-18" class="level4">
<h4>Question</h4>
<p>This c++ code prints out the following prime numbers: <strong>3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97.</strong></p>
<p>But I don’t think that’s the way my book wants it to be written. It mentions something about square root of a number. So I did try changing my 2nd loop to <code>for (int j=2; j&amp;lt;sqrt(i); j++)</code> but it did not give me the result I needed.</p>
<p>How would I need to change this code to the way my book wants it to be?</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true"></a><span class="dt">int</span> main () </span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true"></a>{</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">2</span>; i&lt;<span class="dv">100</span>; i++) </span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> j=<span class="dv">2</span>; j&lt;i; j++)</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true"></a>        {</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true"></a>            <span class="cf">if</span> (i % j == <span class="dv">0</span>) </span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true"></a>                <span class="cf">break</span>;</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true"></a>            <span class="cf">else</span> <span class="cf">if</span> (i == j+<span class="dv">1</span>)</span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true"></a>                cout &lt;&lt; i &lt;&lt; <span class="st">&quot; &quot;</span>;</span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true"></a></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true"></a>        }   </span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true"></a>}</span></code></pre></div>
<blockquote>
<p>
A prime integer number is one that has exactly two different divisors, namely 1 and the number itself. Write, run, and test a C++ program that finds and prints all the prime numbers less than 100. (Hint: 1 is a prime number. For each number from 2 to 100, find Remainder = Number % n, where n ranges from 2 to sqrt(number).  If n is greater than sqrt(number), the number is not equally divisible by n.  Why? If any Remainder equals 0, the number is no a prime number.)
</p>
</blockquote>
</section>
<section id="answer-accepted-score-28" class="level4">
<h4>Answer accepted (score 28)</h4>
<p>Three ways:</p>
<ol type="1">
<li></li>
</ol>
<div class="sourceCode" id="cb126"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true"></a><span class="dt">int</span> main () </span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true"></a>{</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">2</span>; i&lt;<span class="dv">100</span>; i++) </span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> j=<span class="dv">2</span>; j*j&lt;=i; j++)</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true"></a>        {</span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true"></a>            <span class="cf">if</span> (i % j == <span class="dv">0</span>) </span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true"></a>                <span class="cf">break</span>;</span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true"></a>            <span class="cf">else</span> <span class="cf">if</span> (j+<span class="dv">1</span> &gt; sqrt(i)) {</span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true"></a>                cout &lt;&lt; i &lt;&lt; <span class="st">&quot; &quot;</span>;</span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true"></a></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true"></a>            }</span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true"></a></span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true"></a>        }   </span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true"></a></span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true"></a>}</span></code></pre></div>
<ol start="2" type="1">
<li></li>
</ol>
<div class="sourceCode" id="cb127"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true"></a><span class="dt">int</span> main () </span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true"></a>{</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">2</span>; i&lt;<span class="dv">100</span>; i++) </span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true"></a>    {</span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true"></a>        <span class="dt">bool</span> prime=true;</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> j=<span class="dv">2</span>; j*j&lt;=i; j++)</span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true"></a>        {</span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true"></a>            <span class="cf">if</span> (i % j == <span class="dv">0</span>) </span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true"></a>            {</span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true"></a>                prime=false;</span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true"></a>                <span class="cf">break</span>;    </span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true"></a>            }</span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true"></a>        }   </span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true"></a>        <span class="cf">if</span>(prime) cout &lt;&lt; i &lt;&lt; <span class="st">&quot; &quot;</span>;</span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true"></a>    }</span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true"></a>}</span></code></pre></div>
<ol start="3" type="1">
<li></li>
</ol>
<div class="sourceCode" id="cb128"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true"></a></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;vector&gt;</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true"></a><span class="dt">int</span> main()</span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true"></a>{</span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true"></a>    std::vector&lt;<span class="dt">int</span>&gt; primes;</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true"></a>    primes.push_back(<span class="dv">2</span>);</span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true"></a>    <span class="cf">for</span>(<span class="dt">int</span> i=<span class="dv">3</span>; i &lt; <span class="dv">100</span>; i++)</span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true"></a>    {</span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true"></a>        <span class="dt">bool</span> prime=true;</span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true"></a>        <span class="cf">for</span>(<span class="dt">int</span> j=<span class="dv">0</span>;j&lt;primes.size() &amp;&amp; primes[j]*primes[j] &lt;= i;j++)</span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true"></a>        {</span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true"></a>            <span class="cf">if</span>(i % primes[j] == <span class="dv">0</span>)</span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true"></a>            {</span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true"></a>                prime=false;</span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true"></a>                <span class="cf">break</span>;</span>
<span id="cb128-16"><a href="#cb128-16" aria-hidden="true"></a>            }</span>
<span id="cb128-17"><a href="#cb128-17" aria-hidden="true"></a>        }</span>
<span id="cb128-18"><a href="#cb128-18" aria-hidden="true"></a>        <span class="cf">if</span>(prime) </span>
<span id="cb128-19"><a href="#cb128-19" aria-hidden="true"></a>        {</span>
<span id="cb128-20"><a href="#cb128-20" aria-hidden="true"></a>            primes.push_back(i);</span>
<span id="cb128-21"><a href="#cb128-21" aria-hidden="true"></a>            cout &lt;&lt; i &lt;&lt; <span class="st">&quot; &quot;</span>;</span>
<span id="cb128-22"><a href="#cb128-22" aria-hidden="true"></a>        }</span>
<span id="cb128-23"><a href="#cb128-23" aria-hidden="true"></a>    }</span>
<span id="cb128-24"><a href="#cb128-24" aria-hidden="true"></a></span>
<span id="cb128-25"><a href="#cb128-25" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb128-26"><a href="#cb128-26" aria-hidden="true"></a>}</span></code></pre></div>
<p>Edit: In the third example, we keep track of all of our previously calculated primes. If a number is divisible by a non-prime number, there is also some prime &lt;= that divisor which it is also divisble by. This reduces computation by a factor of primes_in_range/total_range.</p>
</section>
<section id="answer-2-score-16" class="level4">
<h4>Answer 2 (score 16)</h4>
<p>If <code>j</code> is <em>equal</em> to <code>sqrt(i)</code> it might also be a valid factor, not only if it’s <em>smaller</em>.</p>
<p>To iterate up to and including <code>sqrt(i)</code> in your inner loop, you could write:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">int</span> j=<span class="dv">2</span>; j*j&lt;=i; j++)</span></code></pre></div>
<p>(Compared to using <code>sqrt(i)</code> this has the advantage to not need conversion to floating point numbers.)</p>
</section>
<section id="answer-3-score-12" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>If a number has divisors, at least one of them must be less than or equal to the square root of the number. When you check divisors, you only need to check up to the square root, not all the way up to the number being tested.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="a-simple-explanation-of-naive-bayes-classification-score-352799-in-2016" class="level3">
<h3>20: A simple explanation of Naive Bayes Classification (score <a href="https://stackoverflow.com/q/10059594.html">352799</a> in 2016)</h3>
<section id="question-19" class="level4">
<h4>Question</h4>
<p>I am finding it hard to understand the process of Naive Bayes, and I was wondering if someone could explain it with a simple step by step process in English. I understand it takes comparisons by times occurred as a probability, but I have no idea how the training data is related to the actual dataset.</p>
<p>Please give me an explanation of what role the training set plays. I am giving a very simple example for fruits here, like banana for example</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true"></a>training set---</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true"></a>round-red</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true"></a>round-orange</span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true"></a>oblong-yellow</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true"></a>round-red</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true"></a></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true"></a>dataset----</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true"></a>round-red</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true"></a>round-orange</span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true"></a>round-red</span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true"></a>round-orange</span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true"></a>oblong-yellow</span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true"></a>round-red</span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true"></a>round-orange</span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true"></a>oblong-yellow</span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true"></a>oblong-yellow</span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true"></a>round-red</span></code></pre></div>
</section>
<section id="answer-accepted-score-665" class="level4">
<h4>Answer accepted (score 665)</h4>
<p>Your question as I understand it is divided in two parts, part one being you need a better understanding of the Naive Bayes classifier &amp; part two being the confusion surrounding Training set.</p>
<p>In general all of Machine Learning Algorithms need to be trained for supervised learning tasks like classification, prediction etc. or for unsupervised learning tasks like clustering.</p>
<p>During the training step, the algorithms are taught with a particular input dataset (training set) so that later on we may test them for unknown inputs (which they have never seen before) for which they may classify or predict etc (in case of supervised learning) based on their learning. This is what most of the Machine Learning techniques like Neural Networks, SVM, Bayesian etc. are based upon.</p>
<p>So in a general Machine Learning project basically you have to divide your input set to a Development Set (Training Set + Dev-Test Set) &amp; a Test Set (or Evaluation set). Remember your basic objective would be that your system learns and classifies new inputs which they have never seen before in either Dev set or test set.</p>
<p>
The test set typically has the same format as the training set. However, it is very important that the test set be distinct from the training corpus: if we simply reused the training set as the test set, then a model that simply memorized its input, without learning how to generalize to new examples, would receive misleadingly high scores.
</p>
<p>In general, for an example, 70% of our data can be used as training set cases. Also remember to partition the original set into the training and test sets <em>randomly</em>.</p>
<p>Now I come to your other question about Naive Bayes.</p>
<p>To demonstrate the concept of Naïve Bayes Classification, consider the example given below:</p>
<p><img src="https://i.stack.imgur.com/Eh6HI.gif" alt="enter image description here"></p>
<p>As indicated, the objects can be classified as either <code>GREEN</code> or <code>RED</code>. Our task is to classify new cases as they arrive, i.e., decide to which class label they belong, based on the currently existing objects.</p>
<p>Since there are twice as many <code>GREEN</code> objects as <code>RED</code>, it is reasonable to believe that a new case (which hasn’t been observed yet) is twice as likely to have membership <code>GREEN</code> rather than <code>RED</code>. In the Bayesian analysis, this belief is known as the prior probability. Prior probabilities are based on previous experience, in this case the percentage of <code>GREEN</code> and <code>RED</code> objects, and often used to predict outcomes before they actually happen.</p>
<p>Thus, we can write:</p>
<p><strong>Prior Probability of <code>GREEN</code></strong>: <code>number of GREEN objects / total number of objects</code></p>
<p><strong>Prior Probability of <code>RED</code></strong>: <code>number of RED objects / total number of objects</code></p>
<p>Since there is a total of <code>60</code> objects, <code>40</code> of which are <code>GREEN</code> and 20 <code>RED</code>, our prior probabilities for class membership are:</p>
<p><strong>Prior Probability for <code>GREEN</code></strong>: <code>40 / 60</code></p>
<p><strong>Prior Probability for <code>RED</code></strong>: <code>20 / 60</code></p>
<p>Having formulated our prior probability, we are now ready to classify a new object (<code>WHITE</code> circle in the diagram below). Since the objects are well clustered, it is reasonable to assume that the more <code>GREEN</code> (or <code>RED</code>) objects in the vicinity of X, the more likely that the new cases belong to that particular color. To measure this likelihood, we draw a circle around X which encompasses a number (to be chosen a priori) of points irrespective of their class labels. Then we calculate the number of points in the circle belonging to each class label. From this we calculate the likelihood:</p>
<p><img src="https://i.stack.imgur.com/gVpJF.gif" alt="enter image description here"></p>
<p><img src="https://i.stack.imgur.com/sh1zX.gif" alt="enter image description here"></p>
<p>From the illustration above, it is clear that Likelihood of <code>X</code> given <code>GREEN</code> is smaller than Likelihood of <code>X</code> given <code>RED</code>, since the circle encompasses <code>1</code> <code>GREEN</code> object and <code>3</code> <code>RED</code> ones. Thus:</p>
<p><img src="https://i.stack.imgur.com/DLCqA.gif" alt="enter image description here"></p>
<p><img src="https://i.stack.imgur.com/cJzst.gif" alt="enter image description here"></p>
<p>Although the prior probabilities indicate that <code>X</code> may belong to <code>GREEN</code> (given that there are twice as many <code>GREEN</code> compared to <code>RED</code>) the likelihood indicates otherwise; that the class membership of <code>X</code> is <code>RED</code> (given that there are more <code>RED</code> objects in the vicinity of <code>X</code> than <code>GREEN</code>). In the Bayesian analysis, the final classification is produced by combining both sources of information, i.e., the prior and the likelihood, to form a posterior probability using the so-called Bayes’ rule (named after Rev. Thomas Bayes 1702-1761).</p>
<p><img src="https://i.stack.imgur.com/N8MPA.gif" alt="enter image description here"></p>
<p>Finally, we classify X as <code>RED</code> since its class membership achieves the largest posterior probability.</p>
</section>
<section id="answer-2-score-1038" class="level4">
<h4>Answer 2 (score 1038)</h4>
<p>I realize that this is an old question, with an established answer. The reason I’m posting is that is the accepted answer has many elements of k-NN (<em>k</em>-nearest neighbors), a different algorithm.</p>
<p>Both k-NN and NaiveBayes are classification algorithms. Conceptually, k-NN uses the idea of “nearness” to classify new entities. In k-NN ‘nearness’ is modeled with ideas such as Euclidean Distance or Cosine Distance. By contrast, in NaiveBayes, the concept of ‘probability’ is used to classify new entities.</p>
<p>Since the question is about Naive Bayes, here’s how I’d describe the ideas and steps to someone. I’ll try to do it with as few equations and in plain English as much as possible.</p>
<h5>
First, Conditional Probability &amp; Bayes’ Rule
</h3>
<p>Before someone can understand and appreciate the nuances of Naive Bayes’, they need to know a couple of related concepts first, namely, the idea of Conditional Probability, and Bayes’ Rule. (If you are familiar with these concepts, skip to the section titled <strong>Getting to Naive Bayes’</strong>)</p>
<p><strong>Conditional Probability</strong> in plain English: What is the probability that something will happen, <em>given that something else</em> has already happened.</p>
<p>
Let’s say that there is some Outcome O. And some Evidence E. From the way these probabilities are defined: The Probability of having <em>both</em> the Outcome O and Evidence E is: (Probability of O occurring) multiplied by the (Prob of E given that O happened)
</p>
<p><em>One Example to understand Conditional Probability:</em></p>
<p>Let say we have a collection of US Senators. Senators could be Democrats or Republicans. They are also either male or female.</p>
<p>If we select one senator completely randomly, what is the probability that this person is a female Democrat? Conditional Probability can help us answer that.</p>
<p>Probability of (Democrat and Female Senator)= Prob(Senator is Democrat) multiplied by Conditional Probability of Being Female given that they are a Democrat.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true"></a>  P(Democrat &amp; Female) = P(Democrat) * P(Female | Democrat) </span></code></pre></div>
<p>We could compute the exact same thing, the reverse way:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true"></a>  P(Democrat &amp; Female) = P(Female) * P(Democrat | Female) </span></code></pre></div>
<h5>
Understanding Bayes Rule
</h3>
<p>Conceptually, this is a way to go from P(Evidence| Known Outcome) to P(Outcome|Known Evidence). Often, we know how frequently some particular evidence is observed, <em>given a known outcome</em>. We have to use this known fact to compute the reverse, to compute the chance of that <em>outcome happening</em>, given the evidence.</p>
<p>P(Outcome given that we know some Evidence) = P(Evidence given that we know the Outcome) times Prob(Outcome), scaled by the P(Evidence)</p>
<p>The classic example to understand Bayes’ Rule:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true"></a>Probability of Disease D given Test-positive = </span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true"></a></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true"></a>               Prob(Test is positive|Disease) * P(Disease)</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true"></a>     _______________________________________________________________</span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true"></a>     (scaled by) Prob(Testing Positive, with or without the disease)</span></code></pre></div>
<p>Now, all this was just preamble, to get to Naive Bayes.</p>
<h5>
Getting to Naive Bayes’
</h2>
<p>So far, we have talked only about one piece of evidence. In reality, we have to predict an outcome given <strong>multiple evidence.</strong> In that case, the math gets very complicated. To get around that complication, one approach is to ‘uncouple’ multiple pieces of evidence, and to treat each of piece of evidence as independent. This approach is why this is called <em>naive</em> Bayes.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true"></a>P(Outcome|Multiple Evidence) = </span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true"></a>P(Evidence1|Outcome) * P(Evidence2|outcome) * ... * P(EvidenceN|outcome) * P(Outcome)</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true"></a>scaled by P(Multiple Evidence)</span></code></pre></div>
<p>Many people choose to remember this as:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true"></a>                      P(Likelihood of Evidence) * Prior prob of outcome</span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true"></a>P(outcome|evidence) = _________________________________________________</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true"></a>                                         P(Evidence)</span></code></pre></div>
<p>Notice a few things about this equation:</p>
<ul>
<li>
If the Prob(evidence|outcome) is 1, then we are just multiplying by 1.
</li>
<li>
If the Prob(some particular evidence|outcome) is 0, then the whole prob. becomes 0. If you see contradicting evidence, we can rule out that outcome.
</li>
<li>
Since we divide everything by P(Evidence), we can even get away without calculating it.
</li>
<li>
The intuition behind multiplying by the <em>prior</em> is so that we give high probability to more common outcomes, and low probabilities to unlikely outcomes. These are also called <code>base rates</code> and they are a way to scale our predicted probabilities.
</li>
</ul>
<h5>
How to Apply NaiveBayes to Predict an Outcome?
</h3>
<p>
Just run the formula above for each possible outcome. Since we are trying to <em>classify</em>, each outcome is called a <code>class</code> and it has a <code>class label.</code> Our job is to look at the evidence, to consider how likely it is to be this class or that class, and assign a label to each entity. Again, we take a very simple approach: The class that has the highest probability is declared the “winner” and that class label gets assigned to that combination of evidences.
</p>
<h5>
Fruit Example
</h3>
<p>Let’s try it out on an example to increase our understanding: The OP asked for a ‘fruit’ identification example.</p>
<p>
Let’s say that we have data on 1000 pieces of fruit. They happen to be <strong>Banana</strong>, <strong>Orange</strong> or some <strong>Other Fruit</strong>. We know 3 characteristics about each fruit:
</p>
<ol>
<li>
Whether it is Long
</li>
<li>
Whether it is Sweet and
</li>
<li>
If its color is Yellow.
</li>
</ol>
<p>This is our ‘training set.’ We will use this to predict the type of any <em>new</em> fruit we encounter.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true"></a>Type           Long | Not Long || Sweet | Not Sweet || Yellow |Not Yellow|Total</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true"></a>             ___________________________________________________________________</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true"></a>Banana      |  <span class="dv">400</span>  |    <span class="dv">100</span>   || <span class="dv">350</span>   |    <span class="dv">150</span>    ||  <span class="dv">450</span>   |  <span class="dv">50</span>      |  <span class="dv">500</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true"></a>Orange      |    <span class="dv">0</span>  |    <span class="dv">300</span>   || <span class="dv">150</span>   |    <span class="dv">150</span>    ||  <span class="dv">300</span>   |   <span class="dv">0</span>      |  <span class="dv">300</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true"></a>Other Fruit |  <span class="dv">100</span>  |    <span class="dv">100</span>   || <span class="dv">150</span>   |     <span class="dv">50</span>    ||   <span class="dv">50</span>   | <span class="dv">150</span>      |  <span class="dv">200</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true"></a>            ____________________________________________________________________</span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true"></a>Total       |  <span class="dv">500</span>  |    <span class="dv">500</span>   || <span class="dv">650</span>   |    <span class="dv">350</span>    ||  <span class="dv">800</span>   | <span class="dv">200</span>      | <span class="dv">1000</span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true"></a>             ___________________________________________________________________</span></code></pre></div>
<p>We can pre-compute a lot of things about our fruit collection.</p>
<p>The so-called “Prior” probabilities. (If we didn’t know any of the fruit attributes, this would be our guess.) These are our <code>base rates.</code></p>
<div class="sourceCode" id="cb137"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true"></a> P(Banana)      = <span class="fl">0.5</span> (<span class="dv">500</span>/<span class="dv">1000</span>)</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true"></a> P(Orange)      = <span class="fl">0.3</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true"></a> P(Other Fruit) = <span class="fl">0.2</span></span></code></pre></div>
<p>Probability of “Evidence”</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true"></a>p(Long)   = <span class="fl">0.5</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true"></a>P(Sweet)  = <span class="fl">0.65</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true"></a>P(Yellow) = <span class="fl">0.8</span></span></code></pre></div>
<p>Probability of “Likelihood”</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true"></a>P(Long|Banana) = <span class="fl">0.8</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true"></a>P(Long|Orange) = <span class="dv">0</span>  [Oranges are never <span class="dt">long</span> in all the fruit we have seen.]</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true"></a> ....</span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true"></a></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true"></a>P(Yellow|Other Fruit)     =  <span class="dv">50</span>/<span class="dv">200</span> = <span class="fl">0.25</span></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true"></a>P(Not Yellow|Other Fruit) = <span class="fl">0.75</span></span></code></pre></div>
<h5>
Given a Fruit, how to classify it?
</h3>
<p>Let’s say that we are given the properties of an unknown fruit, and asked to classify it. We are told that the fruit is Long, Sweet and Yellow. Is it a Banana? Is it an Orange? Or Is it some Other Fruit?</p>
<p>We can simply run the numbers for each of the 3 outcomes, one by one. Then we choose the highest probability and ‘classify’ our unknown fruit as belonging to the class that had the highest probability based on our prior evidence (our 1000 fruit training set):</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true"></a>P(Banana|Long, Sweet and Yellow) </span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true"></a>      P(Long|Banana) * P(Sweet|Banana) * P(Yellow|Banana) * P(banana)</span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true"></a>    = _______________________________________________________________</span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true"></a>                      P(Long) * P(Sweet) * P(Yellow)</span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true"></a></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true"></a>    = <span class="fl">0.8</span> * <span class="fl">0.7</span> * <span class="fl">0.9</span> * <span class="fl">0.5</span> / P(evidence)</span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true"></a></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true"></a>    = <span class="fl">0.252</span> / P(evidence)</span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true"></a></span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true"></a></span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true"></a>P(Orange|Long, Sweet and Yellow) = <span class="dv">0</span></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true"></a></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true"></a></span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true"></a>P(Other Fruit|Long, Sweet and Yellow)</span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true"></a>      P(Long|Other fruit) * P(Sweet|Other fruit) * P(Yellow|Other fruit) * P(Other Fruit)</span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true"></a>    = ____________________________________________________________________________________</span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true"></a>                                          P(evidence)</span>
<span id="cb140-18"><a href="#cb140-18" aria-hidden="true"></a></span>
<span id="cb140-19"><a href="#cb140-19" aria-hidden="true"></a>    = (<span class="dv">100</span>/<span class="dv">200</span> * <span class="dv">150</span>/<span class="dv">200</span> * <span class="dv">50</span>/<span class="dv">200</span> * <span class="dv">200</span>/<span class="dv">1000</span>) / P(evidence)</span>
<span id="cb140-20"><a href="#cb140-20" aria-hidden="true"></a></span>
<span id="cb140-21"><a href="#cb140-21" aria-hidden="true"></a>    = <span class="fl">0.01875</span> / P(evidence)</span></code></pre></div>
<p>By an overwhelming margin (<code>0.252 &amp;gt;&amp;gt; 0.01875</code>), we classify this Sweet/Long/Yellow fruit as likely to be a Banana.</p>
<h5>
Why is Bayes Classifier so popular?
</h3>
<p>Look at what it eventually comes down to. Just some counting and multiplication. We can pre-compute all these terms, and so classifying becomes easy, quick and efficient.</p>
<p><code>Let z = 1 / P(evidence).</code> Now we quickly compute the following three quantities.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true"></a>P(Banana|evidence) = z * Prob(Banana) * Prob(Evidence1|Banana) * Prob(Evidence2|Banana) ...</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true"></a>P(Orange|Evidence) = z * Prob(Orange) * Prob(Evidence1|Orange) * Prob(Evidence2|Orange) ...</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true"></a>P(Other|Evidence)  = z * Prob(Other)  * Prob(Evidence1|Other)  * Prob(Evidence2|Other)  ...</span></code></pre></div>
<p>Assign the class label of whichever is the highest number, and you are done.</p>
<p>Despite the name, Naive Bayes turns out to be excellent in certain applications. Text classification is one area where it really shines.</p>
<p>Hope that helps in understanding the concepts behind the Naive Bayes algorithm.</p>
</section>
<section id="answer-3-score-18" class="level4">
<h4>Answer 3 (score 18)</h4>
<p>
<strong>Naive Bayes:</strong> Naive Bayes comes under supervising machine learning which used to make classifications of data sets. It is used to predict things based on its prior knowledge and independence assumptions.
</p>
<p>They call it <strong>naive</strong> because it’s assumptions (it assumes that all of the features in the dataset are equally important and independent) are really optimistic and rarely true in most real-world applications.</p>
<p>It is classification algorithm which makes the decision for the unknown data set. It is based on <a href="https://en.wikipedia.org/wiki/Bayes%27_theorem" rel="noreferrer">Bayes Theorem</a> which describe the probability of an event based on its prior knowledge.</p>
<p>Below diagram shows how naive Bayes works</p>
<p><a href="https://en.wikipedia.org/wiki/Bayes%27_theorem" rel="noreferrer"><img src="https://i.stack.imgur.com/0QOII.png" alt="enter image description here"></a></p>
<p><strong>Formula to predict NB:</strong></p>
<p><a href="https://i.stack.imgur.com/0QOII.png" rel="noreferrer"><img src="https://i.stack.imgur.com/t5voX.png" alt="enter image description here"></a></p>
<p><strong>How to use Naive Bayes Algorithm ?</strong></p>
<p>Let’s take an example of how N.B woks</p>
<p>
Step 1: First we find out Likelihood of table which shows the probability of yes or no in below diagram. Step 2: Find the posterior probability of each class.
</p>
<p><a href="https://i.stack.imgur.com/t5voX.png" rel="noreferrer"><img src="https://i.stack.imgur.com/ZSv4b.png" alt="enter image description here"></a></p>
<div class="sourceCode" id="cb142"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true"></a>Problem: Find out the possibility of whether the player plays in Rainy condition?</span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true"></a></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true"></a>P(Yes|Rainy) = P(Rainy|Yes) * P(Yes) / P(Rainy)</span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true"></a></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true"></a>P(Rainy|Yes) = <span class="dv">2</span>/<span class="dv">9</span> = <span class="fl">0.222</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true"></a>P(Yes) = <span class="dv">9</span>/<span class="dv">14</span> = <span class="fl">0.64</span></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true"></a>P(Rainy) = <span class="dv">5</span>/<span class="dv">14</span> = <span class="fl">0.36</span></span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true"></a></span>
<span id="cb142-9"><a href="#cb142-9" aria-hidden="true"></a>Now, P(Yes|Rainy) = <span class="fl">0.222</span>*<span class="fl">0.64</span>/<span class="fl">0.36</span> = <span class="fl">0.39</span> which is lower probability which means chances of the match played is low.</span></code></pre></div>
<p>For more reference refer these <a href="https://medium.com/@jiteshmohite.619/introduction-to-naive-bayes-29c9c6c061b8" rel="noreferrer">blog.</a></p>
<p>Refer GitHub Repository <a href="https://github.com/jiteshmohite/Naive-Bayes-Examples" rel="noreferrer">Naive-Bayes-Examples</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="finding-all-possible-combinations-of-numbers-to-reach-a-given-sum-score-319931-in-2019" class="level3">
<h3>21: Finding all possible combinations of numbers to reach a given sum (score <a href="https://stackoverflow.com/q/4632322.html">319931</a> in 2019)</h3>
<section id="question-20" class="level4">
<h4>Question</h4>
<p>How would you go about testing all possible combinations of additions from a given set of numbers so they add up to a given final number?</p>
<p>Example:</p>
<ul>
<li>
Set of numbers to add: {1,5,22,15,0,…}
</li>
<li>
Desired result: 12345
</li>
</ul>
</section>
<section id="answer-accepted-score-220" class="level4">
<h4>Answer accepted (score 220)</h4>
<p>This problem can be solved with a recursive combinations of all possible sums filtering out those that reach the target. Here is the algorithm in Python:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true"></a>def subset_sum(numbers, target, partial=[]):</span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true"></a>    s = sum(partial)</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true"></a></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true"></a></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true"></a><span class="er"># check if the partial sum is equals to target</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true"></a>    <span class="cf">if</span> s == target: </span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true"></a>        print <span class="st">&quot;sum(%s)=%s&quot;</span> % (partial, target)</span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true"></a>    <span class="cf">if</span> s &gt;= target:</span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true"></a>        <span class="cf">return</span></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true"></a><span class="pp"># if we reach the number why bother to continue</span></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true"></a></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true"></a>    <span class="cf">for</span> i in range(len(numbers)):</span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true"></a>        n = numbers[i]</span>
<span id="cb143-14"><a href="#cb143-14" aria-hidden="true"></a>        remaining = numbers[i+<span class="dv">1</span>:]</span>
<span id="cb143-15"><a href="#cb143-15" aria-hidden="true"></a>        subset_sum(remaining, target, partial + [n]) </span>
<span id="cb143-16"><a href="#cb143-16" aria-hidden="true"></a></span>
<span id="cb143-17"><a href="#cb143-17" aria-hidden="true"></a></span>
<span id="cb143-18"><a href="#cb143-18" aria-hidden="true"></a><span class="cf">if</span> __name__ == <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb143-19"><a href="#cb143-19" aria-hidden="true"></a>    subset_sum([<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">10</span>],<span class="dv">15</span>)</span>
<span id="cb143-20"><a href="#cb143-20" aria-hidden="true"></a></span>
<span id="cb143-21"><a href="#cb143-21" aria-hidden="true"></a></span>
<span id="cb143-22"><a href="#cb143-22" aria-hidden="true"></a><span class="er">#Outputs:</span></span>
<span id="cb143-23"><a href="#cb143-23" aria-hidden="true"></a></span>
<span id="cb143-24"><a href="#cb143-24" aria-hidden="true"></a><span class="er">#sum([3, 8, 4])=15</span></span>
<span id="cb143-25"><a href="#cb143-25" aria-hidden="true"></a></span>
<span id="cb143-26"><a href="#cb143-26" aria-hidden="true"></a><span class="er">#sum([3, 5, 7])=15</span></span>
<span id="cb143-27"><a href="#cb143-27" aria-hidden="true"></a></span>
<span id="cb143-28"><a href="#cb143-28" aria-hidden="true"></a><span class="er">#sum([8, 7])=15</span></span>
<span id="cb143-29"><a href="#cb143-29" aria-hidden="true"></a></span>
<span id="cb143-30"><a href="#cb143-30" aria-hidden="true"></a><span class="er">#sum([5, 10])=15</span></span></code></pre></div>
<p>This type of algorithms are very well explained in the following <a href="http://www.youtube.com/watch?v=NdF1QDTRkck" rel="noreferrer">Standford’s Abstract Programming lecture</a> - this video is very recommendable to understand how recursion works to generate permutations of solutions.</p>
<p><strong>Edit</strong></p>
<p>The above as a generator function, making it a bit more useful. Requires Python 3.3+ because of <code>yield from</code>.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true"></a>def subset_sum(numbers, target, partial=[], partial_sum=<span class="dv">0</span>):</span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true"></a>    <span class="cf">if</span> partial_sum == target:</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true"></a>        yield partial</span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true"></a>    <span class="cf">if</span> partial_sum &gt;= target:</span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true"></a>        <span class="cf">return</span></span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true"></a>    <span class="cf">for</span> i, n in enumerate(numbers):</span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true"></a>        remaining = numbers[i + <span class="dv">1</span>:]</span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true"></a>        yield from subset_sum(remaining, target, partial + [n], partial_sum + n)</span></code></pre></div>
<p>Here is the Java version of the same algorithm:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true"></a>package tmp;</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true"></a></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true"></a>import java.util.ArrayList;</span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true"></a>import java.util.Arrays;</span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true"></a></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true"></a>class SumSet {</span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true"></a>    <span class="dt">static</span> <span class="dt">void</span> sum_up_recursive(ArrayList&lt;Integer&gt; numbers, <span class="dt">int</span> target, ArrayList&lt;Integer&gt; partial) {</span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true"></a>       <span class="dt">int</span> s = <span class="dv">0</span>;</span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true"></a>       <span class="cf">for</span> (<span class="dt">int</span> x: partial) s += x;</span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true"></a>       <span class="cf">if</span> (s == target)</span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true"></a>            System.out.println(<span class="st">&quot;sum(&quot;</span>+Arrays.toString(partial.toArray())+<span class="st">&quot;)=&quot;</span>+target);</span>
<span id="cb145-12"><a href="#cb145-12" aria-hidden="true"></a>       <span class="cf">if</span> (s &gt;= target)</span>
<span id="cb145-13"><a href="#cb145-13" aria-hidden="true"></a>            <span class="cf">return</span>;</span>
<span id="cb145-14"><a href="#cb145-14" aria-hidden="true"></a>       <span class="cf">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;numbers.size();i++) {</span>
<span id="cb145-15"><a href="#cb145-15" aria-hidden="true"></a>             ArrayList&lt;Integer&gt; remaining = new ArrayList&lt;Integer&gt;();</span>
<span id="cb145-16"><a href="#cb145-16" aria-hidden="true"></a>             <span class="dt">int</span> n = numbers.get(i);</span>
<span id="cb145-17"><a href="#cb145-17" aria-hidden="true"></a>             <span class="cf">for</span> (<span class="dt">int</span> j=i+<span class="dv">1</span>; j&lt;numbers.size();j++) remaining.add(numbers.get(j));</span>
<span id="cb145-18"><a href="#cb145-18" aria-hidden="true"></a>             ArrayList&lt;Integer&gt; partial_rec = new ArrayList&lt;Integer&gt;(partial);</span>
<span id="cb145-19"><a href="#cb145-19" aria-hidden="true"></a>             partial_rec.add(n);</span>
<span id="cb145-20"><a href="#cb145-20" aria-hidden="true"></a>             sum_up_recursive(remaining,target,partial_rec);</span>
<span id="cb145-21"><a href="#cb145-21" aria-hidden="true"></a>       }</span>
<span id="cb145-22"><a href="#cb145-22" aria-hidden="true"></a>    }</span>
<span id="cb145-23"><a href="#cb145-23" aria-hidden="true"></a>    <span class="dt">static</span> <span class="dt">void</span> sum_up(ArrayList&lt;Integer&gt; numbers, <span class="dt">int</span> target) {</span>
<span id="cb145-24"><a href="#cb145-24" aria-hidden="true"></a>        sum_up_recursive(numbers,target,new ArrayList&lt;Integer&gt;());</span>
<span id="cb145-25"><a href="#cb145-25" aria-hidden="true"></a>    }</span>
<span id="cb145-26"><a href="#cb145-26" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">void</span> main(String args[]) {</span>
<span id="cb145-27"><a href="#cb145-27" aria-hidden="true"></a>        Integer[] numbers = {<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">10</span>};</span>
<span id="cb145-28"><a href="#cb145-28" aria-hidden="true"></a>        <span class="dt">int</span> target = <span class="dv">15</span>;</span>
<span id="cb145-29"><a href="#cb145-29" aria-hidden="true"></a>        sum_up(new ArrayList&lt;Integer&gt;(Arrays.asList(numbers)),target);</span>
<span id="cb145-30"><a href="#cb145-30" aria-hidden="true"></a>    }</span>
<span id="cb145-31"><a href="#cb145-31" aria-hidden="true"></a>}</span></code></pre></div>
<p>It is exactly the same heuristic. My Java is a bit rusty but I think is easy to understand.</p>
<p><strong>C # conversion of Java solution:</strong> <em>(by <span class="citation" data-cites="JeremyThompson">@JeremyThompson</span>)</em></p>
<div class="sourceCode" id="cb146"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true"></a>public <span class="dt">static</span> <span class="dt">void</span> Main(string[] args)</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true"></a>{</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true"></a>    List&lt;<span class="dt">int</span>&gt; numbers = new List&lt;<span class="dt">int</span>&gt;() { <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">10</span> };</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true"></a>    <span class="dt">int</span> target = <span class="dv">15</span>;</span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true"></a>    sum_up(numbers, target);</span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true"></a>}</span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true"></a></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true"></a>private <span class="dt">static</span> <span class="dt">void</span> sum_up(List&lt;<span class="dt">int</span>&gt; numbers, <span class="dt">int</span> target)</span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true"></a>{</span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true"></a>    sum_up_recursive(numbers, target, new List&lt;<span class="dt">int</span>&gt;());</span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true"></a>}</span>
<span id="cb146-12"><a href="#cb146-12" aria-hidden="true"></a></span>
<span id="cb146-13"><a href="#cb146-13" aria-hidden="true"></a>private <span class="dt">static</span> <span class="dt">void</span> sum_up_recursive(List&lt;<span class="dt">int</span>&gt; numbers, <span class="dt">int</span> target, List&lt;<span class="dt">int</span>&gt; partial)</span>
<span id="cb146-14"><a href="#cb146-14" aria-hidden="true"></a>{</span>
<span id="cb146-15"><a href="#cb146-15" aria-hidden="true"></a>    <span class="dt">int</span> s = <span class="dv">0</span>;</span>
<span id="cb146-16"><a href="#cb146-16" aria-hidden="true"></a>    foreach (<span class="dt">int</span> x in partial) s += x;</span>
<span id="cb146-17"><a href="#cb146-17" aria-hidden="true"></a></span>
<span id="cb146-18"><a href="#cb146-18" aria-hidden="true"></a>    <span class="cf">if</span> (s == target)</span>
<span id="cb146-19"><a href="#cb146-19" aria-hidden="true"></a>        Console.WriteLine(<span class="st">&quot;sum(&quot;</span> + string.Join(<span class="st">&quot;,&quot;</span>, partial.ToArray()) + <span class="st">&quot;)=&quot;</span> + target);</span>
<span id="cb146-20"><a href="#cb146-20" aria-hidden="true"></a></span>
<span id="cb146-21"><a href="#cb146-21" aria-hidden="true"></a>    <span class="cf">if</span> (s &gt;= target)</span>
<span id="cb146-22"><a href="#cb146-22" aria-hidden="true"></a>        <span class="cf">return</span>;</span>
<span id="cb146-23"><a href="#cb146-23" aria-hidden="true"></a></span>
<span id="cb146-24"><a href="#cb146-24" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; numbers.Count; i++)</span>
<span id="cb146-25"><a href="#cb146-25" aria-hidden="true"></a>    {</span>
<span id="cb146-26"><a href="#cb146-26" aria-hidden="true"></a>        List&lt;<span class="dt">int</span>&gt; remaining = new List&lt;<span class="dt">int</span>&gt;();</span>
<span id="cb146-27"><a href="#cb146-27" aria-hidden="true"></a>        <span class="dt">int</span> n = numbers[i];</span>
<span id="cb146-28"><a href="#cb146-28" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> j = i + <span class="dv">1</span>; j &lt; numbers.Count; j++) remaining.Add(numbers[j]);</span>
<span id="cb146-29"><a href="#cb146-29" aria-hidden="true"></a></span>
<span id="cb146-30"><a href="#cb146-30" aria-hidden="true"></a>        List&lt;<span class="dt">int</span>&gt; partial_rec = new List&lt;<span class="dt">int</span>&gt;(partial);</span>
<span id="cb146-31"><a href="#cb146-31" aria-hidden="true"></a>        partial_rec.Add(n);</span>
<span id="cb146-32"><a href="#cb146-32" aria-hidden="true"></a>        sum_up_recursive(remaining, target, partial_rec);</span>
<span id="cb146-33"><a href="#cb146-33" aria-hidden="true"></a>    }</span>
<span id="cb146-34"><a href="#cb146-34" aria-hidden="true"></a>}</span></code></pre></div>
<p><strong>Ruby solution:</strong> <em>(by <span class="citation" data-cites="emaillenin">@emaillenin</span>)</em></p>
<div class="sourceCode" id="cb147"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true"></a>def subset_sum(numbers, target, partial=[])</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true"></a>  s = partial.inject <span class="dv">0</span>, :+</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true"></a></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true"></a><span class="er"># check if the partial sum is equals to target</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true"></a></span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true"></a>  puts <span class="st">&quot;sum(</span></span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true"></a><span class="er">#{partial})=#{target}&quot; if s == target</span></span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true"></a></span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true"></a>  <span class="cf">return</span> <span class="cf">if</span> s &gt;= target</span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true"></a><span class="pp"># if we reach the number why bother to continue</span></span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true"></a></span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true"></a>  (<span class="fl">0.</span><span class="er">.</span>(numbers.length - <span class="dv">1</span>)).each <span class="cf">do</span> |i|</span>
<span id="cb147-13"><a href="#cb147-13" aria-hidden="true"></a>    n = numbers[i]</span>
<span id="cb147-14"><a href="#cb147-14" aria-hidden="true"></a>    remaining = numbers.drop(i+<span class="dv">1</span>)</span>
<span id="cb147-15"><a href="#cb147-15" aria-hidden="true"></a>    subset_sum(remaining, target, partial + [n])</span>
<span id="cb147-16"><a href="#cb147-16" aria-hidden="true"></a>  end</span>
<span id="cb147-17"><a href="#cb147-17" aria-hidden="true"></a>end</span>
<span id="cb147-18"><a href="#cb147-18" aria-hidden="true"></a></span>
<span id="cb147-19"><a href="#cb147-19" aria-hidden="true"></a>subset_sum([<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">10</span>],<span class="dv">15</span>)</span></code></pre></div>
<p><strong>Edit: complexity discussion</strong></p>
<p>As others mention this is an <a href="http://en.wikipedia.org/wiki/Subset_sum_problem" rel="noreferrer">NP-hard problem</a>. It can be solved in exponential time O(2^n), for instance for n=10 there will be 1024 possible solutions. If the targets you are trying to reach are in a low range then this algorithm works. So for instance:</p>
<p><code>subset_sum([1,2,3,4,5,6,7,8,9,10],100000)</code> generates 1024 branches because the target never gets to filter out possible solutions.</p>
<p>On the other hand <code>subset_sum([1,2,3,4,5,6,7,8,9,10],10)</code> generates only 175 branches, because the target to reach <code>10</code> gets to filter out many combinations.</p>
<p>If <code>N</code> and <code>Target</code> are big numbers one should move into an approximate version of the solution.</p>
</section>
<section id="answer-2-score-31" class="level4">
<h4>Answer 2 (score 31)</h4>
<p>In <a href="http://haskell.org/" rel="noreferrer">Haskell</a>:</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true"></a>filter ((==) <span class="dv">12345</span> . sum) $ subsequences [<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">22</span>,<span class="dv">15</span>,<span class="dv">0</span>,..]</span></code></pre></div>
<p>And <a href="http://jsoftware.com/" rel="noreferrer">J</a>:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true"></a>(]</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true"></a><span class="er">#~12345=+/@&gt;)(]&lt;@#~[:#:@i.2^#)1 5 22 15 0 ...</span></span></code></pre></div>
<p>As you may notice, both take the same approach and divide the problem into two parts: generate each member of the power set, and check each member’s sum to the target.</p>
<p>There are other solutions but this is the most straightforward.</p>
<p>Do you need help with either one, or finding a different approach?</p>
</section>
<section id="answer-3-score-31" class="level4">
<h4>Answer 3 (score 31)</h4>
<p>In <a href="http://haskell.org/" rel="noreferrer">Haskell</a>:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true"></a>filter ((==) <span class="dv">12345</span> . sum) $ subsequences [<span class="dv">1</span>,<span class="dv">5</span>,<span class="dv">22</span>,<span class="dv">15</span>,<span class="dv">0</span>,..]</span></code></pre></div>
<p>And <a href="http://jsoftware.com/" rel="noreferrer">J</a>:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true"></a>(]</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true"></a><span class="er">#~12345=+/@&gt;)(]&lt;@#~[:#:@i.2^#)1 5 22 15 0 ...</span></span></code></pre></div>
<p>As you may notice, both take the same approach and divide the problem into two parts: generate each member of the power set, and check each member’s sum to the target.</p>
<p>There are other solutions but this is the most straightforward.</p>
<p>Do you need help with either one, or finding a different approach?</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="fast-way-to-copy-one-vector-into-another-score-317328-in-2016" class="level3">
<h3>22: fast way to copy one vector into another (score <a href="https://stackoverflow.com/q/644673.html">317328</a> in 2016)</h3>
<section id="question-21" class="level4">
<h4>Question</h4>
<p>I prefer two ways:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true"></a><span class="dt">void</span> copyVecFast(<span class="dt">const</span> vec&lt;<span class="dt">int</span>&gt;&amp; original)</span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true"></a>{</span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true"></a>  vector&lt;<span class="dt">int</span>&gt; newVec;</span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true"></a>  newVec.reserve(original.size());</span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true"></a>  copy(original.begin(),original.end(),back_inserter(newVec));</span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true"></a>}</span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true"></a></span>
<span id="cb152-8"><a href="#cb152-8" aria-hidden="true"></a><span class="dt">void</span> copyVecFast(vec&lt;<span class="dt">int</span>&gt;&amp; original)</span>
<span id="cb152-9"><a href="#cb152-9" aria-hidden="true"></a>{</span>
<span id="cb152-10"><a href="#cb152-10" aria-hidden="true"></a></span>
<span id="cb152-11"><a href="#cb152-11" aria-hidden="true"></a>  vector&lt;<span class="dt">int</span>&gt; newVec;</span>
<span id="cb152-12"><a href="#cb152-12" aria-hidden="true"></a>  newVec.swap(original); </span>
<span id="cb152-13"><a href="#cb152-13" aria-hidden="true"></a>}</span></code></pre></div>
<p>How do you do it?</p>
</section>
<section id="answer-accepted-score-112" class="level4">
<h4>Answer accepted (score 112)</h4>
<p>Your second example does not work if you send the argument by reference. Did you mean</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true"></a><span class="dt">void</span> copyVecFast(vec&lt;<span class="dt">int</span>&gt; original) <span class="co">// no reference</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true"></a>{</span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true"></a></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true"></a>  vector&lt;<span class="dt">int</span>&gt; new_;</span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true"></a>  new_.swap(original); </span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true"></a>}</span></code></pre></div>
<p>That would work, but an easier way is</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true"></a>vector&lt;<span class="dt">int</span>&gt; new_(original);</span></code></pre></div>
</section>
<section id="answer-2-score-227" class="level4">
<h4>Answer 2 (score 227)</h4>
<p>They aren’t the same though, are they? <em>One is a copy, the other is a swap</em>. Hence the function names.</p>
<p>My favourite is:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true"></a>a = b;</span></code></pre></div>
<p>Where <code>a</code> and <code>b</code> are vectors.</p>
</section>
<section id="answer-3-score-67" class="level4">
<h4>Answer 3 (score 67)</h4>
<p>This is another valid way to make a copy of a vector, just use its constructor:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true"></a>std::vector&lt;<span class="dt">int</span>&gt; newvector(oldvector);</span></code></pre></div>
<p>This is even simpler than using <code>std::copy</code> to walk the entire vector from start to finish to <code>std::back_insert</code> them into the new vector.</p>
<p>That being said, your <code>.swap()</code> one is not a copy, instead it swaps the two vectors. You would modify the original to not contain anything anymore! Which is not a copy.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="which-is-the-fastest-algorithm-to-find-prime-numbers-score-295053-in-2015" class="level3">
<h3>23: Which is the fastest algorithm to find prime numbers? (score <a href="https://stackoverflow.com/q/453793.html">295053</a> in 2015)</h3>
<section id="question-22" class="level4">
<h4>Question</h4>
<p>Which is the fastest algorithm to find out prime numbers using C++? I have used sieve’s algorithm but I still want it to be faster!</p>
</section>
<section id="answer-2-score-73-1" class="level4">
<h4>Answer 2 (score 73)</h4>
<p>A very fast implementation of the <a href="http://en.wikipedia.org/wiki/Sieve_of_Atkin" rel="noreferrer">Sieve of Atkin</a> is Dan Bernstein’s <a href="http://cr.yp.to/primegen.html" rel="noreferrer">primegen</a>. This sieve is more efficient than the <a href="http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes" rel="noreferrer">Sieve of Eratosthenes</a>. His page has some benchmark information.</p>
</section>
<section id="answer-3-score-27" class="level4">
<h4>Answer 3 (score 27)</h4>
<p>
If it has to be really fast you can include a list of primes:<br /> <a href="http://www.bigprimes.net/archive/prime/" rel="nofollow noreferrer">http://www.bigprimes.net/archive/prime/</a>
</p>
<p>If you just have to know if a certain number is a prime number, there are various <a href="http://en.wikipedia.org/wiki/Primality_test" rel="nofollow noreferrer">prime tests listed on wikipedia</a>. They are probably the fastest method to determine if large numbers are primes, especially because they can tell you if a number is <em>not</em> a prime.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-difference-between-linear-search-and-binary-search-score-293714-in-2019" class="level3">
<h3>24: What is the difference between Linear search and Binary search? (score <a href="https://stackoverflow.com/q/700241.html">293714</a> in 2019)</h3>
<section id="question-23" class="level4">
<h4>Question</h4>
<p>What is the difference between Linear search and Binary search?</p>
</section>
<section id="answer-2-score-112" class="level4">
<h4>Answer 2 (score 112)</h4>
<p>A <a href="http://en.wikipedia.org/wiki/Linear_search" rel="noreferrer">linear search</a> looks down a list, one item at a time, without jumping. In complexity terms this is an <code>O(n)</code> search - the time taken to search the list gets bigger at the same rate as the list does.</p>
<p>A <a href="http://en.wikipedia.org/wiki/Binary_search" rel="noreferrer">binary search</a> is when you start with the middle of a sorted list, and see whether that’s greater than or less than the value you’re looking for, which determines whether the value is in the first or second half of the list. Jump to the half way through the sublist, and compare again etc. This is pretty much how humans typically look up a word in a dictionary (although we use better heuristics, obviously - if you’re looking for “cat” you don’t start off at “M”). In complexity terms this is an <code>O(log n)</code> search - the number of search operations grows more slowly than the list does, because you’re halving the “search space” with each operation.</p>
<p>As an example, suppose you were looking for U in an A-Z list of letters (index 0-25; we’re looking for the value at index 20).</p>
<p>A linear search would ask:</p>
<blockquote>
<p>
<code>list[0] == 'U'</code>? No.<br/> <code>list[1] == 'U'</code>? No.<br/> <code>list[2] == 'U'</code>? No.<br/> <code>list[3] == 'U'</code>? No.<br/> <code>list[4] == 'U'</code>? No.<br/> <code>list[5] == 'U'</code>? No.<br/> … <code>list[20] == 'U'</code>? Yes. Finished.
</p>
</blockquote>
<p>The binary search would ask:</p>
<blockquote>
<p>
Compare <code>list[12]</code> (‘M’) with ‘U’: Smaller, look further on. (Range=13-25)<br/> Compare <code>list[19]</code> (‘T’) with ‘U’: Smaller, look further on. (Range=20-25)<br/> Compare <code>list[22]</code> (‘W’) with ‘U’: Bigger, look earlier. (Range=20-21)<br/> Compare <code>list[20]</code> (‘U’) with ‘U’: Found it! Finished.<br/>
</p>
</blockquote>
<p>Comparing the two:</p>
<ul>
<li>
Binary search requires the input data to be sorted; linear search doesn’t
</li>
<li>
Binary search requires an <em>ordering</em> comparison; linear search only requires equality comparisons
</li>
<li>
Binary search has complexity O(log n); linear search has complexity O(n) as discussed earlier
</li>
<li>
Binary search requires random access to the data; linear search only requires sequential access (this can be very important - it means a linear search can <em>stream</em> data of arbitrary size)
</li>
</ul>
</section>
<section id="answer-3-score-61" class="level4">
<h4>Answer 3 (score 61)</h4>
<p>Think of it as two different ways of finding your way in a phonebook. A linear search is starting at the beginning, reading every name until you find what you’re looking for. A binary search, on the other hand, is when you open the book (usually in the middle), look at the name on top of the page, and decide if the name you’re looking for is bigger or smaller than the one you’re looking for. If the name you’re looking for is bigger, then you continue searching the upper part of the book in this very fashion.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-you-rotate-a-two-dimensional-array-score-288099-in-2016" class="level3">
<h3>25: How do you rotate a two dimensional array? (score <a href="https://stackoverflow.com/q/42519.html">288099</a> in 2016)</h3>
<section id="question-24" class="level4">
<h4>Question</h4>
<p>Inspired by <a href="http://blogs.msdn.com/oldnewthing/archive/2008/09/02/8918130.aspx" rel="noreferrer">Raymond Chen’s post</a>, say you have a 4x4 two dimensional array, write a function that rotates it 90 degrees. Raymond links to a solution in pseudo code, but I’d like to see some real world stuff.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true"></a>[<span class="dv">1</span>][<span class="dv">2</span>][<span class="dv">3</span>][<span class="dv">4</span>]</span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true"></a>[<span class="dv">5</span>][<span class="dv">6</span>][<span class="dv">7</span>][<span class="dv">8</span>]</span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true"></a>[<span class="dv">9</span>][<span class="dv">0</span>][<span class="dv">1</span>][<span class="dv">2</span>]</span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true"></a>[<span class="dv">3</span>][<span class="dv">4</span>][<span class="dv">5</span>][<span class="dv">6</span>]</span></code></pre></div>
<p>Becomes:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true"></a>[<span class="dv">3</span>][<span class="dv">9</span>][<span class="dv">5</span>][<span class="dv">1</span>]</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true"></a>[<span class="dv">4</span>][<span class="dv">0</span>][<span class="dv">6</span>][<span class="dv">2</span>]</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true"></a>[<span class="dv">5</span>][<span class="dv">1</span>][<span class="dv">7</span>][<span class="dv">3</span>]</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true"></a>[<span class="dv">6</span>][<span class="dv">2</span>][<span class="dv">8</span>][<span class="dv">4</span>]</span></code></pre></div>
<p><strong>Update</strong>: Nick’s answer is the most straightforward, but is there a way to do it better than n^2? What if the matrix was 10000x10000?</p>
</section>
<section id="answer-accepted-score-137" class="level4">
<h4>Answer accepted (score 137)</h4>
<p>Here it is in C #</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true"></a><span class="dt">int</span>[,] array = new <span class="dt">int</span>[<span class="dv">4</span>,<span class="dv">4</span>] {</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true"></a>    { <span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span> },</span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true"></a>    { <span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span> },</span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true"></a>    { <span class="dv">9</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span> },</span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true"></a>    { <span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span> }</span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true"></a>};</span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true"></a></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true"></a><span class="dt">int</span>[,] rotated = RotateMatrix(array, <span class="dv">4</span>);</span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true"></a></span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true"></a><span class="dt">static</span> <span class="dt">int</span>[,] RotateMatrix(<span class="dt">int</span>[,] matrix, <span class="dt">int</span> n) {</span>
<span id="cb159-11"><a href="#cb159-11" aria-hidden="true"></a>    <span class="dt">int</span>[,] ret = new <span class="dt">int</span>[n, n];</span>
<span id="cb159-12"><a href="#cb159-12" aria-hidden="true"></a></span>
<span id="cb159-13"><a href="#cb159-13" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; n; ++i) {</span>
<span id="cb159-14"><a href="#cb159-14" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; n; ++j) {</span>
<span id="cb159-15"><a href="#cb159-15" aria-hidden="true"></a>            ret[i, j] = matrix[n - j - <span class="dv">1</span>, i];</span>
<span id="cb159-16"><a href="#cb159-16" aria-hidden="true"></a>        }</span>
<span id="cb159-17"><a href="#cb159-17" aria-hidden="true"></a>    }</span>
<span id="cb159-18"><a href="#cb159-18" aria-hidden="true"></a></span>
<span id="cb159-19"><a href="#cb159-19" aria-hidden="true"></a>    <span class="cf">return</span> ret;</span>
<span id="cb159-20"><a href="#cb159-20" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-375" class="level4">
<h4>Answer 2 (score 375)</h4>
<p><strong>O(n^2) time and O(1) space algorithm</strong> ( without any workarounds and hanky-panky stuff! )</p>
<p><strong>Rotate by +90:</strong></p>
<ol>
<li>
Transpose
</li>
<li>
Reverse each row
</li>
</ol>
<p><strong>Rotate by -90:</strong></p>
<p><em>Method 1 :</em></p>
<ol>
<li>
Transpose
</li>
<li>
Reverse each column
</li>
</ol>
<p><em>Method 2 :</em></p>
<ol>
<li>
Reverse each row
</li>
<li>
Transpose
</li>
</ol>
<p><strong>Rotate by +180:</strong></p>
<p><em>Method 1</em>: Rotate by +90 twice</p>
<p><em>Method 2</em>: Reverse each row and then reverse each column (Transpose)</p>
<p><strong>Rotate by -180:</strong></p>
<p><em>Method 1</em>: Rotate by -90 twice</p>
<p><em>Method 2</em>: Reverse each column and then reverse each row</p>
<p><em>Method 3</em>: Rotate by +180 as they are same</p>
</section>
<section id="answer-3-score-167" class="level4">
<h4>Answer 3 (score 167)</h4>
<p>I’d like to add a little more detail. In this answer, key concepts are repeated, the pace is slow and intentionally repetitive. The solution provided here is not the most syntactically compact, it is however, intended for those who wish to learn what matrix rotation is and the resulting implementation.</p>
<p>Firstly, what is a matrix? For the purposes of this answer, a matrix is just a grid where the width and height are the same. Note, the width and height of a matrix can be different, but for simplicity, this tutorial considers only matrices with equal width and height (<em>square matrices</em>). And yes, <em>matrices</em> is the plural of matrix.</p>
<p>Example matrices are: 2×2, 3×3 or 5×5. Or, more generally, N×N. A 2×2 matrix will have 4 squares because 2×2=4. A 5×5 matrix will have 25 squares because 5×5=25. Each square is called an element or entry. We’ll represent each element with a period (<code>.</code>) in the diagrams below:</p>
<p>2×2 matrix</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true"></a>. .</span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true"></a>. .</span></code></pre></div>
<p>3×3 matrix</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true"></a>. . .</span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true"></a>. . .</span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true"></a>. . .</span></code></pre></div>
<p>4×4 matrix</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true"></a>. . . .</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true"></a>. . . .</span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true"></a>. . . .</span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true"></a>. . . .</span></code></pre></div>
<p>So, what does it mean to rotate a matrix? Let’s take a 2×2 matrix and put some numbers in each element so the rotation can be observed:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true"></a><span class="dv">0</span> <span class="dv">1</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true"></a><span class="dv">2</span> <span class="dv">3</span></span></code></pre></div>
<p>Rotating this by 90 degrees gives us:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true"></a><span class="dv">2</span> <span class="dv">0</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true"></a><span class="dv">3</span> <span class="dv">1</span></span></code></pre></div>
<p>We literally turned the whole matrix once to the right just like turning the steering wheel of a car. It may help to think of “tipping” the matrix onto its right side. We want to write a function, in Python, that takes a matrix and rotates in once to the right. The function signature will be:</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true"></a>def rotate(matrix):</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true"></a></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true"></a><span class="er"># Algorithm goes here.</span></span></code></pre></div>
<p>The matrix will be defined using a two-dimensional array:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true"></a>matrix = [</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true"></a>    [<span class="dv">0</span>,<span class="dv">1</span>],</span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true"></a>    [<span class="dv">2</span>,<span class="dv">3</span>]</span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true"></a>]</span></code></pre></div>
<p>Therefore the first index position accesses the row. The second index position accesses the column:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true"></a>matrix[row][column]</span></code></pre></div>
<p>We’ll define a utility function to print a matrix.</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true"></a>def print_matrix(matrix):</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true"></a>    <span class="cf">for</span> row in matrix:</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true"></a>        print row</span></code></pre></div>
<p>One method of rotating a matrix is to do it a layer at a time. But what is a layer? Think of an onion. Just like the layers of an onion, as each layer is removed, we move towards the center. Other analogies is a <a href="https://en.wikipedia.org/wiki/Matryoshka_doll" rel="noreferrer">Matryoshka doll</a> or a game of pass-the-parcel.</p>
<p>The width and height of a matrix dictate the number of layers in that matrix. Let’s use different symbols for each layer:</p>
<p>A 2×2 matrix has 1 layer</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true"></a>. .</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true"></a>. .</span></code></pre></div>
<p>A 3×3 matrix has 2 layers</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true"></a>. . .</span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true"></a>. x .</span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true"></a>. . .</span></code></pre></div>
<p>A 4×4 matrix has 2 layers</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true"></a>. . . .</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true"></a>. x x .</span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true"></a>. x x .</span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true"></a>. . . .</span></code></pre></div>
<p>A 5×5 matrix has 3 layers</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true"></a>. . . . .</span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true"></a>. x x x .</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true"></a>. x O x .</span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true"></a>. x x x .</span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true"></a>. . . . .</span></code></pre></div>
<p>A 6×6 matrix has 3 layers</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true"></a>. . . . . .</span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true"></a>. x x x x .</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true"></a>. x O O x .</span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true"></a>. x O O x .</span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true"></a>. x x x x .</span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true"></a>. . . . . .</span></code></pre></div>
<p>A 7×7 matrix has 4 layers</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true"></a>. . . . . . .</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true"></a>. x x x x x .</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true"></a>. x O O O x .</span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true"></a>. x O - O x .</span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true"></a>. x O O O x .</span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true"></a>. x x x x x .</span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true"></a>. . . . . . .</span></code></pre></div>
<p>You may notice that incrementing the width and height of a matrix by one, does not always increase the number of layers. Taking the above matrices and tabulating the layers and dimensions, we see the number of layers increases once for every two increments of width and height:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true"></a>+-----+--------+</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true"></a>| N×N | Layers |</span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true"></a>+-----+--------+</span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true"></a>| <span class="dv">1</span>×<span class="dv">1</span> |      <span class="dv">1</span> |</span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true"></a>| <span class="dv">2</span>×<span class="dv">2</span> |      <span class="dv">1</span> |</span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true"></a>| <span class="dv">3</span>×<span class="dv">3</span> |      <span class="dv">2</span> |</span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true"></a>| <span class="dv">4</span>×<span class="dv">4</span> |      <span class="dv">2</span> |</span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true"></a>| <span class="dv">5</span>×<span class="dv">5</span> |      <span class="dv">3</span> |</span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true"></a>| <span class="dv">6</span>×<span class="dv">6</span> |      <span class="dv">3</span> |</span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true"></a>| <span class="dv">7</span>×<span class="dv">7</span> |      <span class="dv">4</span> |</span>
<span id="cb175-11"><a href="#cb175-11" aria-hidden="true"></a>+-----+--------+</span></code></pre></div>
<p>However, not all layers need rotating. A 1×1 matrix is the same before and after rotation. The central 1×1 layer is always the same before and after rotation no matter how large the overall matrix:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true"></a>+-----+--------+------------------+</span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true"></a>| N×N | Layers | Rotatable Layers |</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true"></a>+-----+--------+------------------+</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true"></a>| <span class="dv">1</span>×<span class="dv">1</span> |      <span class="dv">1</span> |                <span class="dv">0</span> |</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true"></a>| <span class="dv">2</span>×<span class="dv">2</span> |      <span class="dv">1</span> |                <span class="dv">1</span> |</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true"></a>| <span class="dv">3</span>×<span class="dv">3</span> |      <span class="dv">2</span> |                <span class="dv">1</span> |</span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true"></a>| <span class="dv">4</span>×<span class="dv">4</span> |      <span class="dv">2</span> |                <span class="dv">2</span> |</span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true"></a>| <span class="dv">5</span>×<span class="dv">5</span> |      <span class="dv">3</span> |                <span class="dv">2</span> |</span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true"></a>| <span class="dv">6</span>×<span class="dv">6</span> |      <span class="dv">3</span> |                <span class="dv">3</span> |</span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true"></a>| <span class="dv">7</span>×<span class="dv">7</span> |      <span class="dv">4</span> |                <span class="dv">3</span> |</span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true"></a>+-----+--------+------------------+</span></code></pre></div>
<p>Given N×N matrix, how can we programmatically determine the number of layers we need to rotate? If we divide the width or height by two and ignore the remainder we get the following results.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true"></a>+-----+--------+------------------+---------+</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true"></a>| N×N | Layers | Rotatable Layers |   N/<span class="dv">2</span>   |</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true"></a>+-----+--------+------------------+---------+</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true"></a>| <span class="dv">1</span>×<span class="dv">1</span> |      <span class="dv">1</span> |                <span class="dv">0</span> | <span class="dv">1</span>/<span class="dv">2</span> = <span class="dv">0</span> |</span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true"></a>| <span class="dv">2</span>×<span class="dv">2</span> |      <span class="dv">1</span> |                <span class="dv">1</span> | <span class="dv">2</span>/<span class="dv">2</span> = <span class="dv">1</span> |</span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true"></a>| <span class="dv">3</span>×<span class="dv">3</span> |      <span class="dv">2</span> |                <span class="dv">1</span> | <span class="dv">3</span>/<span class="dv">2</span> = <span class="dv">1</span> |</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true"></a>| <span class="dv">4</span>×<span class="dv">4</span> |      <span class="dv">2</span> |                <span class="dv">2</span> | <span class="dv">4</span>/<span class="dv">2</span> = <span class="dv">2</span> |</span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true"></a>| <span class="dv">5</span>×<span class="dv">5</span> |      <span class="dv">3</span> |                <span class="dv">2</span> | <span class="dv">5</span>/<span class="dv">2</span> = <span class="dv">2</span> |</span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true"></a>| <span class="dv">6</span>×<span class="dv">6</span> |      <span class="dv">3</span> |                <span class="dv">3</span> | <span class="dv">6</span>/<span class="dv">2</span> = <span class="dv">3</span> |</span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true"></a>| <span class="dv">7</span>×<span class="dv">7</span> |      <span class="dv">4</span> |                <span class="dv">3</span> | <span class="dv">7</span>/<span class="dv">2</span> = <span class="dv">3</span> |</span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true"></a>+-----+--------+------------------+---------+</span></code></pre></div>
<p>Notice how <code>N/2</code> matches the number of layers that need to be rotated? Sometimes the number of rotatable layers is one less the total number of layers in the matrix. This occurs when the innermost layer is formed of only one element (i.e. a 1×1 matrix) and therefore need not be rotated. It simply gets ignored.</p>
<p>We will undoubtedly need this information in our function to rotate a matrix, so let’s add it now:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true"></a>def rotate(matrix):</span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true"></a>    size = len(matrix)</span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true"></a></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true"></a><span class="er"># Rotatable layers only.</span></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true"></a>    layer_count = size / <span class="dv">2</span></span></code></pre></div>
<p>Now we know what layers are and how to determine the number of layers that actually need rotating, how do we isolate a single layer so we can rotate it? Firstly, we inspect a matrix from the outermost layer, inwards, to the innermost layer. A 5×5 matrix has three layers in total and two layers that need rotating:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true"></a>. . . . .</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true"></a>. x x x .</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true"></a>. x O x .</span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true"></a>. x x x .</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true"></a>. . . . .</span></code></pre></div>
<p>Let’s look at columns first. The position of the columns defining the outermost layer, assuming we count from 0, are 0 and 4:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true"></a>+--------+-----------+</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true"></a>| Column | <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> |</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true"></a>+--------+-----------+</span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true"></a>|        | . . . . . |</span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true"></a>|        | . x x x . |</span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true"></a>|        | . x O x . |</span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true"></a>|        | . x x x . |</span>
<span id="cb180-8"><a href="#cb180-8" aria-hidden="true"></a>|        | . . . . . |</span>
<span id="cb180-9"><a href="#cb180-9" aria-hidden="true"></a>+--------+-----------+</span></code></pre></div>
<p>0 and 4 are also the positions of the rows for the outermost layer.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true"></a>+-----+-----------+</span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true"></a>| Row |           |</span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true"></a>+-----+-----------+</span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true"></a>|   <span class="dv">0</span> | . . . . . |</span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true"></a>|   <span class="dv">1</span> | . x x x . |</span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true"></a>|   <span class="dv">2</span> | . x O x . |</span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true"></a>|   <span class="dv">3</span> | . x x x . |</span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true"></a>|   <span class="dv">4</span> | . . . . . |</span>
<span id="cb181-9"><a href="#cb181-9" aria-hidden="true"></a>+-----+-----------+</span></code></pre></div>
<p>This will always be the case since the width and height are the same. Therefore we can define the column and row positions of a layer with just two values (rather than four).</p>
<p>Moving inwards to the second layer, the position of the columns are 1 and 3. And, yes, you guessed it, it’s the same for rows. It’s important to understand we had to both increment and decrement the row and column positions when moving inwards to the next layer.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true"></a>+-----------+---------+---------+---------+</span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true"></a>|   Layer   |  Rows   | Columns | Rotate? |</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true"></a>+-----------+---------+---------+---------+</span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true"></a>| Outermost | <span class="dv">0</span> and <span class="dv">4</span> | <span class="dv">0</span> and <span class="dv">4</span> | Yes     |</span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true"></a>| Inner     | <span class="dv">1</span> and <span class="dv">3</span> | <span class="dv">1</span> and <span class="dv">3</span> | Yes     |</span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true"></a>| Innermost | <span class="dv">2</span>       | <span class="dv">2</span>       | No      |</span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true"></a>+-----------+---------+---------+---------+</span></code></pre></div>
<p>So, to inspect each layer, we want a loop with both increasing and decreasing counters that represent moving inwards, starting from the outermost layer. We’ll call this our ‘layer loop’.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true"></a>def rotate(matrix):</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true"></a>    size = len(matrix)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true"></a>    layer_count = size / <span class="dv">2</span></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true"></a></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true"></a>    <span class="cf">for</span> layer in range(<span class="dv">0</span>, layer_count):</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true"></a>        first = layer</span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true"></a>        last = size - first - <span class="dv">1</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true"></a>        print &#39;Layer %d: first: %d, last: %d&#39; % (layer, first, last)</span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true"></a></span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true"></a></span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true"></a><span class="pp"># 5x5 matrix</span></span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true"></a>matrix = [</span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true"></a>    [ <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb183-14"><a href="#cb183-14" aria-hidden="true"></a>    [ <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">9</span>],</span>
<span id="cb183-15"><a href="#cb183-15" aria-hidden="true"></a>    [<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="dv">14</span>],</span>
<span id="cb183-16"><a href="#cb183-16" aria-hidden="true"></a>    [<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>,<span class="dv">19</span>],</span>
<span id="cb183-17"><a href="#cb183-17" aria-hidden="true"></a>    [<span class="dv">20</span>,<span class="dv">21</span>,<span class="dv">22</span>,<span class="dv">23</span>,<span class="dv">24</span>]</span>
<span id="cb183-18"><a href="#cb183-18" aria-hidden="true"></a>]</span>
<span id="cb183-19"><a href="#cb183-19" aria-hidden="true"></a></span>
<span id="cb183-20"><a href="#cb183-20" aria-hidden="true"></a>rotate(matrix)</span></code></pre></div>
<p>The code above loops through the (row and column) positions of any layers that need rotating.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true"></a>Layer <span class="dv">0</span>: first: <span class="dv">0</span>, last: <span class="dv">4</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true"></a>Layer <span class="dv">1</span>: first: <span class="dv">1</span>, last: <span class="dv">3</span></span></code></pre></div>
<p>We now have a loop providing the positions of the rows and columns of each layer. The variables <code>first</code> and <code>last</code> identify the index position of the first and last rows and columns. Referring back to our row and column tables:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true"></a>+--------+-----------+</span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true"></a>| Column | <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> |</span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true"></a>+--------+-----------+</span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true"></a>|        | . . . . . |</span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true"></a>|        | . x x x . |</span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true"></a>|        | . x O x . |</span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true"></a>|        | . x x x . |</span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true"></a>|        | . . . . . |</span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true"></a>+--------+-----------+</span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true"></a></span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true"></a>+-----+-----------+</span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true"></a>| Row |           |</span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true"></a>+-----+-----------+</span>
<span id="cb185-14"><a href="#cb185-14" aria-hidden="true"></a>|   <span class="dv">0</span> | . . . . . |</span>
<span id="cb185-15"><a href="#cb185-15" aria-hidden="true"></a>|   <span class="dv">1</span> | . x x x . |</span>
<span id="cb185-16"><a href="#cb185-16" aria-hidden="true"></a>|   <span class="dv">2</span> | . x O x . |</span>
<span id="cb185-17"><a href="#cb185-17" aria-hidden="true"></a>|   <span class="dv">3</span> | . x x x . |</span>
<span id="cb185-18"><a href="#cb185-18" aria-hidden="true"></a>|   <span class="dv">4</span> | . . . . . |</span>
<span id="cb185-19"><a href="#cb185-19" aria-hidden="true"></a>+-----+-----------+</span></code></pre></div>
<p>So we can navigate through the layers of a matrix. Now we need a way of navigating within a layer so we can move elements around that layer. Note, elements never ‘jump’ from one layer to another, but they do move within their respective layers.</p>
<p>Rotating each element in a layer rotates the entire layer. Rotating all layers in a matrix rotates the entire matrix. This sentence is very important, so please try your best to understand it before moving on.</p>
<p>Now, we need a way of actually moving elements, i.e. rotate each element, and subsequently the layer, and ultimately the matrix. For simplicity, we’ll revert to a 3x3 matrix — that has one rotatable layer.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true"></a><span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true"></a><span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true"></a><span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span></span></code></pre></div>
<p>Our layer loop provides the indexes of the first and last columns, as well as first and last rows:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true"></a>+-----+-------+</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true"></a>| Col | <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> |</span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true"></a>+-----+-------+</span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true"></a>|     | <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> |</span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true"></a>|     | <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> |</span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true"></a>|     | <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> |</span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true"></a>+-----+-------+</span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true"></a></span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true"></a>+-----+-------+</span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true"></a>| Row |       |</span>
<span id="cb187-11"><a href="#cb187-11" aria-hidden="true"></a>+-----+-------+</span>
<span id="cb187-12"><a href="#cb187-12" aria-hidden="true"></a>|   <span class="dv">0</span> | <span class="dv">0</span> <span class="dv">1</span> <span class="dv">2</span> |</span>
<span id="cb187-13"><a href="#cb187-13" aria-hidden="true"></a>|   <span class="dv">1</span> | <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> |</span>
<span id="cb187-14"><a href="#cb187-14" aria-hidden="true"></a>|   <span class="dv">2</span> | <span class="dv">6</span> <span class="dv">7</span> <span class="dv">8</span> |</span>
<span id="cb187-15"><a href="#cb187-15" aria-hidden="true"></a>+-----+-------+</span></code></pre></div>
<p>Because our matrices are always square, we need just two variables, <code>first</code> and <code>last</code>, since index positions are the same for rows and columns.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true"></a>def rotate(matrix):</span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true"></a>    size = len(matrix)</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true"></a>    layer_count = size / <span class="dv">2</span></span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true"></a></span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true"></a></span>
<span id="cb188-6"><a href="#cb188-6" aria-hidden="true"></a><span class="er"># Our layer loop i=0, i=1, i=2</span></span>
<span id="cb188-7"><a href="#cb188-7" aria-hidden="true"></a>    <span class="cf">for</span> layer in range(<span class="dv">0</span>, layer_count):</span>
<span id="cb188-8"><a href="#cb188-8" aria-hidden="true"></a></span>
<span id="cb188-9"><a href="#cb188-9" aria-hidden="true"></a>        first = layer</span>
<span id="cb188-10"><a href="#cb188-10" aria-hidden="true"></a>        last = size - first - <span class="dv">1</span></span>
<span id="cb188-11"><a href="#cb188-11" aria-hidden="true"></a></span>
<span id="cb188-12"><a href="#cb188-12" aria-hidden="true"></a></span>
<span id="cb188-13"><a href="#cb188-13" aria-hidden="true"></a><span class="er"># We want to move within a layer here.</span></span></code></pre></div>
<p>The variables first and last can easily be used to reference the four corners of a matrix. This is because the corners themselves can be defined using various permutations of <code>first</code> and <code>last</code> (with no subtraction, addition or offset of those variables):</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true"></a>+---------------+-------------------+-------------+</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true"></a>| Corner        | Position          | <span class="dv">3</span><span class="er">x3</span> Values  |</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true"></a>+---------------+-------------------+-------------+</span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true"></a>| top left      | (first, first)    | (<span class="dv">0</span>,<span class="dv">0</span>)       |</span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true"></a>| top right     | (first, last)     | (<span class="dv">0</span>,<span class="dv">2</span>)       |</span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true"></a>| bottom right  | (last, last)      | (<span class="dv">2</span>,<span class="dv">2</span>)       |</span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true"></a>| bottom left   | (last, first)     | (<span class="dv">2</span>,<span class="dv">0</span>)       |</span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true"></a>+---------------+-------------------+-------------+</span></code></pre></div>
<p>For this reason, we start our rotation at the outer four corners — we’ll rotate those first. Let’s highlight them with <code>*</code>.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true"></a>* <span class="dv">1</span> *</span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true"></a><span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span></span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true"></a>* <span class="dv">7</span> *</span></code></pre></div>
<p>We want to swap each <code>*</code> with the <code>*</code> to the right of it. So let’s go ahead a print out our corners defined using only various permutations of <code>first</code> and <code>last</code>:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true"></a>def rotate(matrix):</span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true"></a>    size = len(matrix)</span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true"></a>    layer_count = size / <span class="dv">2</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true"></a>    <span class="cf">for</span> layer in range(<span class="dv">0</span>, layer_count):</span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true"></a></span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true"></a>        first = layer</span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true"></a>        last = size - first - <span class="dv">1</span></span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true"></a></span>
<span id="cb191-9"><a href="#cb191-9" aria-hidden="true"></a>        top_left = (first, first)</span>
<span id="cb191-10"><a href="#cb191-10" aria-hidden="true"></a>        top_right = (first, last)</span>
<span id="cb191-11"><a href="#cb191-11" aria-hidden="true"></a>        bottom_right = (last, last)</span>
<span id="cb191-12"><a href="#cb191-12" aria-hidden="true"></a>        bottom_left = (last, first)</span>
<span id="cb191-13"><a href="#cb191-13" aria-hidden="true"></a></span>
<span id="cb191-14"><a href="#cb191-14" aria-hidden="true"></a>        print &#39;top_left: %s&#39; % (top_left)</span>
<span id="cb191-15"><a href="#cb191-15" aria-hidden="true"></a>        print &#39;top_right: %s&#39; % (top_right)</span>
<span id="cb191-16"><a href="#cb191-16" aria-hidden="true"></a>        print &#39;bottom_right: %s&#39; % (bottom_right)</span>
<span id="cb191-17"><a href="#cb191-17" aria-hidden="true"></a>        print &#39;bottom_left: %s&#39; % (bottom_left)</span>
<span id="cb191-18"><a href="#cb191-18" aria-hidden="true"></a></span>
<span id="cb191-19"><a href="#cb191-19" aria-hidden="true"></a>matrix = [</span>
<span id="cb191-20"><a href="#cb191-20" aria-hidden="true"></a>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb191-21"><a href="#cb191-21" aria-hidden="true"></a>[<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>],</span>
<span id="cb191-22"><a href="#cb191-22" aria-hidden="true"></a>[<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span>
<span id="cb191-23"><a href="#cb191-23" aria-hidden="true"></a>]</span>
<span id="cb191-24"><a href="#cb191-24" aria-hidden="true"></a></span>
<span id="cb191-25"><a href="#cb191-25" aria-hidden="true"></a>rotate(matrix)</span></code></pre></div>
<p>Output should be:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true"></a>top_left: (<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true"></a>top_right: (<span class="dv">0</span>, <span class="dv">2</span>)</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true"></a>bottom_right: (<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true"></a>bottom_left: (<span class="dv">2</span>, <span class="dv">0</span>)</span></code></pre></div>
<p>Now we could quite easily swap each of the corners from within our layer loop:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true"></a>def rotate(matrix):</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true"></a>    size = len(matrix)</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true"></a>    layer_count = size / <span class="dv">2</span></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true"></a>    <span class="cf">for</span> layer in range(<span class="dv">0</span>, layer_count):</span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true"></a></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true"></a>        first = layer</span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true"></a>        last = size - first - <span class="dv">1</span></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true"></a></span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true"></a>        top_left = matrix[first][first]</span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true"></a>        top_right = matrix[first][last]</span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true"></a>        bottom_right = matrix[last][last]</span>
<span id="cb193-12"><a href="#cb193-12" aria-hidden="true"></a>        bottom_left = matrix[last][first]</span>
<span id="cb193-13"><a href="#cb193-13" aria-hidden="true"></a></span>
<span id="cb193-14"><a href="#cb193-14" aria-hidden="true"></a></span>
<span id="cb193-15"><a href="#cb193-15" aria-hidden="true"></a><span class="er"># bottom_left -&gt; top_left</span></span>
<span id="cb193-16"><a href="#cb193-16" aria-hidden="true"></a>        matrix[first][first] = bottom_left</span>
<span id="cb193-17"><a href="#cb193-17" aria-hidden="true"></a></span>
<span id="cb193-18"><a href="#cb193-18" aria-hidden="true"></a><span class="er"># top_left -&gt; top_right</span></span>
<span id="cb193-19"><a href="#cb193-19" aria-hidden="true"></a>        matrix[first][last] = top_left</span>
<span id="cb193-20"><a href="#cb193-20" aria-hidden="true"></a></span>
<span id="cb193-21"><a href="#cb193-21" aria-hidden="true"></a><span class="er"># top_right -&gt; bottom_right</span></span>
<span id="cb193-22"><a href="#cb193-22" aria-hidden="true"></a>        matrix[last][last] = top_right</span>
<span id="cb193-23"><a href="#cb193-23" aria-hidden="true"></a></span>
<span id="cb193-24"><a href="#cb193-24" aria-hidden="true"></a><span class="er"># bottom_right -&gt; bottom_left</span></span>
<span id="cb193-25"><a href="#cb193-25" aria-hidden="true"></a>        matrix[last][first] = bottom_right</span>
<span id="cb193-26"><a href="#cb193-26" aria-hidden="true"></a></span>
<span id="cb193-27"><a href="#cb193-27" aria-hidden="true"></a></span>
<span id="cb193-28"><a href="#cb193-28" aria-hidden="true"></a>print_matrix(matrix)</span>
<span id="cb193-29"><a href="#cb193-29" aria-hidden="true"></a>print &#39;---------&#39;</span>
<span id="cb193-30"><a href="#cb193-30" aria-hidden="true"></a>rotate(matrix)</span>
<span id="cb193-31"><a href="#cb193-31" aria-hidden="true"></a>print_matrix(matrix)</span></code></pre></div>
<p>Matrix before rotating corners:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true"></a>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>]</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true"></a>[<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true"></a>[<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]</span></code></pre></div>
<p>Matrix after rotating corners:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true"></a>[<span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">0</span>]</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true"></a>[<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true"></a>[<span class="dv">8</span>, <span class="dv">7</span>, <span class="dv">2</span>]</span></code></pre></div>
<p>Great! We have successfully rotated each corner of the matrix. But, we haven’t rotated the elements in the middle of each layer. Clearly we need a way of iterating within a layer.</p>
<p>The problem is, the only loop in our function so far (our layer loop), moves to the next layer on each iteration. Since our matrix has only one rotatable layer, the layer loop exits after rotating only the corners. Let’s look at what happens with a larger, 5×5 matrix (where two layers need rotating). The function code has been omitted, but it remains the same as above:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true"></a>matrix = [</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true"></a>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>],</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true"></a>[<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>],</span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true"></a>[<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>],</span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true"></a>[<span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">18</span>, <span class="dv">19</span>],</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true"></a>[<span class="dv">20</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>]</span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true"></a>]</span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true"></a>print_matrix(matrix)</span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true"></a>print &#39;--------------------&#39;</span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true"></a>rotate(matrix)</span>
<span id="cb196-11"><a href="#cb196-11" aria-hidden="true"></a>print_matrix(matrix)</span></code></pre></div>
<p>The output is:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true"></a>[<span class="dv">20</span>,  <span class="dv">1</span>,  <span class="dv">2</span>,  <span class="dv">3</span>,  <span class="dv">0</span>]</span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true"></a>[ <span class="dv">5</span>, <span class="dv">16</span>,  <span class="dv">7</span>,  <span class="dv">6</span>,  <span class="dv">9</span>]</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true"></a>[<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>]</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true"></a>[<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">17</span>,  <span class="dv">8</span>, <span class="dv">19</span>]</span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true"></a>[<span class="dv">24</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>,  <span class="dv">4</span>]</span></code></pre></div>
<p>It shouldn’t be a surprise that the corners of the outermost layer have been rotated, but, you may also notice the corners of the next layer (inwards) have also been rotated. This makes sense. We’ve written code to navigate through layers and also to rotate the corners of each layer. This feels like progress, but unfortunately we must take a step back. It’s just no good moving onto the next layer until the previous (outer) layer has been fully rotated. That is, until each element in the layer has been rotated. Rotating only the corners won’t do!</p>
<p>Take a deep breath. We need another loop. A nested loop no less. The new, nested loop, will use the <code>first</code> and <code>last</code> variables, plus an offset to navigate within a layer. We’ll call this new loop our ‘element loop’. The element loop will visit each element along the top row, each element down the right side, each element along the bottom row and each element up the left side.</p>
<ul>
<li>
Moving forwards along the top row requires the column index to be incremented.
</li>
<li>
Moving down the right side requires the row index to be incremented.
</li>
<li>
Moving backwards along the bottom requires the column index to be decremented.
</li>
<li>
Moving up the left side requires the row index to be decremented.
</li>
</ul>
<p>This sounds complex, but it’s made easy because the number of times we increment and decrement to achieve the above remains the same along all four sides of the matrix. For example:</p>
<ul>
<li>
Move 1 element across the top row.
</li>
<li>
Move 1 element down the right side.
</li>
<li>
Move 1 element backwards along the bottom row.
</li>
<li>
Move 1 element up the left side.
</li>
</ul>
<p>This means we can use a single variable in combination with the <code>first</code> and <code>last</code> variables to move within a layer. It may help to note that moving across the top row and down the right side both require incrementing. While moving backwards along the bottom and up the left side both require decrementing.</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true"></a>def rotate(matrix):</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true"></a>    size = len(matrix)</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true"></a>    layer_count = size / <span class="dv">2</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true"></a></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true"></a></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true"></a><span class="er"># Move through layers (i.e. layer loop).</span></span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true"></a>    <span class="cf">for</span> layer in range(<span class="dv">0</span>, layer_count):</span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true"></a></span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true"></a>            first = layer</span>
<span id="cb198-10"><a href="#cb198-10" aria-hidden="true"></a>            last = size - first - <span class="dv">1</span></span>
<span id="cb198-11"><a href="#cb198-11" aria-hidden="true"></a></span>
<span id="cb198-12"><a href="#cb198-12" aria-hidden="true"></a></span>
<span id="cb198-13"><a href="#cb198-13" aria-hidden="true"></a><span class="er"># Move within a single layer (i.e. element loop).</span></span>
<span id="cb198-14"><a href="#cb198-14" aria-hidden="true"></a>            <span class="cf">for</span> element in range(first, last):</span>
<span id="cb198-15"><a href="#cb198-15" aria-hidden="true"></a></span>
<span id="cb198-16"><a href="#cb198-16" aria-hidden="true"></a>                offset = element - first</span>
<span id="cb198-17"><a href="#cb198-17" aria-hidden="true"></a></span>
<span id="cb198-18"><a href="#cb198-18" aria-hidden="true"></a></span>
<span id="cb198-19"><a href="#cb198-19" aria-hidden="true"></a><span class="er"># &#39;element&#39; increments column (across right)</span></span>
<span id="cb198-20"><a href="#cb198-20" aria-hidden="true"></a>                top_element = (first, element)</span>
<span id="cb198-21"><a href="#cb198-21" aria-hidden="true"></a></span>
<span id="cb198-22"><a href="#cb198-22" aria-hidden="true"></a><span class="er"># &#39;element&#39; increments row (move down)</span></span>
<span id="cb198-23"><a href="#cb198-23" aria-hidden="true"></a>                right_side = (element, last)</span>
<span id="cb198-24"><a href="#cb198-24" aria-hidden="true"></a></span>
<span id="cb198-25"><a href="#cb198-25" aria-hidden="true"></a><span class="er"># &#39;last-offset&#39; decrements column (across left)</span></span>
<span id="cb198-26"><a href="#cb198-26" aria-hidden="true"></a>                bottom = (last, last-offset)</span>
<span id="cb198-27"><a href="#cb198-27" aria-hidden="true"></a></span>
<span id="cb198-28"><a href="#cb198-28" aria-hidden="true"></a><span class="er"># &#39;last-offset&#39; decrements row (move up)</span></span>
<span id="cb198-29"><a href="#cb198-29" aria-hidden="true"></a>                left_side = (last-offset, first)</span>
<span id="cb198-30"><a href="#cb198-30" aria-hidden="true"></a></span>
<span id="cb198-31"><a href="#cb198-31" aria-hidden="true"></a>                print &#39;top: %s&#39; % (top)</span>
<span id="cb198-32"><a href="#cb198-32" aria-hidden="true"></a>                print &#39;right_side: %s&#39; % (right_side)</span>
<span id="cb198-33"><a href="#cb198-33" aria-hidden="true"></a>                print &#39;bottom: %s&#39; % (bottom)</span>
<span id="cb198-34"><a href="#cb198-34" aria-hidden="true"></a>                print &#39;left_side: %s&#39; % (left_side)</span></code></pre></div>
<p>Now we simply need to assign the top to the right side, right side to the bottom, bottom to the left side, and left side to the top. Putting this all together we get:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true"></a>def rotate(matrix):</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true"></a>    size = len(matrix)</span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true"></a>    layer_count = size / <span class="dv">2</span></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true"></a></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true"></a>    <span class="cf">for</span> layer in range(<span class="dv">0</span>, layer_count):</span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true"></a>        first = layer</span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true"></a>        last = size - first - <span class="dv">1</span></span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true"></a></span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true"></a>        <span class="cf">for</span> element in range(first, last):</span>
<span id="cb199-10"><a href="#cb199-10" aria-hidden="true"></a>            offset = element - first</span>
<span id="cb199-11"><a href="#cb199-11" aria-hidden="true"></a></span>
<span id="cb199-12"><a href="#cb199-12" aria-hidden="true"></a>            top = matrix[first][element]</span>
<span id="cb199-13"><a href="#cb199-13" aria-hidden="true"></a>            right_side = matrix[element][last]</span>
<span id="cb199-14"><a href="#cb199-14" aria-hidden="true"></a>            bottom = matrix[last][last-offset]</span>
<span id="cb199-15"><a href="#cb199-15" aria-hidden="true"></a>            left_side = matrix[last-offset][first]</span>
<span id="cb199-16"><a href="#cb199-16" aria-hidden="true"></a></span>
<span id="cb199-17"><a href="#cb199-17" aria-hidden="true"></a>            matrix[first][element] = left_side</span>
<span id="cb199-18"><a href="#cb199-18" aria-hidden="true"></a>            matrix[element][last] = top</span>
<span id="cb199-19"><a href="#cb199-19" aria-hidden="true"></a>            matrix[last][last-offset] = right_side</span>
<span id="cb199-20"><a href="#cb199-20" aria-hidden="true"></a>            matrix[last-offset][first] = bottom</span></code></pre></div>
<p>Given the matrix:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true"></a><span class="dv">0</span>,  <span class="dv">1</span>,  <span class="dv">2</span>  </span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true"></a><span class="dv">3</span>,  <span class="dv">4</span>,  <span class="dv">5</span>  </span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true"></a><span class="dv">6</span>,  <span class="dv">7</span>,  <span class="dv">8</span> </span></code></pre></div>
<p>Our <code>rotate</code> function results in:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true"></a><span class="dv">6</span>,  <span class="dv">3</span>,  <span class="dv">0</span>  </span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true"></a><span class="dv">7</span>,  <span class="dv">4</span>,  <span class="dv">1</span>  </span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true"></a><span class="dv">8</span>,  <span class="dv">5</span>,  <span class="dv">2</span>  </span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-implement-a-queue-using-two-stacks-score-287130-in-2016" class="level3">
<h3>26: How to implement a queue using two stacks? (score <a href="https://stackoverflow.com/q/69192.html">287130</a> in 2016)</h3>
<section id="question-25" class="level4">
<h4>Question</h4>
<p>Suppose we have two stacks and no other temporary variable.</p>
<p>Is to possible to “construct” a queue data structure using only the two stacks?</p>
</section>
<section id="answer-2-score-683" class="level4">
<h4>Answer 2 (score 683)</h4>
<p>Keep 2 stacks, let’s call them <code>inbox</code> and <code>outbox</code>.</p>
<p><strong>Enqueue</strong>:</p>
<ul>
<li>
Push the new element onto <code>inbox</code>
</li>
</ul>
<p><strong>Dequeue</strong>:</p>
<ul>
<li>
<p>
If <code>outbox</code> is empty, refill it by popping each element from <code>inbox</code> and pushing it onto <code>outbox</code>
</p>
</li>
<li>
<p>
Pop and return the top element from <code>outbox</code>
</p>
</li>
</ul>
<p>Using this method, each element will be in each stack exactly once - meaning each element will be pushed twice and popped twice, giving amortized constant time operations.</p>
<p>Here’s an implementation in Java:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true"></a>public class Queue&lt;E&gt;</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true"></a>{</span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true"></a></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true"></a>    private Stack&lt;E&gt; inbox = new Stack&lt;E&gt;();</span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true"></a>    private Stack&lt;E&gt; outbox = new Stack&lt;E&gt;();</span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true"></a></span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true"></a>    public <span class="dt">void</span> queue(E item) {</span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true"></a>        inbox.push(item);</span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true"></a>    }</span>
<span id="cb202-10"><a href="#cb202-10" aria-hidden="true"></a></span>
<span id="cb202-11"><a href="#cb202-11" aria-hidden="true"></a>    public E dequeue() {</span>
<span id="cb202-12"><a href="#cb202-12" aria-hidden="true"></a>        <span class="cf">if</span> (outbox.isEmpty()) {</span>
<span id="cb202-13"><a href="#cb202-13" aria-hidden="true"></a>            <span class="cf">while</span> (!inbox.isEmpty()) {</span>
<span id="cb202-14"><a href="#cb202-14" aria-hidden="true"></a>               outbox.push(inbox.pop());</span>
<span id="cb202-15"><a href="#cb202-15" aria-hidden="true"></a>            }</span>
<span id="cb202-16"><a href="#cb202-16" aria-hidden="true"></a>        }</span>
<span id="cb202-17"><a href="#cb202-17" aria-hidden="true"></a>        <span class="cf">return</span> outbox.pop();</span>
<span id="cb202-18"><a href="#cb202-18" aria-hidden="true"></a>    }</span>
<span id="cb202-19"><a href="#cb202-19" aria-hidden="true"></a></span>
<span id="cb202-20"><a href="#cb202-20" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-204" class="level4">
<h4>Answer 3 (score 204)</h4>
<h5>
A - How To Reverse A Stack
</h1>
<p>To understand how to construct a queue using two stacks, you should understand how to reverse a stack crystal clear. Remember how stack works, it is very similar to the dish stack on your kitchen. The last washed dish will be on the top of the clean stack, which is called as <strong>L</strong>ast <strong>I</strong>n <strong>F</strong>irst <strong>O</strong>ut (LIFO) in computer science.</p>
<p>Lets imagine our stack like a bottle as below;</p>
<p><a href="https://i.stack.imgur.com/MwjaI.png"><img src="https://i.stack.imgur.com/MwjaI.png" alt="enter image description here"></a></p>
<p>If we push integers 1,2,3 respectively, then 3 will be on the top of the stack. Because 1 will be pushed first, then 2 will be put on the top of 1. Lastly, 3 will be put on the top of the stack and latest state of our stack represented as a bottle will be as below;</p>
<p><a href="https://i.stack.imgur.com/J7ec0.png"><img src="https://i.stack.imgur.com/J7ec0.png" alt="enter image description here"></a></p>
<p>Now we have our stack represented as a bottle is populated with values 3,2,1. And we want to reverse the stack so that the top element of the stack will be 1 and bottom element of the stack will be 3. What we can do ? We can take the bottle and hold it upside down so that all the values should reverse in order ?</p>
<p><a href="https://i.stack.imgur.com/WZNxS.png"><img src="https://i.stack.imgur.com/WZNxS.png" alt="enter image description here"></a></p>
<p>Yes we can do that, but that’s a bottle. To do the same process, we need to have a second stack that which is going to store the first stack elements in reverse order. Let’s put our populated stack to the left and our new empty stack to the right. To reverse the order of the elements, we are going to pop each element from left stack, and push them to the right stack. You can see what happens as we do so on the image below;</p>
<p><a href="https://i.stack.imgur.com/1YfMo.png"><img src="https://i.stack.imgur.com/1YfMo.png" alt="enter image description here"></a></p>
<p>So we know how to reverse a stack.</p>
<h5>
B - Using Two Stacks As A Queue
</h1>
<p>On previous part, I’ve explained how can we reverse the order of stack elements. This was important, because if we push and pop elements to the stack, the output will be exactly in reverse order of a queue. Thinking on an example, let’s push the array of integers <code>{1, 2, 3, 4, 5}</code> to a stack. If we pop the elements and print them until the stack is empty, we will get the array in the reverse order of pushing order, which will be <code>{5, 4, 3, 2, 1}</code> Remember that for the same input, if we dequeue the queue until the queue is empty, the output will be <code>{1, 2, 3, 4, 5}</code>. So it is obvious that for the same input order of elements, output of the queue is exactly reverse of the output of a stack. As we know how to reverse a stack using an extra stack, we can construct a queue using two stacks.</p>
<p>Our queue model will consist of two stacks. One stack will be used for <code>enqueue</code> operation (stack #1 on the left, will be called as Input Stack), another stack will be used for the <code>dequeue</code> operation (stack #2 on the right, will be called as Output Stack). Check out the image below;</p>
<p><a href="https://i.stack.imgur.com/xyWPR.png"><img src="https://i.stack.imgur.com/xyWPR.png" alt="enter image description here"></a></p>
<p>Our pseudo-code is as below;</p>
<hr>
<h5>
Enqueue Operation
</h3>
<div class="sourceCode" id="cb203"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true"></a>Push every input element to the Input Stack</span></code></pre></div>
<h5>
Dequeue Operation
</h3>
<div class="sourceCode" id="cb204"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true"></a>If ( Output Stack is Empty)</span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true"></a>    pop every element in the Input Stack</span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true"></a>    and push them to the Output Stack until Input Stack is Empty</span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true"></a></span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true"></a>pop from Output Stack</span></code></pre></div>
<hr>
<p>Let’s enqueue the integers <code>{1, 2, 3}</code> respectively. Integers will be pushed on the <strong>Input Stack</strong> (<strong>Stack #1</strong>) which is located on the left;</p>
<p><a href="https://i.stack.imgur.com/lX1EP.png"><img src="https://i.stack.imgur.com/lX1EP.png" alt="enter image description here"></a></p>
<p>Then what will happen if we execute a dequeue operation? Whenever a dequeue operation is executed, queue is going to check if the Output Stack is empty or not(see the pseudo-code above) If the Output Stack is empty, then the Input Stack is going to be extracted on the output so the elements of Input Stack will be reversed. Before returning a value, the state of the queue will be as below;</p>
<p><a href="https://i.stack.imgur.com/9f03R.png"><img src="https://i.stack.imgur.com/9f03R.png" alt="enter image description here"></a></p>
<p>Check out the order of elements in the Output Stack (Stack #2). It’s obvious that we can pop the elements from the Output Stack so that the output will be same as if we dequeued from a queue. Thus, if we execute two dequeue operations, first we will get <code>{1, 2}</code> respectively. Then element 3 will be the only element of the Output Stack, and the Input Stack will be empty. If we enqueue the elements 4 and 5, then the state of the queue will be as follows;</p>
<p><a href="https://i.stack.imgur.com/CXQZB.png"><img src="https://i.stack.imgur.com/CXQZB.png" alt="enter image description here"></a></p>
<p>Now the Output Stack is not empty, and if we execute a dequeue operation, only 3 will be popped out from the Output Stack. Then the state will be seen as below;</p>
<p><a href="https://i.stack.imgur.com/hOPu3.png"><img src="https://i.stack.imgur.com/hOPu3.png" alt="enter image description here"></a></p>
<p>Again, if we execute two more dequeue operations, on the first dequeue operation, queue will check if the Output Stack is empty, which is true. Then pop out the elements of the Input Stack and push them to the Output Stack unti the Input Stack is empty, then the state of the Queue will be as below;</p>
<p><a href="https://i.stack.imgur.com/vuLsw.png"><img src="https://i.stack.imgur.com/vuLsw.png" alt="enter image description here"></a></p>
<p>Easy to see, the output of the two dequeue operations will be <code>{4, 5}</code></p>
<h5>
C - Implementation Of Queue Constructed with Two Stacks
</h1>
<p>Here is an implementation in Java. I’m not going to use the existing implementation of Stack so the example here is going to reinvent the wheel;</p>
<h5>
C - 1) MyStack class : A Simple Stack Implementation
</h1>
<div class="sourceCode" id="cb205"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true"></a>public class MyStack&lt;T&gt; {</span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true"></a></span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true"></a>    <span class="co">// inner generic Node class</span></span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true"></a>    private class Node&lt;T&gt; {</span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true"></a>        T data;</span>
<span id="cb205-6"><a href="#cb205-6" aria-hidden="true"></a>        Node&lt;T&gt; next;</span>
<span id="cb205-7"><a href="#cb205-7" aria-hidden="true"></a></span>
<span id="cb205-8"><a href="#cb205-8" aria-hidden="true"></a>        public Node(T data) {</span>
<span id="cb205-9"><a href="#cb205-9" aria-hidden="true"></a>            this.data = data;</span>
<span id="cb205-10"><a href="#cb205-10" aria-hidden="true"></a>        }</span>
<span id="cb205-11"><a href="#cb205-11" aria-hidden="true"></a>    }</span>
<span id="cb205-12"><a href="#cb205-12" aria-hidden="true"></a></span>
<span id="cb205-13"><a href="#cb205-13" aria-hidden="true"></a>    private Node&lt;T&gt; head;</span>
<span id="cb205-14"><a href="#cb205-14" aria-hidden="true"></a>    private <span class="dt">int</span> size;</span>
<span id="cb205-15"><a href="#cb205-15" aria-hidden="true"></a></span>
<span id="cb205-16"><a href="#cb205-16" aria-hidden="true"></a>    public <span class="dt">void</span> push(T e) {</span>
<span id="cb205-17"><a href="#cb205-17" aria-hidden="true"></a>        Node&lt;T&gt; newElem = new Node(e);</span>
<span id="cb205-18"><a href="#cb205-18" aria-hidden="true"></a></span>
<span id="cb205-19"><a href="#cb205-19" aria-hidden="true"></a>        <span class="cf">if</span>(head == null) {</span>
<span id="cb205-20"><a href="#cb205-20" aria-hidden="true"></a>            head = newElem;</span>
<span id="cb205-21"><a href="#cb205-21" aria-hidden="true"></a>        } <span class="cf">else</span> {</span>
<span id="cb205-22"><a href="#cb205-22" aria-hidden="true"></a>            newElem.next = head;</span>
<span id="cb205-23"><a href="#cb205-23" aria-hidden="true"></a>            head = newElem;     <span class="co">// new elem on the top of the stack</span></span>
<span id="cb205-24"><a href="#cb205-24" aria-hidden="true"></a>        }</span>
<span id="cb205-25"><a href="#cb205-25" aria-hidden="true"></a></span>
<span id="cb205-26"><a href="#cb205-26" aria-hidden="true"></a>        size++;</span>
<span id="cb205-27"><a href="#cb205-27" aria-hidden="true"></a>    }</span>
<span id="cb205-28"><a href="#cb205-28" aria-hidden="true"></a></span>
<span id="cb205-29"><a href="#cb205-29" aria-hidden="true"></a>    public T pop() {</span>
<span id="cb205-30"><a href="#cb205-30" aria-hidden="true"></a>        <span class="cf">if</span>(head == null)</span>
<span id="cb205-31"><a href="#cb205-31" aria-hidden="true"></a>            <span class="cf">return</span> null;</span>
<span id="cb205-32"><a href="#cb205-32" aria-hidden="true"></a></span>
<span id="cb205-33"><a href="#cb205-33" aria-hidden="true"></a>        T elem = head.data;</span>
<span id="cb205-34"><a href="#cb205-34" aria-hidden="true"></a>        head = head.next;   <span class="co">// top of the stack is head.next</span></span>
<span id="cb205-35"><a href="#cb205-35" aria-hidden="true"></a></span>
<span id="cb205-36"><a href="#cb205-36" aria-hidden="true"></a>        size--;</span>
<span id="cb205-37"><a href="#cb205-37" aria-hidden="true"></a></span>
<span id="cb205-38"><a href="#cb205-38" aria-hidden="true"></a>        <span class="cf">return</span> elem;</span>
<span id="cb205-39"><a href="#cb205-39" aria-hidden="true"></a>    }</span>
<span id="cb205-40"><a href="#cb205-40" aria-hidden="true"></a></span>
<span id="cb205-41"><a href="#cb205-41" aria-hidden="true"></a>    public <span class="dt">int</span> size() {</span>
<span id="cb205-42"><a href="#cb205-42" aria-hidden="true"></a>        <span class="cf">return</span> size;</span>
<span id="cb205-43"><a href="#cb205-43" aria-hidden="true"></a>    }</span>
<span id="cb205-44"><a href="#cb205-44" aria-hidden="true"></a></span>
<span id="cb205-45"><a href="#cb205-45" aria-hidden="true"></a>    public boolean isEmpty() {</span>
<span id="cb205-46"><a href="#cb205-46" aria-hidden="true"></a>        <span class="cf">return</span> size == <span class="dv">0</span>;</span>
<span id="cb205-47"><a href="#cb205-47" aria-hidden="true"></a>    }</span>
<span id="cb205-48"><a href="#cb205-48" aria-hidden="true"></a></span>
<span id="cb205-49"><a href="#cb205-49" aria-hidden="true"></a>    public <span class="dt">void</span> printStack() {</span>
<span id="cb205-50"><a href="#cb205-50" aria-hidden="true"></a>        System.out.print(<span class="st">&quot;Stack: &quot;</span>);</span>
<span id="cb205-51"><a href="#cb205-51" aria-hidden="true"></a></span>
<span id="cb205-52"><a href="#cb205-52" aria-hidden="true"></a>        <span class="cf">if</span>(size == <span class="dv">0</span>)</span>
<span id="cb205-53"><a href="#cb205-53" aria-hidden="true"></a>            System.out.print(<span class="st">&quot;Empty !&quot;</span>);</span>
<span id="cb205-54"><a href="#cb205-54" aria-hidden="true"></a>        <span class="cf">else</span></span>
<span id="cb205-55"><a href="#cb205-55" aria-hidden="true"></a>            <span class="cf">for</span>(Node&lt;T&gt; temp = head; temp != null; temp = temp.next)</span>
<span id="cb205-56"><a href="#cb205-56" aria-hidden="true"></a>                System.out.printf(<span class="st">&quot;%s &quot;</span>, temp.data);</span>
<span id="cb205-57"><a href="#cb205-57" aria-hidden="true"></a></span>
<span id="cb205-58"><a href="#cb205-58" aria-hidden="true"></a>        System.out.printf(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb205-59"><a href="#cb205-59" aria-hidden="true"></a>    }</span>
<span id="cb205-60"><a href="#cb205-60" aria-hidden="true"></a>}</span></code></pre></div>
<h5>
C - 2) MyQueue class : Queue Implementation Using Two Stacks
</h1>
<div class="sourceCode" id="cb206"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true"></a>public class MyQueue&lt;T&gt; {</span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true"></a></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true"></a>    private MyStack&lt;T&gt; inputStack;      <span class="co">// for enqueue</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true"></a>    private MyStack&lt;T&gt; outputStack;     <span class="co">// for dequeue</span></span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true"></a>    private <span class="dt">int</span> size;</span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true"></a></span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true"></a>    public MyQueue() {</span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true"></a>        inputStack = new MyStack&lt;&gt;();</span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true"></a>        outputStack = new MyStack&lt;&gt;();</span>
<span id="cb206-10"><a href="#cb206-10" aria-hidden="true"></a>    }</span>
<span id="cb206-11"><a href="#cb206-11" aria-hidden="true"></a></span>
<span id="cb206-12"><a href="#cb206-12" aria-hidden="true"></a>    public <span class="dt">void</span> enqueue(T e) {</span>
<span id="cb206-13"><a href="#cb206-13" aria-hidden="true"></a>        inputStack.push(e);</span>
<span id="cb206-14"><a href="#cb206-14" aria-hidden="true"></a>        size++;</span>
<span id="cb206-15"><a href="#cb206-15" aria-hidden="true"></a>    }</span>
<span id="cb206-16"><a href="#cb206-16" aria-hidden="true"></a></span>
<span id="cb206-17"><a href="#cb206-17" aria-hidden="true"></a>    public T dequeue() {</span>
<span id="cb206-18"><a href="#cb206-18" aria-hidden="true"></a>        <span class="co">// fill out all the Input if output stack is empty</span></span>
<span id="cb206-19"><a href="#cb206-19" aria-hidden="true"></a>        <span class="cf">if</span>(outputStack.isEmpty())</span>
<span id="cb206-20"><a href="#cb206-20" aria-hidden="true"></a>            <span class="cf">while</span>(!inputStack.isEmpty())</span>
<span id="cb206-21"><a href="#cb206-21" aria-hidden="true"></a>                outputStack.push(inputStack.pop());</span>
<span id="cb206-22"><a href="#cb206-22" aria-hidden="true"></a></span>
<span id="cb206-23"><a href="#cb206-23" aria-hidden="true"></a>        T temp = null;</span>
<span id="cb206-24"><a href="#cb206-24" aria-hidden="true"></a>        <span class="cf">if</span>(!outputStack.isEmpty()) {</span>
<span id="cb206-25"><a href="#cb206-25" aria-hidden="true"></a>            temp = outputStack.pop();</span>
<span id="cb206-26"><a href="#cb206-26" aria-hidden="true"></a>            size--;</span>
<span id="cb206-27"><a href="#cb206-27" aria-hidden="true"></a>        }</span>
<span id="cb206-28"><a href="#cb206-28" aria-hidden="true"></a></span>
<span id="cb206-29"><a href="#cb206-29" aria-hidden="true"></a>        <span class="cf">return</span> temp;</span>
<span id="cb206-30"><a href="#cb206-30" aria-hidden="true"></a>    }</span>
<span id="cb206-31"><a href="#cb206-31" aria-hidden="true"></a></span>
<span id="cb206-32"><a href="#cb206-32" aria-hidden="true"></a>    public <span class="dt">int</span> size() {</span>
<span id="cb206-33"><a href="#cb206-33" aria-hidden="true"></a>        <span class="cf">return</span> size;</span>
<span id="cb206-34"><a href="#cb206-34" aria-hidden="true"></a>    }</span>
<span id="cb206-35"><a href="#cb206-35" aria-hidden="true"></a></span>
<span id="cb206-36"><a href="#cb206-36" aria-hidden="true"></a>    public boolean isEmpty() {</span>
<span id="cb206-37"><a href="#cb206-37" aria-hidden="true"></a>        <span class="cf">return</span> size == <span class="dv">0</span>;</span>
<span id="cb206-38"><a href="#cb206-38" aria-hidden="true"></a>    }</span>
<span id="cb206-39"><a href="#cb206-39" aria-hidden="true"></a></span>
<span id="cb206-40"><a href="#cb206-40" aria-hidden="true"></a>}</span></code></pre></div>
<h5>
C - 3) Demo Code
</h1>
<div class="sourceCode" id="cb207"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true"></a>public class TestMyQueue {</span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true"></a></span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">void</span> main(String[] args) {</span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true"></a>        MyQueue&lt;Integer&gt; queue = new MyQueue&lt;&gt;();</span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true"></a></span>
<span id="cb207-6"><a href="#cb207-6" aria-hidden="true"></a>        <span class="co">// enqueue integers 1..3</span></span>
<span id="cb207-7"><a href="#cb207-7" aria-hidden="true"></a>        <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">1</span>; i &lt;= <span class="dv">3</span>; i++)</span>
<span id="cb207-8"><a href="#cb207-8" aria-hidden="true"></a>            queue.enqueue(i);</span>
<span id="cb207-9"><a href="#cb207-9" aria-hidden="true"></a></span>
<span id="cb207-10"><a href="#cb207-10" aria-hidden="true"></a>        <span class="co">// execute 2 dequeue operations </span></span>
<span id="cb207-11"><a href="#cb207-11" aria-hidden="true"></a>        <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">2</span>; i++)</span>
<span id="cb207-12"><a href="#cb207-12" aria-hidden="true"></a>            System.out.println(<span class="st">&quot;Dequeued: &quot;</span> + queue.dequeue());</span>
<span id="cb207-13"><a href="#cb207-13" aria-hidden="true"></a></span>
<span id="cb207-14"><a href="#cb207-14" aria-hidden="true"></a>        <span class="co">// enqueue integers 4..5</span></span>
<span id="cb207-15"><a href="#cb207-15" aria-hidden="true"></a>        <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">4</span>; i &lt;= <span class="dv">5</span>; i++)</span>
<span id="cb207-16"><a href="#cb207-16" aria-hidden="true"></a>            queue.enqueue(i);</span>
<span id="cb207-17"><a href="#cb207-17" aria-hidden="true"></a></span>
<span id="cb207-18"><a href="#cb207-18" aria-hidden="true"></a>        <span class="co">// dequeue the rest</span></span>
<span id="cb207-19"><a href="#cb207-19" aria-hidden="true"></a>        <span class="cf">while</span>(!queue.isEmpty())</span>
<span id="cb207-20"><a href="#cb207-20" aria-hidden="true"></a>            System.out.println(<span class="st">&quot;Dequeued: &quot;</span> + queue.dequeue());</span>
<span id="cb207-21"><a href="#cb207-21" aria-hidden="true"></a>    }</span>
<span id="cb207-22"><a href="#cb207-22" aria-hidden="true"></a></span>
<span id="cb207-23"><a href="#cb207-23" aria-hidden="true"></a>}</span></code></pre></div>
<h5>
C - 4) Sample Output
</h1>
<div class="sourceCode" id="cb208"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true"></a>Dequeued: <span class="dv">1</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true"></a>Dequeued: <span class="dv">2</span></span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true"></a>Dequeued: <span class="dv">3</span></span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true"></a>Dequeued: <span class="dv">4</span></span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true"></a>Dequeued: <span class="dv">5</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="best-algorithm-for-detecting-cycles-in-a-directed-graph-score-284410-in-2014" class="level3">
<h3>27: Best algorithm for detecting cycles in a directed graph (score <a href="https://stackoverflow.com/q/261573.html">284410</a> in 2014)</h3>
<section id="question-26" class="level4">
<h4>Question</h4>
<p>What is the most efficient algorithm for detecting all cycles within a directed graph?</p>
<p>I have a directed graph representing a schedule of jobs that need to be executed, a job being a node and a dependency being an edge. I need to detect the error case of a cycle within this graph leading to cyclic dependencies.</p>
</section>
<section id="answer-accepted-score-186" class="level4">
<h4>Answer accepted (score 186)</h4>
<p><a href="http://en.wikipedia.org/wiki/Tarjan%E2%80%99s_strongly_connected_components_algorithm" rel="noreferrer">Tarjan’s strongly connected components algorithm</a> has <code>O(|E| + |V|)</code> time complexity.</p>
<p>For other algorithms, see <a href="http://en.wikipedia.org/wiki/Strongly_connected_components" rel="noreferrer">Strongly connected components</a> on Wikipedia.</p>
</section>
<section id="answer-2-score-69" class="level4">
<h4>Answer 2 (score 69)</h4>
<p>Given that this is a schedule of jobs, I suspect that at some point you are going to <em>sort</em> them into a proposed order of execution.</p>
<p>If that’s the case, then a <a href="http://en.wikipedia.org/wiki/Topological_sorting" rel="noreferrer"><em>topological sort</em></a> implementation may in any case detect cycles. UNIX <code>tsort</code> certainly does. I think it is likely that it is therefore more efficient to detect cycles at the same time as tsorting, rather than in a separate step.</p>
<p>So the question might become, “how do I most efficiently tsort”, rather than “how do I most efficiently detect loops”. To which the answer is probably “use a library”, but failing that the following Wikipedia article:</p>
<blockquote>
<a href="http://en.wikipedia.org/wiki/Topological_sorting" rel="noreferrer">http://en.wikipedia.org/wiki/Topological_sorting</a>
</blockquote>
<p>has the pseudo-code for one algorithm, and a brief description of another from Tarjan. Both have <code>O(|V| + |E|)</code> time complexity.</p>
</section>
<section id="answer-3-score-29" class="level4">
<h4>Answer 3 (score 29)</h4>
<p>Start with a DFS: a cycle exists if and only if a <em>back-edge is discovered during DFS</em>. This is proved as a result of white-path theorum.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="image-comparison---fast-algorithm-score-284319-in-2013" class="level3">
<h3>28: Image comparison - fast algorithm (score <a href="https://stackoverflow.com/q/843972.html">284319</a> in 2013)</h3>
<section id="question-27" class="level4">
<h4>Question</h4>
<p>I’m looking to create a base table of images and then compare any new images against that to determine if the new image is an exact (or close) duplicate of the base.</p>
<p>For example: if you want to reduce storage of the same image 100’s of times, you could store one copy of it and provide reference links to it. When a new image is entered you want to compare to an existing image to make sure it’s not a duplicate … ideas?</p>
<p>One idea of mine was to reduce to a small thumbnail and then randomly pick 100 pixel locations and compare.</p>
</section>
<section id="answer-accepted-score-442" class="level4">
<h4>Answer accepted (score 442)</h4>
<p>Below are three approaches to solving this problem (and there are many others).</p>
<ul>
<li>
<p>
The first is a standard approach in computer vision, keypoint matching. This may require some background knowledge to implement, and can be slow.
</p>
</li>
<li>
<p>
The second method uses only elementary image processing, and is potentially faster than the first approach, and is straightforward to implement. However, what it gains in understandability, it lacks in robustness – matching fails on scaled, rotated, or discolored images.
</p>
</li>
<li>
<p>
The third method is both fast and robust, but is potentially the hardest to implement.
</p>
</li>
</ul>
<p><strong>Keypoint Matching</strong></p>
<p>Better than picking 100 random points is picking 100 <em>important</em> points. Certain parts of an image have more information than others (particularly at edges and corners), and these are the ones you’ll want to use for smart image matching. Google “<a href="http://www.google.com/search?q=keypoint+extraction" rel="noreferrer">keypoint extraction</a>” and “<a href="https://www.google.com/search?q=keypoint+matching" rel="noreferrer">keypoint matching</a>” and you’ll find quite a few academic papers on the subject. These days, <a href="http://en.wikipedia.org/wiki/Scale-invariant_feature_transform" rel="noreferrer">SIFT keypoints</a> are arguably the most popular, since they can match images under different scales, rotations, and lighting. Some SIFT implementations can be found <a href="http://people.csail.mit.edu/albert/ladypack/wiki/index.php?title=Known_implementations_of_SIFT" rel="noreferrer">here</a>.</p>
<p>One downside to keypoint matching is the running time of a naive implementation: O(n^2m), where n is the number of keypoints in each image, and m is the number of images in the database. Some clever algorithms might find the closest match faster, like quadtrees or binary space partitioning.</p>
<hr>
<p><strong>Alternative solution: Histogram method</strong></p>
<p>Another less robust but potentially faster solution is to build feature histograms for each image, and choose the image with the histogram closest to the input image’s histogram. I implemented this as an undergrad, and we used 3 color histograms (red, green, and blue), and two texture histograms, direction and scale. I’ll give the details below, but I should note that this only worked well for matching images VERY similar to the database images. Re-scaled, rotated, or discolored images can fail with this method, but small changes like cropping won’t break the algorithm</p>
<p>Computing the color histograms is straightforward – just pick the range for your histogram buckets, and for each range, tally the number of pixels with a color in that range. For example, consider the “green” histogram, and suppose we choose 4 buckets for our histogram: 0-63, 64-127, 128-191, and 192-255. Then for each pixel, we look at the green value, and add a tally to the appropriate bucket. When we’re done tallying, we divide each bucket total by the number of pixels in the entire image to get a normalized histogram for the green channel.</p>
<p>For the texture direction histogram, we started by performing edge detection on the image. Each edge point has a normal vector pointing in the direction perpendicular to the edge. We quantized the normal vector’s angle into one of 6 buckets between 0 and PI (since edges have 180-degree symmetry, we converted angles between -PI and 0 to be between 0 and PI). After tallying up the number of edge points in each direction, we have an un-normalized histogram representing texture direction, which we normalized by dividing each bucket by the total number of edge points in the image.</p>
<p>To compute the texture scale histogram, for each edge point, we measured the distance to the next-closest edge point with the same direction. For example, if edge point A has a direction of 45 degrees, the algorithm walks in that direction until it finds another edge point with a direction of 45 degrees (or within a reasonable deviation). After computing this distance for each edge point, we dump those values into a histogram and normalize it by dividing by the total number of edge points.</p>
<p>Now you have 5 histograms for each image. To compare two images, you take the absolute value of the difference between each histogram bucket, and then sum these values. For example, to compare images A and B, we would compute</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true"></a>|A.green_histogram.bucket_1 - B.green_histogram.bucket_1| </span></code></pre></div>
<p>for each bucket in the green histogram, and repeat for the other histograms, and then sum up all the results. The smaller the result, the better the match. Repeat for all images in the database, and the match with the smallest result wins. You’d probably want to have a threshold, above which the algorithm concludes that no match was found.</p>
<hr>
<p><strong>Third Choice - Keypoints + Decision Trees</strong></p>
<p>A third approach that is probably much faster than the other two is using <a href="http://jamie.shotton.org/work/publications/cvpr08.pdf" rel="noreferrer">semantic texton forests</a> (PDF). This involves extracting simple keypoints and using a collection decision trees to classify the image. This is faster than simple SIFT keypoint matching, because it avoids the costly matching process, and keypoints are much simpler than SIFT, so keypoint extraction is much faster. However, it preserves the SIFT method’s invariance to rotation, scale, and lighting, an important feature that the histogram method lacked.</p>
<p><strong>Update</strong>:</p>
<p>My mistake – the Semantic Texton Forests paper isn’t specifically about image matching, but rather region labeling. The original paper that does matching is this one: <a href="http://cvlab.epfl.ch/publications/publications/2006/LepetitF06.pdf" rel="noreferrer">Keypoint Recognition using Randomized Trees</a>. Also, the papers below continue to develop the ideas and represent the state of the art (c. 2010):</p>
<ul>
<li>
<a href="http://cvlab.epfl.ch/publications/publications/2010/OzuysalCLF10.pdf" rel="noreferrer">Fast Keypoint Recognition using Random Ferns</a> - faster and more scalable than Lepetit 06
</li>
<li>
<a href="http://cvlab.epfl.ch/publications/publications/2010/LepetitF10.pdf" rel="noreferrer"><s>BRIEF: Binary Robust Independent Elementary Features</s></a> - less robust but very fast – I think the goal here is real-time matching on smart phones and other handhelds
</li>
</ul>
</section>
<section id="answer-2-score-80" class="level4">
<h4>Answer 2 (score 80)</h4>
<p>The best method I know of is to use a Perceptual Hash. There appears to be a good open source implementation of such a hash available at:</p>
<p><a href="http://phash.org/" rel="noreferrer">http://phash.org/</a></p>
<p>The main idea is that each image is reduced down to a small hash code or ‘fingerprint’ by identifying salient features in the original image file and hashing a compact representation of those features (rather than hashing the image data directly). This means that the false positives rate is much reduced over a simplistic approach such as reducing images down to a tiny thumbprint sized image and comparing thumbprints.</p>
<p>phash offers several types of hash and can be used for images, audio or video.</p>
</section>
<section id="answer-3-score-34" class="level4">
<h4>Answer 3 (score 34)</h4>
<p><em>This post was the starting point of my solution, lots of good ideas here so I though I would share my results. The main insight is that I’ve found a way to get around the slowness of keypoint-based image matching by exploiting the speed of phash.</em></p>
<p>For the general solution, it’s best to employ several strategies. Each algorithm is best suited for certain types of image transformations and you can take advantage of that.</p>
<p>At the top, the fastest algorithms; at the bottom the slowest (though more accurate). You might skip the slow ones if a good match is found at the faster level.</p>
<ul>
<li>
file-hash based (md5,sha1,etc) for exact duplicates
</li>
<li>
perceptual hashing (phash) for rescaled images
</li>
<li>
feature-based (SIFT) for modified images
</li>
</ul>
<p>I am having very good results with phash. The accuracy is good for rescaled images. It is not good for (perceptually) modified images (cropped, rotated, mirrored, etc). To deal with the hashing speed we must employ a disk cache/database to maintain the hashes for the haystack.</p>
<p>The really nice thing about phash is that once you build your hash database (which for me is about 1000 images/sec), the searches can be very, very fast, in particular when you can hold the entire hash database in memory. This is fairly practical since a hash is only 8 bytes.</p>
<p>For example, if you have 1 million images it would require an array of 1 million 64-bit hash values (8 MB). On some CPUs this fits in the L2/L3 cache! In practical usage I have seen a corei7 compare at over 1 Giga-hamm/sec, it is only a question of memory bandwidth to the CPU. A 1 Billion-image database is practical on a 64-bit CPU (8GB RAM needed) and searches will not exceed 1 second!</p>
<p>For modified/cropped images it would seem a transform-invariant feature/keypoint detector like SIFT is the way to go. SIFT will produce good keypoints that will detect crop/rotate/mirror etc. However the descriptor compare is very slow compared to hamming distance used by phash. This is a major limitation. There are a lot of compares to do, since there are maximum IxJxK descriptor compares to lookup one image (I=num haystack images, J=target keypoints per haystack image, K=target keypoints per needle image).</p>
<p>To get around the speed issue, I tried using phash around each found keypoint, using the feature size/radius to determine the sub-rectangle. The trick to making this work well, is to grow/shrink the radius to generate different sub-rect levels (on the needle image). Typically the first level (unscaled) will match however often it takes a few more. I’m not 100% sure why this works, but I can imagine it enables features that are too small for phash to work (phash scales images down to 32x32).</p>
<p>Another issue is that SIFT will not distribute the keypoints optimally. If there is a section of the image with a lot of edges the keypoints will cluster there and you won’t get any in another area. I am using the GridAdaptedFeatureDetector in OpenCV to improve the distribution. Not sure what grid size is best, I am using a small grid (1x3 or 3x1 depending on image orientation).</p>
<p>You probably want to scale all the haystack images (and needle) to a smaller size prior to feature detection (I use 210px along maximum dimension). This will reduce noise in the image (always a problem for computer vision algorithms), also will focus detector on more prominent features.</p>
<p>For images of people, you might try face detection and use it to determine the image size to scale to and the grid size (for example largest face scaled to be 100px). The feature detector accounts for multiple scale levels (using pyramids) but there is a limitation to how many levels it will use (this is tunable of course).</p>
<p>The keypoint detector is probably working best when it returns less than the number of features you wanted. For example, if you ask for 400 and get 300 back, that’s good. If you get 400 back every time, probably some good features had to be left out.</p>
<p>The needle image can have less keypoints than the haystack images and still get good results. Adding more doesn’t necessarily get you huge gains, for example with J=400 and K=40 my hit rate is about 92%. With J=400 and K=400 the hit rate only goes up to 96%.</p>
<p>We can take advantage of the extreme speed of the hamming function to solve scaling, rotation, mirroring etc. A multiple-pass technique can be used. On each iteration, transform the sub-rectangles, re-hash, and run the search function again.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-a-pair-of-elements-from-an-array-whose-sum-equals-a-given-number-score-280616-in-2017" class="level3">
<h3>29: Find a pair of elements from an array whose sum equals a given number (score <a href="https://stackoverflow.com/q/4720271.html">280616</a> in 2017)</h3>
<section id="question-28" class="level4">
<h4>Question</h4>
<p>Given array of n integers and given a number X, find all the unique pairs of elements (a,b), whose summation is equal to X.</p>
<p>The following is my solution, it is O(nLog(n)+n), but I am not sure whether or not it is optimal.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true"></a><span class="dt">int</span> main(<span class="dt">void</span>)</span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true"></a>{</span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true"></a>    <span class="dt">int</span> arr [<span class="dv">10</span>] = {<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">0</span>};</span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true"></a>    findpair(arr, <span class="dv">10</span>, <span class="dv">7</span>);</span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true"></a>}</span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true"></a><span class="dt">void</span> findpair(<span class="dt">int</span> arr[], <span class="dt">int</span> len, <span class="dt">int</span> sum)</span>
<span id="cb210-7"><a href="#cb210-7" aria-hidden="true"></a>{</span>
<span id="cb210-8"><a href="#cb210-8" aria-hidden="true"></a>    std::sort(arr, arr+len);</span>
<span id="cb210-9"><a href="#cb210-9" aria-hidden="true"></a>    <span class="dt">int</span> i = <span class="dv">0</span>;</span>
<span id="cb210-10"><a href="#cb210-10" aria-hidden="true"></a>    <span class="dt">int</span> j = len -<span class="dv">1</span>;</span>
<span id="cb210-11"><a href="#cb210-11" aria-hidden="true"></a>    <span class="cf">while</span>( i &lt; j){</span>
<span id="cb210-12"><a href="#cb210-12" aria-hidden="true"></a>        <span class="cf">while</span>((arr[i] + arr[j]) &lt;= sum &amp;&amp; i &lt; j)</span>
<span id="cb210-13"><a href="#cb210-13" aria-hidden="true"></a>        {</span>
<span id="cb210-14"><a href="#cb210-14" aria-hidden="true"></a>            <span class="cf">if</span>((arr[i] + arr[j]) == sum)</span>
<span id="cb210-15"><a href="#cb210-15" aria-hidden="true"></a>                cout &lt;&lt; <span class="st">&quot;(&quot;</span> &lt;&lt; arr[i] &lt;&lt; <span class="st">&quot;,&quot;</span> &lt;&lt; arr[j] &lt;&lt; <span class="st">&quot;)&quot;</span> &lt;&lt; endl;</span>
<span id="cb210-16"><a href="#cb210-16" aria-hidden="true"></a>            i++;</span>
<span id="cb210-17"><a href="#cb210-17" aria-hidden="true"></a>        }</span>
<span id="cb210-18"><a href="#cb210-18" aria-hidden="true"></a>        j--;</span>
<span id="cb210-19"><a href="#cb210-19" aria-hidden="true"></a>        <span class="cf">while</span>((arr[i] + arr[j]) &gt;= sum &amp;&amp; i &lt; j)</span>
<span id="cb210-20"><a href="#cb210-20" aria-hidden="true"></a>        {</span>
<span id="cb210-21"><a href="#cb210-21" aria-hidden="true"></a>            <span class="cf">if</span>((arr[i] + arr[j]) == sum)</span>
<span id="cb210-22"><a href="#cb210-22" aria-hidden="true"></a>                cout &lt;&lt; <span class="st">&quot;(&quot;</span> &lt;&lt; arr[i] &lt;&lt; <span class="st">&quot;,&quot;</span> &lt;&lt; arr[j] &lt;&lt; <span class="st">&quot;)&quot;</span> &lt;&lt; endl;</span>
<span id="cb210-23"><a href="#cb210-23" aria-hidden="true"></a>            j--;</span>
<span id="cb210-24"><a href="#cb210-24" aria-hidden="true"></a>        }</span>
<span id="cb210-25"><a href="#cb210-25" aria-hidden="true"></a>    }</span>
<span id="cb210-26"><a href="#cb210-26" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-132" class="level4">
<h4>Answer accepted (score 132)</h4>
<div class="sourceCode" id="cb211"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true"></a></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true"></a><span class="er"># Let arr be the given array.</span></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true"></a></span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true"></a><span class="er"># And K be the give sum</span></span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true"></a></span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true"></a></span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true"></a><span class="cf">for</span> i=<span class="dv">0</span> to arr.length - <span class="dv">1</span> <span class="cf">do</span></span>
<span id="cb211-8"><a href="#cb211-8" aria-hidden="true"></a>  hash(arr[i]) = i  <span class="co">// key is the element and value is its index.</span></span>
<span id="cb211-9"><a href="#cb211-9" aria-hidden="true"></a>end-<span class="cf">for</span></span>
<span id="cb211-10"><a href="#cb211-10" aria-hidden="true"></a></span>
<span id="cb211-11"><a href="#cb211-11" aria-hidden="true"></a><span class="cf">for</span> i=<span class="dv">0</span> to arr.length - <span class="dv">1</span> <span class="cf">do</span></span>
<span id="cb211-12"><a href="#cb211-12" aria-hidden="true"></a>  <span class="cf">if</span> hash(K - arr[i]) != i  <span class="co">// if Kth element exists and it&#39;s different then we found a pair</span></span>
<span id="cb211-13"><a href="#cb211-13" aria-hidden="true"></a>    print <span class="st">&quot;pair i , hash(K - arr[i]) has sum K&quot;</span></span>
<span id="cb211-14"><a href="#cb211-14" aria-hidden="true"></a>  end-<span class="cf">if</span></span>
<span id="cb211-15"><a href="#cb211-15" aria-hidden="true"></a>end-<span class="cf">for</span></span></code></pre></div>
</section>
<section id="answer-2-score-179" class="level4">
<h4>Answer 2 (score 179)</h4>
<p>
There are 3 approaches to this solution:<br/> <br/> Let the sum be T and n be the size of array<br/>
</p>
<p>
<i>Approach 1:</i><br /> The naive way to do this would be to check all combinations (n choose 2). This exhaustive search is O(n<sup>2</sup>).<br /> <br /> <i>Approach 2:  </i><br />  A better way would be to sort the array. This takes O(n log n) <br /> Then for each x in array A, use binary search to look for T-x. This will take O(nlogn).<br /> So, overall search is  O(n log n)<br /> <br /> <i>Approach 3 : </i><br /> The best way would be to insert every element into a hash table (without sorting). This takes O(n) as constant time insertion.<br /> Then for every x, we can just look up its complement, T-x, which is O(1).<br /> Overall the run time of this approach is O(n).
</p>
<p>
<br/> You can refer more <b><a href="http://k2code.blogspot.in/2012/01/given-integer-array-and-number-x-find.html" rel="noreferrer">here</a></b>.Thanks.
</p>
<p><br /></p>
</section>
<section id="answer-3-score-61-1" class="level4">
<h4>Answer 3 (score 61)</h4>
<p><strong>Implementation in Java : Using codaddict’s algorithm (Maybe slightly different)</strong></p>
<div class="sourceCode" id="cb212"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true"></a>import java.util.HashMap;</span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true"></a></span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true"></a>public class ArrayPairSum {</span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true"></a></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true"></a></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true"></a>public <span class="dt">static</span> <span class="dt">void</span> main(String[] args) {        </span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true"></a></span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true"></a>    <span class="dt">int</span> []a = {<span class="dv">2</span>,<span class="dv">45</span>,<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">9</span>};</span>
<span id="cb212-9"><a href="#cb212-9" aria-hidden="true"></a>    printSumPairs(a,<span class="dv">10</span>);        </span>
<span id="cb212-10"><a href="#cb212-10" aria-hidden="true"></a></span>
<span id="cb212-11"><a href="#cb212-11" aria-hidden="true"></a>}</span>
<span id="cb212-12"><a href="#cb212-12" aria-hidden="true"></a></span>
<span id="cb212-13"><a href="#cb212-13" aria-hidden="true"></a></span>
<span id="cb212-14"><a href="#cb212-14" aria-hidden="true"></a>public <span class="dt">static</span> <span class="dt">void</span> printSumPairs(<span class="dt">int</span> []input, <span class="dt">int</span> k){</span>
<span id="cb212-15"><a href="#cb212-15" aria-hidden="true"></a>    Map&lt;Integer, Integer&gt; pairs = new HashMap&lt;Integer, Integer&gt;();</span>
<span id="cb212-16"><a href="#cb212-16" aria-hidden="true"></a></span>
<span id="cb212-17"><a href="#cb212-17" aria-hidden="true"></a>    <span class="cf">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>;i&lt;input.length;i++){</span>
<span id="cb212-18"><a href="#cb212-18" aria-hidden="true"></a></span>
<span id="cb212-19"><a href="#cb212-19" aria-hidden="true"></a>        <span class="cf">if</span>(pairs.containsKey(input[i]))</span>
<span id="cb212-20"><a href="#cb212-20" aria-hidden="true"></a>            System.out.println(input[i] +<span class="st">&quot;, &quot;</span>+ pairs.get(input[i]));</span>
<span id="cb212-21"><a href="#cb212-21" aria-hidden="true"></a>        <span class="cf">else</span></span>
<span id="cb212-22"><a href="#cb212-22" aria-hidden="true"></a>            pairs.put(k-input[i], input[i]);</span>
<span id="cb212-23"><a href="#cb212-23" aria-hidden="true"></a>    }</span>
<span id="cb212-24"><a href="#cb212-24" aria-hidden="true"></a></span>
<span id="cb212-25"><a href="#cb212-25" aria-hidden="true"></a>}</span>
<span id="cb212-26"><a href="#cb212-26" aria-hidden="true"></a>}</span></code></pre></div>
<p>For input = <code>{2,45,7,3,5,1,8,9}</code> and if Sum is <code>10</code></p>
<p>Output pairs:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true"></a><span class="dv">3</span>,<span class="dv">7</span> </span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true"></a><span class="dv">8</span>,<span class="dv">2</span></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true"></a><span class="dv">9</span>,<span class="dv">1</span></span></code></pre></div>
<p>Some notes about the solution :</p>
<ul>
<li>
We iterate only once through the array –&gt; O(n) time
</li>
<li>
Insertion and lookup time in Hash is O(1).
</li>
<li>
Overall time is O(n), although it uses extra space in terms of hash.
</li>
</ul>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="check-if-all-elements-in-a-list-are-identical-score-270180-in-2016" class="level3">
<h3>30: check if all elements in a list are identical (score <a href="https://stackoverflow.com/q/3844801.html">270180</a> in 2016)</h3>
<section id="question-29" class="level4">
<h4>Question</h4>
<p>I need the following function:</p>
<p><strong>Input</strong>: a <code>list</code></p>
<p><strong>Output</strong>:</p>
<ul>
<li>
<code>True</code> if all elements in the input list evaluate as equal to each other using the standard equality operator;
</li>
<li>
<code>False</code> otherwise.
</li>
</ul>
<p><strong>Performance</strong>: of course, I prefer not to incur any unnecessary overhead.</p>
<p>I feel it would be best to:</p>
<ul>
<li>
iterate through the list
</li>
<li>
compare adjacent elements
</li>
<li>
and <code>AND</code> all the resulting Boolean values
</li>
</ul>
<p>But I’m not sure what’s the most Pythonic way to do that.</p>
<hr>
<p><strong>EDIT</strong>:</p>
<p>Thank you for all the great answers. I rated up several, and it was really hard to choose between <span class="citation" data-cites="KennyTM">@KennyTM</span> and <span class="citation" data-cites="Ivo">@Ivo</span> van der Wijk solutions.</p>
<p>The lack of short-circuit feature only hurts on a long input (over ~50 elements) that have unequal elements early on. If this occurs often enough (how often depends on how long the lists might be), the short-circuit is required. The best short-circuit algorithm seems to be <span class="citation" data-cites="KennyTM">@KennyTM</span> <code>checkEqual1</code>. It pays, however, a significant cost for this:</p>
<ul>
<li>
up to 20x in performance nearly-identical lists
</li>
<li>
up to 2.5x in performance on short lists
</li>
</ul>
<p>If the long inputs with early unequal elements don’t happen (or happen sufficiently rarely), short-circuit isn’t required. Then, by far the fastest is <span class="citation" data-cites="Ivo">@Ivo</span> van der Wijk solution.</p>
</section>
<section id="answer-accepted-score-369" class="level4">
<h4>Answer accepted (score 369)</h4>
<p>General method:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true"></a>def checkEqual1(iterator):</span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true"></a>    iterator = iter(iterator)</span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true"></a>    try:</span>
<span id="cb214-4"><a href="#cb214-4" aria-hidden="true"></a>        first = next(iterator)</span>
<span id="cb214-5"><a href="#cb214-5" aria-hidden="true"></a>    except StopIteration:</span>
<span id="cb214-6"><a href="#cb214-6" aria-hidden="true"></a>        <span class="cf">return</span> True</span>
<span id="cb214-7"><a href="#cb214-7" aria-hidden="true"></a>    <span class="cf">return</span> all(first == rest <span class="cf">for</span> rest in iterator)</span></code></pre></div>
<p>One-liner:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true"></a>def checkEqual2(iterator):</span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true"></a>   <span class="cf">return</span> len(set(iterator)) &lt;= <span class="dv">1</span></span></code></pre></div>
<p>Also one-liner:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true"></a>def checkEqual3(lst):</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true"></a>   <span class="cf">return</span> lst[<span class="dv">1</span>:] == lst[:-<span class="dv">1</span>]</span></code></pre></div>
<p>The difference between the 3 versions are that:</p>
<ol>
<li>
In <code>checkEqual2</code> the content must be hashable.
</li>
<li>
<code>checkEqual1</code> and <code>checkEqual2</code> can use any iterators, but <code>checkEqual3</code> must take a sequence input, typically concrete containers like a list or tuple.
</li>
<li>
<code>checkEqual1</code> stops as soon as a difference is found.
</li>
<li>
Since <code>checkEqual1</code> contains more Python code, it is less efficient when many of the items are equal in the beginning.
</li>
<li>
Since <code>checkEqual2</code> and <code>checkEqual3</code> always perform O(N) copying operations, they will take longer if most of your input will return False.
</li>
<li>
For <code>checkEqual2</code> and <code>checkEqual3</code> it’s harder to adapt comparison from <code>a == b</code> to <code>a is b</code>.
</li>
</ol>
<hr>
<p><code>timeit</code> result, for Python 2.7 and (only s1, s4, s7, s9 should return True)</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true"></a>s1 = [<span class="dv">1</span>] * <span class="dv">5000</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true"></a>s2 = [<span class="dv">1</span>] * <span class="dv">4999</span> + [<span class="dv">2</span>]</span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true"></a>s3 = [<span class="dv">2</span>] + [<span class="dv">1</span>]*<span class="dv">4999</span></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true"></a>s4 = [set([<span class="dv">9</span>])] * <span class="dv">5000</span></span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true"></a>s5 = [set([<span class="dv">9</span>])] * <span class="dv">4999</span> + [set([<span class="dv">10</span>])]</span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true"></a>s6 = [set([<span class="dv">10</span>])] + [set([<span class="dv">9</span>])] * <span class="dv">4999</span></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true"></a>s7 = [<span class="dv">1</span>,<span class="dv">1</span>]</span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true"></a>s8 = [<span class="dv">1</span>,<span class="dv">2</span>]</span>
<span id="cb217-9"><a href="#cb217-9" aria-hidden="true"></a>s9 = []</span></code></pre></div>
<p>we get</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true"></a>      | checkEqual1 | checkEqual2 | checkEqual3  | checkEqualIvo | checkEqual6502 |</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true"></a>|-----|-------------|-------------|--------------|---------------|----------------|</span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true"></a>| s1  | <span class="fl">1.19</span>   msec | <span class="dv">348</span>    usec | <span class="dv">183</span>     usec | <span class="fl">51.6</span>    usec  | <span class="dv">121</span>     usec   |</span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true"></a>| s2  | <span class="fl">1.17</span>   msec | <span class="dv">376</span>    usec | <span class="dv">185</span>     usec | <span class="fl">50.9</span>    usec  | <span class="dv">118</span>     usec   |</span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true"></a>| s3  | <span class="fl">4.17</span>   usec | <span class="dv">348</span>    usec | <span class="dv">120</span>     usec | <span class="dv">264</span>     usec  | <span class="fl">61.3</span>    usec   |</span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true"></a>|     |             |             |              |               |                |</span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true"></a>| s4  | <span class="fl">1.73</span>   msec |             | <span class="dv">182</span>     usec | <span class="fl">50.5</span>    usec  | <span class="dv">121</span>     usec   |</span>
<span id="cb218-8"><a href="#cb218-8" aria-hidden="true"></a>| s5  | <span class="fl">1.71</span>   msec |             | <span class="dv">181</span>     usec | <span class="fl">50.6</span>    usec  | <span class="dv">125</span>     usec   |</span>
<span id="cb218-9"><a href="#cb218-9" aria-hidden="true"></a>| s6  | <span class="fl">4.29</span>   usec |             | <span class="dv">122</span>     usec | <span class="dv">423</span>     usec  | <span class="fl">61.1</span>    usec   |</span>
<span id="cb218-10"><a href="#cb218-10" aria-hidden="true"></a>|     |             |             |              |               |                |</span>
<span id="cb218-11"><a href="#cb218-11" aria-hidden="true"></a>| s7  | <span class="fl">3.1</span>    usec | <span class="fl">1.4</span>    usec | <span class="fl">1.24</span>    usec | <span class="fl">0.932</span>   usec  | <span class="fl">1.92</span>    usec   |</span>
<span id="cb218-12"><a href="#cb218-12" aria-hidden="true"></a>| s8  | <span class="fl">4.07</span>   usec | <span class="fl">1.54</span>   usec | <span class="fl">1.28</span>    usec | <span class="fl">0.997</span>   usec  | <span class="fl">1.79</span>    usec   |</span>
<span id="cb218-13"><a href="#cb218-13" aria-hidden="true"></a>| s9  | <span class="fl">5.91</span>   usec | <span class="fl">1.25</span>   usec | <span class="fl">0.749</span>   usec | <span class="fl">0.407</span>   usec  | <span class="fl">0.386</span>   usec   |</span></code></pre></div>
<p>Note:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true"></a></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true"></a><span class="er"># http://stackoverflow.com/q/3844948/</span></span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true"></a>def checkEqualIvo(lst):</span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true"></a>    <span class="cf">return</span> not lst or lst.count(lst[<span class="dv">0</span>]) == len(lst)</span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true"></a></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true"></a></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true"></a><span class="er"># http://stackoverflow.com/q/3844931/</span></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true"></a>def checkEqual6502(lst):</span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true"></a>    <span class="cf">return</span> not lst or [lst[<span class="dv">0</span>]]*len(lst) == lst</span></code></pre></div>
</section>
<section id="answer-2-score-269" class="level4">
<h4>Answer 2 (score 269)</h4>
<p>A solution faster than using set() that works on sequences (not iterables) is to simply count the first element. This assumes the list is non-empty (but that’s trivial to check, and decide yourself what the outcome should be on an empty list)</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true"></a>x.count(x[<span class="dv">0</span>]) == len(x)</span></code></pre></div>
<p>some simple benchmarks:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true"></a>&gt;&gt;&gt; timeit.timeit(&#39;len(set(s1))&lt;=<span class="dv">1</span><span class="er">&#39;</span>, &#39;s1=[<span class="dv">1</span>]*<span class="dv">5000</span><span class="er">&#39;</span>, number=<span class="dv">10000</span>)</span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true"></a><span class="fl">1.4383411407470703</span></span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true"></a>&gt;&gt;&gt; timeit.timeit(&#39;len(set(s1))&lt;=<span class="dv">1</span><span class="er">&#39;</span>, &#39;s1=[<span class="dv">1</span>]*<span class="dv">4999</span>+[<span class="dv">2</span>]&#39;, number=<span class="dv">10000</span>)</span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true"></a><span class="fl">1.4765670299530029</span></span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true"></a>&gt;&gt;&gt; timeit.timeit(&#39;s1.count(s1[<span class="dv">0</span>])==len(s1)&#39;, &#39;s1=[<span class="dv">1</span>]*<span class="dv">5000</span><span class="er">&#39;</span>, number=<span class="dv">10000</span>)</span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true"></a><span class="fl">0.26274609565734863</span></span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true"></a>&gt;&gt;&gt; timeit.timeit(&#39;s1.count(s1[<span class="dv">0</span>])==len(s1)&#39;, &#39;s1=[<span class="dv">1</span>]*<span class="dv">4999</span>+[<span class="dv">2</span>]&#39;, number=<span class="dv">10000</span>)</span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true"></a><span class="fl">0.25654196739196777</span></span></code></pre></div>
</section>
<section id="answer-3-score-134-1" class="level4">
<h4>Answer 3 (score 134)</h4>
<p>The simplest and most elegant way is as follows:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true"></a>all(x==myList[<span class="dv">0</span>] <span class="cf">for</span> x in myList)</span></code></pre></div>
<p>(Yes, this even works with the empty list! This is because this is one of the few cases where python has lazy semantics.)</p>
<p>Regarding performance, this will fail at the earliest possible time, so it is asymptotically optimal.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-create-the-most-compact-mapping-n-isprimen-up-to-a-limit-n-score-268425-in-2019" class="level3">
<h3>31: How to create the most compact mapping n → isprime(n) up to a limit N? (score <a href="https://stackoverflow.com/q/1801391.html">268425</a> in 2019)</h3>
<section id="question-30" class="level4">
<h4>Question</h4>
<p>
Naturally, for <code>bool isprime(number)</code> there would be a data structure I could query.<br> I <strong>define the best algorithm</strong>, to be the algorithm that produces a data structure with lowest memory consumption for the range (1, N], where N is a constant.<br> Just an example of what I am looking for: I could represent every odd number with one bit e.g. for the given range of numbers (1, 10], starts at 3: <code>1110</code>
</p>
<p>The following dictionary can be squeezed more, right? I could eliminate multiples of five with some work, but numbers that end with 1, 3, 7 or 9 must be there in the array of bits.</p>
<p>How do I solve the problem?</p>
</section>
<section id="answer-accepted-score-77" class="level4">
<h4>Answer accepted (score 77)</h4>
<p>There are many ways to do the <a href="http://en.wikipedia.org/wiki/Primality_test" rel="noreferrer">primality test</a>.</p>
<p>There isn’t really a data structure for you to query. If you have lots of numbers to test, you should probably run a <a href="http://en.wikipedia.org/wiki/Primality_test
#Probabilistic_tests" rel="noreferrer">probabilistic test</a> since those are faster, and then follow it up with a <a href="http://en.wikipedia.org/wiki/Primality_test#Fast_deterministic_tests" rel="noreferrer">deterministic test</a> to make sure the number is prime.</p>
<p>You should know that the math behind the fastest algorithms is not for the faint of heart.</p>
</section>
<section id="answer-2-score-206-1" class="level4">
<h4>Answer 2 (score 206)</h4>
<p>The fastest algorithm for general prime testing is <a href="http://en.wikipedia.org/wiki/AKS_primality_test" rel="noreferrer">AKS</a>. The Wikipedia article describes it at lengths and links to the original paper.</p>
<p>If you want to find big numbers, look into primes that have special forms like <a href="http://en.wikipedia.org/wiki/Mersenne_prime" rel="noreferrer">Mersenne primes</a>.</p>
<p>The algorithm I usually implement (easy to understand and code) is as follows (in Python):</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true"></a>def isprime(n):</span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true"></a>    <span class="st">&quot;&quot;&quot;Returns True if n is prime.&quot;&quot;&quot;</span></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true"></a>    <span class="cf">if</span> n == <span class="dv">2</span>:</span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true"></a>        <span class="cf">return</span> True</span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true"></a>    <span class="cf">if</span> n == <span class="dv">3</span>:</span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true"></a>        <span class="cf">return</span> True</span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true"></a>    <span class="cf">if</span> n % <span class="dv">2</span> == <span class="dv">0</span>:</span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true"></a>        <span class="cf">return</span> False</span>
<span id="cb223-9"><a href="#cb223-9" aria-hidden="true"></a>    <span class="cf">if</span> n % <span class="dv">3</span> == <span class="dv">0</span>:</span>
<span id="cb223-10"><a href="#cb223-10" aria-hidden="true"></a>        <span class="cf">return</span> False</span>
<span id="cb223-11"><a href="#cb223-11" aria-hidden="true"></a></span>
<span id="cb223-12"><a href="#cb223-12" aria-hidden="true"></a>    i = <span class="dv">5</span></span>
<span id="cb223-13"><a href="#cb223-13" aria-hidden="true"></a>    w = <span class="dv">2</span></span>
<span id="cb223-14"><a href="#cb223-14" aria-hidden="true"></a></span>
<span id="cb223-15"><a href="#cb223-15" aria-hidden="true"></a>    <span class="cf">while</span> i * i &lt;= n:</span>
<span id="cb223-16"><a href="#cb223-16" aria-hidden="true"></a>        <span class="cf">if</span> n % i == <span class="dv">0</span>:</span>
<span id="cb223-17"><a href="#cb223-17" aria-hidden="true"></a>            <span class="cf">return</span> False</span>
<span id="cb223-18"><a href="#cb223-18" aria-hidden="true"></a></span>
<span id="cb223-19"><a href="#cb223-19" aria-hidden="true"></a>        i += w</span>
<span id="cb223-20"><a href="#cb223-20" aria-hidden="true"></a>        w = <span class="dv">6</span> - w</span>
<span id="cb223-21"><a href="#cb223-21" aria-hidden="true"></a></span>
<span id="cb223-22"><a href="#cb223-22" aria-hidden="true"></a>    <span class="cf">return</span> True</span></code></pre></div>
<p>It’s a variant of the classic <code>O(sqrt(N))</code> algorithm. It uses the fact that a prime (except 2 and 3) is of form <code>6k - 1</code> or <code>6k + 1</code> and looks only at divisors of this form.</p>
<p>Sometimes, If I really want speed and <em>the range is limited</em>, I implement a pseudo-prime test based on <a href="http://en.wikipedia.org/wiki/Fermat&
#39;s_little_theorem" rel="noreferrer">Fermat’s little theorem</a>. If I really want more speed (i.e. avoid O(sqrt(N)) algorithm altogether), I precompute the false positives (see <a href="http://en.wikipedia.org/wiki/Carmichael_number" rel="noreferrer">Carmichael</a> numbers) and do a binary search. This is by far the fastest test I’ve ever implemented, the only drawback is that the range is limited.</p>
</section>
<section id="answer-3-score-26" class="level4">
<h4>Answer 3 (score 26)</h4>
<p>The best method, in my opinion, is to use what’s gone before.</p>
<p>There are lists of the first <code>N</code> primes on the internet with <code>N</code> stretching up to at least <a href="http://primes.utm.edu/lists/small/millions/" rel="noreferrer">fifty million</a>. Download the files and use them, it’s likely to be much faster than any other method you’ll come up with.</p>
<p>If you want an actual algorithm for making your own primes, Wikipedia has all sorts of good stuff on primes <a href="http://en.wikipedia.org/wiki/Prime_number" rel="noreferrer">here</a>, including links to the various methods for doing it, and prime testing <a href="http://en.wikipedia.org/wiki/Primality_test
#Probabilistic_tests" rel="noreferrer">here</a>, both probability-based and fast-deterministic methods.</p>
<p>There should be a concerted effort to find the first billion (or even more) primes and get them published on the net somewhere so people can stop doing this same job over and over and over and … :-)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-calculate-a-point-on-a-circles-circumference-score-260479-in-2019" class="level3">
<h3>32: How do I calculate a point on a circle’s circumference? (score <a href="https://stackoverflow.com/q/839899.html">260479</a> in 2019)</h3>
<section id="question-31" class="level4">
<h4>Question</h4>
<p>How can the following function be implemented in various languages?</p>
<p>Calculate the <code>(x,y)</code> point on the circumference of a circle, given input values of:</p>
<ul>
<li>
Radius
</li>
<li>
Angle
</li>
<li>
Origin (optional parameter, if supported by the language)
</li>
</ul>
</section>
<section id="answer-accepted-score-563" class="level4">
<h4>Answer accepted (score 563)</h4>
<p>The <a href="http://en.wikipedia.org/wiki/Circle
#Equations" rel="noreferrer">parametric equation for a circle</a> is</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true"></a>x = cx + r * cos(a)</span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true"></a>y = cy + r * sin(a)</span></code></pre></div>
<p>Where <em>r</em> is the radius, <em>cx,cy</em> the origin, and <em>a</em> the angle.</p>
<p>That’s pretty easy to adapt into any language with basic trig functions. <em>Note that most languages will use <a href="https://en.wikipedia.org/wiki/Radian" rel="noreferrer">radians</a> for the angle in trig functions, so rather than cycling through 0..360 degrees, you’re cycling through 0..2PI radians.</em></p>
</section>
<section id="answer-2-score-45" class="level4">
<h4>Answer 2 (score 45)</h4>
<p>Here is my implementation in C #:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true"></a>    public <span class="dt">static</span> PointF PointOnCircle(<span class="dt">float</span> radius, <span class="dt">float</span> angleInDegrees, PointF origin)</span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true"></a>    {</span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true"></a>        <span class="co">// Convert from degrees to radians via multiplication by PI/180        </span></span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true"></a>        <span class="dt">float</span> x = (<span class="dt">float</span>)(radius * Math.Cos(angleInDegrees * Math.PI / <span class="dv">180</span><span class="er">F</span>)) + origin.X;</span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true"></a>        <span class="dt">float</span> y = (<span class="dt">float</span>)(radius * Math.Sin(angleInDegrees * Math.PI / <span class="dv">180</span><span class="er">F</span>)) + origin.Y;</span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true"></a></span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true"></a>        <span class="cf">return</span> new PointF(x, y);</span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true"></a>    }</span></code></pre></div>
</section>
<section id="answer-3-score-15" class="level4">
<h4>Answer 3 (score 15)</h4>
<p>Who needs trig when you have <a href="http://imgs.xkcd.com/comics/e_to_the_pi_times_i.png" rel="noreferrer">complex numbers</a>:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true"></a></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;complex.h&gt;</span></span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true"></a></span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb226-5"><a href="#cb226-5" aria-hidden="true"></a></span>
<span id="cb226-6"><a href="#cb226-6" aria-hidden="true"></a></span>
<span id="cb226-7"><a href="#cb226-7" aria-hidden="true"></a><span class="pp">#define PI      3.14159265358979323846</span></span>
<span id="cb226-8"><a href="#cb226-8" aria-hidden="true"></a></span>
<span id="cb226-9"><a href="#cb226-9" aria-hidden="true"></a><span class="kw">typedef</span> <span class="dt">complex</span> <span class="dt">double</span> Point;</span>
<span id="cb226-10"><a href="#cb226-10" aria-hidden="true"></a></span>
<span id="cb226-11"><a href="#cb226-11" aria-hidden="true"></a>Point point_on_circle ( <span class="dt">double</span> radius, <span class="dt">double</span> angle_in_degrees, Point centre )</span>
<span id="cb226-12"><a href="#cb226-12" aria-hidden="true"></a>{</span>
<span id="cb226-13"><a href="#cb226-13" aria-hidden="true"></a>    <span class="cf">return</span> centre + radius * cexp ( PI * I * ( angle_in_degrees  / <span class="fl">180.0</span> ) );</span>
<span id="cb226-14"><a href="#cb226-14" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-reverse-a-singly-linked-list-using-only-two-pointers-score-259554-in-2019" class="level3">
<h3>33: How to reverse a singly linked list using only two pointers? (score <a href="https://stackoverflow.com/q/1801549.html">259554</a> in 2019)</h3>
<section id="question-32" class="level4">
<h4>Question</h4>
<p>I wonder if there exists some logic to reverse a singly-linked list using only two pointers.</p>
<p>The following is used to reverse the single linked list using three pointers namely <code>p</code>, <code>q</code>, <code>r</code>:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true"></a><span class="kw">struct</span> node {</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true"></a>    <span class="dt">int</span> data;</span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true"></a>    <span class="kw">struct</span> node *link;</span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true"></a>};</span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true"></a></span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true"></a><span class="dt">void</span> reverse() {</span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true"></a>    <span class="kw">struct</span> node *p = first,</span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true"></a>                *q = NULL,</span>
<span id="cb227-9"><a href="#cb227-9" aria-hidden="true"></a>                *r;</span>
<span id="cb227-10"><a href="#cb227-10" aria-hidden="true"></a></span>
<span id="cb227-11"><a href="#cb227-11" aria-hidden="true"></a>    <span class="cf">while</span> (p != NULL) {</span>
<span id="cb227-12"><a href="#cb227-12" aria-hidden="true"></a>        r = q;</span>
<span id="cb227-13"><a href="#cb227-13" aria-hidden="true"></a>        q = p;</span>
<span id="cb227-14"><a href="#cb227-14" aria-hidden="true"></a>        p = p-&gt;link;</span>
<span id="cb227-15"><a href="#cb227-15" aria-hidden="true"></a>        q-&gt;link = r;</span>
<span id="cb227-16"><a href="#cb227-16" aria-hidden="true"></a>    }</span>
<span id="cb227-17"><a href="#cb227-17" aria-hidden="true"></a>    first = q;</span>
<span id="cb227-18"><a href="#cb227-18" aria-hidden="true"></a>}</span></code></pre></div>
<p>Is there any other alternate to reverse the linked list? What would be the best logic to reverse a singly linked list, in terms of time complexity?</p>
</section>
<section id="answer-accepted-score-131" class="level4">
<h4>Answer accepted (score 131)</h4>
<p>Any alternative? No, this is as simple as it gets, and there’s no fundamentally-different way of doing it. This algorithm is already O(n) time, and you can’t get any faster than that, as you must modify every node.</p>
<p>It looks like your code is on the right track, but it’s not quite working in the form above. Here’s a working version:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true"></a></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true"></a></span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true"></a><span class="kw">typedef</span> <span class="kw">struct</span> Node {</span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true"></a>  <span class="dt">char</span> data;</span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true"></a>  <span class="kw">struct</span> Node* next;</span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true"></a>} Node;</span>
<span id="cb228-8"><a href="#cb228-8" aria-hidden="true"></a></span>
<span id="cb228-9"><a href="#cb228-9" aria-hidden="true"></a><span class="dt">void</span> print_list(Node* root) {</span>
<span id="cb228-10"><a href="#cb228-10" aria-hidden="true"></a>  <span class="cf">while</span> (root) {</span>
<span id="cb228-11"><a href="#cb228-11" aria-hidden="true"></a>    printf(<span class="st">&quot;%c &quot;</span>, root-&gt;data);</span>
<span id="cb228-12"><a href="#cb228-12" aria-hidden="true"></a>    root = root-&gt;next;</span>
<span id="cb228-13"><a href="#cb228-13" aria-hidden="true"></a>  }</span>
<span id="cb228-14"><a href="#cb228-14" aria-hidden="true"></a>  printf(<span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb228-15"><a href="#cb228-15" aria-hidden="true"></a>}</span>
<span id="cb228-16"><a href="#cb228-16" aria-hidden="true"></a></span>
<span id="cb228-17"><a href="#cb228-17" aria-hidden="true"></a>Node* reverse(Node* root) {</span>
<span id="cb228-18"><a href="#cb228-18" aria-hidden="true"></a>  Node* new_root = <span class="dv">0</span>;</span>
<span id="cb228-19"><a href="#cb228-19" aria-hidden="true"></a>  <span class="cf">while</span> (root) {</span>
<span id="cb228-20"><a href="#cb228-20" aria-hidden="true"></a>    Node* next = root-&gt;next;</span>
<span id="cb228-21"><a href="#cb228-21" aria-hidden="true"></a>    root-&gt;next = new_root;</span>
<span id="cb228-22"><a href="#cb228-22" aria-hidden="true"></a>    new_root = root;</span>
<span id="cb228-23"><a href="#cb228-23" aria-hidden="true"></a>    root = next;</span>
<span id="cb228-24"><a href="#cb228-24" aria-hidden="true"></a>  }</span>
<span id="cb228-25"><a href="#cb228-25" aria-hidden="true"></a>  <span class="cf">return</span> new_root;</span>
<span id="cb228-26"><a href="#cb228-26" aria-hidden="true"></a>}</span>
<span id="cb228-27"><a href="#cb228-27" aria-hidden="true"></a></span>
<span id="cb228-28"><a href="#cb228-28" aria-hidden="true"></a><span class="dt">int</span> main() {</span>
<span id="cb228-29"><a href="#cb228-29" aria-hidden="true"></a>  Node d = { <span class="ch">&#39;d&#39;</span>, <span class="dv">0</span> };</span>
<span id="cb228-30"><a href="#cb228-30" aria-hidden="true"></a>  Node c = { <span class="ch">&#39;c&#39;</span>, &amp;d };</span>
<span id="cb228-31"><a href="#cb228-31" aria-hidden="true"></a>  Node b = { <span class="ch">&#39;b&#39;</span>, &amp;c };</span>
<span id="cb228-32"><a href="#cb228-32" aria-hidden="true"></a>  Node a = { <span class="ch">&#39;a&#39;</span>, &amp;b };</span>
<span id="cb228-33"><a href="#cb228-33" aria-hidden="true"></a></span>
<span id="cb228-34"><a href="#cb228-34" aria-hidden="true"></a>  Node* root = &amp;a;</span>
<span id="cb228-35"><a href="#cb228-35" aria-hidden="true"></a>  print_list(root);</span>
<span id="cb228-36"><a href="#cb228-36" aria-hidden="true"></a>  root = reverse(root);</span>
<span id="cb228-37"><a href="#cb228-37" aria-hidden="true"></a>  print_list(root);</span>
<span id="cb228-38"><a href="#cb228-38" aria-hidden="true"></a></span>
<span id="cb228-39"><a href="#cb228-39" aria-hidden="true"></a>  <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb228-40"><a href="#cb228-40" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-44" class="level4">
<h4>Answer 2 (score 44)</h4>
<p>I hate to be the bearer of bad news but I don’t think your three-pointer solution actually works. When I used it in the following test harness, the list was reduced to one node, as per the following output:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true"></a>==========</span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true"></a><span class="dv">4</span></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true"></a><span class="dv">3</span></span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true"></a><span class="dv">2</span></span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true"></a><span class="dv">1</span></span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true"></a><span class="dv">0</span></span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true"></a>==========</span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true"></a><span class="dv">4</span></span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true"></a>==========</span></code></pre></div>
<p>You won’t get better time complexity than your solution since it’s O(n) and you have to visit every node to change the pointers, but you <em>can</em> do a solution with only two extra pointers quite easily, as shown in the following code:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true"></a></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true"></a></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true"></a><span class="co">// The list element type and head.</span></span>
<span id="cb230-5"><a href="#cb230-5" aria-hidden="true"></a></span>
<span id="cb230-6"><a href="#cb230-6" aria-hidden="true"></a><span class="kw">struct</span> node { </span>
<span id="cb230-7"><a href="#cb230-7" aria-hidden="true"></a>    <span class="dt">int</span> data;</span>
<span id="cb230-8"><a href="#cb230-8" aria-hidden="true"></a>    <span class="kw">struct</span> node *link;</span>
<span id="cb230-9"><a href="#cb230-9" aria-hidden="true"></a>};</span>
<span id="cb230-10"><a href="#cb230-10" aria-hidden="true"></a><span class="dt">static</span> <span class="kw">struct</span> node *first = NULL;</span>
<span id="cb230-11"><a href="#cb230-11" aria-hidden="true"></a></span>
<span id="cb230-12"><a href="#cb230-12" aria-hidden="true"></a><span class="co">// A reverse function which uses only two extra pointers.</span></span>
<span id="cb230-13"><a href="#cb230-13" aria-hidden="true"></a></span>
<span id="cb230-14"><a href="#cb230-14" aria-hidden="true"></a><span class="dt">void</span> reverse() {</span>
<span id="cb230-15"><a href="#cb230-15" aria-hidden="true"></a>    <span class="co">// curNode traverses the list, first is reset to empty list.</span></span>
<span id="cb230-16"><a href="#cb230-16" aria-hidden="true"></a>    <span class="kw">struct</span> node *curNode = first, *nxtNode;</span>
<span id="cb230-17"><a href="#cb230-17" aria-hidden="true"></a>    first = NULL;</span>
<span id="cb230-18"><a href="#cb230-18" aria-hidden="true"></a></span>
<span id="cb230-19"><a href="#cb230-19" aria-hidden="true"></a>    <span class="co">// Until no more in list, insert current before first and advance.</span></span>
<span id="cb230-20"><a href="#cb230-20" aria-hidden="true"></a>    <span class="cf">while</span> (curNode != NULL) {</span>
<span id="cb230-21"><a href="#cb230-21" aria-hidden="true"></a>        <span class="co">// Need to save next node since we&#39;re changing the current.</span></span>
<span id="cb230-22"><a href="#cb230-22" aria-hidden="true"></a>        nxtNode = curNode-&gt;link;</span>
<span id="cb230-23"><a href="#cb230-23" aria-hidden="true"></a></span>
<span id="cb230-24"><a href="#cb230-24" aria-hidden="true"></a>        <span class="co">// Insert at start of new list.</span></span>
<span id="cb230-25"><a href="#cb230-25" aria-hidden="true"></a>        curNode-&gt;link = first;</span>
<span id="cb230-26"><a href="#cb230-26" aria-hidden="true"></a>        first = curNode;</span>
<span id="cb230-27"><a href="#cb230-27" aria-hidden="true"></a></span>
<span id="cb230-28"><a href="#cb230-28" aria-hidden="true"></a>        <span class="co">// Advance to next.</span></span>
<span id="cb230-29"><a href="#cb230-29" aria-hidden="true"></a>        curNode = nxtNode;</span>
<span id="cb230-30"><a href="#cb230-30" aria-hidden="true"></a>    }</span>
<span id="cb230-31"><a href="#cb230-31" aria-hidden="true"></a>}</span>
<span id="cb230-32"><a href="#cb230-32" aria-hidden="true"></a></span>
<span id="cb230-33"><a href="#cb230-33" aria-hidden="true"></a><span class="co">// Code to dump the current list.</span></span>
<span id="cb230-34"><a href="#cb230-34" aria-hidden="true"></a></span>
<span id="cb230-35"><a href="#cb230-35" aria-hidden="true"></a><span class="dt">static</span> <span class="dt">void</span> dumpNodes() {</span>
<span id="cb230-36"><a href="#cb230-36" aria-hidden="true"></a>    <span class="kw">struct</span> node *curNode = first;</span>
<span id="cb230-37"><a href="#cb230-37" aria-hidden="true"></a>    printf (<span class="st">&quot;==========</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb230-38"><a href="#cb230-38" aria-hidden="true"></a>    <span class="cf">while</span> (curNode != NULL) {</span>
<span id="cb230-39"><a href="#cb230-39" aria-hidden="true"></a>        printf (<span class="st">&quot;%d</span><span class="sc">\n</span><span class="st">&quot;</span>, curNode-&gt;data);</span>
<span id="cb230-40"><a href="#cb230-40" aria-hidden="true"></a>        curNode = curNode-&gt;link;</span>
<span id="cb230-41"><a href="#cb230-41" aria-hidden="true"></a>    }</span>
<span id="cb230-42"><a href="#cb230-42" aria-hidden="true"></a>}</span>
<span id="cb230-43"><a href="#cb230-43" aria-hidden="true"></a></span>
<span id="cb230-44"><a href="#cb230-44" aria-hidden="true"></a><span class="co">// Test harness main program.</span></span>
<span id="cb230-45"><a href="#cb230-45" aria-hidden="true"></a></span>
<span id="cb230-46"><a href="#cb230-46" aria-hidden="true"></a><span class="dt">int</span> main (<span class="dt">void</span>) {</span>
<span id="cb230-47"><a href="#cb230-47" aria-hidden="true"></a>    <span class="dt">int</span> i;</span>
<span id="cb230-48"><a href="#cb230-48" aria-hidden="true"></a>    <span class="kw">struct</span> node *newnode;</span>
<span id="cb230-49"><a href="#cb230-49" aria-hidden="true"></a></span>
<span id="cb230-50"><a href="#cb230-50" aria-hidden="true"></a>    <span class="co">// Create list (using actually the same insert-before-first</span></span>
<span id="cb230-51"><a href="#cb230-51" aria-hidden="true"></a>    <span class="co">// that is used in reverse function.</span></span>
<span id="cb230-52"><a href="#cb230-52" aria-hidden="true"></a></span>
<span id="cb230-53"><a href="#cb230-53" aria-hidden="true"></a>    <span class="cf">for</span> (i = <span class="dv">0</span>; i &lt; <span class="dv">5</span>; i++) {</span>
<span id="cb230-54"><a href="#cb230-54" aria-hidden="true"></a>        newnode = malloc (<span class="kw">sizeof</span> (<span class="kw">struct</span> node));</span>
<span id="cb230-55"><a href="#cb230-55" aria-hidden="true"></a>        newnode-&gt;data = i;</span>
<span id="cb230-56"><a href="#cb230-56" aria-hidden="true"></a>        newnode-&gt;link = first;</span>
<span id="cb230-57"><a href="#cb230-57" aria-hidden="true"></a>        first = newnode;</span>
<span id="cb230-58"><a href="#cb230-58" aria-hidden="true"></a>    }</span>
<span id="cb230-59"><a href="#cb230-59" aria-hidden="true"></a></span>
<span id="cb230-60"><a href="#cb230-60" aria-hidden="true"></a>    <span class="co">// Dump list, reverse it, then dump again.</span></span>
<span id="cb230-61"><a href="#cb230-61" aria-hidden="true"></a></span>
<span id="cb230-62"><a href="#cb230-62" aria-hidden="true"></a>    dumpNodes();</span>
<span id="cb230-63"><a href="#cb230-63" aria-hidden="true"></a>    reverse();</span>
<span id="cb230-64"><a href="#cb230-64" aria-hidden="true"></a>    dumpNodes();</span>
<span id="cb230-65"><a href="#cb230-65" aria-hidden="true"></a>    printf (<span class="st">&quot;==========</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb230-66"><a href="#cb230-66" aria-hidden="true"></a></span>
<span id="cb230-67"><a href="#cb230-67" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb230-68"><a href="#cb230-68" aria-hidden="true"></a>}</span></code></pre></div>
<p>This code outputs:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true"></a>==========</span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true"></a><span class="dv">4</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true"></a><span class="dv">3</span></span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true"></a><span class="dv">2</span></span>
<span id="cb231-5"><a href="#cb231-5" aria-hidden="true"></a><span class="dv">1</span></span>
<span id="cb231-6"><a href="#cb231-6" aria-hidden="true"></a><span class="dv">0</span></span>
<span id="cb231-7"><a href="#cb231-7" aria-hidden="true"></a>==========</span>
<span id="cb231-8"><a href="#cb231-8" aria-hidden="true"></a><span class="dv">0</span></span>
<span id="cb231-9"><a href="#cb231-9" aria-hidden="true"></a><span class="dv">1</span></span>
<span id="cb231-10"><a href="#cb231-10" aria-hidden="true"></a><span class="dv">2</span></span>
<span id="cb231-11"><a href="#cb231-11" aria-hidden="true"></a><span class="dv">3</span></span>
<span id="cb231-12"><a href="#cb231-12" aria-hidden="true"></a><span class="dv">4</span></span>
<span id="cb231-13"><a href="#cb231-13" aria-hidden="true"></a>==========</span></code></pre></div>
<p>which I think is what you were after. It can actually do this since, once you’ve loaded up <code>first</code> into the pointer traversing the list, you can re-use <code>first</code> at will.</p>
</section>
<section id="answer-3-score-25" class="level4">
<h4>Answer 3 (score 25)</h4>
<div class="sourceCode" id="cb232"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true"></a></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stddef.h&gt;</span></span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true"></a></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true"></a><span class="kw">typedef</span> <span class="kw">struct</span> Node {</span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true"></a>    <span class="kw">struct</span> Node *next;</span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true"></a>    <span class="dt">int</span> data;</span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true"></a>} Node;</span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true"></a></span>
<span id="cb232-9"><a href="#cb232-9" aria-hidden="true"></a>Node * reverse(Node *cur) {</span>
<span id="cb232-10"><a href="#cb232-10" aria-hidden="true"></a>    Node *prev = NULL;</span>
<span id="cb232-11"><a href="#cb232-11" aria-hidden="true"></a>    <span class="cf">while</span> (cur) {</span>
<span id="cb232-12"><a href="#cb232-12" aria-hidden="true"></a>        Node *temp = cur;</span>
<span id="cb232-13"><a href="#cb232-13" aria-hidden="true"></a>        cur = cur-&gt;next; <span class="co">// advance cur</span></span>
<span id="cb232-14"><a href="#cb232-14" aria-hidden="true"></a>        temp-&gt;next = prev;</span>
<span id="cb232-15"><a href="#cb232-15" aria-hidden="true"></a>        prev = temp; <span class="co">// advance prev</span></span>
<span id="cb232-16"><a href="#cb232-16" aria-hidden="true"></a>    }</span>
<span id="cb232-17"><a href="#cb232-17" aria-hidden="true"></a>    <span class="cf">return</span> prev;</span>
<span id="cb232-18"><a href="#cb232-18" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="easy-interview-question-got-harder-given-numbers-1..100-find-the-missing-numbers-given-exactly-k-are-missing-score-256244-in-2019" class="level3">
<h3>34: Easy interview question got harder: given numbers 1..100, find the missing number(s) given exactly k are missing (score <a href="https://stackoverflow.com/q/3492302.html">256244</a> in 2019)</h3>
<section id="question-33" class="level4">
<h4>Question</h4>
<p>I had an interesting job interview experience a while back. The question started really easy:</p>
<blockquote>
<strong>Q1</strong>: We have a bag containing numbers <code>1</code>, <code>2</code>, <code>3</code>, …, <code>100</code>. Each number appears exactly once, so there are 100 numbers. Now one number is randomly picked out of the bag. Find the missing number.
</blockquote>
<p>I’ve heard this interview question before, of course, so I very quickly answered along the lines of:</p>
<blockquote>
<p><strong>A1</strong>: Well, the sum of the numbers <code>1 + 2 + 3 + … + N</code> is <code>(N+1)(N/2)</code> (see <a href="http://en.wikipedia.org/wiki/Arithmetic_sum
#Sum" rel="noreferrer">Wikipedia: sum of arithmetic series</a>). For <code>N = 100</code>, the sum is <code>5050</code>.</p>
Thus, if all numbers are present in the bag, the sum will be exactly <code>5050</code>. Since one number is missing, the sum will be less than this, and the difference is that number. So we can find that missing number in <code>O(N)</code> time and <code>O(1)</code> space.
</blockquote>
<p>At this point I thought I had done well, but all of a sudden the question took an unexpected turn:</p>
<blockquote>
<strong>Q2</strong>: That is correct, but now how would you do this if <em>TWO</em> numbers are missing?
</blockquote>
<p>I had never seen/heard/considered this variation before, so I panicked and couldn’t answer the question. The interviewer insisted on knowing my thought process, so I mentioned that perhaps we can get more information by comparing against the expected product, or perhaps doing a second pass after having gathered some information from the first pass, etc, but I really was just shooting in the dark rather than actually having a clear path to the solution.</p>
<p>The interviewer did try to encourage me by saying that having a second equation is indeed one way to solve the problem. At this point I was kind of upset (for not knowing the answer before hand), and asked if this is a general (read: “useful”) programming technique, or if it’s just a trick/gotcha answer.</p>
<p>The interviewer’s answer surprised me: you can generalize the technique to find 3 missing numbers. In fact, you can generalize it to find <em>k</em> missing numbers.</p>
<blockquote>
<strong>Qk</strong>: If exactly <em>k</em> numbers are missing from the bag, how would you find it efficiently?
</blockquote>
<p>This was a few months ago, and I still couldn’t figure out what this technique is. Obviously there’s a <code>Ω(N)</code> time lower bound since we must scan all the numbers at least once, but the interviewer insisted that the <em>TIME</em> and <em>SPACE</em> complexity of the solving technique (minus the <code>O(N)</code> time input scan) is defined in <em>k</em> not <em>N</em>.</p>
<p>So the question here is simple:</p>
<ul>
<li>
How would you solve <strong>Q2</strong>?
</li>
<li>
How would you solve <strong>Q3</strong>?
</li>
<li>
How would you solve <strong>Qk</strong>?
</li>
</ul>
<hr>
<h5>
Clarifications
</h3>
<ul>
<li>
Generally there are <em>N</em> numbers from 1..<em>N</em>, not just 1..100.
</li>
<li>
I’m not looking for the obvious set-based solution, e.g. using a <a href="http://en.wikipedia.org/wiki/Bit_array" rel="noreferrer">bit set</a>, encoding the presence/absence each number by the value of a designated bit, therefore using <code>O(N)</code> bits in additional space. We can’t afford any additional space proportional to <em>N</em>.
</li>
<li>
I’m also not looking for the obvious sort-first approach. This and the set-based approach are worth mentioning in an interview (they are easy to implement, and depending on <em>N</em>, can be very practical). I’m looking for the Holy Grail solution (which may or may not be practical to implement, but has the desired asymptotic characteristics nevertheless).
</li>
</ul>
<p>So again, of course you must scan the input in <code>O(N)</code>, but you can only capture small amount of information (defined in terms of <em>k</em> not <em>N</em>), and must then find the <em>k</em> missing numbers somehow.</p>
</section>
<section id="answer-accepted-score-574" class="level4">
<h4>Answer accepted (score 574)</h4>
<p>Here’s a summary of <a href="https://stackoverflow.com/questions/3492302/easy-interview-question-got-harder-given-numbers-1-100-find-the-missing-number/3492664
#3492664">Dimitris Andreou’s</a> <a href="http://books.google.com/books?id=415loiMd_c0C&amp;lpg=PP1&amp;dq=muthukrishnan%20data%20stream%20algorithms&amp;hl=el&amp;pg=PA1#v=onepage&amp;q=muthukrishnan%20data%20stream%20algorithms&amp;f=false" rel="noreferrer">link</a>.</p>
<p>Remember sum of i-th powers, where i=1,2,..,k. This reduces the problem to solving the system of equations</p>
<p>a<sub>1</sub> + a<sub>2</sub> + … + a<sub>k</sub> = b<sub>1</sub></p>
<p>a<sub>1</sub><sup>2</sup> + a<sub>2</sub><sup>2</sup> + … + a<sub>k</sub><sup>2</sup> = b<sub>2</sub></p>
<p>…</p>
<p>a<sub>1</sub><sup>k</sup> + a<sub>2</sub><sup>k</sup> + … + a<sub>k</sub><sup>k</sup> = b<sub>k</sub></p>
<p>Using <a href="https://en.wikipedia.org/wiki/Newton_identities
#Formulation_in_terms_of_symmetric_polynomials" rel="noreferrer">Newton’s identities</a>, knowing b<sub>i</sub> allows to compute</p>
<p>c<sub>1</sub> = a<sub>1</sub> + a<sub>2</sub> + … a<sub>k</sub></p>
<p>c<sub>2</sub> = a<sub>1</sub>a<sub>2</sub> + a<sub>1</sub>a<sub>3</sub> + … + a<sub>k-1</sub>a<sub>k</sub></p>
<p>…</p>
<p>c<sub>k</sub> = a<sub>1</sub>a<sub>2</sub> … a<sub>k</sub></p>
<p>If you expand the polynomial (x-a<sub>1</sub>)…(x-a<sub>k</sub>) the coefficients will be exactly c<sub>1</sub>, …, c<sub>k</sub> - see <a href="https://en.wikipedia.org/wiki/Vi%C3%A8te&
#39;s_formulas" rel="noreferrer">Viète’s formulas</a>. Since every polynomial factors uniquely (ring of polynomials is an <a href="https://en.wikipedia.org/wiki/Euclidean_domain" rel="noreferrer">Euclidean domain</a>), this means a<sub>i</sub> are uniquely determined, up to permutation.</p>
<p>This ends a proof that remembering powers is enough to recover the numbers. For constant k, this is a good approach.</p>
<p>However, when k is varying, the direct approach of computing c<sub>1</sub>,…,c<sub>k</sub> is prohibitely expensive, since e.g. c<sub>k</sub> is the product of all missing numbers, magnitude n!/(n-k)!. To overcome this, perform <a href="https://en.wikipedia.org/wiki/Finite_field_arithmetic" rel="noreferrer">computations in Z<sub>q</sub> field</a>, where q is a prime such that n &lt;= q &lt; 2n - it exists by <a href="https://en.wikipedia.org/wiki/Bertrand&
#39;s_postulate" rel="noreferrer">Bertrand’s postulate</a>. The proof doesn’t need to be changed, since the formulas still hold, and factorization of polynomials is still unique. You also need an algorithm for factorization over finite fields, for example the one by <a href="https://en.wikipedia.org/wiki/Berlekamp&#39;s_algorithm" rel="noreferrer">Berlekamp</a> or <a href="https://en.wikipedia.org/wiki/Cantor%E2%80%93Zassenhaus_algorithm" rel="noreferrer">Cantor-Zassenhaus</a>.</p>
<p>High level pseudocode for constant k:</p>
<ul>
<li>
Compute i-th powers of given numbers
</li>
<li>
Subtract to get sums of i-th powers of unknown numbers. Call the sums b<sub>i</sub>.
</li>
<li>
Use Newton’s identities to compute coefficients from b<sub>i</sub>; call them c<sub>i</sub>. Basically, c<sub>1</sub> = b<sub>1</sub>; c<sub>2</sub> = (c<sub>1</sub>b<sub>1</sub> - b<sub>2</sub>)/2; see Wikipedia for exact formulas
</li>
<li>
Factor the polynomial x<sup>k</sup>-c<sub>1</sub>x<sup>k-1</sup> + … + c<sub>k</sub>.
</li>
<li>
The roots of the polynomial are the needed numbers a<sub>1</sub>, …, a<sub>k</sub>.
</li>
</ul>
<p>For varying k, find a prime n &lt;= q &lt; 2n using e.g. Miller-Rabin, and perform the steps with all numbers reduced modulo q.</p>
<p>EDIT: The previous version of this answer stated that instead of Z<sub>q</sub>, where q is prime, it is possible to use a finite field of characteristic 2 (q=2^(log n)). This is not the case, since Newton’s formulas require division by numbers up to k.</p>
</section>
<section id="answer-2-score-237" class="level4">
<h4>Answer 2 (score 237)</h4>
<p>You will find it by reading the couple of pages of <em><a href="http://books.google.com/books?id=415loiMd_c0C&amp;lpg=PP1&amp;dq=muthukrishnan%20data%20stream%20algorithms&amp;hl=el&amp;pg=PA1
#v=onepage&amp;q=muthukrishnan%20data%20stream%20algorithms&amp;f=false" rel="noreferrer">Muthukrishnan - Data Stream Algorithms: Puzzle 1: Finding Missing Numbers</a></em>. <strong>It shows exactly the generalization you are looking for</strong>. Probably this is what your interviewer read and why he posed these questions.</p>
<p>Now, if only people would start deleting the answers that are subsumed or superseded by Muthukrishnan’s treatment, and make this text easier to find. :)</p>
<hr>
<p><strong>Also see <a href="https://stackoverflow.com/questions/3492302/easy-interview-question-got-harder-given-numbers-1-100-find-the-missing-number/3492967
#3492967">sdcvvc’s</a> directly related answer</strong>, which also includes pseudocode (hurray! no need to read those tricky math formulations :)) (thanks, great work!).</p>
</section>
<section id="answer-3-score-170" class="level4">
<h4>Answer 3 (score 170)</h4>
<p>We can solve Q2 by summing both the numbers themselves, and the <em>squares</em> of the numbers.</p>
<p>We can then reduce the problem to</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true"></a>k1 + k2 = x</span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true"></a>k1^<span class="dv">2</span> + k2^<span class="dv">2</span> = y</span></code></pre></div>
<p>Where <code>x</code> and <code>y</code> are how far the sums are below the expected values.</p>
<p>Substituting gives us:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true"></a>(x-k2)^<span class="dv">2</span> + k2^<span class="dv">2</span> = y</span></code></pre></div>
<p>Which we can then solve to determine our missing numbers.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-merge-two-sorted-arrays-into-a-sorted-array-score-245609-in-2015" class="level3">
<h3>35: How to merge two sorted arrays into a sorted array? (score <a href="https://stackoverflow.com/q/5958169.html">245609</a> in 2015)</h3>
<section id="question-34" class="level4">
<h4>Question</h4>
<p>This was asked of me in an interview and this is the solution I provided:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true"></a>public <span class="dt">static</span> <span class="dt">int</span>[] merge(<span class="dt">int</span>[] a, <span class="dt">int</span>[] b) {</span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true"></a></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true"></a>    <span class="dt">int</span>[] answer = new <span class="dt">int</span>[a.length + b.length];</span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true"></a>    <span class="dt">int</span> i = <span class="dv">0</span>, j = <span class="dv">0</span>, k = <span class="dv">0</span>;</span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true"></a>    <span class="cf">while</span> (i &lt; a.length &amp;&amp; j &lt; b.length)</span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true"></a>    {</span>
<span id="cb235-7"><a href="#cb235-7" aria-hidden="true"></a>        <span class="cf">if</span> (a[i] &lt; b[j])</span>
<span id="cb235-8"><a href="#cb235-8" aria-hidden="true"></a>        {</span>
<span id="cb235-9"><a href="#cb235-9" aria-hidden="true"></a>            answer[k] = a[i];</span>
<span id="cb235-10"><a href="#cb235-10" aria-hidden="true"></a>            i++;</span>
<span id="cb235-11"><a href="#cb235-11" aria-hidden="true"></a>        }</span>
<span id="cb235-12"><a href="#cb235-12" aria-hidden="true"></a>        <span class="cf">else</span></span>
<span id="cb235-13"><a href="#cb235-13" aria-hidden="true"></a>        {</span>
<span id="cb235-14"><a href="#cb235-14" aria-hidden="true"></a>            answer[k] = b[j];</span>
<span id="cb235-15"><a href="#cb235-15" aria-hidden="true"></a>            j++;</span>
<span id="cb235-16"><a href="#cb235-16" aria-hidden="true"></a>        }</span>
<span id="cb235-17"><a href="#cb235-17" aria-hidden="true"></a>        k++;</span>
<span id="cb235-18"><a href="#cb235-18" aria-hidden="true"></a>    }</span>
<span id="cb235-19"><a href="#cb235-19" aria-hidden="true"></a></span>
<span id="cb235-20"><a href="#cb235-20" aria-hidden="true"></a>    <span class="cf">while</span> (i &lt; a.length)</span>
<span id="cb235-21"><a href="#cb235-21" aria-hidden="true"></a>    {</span>
<span id="cb235-22"><a href="#cb235-22" aria-hidden="true"></a>        answer[k] = a[i];</span>
<span id="cb235-23"><a href="#cb235-23" aria-hidden="true"></a>        i++;</span>
<span id="cb235-24"><a href="#cb235-24" aria-hidden="true"></a>        k++;</span>
<span id="cb235-25"><a href="#cb235-25" aria-hidden="true"></a>    }</span>
<span id="cb235-26"><a href="#cb235-26" aria-hidden="true"></a></span>
<span id="cb235-27"><a href="#cb235-27" aria-hidden="true"></a>    <span class="cf">while</span> (j &lt; b.length)</span>
<span id="cb235-28"><a href="#cb235-28" aria-hidden="true"></a>    {</span>
<span id="cb235-29"><a href="#cb235-29" aria-hidden="true"></a>        answer[k] = b[j];</span>
<span id="cb235-30"><a href="#cb235-30" aria-hidden="true"></a>        j++;</span>
<span id="cb235-31"><a href="#cb235-31" aria-hidden="true"></a>        k++;</span>
<span id="cb235-32"><a href="#cb235-32" aria-hidden="true"></a>    }</span>
<span id="cb235-33"><a href="#cb235-33" aria-hidden="true"></a></span>
<span id="cb235-34"><a href="#cb235-34" aria-hidden="true"></a>    <span class="cf">return</span> answer;</span>
<span id="cb235-35"><a href="#cb235-35" aria-hidden="true"></a>}</span></code></pre></div>
<p>Is there a more efficient way to do this?</p>
<p>Edit: Corrected length methods.</p>
</section>
<section id="answer-accepted-score-33" class="level4">
<h4>Answer accepted (score 33)</h4>
<p>A minor improvement, but after the main loop, you could use <code>System.arraycopy</code> to copy the tail of either input array when you get to the end of the other. That won’t change the <code>O(n)</code> performance characteristics of your solution, though.</p>
</section>
<section id="answer-2-score-107" class="level4">
<h4>Answer 2 (score 107)</h4>
<div class="sourceCode" id="cb236"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true"></a>public <span class="dt">static</span> <span class="dt">int</span>[] merge(<span class="dt">int</span>[] a, <span class="dt">int</span>[] b) {</span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true"></a></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true"></a>    <span class="dt">int</span>[] answer = new <span class="dt">int</span>[a.length + b.length];</span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true"></a>    <span class="dt">int</span> i = <span class="dv">0</span>, j = <span class="dv">0</span>, k = <span class="dv">0</span>;</span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true"></a></span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true"></a>    <span class="cf">while</span> (i &lt; a.length &amp;&amp; j &lt; b.length)  </span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true"></a>       answer[k++] = a[i] &lt; b[j] ? a[i++] :  b[j++];</span>
<span id="cb236-8"><a href="#cb236-8" aria-hidden="true"></a></span>
<span id="cb236-9"><a href="#cb236-9" aria-hidden="true"></a>    <span class="cf">while</span> (i &lt; a.length)  </span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true"></a>        answer[k++] = a[i++];</span>
<span id="cb236-11"><a href="#cb236-11" aria-hidden="true"></a></span>
<span id="cb236-12"><a href="#cb236-12" aria-hidden="true"></a></span>
<span id="cb236-13"><a href="#cb236-13" aria-hidden="true"></a>    <span class="cf">while</span> (j &lt; b.length)    </span>
<span id="cb236-14"><a href="#cb236-14" aria-hidden="true"></a>        answer[k++] = b[j++];</span>
<span id="cb236-15"><a href="#cb236-15" aria-hidden="true"></a></span>
<span id="cb236-16"><a href="#cb236-16" aria-hidden="true"></a>    <span class="cf">return</span> answer;</span>
<span id="cb236-17"><a href="#cb236-17" aria-hidden="true"></a>}</span></code></pre></div>
<p>Is a little bit more compact but exactly the same!</p>
</section>
<section id="answer-3-score-54" class="level4">
<h4>Answer 3 (score 54)</h4>
<p>I’m surprised no one has mentioned this much more cool, efficient and compact implementation:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true"></a>public <span class="dt">static</span> <span class="dt">int</span>[] merge(<span class="dt">int</span>[] a, <span class="dt">int</span>[] b) {</span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true"></a>    <span class="dt">int</span>[] answer = new <span class="dt">int</span>[a.length + b.length];</span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true"></a>    <span class="dt">int</span> i = a.length - <span class="dv">1</span>, j = b.length - <span class="dv">1</span>, k = answer.length;</span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true"></a></span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true"></a>    <span class="cf">while</span> (k &gt; <span class="dv">0</span>)</span>
<span id="cb237-6"><a href="#cb237-6" aria-hidden="true"></a>        answer[--k] =</span>
<span id="cb237-7"><a href="#cb237-7" aria-hidden="true"></a>                (j &lt; <span class="dv">0</span> || (i &gt;= <span class="dv">0</span> &amp;&amp; a[i] &gt;= b[j])) ? a[i--] : b[j--];</span>
<span id="cb237-8"><a href="#cb237-8" aria-hidden="true"></a>    <span class="cf">return</span> answer;</span>
<span id="cb237-9"><a href="#cb237-9" aria-hidden="true"></a>}</span></code></pre></div>
<p><strong>Points of Interests</strong></p>
<ol>
<li>
Notice that it does same or less number of operations as any other <em>O(n)</em> algorithm but in literally single statement in a single while loop!
</li>
<li>
If two arrays are of approximately same size then constant for O(n) is same. However if arrays are really imbalanced then versions with <code>System.arraycopy</code> would win because internally it can do this with single x86 assembly instruction.
</li>
<li>
Notice <code>a[i] &amp;gt;= b[j]</code> instead of <code>a[i] &amp;gt; b[j]</code>. This guarantees “stability” that is defined as when elements of a and b are equal, we want elements from a before b.
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="unfamiliar-symbol-in-algorithm-what-does-mean-score-245509-in-2016" class="level3">
<h3>36: Unfamiliar symbol in algorithm: what does ∀ mean? (score <a href="https://stackoverflow.com/q/1925979.html">245509</a> in 2016)</h3>
<section id="question-35" class="level4">
<h4>Question</h4>
<p>I’m reading about an algorithm (it’s a path-finding algorithm based on A*), and it contains a mathematical symbol I’m unfamiliar with: ∀</p>
<p>Here is the context:</p>
<blockquote>
v(s) ≥ g(s) = min<sub>s’∈pred(s)</sub>(v(s’) + c(s’, s)) ∀s ≠ s<sub>start</sub>
</blockquote>
<p>Can someone explain the meaning of ∀?</p>
</section>
<section id="answer-accepted-score-108" class="level4">
<h4>Answer accepted (score 108)</h4>
<p>That’s the “forall” (for all) symbol, as seen in <a href="http://en.wikipedia.org/wiki/Table_of_mathematical_symbols" rel="noreferrer">Wikipedia’s table of mathematical symbols</a> or the <a href="http://www.fileformat.info/info/unicode/char/2200/index.htm" rel="noreferrer">Unicode forall character</a> (<code>\\u2200</code>, ∀).</p>
</section>
<section id="answer-2-score-51" class="level4">
<h4>Answer 2 (score 51)</h4>
<p>The upside-down <em>A</em> symbol is the <em>universal quantifier</em> from <a href="http://en.wikipedia.org/wiki/Predicate_logic" rel="noreferrer">predicate logic</a>. (Also see the more complete discussion of the <a href="http://en.wikipedia.org/wiki/First-order_logic" rel="noreferrer">first-order predicate calculus</a>.) As others noted, it means that the stated assertions holds “for all instances” of the given variable (here, <em>s</em>). You’ll soon run into its sibling, the backwards capital <em>E</em>, which is the <em>existential quantifier</em>, meaning “there exists at least one” of the given variable conforming to the related assertion.</p>
<p>If you’re interested in logic, you might enjoy the book <a href="http://www.apress.com/book/view/1430210419" rel="noreferrer"><em>Logic and Databases: The Roots of Relational Theory</em></a> by C.J. Date. There are several chapters covering these quantifiers and their logical implications. You don’t have to be working with databases to benefit from this book’s coverage of logic.</p>
</section>
<section id="answer-3-score-12-1" class="level4">
<h4>Answer 3 (score 12)</h4>
<p>In math, ∀ means FOR ALL.</p>
<p>Unicode character (\u2200, ∀).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-create-a-url-shortener-score-241313-in-2018" class="level3">
<h3>37: How do I create a URL shortener? (score <a href="https://stackoverflow.com/q/742013.html">241313</a> in 2018)</h3>
<section id="question-36" class="level4">
<h4>Question</h4>
<p>I want to create a URL shortener service where you can write a long URL into an input field and the service shortens the URL to “<code>http://www.example.org/abcdef</code>”.</p>
<p>Instead of “<code>abcdef</code>” there can be any other string with six characters containing <code>a-z, A-Z and 0-9</code>. That makes 56~57 billion possible strings.</p>
<p>My approach:</p>
<p>I have a database table with three columns:</p>
<ol>
<li>
id, integer, auto-increment
</li>
<li>
long, string, the long URL the user entered
</li>
<li>
short, string, the shortened URL (or just the six characters)
</li>
</ol>
<p>I would then insert the long URL into the table. Then I would select the auto-increment value for “<code>id</code>” and build a hash of it. This hash should then be inserted as “<code>short</code>”. But what sort of hash should I build? Hash algorithms like MD5 create too long strings. I don’t use these algorithms, I think. A self-built algorithm will work, too.</p>
<p>My idea:</p>
<p>For “<code>http://www.google.de/</code>” I get the auto-increment id <code>239472</code>. Then I do the following steps:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true"></a><span class="dt">short</span> = &#39;&#39;;</span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true"></a><span class="cf">if</span> divisible by <span class="dv">2</span>, add <span class="st">&quot;a&quot;</span>+the result to <span class="dt">short</span></span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true"></a><span class="cf">if</span> divisible by <span class="dv">3</span>, add <span class="st">&quot;b&quot;</span>+the result to <span class="dt">short</span></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true"></a>... until I have divisors <span class="cf">for</span> a-z and A-Z.</span></code></pre></div>
<p>That could be repeated until the number isn’t divisible any more. Do you think this is a good approach? Do you have a better idea?</p>
<blockquote>
<sub><em>Due to the ongoing interest in this topic, I’ve <a href="https://github.com/delight-im/ShortURL" rel="noreferrer">published an efficient solution to GitHub</a>, with implementations for <a href="https://github.com/delight-im/ShortURL/blob/master/JavaScript/ShortURL.js" rel="noreferrer">JavaScript</a>, <a href="https://github.com/delight-im/ShortURL/blob/master/PHP/ShortURL.php" rel="noreferrer">PHP</a>, <a href="https://github.com/delight-im/ShortURL/blob/master/Python/shorturl.py" rel="noreferrer">Python</a> and <a href="https://github.com/delight-im/ShortURL/blob/master/Java/ShortURL.java" rel="noreferrer">Java</a>. Add your solutions if you like :)</em> </sub>
</blockquote>
</section>
<section id="answer-accepted-score-786" class="level4">
<h4>Answer accepted (score 786)</h4>
<p>I would continue your “convert number to string” approach. However, you will realize that your proposed algorithm fails if your ID is a <em>prime and greater than 52</em>.</p>
<h5>
Theoretical background
</h3>
<p>You need a <a href="http://en.wikipedia.org/wiki/Bijection" rel="noreferrer">Bijective Function</a> <em>f</em>. This is necessary so that you can find a inverse function <em>g(‘abc’) = 123</em> for your <em>f(123) = ‘abc’</em> function. This means:</p>
<ul>
<li>
There must be no <em>x1, x2 (with x1 ≠ x2)</em> that will make <em>f(x1) = f(x2)</em>,
</li>
<li>
and for every <em>y</em> you must be able to find an <em>x</em> so that <em>f(x) = y</em>.
</li>
</ul>
<h5>
How to convert the ID to a shortened URL
</h3>
<ol>
<li>
Think of an alphabet we want to use. In your case, that’s <code>[a-zA-Z0-9]</code>. It contains <em>62 letters</em>.
</li>
<li>
<p>
Take an auto-generated, unique numerical key (the auto-incremented <code>id</code> of a MySQL table for example).
</p>
For this example, I will use 125<sub>10</sub> (125 with a base of 10).
</li>
<li>
<p>
Now you have to convert 125<sub>10</sub> to X<sub>62</sub> (base 62).
</p>
<p>125<sub>10</sub> = 2×62<sup>1</sup> + 1×62<sup>0</sup> = <code>[2,1]</code></p>
<p>This requires the use of integer division and modulo. A pseudo-code example:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true"></a>digits = []</span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true"></a></span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true"></a><span class="cf">while</span> num &gt; <span class="dv">0</span></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true"></a>  remainder = modulo(num, <span class="dv">62</span>)</span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true"></a>  digits.push(remainder)</span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true"></a>  num = divide(num, <span class="dv">62</span>)</span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true"></a></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true"></a>digits = digits.reverse</span></code></pre></div>
<p>Now map the <em>indices 2 and 1</em> to your alphabet. This is how your mapping (with an array for example) could look like:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true"></a><span class="dv">0</span>  → a</span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true"></a><span class="dv">1</span>  → b</span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true"></a>...</span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true"></a><span class="dv">25</span> → z</span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true"></a>...</span>
<span id="cb240-6"><a href="#cb240-6" aria-hidden="true"></a><span class="dv">52</span> → <span class="dv">0</span></span>
<span id="cb240-7"><a href="#cb240-7" aria-hidden="true"></a><span class="dv">61</span> → <span class="dv">9</span></span></code></pre></div>
<p>With 2 → c and 1 → b, you will receive cb<sub>62</sub> as the shortened URL.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true"></a>http:<span class="co">//shor.ty/cb</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true"></a>```&lt;/li&gt;</span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true"></a>&lt;/ol&gt;</span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true"></a></span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true"></a>&lt;h5&gt;How to resolve a shortened URL to the initial ID&lt;/h3&gt;</span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true"></a></span>
<span id="cb241-7"><a href="#cb241-7" aria-hidden="true"></a>The reverse is even easier. You just <span class="cf">do</span> a reverse lookup in your alphabet.  </span>
<span id="cb241-8"><a href="#cb241-8" aria-hidden="true"></a></span>
<span id="cb241-9"><a href="#cb241-9" aria-hidden="true"></a>&lt;ol&gt;</span>
<span id="cb241-10"><a href="#cb241-10" aria-hidden="true"></a>&lt;li&gt;&lt;p&gt;e9a&lt;sub&gt;<span class="dv">62</span>&lt;/sub&gt; will be resolved to <span class="st">&quot;4th, 61st, and 0th letter in the alphabet&quot;</span>.&lt;/p&gt;</span>
<span id="cb241-11"><a href="#cb241-11" aria-hidden="true"></a></span>
<span id="cb241-12"><a href="#cb241-12" aria-hidden="true"></a>e9a&lt;sub&gt;<span class="dv">62</span>&lt;/sub&gt; = `[<span class="dv">4</span>,<span class="dv">61</span>,<span class="dv">0</span>]` = <span class="dv">4</span>×<span class="dv">62</span>&lt;sup&gt;<span class="dv">2</span>&lt;/sup&gt; + <span class="dv">61</span>×<span class="dv">62</span>&lt;sup&gt;<span class="dv">1</span>&lt;/sup&gt; + <span class="dv">0</span>×<span class="dv">62</span>&lt;sup&gt;<span class="dv">0</span>&lt;/sup&gt; = <span class="dv">19158</span>&lt;sub&gt;<span class="dv">10</span>&lt;/sub&gt;  &lt;/li&gt;</span>
<span id="cb241-13"><a href="#cb241-13" aria-hidden="true"></a>&lt;li&gt;&lt;p&gt;Now find your database-record with `WHERE id = <span class="dv">19158</span>` and <span class="cf">do</span> the redirect.&lt;/p&gt;&lt;/li&gt;</span>
<span id="cb241-14"><a href="#cb241-14" aria-hidden="true"></a>&lt;/ol&gt;</span>
<span id="cb241-15"><a href="#cb241-15" aria-hidden="true"></a></span>
<span id="cb241-16"><a href="#cb241-16" aria-hidden="true"></a>&lt;h5&gt;Example implementations (provided by commenters)&lt;/h3&gt;</span>
<span id="cb241-17"><a href="#cb241-17" aria-hidden="true"></a></span>
<span id="cb241-18"><a href="#cb241-18" aria-hidden="true"></a>&lt;ul&gt;</span>
<span id="cb241-19"><a href="#cb241-19" aria-hidden="true"></a>&lt;li&gt;&lt;a href=<span class="st">&quot;https://gist.github.com/jaytaylor/a11fadf61a869ade0dfe568606b216c8</span></span>
<span id="cb241-20"><a href="#cb241-20" aria-hidden="true"></a><span class="er">#file-base64-url-shortener-poc-cpp&quot; rel=&quot;noreferrer&quot;&gt;C++&lt;/a&gt;&lt;/li&gt;</span></span>
<span id="cb241-21"><a href="#cb241-21" aria-hidden="true"></a>&lt;li&gt;&lt;a href=<span class="st">&quot;https://gist.github.com/778542&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;Python&lt;/a&gt;&lt;/li&gt;</span>
<span id="cb241-22"><a href="#cb241-22" aria-hidden="true"></a>&lt;li&gt;&lt;a href=<span class="st">&quot;https://gist.github.com/1073996&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;Ruby&lt;/a&gt;&lt;/li&gt;</span>
<span id="cb241-23"><a href="#cb241-23" aria-hidden="true"></a>&lt;li&gt;&lt;a href=<span class="st">&quot;https://gist.github.com/4626401&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;Haskell&lt;/a&gt;&lt;/li&gt;</span>
<span id="cb241-24"><a href="#cb241-24" aria-hidden="true"></a>&lt;li&gt;&lt;a href=<span class="st">&quot;https://gist.github.com/9554733&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;C</span>
<span id="cb241-25"><a href="#cb241-25" aria-hidden="true"></a><span class="er">#&lt;/a&gt;&lt;/li&gt;</span></span>
<span id="cb241-26"><a href="#cb241-26" aria-hidden="true"></a>&lt;li&gt;&lt;a href=<span class="st">&quot;https://gist.github.com/1158171&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;CoffeeScript&lt;/a&gt;&lt;/li&gt;</span>
<span id="cb241-27"><a href="#cb241-27" aria-hidden="true"></a>&lt;li&gt;&lt;a href=<span class="st">&quot;https://metacpan.org/pod/Short::URL&quot;</span> rel=<span class="st">&quot;noreferrer&quot;</span>&gt;Perl&lt;/a&gt;&lt;/li&gt;</span>
<span id="cb241-28"><a href="#cb241-28" aria-hidden="true"></a>&lt;/ul&gt;</span>
<span id="cb241-29"><a href="#cb241-29" aria-hidden="true"></a></span>
<span id="cb241-30"><a href="#cb241-30" aria-hidden="true"></a></span>
<span id="cb241-31"><a href="#cb241-31" aria-hidden="true"></a><span class="er">#### Answer 2 (score 54)</span></span>
<span id="cb241-32"><a href="#cb241-32" aria-hidden="true"></a>Why would you want to use a hash?    </span>
<span id="cb241-33"><a href="#cb241-33" aria-hidden="true"></a></span>
<span id="cb241-34"><a href="#cb241-34" aria-hidden="true"></a>You can just use a simple translation of your <span class="dt">auto</span>-increment value to an alphanumeric value. You can <span class="cf">do</span> that easily by using some base conversion. Say you character space (A-Z, a-z, <span class="dv">0</span>-<span class="dv">9</span>, etc.) has <span class="dv">40</span> characters, convert the id to a base-<span class="dv">40</span> number and use the characters as the digits.  </span>
<span id="cb241-35"><a href="#cb241-35" aria-hidden="true"></a></span>
<span id="cb241-36"><a href="#cb241-36" aria-hidden="true"></a></span>
<span id="cb241-37"><a href="#cb241-37" aria-hidden="true"></a><span class="er">#### Answer 3 (score 48)</span></span>
<span id="cb241-38"><a href="#cb241-38" aria-hidden="true"></a>```c</span>
<span id="cb241-39"><a href="#cb241-39" aria-hidden="true"></a>public class UrlShortener {</span>
<span id="cb241-40"><a href="#cb241-40" aria-hidden="true"></a>    private <span class="dt">static</span> final String ALPHABET = <span class="st">&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789&quot;</span>;</span>
<span id="cb241-41"><a href="#cb241-41" aria-hidden="true"></a>    private <span class="dt">static</span> final <span class="dt">int</span>    BASE     = ALPHABET.length();</span>
<span id="cb241-42"><a href="#cb241-42" aria-hidden="true"></a></span>
<span id="cb241-43"><a href="#cb241-43" aria-hidden="true"></a>    public <span class="dt">static</span> String encode(<span class="dt">int</span> num) {</span>
<span id="cb241-44"><a href="#cb241-44" aria-hidden="true"></a>        StringBuilder sb = new StringBuilder();</span>
<span id="cb241-45"><a href="#cb241-45" aria-hidden="true"></a>        <span class="cf">while</span> ( num &gt; <span class="dv">0</span> ) {</span>
<span id="cb241-46"><a href="#cb241-46" aria-hidden="true"></a>            sb.append( ALPHABET.charAt( num % BASE ) );</span>
<span id="cb241-47"><a href="#cb241-47" aria-hidden="true"></a>            num /= BASE;</span>
<span id="cb241-48"><a href="#cb241-48" aria-hidden="true"></a>        }</span>
<span id="cb241-49"><a href="#cb241-49" aria-hidden="true"></a>        <span class="cf">return</span> sb.reverse().toString();   </span>
<span id="cb241-50"><a href="#cb241-50" aria-hidden="true"></a>    }</span>
<span id="cb241-51"><a href="#cb241-51" aria-hidden="true"></a></span>
<span id="cb241-52"><a href="#cb241-52" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">int</span> decode(String str) {</span>
<span id="cb241-53"><a href="#cb241-53" aria-hidden="true"></a>        <span class="dt">int</span> num = <span class="dv">0</span>;</span>
<span id="cb241-54"><a href="#cb241-54" aria-hidden="true"></a>        <span class="cf">for</span> ( <span class="dt">int</span> i = <span class="dv">0</span>; i &lt; str.length(); i++ )</span>
<span id="cb241-55"><a href="#cb241-55" aria-hidden="true"></a>            num = num * BASE + ALPHABET.indexOf(str.charAt(i));</span>
<span id="cb241-56"><a href="#cb241-56" aria-hidden="true"></a>        <span class="cf">return</span> num;</span>
<span id="cb241-57"><a href="#cb241-57" aria-hidden="true"></a>    }   </span>
<span id="cb241-58"><a href="#cb241-58" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="quickest-way-to-find-missing-number-in-an-array-of-numbers-score-240643-in-2012" class="level3">
<h3>38: Quickest way to find missing number in an array of numbers (score <a href="https://stackoverflow.com/q/2113795.html">240643</a> in 2012)</h3>
<section id="question-37" class="level4">
<h4>Question</h4>
<p>
I have an array of numbers from 1 to 100 (both inclusive). The size of the array is 100. The numbers are randomly added to the array, but there is one random empty slot in the array. What is the quickest way to find that slot as well as the number that should be put in the slot? A Java solution is preferable.
</p>
</section>
<section id="answer-accepted-score-135" class="level4">
<h4>Answer accepted (score 135)</h4>
<p>You can do this in O(n). Iterate through the array and compute the sum of all numbers. Now, sum of natural numbers from 1 to N, can be expressed as <code>Nx(N+1)/2</code>. In your case N=100.</p>
<p>Subtract the sum of the array from <code>Nx(N+1)/2</code>, where N=100.</p>
<p>That is the missing number. The empty slot can be detected during the iteration in which the sum is computed.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true"></a><span class="co">// will be the sum of the numbers in the array.</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true"></a><span class="dt">int</span> sum = <span class="dv">0</span>;</span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true"></a><span class="dt">int</span> idx = -<span class="dv">1</span>;</span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; arr.length; i++)</span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true"></a>{</span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true"></a>    <span class="cf">if</span> (arr[i] == <span class="dv">0</span>)</span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true"></a>    {</span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true"></a>         idx = i; </span>
<span id="cb242-9"><a href="#cb242-9" aria-hidden="true"></a>    }</span>
<span id="cb242-10"><a href="#cb242-10" aria-hidden="true"></a>    <span class="cf">else</span> </span>
<span id="cb242-11"><a href="#cb242-11" aria-hidden="true"></a>    {</span>
<span id="cb242-12"><a href="#cb242-12" aria-hidden="true"></a>         sum += arr[i];</span>
<span id="cb242-13"><a href="#cb242-13" aria-hidden="true"></a>    }</span>
<span id="cb242-14"><a href="#cb242-14" aria-hidden="true"></a>}</span>
<span id="cb242-15"><a href="#cb242-15" aria-hidden="true"></a></span>
<span id="cb242-16"><a href="#cb242-16" aria-hidden="true"></a><span class="co">// the total sum of numbers between 1 and arr.length.</span></span>
<span id="cb242-17"><a href="#cb242-17" aria-hidden="true"></a><span class="dt">int</span> total = (arr.length + <span class="dv">1</span>) * arr.length / <span class="dv">2</span>;</span>
<span id="cb242-18"><a href="#cb242-18" aria-hidden="true"></a></span>
<span id="cb242-19"><a href="#cb242-19" aria-hidden="true"></a>System.out.println(<span class="st">&quot;missing number is: &quot;</span> + (total - sum) + <span class="st">&quot; at index &quot;</span> + idx);</span></code></pre></div>
</section>
<section id="answer-2-score-27" class="level4">
<h4>Answer 2 (score 27)</h4>
<p>We can use XOR operation which is safer than summation because in programming languages if the given input is large it may overflow and may give wrong answer.</p>
<p>Before going to the solution, know that <code>A xor A = 0</code>. So if we XOR two identical numbers the value is 0.</p>
<p>Now, XORing [1..n] with the elements present in the array cancels the identical numbers. So at the end we will get the missing number.</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true"></a><span class="co">// Assuming that the array contains 99 distinct integers between 1..99</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true"></a><span class="co">// and empty slot value is zero</span></span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true"></a><span class="dt">int</span> XOR = <span class="dv">0</span>;</span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true"></a><span class="cf">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;<span class="dv">100</span>; i++) {</span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true"></a>    <span class="cf">if</span> (ARRAY[i] != <span class="dv">0</span>) <span class="co">// remove this condition keeping the body if no zero slot</span></span>
<span id="cb243-6"><a href="#cb243-6" aria-hidden="true"></a>        XOR ^= ARRAY[i];</span>
<span id="cb243-7"><a href="#cb243-7" aria-hidden="true"></a>    XOR ^= (i + <span class="dv">1</span>);</span>
<span id="cb243-8"><a href="#cb243-8" aria-hidden="true"></a>}</span>
<span id="cb243-9"><a href="#cb243-9" aria-hidden="true"></a><span class="cf">return</span> XOR;</span>
<span id="cb243-10"><a href="#cb243-10" aria-hidden="true"></a><span class="co">//return XOR ^ ARRAY.length + 1; if your array doesn&#39;t have empty zero slot. </span></span></code></pre></div>
</section>
<section id="answer-3-score-22" class="level4">
<h4>Answer 3 (score 22)</h4>
<p>Let the given array be A with length N. Lets assume in the given array, the single empty slot is filled with 0.</p>
<p>We can find the solution for this problem using many methods including algorithm used in <code>Counting sort</code>. But, in terms of efficient time and space usage, we have two algorithms. One uses mainly summation, subtraction and multiplication. Another uses XOR. Mathematically both methods work fine. But programatically, we need to assess all the algorithms with main measures like</p>
<ul>
<li>
Limitations(like input values are large(<code>A[1...N]</code>) and/or number of input values is large(<code>N</code>))
</li>
<li>
Number of condition checks involved
</li>
<li>
Number and type of mathematical operations involved
</li>
</ul>
<p>etc. This is because of the limitations in time and/or hardware(Hardware resource limitation) and/or software(Operating System limitation, Programming language limitation, etc), etc. Lets list and assess the pros and cons of each one of them.</p>
<h5>
Algorithm 1 :
</h2>
<p>In algorithm 1, we have 3 implementations.</p>
<ol>
<li>
<p>
Calculate the total sum of all the numbers(this includes the unknown missing number) by using the mathematical formula(<code>1+2+3+...+N=(N(N+1))/2</code>). Here, <code>N=100</code>. Calculate the total sum of all the given numbers. Subtract the second result from the first result will give the missing number.
</p>
<code>Missing Number = (N(N+1))/2) - (A[1]+A[2]+...+A[100])</code>
</li>
<li>
<p>
Calculate the total sum of all the numbers(this includes the unknown missing number) by using the mathematical formula(<code>1+2+3+...+N=(N(N+1))/2</code>). Here, <code>N=100</code>. From that result, subtract each given number gives the missing number.
</p>
<p><code>Missing Number = (N(N+1))/2)-A[1]-A[2]-...-A[100]</code></p>
(<code>Note:</code>Even though the second implementation’s formula is derived from first, from the mathematical point of view both are same. But from programming point of view both are different because the first formula is more prone to bit overflow than the second one(if the given numbers are large enough). Even though addition is faster than subtraction, the second implementation reduces the chance of bit overflow caused by addition of large values(Its not completely eliminated, because there is still very small chance since (<code>N+1</code>) is there in the formula). But both are equally prone to bit overflow by multiplication. The limitation is both implementations give correct result only if <code>N(N+1)&amp;lt;=MAXIMUM_NUMBER_VALUE</code>. For the first implementation, the additional limitation is it give correct result only if <code>Sum of all given numbers&amp;lt;=MAXIMUM_NUMBER_VALUE</code>.)
</li>
<li>
<p>
Calculate the total sum of all the numbers(this includes the unknown missing number) and subtract each given number in the same loop in parallel. This eliminates the risk of bit overflow by multiplication but prone to bit overflow by addition and subtraction.
</p>
<p>
<code>//ALGORITHM missingNumber = 0; foreach(index from 1 to N) { missingNumber = missingNumber + index; //Since, the empty slot is filled with 0, //this extra condition which is executed for N times is not required. //But for the sake of understanding of algorithm purpose lets put it. if (inputArray[index] != 0) missingNumber = missingNumber - inputArray[index]; }</code>
</p>
</li>
</ol>
<p>In a programming language(like C, C++, Java, etc), if the number of bits representing a integer data type is limited, then all the above implementations are prone to bit overflow because of summation, subtraction and multiplication, resulting in wrong result in case of large input values(<code>A[1...N]</code>) and/or large number of input values(<code>N</code>).</p>
<h5>
Algorithm 2 :
</h2>
<p>We can use the property of XOR to get solution for this problem without worrying about the problem of bit overflow. And also XOR is both safer and faster than summation. We know the property of XOR that XOR of two same numbers is equal to 0(<code>A XOR A = 0</code>). If we calculate the XOR of all the numbers from 1 to N(this includes the unknown missing number) and then with that result, XOR all the given numbers, the common numbers get canceled out(since <code>A XOR A=0</code>) and in the end we get the missing number. If we don’t have bit overflow problem, we can use both summation and XOR based algorithms to get the solution. But, the algorithm which uses XOR is both safer and faster than the algorithm which uses summation, subtraction and multiplication. And we can avoid the additional worries caused by summation, subtraction and multiplication.</p>
<p>In all the implementations of algorithm 1, we can use XOR instead of addition and subtraction.</p>
<p>Lets assume, <code>XOR(1...N) = XOR of all numbers from 1 to N</code></p>
<p>Implementation 1 =&gt; <code>Missing Number = XOR(1...N) XOR (A[1] XOR A[2] XOR...XOR A[100])</code></p>
<p>Implementation 2 =&gt; <code>Missing Number = XOR(1...N) XOR A[1] XOR A[2] XOR...XOR A[100]</code></p>
<p>Implementation 3 =&gt;</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true"></a><span class="co">//ALGORITHM</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true"></a>missingNumber = <span class="dv">0</span>;</span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true"></a>foreach(index from <span class="dv">1</span> to N)</span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true"></a>{</span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true"></a>    missingNumber = missingNumber XOR index;</span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true"></a>    <span class="co">//Since, the empty slot is filled with 0,</span></span>
<span id="cb244-7"><a href="#cb244-7" aria-hidden="true"></a>    <span class="co">//this extra condition which is executed for N times is not required.</span></span>
<span id="cb244-8"><a href="#cb244-8" aria-hidden="true"></a>    <span class="co">//But for the sake of understanding of algorithm purpose lets put it.</span></span>
<span id="cb244-9"><a href="#cb244-9" aria-hidden="true"></a>    <span class="cf">if</span> (inputArray[index] != <span class="dv">0</span>)</span>
<span id="cb244-10"><a href="#cb244-10" aria-hidden="true"></a>        missingNumber = missingNumber XOR inputArray[index];</span>
<span id="cb244-11"><a href="#cb244-11" aria-hidden="true"></a>}</span></code></pre></div>
<p>All three implementations of algorithm 2 will work fine(from programatical point of view also). One optimization is, similar to</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true"></a><span class="dv">1</span>+<span class="dv">2</span>+....+N = (N(N+<span class="dv">1</span>))/<span class="dv">2</span></span></code></pre></div>
<p>We have,</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true"></a><span class="dv">1</span> XOR <span class="dv">2</span> XOR .... XOR N = {N <span class="cf">if</span> REMAINDER(N/<span class="dv">4</span>)=<span class="dv">0</span>, <span class="dv">1</span> <span class="cf">if</span> REMAINDER(N/<span class="dv">4</span>)=<span class="dv">1</span>, N+<span class="dv">1</span> <span class="cf">if</span> REMAINDER(N/<span class="dv">4</span>)=<span class="dv">2</span>, <span class="dv">0</span> <span class="cf">if</span> REMAINDER(N/<span class="dv">4</span>)=<span class="dv">3</span>}</span></code></pre></div>
<p>We can prove this by mathematical induction. So, instead of calculating the value of XOR(1…N) by XOR all the numbers from 1 to N, we can use this formula to reduce the number of XOR operations.</p>
<p>Also, calculating XOR(1…N) using above formula has two implementations. Implementation wise, calculating</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true"></a><span class="co">// Thanks to https://a3nm.net/blog/xor.html for this implementation</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true"></a>xor = (n&gt;&gt;<span class="dv">1</span>)&amp;<span class="dv">1</span> ^ (((n&amp;<span class="dv">1</span>)&gt;<span class="dv">0</span>)?<span class="dv">1</span>:n)</span></code></pre></div>
<p>is faster than calculating</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true"></a>xor = (n % <span class="dv">4</span> == <span class="dv">0</span>) ? n : (n % <span class="dv">4</span> == <span class="dv">1</span>) ? <span class="dv">1</span> : (n % <span class="dv">4</span> == <span class="dv">2</span>) ? n + <span class="dv">1</span> : <span class="dv">0</span>;</span></code></pre></div>
<p>So, the optimized Java code is,</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true"></a><span class="dt">long</span> n = <span class="dv">100</span>;</span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true"></a><span class="dt">long</span> a[] = new <span class="dt">long</span>[n];</span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true"></a></span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true"></a><span class="co">//XOR of all numbers from 1 to n</span></span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true"></a><span class="co">// n%4 == 0 ---&gt; n</span></span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true"></a><span class="co">// n%4 == 1 ---&gt; 1</span></span>
<span id="cb249-7"><a href="#cb249-7" aria-hidden="true"></a><span class="co">// n%4 == 2 ---&gt; n + 1</span></span>
<span id="cb249-8"><a href="#cb249-8" aria-hidden="true"></a><span class="co">// n%4 == 3 ---&gt; 0</span></span>
<span id="cb249-9"><a href="#cb249-9" aria-hidden="true"></a></span>
<span id="cb249-10"><a href="#cb249-10" aria-hidden="true"></a><span class="co">//Slower way of implementing the formula</span></span>
<span id="cb249-11"><a href="#cb249-11" aria-hidden="true"></a><span class="co">// long xor = (n % 4 == 0) ? n : (n % 4 == 1) ? 1 : (n % 4 == 2) ? n + 1 : 0;</span></span>
<span id="cb249-12"><a href="#cb249-12" aria-hidden="true"></a><span class="co">//Faster way of implementing the formula</span></span>
<span id="cb249-13"><a href="#cb249-13" aria-hidden="true"></a><span class="co">// long xor = (n&gt;&gt;1)&amp;1 ^ (((n&amp;1)&gt;0)?1:n);</span></span>
<span id="cb249-14"><a href="#cb249-14" aria-hidden="true"></a><span class="dt">long</span> xor = (n&gt;&gt;<span class="dv">1</span>)&amp;<span class="dv">1</span> ^ (((n&amp;<span class="dv">1</span>)&gt;<span class="dv">0</span>)?<span class="dv">1</span>:n);</span>
<span id="cb249-15"><a href="#cb249-15" aria-hidden="true"></a></span>
<span id="cb249-16"><a href="#cb249-16" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">long</span> i = <span class="dv">0</span>; i &lt; n; i++)</span>
<span id="cb249-17"><a href="#cb249-17" aria-hidden="true"></a>{</span>
<span id="cb249-18"><a href="#cb249-18" aria-hidden="true"></a>    xor = xor ^ a[i];</span>
<span id="cb249-19"><a href="#cb249-19" aria-hidden="true"></a>}</span>
<span id="cb249-20"><a href="#cb249-20" aria-hidden="true"></a><span class="co">//Missing number</span></span>
<span id="cb249-21"><a href="#cb249-21" aria-hidden="true"></a>System.out.println(xor);</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="equation-for-testing-if-a-point-is-inside-a-circle-score-239091-in-2013" class="level3">
<h3>39: Equation for testing if a point is inside a circle (score <a href="https://stackoverflow.com/q/481144.html">239091</a> in 2013)</h3>
<section id="question-38" class="level4">
<h4>Question</h4>
<p>If you have a circle with center <code>(center_x, center_y)</code> and radius <code>radius</code>, how do you test if a given point with coordinates <code>(x, y)</code> is inside the circle?</p>
</section>
<section id="answer-2-score-458" class="level4">
<h4>Answer 2 (score 458)</h4>
<p>In general, <code>x</code> and <code>y</code> must satisfy <code>(x - center_x)^2 + (y - center_y)^2 &amp;lt; radius^2</code>.</p>
<p>Please note that points that satisfy the above equation with <code>&amp;lt;</code> replaced by <code>==</code> are considered the points <em>on</em> the circle, and the points that satisfy the above equation with <code>&amp;lt;</code> replaced by <code>&amp;gt;</code> are considered the <em>outside</em> the circle.</p>
</section>
<section id="answer-3-score-124" class="level4">
<h4>Answer 3 (score 124)</h4>
<p>Mathematically, Pythagoras is probably a simple method as many have already mentioned.</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true"></a>(x-center_x)^<span class="dv">2</span> + (y - center_y)^<span class="dv">2</span> &lt; radius^<span class="dv">2</span></span></code></pre></div>
<p>Computationally, there are quicker ways. Define:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true"></a>dx = abs(x-center_x)</span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true"></a>dy = abs(y-center_y)</span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true"></a>R = radius</span></code></pre></div>
<p><strong>If a point is more likely to be <em>outside</em> this circle</strong> then imagine a square drawn around it such that it’s sides are tangents to this circle:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true"></a><span class="cf">if</span> dx&gt;R then </span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true"></a>    <span class="cf">return</span> false.</span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true"></a><span class="cf">if</span> dy&gt;R then </span>
<span id="cb252-4"><a href="#cb252-4" aria-hidden="true"></a>    <span class="cf">return</span> false.</span></code></pre></div>
<p>Now imagine a square diamond drawn inside this circle such that it’s vertices touch this circle:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true"></a><span class="cf">if</span> dx + dy &lt;= R then </span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true"></a>    <span class="cf">return</span> true.</span></code></pre></div>
<p>Now we have covered most of our space and only a small area of this circle remains in between our square and diamond to be tested. Here we revert to Pythagoras as above.</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true"></a><span class="cf">if</span> dx^<span class="dv">2</span> + dy^<span class="dv">2</span> &lt;= R^<span class="dv">2</span> then </span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true"></a>    <span class="cf">return</span> true</span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true"></a><span class="cf">else</span> </span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true"></a>    <span class="cf">return</span> false.</span></code></pre></div>
<p><strong>If a point is more likely to be <em>inside</em> this circle</strong> then reverse order of first 3 steps:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true"></a><span class="cf">if</span> dx + dy &lt;= R then </span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true"></a>    <span class="cf">return</span> true.</span>
<span id="cb255-3"><a href="#cb255-3" aria-hidden="true"></a><span class="cf">if</span> dx &gt; R then </span>
<span id="cb255-4"><a href="#cb255-4" aria-hidden="true"></a>    <span class="cf">return</span> false.</span>
<span id="cb255-5"><a href="#cb255-5" aria-hidden="true"></a><span class="cf">if</span> dy &gt; R </span>
<span id="cb255-6"><a href="#cb255-6" aria-hidden="true"></a>    then <span class="cf">return</span> false.</span>
<span id="cb255-7"><a href="#cb255-7" aria-hidden="true"></a><span class="cf">if</span> dx^<span class="dv">2</span> + dy^<span class="dv">2</span> &lt;= R^<span class="dv">2</span> then </span>
<span id="cb255-8"><a href="#cb255-8" aria-hidden="true"></a>    <span class="cf">return</span> true</span>
<span id="cb255-9"><a href="#cb255-9" aria-hidden="true"></a><span class="cf">else</span></span>
<span id="cb255-10"><a href="#cb255-10" aria-hidden="true"></a>    <span class="cf">return</span> false.</span></code></pre></div>
<hr>
<p>Alternate methods imagine a square inside this circle instead of a diamond but this requires slightly more tests and calculations with no computational advantage (inner square and diamonds have identical areas):</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true"></a>k = R/sqrt(<span class="dv">2</span>)</span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true"></a><span class="cf">if</span> dx &lt;= k and dy &lt;= k then </span>
<span id="cb256-3"><a href="#cb256-3" aria-hidden="true"></a>    <span class="cf">return</span> true.</span></code></pre></div>
<p>Update:</p>
<p>For those interested in performance I implemented this method in c, and compiled with -O3.</p>
<p>I obtained execution times by <code>time ./a.out</code></p>
<p>I implemented this method, a normal method and a dummy method to determine timing overhead.</p>
<p>
<code>Normal: 21.3s This: 19.1s Overhead: 16.5s</code>
</p>
<p>So, it seems this method is more efficient in this implementation.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true"></a><span class="co">// compile gcc -O3 &lt;filename&gt;.c</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true"></a><span class="co">// run: time ./a.out</span></span>
<span id="cb257-3"><a href="#cb257-3" aria-hidden="true"></a></span>
<span id="cb257-4"><a href="#cb257-4" aria-hidden="true"></a></span>
<span id="cb257-5"><a href="#cb257-5" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb257-6"><a href="#cb257-6" aria-hidden="true"></a></span>
<span id="cb257-7"><a href="#cb257-7" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb257-8"><a href="#cb257-8" aria-hidden="true"></a></span>
<span id="cb257-9"><a href="#cb257-9" aria-hidden="true"></a></span>
<span id="cb257-10"><a href="#cb257-10" aria-hidden="true"></a><span class="pp">#define TRUE  (0==0)</span></span>
<span id="cb257-11"><a href="#cb257-11" aria-hidden="true"></a></span>
<span id="cb257-12"><a href="#cb257-12" aria-hidden="true"></a><span class="pp">#define FALSE (0==1)</span></span>
<span id="cb257-13"><a href="#cb257-13" aria-hidden="true"></a></span>
<span id="cb257-14"><a href="#cb257-14" aria-hidden="true"></a></span>
<span id="cb257-15"><a href="#cb257-15" aria-hidden="true"></a><span class="pp">#define ABS(x) (((x)&lt;0)?(0-(x)):(x))</span></span>
<span id="cb257-16"><a href="#cb257-16" aria-hidden="true"></a></span>
<span id="cb257-17"><a href="#cb257-17" aria-hidden="true"></a><span class="dt">int</span> xo, yo, R;</span>
<span id="cb257-18"><a href="#cb257-18" aria-hidden="true"></a></span>
<span id="cb257-19"><a href="#cb257-19" aria-hidden="true"></a><span class="dt">int</span> <span class="kw">inline</span> inCircle( <span class="dt">int</span> x, <span class="dt">int</span> y ){  <span class="co">// 19.1, 19.1, 19.1</span></span>
<span id="cb257-20"><a href="#cb257-20" aria-hidden="true"></a>  <span class="dt">int</span> dx = ABS(x-xo);</span>
<span id="cb257-21"><a href="#cb257-21" aria-hidden="true"></a>  <span class="cf">if</span> (    dx &gt;  R ) <span class="cf">return</span> FALSE;</span>
<span id="cb257-22"><a href="#cb257-22" aria-hidden="true"></a>  <span class="dt">int</span> dy = ABS(y-yo);</span>
<span id="cb257-23"><a href="#cb257-23" aria-hidden="true"></a>  <span class="cf">if</span> (    dy &gt;  R ) <span class="cf">return</span> FALSE;</span>
<span id="cb257-24"><a href="#cb257-24" aria-hidden="true"></a>  <span class="cf">if</span> ( dx+dy &lt;= R ) <span class="cf">return</span> TRUE;</span>
<span id="cb257-25"><a href="#cb257-25" aria-hidden="true"></a>  <span class="cf">return</span> ( dx*dx + dy*dy &lt;= R*R );</span>
<span id="cb257-26"><a href="#cb257-26" aria-hidden="true"></a>}</span>
<span id="cb257-27"><a href="#cb257-27" aria-hidden="true"></a></span>
<span id="cb257-28"><a href="#cb257-28" aria-hidden="true"></a><span class="dt">int</span> <span class="kw">inline</span> inCircleN( <span class="dt">int</span> x, <span class="dt">int</span> y ){  <span class="co">// 21.3, 21.1, 21.5</span></span>
<span id="cb257-29"><a href="#cb257-29" aria-hidden="true"></a>  <span class="dt">int</span> dx = ABS(x-xo);</span>
<span id="cb257-30"><a href="#cb257-30" aria-hidden="true"></a>  <span class="dt">int</span> dy = ABS(y-yo);</span>
<span id="cb257-31"><a href="#cb257-31" aria-hidden="true"></a>  <span class="cf">return</span> ( dx*dx + dy*dy &lt;= R*R );</span>
<span id="cb257-32"><a href="#cb257-32" aria-hidden="true"></a>}</span>
<span id="cb257-33"><a href="#cb257-33" aria-hidden="true"></a></span>
<span id="cb257-34"><a href="#cb257-34" aria-hidden="true"></a><span class="dt">int</span> <span class="kw">inline</span> dummy( <span class="dt">int</span> x, <span class="dt">int</span> y ){  <span class="co">// 16.6, 16.5, 16.4</span></span>
<span id="cb257-35"><a href="#cb257-35" aria-hidden="true"></a>  <span class="dt">int</span> dx = ABS(x-xo);</span>
<span id="cb257-36"><a href="#cb257-36" aria-hidden="true"></a>  <span class="dt">int</span> dy = ABS(y-yo);</span>
<span id="cb257-37"><a href="#cb257-37" aria-hidden="true"></a>  <span class="cf">return</span> FALSE;</span>
<span id="cb257-38"><a href="#cb257-38" aria-hidden="true"></a>}</span>
<span id="cb257-39"><a href="#cb257-39" aria-hidden="true"></a></span>
<span id="cb257-40"><a href="#cb257-40" aria-hidden="true"></a></span>
<span id="cb257-41"><a href="#cb257-41" aria-hidden="true"></a><span class="pp">#define N 1000000000</span></span>
<span id="cb257-42"><a href="#cb257-42" aria-hidden="true"></a></span>
<span id="cb257-43"><a href="#cb257-43" aria-hidden="true"></a><span class="dt">int</span> main(){</span>
<span id="cb257-44"><a href="#cb257-44" aria-hidden="true"></a>  <span class="dt">int</span> x, y;</span>
<span id="cb257-45"><a href="#cb257-45" aria-hidden="true"></a>  xo = rand()%<span class="dv">1000</span>; yo = rand()%<span class="dv">1000</span>; R = <span class="dv">1</span>;</span>
<span id="cb257-46"><a href="#cb257-46" aria-hidden="true"></a>  <span class="dt">int</span> n = <span class="dv">0</span>;</span>
<span id="cb257-47"><a href="#cb257-47" aria-hidden="true"></a>  <span class="dt">int</span> c;</span>
<span id="cb257-48"><a href="#cb257-48" aria-hidden="true"></a>  <span class="cf">for</span> (c=<span class="dv">0</span>; c&lt;N; c++){</span>
<span id="cb257-49"><a href="#cb257-49" aria-hidden="true"></a>    x = rand()%<span class="dv">1000</span>; y = rand()%<span class="dv">1000</span>;</span>
<span id="cb257-50"><a href="#cb257-50" aria-hidden="true"></a><span class="co">//    if ( inCircle(x,y)  ){</span></span>
<span id="cb257-51"><a href="#cb257-51" aria-hidden="true"></a>    <span class="cf">if</span> ( inCircleN(x,y) ){</span>
<span id="cb257-52"><a href="#cb257-52" aria-hidden="true"></a><span class="co">//    if ( dummy(x,y) ){</span></span>
<span id="cb257-53"><a href="#cb257-53" aria-hidden="true"></a>      n++;</span>
<span id="cb257-54"><a href="#cb257-54" aria-hidden="true"></a>    }</span>
<span id="cb257-55"><a href="#cb257-55" aria-hidden="true"></a>  }</span>
<span id="cb257-56"><a href="#cb257-56" aria-hidden="true"></a>  printf( <span class="st">&quot;%d of %d inside circle</span><span class="sc">\n</span><span class="st">&quot;</span>, n, N);</span>
<span id="cb257-57"><a href="#cb257-57" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="determine-if-two-rectangles-overlap-each-other-score-237792-in-2017" class="level3">
<h3>40: Determine if two rectangles overlap each other? (score <a href="https://stackoverflow.com/q/306316.html">237792</a> in 2017)</h3>
<section id="question-39" class="level4">
<h4>Question</h4>
<p>I am trying to write a C++ program that takes the following inputs from the user to construct rectangles (between 2 and 5): height, width, x-pos, y-pos. All of these rectangles will exist parallel to the x and the y axis, that is all of their edges will have slopes of 0 or infinity.</p>
<p>I’ve tried to implement what is mentioned in <a href="https://stackoverflow.com/questions/115426">this</a> question but I am not having very much luck.</p>
<p>My current implementation does the following:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true"></a><span class="co">// Gets all the vertices for Rectangle 1 and stores them in an array -&gt; arrRect1</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true"></a><span class="co">// point 1 x: arrRect1[0], point 1 y: arrRect1[1] and so on...</span></span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true"></a><span class="co">// Gets all the vertices for Rectangle 2 and stores them in an array -&gt; arrRect2</span></span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true"></a></span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true"></a><span class="co">// rotated edge of point a, rect 1</span></span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true"></a><span class="dt">int</span> rot_x, rot_y;</span>
<span id="cb258-7"><a href="#cb258-7" aria-hidden="true"></a>rot_x = -arrRect1[<span class="dv">3</span>];</span>
<span id="cb258-8"><a href="#cb258-8" aria-hidden="true"></a>rot_y = arrRect1[<span class="dv">2</span>];</span>
<span id="cb258-9"><a href="#cb258-9" aria-hidden="true"></a><span class="co">// point on rotated edge</span></span>
<span id="cb258-10"><a href="#cb258-10" aria-hidden="true"></a><span class="dt">int</span> pnt_x, pnt_y;</span>
<span id="cb258-11"><a href="#cb258-11" aria-hidden="true"></a>pnt_x = arrRect1[<span class="dv">2</span>]; </span>
<span id="cb258-12"><a href="#cb258-12" aria-hidden="true"></a>pnt_y = arrRect1[<span class="dv">3</span>];</span>
<span id="cb258-13"><a href="#cb258-13" aria-hidden="true"></a><span class="co">// test point, a from rect 2</span></span>
<span id="cb258-14"><a href="#cb258-14" aria-hidden="true"></a><span class="dt">int</span> tst_x, tst_y;</span>
<span id="cb258-15"><a href="#cb258-15" aria-hidden="true"></a>tst_x = arrRect2[<span class="dv">0</span>];</span>
<span id="cb258-16"><a href="#cb258-16" aria-hidden="true"></a>tst_y = arrRect2[<span class="dv">1</span>];</span>
<span id="cb258-17"><a href="#cb258-17" aria-hidden="true"></a></span>
<span id="cb258-18"><a href="#cb258-18" aria-hidden="true"></a><span class="dt">int</span> value;</span>
<span id="cb258-19"><a href="#cb258-19" aria-hidden="true"></a>value = (rot_x * (tst_x - pnt_x)) + (rot_y * (tst_y - pnt_y));</span>
<span id="cb258-20"><a href="#cb258-20" aria-hidden="true"></a>cout &lt;&lt; <span class="st">&quot;Value: &quot;</span> &lt;&lt; value;  </span></code></pre></div>
<p>However I’m not quite sure if (a) I’ve implemented the algorithm I linked to correctly, or if I did exactly how to interpret this?</p>
<p>Any suggestions?</p>
</section>
<section id="answer-accepted-score-678" class="level4">
<h4>Answer accepted (score 678)</h4>
<div class="sourceCode" id="cb259"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true"></a><span class="cf">if</span> (RectA.Left &lt; RectB.Right &amp;&amp; RectA.Right &gt; RectB.Left &amp;&amp;</span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true"></a>     RectA.Top &gt; RectB.Bottom &amp;&amp; RectA.Bottom &lt; RectB.Top ) </span></code></pre></div>
<p>or, using Cartesian coordinates</p>
<p>(With X1 being left coord, X2 being right coord, increasing from left to right and Y1 being Top coord, and Y2 being Bottom coord, increasing from bottom to top) …</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true"></a><span class="cf">if</span> (RectA.X1 &lt; RectB.X2 &amp;&amp; RectA.X2 &gt; RectB.X1 &amp;&amp;</span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true"></a>    RectA.Y1 &gt; RectB.Y2 &amp;&amp; RectA.Y2 &lt; RectB.Y1) </span></code></pre></div>
<p>NOTE: TO ALL SO USERS WITH EDIT AUTHORITY. PLEASE STOP FIDDLING WITH THIS.</p>
<p>
Say you have Rect A, and Rect B. Proof is by contradiction. Any one of four conditions guarantees that <strong>no overlap can exist</strong>:
</p>
<ul>
<li>
Cond1. If A’s left edge is to the right of the B’s right edge, - then A is Totally to right Of B
</li>
<li>
Cond2. If A’s right edge is to the left of the B’s left edge, - then A is Totally to left Of B
</li>
<li>
Cond3. If A’s top edge is below B’s bottom edge, - then A is Totally below B
</li>
<li>
Cond4. If A’s bottom edge is above B’s top edge, - then A is Totally above B
</li>
</ul>
<p>So condition for Non-Overlap is</p>
<pre>Cond1 Or Cond2 Or Cond3 Or Cond4</pre>
<p>Therefore, a sufficient condition for Overlap is the opposite.</p>
<pre>Not (Cond1 Or Cond2 Or Cond3 Or Cond4)</pre>
<p>
De Morgan’s law says<br> <code>Not (A or B or C or D)</code> is the same as <code>Not A And Not B And Not C And Not D</code><br> so using De Morgan, we have
</p>
<pre>Not Cond1 And Not Cond2 And Not Cond3 And Not Cond4</pre>
<p>This is equivalent to:</p>
<ul>
<li>
A’s Left Edge to left of B’s right edge, [<code>RectA.Left &amp;lt; RectB.Right</code>], and
</li>
<li>
A’s right edge to right of B’s left edge, [<code>RectA.Right &amp;gt; RectB.Left</code>], and
</li>
<li>
A’s top above B’s bottom, [<code>RectA.Top &amp;gt; RectB.Bottom</code>], and
</li>
<li>
A’s bottom below B’s Top [<code>RectA.Bottom &amp;lt; RectB.Top</code>]
</li>
</ul>
<p>
<strong>Note 1</strong>: It is fairly obvious this same principle can be extended to any number of dimensions.<br> <strong>Note 2</strong>: It should also be fairly obvious to count overlaps of just one pixel, change the <code>&amp;lt;</code> and/or the <code>&amp;gt;</code> on that boundary to a <code>&amp;lt;=</code> or a <code>&amp;gt;=</code>.<br> <strong>Note 3</strong>: This answer, when utilizing Cartesian coordinates (X, Y) is based on standard algebraic Cartesian coordinates (x increases left to right, and Y increases bottom to top). Obviously, where a computer system might mechanize screen coordinates differently, (e.g., increasing Y from top to bottom, or X From right to left), the syntax will need to be adjusted accordingly/
</p>
</section>
<section id="answer-2-score-112-1" class="level4">
<h4>Answer 2 (score 112)</h4>
<div class="sourceCode" id="cb261"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true"></a><span class="kw">struct</span> rect</span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true"></a>{</span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true"></a>    <span class="dt">int</span> x;</span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true"></a>    <span class="dt">int</span> y;</span>
<span id="cb261-5"><a href="#cb261-5" aria-hidden="true"></a>    <span class="dt">int</span> width;</span>
<span id="cb261-6"><a href="#cb261-6" aria-hidden="true"></a>    <span class="dt">int</span> height;</span>
<span id="cb261-7"><a href="#cb261-7" aria-hidden="true"></a>};</span>
<span id="cb261-8"><a href="#cb261-8" aria-hidden="true"></a></span>
<span id="cb261-9"><a href="#cb261-9" aria-hidden="true"></a><span class="dt">bool</span> valueInRange(<span class="dt">int</span> value, <span class="dt">int</span> min, <span class="dt">int</span> max)</span>
<span id="cb261-10"><a href="#cb261-10" aria-hidden="true"></a>{ <span class="cf">return</span> (value &gt;= min) &amp;&amp; (value &lt;= max); }</span>
<span id="cb261-11"><a href="#cb261-11" aria-hidden="true"></a></span>
<span id="cb261-12"><a href="#cb261-12" aria-hidden="true"></a><span class="dt">bool</span> rectOverlap(rect A, rect B)</span>
<span id="cb261-13"><a href="#cb261-13" aria-hidden="true"></a>{</span>
<span id="cb261-14"><a href="#cb261-14" aria-hidden="true"></a>    <span class="dt">bool</span> xOverlap = valueInRange(A.x, B.x, B.x + B.width) ||</span>
<span id="cb261-15"><a href="#cb261-15" aria-hidden="true"></a>                    valueInRange(B.x, A.x, A.x + A.width);</span>
<span id="cb261-16"><a href="#cb261-16" aria-hidden="true"></a></span>
<span id="cb261-17"><a href="#cb261-17" aria-hidden="true"></a>    <span class="dt">bool</span> yOverlap = valueInRange(A.y, B.y, B.y + B.height) ||</span>
<span id="cb261-18"><a href="#cb261-18" aria-hidden="true"></a>                    valueInRange(B.y, A.y, A.y + A.height);</span>
<span id="cb261-19"><a href="#cb261-19" aria-hidden="true"></a></span>
<span id="cb261-20"><a href="#cb261-20" aria-hidden="true"></a>    <span class="cf">return</span> xOverlap &amp;&amp; yOverlap;</span>
<span id="cb261-21"><a href="#cb261-21" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-26-1" class="level4">
<h4>Answer 3 (score 26)</h4>
<div class="sourceCode" id="cb262"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true"></a><span class="kw">struct</span> Rect</span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true"></a>{</span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true"></a>    Rect(<span class="dt">int</span> x1, <span class="dt">int</span> x2, <span class="dt">int</span> y1, <span class="dt">int</span> y2)</span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true"></a>    : x1(x1), x2(x2), y1(y1), y2(y2)</span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true"></a>    {</span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true"></a>        assert(x1 &lt; x2);</span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true"></a>        assert(y1 &lt; y2);</span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true"></a>    }</span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true"></a></span>
<span id="cb262-10"><a href="#cb262-10" aria-hidden="true"></a>    <span class="dt">int</span> x1, x2, y1, y2;</span>
<span id="cb262-11"><a href="#cb262-11" aria-hidden="true"></a>};</span>
<span id="cb262-12"><a href="#cb262-12" aria-hidden="true"></a></span>
<span id="cb262-13"><a href="#cb262-13" aria-hidden="true"></a><span class="dt">bool</span></span>
<span id="cb262-14"><a href="#cb262-14" aria-hidden="true"></a>overlap(<span class="dt">const</span> Rect &amp;r1, <span class="dt">const</span> Rect &amp;r2)</span>
<span id="cb262-15"><a href="#cb262-15" aria-hidden="true"></a>{</span>
<span id="cb262-16"><a href="#cb262-16" aria-hidden="true"></a>    <span class="co">// The rectangles don&#39;t overlap if</span></span>
<span id="cb262-17"><a href="#cb262-17" aria-hidden="true"></a>    <span class="co">// one rectangle&#39;s minimum in some dimension </span></span>
<span id="cb262-18"><a href="#cb262-18" aria-hidden="true"></a>    <span class="co">// is greater than the other&#39;s maximum in</span></span>
<span id="cb262-19"><a href="#cb262-19" aria-hidden="true"></a>    <span class="co">// that dimension.</span></span>
<span id="cb262-20"><a href="#cb262-20" aria-hidden="true"></a></span>
<span id="cb262-21"><a href="#cb262-21" aria-hidden="true"></a>    <span class="dt">bool</span> noOverlap = r1.x1 &gt; r2.x2 ||</span>
<span id="cb262-22"><a href="#cb262-22" aria-hidden="true"></a>                     r2.x1 &gt; r1.x2 ||</span>
<span id="cb262-23"><a href="#cb262-23" aria-hidden="true"></a>                     r1.y1 &gt; r2.y2 ||</span>
<span id="cb262-24"><a href="#cb262-24" aria-hidden="true"></a>                     r2.y1 &gt; r1.y2;</span>
<span id="cb262-25"><a href="#cb262-25" aria-hidden="true"></a></span>
<span id="cb262-26"><a href="#cb262-26" aria-hidden="true"></a>    <span class="cf">return</span> !noOverlap;</span>
<span id="cb262-27"><a href="#cb262-27" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-can-building-a-heap-be-on-time-complexity-score-234466-in-2016" class="level3">
<h3>41: How can building a heap be O(n) time complexity? (score <a href="https://stackoverflow.com/q/9755721.html">234466</a> in 2016)</h3>
<section id="question-40" class="level4">
<h4>Question</h4>
<p>Can someone help explain how can building a heap be O(n) complexity?</p>
<p>Inserting an item into a heap is <code>O(log n)</code>, and the insert is repeated n/2 times (the remainder are leaves, and can’t violate the heap property). So, this means the complexity should be <code>O(n log n)</code>, I would think.</p>
<p>In other words, for each item we “heapify”, it has the potential to have to filter down once for each level for the heap so far (which is log n levels).</p>
<p>What am I missing?</p>
</section>
<section id="answer-accepted-score-340" class="level4">
<h4>Answer accepted (score 340)</h4>
<p>I think there are several questions buried in this topic:</p>
<ul>
<li>
How do you implement <code>buildHeap</code> so it runs in <em>O(n)</em> time?
</li>
<li>
How do you show that <code>buildHeap</code> runs in <em>O(n)</em> time when implemented correctly?
</li>
<li>
Why doesn’t that same logic work to make heap sort run in <em>O(n)</em> time rather than <em>O(n log n)</em>?
</li>
</ul>
<h5>
How do you implement <code>buildHeap</code> so it runs in <em>O(n)</em> time?
</h2>
<p>Often, answers to these questions focus on the difference between <code>siftUp</code> and <code>siftDown</code>. Making the correct choice between <code>siftUp</code> and <code>siftDown</code> is critical to get <em>O(n)</em> performance for <code>buildHeap</code>, but does nothing to help one understand the difference between <code>buildHeap</code> and <code>heapSort</code> in general. Indeed, proper implementations of both <code>buildHeap</code> and <code>heapSort</code> will <strong>only</strong> use <code>siftDown</code>. The <code>siftUp</code> operation is only needed to perform inserts into an existing heap, so it would be used to implement a priority queue using a binary heap, for example.</p>
<p>I’ve written this to describe how a max heap works. This is the type of heap typically used for heap sort or for a priority queue where higher values indicate higher priority. A min heap is also useful; for example, when retrieving items with integer keys in ascending order or strings in alphabetical order. The principles are exactly the same; simply switch the sort order.</p>
<p>The <strong>heap property</strong> specifies that each node in a binary heap must be at least as large as both of its children. In particular, this implies that the largest item in the heap is at the root. Sifting down and sifting up are essentially the same operation in opposite directions: move an offending node until it satisfies the heap property:</p>
<ul>
<li>
<code>siftDown</code> swaps a node that is too small with its largest child (thereby moving it down) until it is at least as large as both nodes below it.
</li>
<li>
<code>siftUp</code> swaps a node that is too large with its parent (thereby moving it up) until it is no larger than the node above it.
</li>
</ul>
<p>The number of operations required for <code>siftDown</code> and <code>siftUp</code> is proportional to the distance the node may have to move. For <code>siftDown</code>, it is the distance to the bottom of the tree, so <code>siftDown</code> is expensive for nodes at the top of the tree. With <code>siftUp</code>, the work is proportional to the distance to the top of the tree, so <code>siftUp</code> is expensive for nodes at the bottom of the tree. Although both operations are <em>O(log n)</em> in the worst case, in a heap, only one node is at the top whereas half the nodes lie in the bottom layer. So <strong>it shouldn’t be too surprising that if we have to apply an operation to every node, we would prefer <code>siftDown</code> over <code>siftUp</code>.</strong></p>
<p>The <code>buildHeap</code> function takes an array of unsorted items and moves them until they all satisfy the heap property, thereby producing a valid heap. There are two approaches one might take for <code>buildHeap</code> using the <code>siftUp</code> and <code>siftDown</code> operations we’ve described.</p>
<ol>
<li>
<p>
Start at the top of the heap (the beginning of the array) and call <code>siftUp</code> on each item. At each step, the previously sifted items (the items before the current item in the array) form a valid heap, and sifting the next item up places it into a valid position in the heap. After sifting up each node, all items satisfy the heap property.
</p>
</li>
<li>
<p>
Or, go in the opposite direction: start at the end of the array and move backwards towards the front. At each iteration, you sift an item down until it is in the correct location.
</p>
</li>
</ol>
<h5>
Which implementation for <code>buildHeap</code> is more efficient?
</h2>
<p>Both of these solutions will produce a valid heap. Unsurprisingly, the more efficient one is the second operation that uses <code>siftDown</code>.</p>
<p>Let <em>h = log n</em> represent the height of the heap. The work required for the <code>siftDown</code> approach is given by the sum</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true"></a>(<span class="dv">0</span> * n/<span class="dv">2</span>) + (<span class="dv">1</span> * n/<span class="dv">4</span>) + (<span class="dv">2</span> * n/<span class="dv">8</span>) + ... + (h * <span class="dv">1</span>).</span></code></pre></div>
<p>Each term in the sum has the maximum distance a node at the given height will have to move (zero for the bottom layer, h for the root) multiplied by the number of nodes at that height. In contrast, the sum for calling <code>siftUp</code> on each node is</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true"></a>(h * n/<span class="dv">2</span>) + ((h-<span class="dv">1</span>) * n/<span class="dv">4</span>) + ((h-<span class="dv">2</span>)*n/<span class="dv">8</span>) + ... + (<span class="dv">0</span> * <span class="dv">1</span>).</span></code></pre></div>
<p>It should be clear that the second sum is larger. The first term alone is <em>hn/2 = 1/2 n log n</em>, so this approach has complexity at best <em>O(n log n)</em>.</p>
<h5>
How do we prove the sum for the <code>siftDown</code> approach is indeed <em>O(n)</em>?
</h2>
<p>One method (there are other analyses that also work) is to turn the finite sum into an infinite series and then use Taylor series. We may ignore the first term, which is zero:</p>
<p><a href="https://i.stack.imgur.com/959f6.png" rel="noreferrer"><img src="https://i.stack.imgur.com/959f6.png" alt="Taylor series for buildHeap complexity"></a></p>
<p>If you aren’t sure why each of those steps works, here is a justification for the process in words:</p>
<ul>
<li>
The terms are all positive, so the finite sum must be smaller than the infinite sum.
</li>
<li>
The series is equal to a power series evaluated at <em>x=1/2</em>.
</li>
<li>
That power series is equal to (a constant times) the derivative of the Taylor series for <em>f(x)=1/(1-x)</em>.
</li>
<li>
<em>x=1/2</em> is within the interval of convergence of that Taylor series.
</li>
<li>
Therefore, we can replace the Taylor series with <em>1/(1-x)</em>, differentiate, and evaluate to find the value of the infinite series.
</li>
</ul>
<p>Since the infinite sum is exactly <em>n</em>, we conclude that the finite sum is no larger, and is therefore, <em>O(n)</em>.</p>
<h5>
Why does heap sort require <em>O(n log n)</em> time?
</h2>
<p>If it is possible to run <code>buildHeap</code> in linear time, why does heap sort require <em>O(n log n)</em> time? Well, heap sort consists of two stages. First, we call <code>buildHeap</code> on the array, which requires <em>O(n)</em> time if implemented optimally. The next stage is to repeatedly delete the largest item in the heap and put it at the end of the array. Because we delete an item from the heap, there is always an open spot just after the end of the heap where we can store the item. So heap sort achieves a sorted order by successively removing the next largest item and putting it into the array starting at the last position and moving towards the front. It is the complexity of this last part that dominates in heap sort. The loop looks likes this:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true"></a><span class="cf">for</span> (i = n - <span class="dv">1</span>; i &gt; <span class="dv">0</span>; i--) {</span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true"></a>    arr[i] = deleteMax();</span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true"></a>}</span></code></pre></div>
<p>Clearly, the loop runs O(n) times (<em>n - 1</em> to be precise, the last item is already in place). The complexity of <code>deleteMax</code> for a heap is <em>O(log n)</em>. It is typically implemented by removing the root (the largest item left in the heap) and replacing it with the last item in the heap, which is a leaf, and therefore one of the smallest items. This new root will almost certainly violate the heap property, so you have to call <code>siftDown</code> until you move it back into an acceptable position. This also has the effect of moving the next largest item up to the root. Notice that, in contrast to <code>buildHeap</code> where for most of the nodes we are calling <code>siftDown</code> from the bottom of the tree, we are now calling <code>siftDown</code> from the top of the tree on each iteration! <em>Although the tree is shrinking, it doesn’t shrink fast enough</em>: The height of the tree stays constant until you have removed the first half of the nodes (when you clear out the bottom layer completely). Then for the next quarter, the height is <em>h - 1</em>. So the total work for this second stage is</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true"></a>h*n/<span class="dv">2</span> + (h-<span class="dv">1</span>)*n/<span class="dv">4</span> + ... + <span class="dv">0</span> * <span class="fl">1.</span></span></code></pre></div>
<p>Notice the switch: now the zero work case corresponds to a single node and the <em>h</em> work case corresponds to half the nodes. This sum is <em>O(n log n)</em> just like the inefficient version of <code>buildHeap</code> that is implemented using siftUp. But in this case, we have no choice since we are trying to sort and we require the next largest item be removed next.</p>
<p>In summary, the work for heap sort is the sum of the two stages: <em>O(n) time for buildHeap and <strong>O(n log n) to remove each node in order</strong>, so the complexity is O(n log n)</em>. You can prove (using some ideas from information theory) that for a comparison-based sort, <em>O(n log n)</em> is the best you could hope for anyway, so there’s no reason to be disappointed by this or expect heap sort to achieve the O(n) time bound that <code>buildHeap</code> does.</p>
</section>
<section id="answer-2-score-298" class="level4">
<h4>Answer 2 (score 298)</h4>
<p>Your analysis is correct. However, it is not tight.</p>
<p>It is not really easy to explain why building a heap is a linear operation, you should better read it.</p>
<p>A <em>great analysis</em> of the algorithm can be seen <a href="http://www.cs.umd.edu/~meesh/351/mount/lectures/lect14-heapsort-analysis-part.pdf" rel="noreferrer">here</a>.</p>
<hr>
<p>The main idea is that in the <code>build_heap</code> algorithm the actual <code>heapify</code> cost is not <code>O(log n)</code>for all elements.</p>
<p>When <code>heapify</code> is called, the running time depends on how far an element might move down in tree before the process terminates. In other words, it depends on the height of the element in the heap. In the worst case, the element might go down all the way to the leaf level.</p>
<p>Let us count the work done level by level.</p>
<p>At the bottommost level, there are <code>2^(h)</code>nodes, but we do not call <code>heapify</code> on any of these, so the work is 0. At the next to level there are <code>2^(h − 1)</code> nodes, and each might move down by 1 level. At the 3rd level from the bottom, there are <code>2^(h − 2)</code> nodes, and each might move down by 2 levels.</p>
<p>As you can see not all heapify operations are <code>O(log n)</code>, this is why you are getting <code>O(n)</code>.</p>
</section>
<section id="answer-3-score-89" class="level4">
<h4>Answer 3 (score 89)</h4>
<h5>
Intuitively:
</h2>
<blockquote>
“The complexity should be O(nLog n)… for each item we”heapify“, it has the potential to have to filter down once for each level for the heap so far (which is log n levels).”
</blockquote>
<p>Not quite. Your logic does not produce a tight bound – it over estimates the complexity of each heapify. If built from the bottom up, insertion (heapify) can be much less than <code>O(log(n))</code>. The process is as follows:</p>
<p><strong>( Step 1 )</strong> <em>The first <code>n/2</code> elements go on the bottom row of the heap. <code>h=0</code>, so heapify is not needed.</em></p>
<p><strong>( Step 2 )</strong> <em>The next <code>n/2&lt;sup&gt;2&lt;/sup&gt;</code> elements go on the row 1 up from the bottom. <code>h=1</code>, heapify filters 1 level down.</em></p>
<p>
<strong>( Step <em>i</em> )</strong> <em>The next <code>n/2&lt;sup&gt;i&lt;/sup&gt;</code> elements go in row <code>i</code> up from the bottom. <code>h=i</code>, heapify filters <code>i</code> levels down.</em>
</p>
<p><strong>( Step <em>log(n)</em> )</strong> <em>The last <code>n/2&lt;sup&gt;log&lt;sub&gt;2&lt;/sub&gt;(n)&lt;/sup&gt; = 1</code> element goes in row <code>log(n)</code> up from the bottom. <code>h=log(n)</code>, heapify filters <code>log(n)</code> levels down.</em></p>
<p><strong>NOTICE:</strong> that after step one, <code>1/2</code> of the elements <code>(n/2)</code> are already in the heap, and we didn’t even need to call heapify once. Also, notice that only a single element, the root, actually incurs the full <code>log(n)</code> complexity.</p>
<hr>
<h5>
Theoretically:
</h2>
<p>The Total steps <code>N</code> to build a heap of size <code>n</code>, can be written out mathematically.</p>
<p>At height <code>i</code>, we’ve shown (above) that there will be <code>n/2&lt;sup&gt;i+1&lt;/sup&gt;</code> elements that need to call heapify, and we know heapify at height <code>i</code> is <code>O(i)</code>. This gives:</p>
<blockquote>
<img src="https://i.stack.imgur.com/BlI70.gif" alt="enter image description here">
</blockquote>
<p>The solution to the last summation can be found by taking the derivative of both sides of the well known geometric series equation:</p>
<blockquote>
<img src="https://i.stack.imgur.com/tcakI.gif" alt="enter image description here">
</blockquote>
<p>Finally, plugging in <code>x = 1/2</code> into the above equation yields <code>2</code>. Plugging this into the first equation gives:</p>
<blockquote>
<img src="https://i.stack.imgur.com/L9w4B.gif" alt="enter image description here">
</blockquote>
<p>Thus, the total number of steps is of size <code>O(n)</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-an-np-complete-in-computer-science-score-231051-in-2017" class="level3">
<h3>42: What is an NP-complete in computer science? (score <a href="https://stackoverflow.com/q/210829.html">231051</a> in 2017)</h3>
<section id="question-41" class="level4">
<h4>Question</h4>
<p>What is an NP-complete problem? Why is it such an important topic in computer science?</p>
</section>
<section id="answer-accepted-score-200" class="level4">
<h4>Answer accepted (score 200)</h4>
<p><strong>NP</strong> stands for <strong><em>Non-deterministic</em> Polynomial</strong> time.</p>
<p>This means that the problem can be solved in Polynomial time using a Non-deterministic Turing machine (like a regular Turing machine but also including a non-deterministic “choice” function). Basically, a solution has to be <i>testable</i> in poly time. If that’s the case, and a known NP problem can be solved using the given problem with modified input (an NP problem can be <i>reduced</i> to the given problem) then the problem is NP complete.</p>
<p>The main thing to take away from an NP-complete problem is that it cannot be solved in polynomial time in any known way. NP-Hard/NP-Complete is a way of showing that certain classes of problems are not solvable in realistic time.</p>
<p>Edit: As others have noted, there are often approximation solutions for NP-Complete problems. In this case, the approximation solution usually gives a approximation bound using special notation which tells us how close the approximation is.</p>
</section>
<section id="answer-2-score-403" class="level4">
<h4>Answer 2 (score 403)</h4>
<h5>
What is <a href="https://en.wikipedia.org/wiki/NP_(complexity)" rel="noreferrer">NP</a>?
</h2>
<p>NP is the set of all <a href="https://en.wikipedia.org/wiki/Decision_problem" rel="noreferrer">decision problems</a> (questions with a yes-or-no answer) for which the ‘yes’-answers can be <strong><em>verified</em></strong> in polynomial time (O(n<sup>k</sup>) where <em>n</em> is the problem size, and <em>k</em> is a constant) by a <a href="http://en.wikipedia.org/wiki/Deterministic_Turing_machine" rel="noreferrer">deterministic Turing machine</a>. Polynomial time is sometimes used as the definition of <em>fast</em> or <em>quickly</em>.</p>
<h5>
What is <a href="https://en.wikipedia.org/wiki/P_(complexity)" rel="noreferrer">P</a>?
</h2>
<p>P is the set of all decision problems which can be <strong>solved</strong> in <em>polynomial time</em> by a <em>deterministic Turing machine</em>. Since they can be solved in polynomial time, they can also be verified in polynomial time. Therefore P is a subset of NP.</p>
<h5>
What is <a href="https://en.wikipedia.org/wiki/NP-complete" rel="noreferrer">NP-Complete</a>?
</h2>
<p>A problem x that is in NP is also in NP-Complete <em>if and only if</em> every other problem in NP can be quickly (ie. in polynomial time) transformed into x.</p>
<p>In other words:</p>
<ol>
<li>
x is in NP, and
</li>
<li>
Every problem in NP is <a href="https://en.wikipedia.org/wiki/Reduction_(complexity)" rel="noreferrer"><em>reducible</em></a> to x
</li>
</ol>
<p>So, what makes <em>NP-Complete</em> so interesting is that if any one of the NP-Complete problems was to be solved quickly, then all <em>NP</em> problems can be solved quickly.</p>
<p>See also the post <a href="https://stackoverflow.com/questions/111307/whats-pnp-and-why-is-it-such-a-famous-question">What’s “P=NP?”, and why is it such a famous question?</a></p>
<h5>
What is <a href="https://en.wikipedia.org/wiki/NP-hard" rel="noreferrer">NP-Hard</a>?
</h2>
<p>NP-Hard are problems that are at least as hard as the hardest problems in NP. Note that NP-Complete problems are also NP-hard. However not all NP-hard problems are NP (or even a decision problem), despite having <code>NP</code> as a prefix. That is the NP in NP-hard does not mean <em>non-deterministic polynomial time</em>. Yes, this is confusing, but its usage is entrenched and unlikely to change.</p>
</section>
<section id="answer-3-score-31-1" class="level4">
<h4>Answer 3 (score 31)</h4>
<p>NP-Complete means something very specific and you have to be careful or you will get the definition wrong. First, an NP problem is a yes/no problem such that</p>
<ol>
<li>
There is polynomial-time proof for every instance of the problem with a “yes” answer that the answer is “yes”, or (equivalently)
</li>
<li>
There exists a polynomial-time algorithm (possibly using random variables) that has a non-zero probability of answering “yes” if the answer to an instance of the problem is “yes” and will say “no” 100% of the time if the answer is “no.” In other words, the algorithm must have a false-negative rate less than 100% and no false positives.
</li>
</ol>
<p>A problem X is NP-Complete if</p>
<ol>
<li>
X is in NP, and
</li>
<li>
For any problem Y in NP, there is a “reduction” from Y to X: a polynomial-time algorithm that transforms any instance of Y into an instance of X such that the answer to the Y-instance is “yes” if and only if the answer X-instance is “yes”.
</li>
</ol>
<p>If X is NP-complete and a deterministic, polynomial-time algorithm exists that can solve all instances of X correctly (0% false-positives, 0% false-negatives), then any problem in NP can be solved in deterministic-polynomial-time (by reduction to X).</p>
<p>So far, nobody has come up with such a deterministic polynomial-time algorithm, but nobody has proven one doesn’t exist (there’s a million bucks for anyone who can do either: the is the <a href="http://en.wikipedia.org/wiki/P_%3D_NP_problem" rel="noreferrer">P = NP problem</a>). That doesn’t mean that you can’t solve a particular instance of an NP-Complete (or NP-Hard) problem. It just means you can’t have something that will work reliably on all instances of a problem the same way you could reliably sort a list of integers. You might very well be able to come up with an algorithm that will work very well on all practical instances of a NP-Hard problem.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="quick-sort-vs-merge-sort-score-226941-in-2009" class="level3">
<h3>43: Quick Sort Vs Merge Sort (score <a href="https://stackoverflow.com/q/680541.html">226941</a> in 2009)</h3>
<section id="question-42" class="level4">
<h4>Question</h4>
<p>Why might quick sort be better than merge sort ?</p>
</section>
<section id="answer-accepted-score-110" class="level4">
<h4>Answer accepted (score 110)</h4>
<p>See <a href="http://en.wikipedia.org/wiki/Quicksort" rel="noreferrer">Quicksort on wikipedia</a>:</p>
<blockquote>
<p>
Typically, quicksort is significantly faster in practice than other Θ(nlogn) algorithms, because its inner loop can be efficiently implemented on most architectures, and in most real-world data, it is possible to make design choices which minimize the probability of requiring quadratic time.
</p>
</blockquote>
<p>Note that the very low memory requirement is a big plus as well.</p>
</section>
<section id="answer-2-score-72" class="level4">
<h4>Answer 2 (score 72)</h4>
<p>Quick sort is typically faster than merge sort when the data is stored in memory. However, when the data set is huge and is stored on external devices such as a hard drive, merge sort is the clear winner in terms of speed. It minimizes the expensive reads of the external drive and also lends itself well to parallel computing.</p>
</section>
<section id="answer-3-score-61-2" class="level4">
<h4>Answer 3 (score 61)</h4>
<p>For Merge sort worst case is <code>O(n*log(n))</code>, for Quick sort: <code>O(n</code><sup>2</sup><code>)</code>. For other cases (avg, best) both have <code>O(n*log(n))</code>. However Quick sort is space constant where Merge sort depends on the structure you’re sorting.</p>
<p>See <a href="http://www.cprogramming.com/tutorial/computersciencetheory/sortcomp.html" rel="noreferrer">this comparison</a>.</p>
<p>You can also see it <a href="http://cg.scs.carleton.ca/~morin/misc/sortalg/" rel="noreferrer">visually</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="efficient-algorithm-for-bit-reversal-from-msb-lsb-to-lsb-msb-in-c-score-220739-in-2019" class="level3">
<h3>44: Efficient Algorithm for Bit Reversal (from MSB-&gt;LSB to LSB-&gt;MSB) in C (score <a href="https://stackoverflow.com/q/746171.html">220739</a> in 2019)</h3>
<section id="question-43" class="level4">
<h4>Question</h4>
<p>What is the best algorithm to achieve the following:</p>
<p><code>0010 0000 =&amp;gt; 0000 0100</code></p>
<p>The conversion is from MSB-&gt;LSB to LSB-&gt;MSB. All bits must be reversed; that is, this is <em>not</em> endianness-swapping.</p>
</section>
<section id="answer-accepted-score-490" class="level4">
<h4>Answer accepted (score 490)</h4>
<p><strong>NOTE</strong>: All algorithms below are in C, but should be portable to your language of choice (just don’t look at me when they’re not as fast :)</p>
<h5>
Options
</h2>
<p><strong>Low Memory (32-bit <code>int</code>, 32-bit machine)(from <a href="http://aggregate.org/MAGIC/
#Bit%20Reversal" rel="noreferrer">here</a>):</strong></p>
<div class="sourceCode" id="cb267"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span></span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true"></a>reverse(<span class="dt">register</span> <span class="dt">unsigned</span> <span class="dt">int</span> x)</span>
<span id="cb267-3"><a href="#cb267-3" aria-hidden="true"></a>{</span>
<span id="cb267-4"><a href="#cb267-4" aria-hidden="true"></a>    x = (((x &amp; <span class="bn">0xaaaaaaaa</span>) &gt;&gt; <span class="dv">1</span>) | ((x &amp; <span class="bn">0x55555555</span>) &lt;&lt; <span class="dv">1</span>));</span>
<span id="cb267-5"><a href="#cb267-5" aria-hidden="true"></a>    x = (((x &amp; <span class="bn">0xcccccccc</span>) &gt;&gt; <span class="dv">2</span>) | ((x &amp; <span class="bn">0x33333333</span>) &lt;&lt; <span class="dv">2</span>));</span>
<span id="cb267-6"><a href="#cb267-6" aria-hidden="true"></a>    x = (((x &amp; <span class="bn">0xf0f0f0f0</span>) &gt;&gt; <span class="dv">4</span>) | ((x &amp; <span class="bn">0x0f0f0f0f</span>) &lt;&lt; <span class="dv">4</span>));</span>
<span id="cb267-7"><a href="#cb267-7" aria-hidden="true"></a>    x = (((x &amp; <span class="bn">0xff00ff00</span>) &gt;&gt; <span class="dv">8</span>) | ((x &amp; <span class="bn">0x00ff00ff</span>) &lt;&lt; <span class="dv">8</span>));</span>
<span id="cb267-8"><a href="#cb267-8" aria-hidden="true"></a>    <span class="cf">return</span>((x &gt;&gt; <span class="dv">16</span>) | (x &lt;&lt; <span class="dv">16</span>));</span>
<span id="cb267-9"><a href="#cb267-9" aria-hidden="true"></a></span>
<span id="cb267-10"><a href="#cb267-10" aria-hidden="true"></a>}</span></code></pre></div>
<p>From the famous <a href="http://graphics.stanford.edu/~seander/bithacks.html" rel="noreferrer">Bit Twiddling Hacks page</a>:</p>
<p><strong>Fastest (lookup table)</strong>:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true"></a><span class="dt">static</span> <span class="dt">const</span> <span class="dt">unsigned</span> <span class="dt">char</span> BitReverseTable256[] = </span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true"></a>{</span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true"></a>  <span class="bn">0x00</span>, <span class="bn">0x80</span>, <span class="bn">0x40</span>, <span class="bn">0xC0</span>, <span class="bn">0x20</span>, <span class="bn">0xA0</span>, <span class="bn">0x60</span>, <span class="bn">0xE0</span>, <span class="bn">0x10</span>, <span class="bn">0x90</span>, <span class="bn">0x50</span>, <span class="bn">0xD0</span>, <span class="bn">0x30</span>, <span class="bn">0xB0</span>, <span class="bn">0x70</span>, <span class="bn">0xF0</span>, </span>
<span id="cb268-4"><a href="#cb268-4" aria-hidden="true"></a>  <span class="bn">0x08</span>, <span class="bn">0x88</span>, <span class="bn">0x48</span>, <span class="bn">0xC8</span>, <span class="bn">0x28</span>, <span class="bn">0xA8</span>, <span class="bn">0x68</span>, <span class="bn">0xE8</span>, <span class="bn">0x18</span>, <span class="bn">0x98</span>, <span class="bn">0x58</span>, <span class="bn">0xD8</span>, <span class="bn">0x38</span>, <span class="bn">0xB8</span>, <span class="bn">0x78</span>, <span class="bn">0xF8</span>, </span>
<span id="cb268-5"><a href="#cb268-5" aria-hidden="true"></a>  <span class="bn">0x04</span>, <span class="bn">0x84</span>, <span class="bn">0x44</span>, <span class="bn">0xC4</span>, <span class="bn">0x24</span>, <span class="bn">0xA4</span>, <span class="bn">0x64</span>, <span class="bn">0xE4</span>, <span class="bn">0x14</span>, <span class="bn">0x94</span>, <span class="bn">0x54</span>, <span class="bn">0xD4</span>, <span class="bn">0x34</span>, <span class="bn">0xB4</span>, <span class="bn">0x74</span>, <span class="bn">0xF4</span>, </span>
<span id="cb268-6"><a href="#cb268-6" aria-hidden="true"></a>  <span class="bn">0x0C</span>, <span class="bn">0x8C</span>, <span class="bn">0x4C</span>, <span class="bn">0xCC</span>, <span class="bn">0x2C</span>, <span class="bn">0xAC</span>, <span class="bn">0x6C</span>, <span class="bn">0xEC</span>, <span class="bn">0x1C</span>, <span class="bn">0x9C</span>, <span class="bn">0x5C</span>, <span class="bn">0xDC</span>, <span class="bn">0x3C</span>, <span class="bn">0xBC</span>, <span class="bn">0x7C</span>, <span class="bn">0xFC</span>, </span>
<span id="cb268-7"><a href="#cb268-7" aria-hidden="true"></a>  <span class="bn">0x02</span>, <span class="bn">0x82</span>, <span class="bn">0x42</span>, <span class="bn">0xC2</span>, <span class="bn">0x22</span>, <span class="bn">0xA2</span>, <span class="bn">0x62</span>, <span class="bn">0xE2</span>, <span class="bn">0x12</span>, <span class="bn">0x92</span>, <span class="bn">0x52</span>, <span class="bn">0xD2</span>, <span class="bn">0x32</span>, <span class="bn">0xB2</span>, <span class="bn">0x72</span>, <span class="bn">0xF2</span>, </span>
<span id="cb268-8"><a href="#cb268-8" aria-hidden="true"></a>  <span class="bn">0x0A</span>, <span class="bn">0x8A</span>, <span class="bn">0x4A</span>, <span class="bn">0xCA</span>, <span class="bn">0x2A</span>, <span class="bn">0xAA</span>, <span class="bn">0x6A</span>, <span class="bn">0xEA</span>, <span class="bn">0x1A</span>, <span class="bn">0x9A</span>, <span class="bn">0x5A</span>, <span class="bn">0xDA</span>, <span class="bn">0x3A</span>, <span class="bn">0xBA</span>, <span class="bn">0x7A</span>, <span class="bn">0xFA</span>,</span>
<span id="cb268-9"><a href="#cb268-9" aria-hidden="true"></a>  <span class="bn">0x06</span>, <span class="bn">0x86</span>, <span class="bn">0x46</span>, <span class="bn">0xC6</span>, <span class="bn">0x26</span>, <span class="bn">0xA6</span>, <span class="bn">0x66</span>, <span class="bn">0xE6</span>, <span class="bn">0x16</span>, <span class="bn">0x96</span>, <span class="bn">0x56</span>, <span class="bn">0xD6</span>, <span class="bn">0x36</span>, <span class="bn">0xB6</span>, <span class="bn">0x76</span>, <span class="bn">0xF6</span>, </span>
<span id="cb268-10"><a href="#cb268-10" aria-hidden="true"></a>  <span class="bn">0x0E</span>, <span class="bn">0x8E</span>, <span class="bn">0x4E</span>, <span class="bn">0xCE</span>, <span class="bn">0x2E</span>, <span class="bn">0xAE</span>, <span class="bn">0x6E</span>, <span class="bn">0xEE</span>, <span class="bn">0x1E</span>, <span class="bn">0x9E</span>, <span class="bn">0x5E</span>, <span class="bn">0xDE</span>, <span class="bn">0x3E</span>, <span class="bn">0xBE</span>, <span class="bn">0x7E</span>, <span class="bn">0xFE</span>,</span>
<span id="cb268-11"><a href="#cb268-11" aria-hidden="true"></a>  <span class="bn">0x01</span>, <span class="bn">0x81</span>, <span class="bn">0x41</span>, <span class="bn">0xC1</span>, <span class="bn">0x21</span>, <span class="bn">0xA1</span>, <span class="bn">0x61</span>, <span class="bn">0xE1</span>, <span class="bn">0x11</span>, <span class="bn">0x91</span>, <span class="bn">0x51</span>, <span class="bn">0xD1</span>, <span class="bn">0x31</span>, <span class="bn">0xB1</span>, <span class="bn">0x71</span>, <span class="bn">0xF1</span>,</span>
<span id="cb268-12"><a href="#cb268-12" aria-hidden="true"></a>  <span class="bn">0x09</span>, <span class="bn">0x89</span>, <span class="bn">0x49</span>, <span class="bn">0xC9</span>, <span class="bn">0x29</span>, <span class="bn">0xA9</span>, <span class="bn">0x69</span>, <span class="bn">0xE9</span>, <span class="bn">0x19</span>, <span class="bn">0x99</span>, <span class="bn">0x59</span>, <span class="bn">0xD9</span>, <span class="bn">0x39</span>, <span class="bn">0xB9</span>, <span class="bn">0x79</span>, <span class="bn">0xF9</span>, </span>
<span id="cb268-13"><a href="#cb268-13" aria-hidden="true"></a>  <span class="bn">0x05</span>, <span class="bn">0x85</span>, <span class="bn">0x45</span>, <span class="bn">0xC5</span>, <span class="bn">0x25</span>, <span class="bn">0xA5</span>, <span class="bn">0x65</span>, <span class="bn">0xE5</span>, <span class="bn">0x15</span>, <span class="bn">0x95</span>, <span class="bn">0x55</span>, <span class="bn">0xD5</span>, <span class="bn">0x35</span>, <span class="bn">0xB5</span>, <span class="bn">0x75</span>, <span class="bn">0xF5</span>,</span>
<span id="cb268-14"><a href="#cb268-14" aria-hidden="true"></a>  <span class="bn">0x0D</span>, <span class="bn">0x8D</span>, <span class="bn">0x4D</span>, <span class="bn">0xCD</span>, <span class="bn">0x2D</span>, <span class="bn">0xAD</span>, <span class="bn">0x6D</span>, <span class="bn">0xED</span>, <span class="bn">0x1D</span>, <span class="bn">0x9D</span>, <span class="bn">0x5D</span>, <span class="bn">0xDD</span>, <span class="bn">0x3D</span>, <span class="bn">0xBD</span>, <span class="bn">0x7D</span>, <span class="bn">0xFD</span>,</span>
<span id="cb268-15"><a href="#cb268-15" aria-hidden="true"></a>  <span class="bn">0x03</span>, <span class="bn">0x83</span>, <span class="bn">0x43</span>, <span class="bn">0xC3</span>, <span class="bn">0x23</span>, <span class="bn">0xA3</span>, <span class="bn">0x63</span>, <span class="bn">0xE3</span>, <span class="bn">0x13</span>, <span class="bn">0x93</span>, <span class="bn">0x53</span>, <span class="bn">0xD3</span>, <span class="bn">0x33</span>, <span class="bn">0xB3</span>, <span class="bn">0x73</span>, <span class="bn">0xF3</span>, </span>
<span id="cb268-16"><a href="#cb268-16" aria-hidden="true"></a>  <span class="bn">0x0B</span>, <span class="bn">0x8B</span>, <span class="bn">0x4B</span>, <span class="bn">0xCB</span>, <span class="bn">0x2B</span>, <span class="bn">0xAB</span>, <span class="bn">0x6B</span>, <span class="bn">0xEB</span>, <span class="bn">0x1B</span>, <span class="bn">0x9B</span>, <span class="bn">0x5B</span>, <span class="bn">0xDB</span>, <span class="bn">0x3B</span>, <span class="bn">0xBB</span>, <span class="bn">0x7B</span>, <span class="bn">0xFB</span>,</span>
<span id="cb268-17"><a href="#cb268-17" aria-hidden="true"></a>  <span class="bn">0x07</span>, <span class="bn">0x87</span>, <span class="bn">0x47</span>, <span class="bn">0xC7</span>, <span class="bn">0x27</span>, <span class="bn">0xA7</span>, <span class="bn">0x67</span>, <span class="bn">0xE7</span>, <span class="bn">0x17</span>, <span class="bn">0x97</span>, <span class="bn">0x57</span>, <span class="bn">0xD7</span>, <span class="bn">0x37</span>, <span class="bn">0xB7</span>, <span class="bn">0x77</span>, <span class="bn">0xF7</span>, </span>
<span id="cb268-18"><a href="#cb268-18" aria-hidden="true"></a>  <span class="bn">0x0F</span>, <span class="bn">0x8F</span>, <span class="bn">0x4F</span>, <span class="bn">0xCF</span>, <span class="bn">0x2F</span>, <span class="bn">0xAF</span>, <span class="bn">0x6F</span>, <span class="bn">0xEF</span>, <span class="bn">0x1F</span>, <span class="bn">0x9F</span>, <span class="bn">0x5F</span>, <span class="bn">0xDF</span>, <span class="bn">0x3F</span>, <span class="bn">0xBF</span>, <span class="bn">0x7F</span>, <span class="bn">0xFF</span></span>
<span id="cb268-19"><a href="#cb268-19" aria-hidden="true"></a>};</span>
<span id="cb268-20"><a href="#cb268-20" aria-hidden="true"></a></span>
<span id="cb268-21"><a href="#cb268-21" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> v; <span class="co">// reverse 32-bit value, 8 bits at time</span></span>
<span id="cb268-22"><a href="#cb268-22" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> c; <span class="co">// c will get v reversed</span></span>
<span id="cb268-23"><a href="#cb268-23" aria-hidden="true"></a></span>
<span id="cb268-24"><a href="#cb268-24" aria-hidden="true"></a><span class="co">// Option 1:</span></span>
<span id="cb268-25"><a href="#cb268-25" aria-hidden="true"></a>c = (BitReverseTable256[v &amp; <span class="bn">0xff</span>] &lt;&lt; <span class="dv">24</span>) | </span>
<span id="cb268-26"><a href="#cb268-26" aria-hidden="true"></a>    (BitReverseTable256[(v &gt;&gt; <span class="dv">8</span>) &amp; <span class="bn">0xff</span>] &lt;&lt; <span class="dv">16</span>) | </span>
<span id="cb268-27"><a href="#cb268-27" aria-hidden="true"></a>    (BitReverseTable256[(v &gt;&gt; <span class="dv">16</span>) &amp; <span class="bn">0xff</span>] &lt;&lt; <span class="dv">8</span>) |</span>
<span id="cb268-28"><a href="#cb268-28" aria-hidden="true"></a>    (BitReverseTable256[(v &gt;&gt; <span class="dv">24</span>) &amp; <span class="bn">0xff</span>]);</span>
<span id="cb268-29"><a href="#cb268-29" aria-hidden="true"></a></span>
<span id="cb268-30"><a href="#cb268-30" aria-hidden="true"></a><span class="co">// Option 2:</span></span>
<span id="cb268-31"><a href="#cb268-31" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> * p = (<span class="dt">unsigned</span> <span class="dt">char</span> *) &amp;v;</span>
<span id="cb268-32"><a href="#cb268-32" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> * q = (<span class="dt">unsigned</span> <span class="dt">char</span> *) &amp;c;</span>
<span id="cb268-33"><a href="#cb268-33" aria-hidden="true"></a>q[<span class="dv">3</span>] = BitReverseTable256[p[<span class="dv">0</span>]]; </span>
<span id="cb268-34"><a href="#cb268-34" aria-hidden="true"></a>q[<span class="dv">2</span>] = BitReverseTable256[p[<span class="dv">1</span>]]; </span>
<span id="cb268-35"><a href="#cb268-35" aria-hidden="true"></a>q[<span class="dv">1</span>] = BitReverseTable256[p[<span class="dv">2</span>]]; </span>
<span id="cb268-36"><a href="#cb268-36" aria-hidden="true"></a>q[<span class="dv">0</span>] = BitReverseTable256[p[<span class="dv">3</span>]];</span></code></pre></div>
<p>You can extend this idea to 64-bit <code>int</code>s, or trade off memory for speed (assuming your L1 Data Cache is large enough), and reverse 16 bits at a time with a 64K-entry lookup table.</p>
<hr>
<h5>
Others
</h2>
<p><strong>Simple</strong></p>
<div class="sourceCode" id="cb269"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> v;     <span class="co">// input bits to be reversed</span></span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> r = v &amp; <span class="dv">1</span>; <span class="co">// r will be reversed bits of v; first get LSB of v</span></span>
<span id="cb269-3"><a href="#cb269-3" aria-hidden="true"></a><span class="dt">int</span> s = <span class="kw">sizeof</span>(v) * CHAR_BIT - <span class="dv">1</span>; <span class="co">// extra shift needed at end</span></span>
<span id="cb269-4"><a href="#cb269-4" aria-hidden="true"></a></span>
<span id="cb269-5"><a href="#cb269-5" aria-hidden="true"></a><span class="cf">for</span> (v &gt;&gt;= <span class="dv">1</span>; v; v &gt;&gt;= <span class="dv">1</span>)</span>
<span id="cb269-6"><a href="#cb269-6" aria-hidden="true"></a>{   </span>
<span id="cb269-7"><a href="#cb269-7" aria-hidden="true"></a>  r &lt;&lt;= <span class="dv">1</span>;</span>
<span id="cb269-8"><a href="#cb269-8" aria-hidden="true"></a>  r |= v &amp; <span class="dv">1</span>;</span>
<span id="cb269-9"><a href="#cb269-9" aria-hidden="true"></a>  s--;</span>
<span id="cb269-10"><a href="#cb269-10" aria-hidden="true"></a>}</span>
<span id="cb269-11"><a href="#cb269-11" aria-hidden="true"></a>r &lt;&lt;= s; <span class="co">// shift when v&#39;s highest bits are zero</span></span></code></pre></div>
<p><strong>Faster (32-bit processor)</strong></p>
<div class="sourceCode" id="cb270"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> b = x;</span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true"></a>b = ((b * <span class="bn">0x0802</span><span class="bu">LU</span> &amp; <span class="bn">0x22110</span><span class="bu">LU</span>) | (b * <span class="bn">0x8020</span><span class="bu">LU</span> &amp; <span class="bn">0x88440</span><span class="bu">LU</span>)) * <span class="bn">0x10101</span><span class="bu">LU</span> &gt;&gt; <span class="dv">16</span>; </span></code></pre></div>
<p><strong>Faster (64-bit processor)</strong></p>
<div class="sourceCode" id="cb271"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> b; <span class="co">// reverse this (8-bit) byte</span></span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true"></a>b = (b * <span class="bn">0x0202020202</span><span class="bu">ULL</span> &amp; <span class="bn">0x010884422010</span><span class="bu">ULL</span>) % <span class="dv">1023</span>;</span></code></pre></div>
<p>If you want to do this on a 32-bit <code>int</code>, just reverse the bits in each byte, and reverse the order of the bytes. That is:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> toReverse;</span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span> reversed;</span>
<span id="cb272-3"><a href="#cb272-3" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> inByte0 = (toReverse &amp; <span class="bn">0xFF</span>);</span>
<span id="cb272-4"><a href="#cb272-4" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> inByte1 = (toReverse &amp; <span class="bn">0xFF00</span>) &gt;&gt; <span class="dv">8</span>;</span>
<span id="cb272-5"><a href="#cb272-5" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> inByte2 = (toReverse &amp; <span class="bn">0xFF0000</span>) &gt;&gt; <span class="dv">16</span>;</span>
<span id="cb272-6"><a href="#cb272-6" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">char</span> inByte3 = (toReverse &amp; <span class="bn">0xFF000000</span>) &gt;&gt; <span class="dv">24</span>;</span>
<span id="cb272-7"><a href="#cb272-7" aria-hidden="true"></a>reversed = (reverseBits(inByte0) &lt;&lt; <span class="dv">24</span>) | (reverseBits(inByte1) &lt;&lt; <span class="dv">16</span>) | (reverseBits(inByte2) &lt;&lt; <span class="dv">8</span>) | (reverseBits(inByte3);</span></code></pre></div>
<hr>
<h5>
Results
</h2>
<p>I benchmarked the two most promising solutions, the lookup table, and bitwise-AND (the first one). The test machine is a laptop w/ 4GB of DDR2-800 and a Core 2 Duo T7500 @ 2.4GHz, 4MB L2 Cache; YMMV. I used <em>gcc</em> 4.3.2 on 64-bit Linux. OpenMP (and the GCC bindings) were used for high-resolution timers.</p>
<p><strong>reverse.c</strong></p>
<div class="sourceCode" id="cb273"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true"></a></span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb273-3"><a href="#cb273-3" aria-hidden="true"></a></span>
<span id="cb273-4"><a href="#cb273-4" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb273-5"><a href="#cb273-5" aria-hidden="true"></a></span>
<span id="cb273-6"><a href="#cb273-6" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;omp.h&gt;</span></span>
<span id="cb273-7"><a href="#cb273-7" aria-hidden="true"></a></span>
<span id="cb273-8"><a href="#cb273-8" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">int</span></span>
<span id="cb273-9"><a href="#cb273-9" aria-hidden="true"></a>reverse(<span class="dt">register</span> <span class="dt">unsigned</span> <span class="dt">int</span> x)</span>
<span id="cb273-10"><a href="#cb273-10" aria-hidden="true"></a>{</span>
<span id="cb273-11"><a href="#cb273-11" aria-hidden="true"></a>    x = (((x &amp; <span class="bn">0xaaaaaaaa</span>) &gt;&gt; <span class="dv">1</span>) | ((x &amp; <span class="bn">0x55555555</span>) &lt;&lt; <span class="dv">1</span>));</span>
<span id="cb273-12"><a href="#cb273-12" aria-hidden="true"></a>    x = (((x &amp; <span class="bn">0xcccccccc</span>) &gt;&gt; <span class="dv">2</span>) | ((x &amp; <span class="bn">0x33333333</span>) &lt;&lt; <span class="dv">2</span>));</span>
<span id="cb273-13"><a href="#cb273-13" aria-hidden="true"></a>    x = (((x &amp; <span class="bn">0xf0f0f0f0</span>) &gt;&gt; <span class="dv">4</span>) | ((x &amp; <span class="bn">0x0f0f0f0f</span>) &lt;&lt; <span class="dv">4</span>));</span>
<span id="cb273-14"><a href="#cb273-14" aria-hidden="true"></a>    x = (((x &amp; <span class="bn">0xff00ff00</span>) &gt;&gt; <span class="dv">8</span>) | ((x &amp; <span class="bn">0x00ff00ff</span>) &lt;&lt; <span class="dv">8</span>));</span>
<span id="cb273-15"><a href="#cb273-15" aria-hidden="true"></a>    <span class="cf">return</span>((x &gt;&gt; <span class="dv">16</span>) | (x &lt;&lt; <span class="dv">16</span>));</span>
<span id="cb273-16"><a href="#cb273-16" aria-hidden="true"></a></span>
<span id="cb273-17"><a href="#cb273-17" aria-hidden="true"></a>}</span>
<span id="cb273-18"><a href="#cb273-18" aria-hidden="true"></a></span>
<span id="cb273-19"><a href="#cb273-19" aria-hidden="true"></a><span class="dt">int</span> main()</span>
<span id="cb273-20"><a href="#cb273-20" aria-hidden="true"></a>{</span>
<span id="cb273-21"><a href="#cb273-21" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *ints = malloc(<span class="dv">100000000</span>*<span class="kw">sizeof</span>(<span class="dt">unsigned</span> <span class="dt">int</span>));</span>
<span id="cb273-22"><a href="#cb273-22" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *ints2 = malloc(<span class="dv">100000000</span>*<span class="kw">sizeof</span>(<span class="dt">unsigned</span> <span class="dt">int</span>));</span>
<span id="cb273-23"><a href="#cb273-23" aria-hidden="true"></a>    <span class="cf">for</span>(<span class="dt">unsigned</span> <span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">100000000</span>; i++)</span>
<span id="cb273-24"><a href="#cb273-24" aria-hidden="true"></a>      ints[i] = rand();</span>
<span id="cb273-25"><a href="#cb273-25" aria-hidden="true"></a></span>
<span id="cb273-26"><a href="#cb273-26" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *inptr = ints;</span>
<span id="cb273-27"><a href="#cb273-27" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *outptr = ints2;</span>
<span id="cb273-28"><a href="#cb273-28" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *endptr = ints + <span class="dv">100000000</span>;</span>
<span id="cb273-29"><a href="#cb273-29" aria-hidden="true"></a>    <span class="co">// Starting the time measurement</span></span>
<span id="cb273-30"><a href="#cb273-30" aria-hidden="true"></a>    <span class="dt">double</span> start = omp_get_wtime();</span>
<span id="cb273-31"><a href="#cb273-31" aria-hidden="true"></a>    <span class="co">// Computations to be measured</span></span>
<span id="cb273-32"><a href="#cb273-32" aria-hidden="true"></a>    <span class="cf">while</span>(inptr != endptr)</span>
<span id="cb273-33"><a href="#cb273-33" aria-hidden="true"></a>    {</span>
<span id="cb273-34"><a href="#cb273-34" aria-hidden="true"></a>      (*outptr) = reverse(*inptr);</span>
<span id="cb273-35"><a href="#cb273-35" aria-hidden="true"></a>      inptr++;</span>
<span id="cb273-36"><a href="#cb273-36" aria-hidden="true"></a>      outptr++;</span>
<span id="cb273-37"><a href="#cb273-37" aria-hidden="true"></a>    }</span>
<span id="cb273-38"><a href="#cb273-38" aria-hidden="true"></a>    <span class="co">// Measuring the elapsed time</span></span>
<span id="cb273-39"><a href="#cb273-39" aria-hidden="true"></a>    <span class="dt">double</span> end = omp_get_wtime();</span>
<span id="cb273-40"><a href="#cb273-40" aria-hidden="true"></a>    <span class="co">// Time calculation (in seconds)</span></span>
<span id="cb273-41"><a href="#cb273-41" aria-hidden="true"></a>    printf(<span class="st">&quot;Time: %f seconds</span><span class="sc">\n</span><span class="st">&quot;</span>, end-start);</span>
<span id="cb273-42"><a href="#cb273-42" aria-hidden="true"></a></span>
<span id="cb273-43"><a href="#cb273-43" aria-hidden="true"></a>    free(ints);</span>
<span id="cb273-44"><a href="#cb273-44" aria-hidden="true"></a>    free(ints2);</span>
<span id="cb273-45"><a href="#cb273-45" aria-hidden="true"></a></span>
<span id="cb273-46"><a href="#cb273-46" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb273-47"><a href="#cb273-47" aria-hidden="true"></a>}</span></code></pre></div>
<p><strong>reverse_lookup.c</strong></p>
<div class="sourceCode" id="cb274"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true"></a></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true"></a></span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb274-5"><a href="#cb274-5" aria-hidden="true"></a></span>
<span id="cb274-6"><a href="#cb274-6" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;omp.h&gt;</span></span>
<span id="cb274-7"><a href="#cb274-7" aria-hidden="true"></a></span>
<span id="cb274-8"><a href="#cb274-8" aria-hidden="true"></a><span class="dt">static</span> <span class="dt">const</span> <span class="dt">unsigned</span> <span class="dt">char</span> BitReverseTable256[] = </span>
<span id="cb274-9"><a href="#cb274-9" aria-hidden="true"></a>{</span>
<span id="cb274-10"><a href="#cb274-10" aria-hidden="true"></a>  <span class="bn">0x00</span>, <span class="bn">0x80</span>, <span class="bn">0x40</span>, <span class="bn">0xC0</span>, <span class="bn">0x20</span>, <span class="bn">0xA0</span>, <span class="bn">0x60</span>, <span class="bn">0xE0</span>, <span class="bn">0x10</span>, <span class="bn">0x90</span>, <span class="bn">0x50</span>, <span class="bn">0xD0</span>, <span class="bn">0x30</span>, <span class="bn">0xB0</span>, <span class="bn">0x70</span>, <span class="bn">0xF0</span>, </span>
<span id="cb274-11"><a href="#cb274-11" aria-hidden="true"></a>  <span class="bn">0x08</span>, <span class="bn">0x88</span>, <span class="bn">0x48</span>, <span class="bn">0xC8</span>, <span class="bn">0x28</span>, <span class="bn">0xA8</span>, <span class="bn">0x68</span>, <span class="bn">0xE8</span>, <span class="bn">0x18</span>, <span class="bn">0x98</span>, <span class="bn">0x58</span>, <span class="bn">0xD8</span>, <span class="bn">0x38</span>, <span class="bn">0xB8</span>, <span class="bn">0x78</span>, <span class="bn">0xF8</span>, </span>
<span id="cb274-12"><a href="#cb274-12" aria-hidden="true"></a>  <span class="bn">0x04</span>, <span class="bn">0x84</span>, <span class="bn">0x44</span>, <span class="bn">0xC4</span>, <span class="bn">0x24</span>, <span class="bn">0xA4</span>, <span class="bn">0x64</span>, <span class="bn">0xE4</span>, <span class="bn">0x14</span>, <span class="bn">0x94</span>, <span class="bn">0x54</span>, <span class="bn">0xD4</span>, <span class="bn">0x34</span>, <span class="bn">0xB4</span>, <span class="bn">0x74</span>, <span class="bn">0xF4</span>, </span>
<span id="cb274-13"><a href="#cb274-13" aria-hidden="true"></a>  <span class="bn">0x0C</span>, <span class="bn">0x8C</span>, <span class="bn">0x4C</span>, <span class="bn">0xCC</span>, <span class="bn">0x2C</span>, <span class="bn">0xAC</span>, <span class="bn">0x6C</span>, <span class="bn">0xEC</span>, <span class="bn">0x1C</span>, <span class="bn">0x9C</span>, <span class="bn">0x5C</span>, <span class="bn">0xDC</span>, <span class="bn">0x3C</span>, <span class="bn">0xBC</span>, <span class="bn">0x7C</span>, <span class="bn">0xFC</span>, </span>
<span id="cb274-14"><a href="#cb274-14" aria-hidden="true"></a>  <span class="bn">0x02</span>, <span class="bn">0x82</span>, <span class="bn">0x42</span>, <span class="bn">0xC2</span>, <span class="bn">0x22</span>, <span class="bn">0xA2</span>, <span class="bn">0x62</span>, <span class="bn">0xE2</span>, <span class="bn">0x12</span>, <span class="bn">0x92</span>, <span class="bn">0x52</span>, <span class="bn">0xD2</span>, <span class="bn">0x32</span>, <span class="bn">0xB2</span>, <span class="bn">0x72</span>, <span class="bn">0xF2</span>, </span>
<span id="cb274-15"><a href="#cb274-15" aria-hidden="true"></a>  <span class="bn">0x0A</span>, <span class="bn">0x8A</span>, <span class="bn">0x4A</span>, <span class="bn">0xCA</span>, <span class="bn">0x2A</span>, <span class="bn">0xAA</span>, <span class="bn">0x6A</span>, <span class="bn">0xEA</span>, <span class="bn">0x1A</span>, <span class="bn">0x9A</span>, <span class="bn">0x5A</span>, <span class="bn">0xDA</span>, <span class="bn">0x3A</span>, <span class="bn">0xBA</span>, <span class="bn">0x7A</span>, <span class="bn">0xFA</span>,</span>
<span id="cb274-16"><a href="#cb274-16" aria-hidden="true"></a>  <span class="bn">0x06</span>, <span class="bn">0x86</span>, <span class="bn">0x46</span>, <span class="bn">0xC6</span>, <span class="bn">0x26</span>, <span class="bn">0xA6</span>, <span class="bn">0x66</span>, <span class="bn">0xE6</span>, <span class="bn">0x16</span>, <span class="bn">0x96</span>, <span class="bn">0x56</span>, <span class="bn">0xD6</span>, <span class="bn">0x36</span>, <span class="bn">0xB6</span>, <span class="bn">0x76</span>, <span class="bn">0xF6</span>, </span>
<span id="cb274-17"><a href="#cb274-17" aria-hidden="true"></a>  <span class="bn">0x0E</span>, <span class="bn">0x8E</span>, <span class="bn">0x4E</span>, <span class="bn">0xCE</span>, <span class="bn">0x2E</span>, <span class="bn">0xAE</span>, <span class="bn">0x6E</span>, <span class="bn">0xEE</span>, <span class="bn">0x1E</span>, <span class="bn">0x9E</span>, <span class="bn">0x5E</span>, <span class="bn">0xDE</span>, <span class="bn">0x3E</span>, <span class="bn">0xBE</span>, <span class="bn">0x7E</span>, <span class="bn">0xFE</span>,</span>
<span id="cb274-18"><a href="#cb274-18" aria-hidden="true"></a>  <span class="bn">0x01</span>, <span class="bn">0x81</span>, <span class="bn">0x41</span>, <span class="bn">0xC1</span>, <span class="bn">0x21</span>, <span class="bn">0xA1</span>, <span class="bn">0x61</span>, <span class="bn">0xE1</span>, <span class="bn">0x11</span>, <span class="bn">0x91</span>, <span class="bn">0x51</span>, <span class="bn">0xD1</span>, <span class="bn">0x31</span>, <span class="bn">0xB1</span>, <span class="bn">0x71</span>, <span class="bn">0xF1</span>,</span>
<span id="cb274-19"><a href="#cb274-19" aria-hidden="true"></a>  <span class="bn">0x09</span>, <span class="bn">0x89</span>, <span class="bn">0x49</span>, <span class="bn">0xC9</span>, <span class="bn">0x29</span>, <span class="bn">0xA9</span>, <span class="bn">0x69</span>, <span class="bn">0xE9</span>, <span class="bn">0x19</span>, <span class="bn">0x99</span>, <span class="bn">0x59</span>, <span class="bn">0xD9</span>, <span class="bn">0x39</span>, <span class="bn">0xB9</span>, <span class="bn">0x79</span>, <span class="bn">0xF9</span>, </span>
<span id="cb274-20"><a href="#cb274-20" aria-hidden="true"></a>  <span class="bn">0x05</span>, <span class="bn">0x85</span>, <span class="bn">0x45</span>, <span class="bn">0xC5</span>, <span class="bn">0x25</span>, <span class="bn">0xA5</span>, <span class="bn">0x65</span>, <span class="bn">0xE5</span>, <span class="bn">0x15</span>, <span class="bn">0x95</span>, <span class="bn">0x55</span>, <span class="bn">0xD5</span>, <span class="bn">0x35</span>, <span class="bn">0xB5</span>, <span class="bn">0x75</span>, <span class="bn">0xF5</span>,</span>
<span id="cb274-21"><a href="#cb274-21" aria-hidden="true"></a>  <span class="bn">0x0D</span>, <span class="bn">0x8D</span>, <span class="bn">0x4D</span>, <span class="bn">0xCD</span>, <span class="bn">0x2D</span>, <span class="bn">0xAD</span>, <span class="bn">0x6D</span>, <span class="bn">0xED</span>, <span class="bn">0x1D</span>, <span class="bn">0x9D</span>, <span class="bn">0x5D</span>, <span class="bn">0xDD</span>, <span class="bn">0x3D</span>, <span class="bn">0xBD</span>, <span class="bn">0x7D</span>, <span class="bn">0xFD</span>,</span>
<span id="cb274-22"><a href="#cb274-22" aria-hidden="true"></a>  <span class="bn">0x03</span>, <span class="bn">0x83</span>, <span class="bn">0x43</span>, <span class="bn">0xC3</span>, <span class="bn">0x23</span>, <span class="bn">0xA3</span>, <span class="bn">0x63</span>, <span class="bn">0xE3</span>, <span class="bn">0x13</span>, <span class="bn">0x93</span>, <span class="bn">0x53</span>, <span class="bn">0xD3</span>, <span class="bn">0x33</span>, <span class="bn">0xB3</span>, <span class="bn">0x73</span>, <span class="bn">0xF3</span>, </span>
<span id="cb274-23"><a href="#cb274-23" aria-hidden="true"></a>  <span class="bn">0x0B</span>, <span class="bn">0x8B</span>, <span class="bn">0x4B</span>, <span class="bn">0xCB</span>, <span class="bn">0x2B</span>, <span class="bn">0xAB</span>, <span class="bn">0x6B</span>, <span class="bn">0xEB</span>, <span class="bn">0x1B</span>, <span class="bn">0x9B</span>, <span class="bn">0x5B</span>, <span class="bn">0xDB</span>, <span class="bn">0x3B</span>, <span class="bn">0xBB</span>, <span class="bn">0x7B</span>, <span class="bn">0xFB</span>,</span>
<span id="cb274-24"><a href="#cb274-24" aria-hidden="true"></a>  <span class="bn">0x07</span>, <span class="bn">0x87</span>, <span class="bn">0x47</span>, <span class="bn">0xC7</span>, <span class="bn">0x27</span>, <span class="bn">0xA7</span>, <span class="bn">0x67</span>, <span class="bn">0xE7</span>, <span class="bn">0x17</span>, <span class="bn">0x97</span>, <span class="bn">0x57</span>, <span class="bn">0xD7</span>, <span class="bn">0x37</span>, <span class="bn">0xB7</span>, <span class="bn">0x77</span>, <span class="bn">0xF7</span>, </span>
<span id="cb274-25"><a href="#cb274-25" aria-hidden="true"></a>  <span class="bn">0x0F</span>, <span class="bn">0x8F</span>, <span class="bn">0x4F</span>, <span class="bn">0xCF</span>, <span class="bn">0x2F</span>, <span class="bn">0xAF</span>, <span class="bn">0x6F</span>, <span class="bn">0xEF</span>, <span class="bn">0x1F</span>, <span class="bn">0x9F</span>, <span class="bn">0x5F</span>, <span class="bn">0xDF</span>, <span class="bn">0x3F</span>, <span class="bn">0xBF</span>, <span class="bn">0x7F</span>, <span class="bn">0xFF</span></span>
<span id="cb274-26"><a href="#cb274-26" aria-hidden="true"></a>};</span>
<span id="cb274-27"><a href="#cb274-27" aria-hidden="true"></a></span>
<span id="cb274-28"><a href="#cb274-28" aria-hidden="true"></a><span class="dt">int</span> main()</span>
<span id="cb274-29"><a href="#cb274-29" aria-hidden="true"></a>{</span>
<span id="cb274-30"><a href="#cb274-30" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *ints = malloc(<span class="dv">100000000</span>*<span class="kw">sizeof</span>(<span class="dt">unsigned</span> <span class="dt">int</span>));</span>
<span id="cb274-31"><a href="#cb274-31" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *ints2 = malloc(<span class="dv">100000000</span>*<span class="kw">sizeof</span>(<span class="dt">unsigned</span> <span class="dt">int</span>));</span>
<span id="cb274-32"><a href="#cb274-32" aria-hidden="true"></a>    <span class="cf">for</span>(<span class="dt">unsigned</span> <span class="dt">int</span> i = <span class="dv">0</span>; i &lt; <span class="dv">100000000</span>; i++)</span>
<span id="cb274-33"><a href="#cb274-33" aria-hidden="true"></a>      ints[i] = rand();</span>
<span id="cb274-34"><a href="#cb274-34" aria-hidden="true"></a></span>
<span id="cb274-35"><a href="#cb274-35" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *inptr = ints;</span>
<span id="cb274-36"><a href="#cb274-36" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *outptr = ints2;</span>
<span id="cb274-37"><a href="#cb274-37" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> *endptr = ints + <span class="dv">100000000</span>;</span>
<span id="cb274-38"><a href="#cb274-38" aria-hidden="true"></a>    <span class="co">// Starting the time measurement</span></span>
<span id="cb274-39"><a href="#cb274-39" aria-hidden="true"></a>    <span class="dt">double</span> start = omp_get_wtime();</span>
<span id="cb274-40"><a href="#cb274-40" aria-hidden="true"></a>    <span class="co">// Computations to be measured</span></span>
<span id="cb274-41"><a href="#cb274-41" aria-hidden="true"></a>    <span class="cf">while</span>(inptr != endptr)</span>
<span id="cb274-42"><a href="#cb274-42" aria-hidden="true"></a>    {</span>
<span id="cb274-43"><a href="#cb274-43" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> in = *inptr;  </span>
<span id="cb274-44"><a href="#cb274-44" aria-hidden="true"></a></span>
<span id="cb274-45"><a href="#cb274-45" aria-hidden="true"></a>    <span class="co">// Option 1:</span></span>
<span id="cb274-46"><a href="#cb274-46" aria-hidden="true"></a>    <span class="co">//*outptr = (BitReverseTable256[in &amp; 0xff] &lt;&lt; 24) | </span></span>
<span id="cb274-47"><a href="#cb274-47" aria-hidden="true"></a>    <span class="co">//    (BitReverseTable256[(in &gt;&gt; 8) &amp; 0xff] &lt;&lt; 16) | </span></span>
<span id="cb274-48"><a href="#cb274-48" aria-hidden="true"></a>    <span class="co">//    (BitReverseTable256[(in &gt;&gt; 16) &amp; 0xff] &lt;&lt; 8) |</span></span>
<span id="cb274-49"><a href="#cb274-49" aria-hidden="true"></a>    <span class="co">//    (BitReverseTable256[(in &gt;&gt; 24) &amp; 0xff]);</span></span>
<span id="cb274-50"><a href="#cb274-50" aria-hidden="true"></a></span>
<span id="cb274-51"><a href="#cb274-51" aria-hidden="true"></a>    <span class="co">// Option 2:</span></span>
<span id="cb274-52"><a href="#cb274-52" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> * p = (<span class="dt">unsigned</span> <span class="dt">char</span> *) &amp;(*inptr);</span>
<span id="cb274-53"><a href="#cb274-53" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> * q = (<span class="dt">unsigned</span> <span class="dt">char</span> *) &amp;(*outptr);</span>
<span id="cb274-54"><a href="#cb274-54" aria-hidden="true"></a>    q[<span class="dv">3</span>] = BitReverseTable256[p[<span class="dv">0</span>]]; </span>
<span id="cb274-55"><a href="#cb274-55" aria-hidden="true"></a>    q[<span class="dv">2</span>] = BitReverseTable256[p[<span class="dv">1</span>]]; </span>
<span id="cb274-56"><a href="#cb274-56" aria-hidden="true"></a>    q[<span class="dv">1</span>] = BitReverseTable256[p[<span class="dv">2</span>]]; </span>
<span id="cb274-57"><a href="#cb274-57" aria-hidden="true"></a>    q[<span class="dv">0</span>] = BitReverseTable256[p[<span class="dv">3</span>]];</span>
<span id="cb274-58"><a href="#cb274-58" aria-hidden="true"></a></span>
<span id="cb274-59"><a href="#cb274-59" aria-hidden="true"></a>      inptr++;</span>
<span id="cb274-60"><a href="#cb274-60" aria-hidden="true"></a>      outptr++;</span>
<span id="cb274-61"><a href="#cb274-61" aria-hidden="true"></a>    }</span>
<span id="cb274-62"><a href="#cb274-62" aria-hidden="true"></a>    <span class="co">// Measuring the elapsed time</span></span>
<span id="cb274-63"><a href="#cb274-63" aria-hidden="true"></a>    <span class="dt">double</span> end = omp_get_wtime();</span>
<span id="cb274-64"><a href="#cb274-64" aria-hidden="true"></a>    <span class="co">// Time calculation (in seconds)</span></span>
<span id="cb274-65"><a href="#cb274-65" aria-hidden="true"></a>    printf(<span class="st">&quot;Time: %f seconds</span><span class="sc">\n</span><span class="st">&quot;</span>, end-start);</span>
<span id="cb274-66"><a href="#cb274-66" aria-hidden="true"></a></span>
<span id="cb274-67"><a href="#cb274-67" aria-hidden="true"></a>    free(ints);</span>
<span id="cb274-68"><a href="#cb274-68" aria-hidden="true"></a>    free(ints2);</span>
<span id="cb274-69"><a href="#cb274-69" aria-hidden="true"></a></span>
<span id="cb274-70"><a href="#cb274-70" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb274-71"><a href="#cb274-71" aria-hidden="true"></a>}</span></code></pre></div>
<p>I tried both approaches at several different optimizations, ran 3 trials at each level, and each trial reversed 100 million random <code>unsigned ints</code>. For the lookup table option, I tried both schemes (options 1 and 2) given on the bitwise hacks page. Results are shown below.</p>
<p><strong>Bitwise AND</strong></p>
<div class="sourceCode" id="cb275"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -o reverse reverse.c</span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true"></a>Time: <span class="fl">2.000593</span> seconds</span>
<span id="cb275-4"><a href="#cb275-4" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-5"><a href="#cb275-5" aria-hidden="true"></a>Time: <span class="fl">1.938893</span> seconds</span>
<span id="cb275-6"><a href="#cb275-6" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-7"><a href="#cb275-7" aria-hidden="true"></a>Time: <span class="fl">1.936365</span> seconds</span>
<span id="cb275-8"><a href="#cb275-8" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -O2 -o reverse reverse.c</span>
<span id="cb275-9"><a href="#cb275-9" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-10"><a href="#cb275-10" aria-hidden="true"></a>Time: <span class="fl">0.942709</span> seconds</span>
<span id="cb275-11"><a href="#cb275-11" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-12"><a href="#cb275-12" aria-hidden="true"></a>Time: <span class="fl">0.991104</span> seconds</span>
<span id="cb275-13"><a href="#cb275-13" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-14"><a href="#cb275-14" aria-hidden="true"></a>Time: <span class="fl">0.947203</span> seconds</span>
<span id="cb275-15"><a href="#cb275-15" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -O3 -o reverse reverse.c</span>
<span id="cb275-16"><a href="#cb275-16" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-17"><a href="#cb275-17" aria-hidden="true"></a>Time: <span class="fl">0.922639</span> seconds</span>
<span id="cb275-18"><a href="#cb275-18" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-19"><a href="#cb275-19" aria-hidden="true"></a>Time: <span class="fl">0.892372</span> seconds</span>
<span id="cb275-20"><a href="#cb275-20" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse</span>
<span id="cb275-21"><a href="#cb275-21" aria-hidden="true"></a>Time: <span class="fl">0.891688</span> seconds</span></code></pre></div>
<p><strong>Lookup Table (option 1)</strong></p>
<div class="sourceCode" id="cb276"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -o reverse_lookup reverse_lookup.c</span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-3"><a href="#cb276-3" aria-hidden="true"></a>Time: <span class="fl">1.201127</span> seconds              </span>
<span id="cb276-4"><a href="#cb276-4" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-5"><a href="#cb276-5" aria-hidden="true"></a>Time: <span class="fl">1.196129</span> seconds              </span>
<span id="cb276-6"><a href="#cb276-6" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-7"><a href="#cb276-7" aria-hidden="true"></a>Time: <span class="fl">1.235972</span> seconds              </span>
<span id="cb276-8"><a href="#cb276-8" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -O2 -o reverse_lookup reverse_lookup.c</span>
<span id="cb276-9"><a href="#cb276-9" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-10"><a href="#cb276-10" aria-hidden="true"></a>Time: <span class="fl">0.633042</span> seconds              </span>
<span id="cb276-11"><a href="#cb276-11" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-12"><a href="#cb276-12" aria-hidden="true"></a>Time: <span class="fl">0.655880</span> seconds              </span>
<span id="cb276-13"><a href="#cb276-13" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-14"><a href="#cb276-14" aria-hidden="true"></a>Time: <span class="fl">0.633390</span> seconds              </span>
<span id="cb276-15"><a href="#cb276-15" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -O3 -o reverse_lookup reverse_lookup.c</span>
<span id="cb276-16"><a href="#cb276-16" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-17"><a href="#cb276-17" aria-hidden="true"></a>Time: <span class="fl">0.652322</span> seconds              </span>
<span id="cb276-18"><a href="#cb276-18" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-19"><a href="#cb276-19" aria-hidden="true"></a>Time: <span class="fl">0.631739</span> seconds              </span>
<span id="cb276-20"><a href="#cb276-20" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb276-21"><a href="#cb276-21" aria-hidden="true"></a>Time: <span class="fl">0.652431</span> seconds  </span></code></pre></div>
<p><strong>Lookup Table (option 2)</strong></p>
<div class="sourceCode" id="cb277"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -o reverse_lookup reverse_lookup.c</span>
<span id="cb277-2"><a href="#cb277-2" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-3"><a href="#cb277-3" aria-hidden="true"></a>Time: <span class="fl">1.671537</span> seconds</span>
<span id="cb277-4"><a href="#cb277-4" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-5"><a href="#cb277-5" aria-hidden="true"></a>Time: <span class="fl">1.688173</span> seconds</span>
<span id="cb277-6"><a href="#cb277-6" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-7"><a href="#cb277-7" aria-hidden="true"></a>Time: <span class="fl">1.664662</span> seconds</span>
<span id="cb277-8"><a href="#cb277-8" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -O2 -o reverse_lookup reverse_lookup.c</span>
<span id="cb277-9"><a href="#cb277-9" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-10"><a href="#cb277-10" aria-hidden="true"></a>Time: <span class="fl">1.049851</span> seconds</span>
<span id="cb277-11"><a href="#cb277-11" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-12"><a href="#cb277-12" aria-hidden="true"></a>Time: <span class="fl">1.048403</span> seconds</span>
<span id="cb277-13"><a href="#cb277-13" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-14"><a href="#cb277-14" aria-hidden="true"></a>Time: <span class="fl">1.085086</span> seconds</span>
<span id="cb277-15"><a href="#cb277-15" aria-hidden="true"></a>mrj10@mjlap:~/code$ gcc -fopenmp -std=c99 -O3 -o reverse_lookup reverse_lookup.c</span>
<span id="cb277-16"><a href="#cb277-16" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-17"><a href="#cb277-17" aria-hidden="true"></a>Time: <span class="fl">1.082223</span> seconds</span>
<span id="cb277-18"><a href="#cb277-18" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-19"><a href="#cb277-19" aria-hidden="true"></a>Time: <span class="fl">1.053431</span> seconds</span>
<span id="cb277-20"><a href="#cb277-20" aria-hidden="true"></a>mrj10@mjlap:~/code$ ./reverse_lookup</span>
<span id="cb277-21"><a href="#cb277-21" aria-hidden="true"></a>Time: <span class="fl">1.081224</span> seconds</span></code></pre></div>
<h5>
Conclusion
</h2>
<p><strong>Use the lookup table, with option 1</strong> (byte addressing is unsurprisingly slow) if you’re concerned about performance. If you need to squeeze every last byte of memory out of your system (and you might, if you care about the performance of bit reversal), the optimized versions of the bitwise-AND approach aren’t too shabby either.</p>
<h5>
Caveat
</h2>
<p>Yes, I know the benchmark code is a complete hack. Suggestions on how to improve it are more than welcome. Things I know about:</p>
<ul>
<li>
I don’t have access to ICC. This may be faster (please respond in a comment if you can test this out).
</li>
<li>
A 64K lookup table may do well on some modern microarchitectures with large L1D.
</li>
<li>
-mtune=native didn’t work for -O2/-O3 (<code>ld</code> blew up with some crazy symbol redefinition error), so I don’t believe the generated code is tuned for my microarchitecture.
</li>
<li>
There may be a way to do this slightly faster with SSE. I have no idea how, but with fast replication, packed bitwise AND, and swizzling instructions, there’s got to be something there.
</li>
<li>
I know only enough x86 assembly to be dangerous; here’s the code GCC generated on -O3 for option 1, so somebody more knowledgable than myself can check it out:
</li>
</ul>
<p><strong>32-bit</strong></p>
<div class="sourceCode" id="cb278"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true"></a>.L3:</span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true"></a>movl    (%r12,%rsi), %ecx</span>
<span id="cb278-3"><a href="#cb278-3" aria-hidden="true"></a>movzbl  %cl, %eax</span>
<span id="cb278-4"><a href="#cb278-4" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %edx</span>
<span id="cb278-5"><a href="#cb278-5" aria-hidden="true"></a>movl    %ecx, %eax</span>
<span id="cb278-6"><a href="#cb278-6" aria-hidden="true"></a>shrl    $<span class="dv">24</span>, %eax</span>
<span id="cb278-7"><a href="#cb278-7" aria-hidden="true"></a>mov     %eax, %eax</span>
<span id="cb278-8"><a href="#cb278-8" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %eax</span>
<span id="cb278-9"><a href="#cb278-9" aria-hidden="true"></a>sall    $<span class="dv">24</span>, %edx</span>
<span id="cb278-10"><a href="#cb278-10" aria-hidden="true"></a>orl     %eax, %edx</span>
<span id="cb278-11"><a href="#cb278-11" aria-hidden="true"></a>movzbl  %ch, %eax</span>
<span id="cb278-12"><a href="#cb278-12" aria-hidden="true"></a>shrl    $<span class="dv">16</span>, %ecx</span>
<span id="cb278-13"><a href="#cb278-13" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %eax</span>
<span id="cb278-14"><a href="#cb278-14" aria-hidden="true"></a>movzbl  %cl, %ecx</span>
<span id="cb278-15"><a href="#cb278-15" aria-hidden="true"></a>sall    $<span class="dv">16</span>, %eax</span>
<span id="cb278-16"><a href="#cb278-16" aria-hidden="true"></a>orl     %eax, %edx</span>
<span id="cb278-17"><a href="#cb278-17" aria-hidden="true"></a>movzbl  BitReverseTable256(%rcx), %eax</span>
<span id="cb278-18"><a href="#cb278-18" aria-hidden="true"></a>sall    $<span class="dv">8</span>, %eax</span>
<span id="cb278-19"><a href="#cb278-19" aria-hidden="true"></a>orl     %eax, %edx</span>
<span id="cb278-20"><a href="#cb278-20" aria-hidden="true"></a>movl    %edx, (%r13,%rsi)</span>
<span id="cb278-21"><a href="#cb278-21" aria-hidden="true"></a>addq    $<span class="dv">4</span>, %rsi</span>
<span id="cb278-22"><a href="#cb278-22" aria-hidden="true"></a>cmpq    $<span class="dv">400000000</span>, %rsi</span>
<span id="cb278-23"><a href="#cb278-23" aria-hidden="true"></a>jne     .L3</span></code></pre></div>
<p>EDIT: I also tried using <code>uint64_t</code> types on my machine to see if there was any performance boost. Performance was about 10% faster than 32-bit, and was nearly identical whether you were just using 64-bit types to reverse bits on two 32-bit <code>int</code> types at a time, or whether you were actually reversing bits in half as many 64-bit values. The assembly code is shown below (for the former case, reversing bits for two 32-bit <code>int</code> types at a time):</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true"></a>.L3:</span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true"></a>movq    (%r12,%rsi), %rdx</span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true"></a>movq    %rdx, %rax</span>
<span id="cb279-4"><a href="#cb279-4" aria-hidden="true"></a>shrq    $<span class="dv">24</span>, %rax</span>
<span id="cb279-5"><a href="#cb279-5" aria-hidden="true"></a>andl    $<span class="dv">255</span>, %eax</span>
<span id="cb279-6"><a href="#cb279-6" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %ecx</span>
<span id="cb279-7"><a href="#cb279-7" aria-hidden="true"></a>movzbq  %dl,%rax</span>
<span id="cb279-8"><a href="#cb279-8" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %eax</span>
<span id="cb279-9"><a href="#cb279-9" aria-hidden="true"></a>salq    $<span class="dv">24</span>, %rax</span>
<span id="cb279-10"><a href="#cb279-10" aria-hidden="true"></a>orq     %rax, %rcx</span>
<span id="cb279-11"><a href="#cb279-11" aria-hidden="true"></a>movq    %rdx, %rax</span>
<span id="cb279-12"><a href="#cb279-12" aria-hidden="true"></a>shrq    $<span class="dv">56</span>, %rax</span>
<span id="cb279-13"><a href="#cb279-13" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %eax</span>
<span id="cb279-14"><a href="#cb279-14" aria-hidden="true"></a>salq    $<span class="dv">32</span>, %rax</span>
<span id="cb279-15"><a href="#cb279-15" aria-hidden="true"></a>orq     %rax, %rcx</span>
<span id="cb279-16"><a href="#cb279-16" aria-hidden="true"></a>movzbl  %dh, %eax</span>
<span id="cb279-17"><a href="#cb279-17" aria-hidden="true"></a>shrq    $<span class="dv">16</span>, %rdx</span>
<span id="cb279-18"><a href="#cb279-18" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %eax</span>
<span id="cb279-19"><a href="#cb279-19" aria-hidden="true"></a>salq    $<span class="dv">16</span>, %rax</span>
<span id="cb279-20"><a href="#cb279-20" aria-hidden="true"></a>orq     %rax, %rcx</span>
<span id="cb279-21"><a href="#cb279-21" aria-hidden="true"></a>movzbq  %dl,%rax</span>
<span id="cb279-22"><a href="#cb279-22" aria-hidden="true"></a>shrq    $<span class="dv">16</span>, %rdx</span>
<span id="cb279-23"><a href="#cb279-23" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %eax</span>
<span id="cb279-24"><a href="#cb279-24" aria-hidden="true"></a>salq    $<span class="dv">8</span>, %rax</span>
<span id="cb279-25"><a href="#cb279-25" aria-hidden="true"></a>orq     %rax, %rcx</span>
<span id="cb279-26"><a href="#cb279-26" aria-hidden="true"></a>movzbq  %dl,%rax</span>
<span id="cb279-27"><a href="#cb279-27" aria-hidden="true"></a>shrq    $<span class="dv">8</span>, %rdx</span>
<span id="cb279-28"><a href="#cb279-28" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %eax</span>
<span id="cb279-29"><a href="#cb279-29" aria-hidden="true"></a>salq    $<span class="dv">56</span>, %rax</span>
<span id="cb279-30"><a href="#cb279-30" aria-hidden="true"></a>orq     %rax, %rcx</span>
<span id="cb279-31"><a href="#cb279-31" aria-hidden="true"></a>movzbq  %dl,%rax</span>
<span id="cb279-32"><a href="#cb279-32" aria-hidden="true"></a>shrq    $<span class="dv">8</span>, %rdx</span>
<span id="cb279-33"><a href="#cb279-33" aria-hidden="true"></a>movzbl  BitReverseTable256(%rax), %eax</span>
<span id="cb279-34"><a href="#cb279-34" aria-hidden="true"></a>andl    $<span class="dv">255</span>, %edx</span>
<span id="cb279-35"><a href="#cb279-35" aria-hidden="true"></a>salq    $<span class="dv">48</span>, %rax</span>
<span id="cb279-36"><a href="#cb279-36" aria-hidden="true"></a>orq     %rax, %rcx</span>
<span id="cb279-37"><a href="#cb279-37" aria-hidden="true"></a>movzbl  BitReverseTable256(%rdx), %eax</span>
<span id="cb279-38"><a href="#cb279-38" aria-hidden="true"></a>salq    $<span class="dv">40</span>, %rax</span>
<span id="cb279-39"><a href="#cb279-39" aria-hidden="true"></a>orq     %rax, %rcx</span>
<span id="cb279-40"><a href="#cb279-40" aria-hidden="true"></a>movq    %rcx, (%r13,%rsi)</span>
<span id="cb279-41"><a href="#cb279-41" aria-hidden="true"></a>addq    $<span class="dv">8</span>, %rsi</span>
<span id="cb279-42"><a href="#cb279-42" aria-hidden="true"></a>cmpq    $<span class="dv">400000000</span>, %rsi</span>
<span id="cb279-43"><a href="#cb279-43" aria-hidden="true"></a>jne     .L3</span></code></pre></div>
</section>
<section id="answer-2-score-75" class="level4">
<h4>Answer 2 (score 75)</h4>
<p>This thread caught my attention since it deals with a simple problem that requires a lot of work (CPU cycles) even for a modern CPU. And one day I also stood there with the same ¤ #%“#” problem. I had to flip millions of bytes. However I know all my target systems are modern Intel-based so let’s start optimizing to the extreme!!!</p>
<p>So I used Matt J’s lookup code as the base. the system I’m benchmarking on is a i7 haswell 4700eq.</p>
<p>Matt J’s lookup bitflipping 400 000 000 bytes: Around 0.272 seconds.</p>
<p>I then went ahead and tried to see if Intel’s ISPC compiler could vectorise the arithmetics in the reverse.c.</p>
<p>I’m not going to bore you with my findings here since I tried a lot to help the compiler find stuff, anyhow I ended up with performance of around 0.15 seconds to bitflip 400 000 000 bytes. It’s a great reduction but for my application that’s still way way too slow..</p>
<p>So people let me present the fastest Intel based bitflipper in the world. Clocked at:</p>
<p>Time to bitflip 400000000 bytes: 0.050082 seconds !!!!!</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true"></a><span class="co">// Bitflip using AVX2 - The fastest Intel based bitflip in the world!!</span></span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true"></a><span class="co">// Made by Anders Cedronius 2014 (anders.cedronius (you know what) gmail.com)</span></span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true"></a></span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true"></a></span>
<span id="cb280-5"><a href="#cb280-5" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb280-6"><a href="#cb280-6" aria-hidden="true"></a></span>
<span id="cb280-7"><a href="#cb280-7" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb280-8"><a href="#cb280-8" aria-hidden="true"></a></span>
<span id="cb280-9"><a href="#cb280-9" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;math.h&gt;</span></span>
<span id="cb280-10"><a href="#cb280-10" aria-hidden="true"></a></span>
<span id="cb280-11"><a href="#cb280-11" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;omp.h&gt;</span></span>
<span id="cb280-12"><a href="#cb280-12" aria-hidden="true"></a></span>
<span id="cb280-13"><a href="#cb280-13" aria-hidden="true"></a>using namespace std;</span>
<span id="cb280-14"><a href="#cb280-14" aria-hidden="true"></a></span>
<span id="cb280-15"><a href="#cb280-15" aria-hidden="true"></a></span>
<span id="cb280-16"><a href="#cb280-16" aria-hidden="true"></a><span class="pp">#define DISPLAY_HEIGHT  4</span></span>
<span id="cb280-17"><a href="#cb280-17" aria-hidden="true"></a></span>
<span id="cb280-18"><a href="#cb280-18" aria-hidden="true"></a><span class="pp">#define DISPLAY_WIDTH   32</span></span>
<span id="cb280-19"><a href="#cb280-19" aria-hidden="true"></a></span>
<span id="cb280-20"><a href="#cb280-20" aria-hidden="true"></a><span class="pp">#define NUM_DATA_BYTES  400000000</span></span>
<span id="cb280-21"><a href="#cb280-21" aria-hidden="true"></a></span>
<span id="cb280-22"><a href="#cb280-22" aria-hidden="true"></a><span class="co">// Constants (first we got the mask, then the high order nibble look up table and last we got the low order nibble lookup table)</span></span>
<span id="cb280-23"><a href="#cb280-23" aria-hidden="true"></a>__attribute__ ((aligned(<span class="dv">32</span>))) <span class="dt">static</span> <span class="dt">unsigned</span> <span class="dt">char</span> k1[<span class="dv">32</span>*<span class="dv">3</span>]={</span>
<span id="cb280-24"><a href="#cb280-24" aria-hidden="true"></a>        <span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,<span class="bn">0x0f</span>,</span>
<span id="cb280-25"><a href="#cb280-25" aria-hidden="true"></a>        <span class="bn">0x00</span>,<span class="bn">0x08</span>,<span class="bn">0x04</span>,<span class="bn">0x0c</span>,<span class="bn">0x02</span>,<span class="bn">0x0a</span>,<span class="bn">0x06</span>,<span class="bn">0x0e</span>,<span class="bn">0x01</span>,<span class="bn">0x09</span>,<span class="bn">0x05</span>,<span class="bn">0x0d</span>,<span class="bn">0x03</span>,<span class="bn">0x0b</span>,<span class="bn">0x07</span>,<span class="bn">0x0f</span>,<span class="bn">0x00</span>,<span class="bn">0x08</span>,<span class="bn">0x04</span>,<span class="bn">0x0c</span>,<span class="bn">0x02</span>,<span class="bn">0x0a</span>,<span class="bn">0x06</span>,<span class="bn">0x0e</span>,<span class="bn">0x01</span>,<span class="bn">0x09</span>,<span class="bn">0x05</span>,<span class="bn">0x0d</span>,<span class="bn">0x03</span>,<span class="bn">0x0b</span>,<span class="bn">0x07</span>,<span class="bn">0x0f</span>,</span>
<span id="cb280-26"><a href="#cb280-26" aria-hidden="true"></a>        <span class="bn">0x00</span>,<span class="bn">0x80</span>,<span class="bn">0x40</span>,<span class="bn">0xc0</span>,<span class="bn">0x20</span>,<span class="bn">0xa0</span>,<span class="bn">0x60</span>,<span class="bn">0xe0</span>,<span class="bn">0x10</span>,<span class="bn">0x90</span>,<span class="bn">0x50</span>,<span class="bn">0xd0</span>,<span class="bn">0x30</span>,<span class="bn">0xb0</span>,<span class="bn">0x70</span>,<span class="bn">0xf0</span>,<span class="bn">0x00</span>,<span class="bn">0x80</span>,<span class="bn">0x40</span>,<span class="bn">0xc0</span>,<span class="bn">0x20</span>,<span class="bn">0xa0</span>,<span class="bn">0x60</span>,<span class="bn">0xe0</span>,<span class="bn">0x10</span>,<span class="bn">0x90</span>,<span class="bn">0x50</span>,<span class="bn">0xd0</span>,<span class="bn">0x30</span>,<span class="bn">0xb0</span>,<span class="bn">0x70</span>,<span class="bn">0xf0</span></span>
<span id="cb280-27"><a href="#cb280-27" aria-hidden="true"></a>};</span>
<span id="cb280-28"><a href="#cb280-28" aria-hidden="true"></a></span>
<span id="cb280-29"><a href="#cb280-29" aria-hidden="true"></a><span class="co">// The data to be bitflipped (+32 to avoid the quantization out of memory problem)</span></span>
<span id="cb280-30"><a href="#cb280-30" aria-hidden="true"></a>__attribute__ ((aligned(<span class="dv">32</span>))) <span class="dt">static</span> <span class="dt">unsigned</span> <span class="dt">char</span> data[NUM_DATA_BYTES+<span class="dv">32</span>]={};</span>
<span id="cb280-31"><a href="#cb280-31" aria-hidden="true"></a></span>
<span id="cb280-32"><a href="#cb280-32" aria-hidden="true"></a><span class="kw">extern</span> <span class="st">&quot;C&quot;</span> {</span>
<span id="cb280-33"><a href="#cb280-33" aria-hidden="true"></a><span class="dt">void</span> bitflipbyte(<span class="dt">unsigned</span> <span class="dt">char</span>[],<span class="dt">unsigned</span> <span class="dt">int</span>,<span class="dt">unsigned</span> <span class="dt">char</span>[]);</span>
<span id="cb280-34"><a href="#cb280-34" aria-hidden="true"></a>}</span>
<span id="cb280-35"><a href="#cb280-35" aria-hidden="true"></a></span>
<span id="cb280-36"><a href="#cb280-36" aria-hidden="true"></a><span class="dt">int</span> main()</span>
<span id="cb280-37"><a href="#cb280-37" aria-hidden="true"></a>{</span>
<span id="cb280-38"><a href="#cb280-38" aria-hidden="true"></a></span>
<span id="cb280-39"><a href="#cb280-39" aria-hidden="true"></a>    <span class="cf">for</span>(<span class="dt">unsigned</span> <span class="dt">int</span> i = <span class="dv">0</span>; i &lt; NUM_DATA_BYTES; i++)</span>
<span id="cb280-40"><a href="#cb280-40" aria-hidden="true"></a>    {</span>
<span id="cb280-41"><a href="#cb280-41" aria-hidden="true"></a>        data[i] = rand();</span>
<span id="cb280-42"><a href="#cb280-42" aria-hidden="true"></a>    }</span>
<span id="cb280-43"><a href="#cb280-43" aria-hidden="true"></a></span>
<span id="cb280-44"><a href="#cb280-44" aria-hidden="true"></a>    printf (<span class="st">&quot;</span><span class="sc">\r\n</span><span class="st">Data in(start):</span><span class="sc">\r\n</span><span class="st">&quot;</span>);</span>
<span id="cb280-45"><a href="#cb280-45" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">unsigned</span> <span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">4</span>; j++)</span>
<span id="cb280-46"><a href="#cb280-46" aria-hidden="true"></a>    {</span>
<span id="cb280-47"><a href="#cb280-47" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">unsigned</span> <span class="dt">int</span> i = <span class="dv">0</span>; i &lt; DISPLAY_WIDTH; i++)</span>
<span id="cb280-48"><a href="#cb280-48" aria-hidden="true"></a>        {</span>
<span id="cb280-49"><a href="#cb280-49" aria-hidden="true"></a>            printf (<span class="st">&quot;0x%02x,&quot;</span>,data[i+(j*DISPLAY_WIDTH)]);</span>
<span id="cb280-50"><a href="#cb280-50" aria-hidden="true"></a>        }</span>
<span id="cb280-51"><a href="#cb280-51" aria-hidden="true"></a>        printf (<span class="st">&quot;</span><span class="sc">\r\n</span><span class="st">&quot;</span>);</span>
<span id="cb280-52"><a href="#cb280-52" aria-hidden="true"></a>    }</span>
<span id="cb280-53"><a href="#cb280-53" aria-hidden="true"></a></span>
<span id="cb280-54"><a href="#cb280-54" aria-hidden="true"></a>    printf (<span class="st">&quot;</span><span class="sc">\r\n</span><span class="st">Number of 32-byte chunks to convert: %d</span><span class="sc">\r\n</span><span class="st">&quot;</span>,(<span class="dt">unsigned</span> <span class="dt">int</span>)ceil(NUM_DATA_BYTES/<span class="fl">32.0</span>));</span>
<span id="cb280-55"><a href="#cb280-55" aria-hidden="true"></a></span>
<span id="cb280-56"><a href="#cb280-56" aria-hidden="true"></a>    <span class="dt">double</span> start_time = omp_get_wtime();</span>
<span id="cb280-57"><a href="#cb280-57" aria-hidden="true"></a>    bitflipbyte(data,(<span class="dt">unsigned</span> <span class="dt">int</span>)ceil(NUM_DATA_BYTES/<span class="fl">32.0</span>),k1);</span>
<span id="cb280-58"><a href="#cb280-58" aria-hidden="true"></a>    <span class="dt">double</span> end_time = omp_get_wtime();</span>
<span id="cb280-59"><a href="#cb280-59" aria-hidden="true"></a></span>
<span id="cb280-60"><a href="#cb280-60" aria-hidden="true"></a>    printf (<span class="st">&quot;</span><span class="sc">\r\n</span><span class="st">Data out:</span><span class="sc">\r\n</span><span class="st">&quot;</span>);</span>
<span id="cb280-61"><a href="#cb280-61" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">unsigned</span> <span class="dt">int</span> j = <span class="dv">0</span>; j &lt; <span class="dv">4</span>; j++)</span>
<span id="cb280-62"><a href="#cb280-62" aria-hidden="true"></a>    {</span>
<span id="cb280-63"><a href="#cb280-63" aria-hidden="true"></a>        <span class="cf">for</span> (<span class="dt">unsigned</span> <span class="dt">int</span> i = <span class="dv">0</span>; i &lt; DISPLAY_WIDTH; i++)</span>
<span id="cb280-64"><a href="#cb280-64" aria-hidden="true"></a>        {</span>
<span id="cb280-65"><a href="#cb280-65" aria-hidden="true"></a>            printf (<span class="st">&quot;0x%02x,&quot;</span>,data[i+(j*DISPLAY_WIDTH)]);</span>
<span id="cb280-66"><a href="#cb280-66" aria-hidden="true"></a>        }</span>
<span id="cb280-67"><a href="#cb280-67" aria-hidden="true"></a>        printf (<span class="st">&quot;</span><span class="sc">\r\n</span><span class="st">&quot;</span>);</span>
<span id="cb280-68"><a href="#cb280-68" aria-hidden="true"></a>    }</span>
<span id="cb280-69"><a href="#cb280-69" aria-hidden="true"></a>    printf(<span class="st">&quot;</span><span class="sc">\r\n\r\n</span><span class="st">Time to bitflip %d bytes: %f seconds</span><span class="sc">\r\n\r\n</span><span class="st">&quot;</span>,NUM_DATA_BYTES, end_time-start_time);</span>
<span id="cb280-70"><a href="#cb280-70" aria-hidden="true"></a></span>
<span id="cb280-71"><a href="#cb280-71" aria-hidden="true"></a>    <span class="co">// return with no errors</span></span>
<span id="cb280-72"><a href="#cb280-72" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb280-73"><a href="#cb280-73" aria-hidden="true"></a>}</span></code></pre></div>
<p>The printf’s are for debugging..</p>
<p>Here is the workhorse:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true"></a>bits <span class="dv">64</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true"></a>global bitflipbyte</span>
<span id="cb281-3"><a href="#cb281-3" aria-hidden="true"></a></span>
<span id="cb281-4"><a href="#cb281-4" aria-hidden="true"></a>bitflipbyte:    </span>
<span id="cb281-5"><a href="#cb281-5" aria-hidden="true"></a>        vmovdqa     ymm2, [rdx]</span>
<span id="cb281-6"><a href="#cb281-6" aria-hidden="true"></a>        add         rdx, <span class="dv">20</span><span class="er">h</span></span>
<span id="cb281-7"><a href="#cb281-7" aria-hidden="true"></a>        vmovdqa     ymm3, [rdx]</span>
<span id="cb281-8"><a href="#cb281-8" aria-hidden="true"></a>        add         rdx, <span class="dv">20</span><span class="er">h</span></span>
<span id="cb281-9"><a href="#cb281-9" aria-hidden="true"></a>        vmovdqa     ymm4, [rdx]</span>
<span id="cb281-10"><a href="#cb281-10" aria-hidden="true"></a>bitflipp_loop:</span>
<span id="cb281-11"><a href="#cb281-11" aria-hidden="true"></a>        vmovdqa     ymm0, [rdi] </span>
<span id="cb281-12"><a href="#cb281-12" aria-hidden="true"></a>        vpand       ymm1, ymm2, ymm0 </span>
<span id="cb281-13"><a href="#cb281-13" aria-hidden="true"></a>        vpandn      ymm0, ymm2, ymm0 </span>
<span id="cb281-14"><a href="#cb281-14" aria-hidden="true"></a>        vpsrld      ymm0, ymm0, <span class="dv">4</span><span class="er">h</span> </span>
<span id="cb281-15"><a href="#cb281-15" aria-hidden="true"></a>        vpshufb     ymm1, ymm4, ymm1 </span>
<span id="cb281-16"><a href="#cb281-16" aria-hidden="true"></a>        vpshufb     ymm0, ymm3, ymm0         </span>
<span id="cb281-17"><a href="#cb281-17" aria-hidden="true"></a>        vpor        ymm0, ymm0, ymm1</span>
<span id="cb281-18"><a href="#cb281-18" aria-hidden="true"></a>        vmovdqa     [rdi], ymm0</span>
<span id="cb281-19"><a href="#cb281-19" aria-hidden="true"></a>        add     rdi, <span class="dv">20</span><span class="er">h</span></span>
<span id="cb281-20"><a href="#cb281-20" aria-hidden="true"></a>        dec     rsi</span>
<span id="cb281-21"><a href="#cb281-21" aria-hidden="true"></a>        jnz     bitflipp_loop</span>
<span id="cb281-22"><a href="#cb281-22" aria-hidden="true"></a>        ret</span></code></pre></div>
<p>The code takes 32 bytes then masks out the nibbles. The high nibble gets shifted right by 4. Then I use vpshufb and ymm4 / ymm3 as lookup tables. I could use a single lookup table but then I would have to shift left before ORing the nibbles together again.</p>
<p>There are even faster ways of flipping the bits. But I’m bound to single thread and CPU so this was the fastest I could achieve. Can you make a faster version?</p>
<p>Please make no comments about using the Intel C/C++ Compiler Intrinsic Equivalent commands…</p>
</section>
<section id="answer-3-score-14" class="level4">
<h4>Answer 3 (score 14)</h4>
<p>This is another solution for folks who love recursion.</p>
<p>
The idea is simple. Divide up input by half and swap the two halves, continue until it reaches single bit.
</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true"></a>Illustrated in the example below.</span>
<span id="cb282-2"><a href="#cb282-2" aria-hidden="true"></a></span>
<span id="cb282-3"><a href="#cb282-3" aria-hidden="true"></a>Ex : If Input is <span class="bn">00101010</span>   ==&gt; Expected output is <span class="bn">01010100</span></span>
<span id="cb282-4"><a href="#cb282-4" aria-hidden="true"></a></span>
<span id="cb282-5"><a href="#cb282-5" aria-hidden="true"></a><span class="fl">1.</span> Divide the input into <span class="dv">2</span> halves </span>
<span id="cb282-6"><a href="#cb282-6" aria-hidden="true"></a>    <span class="bn">0010</span> --- <span class="dv">1010</span></span>
<span id="cb282-7"><a href="#cb282-7" aria-hidden="true"></a></span>
<span id="cb282-8"><a href="#cb282-8" aria-hidden="true"></a><span class="fl">2.</span> Swap the <span class="dv">2</span> Halves</span>
<span id="cb282-9"><a href="#cb282-9" aria-hidden="true"></a>    <span class="dv">1010</span>     <span class="bn">0010</span></span>
<span id="cb282-10"><a href="#cb282-10" aria-hidden="true"></a></span>
<span id="cb282-11"><a href="#cb282-11" aria-hidden="true"></a><span class="fl">3.</span> Repeat the same <span class="cf">for</span> each half.</span>
<span id="cb282-12"><a href="#cb282-12" aria-hidden="true"></a>    <span class="dv">10</span> -- <span class="dv">10</span> ---  <span class="bn">00</span> -- <span class="dv">10</span></span>
<span id="cb282-13"><a href="#cb282-13" aria-hidden="true"></a>    <span class="dv">10</span>    <span class="dv">10</span>      <span class="dv">10</span>    <span class="bn">00</span></span>
<span id="cb282-14"><a href="#cb282-14" aria-hidden="true"></a></span>
<span id="cb282-15"><a href="#cb282-15" aria-hidden="true"></a>    <span class="dv">1</span>-<span class="dv">0</span> -- <span class="dv">1</span>-<span class="dv">0</span> --- <span class="dv">1</span>-<span class="dv">0</span> -- <span class="dv">0</span>-<span class="dv">0</span></span>
<span id="cb282-16"><a href="#cb282-16" aria-hidden="true"></a>    <span class="dv">0</span> <span class="dv">1</span>    <span class="dv">0</span> <span class="dv">1</span>     <span class="dv">0</span> <span class="dv">1</span>    <span class="dv">0</span> <span class="dv">0</span></span>
<span id="cb282-17"><a href="#cb282-17" aria-hidden="true"></a></span>
<span id="cb282-18"><a href="#cb282-18" aria-hidden="true"></a>Done! Output is <span class="bn">01010100</span></span></code></pre></div>
<p>Here is a recursive function to solve it. (Note I have used unsigned ints, so it can work for inputs up to sizeof(unsigned int)*8 bits.</p>
<blockquote>
<p>
The recursive function takes 2 parameters - The value whose bits need to be reversed and the number of bits in the value.
</p>
</blockquote>
<div class="sourceCode" id="cb283"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true"></a><span class="dt">int</span> reverse_bits_recursive(<span class="dt">unsigned</span> <span class="dt">int</span> num, <span class="dt">unsigned</span> <span class="dt">int</span> numBits)</span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true"></a>{</span>
<span id="cb283-3"><a href="#cb283-3" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> reversedNum;;</span>
<span id="cb283-4"><a href="#cb283-4" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> mask = <span class="dv">0</span>;</span>
<span id="cb283-5"><a href="#cb283-5" aria-hidden="true"></a></span>
<span id="cb283-6"><a href="#cb283-6" aria-hidden="true"></a>    mask = (<span class="bn">0x1</span> &lt;&lt; (numBits/<span class="dv">2</span>)) - <span class="dv">1</span>;</span>
<span id="cb283-7"><a href="#cb283-7" aria-hidden="true"></a></span>
<span id="cb283-8"><a href="#cb283-8" aria-hidden="true"></a>    <span class="cf">if</span> (numBits == <span class="dv">1</span>) <span class="cf">return</span> num;</span>
<span id="cb283-9"><a href="#cb283-9" aria-hidden="true"></a>    reversedNum = reverse_bits_recursive(num &gt;&gt; numBits/<span class="dv">2</span>, numBits/<span class="dv">2</span>) |</span>
<span id="cb283-10"><a href="#cb283-10" aria-hidden="true"></a>                   reverse_bits_recursive((num &amp; mask), numBits/<span class="dv">2</span>) &lt;&lt; numBits/<span class="dv">2</span>;</span>
<span id="cb283-11"><a href="#cb283-11" aria-hidden="true"></a>    <span class="cf">return</span> reversedNum;</span>
<span id="cb283-12"><a href="#cb283-12" aria-hidden="true"></a>}</span>
<span id="cb283-13"><a href="#cb283-13" aria-hidden="true"></a></span>
<span id="cb283-14"><a href="#cb283-14" aria-hidden="true"></a><span class="dt">int</span> main()</span>
<span id="cb283-15"><a href="#cb283-15" aria-hidden="true"></a>{</span>
<span id="cb283-16"><a href="#cb283-16" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> reversedNum;</span>
<span id="cb283-17"><a href="#cb283-17" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> num;</span>
<span id="cb283-18"><a href="#cb283-18" aria-hidden="true"></a></span>
<span id="cb283-19"><a href="#cb283-19" aria-hidden="true"></a>    num = <span class="bn">0x55</span>;</span>
<span id="cb283-20"><a href="#cb283-20" aria-hidden="true"></a>    reversedNum = reverse_bits_recursive(num, <span class="dv">8</span>);</span>
<span id="cb283-21"><a href="#cb283-21" aria-hidden="true"></a>    printf (<span class="st">&quot;Bit Reversal Input = 0x%x Output = 0x%x</span><span class="sc">\n</span><span class="st">&quot;</span>, num, reversedNum);</span>
<span id="cb283-22"><a href="#cb283-22" aria-hidden="true"></a></span>
<span id="cb283-23"><a href="#cb283-23" aria-hidden="true"></a>    num = <span class="bn">0xabcd</span>;</span>
<span id="cb283-24"><a href="#cb283-24" aria-hidden="true"></a>    reversedNum = reverse_bits_recursive(num, <span class="dv">16</span>);</span>
<span id="cb283-25"><a href="#cb283-25" aria-hidden="true"></a>    printf (<span class="st">&quot;Bit Reversal Input = 0x%x Output = 0x%x</span><span class="sc">\n</span><span class="st">&quot;</span>, num, reversedNum);</span>
<span id="cb283-26"><a href="#cb283-26" aria-hidden="true"></a></span>
<span id="cb283-27"><a href="#cb283-27" aria-hidden="true"></a>    num = <span class="bn">0x123456</span>;</span>
<span id="cb283-28"><a href="#cb283-28" aria-hidden="true"></a>    reversedNum = reverse_bits_recursive(num, <span class="dv">24</span>);</span>
<span id="cb283-29"><a href="#cb283-29" aria-hidden="true"></a>    printf (<span class="st">&quot;Bit Reversal Input = 0x%x Output = 0x%x</span><span class="sc">\n</span><span class="st">&quot;</span>, num, reversedNum);</span>
<span id="cb283-30"><a href="#cb283-30" aria-hidden="true"></a></span>
<span id="cb283-31"><a href="#cb283-31" aria-hidden="true"></a>    num = <span class="bn">0x11223344</span>;</span>
<span id="cb283-32"><a href="#cb283-32" aria-hidden="true"></a>    reversedNum = reverse_bits_recursive(num,<span class="dv">32</span>);</span>
<span id="cb283-33"><a href="#cb283-33" aria-hidden="true"></a>    printf (<span class="st">&quot;Bit Reversal Input = 0x%x Output = 0x%x</span><span class="sc">\n</span><span class="st">&quot;</span>, num, reversedNum);</span>
<span id="cb283-34"><a href="#cb283-34" aria-hidden="true"></a>}</span></code></pre></div>
<p>This is the output:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true"></a>Bit Reversal Input = <span class="bn">0x55</span> Output = <span class="bn">0xaa</span></span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true"></a>Bit Reversal Input = <span class="bn">0xabcd</span> Output = <span class="bn">0xb3d5</span></span>
<span id="cb284-3"><a href="#cb284-3" aria-hidden="true"></a>Bit Reversal Input = <span class="bn">0x123456</span> Output = <span class="bn">0x651690</span></span>
<span id="cb284-4"><a href="#cb284-4" aria-hidden="true"></a>Bit Reversal Input = <span class="bn">0x11223344</span> Output = <span class="bn">0x22cc4488</span></span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-might-i-find-the-largest-number-contained-in-a-javascript-array-score-220533-in-2009" class="level3">
<h3>45: How might I find the largest number contained in a JavaScript array? (score <a href="https://stackoverflow.com/q/1379553.html">220533</a> in 2009)</h3>
<section id="question-44" class="level4">
<h4>Question</h4>
<p>I have a simple JavaScript Array object containing a few numbers.</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true"></a>[<span class="dv">267</span>, <span class="dv">306</span>, <span class="dv">108</span>]</span></code></pre></div>
<p>Is there a function that would find the largest number in this array?</p>
</section>
<section id="answer-accepted-score-306" class="level4">
<h4>Answer accepted (score 306)</h4>
<p><a href="http://ejohn.org/blog/fast-javascript-maxmin/" rel="nofollow noreferrer">Resig to the rescue:</a></p>
<div class="sourceCode" id="cb286"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true"></a>Array.max = function( array ){</span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true"></a>    <span class="cf">return</span> Math.max.apply( Math, array );</span>
<span id="cb286-3"><a href="#cb286-3" aria-hidden="true"></a>};</span></code></pre></div>
<p><strong>Warning</strong>: since <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply
#Using_apply_and_built-in_functions" rel="nofollow noreferrer">the maximum number of arguments is as low as 65535 on some VMs</a>, use a for loop if you’re not certain the array is that small.</p>
</section>
<section id="answer-2-score-193-1" class="level4">
<h4>Answer 2 (score 193)</h4>
<p>You can use the apply function, to call <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Math/max" rel="noreferrer">Math.max</a>:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true"></a>var array = [<span class="dv">267</span>, <span class="dv">306</span>, <span class="dv">108</span>];</span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true"></a>var largest = Math.max.apply(Math, array); <span class="co">// 306</span></span></code></pre></div>
<p>How it works?</p>
<p>The <a href="https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Function/apply" rel="noreferrer">apply</a> function is used to call another function, with a given context and arguments, provided as an array. The min and max functions can take an arbitrary number of input arguments: Math.max(val1, val2, …, valN)</p>
<p>So if we call:</p>
<div class="sourceCode" id="cb288"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true"></a>Math.min.apply(Math, [<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>]);</span></code></pre></div>
<p>The apply function will execute:</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true"></a>Math.min(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>);</span></code></pre></div>
<p>Note that the first parameter, the context, is not important for these functions since they are static, they will work regardless of what is passed as the context.</p>
</section>
<section id="answer-3-score-51" class="level4">
<h4>Answer 3 (score 51)</h4>
<p>The easiest syntax, with the new <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator">spread operator</a>:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true"></a>var arr = [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>];</span>
<span id="cb290-2"><a href="#cb290-2" aria-hidden="true"></a>var max = Math.max(...arr);</span></code></pre></div>
<p>Source : <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/max">Mozilla MDN</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-calculate-binary-search-complexity-score-220524-in-2016" class="level3">
<h3>46: how to calculate binary search complexity (score <a href="https://stackoverflow.com/q/8185079.html">220524</a> in 2016)</h3>
<section id="question-45" class="level4">
<h4>Question</h4>
<p>I heard somebody say that since binary search halves the input required to search hence it is log(n) algorithm. Since I am not from a mathematics background I am not able to relate to it. Can somebody explain it in a little more detail? does it have to do something with the logarithmic series?</p>
</section>
<section id="answer-accepted-score-362" class="level4">
<h4>Answer accepted (score 362)</h4>
<p>Here a more mathematical way of seeing it, though not really complicated. IMO much clearer as informal ones:</p>
<p>The question is, how many times can you divide N by 2 until you have 1? This is essentially saying, do a binary search (half the elements) until you found it. In a formula this would be this:</p>
<blockquote>
1 = N / 2<sup>x</sup>
</blockquote>
<p>multiply by 2<sup>x</sup>:</p>
<blockquote>
2<sup>x</sup> = N
</blockquote>
<p>now do the log<sub>2</sub>:</p>
<blockquote>
<p>
log<sub>2</sub>(2<sup>x</sup>)    = log<sub>2</sub> N<br /> x * log<sub>2</sub>(2) = log<sub>2</sub> N<br /> x * 1         = log<sub>2</sub> N
</p>
</blockquote>
<p>this means you can divide log N times until you have everything divided. Which means you have to divide log N (“do the binary search step”) until you found your element.</p>
</section>
<section id="answer-2-score-19" class="level4">
<h4>Answer 2 (score 19)</h4>
<p>
For Binary Search, T(N) = T(N/2) + O(1) // the recurrence relation
</p>
<p>
Apply Masters Theorem for computing Run time complexity of recurrence relations : T(N) = aT(N/b) + f(N)
</p>
<p>
Here, a = 1, b = 2 =&gt; log (a base b) = 1
</p>
<p>also, here f(N) = n^c log^k(n) //k = 0 &amp; c = log (a base b)</p>
<p>So, T(N) = O(N^c log^(k+1)N) = O(log(N))</p>
<p>Source : <a href="http://en.wikipedia.org/wiki/Master_theorem">http://en.wikipedia.org/wiki/Master_theorem</a></p>
</section>
<section id="answer-3-score-15-1" class="level4">
<h4>Answer 3 (score 15)</h4>
<p>T(n)=T(n/2)+1</p>
<p>T(n/2)= T(n/4)+1+1</p>
<p>
Put the value of The(n/2) in above so T(n)=T(n/4)+1+1 . . . . T(n/2^k)+1+1+1…..+1
</p>
<p>=T(2<sup>k/2</sup>k)+1+1….+1 up to k</p>
<p>=T(1)+k</p>
<p>As we taken 2^k=n</p>
<p>K = log n</p>
<p>So Time complexity is O(log n)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="difference-between-big-o-and-little-o-notation-score-219336-in-2017" class="level3">
<h3>47: Difference between Big-O and Little-O Notation (score <a href="https://stackoverflow.com/q/1364444.html">219336</a> in 2017)</h3>
<section id="question-46" class="level4">
<h4>Question</h4>
<p>What is the difference between <strong>Big-O</strong> notation <code>O(n)</code> and <strong>Little-O</strong> notation <code>o(n)</code>?</p>
</section>
<section id="answer-accepted-score-408" class="level4">
<h4>Answer accepted (score 408)</h4>
<p>f ∈ O(g) says, essentially</p>
<blockquote>
For <strong>at least one</strong> choice of a constant <em>k</em> &gt; 0, you can find a constant <em>a</em> such that the inequality 0 &lt;= f(x) &lt;= k g(x) holds for all x &gt; a.
</blockquote>
<p>Note that O(g) is the set of all functions for which this condition holds.</p>
<p>f ∈ o(g) says, essentially</p>
<blockquote>
For <strong>every</strong> choice of a constant <em>k</em> &gt; 0, you can find a constant <em>a</em> such that the inequality 0 &lt;= f(x) &lt; k g(x) holds for all x &gt; a.
</blockquote>
<p>Once again, note that o(g) is a set.</p>
<p>In Big-O, it is only necessary that you find a particular multiplier <em>k</em> for which the inequality holds beyond some minimum <em>x</em>.</p>
<p>In Little-o, it must be that there is a minimum <em>x</em> after which the inequality holds no matter how small you make <em>k</em>, as long as it is not negative or zero.</p>
<p>These both describe upper bounds, although somewhat counter-intuitively, Little-o is the stronger statement. There is a much larger gap between the growth rates of f and g if f ∈ o(g) than if f ∈ O(g).</p>
<p>One illustration of the disparity is this: f ∈ O(f) is true, but f ∈ o(f) is false. Therefore, Big-O can be read as “f ∈ O(g) means that f’s asymptotic growth is no faster than g’s”, whereas “f ∈ o(g) means that f’s asymptotic growth is strictly slower than g’s”. It’s like <code>&amp;lt;=</code> versus <code>&amp;lt;</code>.</p>
<p>More specifically, if the value of g(x) is a constant multiple of the value of f(x), then f ∈ O(g) is true. This is why you can drop constants when working with big-O notation.</p>
<p>However, for f ∈ o(g) to be true, then g must include a higher <em>power</em> of x in its formula, and so the relative separation between f(x) and g(x) must actually get larger as x gets larger.</p>
<p>To use purely math examples (rather than referring to algorithms):</p>
<p>The following are true for Big-O, but would not be true if you used little-o:</p>
<ul>
<li>
x² ∈ O(x²)
</li>
<li>
x² ∈ O(x² + x)
</li>
<li>
x² ∈ O(200 * x²)
</li>
</ul>
<p>The following are true for little-o:</p>
<ul>
<li>
x² ∈ o(x³)
</li>
<li>
x² ∈ o(x!)
</li>
<li>
ln(x) ∈ o(x)
</li>
</ul>
<p>Note that if f ∈ o(g), this implies f ∈ O(g). e.g. x² ∈ o(x³) so it is also true that x² ∈ O(x³), (again, think of O as <code>&amp;lt;=</code> and o as <code>&amp;lt;</code>)</p>
</section>
<section id="answer-2-score-182" class="level4">
<h4>Answer 2 (score 182)</h4>
<p>Big-O is to little-o as <code>≤</code> is to <code>&amp;lt;</code>. Big-O is an inclusive upper bound, while little-o is a strict upper bound.</p>
<p>For example, the function <code>f(n) = 3n</code> is:</p>
<ul>
<li>
in <code>O(n²)</code>, <code>o(n²)</code>, and <code>O(n)</code>
</li>
<li>
not in <code>O(lg n)</code>, <code>o(lg n)</code>, or <code>o(n)</code>
</li>
</ul>
<p>Analogously, the number <code>1</code> is:</p>
<ul>
<li>
<code>≤ 2</code>, <code>&amp;lt; 2</code>, and <code>≤ 1</code>
</li>
<li>
not <code>≤ 0</code>, <code>&amp;lt; 0</code>, or <code>&amp;lt; 1</code>
</li>
</ul>
<p>Here’s a table, showing the general idea:</p>
<p><img src="https://i.stack.imgur.com/SZ7jy.png" alt="Big o table"></p>
<p>(Note: the table is a good guide but its limit definition should be in terms of the <a href="http://en.wikipedia.org/wiki/Limit_superior_and_limit_inferior" rel="noreferrer">superior limit</a> instead of the normal limit. For example, <code>3 + (n mod 2)</code> oscillates between 3 and 4 forever. It’s in <code>O(1)</code> despite not having a normal limit, because it still has a <code>lim sup</code>: 4.)</p>
<p>I recommend memorizing how the Big-O notation converts to asymptotic comparisons. The comparisons are easier to remember, but less flexible because you can’t say things like n<sup>O(1)</sup> = P.</p>
</section>
<section id="answer-3-score-40" class="level4">
<h4>Answer 3 (score 40)</h4>
<p>I find that when I can’t conceptually grasp something, thinking about <em>why one would use X</em> is helpful to understand X. (Not to say you haven’t tried that, I’m just setting the stage.)</p>
<p>[stuff you know]A common way to classify algorithms is by runtime, and by citing the big-Oh complexity of an algorithm, you can get a pretty good estimation of which one is “better” – whichever has the “smallest” function in the O! Even in the real world, O(N) is “better” than O(N²), barring silly things like super-massive constants and the like.[/stuff you know]</p>
<p>Let’s say there’s some algorithm that runs in O(N). Pretty good, huh? But let’s say you (you brilliant person, you) come up with an algorithm that runs in O(<sup>N</sup>⁄<sub>loglogloglogN</sub>). YAY! Its faster! But you’d feel silly writing that over and over again when you’re writing your thesis. So you write it once, and you can say “In this paper, I have proven that algorithm X, previously computable in time O(N), is in fact computable in o(n).”</p>
<p>Thus, everyone knows that your algorithm is faster — by how much is unclear, but they know its faster. Theoretically. :)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-difference-between-a-generative-and-a-discriminative-algorithm-score-216847-in-2018" class="level3">
<h3>48: What is the difference between a generative and a discriminative algorithm? (score <a href="https://stackoverflow.com/q/879432.html">216847</a> in 2018)</h3>
<section id="question-47" class="level4">
<h4>Question</h4>
<p>
Please, help me understand the difference between a <strong>generative</strong> and a <strong>discriminative</strong> algorithm, keeping in mind that I am just a beginner.
</p>
</section>
<section id="answer-accepted-score-798" class="level4">
<h4>Answer accepted (score 798)</h4>
<p>Let’s say you have input data <code>x</code> and you want to classify the data into labels <code>y</code>. A generative model learns the <strong>joint</strong> probability distribution <code>p(x,y)</code> and a discriminative model learns the <strong>conditional</strong> probability distribution <code>p(y|x)</code> - which you should read as <em>“the probability of <code>y</code> given <code>x</code>”</em>.</p>
<p>Here’s a really simple example. Suppose you have the following data in the form <code>(x,y)</code>:</p>
<p><code>(1,0), (1,0), (2,0), (2, 1)</code></p>
<p><code>p(x,y)</code> is</p>
<div class="sourceCode" id="cb291"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true"></a>      y=<span class="dv">0</span>   y=<span class="dv">1</span></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true"></a>     -----------</span>
<span id="cb291-3"><a href="#cb291-3" aria-hidden="true"></a>x=<span class="dv">1</span> | <span class="dv">1</span>/<span class="dv">2</span>   <span class="dv">0</span></span>
<span id="cb291-4"><a href="#cb291-4" aria-hidden="true"></a>x=<span class="dv">2</span> | <span class="dv">1</span>/<span class="dv">4</span>   <span class="dv">1</span>/<span class="dv">4</span></span></code></pre></div>
<p><code>p(y|x)</code> is</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true"></a>      y=<span class="dv">0</span>   y=<span class="dv">1</span></span>
<span id="cb292-2"><a href="#cb292-2" aria-hidden="true"></a>     -----------</span>
<span id="cb292-3"><a href="#cb292-3" aria-hidden="true"></a>x=<span class="dv">1</span> | <span class="dv">1</span>     <span class="dv">0</span></span>
<span id="cb292-4"><a href="#cb292-4" aria-hidden="true"></a>x=<span class="dv">2</span> | <span class="dv">1</span>/<span class="dv">2</span>   <span class="dv">1</span>/<span class="dv">2</span></span></code></pre></div>
<p>If you take a few minutes to stare at those two matrices, you will understand the difference between the two probability distributions.</p>
<p>The distribution <code>p(y|x)</code> is the natural distribution for classifying a given example <code>x</code> into a class <code>y</code>, which is why algorithms that model this directly are called discriminative algorithms. Generative algorithms model <code>p(x,y)</code>, which can be transformed into <code>p(y|x)</code> by applying Bayes rule and then used for classification. However, the distribution <code>p(x,y)</code> can also be used for other purposes. For example, you could use <code>p(x,y)</code> to <em>generate</em> likely <code>(x,y)</code> pairs.</p>
<p>From the description above, you might be thinking that generative models are more generally useful and therefore better, but it’s not as simple as that. <a href="http://papers.nips.cc/paper/2020-on-discriminative-vs-generative-classifiers-a-comparison-of-logistic-regression-and-naive-bayes.pdf" rel="noreferrer">This paper</a> is a very popular reference on the subject of discriminative vs. generative classifiers, but it’s pretty heavy going. The overall gist is that discriminative models generally outperform generative models in classification tasks.</p>
</section>
<section id="answer-2-score-287" class="level4">
<h4>Answer 2 (score 287)</h4>
<p>A <strong>generative algorithm</strong> models how the data was generated in order to categorize a signal. It asks the question: based on my generation assumptions, which category is most likely to generate this signal?</p>
<p>A <strong>discriminative algorithm</strong> does not care about how the data was generated, it simply categorizes a given signal.</p>
</section>
<section id="answer-3-score-152" class="level4">
<h4>Answer 3 (score 152)</h4>
<p>Imagine your task is to classify a speech to a language.</p>
<p>You can do it by either:</p>
<ol>
<li>
learning each language, and then classifying it using the knowledge you just gained
</li>
</ol>
<p>or</p>
<ol start="2">
<li>
determining the difference in the linguistic models without learning the languages, and then classifying the speech.
</li>
</ol>
<p>The first one is the <strong>generative</strong> approach and the second one is the <strong>discriminative</strong> approach.</p>
<p>Check this reference for more details: <a href="http://www.cedar.buffalo.edu/~srihari/CSE574/Discriminative-Generative.pdf" rel="noreferrer">http://www.cedar.buffalo.edu/~srihari/CSE574/Discriminative-Generative.pdf</a>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-find-the-kth-largest-element-in-an-unsorted-array-of-length-n-in-on-score-216472-in-2012" class="level3">
<h3>49: How to find the kth largest element in an unsorted array of length n in O(n)? (score <a href="https://stackoverflow.com/q/251781.html">216472</a> in 2012)</h3>
<section id="question-48" class="level4">
<h4>Question</h4>
<p>I believe there’s a way to find the kth largest element in an unsorted array of length n in O(n). Or perhaps it’s “expected” O(n) or something. How can we do this?</p>
</section>
<section id="answer-accepted-score-167" class="level4">
<h4>Answer accepted (score 167)</h4>
<p>This is called finding the <strong>k-th order statistic</strong>. There’s a very simple randomized algorithm (called <em>quickselect</em>) taking <code>O(n)</code> average time, <code>O(n^2)</code> worst case time, and a pretty complicated non-randomized algorithm (called <em>introselect</em>) taking <code>O(n)</code> worst case time. There’s some info on <a href="http://en.wikipedia.org/wiki/Selection_algorithm" rel="noreferrer">Wikipedia</a>, but it’s not very good.</p>
<p><strike>Everything you need is in <a href="http://web.archive.org/web/20160402214842/http://c3p0demo.googlecode.com/svn/trunk/scalaDemo/script/Order_statistics.ppt" rel="noreferrer">these powerpoint slides</a></strike>. Just to extract the basic algorithm of the <code>O(n)</code> worst-case algorithm (introselect):</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true"></a>Select(A,n,i):</span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true"></a>    Divide input into ⌈n/<span class="dv">5</span>⌉ groups of size <span class="fl">5.</span></span>
<span id="cb293-3"><a href="#cb293-3" aria-hidden="true"></a></span>
<span id="cb293-4"><a href="#cb293-4" aria-hidden="true"></a>    <span class="co">/* Partition on median-of-medians */</span></span>
<span id="cb293-5"><a href="#cb293-5" aria-hidden="true"></a>    medians = array of each group’s median.</span>
<span id="cb293-6"><a href="#cb293-6" aria-hidden="true"></a>    pivot = Select(medians, ⌈n/<span class="dv">5</span>⌉, ⌈n/<span class="dv">10</span>⌉)</span>
<span id="cb293-7"><a href="#cb293-7" aria-hidden="true"></a>    Left Array L and Right Array G = partition(A, pivot)</span>
<span id="cb293-8"><a href="#cb293-8" aria-hidden="true"></a></span>
<span id="cb293-9"><a href="#cb293-9" aria-hidden="true"></a>    <span class="co">/* Find ith element in L, pivot, or G */</span></span>
<span id="cb293-10"><a href="#cb293-10" aria-hidden="true"></a>    k = |L| + <span class="dv">1</span></span>
<span id="cb293-11"><a href="#cb293-11" aria-hidden="true"></a>    If i = k, <span class="cf">return</span> pivot</span>
<span id="cb293-12"><a href="#cb293-12" aria-hidden="true"></a>    If i &lt; k, <span class="cf">return</span> Select(L, k-<span class="dv">1</span>, i)</span>
<span id="cb293-13"><a href="#cb293-13" aria-hidden="true"></a>    If i &gt; k, <span class="cf">return</span> Select(G, n-k, i-k)</span></code></pre></div>
<p>It’s also very nicely detailed in the Introduction to Algorithms book by Cormen et al. </p>
</section>
<section id="answer-2-score-117" class="level4">
<h4>Answer 2 (score 117)</h4>
<p>If you want a true <code>O(n)</code> algorithm, as opposed to <code>O(kn)</code> or something like that, then you should use quickselect (it’s basically quicksort where you throw out the partition that you’re not interested in). My prof has a great writeup, with the runtime analysis: (<a href="http://pine.cs.yale.edu/pinewiki/QuickSelect" rel="noreferrer">reference</a>)</p>
<p>The QuickSelect algorithm quickly finds the k-th smallest element of an unsorted array of <code>n</code> elements. It is a <a href="http://pine.cs.yale.edu/pinewiki/RandomizedAlgorithm" rel="noreferrer">RandomizedAlgorithm</a>, so we compute the worst-case <em>expected</em> running time.</p>
<p>Here is the algorithm.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true"></a>QuickSelect(A, k)</span>
<span id="cb294-2"><a href="#cb294-2" aria-hidden="true"></a>  let r be chosen uniformly at random in the range <span class="dv">1</span> to length(A)</span>
<span id="cb294-3"><a href="#cb294-3" aria-hidden="true"></a>  let pivot = A[r]</span>
<span id="cb294-4"><a href="#cb294-4" aria-hidden="true"></a>  let A1, A2 be new arrays</span>
<span id="cb294-5"><a href="#cb294-5" aria-hidden="true"></a></span>
<span id="cb294-6"><a href="#cb294-6" aria-hidden="true"></a><span class="er"># split into a pile A1 of small elements and A2 of big elements</span></span>
<span id="cb294-7"><a href="#cb294-7" aria-hidden="true"></a>  <span class="cf">for</span> i = <span class="dv">1</span> to n</span>
<span id="cb294-8"><a href="#cb294-8" aria-hidden="true"></a>    <span class="cf">if</span> A[i] &lt; pivot then</span>
<span id="cb294-9"><a href="#cb294-9" aria-hidden="true"></a>      append A[i] to A1</span>
<span id="cb294-10"><a href="#cb294-10" aria-hidden="true"></a>    <span class="cf">else</span> <span class="cf">if</span> A[i] &gt; pivot then</span>
<span id="cb294-11"><a href="#cb294-11" aria-hidden="true"></a>      append A[i] to A2</span>
<span id="cb294-12"><a href="#cb294-12" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb294-13"><a href="#cb294-13" aria-hidden="true"></a></span>
<span id="cb294-14"><a href="#cb294-14" aria-hidden="true"></a><span class="er"># do nothing</span></span>
<span id="cb294-15"><a href="#cb294-15" aria-hidden="true"></a>  end <span class="cf">for</span></span>
<span id="cb294-16"><a href="#cb294-16" aria-hidden="true"></a>  <span class="cf">if</span> k &lt;= length(A1):</span>
<span id="cb294-17"><a href="#cb294-17" aria-hidden="true"></a></span>
<span id="cb294-18"><a href="#cb294-18" aria-hidden="true"></a><span class="er"># it&#39;s in the pile of small elements</span></span>
<span id="cb294-19"><a href="#cb294-19" aria-hidden="true"></a>    <span class="cf">return</span> QuickSelect(A1, k)</span>
<span id="cb294-20"><a href="#cb294-20" aria-hidden="true"></a>  <span class="cf">else</span> <span class="cf">if</span> k &gt; length(A) - length(A2)</span>
<span id="cb294-21"><a href="#cb294-21" aria-hidden="true"></a></span>
<span id="cb294-22"><a href="#cb294-22" aria-hidden="true"></a><span class="er"># it&#39;s in the pile of big elements</span></span>
<span id="cb294-23"><a href="#cb294-23" aria-hidden="true"></a>    <span class="cf">return</span> QuickSelect(A2, k - (length(A) - length(A2))</span>
<span id="cb294-24"><a href="#cb294-24" aria-hidden="true"></a>  <span class="cf">else</span></span>
<span id="cb294-25"><a href="#cb294-25" aria-hidden="true"></a></span>
<span id="cb294-26"><a href="#cb294-26" aria-hidden="true"></a><span class="er"># it&#39;s equal to the pivot</span></span>
<span id="cb294-27"><a href="#cb294-27" aria-hidden="true"></a>    <span class="cf">return</span> pivot</span></code></pre></div>
<p>What is the running time of this algorithm? If the adversary flips coins for us, we may find that the pivot is always the largest element and <code>k</code> is always 1, giving a running time of</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true"></a>T(n) = Theta(n) + T(n-<span class="dv">1</span>) = Theta(n&lt;sup&gt;<span class="dv">2</span>&lt;/sup&gt;)</span></code></pre></div>
<p>But if the choices are indeed random, the expected running time is given by</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true"></a>T(n) &lt;= Theta(n) + (<span class="dv">1</span>/n) ∑&lt;sub&gt;i=<span class="dv">1</span> to n&lt;/sub&gt;T(max(i, n-i-<span class="dv">1</span>))</span></code></pre></div>
<p>where we are making the not entirely reasonable assumption that the recursion always lands in the larger of <code>A1</code> or <code>A2</code>.</p>
<p>Let’s guess that <code>T(n) &amp;lt;= an</code> for some <code>a</code>. Then we get</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true"></a>T(n) </span>
<span id="cb297-2"><a href="#cb297-2" aria-hidden="true"></a> &lt;= cn + (<span class="dv">1</span>/n) ∑&lt;sub&gt;i=<span class="dv">1</span> to n&lt;/sub&gt;T(max(i-<span class="dv">1</span>, n-i))</span>
<span id="cb297-3"><a href="#cb297-3" aria-hidden="true"></a> = cn + (<span class="dv">1</span>/n) ∑&lt;sub&gt;i=<span class="dv">1</span> to floor(n/<span class="dv">2</span>)&lt;/sub&gt; T(n-i) + (<span class="dv">1</span>/n) ∑&lt;sub&gt;i=floor(n/<span class="dv">2</span>)+<span class="dv">1</span> to n&lt;/sub&gt; T(i)</span>
<span id="cb297-4"><a href="#cb297-4" aria-hidden="true"></a> &lt;= cn + <span class="dv">2</span> (<span class="dv">1</span>/n) ∑&lt;sub&gt;i=floor(n/<span class="dv">2</span>) to n&lt;/sub&gt; T(i)</span>
<span id="cb297-5"><a href="#cb297-5" aria-hidden="true"></a> &lt;= cn + <span class="dv">2</span> (<span class="dv">1</span>/n) ∑&lt;sub&gt;i=floor(n/<span class="dv">2</span>) to n&lt;/sub&gt; ai</span></code></pre></div>
<p>and now somehow we have to get the horrendous sum on the right of the plus sign to absorb the <code>cn</code> on the left. If we just bound it as <code>2(1/n) ∑&lt;sub&gt;i=n/2 to n&lt;/sub&gt; an</code>, we get roughly <code>2(1/n)(n/2)an = an</code>. But this is too big - there’s no room to squeeze in an extra <code>cn</code>. So let’s expand the sum using the arithmetic series formula:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true"></a>∑&lt;sub&gt;i=floor(n/<span class="dv">2</span>) to n&lt;/sub&gt; i  </span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true"></a> = ∑&lt;sub&gt;i=<span class="dv">1</span> to n&lt;/sub&gt; i - ∑&lt;sub&gt;i=<span class="dv">1</span> to floor(n/<span class="dv">2</span>)&lt;/sub&gt; i  </span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true"></a> = n(n+<span class="dv">1</span>)/<span class="dv">2</span> - floor(n/<span class="dv">2</span>)(floor(n/<span class="dv">2</span>)+<span class="dv">1</span>)/<span class="dv">2</span>  </span>
<span id="cb298-4"><a href="#cb298-4" aria-hidden="true"></a> &lt;= n&lt;sup&gt;<span class="dv">2</span>&lt;/sup&gt;/<span class="dv">2</span> - (n/<span class="dv">4</span>)&lt;sup&gt;<span class="dv">2</span>&lt;/sup&gt;/<span class="dv">2</span>  </span>
<span id="cb298-5"><a href="#cb298-5" aria-hidden="true"></a> = (<span class="dv">15</span>/<span class="dv">32</span>)n&lt;sup&gt;<span class="dv">2</span>&lt;/sup&gt;</span></code></pre></div>
<p>where we take advantage of n being “sufficiently large” to replace the ugly <code>floor(n/2)</code> factors with the much cleaner (and smaller) <code>n/4</code>. Now we can continue with</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true"></a>cn + <span class="dv">2</span> (<span class="dv">1</span>/n) ∑&lt;sub&gt;i=floor(n/<span class="dv">2</span>) to n&lt;/sub&gt; ai,</span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true"></a> &lt;= cn + (<span class="dv">2</span><span class="er">a</span>/n) (<span class="dv">15</span>/<span class="dv">32</span>) n&lt;sup&gt;<span class="dv">2</span>&lt;/sup&gt;</span>
<span id="cb299-3"><a href="#cb299-3" aria-hidden="true"></a> = n (c + (<span class="dv">15</span>/<span class="dv">16</span>)a)</span>
<span id="cb299-4"><a href="#cb299-4" aria-hidden="true"></a> &lt;= an</span></code></pre></div>
<p>provided <code>a &amp;gt; 16c</code>.</p>
<p>This gives <code>T(n) = O(n)</code>. It’s clearly <code>Omega(n)</code>, so we get <code>T(n) = Theta(n)</code>.</p>
</section>
<section id="answer-3-score-16" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>A quick Google on that (‘kth largest element array’) returned this: <a href="http://discuss.joelonsoftware.com/default.asp?interview.11.509587.17" rel="nofollow noreferrer">http://discuss.joelonsoftware.com/default.asp?interview.11.509587.17</a></p>
<div class="sourceCode" id="cb300"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true"></a><span class="st">&quot;Make one pass through tracking the three largest values so far.&quot;</span> </span></code></pre></div>
<p>(it was specifically for 3d largest)</p>
<p>and this answer:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true"></a>Build a heap/priority queue.  O(n)</span>
<span id="cb301-2"><a href="#cb301-2" aria-hidden="true"></a>Pop top element.  O(log n)</span>
<span id="cb301-3"><a href="#cb301-3" aria-hidden="true"></a>Pop top element.  O(log n)</span>
<span id="cb301-4"><a href="#cb301-4" aria-hidden="true"></a>Pop top element.  O(log n)</span>
<span id="cb301-5"><a href="#cb301-5" aria-hidden="true"></a></span>
<span id="cb301-6"><a href="#cb301-6" aria-hidden="true"></a>Total = O(n) + <span class="dv">3</span> O(log n) = O(n)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="when-is-it-practical-to-use-depth-first-search-dfs-vs-breadth-first-search-bfs-score-211438-in-2018" class="level3">
<h3>50: When is it practical to use Depth-First Search (DFS) vs Breadth-First Search (BFS)? (score <a href="https://stackoverflow.com/q/3332947.html">211438</a> in 2018)</h3>
<section id="question-49" class="level4">
<h4>Question</h4>
<p>I understand the differences between DFS and BFS, but I’m interested to know when it’s more practical to use one over the other?</p>
<p>Could anyone give any examples of how DFS would trump BFS and vice versa?</p>
</section>
<section id="answer-accepted-score-306-1" class="level4">
<h4>Answer accepted (score 306)</h4>
<p>That heavily depends on the structure of the search tree and the number and location of solutions (aka searched-for items).</p>
<ul>
<li>
If you know a solution is not far from the root of the tree, a breadth first search (BFS) might be better.
</li>
<li>
<p>
If the tree is very deep and solutions are rare, depth first search (DFS) might take an extremely long time, but BFS could be faster.
</p>
</li>
<li>
<p>
If the tree is very wide, a BFS might need too much memory, so it might be completely impractical.
</p>
</li>
<li>
<p>
If solutions are frequent but located deep in the tree, BFS could be impractical.
</p>
</li>
<li>
If the search tree is very deep you will need to restrict the search depth for depth first search (DFS), anyway (for example with iterative deepening).
</li>
</ul>
<p>But these are just rules of thumb; you’ll probably need to experiment.</p>
</section>
<section id="answer-2-score-126" class="level4">
<h4>Answer 2 (score 126)</h4>
<h5>
Depth-first Search
</h2>
<p>Depth-first searches are often used in simulations of games (and game-like situations in the real world). In a typical game you can choose one of several possible actions. Each choice leads to further choices, each of which leads to further choices, and so on into an ever-expanding tree-shaped graph of possibilities.</p>
<p><a href="https://i.stack.imgur.com/2JHHR.png" rel="noreferrer"><img src="https://i.stack.imgur.com/2JHHR.png" alt="enter image description here"></a></p>
<p>For example in games like Chess, tic-tac-toe when you are deciding what move to make, you can mentally imagine a move, then your opponent’s possible responses, then your responses, and so on. You can decide what to do by seeing which move leads to the best outcome.</p>
<p>Only some paths in a game tree lead to your win. Some lead to a win by your opponent, when you reach such an ending, you must back up, or backtrack, to a previous node and try a different path. In this way you explore the tree until you find a path with a successful conclusion. Then you make the first move along this path.</p>
<hr>
<h5>
Breadth-first search
</h2>
<p>The breadth-first search has an interesting property: It first finds all the vertices that are one edge away from the starting point, then all the vertices that are two edges away, and so on. This is useful if you’re trying to find the shortest path from the starting vertex to a given vertex. You start a BFS, and when you find the specified vertex, you know the path you’ve traced so far is the shortest path to the node. If there were a shorter path, the BFS would have found it already.</p>
<p>Breadth-first search can be used for finding the neighbour nodes in peer to peer networks like BitTorrent, GPS systems to find nearby locations, social networking sites to find people in the specified distance and things like that.</p>
</section>
<section id="answer-3-score-102" class="level4">
<h4>Answer 3 (score 102)</h4>
<p>
Nice Explanation from <a href="http://www.programmerinterview.com/index.php/data-structures/dfs-vs-bfs/">http://www.programmerinterview.com/index.php/data-structures/dfs-vs-bfs/</a>
</p>
<blockquote>
An example of BFS
</blockquote>
<p>Here’s an example of what a BFS would look like. This is something like Level Order Tree Traversal where we will use QUEUE with ITERATIVE approach (Mostly RECURSION will end up with DFS). The numbers represent the order in which the nodes are accessed in a BFS:</p>
<p><img src="https://i.stack.imgur.com/xEprB.png" alt="enter image description here"></p>
<p>In a depth first search, you start at the root, and follow one of the branches of the tree as far as possible until either the node you are looking for is found or you hit a leaf node ( a node with no children). If you hit a leaf node, then you continue the search at the nearest ancestor with unexplored children.</p>
<blockquote>
An example of DFS
</blockquote>
<p>Here’s an example of what a DFS would look like. I think post order traversal in binary tree will start work from the Leaf level first. The numbers represent the order in which the nodes are accessed in a DFS:</p>
<p><img src="https://i.stack.imgur.com/nn5uj.png" alt="enter image description here"></p>
<blockquote>
Differences between DFS and BFS
</blockquote>
<p>Comparing BFS and DFS, the big advantage of DFS is that it has much lower memory requirements than BFS, because it’s not necessary to store all of the child pointers at each level. Depending on the data and what you are looking for, either DFS or BFS could be advantageous.</p>
<p>For example, given a family tree if one were looking for someone on the tree who’s still alive, then it would be safe to assume that person would be on the bottom of the tree. This means that a BFS would take a very long time to reach that last level. A DFS, however, would find the goal faster. But, if one were looking for a family member who died a very long time ago, then that person would be closer to the top of the tree. Then, a BFS would usually be faster than a DFS. So, the advantages of either vary depending on the data and what you’re looking for.</p>
<p>One more example is Facebook; Suggestion on Friends of Friends. We need immediate friends for suggestion where we can use BFS. May be finding the shortest path or detecting the cycle (using recursion) we can use DFS.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-do-i-check-if-a-number-is-a-palindrome-score-208946-in-2014" class="level3">
<h3>51: How do I check if a number is a palindrome? (score <a href="https://stackoverflow.com/q/199184.html">208946</a> in 2014)</h3>
<section id="question-50" class="level4">
<h4>Question</h4>
<p>How do I check if a number is a palindrome?</p>
<p>Any language. Any algorithm. (except the algorithm of making the number a string and then reversing the string).</p>
</section>
<section id="answer-accepted-score-125" class="level4">
<h4>Answer accepted (score 125)</h4>
<p>This is <a href="http://projecteuler.net/index.php?section=problems&amp;id=4" rel="noreferrer">one of the Project Euler problems</a>. When I solved it in Haskell I did exactly what you suggest, convert the number to a String. It’s then trivial to check that the string is a pallindrome. If it performs well enough, then why bother making it more complex? Being a pallindrome is a lexical property rather than a mathematical one.</p>
</section>
<section id="answer-2-score-264" class="level4">
<h4>Answer 2 (score 264)</h4>
<p>For any given number:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true"></a>n = num;</span>
<span id="cb302-2"><a href="#cb302-2" aria-hidden="true"></a>rev = <span class="dv">0</span>;</span>
<span id="cb302-3"><a href="#cb302-3" aria-hidden="true"></a><span class="cf">while</span> (num &gt; <span class="dv">0</span>)</span>
<span id="cb302-4"><a href="#cb302-4" aria-hidden="true"></a>{</span>
<span id="cb302-5"><a href="#cb302-5" aria-hidden="true"></a>    dig = num % <span class="dv">10</span>;</span>
<span id="cb302-6"><a href="#cb302-6" aria-hidden="true"></a>    rev = rev * <span class="dv">10</span> + dig;</span>
<span id="cb302-7"><a href="#cb302-7" aria-hidden="true"></a>    num = num / <span class="dv">10</span>;</span>
<span id="cb302-8"><a href="#cb302-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>If <code>n == rev</code> then <code>num</code> is a palindrome:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true"></a>cout &lt;&lt; <span class="st">&quot;Number &quot;</span> &lt;&lt; (n == rev ? <span class="st">&quot;IS&quot;</span> : <span class="st">&quot;IS NOT&quot;</span>) &lt;&lt; <span class="st">&quot; a palindrome&quot;</span> &lt;&lt; endl;</span></code></pre></div>
</section>
<section id="answer-3-score-24" class="level4">
<h4>Answer 3 (score 24)</h4>
<div class="sourceCode" id="cb304"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb304-1"><a href="#cb304-1" aria-hidden="true"></a>def ReverseNumber(n, partial=<span class="dv">0</span>):</span>
<span id="cb304-2"><a href="#cb304-2" aria-hidden="true"></a>    <span class="cf">if</span> n == <span class="dv">0</span>:</span>
<span id="cb304-3"><a href="#cb304-3" aria-hidden="true"></a>        <span class="cf">return</span> partial</span>
<span id="cb304-4"><a href="#cb304-4" aria-hidden="true"></a>    <span class="cf">return</span> ReverseNumber(n <span class="co">// 10, partial * 10 + n % 10)</span></span>
<span id="cb304-5"><a href="#cb304-5" aria-hidden="true"></a></span>
<span id="cb304-6"><a href="#cb304-6" aria-hidden="true"></a>trial = <span class="dv">123454321</span></span>
<span id="cb304-7"><a href="#cb304-7" aria-hidden="true"></a><span class="cf">if</span> ReverseNumber(trial) == trial:</span>
<span id="cb304-8"><a href="#cb304-8" aria-hidden="true"></a>    print(<span class="st">&quot;It&#39;s a Palindrome!&quot;</span>)</span></code></pre></div>
<p>Works for integers only. It’s unclear from the problem statement if floating point numbers or leading zeros need to be considered.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-if-a-number-is-a-power-of-2-score-208869-in-2015" class="level3">
<h3>52: How to check if a number is a power of 2 (score <a href="https://stackoverflow.com/q/600293.html">208869</a> in 2015)</h3>
<section id="question-51" class="level4">
<h4>Question</h4>
<p>Today I needed a simple algorithm for checking if a number is a power of 2.</p>
<p>The algorithm needs to be:</p>
<ol>
<li>
Simple
</li>
<li>
Correct for any <code>ulong</code> value.
</li>
</ol>
<p>I came up with this simple algorithm:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true"></a>private <span class="dt">bool</span> IsPowerOfTwo(ulong number)</span>
<span id="cb305-2"><a href="#cb305-2" aria-hidden="true"></a>{</span>
<span id="cb305-3"><a href="#cb305-3" aria-hidden="true"></a>    <span class="cf">if</span> (number == <span class="dv">0</span>)</span>
<span id="cb305-4"><a href="#cb305-4" aria-hidden="true"></a>        <span class="cf">return</span> false;</span>
<span id="cb305-5"><a href="#cb305-5" aria-hidden="true"></a></span>
<span id="cb305-6"><a href="#cb305-6" aria-hidden="true"></a>    <span class="cf">for</span> (ulong power = <span class="dv">1</span>; power &gt; <span class="dv">0</span>; power = power &lt;&lt; <span class="dv">1</span>)</span>
<span id="cb305-7"><a href="#cb305-7" aria-hidden="true"></a>    {</span>
<span id="cb305-8"><a href="#cb305-8" aria-hidden="true"></a>        <span class="co">// This for loop used shifting for powers of 2, meaning</span></span>
<span id="cb305-9"><a href="#cb305-9" aria-hidden="true"></a>        <span class="co">// that the value will become 0 after the last shift</span></span>
<span id="cb305-10"><a href="#cb305-10" aria-hidden="true"></a>        <span class="co">// (from binary 1000...0000 to 0000...0000) then, the &#39;for&#39;</span></span>
<span id="cb305-11"><a href="#cb305-11" aria-hidden="true"></a>        <span class="co">// loop will break out.</span></span>
<span id="cb305-12"><a href="#cb305-12" aria-hidden="true"></a></span>
<span id="cb305-13"><a href="#cb305-13" aria-hidden="true"></a>        <span class="cf">if</span> (power == number)</span>
<span id="cb305-14"><a href="#cb305-14" aria-hidden="true"></a>            <span class="cf">return</span> true;</span>
<span id="cb305-15"><a href="#cb305-15" aria-hidden="true"></a>        <span class="cf">if</span> (power &gt; number)</span>
<span id="cb305-16"><a href="#cb305-16" aria-hidden="true"></a>            <span class="cf">return</span> false;</span>
<span id="cb305-17"><a href="#cb305-17" aria-hidden="true"></a>    }</span>
<span id="cb305-18"><a href="#cb305-18" aria-hidden="true"></a>    <span class="cf">return</span> false;</span>
<span id="cb305-19"><a href="#cb305-19" aria-hidden="true"></a>}</span></code></pre></div>
<p>But then I thought, how about checking if <code>log&lt;sub&gt;2&lt;/sub&gt; x</code> is an exactly round number? But when I checked for 2^63+1, <code>Math.Log</code> returned exactly 63 because of rounding. So I checked if 2 to the power 63 is equal to the original number - and it is, because the calculation is done in <code>double</code>s and not in exact numbers:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true"></a>private <span class="dt">bool</span> IsPowerOfTwo_2(ulong number)</span>
<span id="cb306-2"><a href="#cb306-2" aria-hidden="true"></a>{</span>
<span id="cb306-3"><a href="#cb306-3" aria-hidden="true"></a>    <span class="dt">double</span> log = Math.Log(number, <span class="dv">2</span>);</span>
<span id="cb306-4"><a href="#cb306-4" aria-hidden="true"></a>    <span class="dt">double</span> pow = Math.Pow(<span class="dv">2</span>, Math.Round(log));</span>
<span id="cb306-5"><a href="#cb306-5" aria-hidden="true"></a>    <span class="cf">return</span> pow == number;</span>
<span id="cb306-6"><a href="#cb306-6" aria-hidden="true"></a>}</span></code></pre></div>
<p>This returned <code>true</code> for the given wrong value: <code>9223372036854775809</code>.</p>
<p>Is there a better algorithm?</p>
</section>
<section id="answer-accepted-score-1152" class="level4">
<h4>Answer accepted (score 1152)</h4>
<p>There’s a simple trick for this problem:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true"></a><span class="dt">bool</span> IsPowerOfTwo(ulong x)</span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true"></a>{</span>
<span id="cb307-3"><a href="#cb307-3" aria-hidden="true"></a>    <span class="cf">return</span> (x &amp; (x - <span class="dv">1</span>)) == <span class="dv">0</span>;</span>
<span id="cb307-4"><a href="#cb307-4" aria-hidden="true"></a>}</span></code></pre></div>
<p>Note, this function will report <code>true</code> for <code>0</code>, which is not a power of <code>2</code>. If you want to exclude that, here’s how:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true"></a><span class="dt">bool</span> IsPowerOfTwo(ulong x)</span>
<span id="cb308-2"><a href="#cb308-2" aria-hidden="true"></a>{</span>
<span id="cb308-3"><a href="#cb308-3" aria-hidden="true"></a>    <span class="cf">return</span> (x != <span class="dv">0</span>) &amp;&amp; ((x &amp; (x - <span class="dv">1</span>)) == <span class="dv">0</span>);</span>
<span id="cb308-4"><a href="#cb308-4" aria-hidden="true"></a>}</span></code></pre></div>
<h5>
Explanation
</h3>
<p>First and foremost the bitwise binary &amp; operator from MSDN definition:</p>
<blockquote>
<p>
Binary &amp; operators are predefined for the integral types and bool. For integral types, &amp; computes the logical bitwise AND of its operands. For bool operands, &amp; computes the logical AND of its operands; that is, the result is true if and only if both its operands are true.
</p>
</blockquote>
<p>Now let’s take a look at how this all plays out:</p>
<p>The function returns boolean (true / false) and accepts one incoming parameter of type unsigned long (x, in this case). Let us for the sake of simplicity assume that someone has passed the value 4 and called the function like so:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true"></a><span class="dt">bool</span> b = IsPowerOfTwo(<span class="dv">4</span>)</span></code></pre></div>
<p>Now we replace each occurrence of x with 4:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true"></a><span class="cf">return</span> (<span class="dv">4</span> != <span class="dv">0</span>) &amp;&amp; ((<span class="dv">4</span> &amp; (<span class="dv">4</span>-<span class="dv">1</span>)) == <span class="dv">0</span>);</span></code></pre></div>
<p>Well we already know that 4 != 0 evals to true, so far so good. But what about:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true"></a>((<span class="dv">4</span> &amp; (<span class="dv">4</span>-<span class="dv">1</span>)) == <span class="dv">0</span>)</span></code></pre></div>
<p>This translates to this of course:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true"></a>((<span class="dv">4</span> &amp; <span class="dv">3</span>) == <span class="dv">0</span>)</span></code></pre></div>
<p>But what exactly is <code>4&amp;amp;3</code>?</p>
<p>The binary representation of 4 is 100 and the binary representation of 3 is 011 (remember the &amp; takes the binary representation of these numbers). So we have:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true"></a><span class="dv">100</span> = <span class="dv">4</span></span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true"></a><span class="bn">011</span> = <span class="dv">3</span></span></code></pre></div>
<p>Imagine these values being stacked up much like elementary addition. The <code>&amp;amp;</code> operator says that if both values are equal to 1 then the result is 1, otherwise it is 0. So <code>1 &amp;amp; 1 = 1</code>, <code>1 &amp;amp; 0 = 0</code>, <code>0 &amp;amp; 0 = 0</code>, and <code>0 &amp;amp; 1 = 0</code>. So we do the math:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true"></a><span class="dv">100</span></span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true"></a><span class="bn">011</span></span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true"></a>----</span>
<span id="cb314-4"><a href="#cb314-4" aria-hidden="true"></a><span class="bn">000</span></span></code></pre></div>
<p>The result is simply 0. So we go back and look at what our return statement now translates to:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true"></a><span class="cf">return</span> (<span class="dv">4</span> != <span class="dv">0</span>) &amp;&amp; ((<span class="dv">4</span> &amp; <span class="dv">3</span>) == <span class="dv">0</span>);</span></code></pre></div>
<p>Which translates now to:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true"></a><span class="cf">return</span> true &amp;&amp; (<span class="dv">0</span> == <span class="dv">0</span>);</span></code></pre></div>
<div class="sourceCode" id="cb317"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true"></a><span class="cf">return</span> true &amp;&amp; true;</span></code></pre></div>
<p>We all know that <code>true &amp;amp;&amp;amp; true</code> is simply <code>true</code>, and this shows that for our example, 4 is a power of 2.</p>
</section>
<section id="answer-2-score-95" class="level4">
<h4>Answer 2 (score 95)</h4>
<p>Some sites that document and explain this and other bit twiddling hacks are:</p>
<ul>
<li>
<a href="http://graphics.stanford.edu/~seander/bithacks.html" rel="noreferrer">http://graphics.stanford.edu/~seander/bithacks.html</a><br> (<a href="http://graphics.stanford.edu/~seander/bithacks.html
#DetermineIfPowerOf2" rel="noreferrer">http://graphics.stanford.edu/~seander/bithacks.html#DetermineIfPowerOf2</a>)
</li>
<li>
<a href="http://bits.stephan-brumme.com/" rel="noreferrer">http://bits.stephan-brumme.com/</a><br> (<a href="http://bits.stephan-brumme.com/isPowerOfTwo.html" rel="noreferrer">http://bits.stephan-brumme.com/isPowerOfTwo.html</a>)
</li>
</ul>
<p>And the grandaddy of them, <a href="https://rads.stackoverflow.com/amzn/click/com/0201914654" rel="noreferrer" rel="nofollow noreferrer">the book “Hacker’s Delight” by Henry Warren, Jr.</a>:</p>
<ul>
<li>
<a href="http://www.hackersdelight.org/" rel="noreferrer">http://www.hackersdelight.org/</a>
</li>
</ul>
<p>As <a href="http://graphics.stanford.edu/~seander/bithacks.html
#DetermineIfPowerOf2" rel="noreferrer">Sean Anderson’s page</a> explains, the expression <code>((x &amp;amp; (x - 1)) == 0)</code> incorrectly indicates that 0 is a power of 2. He suggests to use:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true"></a>(!(x &amp; (x - <span class="dv">1</span>)) &amp;&amp; x)</span></code></pre></div>
<p>to correct that problem.</p>
</section>
<section id="answer-3-score-39" class="level4">
<h4>Answer 3 (score 39)</h4>
<p><code>return (i &amp;amp; -i) == i</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="finding-all-cycles-in-a-directed-graph-score-208242-in-2017" class="level3">
<h3>53: Finding all cycles in a directed graph (score <a href="https://stackoverflow.com/q/546655.html">208242</a> in 2017)</h3>
<section id="question-52" class="level4">
<h4>Question</h4>
<p>How can I find (iterate over) ALL the cycles in a directed graph from/to a given node?</p>
<p>For example, I want something like this:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true"></a>A-&gt;B-&gt;A</span>
<span id="cb319-2"><a href="#cb319-2" aria-hidden="true"></a>A-&gt;B-&gt;C-&gt;A</span></code></pre></div>
<p>
but not: B-&gt;C-&gt;B
</p>
</section>
<section id="answer-2-score-100" class="level4">
<h4>Answer 2 (score 100)</h4>
<p>I found this page in my search and since cycles are not same as strongly connected components, I kept on searching and finally, I found an efficient algorithm which lists all (elementary) cycles of a directed graph. It is from Donald B. Johnson and the paper can be found in the following link:</p>
<p><a href="http://www.cs.tufts.edu/comp/150GA/homeworks/hw1/Johnson%2075.PDF" rel="noreferrer">http://www.cs.tufts.edu/comp/150GA/homeworks/hw1/Johnson%2075.PDF</a></p>
<p>A java implementation can be found in:</p>
<p><a href="http://normalisiert.de/code/java/elementaryCycles.zip" rel="noreferrer">http://normalisiert.de/code/java/elementaryCycles.zip</a></p>
<p>A <em>Mathematica</em> demonstration of Johnson’s algorithm can be found <a href="http://demonstrations.wolfram.com/EnumeratingCyclesOfADirectedGraph/" rel="noreferrer">here</a>, implementation can be downloaded from the right (<a href="http://demonstrations.wolfram.com/downloadauthornb.cgi?name=EnumeratingCyclesOfADirectedGraph" rel="noreferrer">“Download author code”</a>).</p>
<p>Note: Actually, there are many algorithms for this problem. Some of them are listed in this article:</p>
<p><a href="http://dx.doi.org/10.1137/0205007" rel="noreferrer">http://dx.doi.org/10.1137/0205007</a></p>
<p>According to the article, Johnson’s algorithm is the fastest one.</p>
</section>
<section id="answer-3-score-32" class="level4">
<h4>Answer 3 (score 32)</h4>
<p>
Depth first search with backtracking should work here. Keep an array of boolean values to keep track of whether you visited a node before. If you run out of new nodes to go to (without hitting a node you have already been), then just backtrack and try a different branch.
</p>
<p>The DFS is easy to implement if you have an adjacency list to represent the graph. For example adj[A] = {B,C} indicates that B and C are the children of A.</p>
<p>For example, pseudo-code below. “start” is the node you start from.</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true"></a>dfs(adj,node,visited):  </span>
<span id="cb320-2"><a href="#cb320-2" aria-hidden="true"></a>  <span class="cf">if</span> (visited[node]):  </span>
<span id="cb320-3"><a href="#cb320-3" aria-hidden="true"></a>    <span class="cf">if</span> (node == start):  </span>
<span id="cb320-4"><a href="#cb320-4" aria-hidden="true"></a>      <span class="st">&quot;found a path&quot;</span>  </span>
<span id="cb320-5"><a href="#cb320-5" aria-hidden="true"></a>    <span class="cf">return</span>;  </span>
<span id="cb320-6"><a href="#cb320-6" aria-hidden="true"></a>  visited[node]=YES;  </span>
<span id="cb320-7"><a href="#cb320-7" aria-hidden="true"></a>  <span class="cf">for</span> child in adj[node]:  </span>
<span id="cb320-8"><a href="#cb320-8" aria-hidden="true"></a>    dfs(adj,child,visited)</span>
<span id="cb320-9"><a href="#cb320-9" aria-hidden="true"></a>  visited[node]=NO;</span></code></pre></div>
<p>Call the above function with the start node:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true"></a>visited = {}</span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true"></a>dfs(adj,start,visited)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-determine-if-a-point-is-in-a-2d-triangle-score-200577-in-2016" class="level3">
<h3>54: How to determine if a point is in a 2D triangle? (score <a href="https://stackoverflow.com/q/2049582.html">200577</a> in 2016)</h3>
<section id="question-53" class="level4">
<h4>Question</h4>
<p>Is there an easy way to determine if a point is inside a triangle? It’s 2D, not 3D.</p>
</section>
<section id="answer-accepted-score-245" class="level4">
<h4>Answer accepted (score 245)</h4>
<p>In general, the simplest (and quite optimal) algorithm is checking on which side of the half-plane created by the edges the point is.</p>
<p>Here’s some high quality info in this <a href="http://www.gamedev.net/community/forums/topic.asp?topic_id=295943" rel="noreferrer">topic on GameDev</a>, including performance issues.</p>
<p>And here’s some code to get you started:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true"></a><span class="dt">float</span> sign (fPoint p1, fPoint p2, fPoint p3)</span>
<span id="cb322-2"><a href="#cb322-2" aria-hidden="true"></a>{</span>
<span id="cb322-3"><a href="#cb322-3" aria-hidden="true"></a>    <span class="cf">return</span> (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);</span>
<span id="cb322-4"><a href="#cb322-4" aria-hidden="true"></a>}</span>
<span id="cb322-5"><a href="#cb322-5" aria-hidden="true"></a></span>
<span id="cb322-6"><a href="#cb322-6" aria-hidden="true"></a><span class="dt">bool</span> PointInTriangle (fPoint pt, fPoint v1, fPoint v2, fPoint v3)</span>
<span id="cb322-7"><a href="#cb322-7" aria-hidden="true"></a>{</span>
<span id="cb322-8"><a href="#cb322-8" aria-hidden="true"></a>    <span class="dt">float</span> d1, d2, d3;</span>
<span id="cb322-9"><a href="#cb322-9" aria-hidden="true"></a>    <span class="dt">bool</span> has_neg, has_pos;</span>
<span id="cb322-10"><a href="#cb322-10" aria-hidden="true"></a></span>
<span id="cb322-11"><a href="#cb322-11" aria-hidden="true"></a>    d1 = sign(pt, v1, v2);</span>
<span id="cb322-12"><a href="#cb322-12" aria-hidden="true"></a>    d2 = sign(pt, v2, v3);</span>
<span id="cb322-13"><a href="#cb322-13" aria-hidden="true"></a>    d3 = sign(pt, v3, v1);</span>
<span id="cb322-14"><a href="#cb322-14" aria-hidden="true"></a></span>
<span id="cb322-15"><a href="#cb322-15" aria-hidden="true"></a>    has_neg = (d1 &lt; <span class="dv">0</span>) || (d2 &lt; <span class="dv">0</span>) || (d3 &lt; <span class="dv">0</span>);</span>
<span id="cb322-16"><a href="#cb322-16" aria-hidden="true"></a>    has_pos = (d1 &gt; <span class="dv">0</span>) || (d2 &gt; <span class="dv">0</span>) || (d3 &gt; <span class="dv">0</span>);</span>
<span id="cb322-17"><a href="#cb322-17" aria-hidden="true"></a></span>
<span id="cb322-18"><a href="#cb322-18" aria-hidden="true"></a>    <span class="cf">return</span> !(has_neg &amp;&amp; has_pos);</span>
<span id="cb322-19"><a href="#cb322-19" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-164" class="level4">
<h4>Answer 2 (score 164)</h4>
<p>Solve the following equation system:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true"></a>p = p0 + (p1 - p0) * s + (p2 - p0) * t</span></code></pre></div>
<p>The point <code>p</code> is inside the triangle if <code>0 &amp;lt;= s &amp;lt;= 1</code> and <code>0 &amp;lt;= t &amp;lt;= 1</code> and <code>s + t &amp;lt;= 1</code>.</p>
<p><code>s</code>,<code>t</code> and <code>1 - s - t</code> are called the <a href="http://en.wikipedia.org/wiki/Barycentric_coordinates_%28mathematics%29" rel="noreferrer">barycentric coordinates</a> of the point <code>p</code>.</p>
</section>
<section id="answer-3-score-105" class="level4">
<h4>Answer 3 (score 105)</h4>
<p>I agree with <strong>Andreas Brinck</strong>, barycentric coordinates are very convenient for this task. Note that there is no need to solve an equation system every time: just evaluate the analytical solution. Using <strong>Andreas</strong>’ notation, the solution is:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true"></a>s = <span class="dv">1</span>/(<span class="dv">2</span>*Area)*(p0y*p2x - p0x*p2y + (p2y - p0y)*px + (p0x - p2x)*py);</span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true"></a>t = <span class="dv">1</span>/(<span class="dv">2</span>*Area)*(p0x*p1y - p0y*p1x + (p0y - p1y)*px + (p1x - p0x)*py);</span></code></pre></div>
<p>where <code>Area</code> is the (signed) area of the triangle:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true"></a>Area = <span class="fl">0.5</span> *(-p1y*p2x + p0y*(-p1x + p2x) + p0x*(p1y - p2y) + p1x*p2y);</span></code></pre></div>
<p>Just evaluate <code>s</code>, <code>t</code> and <code>1-s-t</code>. The point <code>p</code> is inside the triangle if and only if they are all positive.</p>
<p>EDIT: Note that the above expression for the area assumes that the triangle node numbering is counter-clockwise. If the numbering is clockwise, this expression will return a negative area (but with correct magnitude). The test itself (<code>s&amp;gt;0 &amp;amp;&amp;amp; t&amp;gt;0 &amp;amp;&amp;amp; 1-s-t&amp;gt;0</code>) doesn’t depend on the direction of the numbering, however, since the expressions above that are multiplied by <code>1/(2*Area)</code> also change sign if the triangle node orientation changes.</p>
<p>EDIT 2: For an even better computational efficiency, see <strong>coproc</strong>’s comment below (which makes the point that if the orientation of the triangle nodes (clockwise or counter-clockwise) is known beforehand, the division by <code>2*Area</code> in the expressions for <code>s</code> and <code>t</code> can be avoided). See also <strong>Perro Azul</strong>’s jsfiddle-code in the comments under <strong>Andreas Brinck</strong>’s answer.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="algorithm-to-generate-all-possible-permutations-of-a-list-score-199006-in-2010" class="level3">
<h3>55: Algorithm to generate all possible permutations of a list? (score <a href="https://stackoverflow.com/q/2710713.html">199006</a> in 2010)</h3>
<section id="question-54" class="level4">
<h4>Question</h4>
<p>Say I have a list of n elements, I know there are n! possible ways to order these elements. What is an algorithm to generate all possible orderings of this list? Example, I have list [a, b, c]. The algorithm would return [[a, b, c], [a, c, b,], [b, a, c], [b, c, a], [c, a, b], [c, b, a]].</p>
<p>
I’m reading this here <a href="http://en.wikipedia.org/wiki/Permutation
#Algorithms_to_generate_permutations">http://en.wikipedia.org/wiki/Permutation#Algorithms_to_generate_permutations</a>
</p>
<p>But Wikipedia has never been good at explaining. I don’t understand much of it.</p>
</section>
<section id="answer-accepted-score-93" class="level4">
<h4>Answer accepted (score 93)</h4>
<p>Basically, for each item from left to right, all the permutations of the remaining items are generated (and each one is added with the current elements). This can be done recursively (or iteratively if you like pain) until the last item is reached at which point there is only one possible order.</p>
<p>So with the list [1,2,3,4] all the permutations that start with 1 are generated, then all the permutations that start with 2, then 3 then 4.</p>
<p>
This effectively reduces the problem from one of finding permutations of a list of four items to a list of three items. After reducing to 2 and then 1 item lists, all of them will be found.<br> Example showing process permutations using 3 coloured balls:<br> <a href="https://i.stack.imgur.com/o1ETp.png" rel="noreferrer"><img src="https://i.stack.imgur.com/o1ETp.png" alt="Red, green and blue coloured balls ordered permutations image"></a> (from <a href="https://en.wikipedia.org/wiki/Permutation
#/media/File:Permutations_RGB.svg" rel="noreferrer">https://en.wikipedia.org/wiki/Permutation#/media/File:Permutations_RGB.svg</a> - <a href="https://commons.wikimedia.org/wiki/File:Permutations_RGB.svg" rel="noreferrer">https://commons.wikimedia.org/wiki/File:Permutations_RGB.svg</a>)
</p>
</section>
<section id="answer-2-score-24" class="level4">
<h4>Answer 2 (score 24)</h4>
<p>Here is an algorithm in Python that works by in place on an array:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true"></a>def permute(xs, low=<span class="dv">0</span>):</span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true"></a>    <span class="cf">if</span> low + <span class="dv">1</span> &gt;= len(xs):</span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true"></a>        yield xs</span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true"></a>    <span class="cf">else</span>:</span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true"></a>        <span class="cf">for</span> p in permute(xs, low + <span class="dv">1</span>):</span>
<span id="cb326-6"><a href="#cb326-6" aria-hidden="true"></a>            yield p        </span>
<span id="cb326-7"><a href="#cb326-7" aria-hidden="true"></a>        <span class="cf">for</span> i in range(low + <span class="dv">1</span>, len(xs)):        </span>
<span id="cb326-8"><a href="#cb326-8" aria-hidden="true"></a>            xs[low], xs[i] = xs[i], xs[low]</span>
<span id="cb326-9"><a href="#cb326-9" aria-hidden="true"></a>            <span class="cf">for</span> p in permute(xs, low + <span class="dv">1</span>):</span>
<span id="cb326-10"><a href="#cb326-10" aria-hidden="true"></a>                yield p        </span>
<span id="cb326-11"><a href="#cb326-11" aria-hidden="true"></a>            xs[low], xs[i] = xs[i], xs[low]</span>
<span id="cb326-12"><a href="#cb326-12" aria-hidden="true"></a></span>
<span id="cb326-13"><a href="#cb326-13" aria-hidden="true"></a><span class="cf">for</span> p in permute([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>]):</span>
<span id="cb326-14"><a href="#cb326-14" aria-hidden="true"></a>    print p</span></code></pre></div>
<p>You can try the code out for yourself here: <a href="http://repl.it/J9v">http://repl.it/J9v</a></p>
</section>
<section id="answer-3-score-13" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>There is already plenty of good solutions here, but I would like to share how I solved this problem on my own and hope that this might be helpful for somebody who would also like to derive his own solution.</p>
<p>After some pondering about the problem I have come up with two following conclusions:</p>
<ol>
<li>
For the list <code>L</code> of size <code>n</code> there will be equal number of solutions starting with L<sub>1</sub>, L<sub>2</sub> … L<sub>n</sub> elements of the list. Since in total there are <code>n!</code> permutations of the list of size <code>n</code>, we get <code>n! / n = (n-1)!</code> permutations in each group.
</li>
<li>
The list of 2 elements has only 2 permutations =&gt; <code>[a,b]</code> and <code>[b,a]</code>.
</li>
</ol>
<p>Using these two simple ideas I have derived the following algorithm:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true"></a>permute array</span>
<span id="cb327-2"><a href="#cb327-2" aria-hidden="true"></a>    <span class="cf">if</span> array is of size <span class="dv">2</span></span>
<span id="cb327-3"><a href="#cb327-3" aria-hidden="true"></a>       <span class="cf">return</span> first and second element as new array</span>
<span id="cb327-4"><a href="#cb327-4" aria-hidden="true"></a>       <span class="cf">return</span> second and first element as new array</span>
<span id="cb327-5"><a href="#cb327-5" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb327-6"><a href="#cb327-6" aria-hidden="true"></a>        <span class="cf">for</span> each element in array</span>
<span id="cb327-7"><a href="#cb327-7" aria-hidden="true"></a>            new subarray = array with excluded element</span>
<span id="cb327-8"><a href="#cb327-8" aria-hidden="true"></a>            <span class="cf">return</span> element + permute subarray</span></code></pre></div>
<p>Here is how I implemented this in C #:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true"></a>public IEnumerable&lt;List&lt;T&gt;&gt; Permutate&lt;T&gt;(List&lt;T&gt; input)</span>
<span id="cb328-2"><a href="#cb328-2" aria-hidden="true"></a>{</span>
<span id="cb328-3"><a href="#cb328-3" aria-hidden="true"></a>    <span class="cf">if</span> (input.Count == <span class="dv">2</span>) <span class="co">// this are permutations of array of size 2</span></span>
<span id="cb328-4"><a href="#cb328-4" aria-hidden="true"></a>    {</span>
<span id="cb328-5"><a href="#cb328-5" aria-hidden="true"></a>        yield <span class="cf">return</span> new List&lt;T&gt;(input);</span>
<span id="cb328-6"><a href="#cb328-6" aria-hidden="true"></a>        yield <span class="cf">return</span> new List&lt;T&gt; {input[<span class="dv">1</span>], input[<span class="dv">0</span>]}; </span>
<span id="cb328-7"><a href="#cb328-7" aria-hidden="true"></a>    }</span>
<span id="cb328-8"><a href="#cb328-8" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb328-9"><a href="#cb328-9" aria-hidden="true"></a>    {</span>
<span id="cb328-10"><a href="#cb328-10" aria-hidden="true"></a>        foreach(T elem in input) <span class="co">// going through array</span></span>
<span id="cb328-11"><a href="#cb328-11" aria-hidden="true"></a>        {</span>
<span id="cb328-12"><a href="#cb328-12" aria-hidden="true"></a>            var rlist = new List&lt;T&gt;(input); <span class="co">// creating subarray = array</span></span>
<span id="cb328-13"><a href="#cb328-13" aria-hidden="true"></a>            rlist.Remove(elem); <span class="co">// removing element</span></span>
<span id="cb328-14"><a href="#cb328-14" aria-hidden="true"></a>            foreach(List&lt;T&gt; retlist in Permutate(rlist))</span>
<span id="cb328-15"><a href="#cb328-15" aria-hidden="true"></a>            {</span>
<span id="cb328-16"><a href="#cb328-16" aria-hidden="true"></a>                retlist.Insert(<span class="dv">0</span>,elem); <span class="co">// inserting the element at pos 0</span></span>
<span id="cb328-17"><a href="#cb328-17" aria-hidden="true"></a>                yield <span class="cf">return</span> retlist;</span>
<span id="cb328-18"><a href="#cb328-18" aria-hidden="true"></a>            }</span>
<span id="cb328-19"><a href="#cb328-19" aria-hidden="true"></a></span>
<span id="cb328-20"><a href="#cb328-20" aria-hidden="true"></a>        }</span>
<span id="cb328-21"><a href="#cb328-21" aria-hidden="true"></a>    }</span>
<span id="cb328-22"><a href="#cb328-22" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="expand-a-random-range-from-15-to-17-score-196936-in-2012" class="level3">
<h3>56: Expand a random range from 1–5 to 1–7 (score <a href="https://stackoverflow.com/q/137783.html">196936</a> in 2012)</h3>
<section id="question-55" class="level4">
<h4>Question</h4>
<p>Given a function which produces a random integer in the range 1 to 5, write a function which produces a random integer in the range 1 to 7.</p>
<ol>
<li>
What is a simple solution?
</li>
<li>
What is an effective solution to reduce memory usage or run on a slower CPU?
</li>
</ol>
</section>
<section id="answer-2-score-561" class="level4">
<h4>Answer 2 (score 561)</h4>
<p>This is equivalent to Adam Rosenfield’s solution, but may be a bit more clear for some readers. It assumes rand5() is a function that returns a statistically random integer in the range 1 through 5 inclusive.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true"></a><span class="dt">int</span> rand7()</span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true"></a>{</span>
<span id="cb329-3"><a href="#cb329-3" aria-hidden="true"></a>    <span class="dt">int</span> vals[<span class="dv">5</span>][<span class="dv">5</span>] = {</span>
<span id="cb329-4"><a href="#cb329-4" aria-hidden="true"></a>        { <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span> },</span>
<span id="cb329-5"><a href="#cb329-5" aria-hidden="true"></a>        { <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span> },</span>
<span id="cb329-6"><a href="#cb329-6" aria-hidden="true"></a>        { <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">1</span> },</span>
<span id="cb329-7"><a href="#cb329-7" aria-hidden="true"></a>        { <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span> },</span>
<span id="cb329-8"><a href="#cb329-8" aria-hidden="true"></a>        { <span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span> }</span>
<span id="cb329-9"><a href="#cb329-9" aria-hidden="true"></a>    };</span>
<span id="cb329-10"><a href="#cb329-10" aria-hidden="true"></a></span>
<span id="cb329-11"><a href="#cb329-11" aria-hidden="true"></a>    <span class="dt">int</span> result = <span class="dv">0</span>;</span>
<span id="cb329-12"><a href="#cb329-12" aria-hidden="true"></a>    <span class="cf">while</span> (result == <span class="dv">0</span>)</span>
<span id="cb329-13"><a href="#cb329-13" aria-hidden="true"></a>    {</span>
<span id="cb329-14"><a href="#cb329-14" aria-hidden="true"></a>        <span class="dt">int</span> i = rand5();</span>
<span id="cb329-15"><a href="#cb329-15" aria-hidden="true"></a>        <span class="dt">int</span> j = rand5();</span>
<span id="cb329-16"><a href="#cb329-16" aria-hidden="true"></a>        result = vals[i-<span class="dv">1</span>][j-<span class="dv">1</span>];</span>
<span id="cb329-17"><a href="#cb329-17" aria-hidden="true"></a>    }</span>
<span id="cb329-18"><a href="#cb329-18" aria-hidden="true"></a>    <span class="cf">return</span> result;</span>
<span id="cb329-19"><a href="#cb329-19" aria-hidden="true"></a>}</span></code></pre></div>
<p>How does it work? Think of it like this: imagine printing out this double-dimension array on paper, tacking it up to a dart board and randomly throwing darts at it. If you hit a non-zero value, it’s a statistically random value between 1 and 7, since there are an equal number of non-zero values to choose from. If you hit a zero, just keep throwing the dart until you hit a non-zero. That’s what this code is doing: the i and j indexes randomly select a location on the dart board, and if we don’t get a good result, we keep throwing darts.</p>
<p>Like Adam said, this can run forever in the worst case, but statistically the worst case never happens. :)</p>
</section>
<section id="answer-3-score-347" class="level4">
<h4>Answer 3 (score 347)</h4>
<p>There is no (exactly correct) solution which will run in a constant amount of time, since 1/7 is an infinite decimal in base 5. One simple solution would be to use rejection sampling, e.g.:</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true"></a></span>
<span id="cb330-2"><a href="#cb330-2" aria-hidden="true"></a><span class="dt">int</span> i;</span>
<span id="cb330-3"><a href="#cb330-3" aria-hidden="true"></a><span class="cf">do</span></span>
<span id="cb330-4"><a href="#cb330-4" aria-hidden="true"></a>{</span>
<span id="cb330-5"><a href="#cb330-5" aria-hidden="true"></a>  i = <span class="dv">5</span> * (rand5() - <span class="dv">1</span>) + rand5();  <span class="co">// i is now uniformly random between 1 and 25</span></span>
<span id="cb330-6"><a href="#cb330-6" aria-hidden="true"></a>} <span class="cf">while</span>(i &gt; <span class="dv">21</span>);</span>
<span id="cb330-7"><a href="#cb330-7" aria-hidden="true"></a><span class="co">// i is now uniformly random between 1 and 21</span></span>
<span id="cb330-8"><a href="#cb330-8" aria-hidden="true"></a><span class="cf">return</span> i % <span class="dv">7</span> + <span class="dv">1</span>;  <span class="co">// result is now uniformly random between 1 and 7</span></span></code></pre></div>
<p>This has an expected runtime of 25/21 = 1.19 iterations of the loop, but there is an infinitesimally small probability of looping forever.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="good-java-graph-algorithm-library-score-195402-in-2013" class="level3">
<h3>57: Good Java graph algorithm library? (score <a href="https://stackoverflow.com/q/51574.html">195402</a> in 2013)</h3>
<section id="question-56" class="level4">
<h4>Question</h4>
<p>Has anyone had good experiences with any Java libraries for Graph algorithms. I’ve tried <a href="http://www.jgraph.com/jgraph.html" rel="noreferrer">JGraph</a> and found it ok, and there are a lot of different ones in google. Are there any that people are actually using successfully in production code or would recommend?</p>
<p>To clarify, I’m not looking for a library that produces graphs/charts, I’m looking for one that helps with Graph algorithms, eg minimum spanning tree, Kruskal’s algorithm Nodes, Edges, etc. Ideally one with some good algorithms/data structures in a nice Java OO API.</p>
</section>
<section id="answer-accepted-score-108-1" class="level4">
<h4>Answer accepted (score 108)</h4>
<p>If you were using JGraph, you should give a try to <a href="http://jgrapht.org/" rel="noreferrer">JGraphT</a> which is designed for algorithms. One of its features is visualization using the JGraph library. It’s still developed, but pretty stable. I analyzed the complexity of JGraphT algorithms some time ago. Some of them aren’t the quickest, but if you’re going to implement them on your own and need to display your graph, then it might be the best choice. I really liked using its API, when I quickly had to write an app that was working on graph and displaying it later.</p>
</section>
<section id="answer-2-score-61" class="level4">
<h4>Answer 2 (score 61)</h4>
<p>Summary:</p>
<ul>
<li>
<a href="https://github.com/jgrapht/jgrapht/" rel="noreferrer">JGraphT</a> if you are more interested in data structures and algorithms.
</li>
<li>
<a href="https://www.jgraph.com/jgraph.html" rel="noreferrer">JGraph</a> if your primary focus is visualization.
</li>
<li>
<a href="http://jung.sourceforge.net/" rel="noreferrer">Jung</a>, <a href="http://www.yworks.com" rel="noreferrer">yWorks</a>, and <a href="http://bfo.com/products/graph/" rel="noreferrer">BFG</a> are other things people tried using.
</li>
<li>
<a href="https://github.com/prefuse/Prefuse" rel="noreferrer">Prefuse</a> is a no no since one has to rewrite most of it.
</li>
<li>
<a href="https://github.com/google/guava/wiki/GraphsExplained" rel="noreferrer">Google Guava</a> if you need good datastructures only.
</li>
<li>
<a href="http://commons.apache.org/sandbox/commons-graph/" rel="noreferrer">Apache Commons Graph</a>. Currently dormant, but provides implementations for many algorithms. See <a href="https://issues.apache.org/jira/browse/SANDBOX-458" rel="noreferrer">https://issues.apache.org/jira/browse/SANDBOX-458</a> for a list of implemented algorithms, also compared with Jung, GraphT, Prefuse, <a href="https://github.com/jbpt/codebase" rel="noreferrer">jBPT</a>
</li>
</ul>
</section>
<section id="answer-3-score-40-1" class="level4">
<h4>Answer 3 (score 40)</h4>
<p>Check out <a href="http://jgrapht.org/" rel="noreferrer">JGraphT</a> for a very simple and powerful Java graph library that is pretty well done and, to allay any confusion, <em>is different than JGraph</em>. Some <a href="https://github.com/jgrapht/jgrapht/wiki/HelloWorld" rel="noreferrer">sample code</a>:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true"></a>UndirectedGraph&lt;String, DefaultEdge&gt; g =</span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true"></a>        new SimpleGraph&lt;String, DefaultEdge&gt;(DefaultEdge.class);</span>
<span id="cb331-3"><a href="#cb331-3" aria-hidden="true"></a></span>
<span id="cb331-4"><a href="#cb331-4" aria-hidden="true"></a>    String v1 = <span class="st">&quot;v1&quot;</span>;</span>
<span id="cb331-5"><a href="#cb331-5" aria-hidden="true"></a>    String v2 = <span class="st">&quot;v2&quot;</span>;</span>
<span id="cb331-6"><a href="#cb331-6" aria-hidden="true"></a>    String v3 = <span class="st">&quot;v3&quot;</span>;</span>
<span id="cb331-7"><a href="#cb331-7" aria-hidden="true"></a>    String v4 = <span class="st">&quot;v4&quot;</span>;</span>
<span id="cb331-8"><a href="#cb331-8" aria-hidden="true"></a></span>
<span id="cb331-9"><a href="#cb331-9" aria-hidden="true"></a>    <span class="co">// add the vertices</span></span>
<span id="cb331-10"><a href="#cb331-10" aria-hidden="true"></a>    g.addVertex(v1);</span>
<span id="cb331-11"><a href="#cb331-11" aria-hidden="true"></a>    g.addVertex(v2);</span>
<span id="cb331-12"><a href="#cb331-12" aria-hidden="true"></a>    g.addVertex(v3);</span>
<span id="cb331-13"><a href="#cb331-13" aria-hidden="true"></a>    g.addVertex(v4);</span>
<span id="cb331-14"><a href="#cb331-14" aria-hidden="true"></a></span>
<span id="cb331-15"><a href="#cb331-15" aria-hidden="true"></a>    <span class="co">// add edges to create a circuit</span></span>
<span id="cb331-16"><a href="#cb331-16" aria-hidden="true"></a>    g.addEdge(v1, v2);</span>
<span id="cb331-17"><a href="#cb331-17" aria-hidden="true"></a>    g.addEdge(v2, v3);</span>
<span id="cb331-18"><a href="#cb331-18" aria-hidden="true"></a>    g.addEdge(v3, v4);</span>
<span id="cb331-19"><a href="#cb331-19" aria-hidden="true"></a>    g.addEdge(v4, v1);</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="java-shifting-elements-in-an-array-score-194435-in-2016" class="level3">
<h3>58: Java, Shifting Elements in an Array (score <a href="https://stackoverflow.com/q/7970857.html">194435</a> in 2016)</h3>
<section id="question-57" class="level4">
<h4>Question</h4>
<p>I have an array of objects in Java, and I am trying to pull one element to the top and shift the rest down by one.</p>
<p>Assume I have an array of size 10, and I am trying to pull the fifth element. The fifth element goes into position <code>0</code> and all elements from 0 to 5 will be shifted down by one.</p>
<p>This algorithm does not properly shift the elements:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true"></a>Object temp = pool[position];</span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true"></a></span>
<span id="cb332-3"><a href="#cb332-3" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; position; i++) {                </span>
<span id="cb332-4"><a href="#cb332-4" aria-hidden="true"></a>    array[i+<span class="dv">1</span>] = array[i];</span>
<span id="cb332-5"><a href="#cb332-5" aria-hidden="true"></a>}</span>
<span id="cb332-6"><a href="#cb332-6" aria-hidden="true"></a>array[<span class="dv">0</span>] = temp;</span></code></pre></div>
<p>How do I do it correctly?</p>
</section>
<section id="answer-accepted-score-24" class="level4">
<h4>Answer accepted (score 24)</h4>
<p>Assuming your array is {10,20,30,40,50,60,70,80,90,100}</p>
<p>What your loop does is:</p>
<p><strong>Iteration 1:</strong> array[1] = array[0]; {10,10,30,40,50,60,70,80,90,100}</p>
<p><strong>Iteration 2:</strong> array[2] = array[1]; {10,10,10,40,50,60,70,80,90,100}</p>
<p>What you should be doing is</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true"></a>Object temp = pool[position];</span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true"></a></span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">int</span> i = (position - <span class="dv">1</span>); i &gt;= <span class="dv">0</span>; i--) {                </span>
<span id="cb333-4"><a href="#cb333-4" aria-hidden="true"></a>    array[i+<span class="dv">1</span>] = array[i];</span>
<span id="cb333-5"><a href="#cb333-5" aria-hidden="true"></a>}</span>
<span id="cb333-6"><a href="#cb333-6" aria-hidden="true"></a></span>
<span id="cb333-7"><a href="#cb333-7" aria-hidden="true"></a>array[<span class="dv">0</span>] = temp;</span></code></pre></div>
</section>
<section id="answer-2-score-86" class="level4">
<h4>Answer 2 (score 86)</h4>
<p>Logically it does not work and you should reverse your loop:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">int</span> i = position-<span class="dv">1</span>; i &gt;= <span class="dv">0</span>; i--) {                </span>
<span id="cb334-2"><a href="#cb334-2" aria-hidden="true"></a>    array[i+<span class="dv">1</span>] = array[i];</span>
<span id="cb334-3"><a href="#cb334-3" aria-hidden="true"></a>}</span></code></pre></div>
<p>Alternatively you can use</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true"></a>System.arraycopy(array, <span class="dv">0</span>, array, <span class="dv">1</span>, position);</span></code></pre></div>
</section>
<section id="answer-3-score-20" class="level4">
<h4>Answer 3 (score 20)</h4>
<p>You can just use <code>Collections.rotate(List&amp;lt;?&amp;gt; list, int distance)</code></p>
<p>Use <code>Arrays.asList(array)</code> to convert to <code>List</code></p>
<p>more info at: <a href="https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html
#rotate(java.util.List,%20int)" rel="noreferrer">https://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#rotate(java.util.List,%20int)</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-difference-between-tree-depth-and-height-score-193043-in-2019" class="level3">
<h3>59: What is the difference between tree depth and height? (score <a href="https://stackoverflow.com/q/2603692.html">193043</a> in 2019)</h3>
<section id="question-58" class="level4">
<h4>Question</h4>
<p>
This is a simple question from algorithms theory.<br> The difference between them is that in one case you count number of nodes and in other number of edges on the shortest path between root and concrete node.<br> Which is which?
</p>
</section>
<section id="answer-accepted-score-533" class="level4">
<h4>Answer accepted (score 533)</h4>
<p>I learned that depth and height are properties of a <em>node</em>:</p>
<ul>
<li>
<p>
The <strong>depth</strong> of a node is the number of edges from the node to the tree’s root node.<br />A root node will have a depth of 0.
</p>
</li>
<li>
<p>
The <strong>height</strong> of a node is the number of edges on the <em>longest path</em> from the node to a leaf.<br />A leaf node will have a height of 0.
</p>
</li>
</ul>
<p>Properties of a <em>tree</em>:</p>
<ul>
<li>
<p>
The <strong>height</strong> of a tree would be the height of its root node,<br />or equivalently, the depth of its deepest node.
</p>
</li>
<li>
<p>
The <strong>diameter</strong> (or <strong>width</strong>) of a tree is the number of <em>nodes</em> on the longest path between any two leaf nodes. The tree below has a diameter of 6 nodes.
</p>
</li>
</ul>
<p><img src="https://i.stack.imgur.com/8yPi9.png" alt="A tree, with height and depth of each node"></p>
</section>
<section id="answer-2-score-35" class="level4">
<h4>Answer 2 (score 35)</h4>
<p>height and depth of a tree is equal…</p>
<p>but height and depth of a node is not equal because…</p>
<p>the height is calculated by traversing from the given node to the deepest possible leaf.</p>
<p>depth is calculated from traversal from root to the given node…..</p>
</section>
<section id="answer-3-score-14-1" class="level4">
<h4>Answer 3 (score 14)</h4>
<p>According to Cormen et al. Introduction to Algorithms (Appendix B.5.3), the depth of a node X in a tree T is defined as the length of the simple path (number of edges) from the root node of T to X. The height of a node Y is the number of edges on the <strong>longest</strong> downward simple path from Y to a leaf. The height of a tree is defined as the height of its root node.</p>
<p>Note that a simple path is a path without repeat vertices.</p>
<p>The height of a <em>tree</em> is equal to the max depth of a <em>tree</em>. The depth of a node and the height of a node are not necessarily equal. See Figure B.6 of the 3rd Edition of Cormen et al. for an illustration of these concepts.</p>
<p>I have sometimes seen problems asking one to count nodes (vertices) instead of edges, so ask for clarification if you’re not sure you should count nodes or edges during an exam or a job interview.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-find-list-of-possible-words-from-a-letter-matrix-boggle-solver-score-192810-in-2019" class="level3">
<h3>60: How to find list of possible words from a letter matrix [Boggle Solver] (score <a href="https://stackoverflow.com/q/746082.html">192810</a> in 2019)</h3>
<section id="question-59" class="level4">
<h4>Question</h4>
<p>Lately I have been playing a game on my iPhone called Scramble. Some of you may know this game as Boggle. Essentially, when the game starts you get a matrix of letters like so:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true"></a>F X I E</span>
<span id="cb336-2"><a href="#cb336-2" aria-hidden="true"></a>A M L O</span>
<span id="cb336-3"><a href="#cb336-3" aria-hidden="true"></a>E W B X</span>
<span id="cb336-4"><a href="#cb336-4" aria-hidden="true"></a>A S T U</span></code></pre></div>
<p>The goal of the game is to find as many words as you can that can be formed by chaining letters together. You can start with any letter, and all the letters that surround it are fair game, and then once you move on to the next letter, all the letters that surround that letter are fair game, <strong>except for any previously used letters</strong>. So in the grid above, for example, I could come up with the words <code>LOB</code>, <code>TUX</code>, <code>SEA</code>, <code>FAME</code>, etc. Words must be at least 3 characters, and no more than NxN characters, which would be 16 in this game but can vary in some implementations. While this game is fun and addictive, I am apparently not very good at it and I wanted to cheat a little bit by making a program that would give me the best possible words (the longer the word the more points you get).</p>
<p>
<a href="https://i.stack.imgur.com/qLLPp.gif" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/qLLPp.gif" alt="Sample Boggle"></a><br> <sub>(source: <a href="http://www.boggled.org/sample.gif" rel="nofollow noreferrer">boggled.org</a>)</sub>
</p>
<p>I am, unfortunately, not very good with algorithms or their efficiencies and so forth. My first attempt uses a dictionary <a href="http://www.freebsd.org/cgi/cvsweb.cgi/src/share/dict/web2?rev=1.12;content-type=text%2Fplain" rel="nofollow noreferrer">such as this one</a> (~2.3MB) and does a linear search trying to match combinations with dictionary entries. This takes a <em>very</em> long time to find the possible words, and since you only get 2 minutes per round, it is simply not adequate.</p>
<p>I am interested to see if any Stackoverflowers can come up with more efficient solutions. I am mostly looking for solutions using the Big 3 Ps: Python, PHP, and Perl, although anything with Java or C++ is cool too, since speed is essential.</p>
<p><strong>CURRENT SOLUTIONS</strong>:</p>
<ul>
<li>
Adam Rosenfield, Python, ~20s
</li>
<li>
John Fouhy, Python, ~3s
</li>
<li>
Kent Fredric, Perl, ~1s
</li>
<li>
Darius Bacon, Python, ~1s
</li>
<li>
rvarcher, VB.NET <a href="http://www.myvrad.com/boggle/default.aspx" rel="nofollow noreferrer">(live link)</a>, ~1s
</li>
<li>
Paolo Bergantino, PHP <a href="http://www.rootspot.com/stackoverflow/boggle.php" rel="nofollow noreferrer">(live link)</a>, ~5s (~2s locally)
</li>
</ul>
</section>
<section id="answer-accepted-score-141" class="level4">
<h4>Answer accepted (score 141)</h4>
<p>My answer works like the others here, but I’ll post it because it looks a bit faster than the other Python solutions, from setting up the dictionary faster. (I checked this against John Fouhy’s solution.) After setup, the time to solve is down in the noise.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true"></a>grid = <span class="st">&quot;fxie amlo ewbx astu&quot;</span>.split()</span>
<span id="cb337-2"><a href="#cb337-2" aria-hidden="true"></a>nrows, ncols = len(grid), len(grid[<span class="dv">0</span>])</span>
<span id="cb337-3"><a href="#cb337-3" aria-hidden="true"></a></span>
<span id="cb337-4"><a href="#cb337-4" aria-hidden="true"></a></span>
<span id="cb337-5"><a href="#cb337-5" aria-hidden="true"></a><span class="er"># A dictionary word that could be a solution must use only the grid&#39;s</span></span>
<span id="cb337-6"><a href="#cb337-6" aria-hidden="true"></a></span>
<span id="cb337-7"><a href="#cb337-7" aria-hidden="true"></a><span class="er"># letters and have length &gt;= 3. (With a case-insensitive match.)</span></span>
<span id="cb337-8"><a href="#cb337-8" aria-hidden="true"></a>import re</span>
<span id="cb337-9"><a href="#cb337-9" aria-hidden="true"></a>alphabet = &#39;&#39;.join(set(&#39;&#39;.join(grid)))</span>
<span id="cb337-10"><a href="#cb337-10" aria-hidden="true"></a>bogglable = re.compile(<span class="ch">&#39;[&#39;</span> + alphabet + &#39;]{<span class="dv">3</span>,}$&#39;, re.I).match</span>
<span id="cb337-11"><a href="#cb337-11" aria-hidden="true"></a></span>
<span id="cb337-12"><a href="#cb337-12" aria-hidden="true"></a>words = set(word.rstrip(<span class="ch">&#39;\n&#39;</span>) <span class="cf">for</span> word in open(&#39;words&#39;) <span class="cf">if</span> bogglable(word))</span>
<span id="cb337-13"><a href="#cb337-13" aria-hidden="true"></a>prefixes = set(word[:i] <span class="cf">for</span> word in words</span>
<span id="cb337-14"><a href="#cb337-14" aria-hidden="true"></a>               <span class="cf">for</span> i in range(<span class="dv">2</span>, len(word)+<span class="dv">1</span>))</span>
<span id="cb337-15"><a href="#cb337-15" aria-hidden="true"></a></span>
<span id="cb337-16"><a href="#cb337-16" aria-hidden="true"></a>def solve():</span>
<span id="cb337-17"><a href="#cb337-17" aria-hidden="true"></a>    <span class="cf">for</span> y, row in enumerate(grid):</span>
<span id="cb337-18"><a href="#cb337-18" aria-hidden="true"></a>        <span class="cf">for</span> x, letter in enumerate(row):</span>
<span id="cb337-19"><a href="#cb337-19" aria-hidden="true"></a>            <span class="cf">for</span> result in extending(letter, ((x, y),)):</span>
<span id="cb337-20"><a href="#cb337-20" aria-hidden="true"></a>                yield result</span>
<span id="cb337-21"><a href="#cb337-21" aria-hidden="true"></a></span>
<span id="cb337-22"><a href="#cb337-22" aria-hidden="true"></a>def extending(prefix, path):</span>
<span id="cb337-23"><a href="#cb337-23" aria-hidden="true"></a>    <span class="cf">if</span> prefix in words:</span>
<span id="cb337-24"><a href="#cb337-24" aria-hidden="true"></a>        yield (prefix, path)</span>
<span id="cb337-25"><a href="#cb337-25" aria-hidden="true"></a>    <span class="cf">for</span> (nx, ny) in neighbors(path[-<span class="dv">1</span>]):</span>
<span id="cb337-26"><a href="#cb337-26" aria-hidden="true"></a>        <span class="cf">if</span> (nx, ny) not in path:</span>
<span id="cb337-27"><a href="#cb337-27" aria-hidden="true"></a>            prefix1 = prefix + grid[ny][nx]</span>
<span id="cb337-28"><a href="#cb337-28" aria-hidden="true"></a>            <span class="cf">if</span> prefix1 in prefixes:</span>
<span id="cb337-29"><a href="#cb337-29" aria-hidden="true"></a>                <span class="cf">for</span> result in extending(prefix1, path + ((nx, ny),)):</span>
<span id="cb337-30"><a href="#cb337-30" aria-hidden="true"></a>                    yield result</span>
<span id="cb337-31"><a href="#cb337-31" aria-hidden="true"></a></span>
<span id="cb337-32"><a href="#cb337-32" aria-hidden="true"></a>def neighbors((x, y)):</span>
<span id="cb337-33"><a href="#cb337-33" aria-hidden="true"></a>    <span class="cf">for</span> nx in range(max(<span class="dv">0</span>, x-<span class="dv">1</span>), min(x+<span class="dv">2</span>, ncols)):</span>
<span id="cb337-34"><a href="#cb337-34" aria-hidden="true"></a>        <span class="cf">for</span> ny in range(max(<span class="dv">0</span>, y-<span class="dv">1</span>), min(y+<span class="dv">2</span>, nrows)):</span>
<span id="cb337-35"><a href="#cb337-35" aria-hidden="true"></a>            yield (nx, ny)</span></code></pre></div>
<p>Sample usage:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true"></a></span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true"></a><span class="er"># Print a maximal-length word and its path:</span></span>
<span id="cb338-3"><a href="#cb338-3" aria-hidden="true"></a>print max(solve(), key=lambda (word, path): len(word))</span></code></pre></div>
<p><strong>Edit:</strong> Filter out words less than 3 letters long.</p>
<p><strong>Edit 2:</strong> I was curious why Kent Fredric’s Perl solution was faster; it turns out to use regular-expression matching instead of a set of characters. Doing the same in Python about doubles the speed.</p>
</section>
<section id="answer-2-score-116" class="level4">
<h4>Answer 2 (score 116)</h4>
<p>The fastest solution you’re going to get will probably involve storing your dictionary in a <a href="http://en.wikipedia.org/wiki/Trie" rel="noreferrer">trie</a>. Then, create a queue of triplets (<em>x</em>, <em>y</em>, <em>s</em>), where each element in the queue corresponds to a prefix <em>s</em> of a word which can be spelled in the grid, ending at location (<em>x</em>, <em>y</em>). Initialize the queue with <em>N</em> x <em>N</em> elements (where <em>N</em> is the size of your grid), one element for each square in the grid. Then, the algorithm proceeds as follows:</p>
<pre>
While the queue is not empty:
  Dequeue a triple (x, y, s)
  For each square (x', y') with letter c adjacent to (x, y):
    If s+c is a word, output s+c
    If s+c is a prefix of a word, insert (x', y', s+c) into the queue
</pre>
<p>If you store your dictionary in a trie, testing if <em>s</em>+<em>c</em> is a word or a prefix of a word can be done in constant time (provided you also keep some extra metadata in each queue datum, such as a pointer to the current node in the trie), so the running time of this algorithm is O(number of words that can be spelled).</p>
<p><strong>[Edit]</strong> Here’s an implementation in Python that I just coded up:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true"></a></span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true"></a><span class="er">#!/usr/bin/python</span></span>
<span id="cb339-3"><a href="#cb339-3" aria-hidden="true"></a></span>
<span id="cb339-4"><a href="#cb339-4" aria-hidden="true"></a>class TrieNode:</span>
<span id="cb339-5"><a href="#cb339-5" aria-hidden="true"></a>    def __init__(self, parent, value):</span>
<span id="cb339-6"><a href="#cb339-6" aria-hidden="true"></a>        self.parent = parent</span>
<span id="cb339-7"><a href="#cb339-7" aria-hidden="true"></a>        self.children = [None] * <span class="dv">26</span></span>
<span id="cb339-8"><a href="#cb339-8" aria-hidden="true"></a>        self.isWord = False</span>
<span id="cb339-9"><a href="#cb339-9" aria-hidden="true"></a>        <span class="cf">if</span> parent is not None:</span>
<span id="cb339-10"><a href="#cb339-10" aria-hidden="true"></a>            parent.children[ord(value) - <span class="dv">97</span>] = self</span>
<span id="cb339-11"><a href="#cb339-11" aria-hidden="true"></a></span>
<span id="cb339-12"><a href="#cb339-12" aria-hidden="true"></a>def MakeTrie(dictfile):</span>
<span id="cb339-13"><a href="#cb339-13" aria-hidden="true"></a>    dict = open(dictfile)</span>
<span id="cb339-14"><a href="#cb339-14" aria-hidden="true"></a>    root = TrieNode(None, &#39;&#39;)</span>
<span id="cb339-15"><a href="#cb339-15" aria-hidden="true"></a>    <span class="cf">for</span> word in dict:</span>
<span id="cb339-16"><a href="#cb339-16" aria-hidden="true"></a>        curNode = root</span>
<span id="cb339-17"><a href="#cb339-17" aria-hidden="true"></a>        <span class="cf">for</span> letter in word.lower():</span>
<span id="cb339-18"><a href="#cb339-18" aria-hidden="true"></a>            <span class="cf">if</span> <span class="dv">97</span> &lt;= ord(letter) &lt; <span class="dv">123</span>:</span>
<span id="cb339-19"><a href="#cb339-19" aria-hidden="true"></a>                nextNode = curNode.children[ord(letter) - <span class="dv">97</span>]</span>
<span id="cb339-20"><a href="#cb339-20" aria-hidden="true"></a>                <span class="cf">if</span> nextNode is None:</span>
<span id="cb339-21"><a href="#cb339-21" aria-hidden="true"></a>                    nextNode = TrieNode(curNode, letter)</span>
<span id="cb339-22"><a href="#cb339-22" aria-hidden="true"></a>                curNode = nextNode</span>
<span id="cb339-23"><a href="#cb339-23" aria-hidden="true"></a>        curNode.isWord = True</span>
<span id="cb339-24"><a href="#cb339-24" aria-hidden="true"></a>    <span class="cf">return</span> root</span>
<span id="cb339-25"><a href="#cb339-25" aria-hidden="true"></a></span>
<span id="cb339-26"><a href="#cb339-26" aria-hidden="true"></a>def BoggleWords(grid, dict):</span>
<span id="cb339-27"><a href="#cb339-27" aria-hidden="true"></a>    rows = len(grid)</span>
<span id="cb339-28"><a href="#cb339-28" aria-hidden="true"></a>    cols = len(grid[<span class="dv">0</span>])</span>
<span id="cb339-29"><a href="#cb339-29" aria-hidden="true"></a>    queue = []</span>
<span id="cb339-30"><a href="#cb339-30" aria-hidden="true"></a>    words = []</span>
<span id="cb339-31"><a href="#cb339-31" aria-hidden="true"></a>    <span class="cf">for</span> y in range(cols):</span>
<span id="cb339-32"><a href="#cb339-32" aria-hidden="true"></a>        <span class="cf">for</span> x in range(rows):</span>
<span id="cb339-33"><a href="#cb339-33" aria-hidden="true"></a>            c = grid[y][x]</span>
<span id="cb339-34"><a href="#cb339-34" aria-hidden="true"></a>            node = dict.children[ord(c) - <span class="dv">97</span>]</span>
<span id="cb339-35"><a href="#cb339-35" aria-hidden="true"></a>            <span class="cf">if</span> node is not None:</span>
<span id="cb339-36"><a href="#cb339-36" aria-hidden="true"></a>                queue.append((x, y, c, node))</span>
<span id="cb339-37"><a href="#cb339-37" aria-hidden="true"></a>    <span class="cf">while</span> queue:</span>
<span id="cb339-38"><a href="#cb339-38" aria-hidden="true"></a>        x, y, s, node = queue[<span class="dv">0</span>]</span>
<span id="cb339-39"><a href="#cb339-39" aria-hidden="true"></a>        del queue[<span class="dv">0</span>]</span>
<span id="cb339-40"><a href="#cb339-40" aria-hidden="true"></a>        <span class="cf">for</span> dx, dy in ((<span class="dv">1</span>, <span class="dv">0</span>), (<span class="dv">1</span>, -<span class="dv">1</span>), (<span class="dv">0</span>, -<span class="dv">1</span>), (-<span class="dv">1</span>, -<span class="dv">1</span>), (-<span class="dv">1</span>, <span class="dv">0</span>), (-<span class="dv">1</span>, <span class="dv">1</span>), (<span class="dv">0</span>, <span class="dv">1</span>), (<span class="dv">1</span>, <span class="dv">1</span>)):</span>
<span id="cb339-41"><a href="#cb339-41" aria-hidden="true"></a>            x2, y2 = x + dx, y + dy</span>
<span id="cb339-42"><a href="#cb339-42" aria-hidden="true"></a>            <span class="cf">if</span> <span class="dv">0</span> &lt;= x2 &lt; cols and <span class="dv">0</span> &lt;= y2 &lt; rows:</span>
<span id="cb339-43"><a href="#cb339-43" aria-hidden="true"></a>                s2 = s + grid[y2][x2]</span>
<span id="cb339-44"><a href="#cb339-44" aria-hidden="true"></a>                node2 = node.children[ord(grid[y2][x2]) - <span class="dv">97</span>]</span>
<span id="cb339-45"><a href="#cb339-45" aria-hidden="true"></a>                <span class="cf">if</span> node2 is not None:</span>
<span id="cb339-46"><a href="#cb339-46" aria-hidden="true"></a>                    <span class="cf">if</span> node2.isWord:</span>
<span id="cb339-47"><a href="#cb339-47" aria-hidden="true"></a>                        words.append(s2)</span>
<span id="cb339-48"><a href="#cb339-48" aria-hidden="true"></a>                    queue.append((x2, y2, s2, node2))</span>
<span id="cb339-49"><a href="#cb339-49" aria-hidden="true"></a></span>
<span id="cb339-50"><a href="#cb339-50" aria-hidden="true"></a>    <span class="cf">return</span> words</span></code></pre></div>
<p>Example usage:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true"></a>d = MakeTrie(&#39;/usr/share/dict/words&#39;)</span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true"></a>print(BoggleWords([&#39;fxie<span class="ch">&#39;,&#39;</span>amlo<span class="ch">&#39;,&#39;</span>ewbx<span class="ch">&#39;,&#39;</span>astu&#39;], d))</span></code></pre></div>
<p>Output:</p>
<blockquote>
[‘fa’, ‘xi’, ‘ie’, ‘io’, ‘el’, ‘am’, ‘ax’, ‘ae’, ‘aw’, ‘mi’, ‘ma’, ‘me’, ‘lo’, ‘li’, ‘oe’, ‘ox’, ‘em’, ‘ea’, ‘ea’, ‘es’, ‘wa’, ‘we’, ‘wa’, ‘bo’, ‘bu’, ‘as’, ‘aw’, ‘ae’, ‘st’, ‘se’, ‘sa’, ‘tu’, ‘ut’, ‘fam’, ‘fae’, ‘imi’, ‘eli’, ‘elm’, ‘elb’, ‘ami’, ‘ama’, ‘ame’, ‘aes’, ‘awl’, ‘awa’, ‘awe’, ‘awa’, ‘mix’, ‘mim’, ‘mil’, ‘mam’, ‘max’, ‘mae’, ‘maw’, ‘mew’, ‘mem’, ‘mes’, ‘lob’, ‘lox’, ‘lei’, ‘leo’, ‘lie’, ‘lim’, ‘oil’, ‘olm’, ‘ewe’, ‘eme’, ‘wax’, ‘waf’, ‘wae’, ‘waw’, ‘wem’, ‘wea’, ‘wea’, ‘was’, ‘waw’, ‘wae’, ‘bob’, ‘blo’, ‘bub’, ‘but’, ‘ast’, ‘ase’, ‘asa’, ‘awl’, ‘awa’, ‘awe’, ‘awa’, ‘aes’, ‘swa’, ‘swa’, ‘sew’, ‘sea’, ‘sea’, ‘saw’, ‘tux’, ‘tub’, ‘tut’, ‘twa’, ‘twa’, ‘tst’, ‘utu’, ‘fama’, ‘fame’, ‘ixil’, ‘imam’, ‘amli’, ‘amil’, ‘ambo’, ‘axil’, ‘axle’, ‘mimi’, ‘mima’, ‘mime’, ‘milo’, ‘mile’, ‘mewl’, ‘mese’, ‘mesa’, ‘lolo’, ‘lobo’, ‘lima’, ‘lime’, ‘limb’, ‘lile’, ‘oime’, ‘oleo’, ‘olio’, ‘oboe’, ‘obol’, ‘emim’, ‘emil’, ‘east’, ‘ease’, ‘wame’, ‘wawa’, ‘wawa’, ‘weam’, ‘west’, ‘wese’, ‘wast’, ‘wase’, ‘wawa’, ‘wawa’, ‘boil’, ‘bolo’, ‘bole’, ‘bobo’, ‘blob’, ‘bleo’, ‘bubo’, ‘asem’, ‘stub’, ‘stut’, ‘swam’, ‘semi’, ‘seme’, ‘seam’, ‘seax’, ‘sasa’, ‘sawt’, ‘tutu’, ‘tuts’, ‘twae’, ‘twas’, ‘twae’, ‘ilima’, ‘amble’, ‘axile’, ‘awest’, ‘mamie’, ‘mambo’, ‘maxim’, ‘mease’, ‘mesem’, ‘limax’, ‘limes’, ‘limbo’, ‘limbu’, ‘obole’, ‘emesa’, ‘embox’, ‘awest’, ‘swami’, ‘famble’, ‘mimble’, ‘maxima’, ‘embolo’, ‘embole’, ‘wamble’, ‘semese’, ‘semble’, ‘sawbwa’, ‘sawbwa’]
</blockquote>
<p>Notes: This program doesn’t output 1-letter words, or filter by word length at all. That’s easy to add but not really relevant to the problem. It also outputs some words multiple times if they can be spelled in multiple ways. If a given word can be spelled in many different ways (worst case: every letter in the grid is the same (e.g. ‘A’) and a word like ‘aaaaaaaaaa’ is in your dictionary), then the running time will get horribly exponential. Filtering out duplicates and sorting is trivial to due after the algorithm has finished.</p>
</section>
<section id="answer-3-score-39-1" class="level4">
<h4>Answer 3 (score 39)</h4>
<p>For a dictionary speedup, there is one general transformation/process you can do to greatly reduce the dictionary comparisons ahead of time.</p>
<p>Given that the above grid contains only 16 characters, some of them duplicate, you can greatly reduce the number of total keys in your dictionary by simply filtering out entries that have unattainable characters.</p>
<p>I thought this was the obvious optimization but seeing nobody did it I’m mentioning it.</p>
<p>It reduced me from a dictionary of 200,000 keys to only 2,000 keys simply during the input pass. This at the very least reduces memory overhead, and that’s sure to map to a speed increase somewhere as memory isn’t infinitely fast.</p>
<h5>
Perl Implementation
</h2>
<p>My implementation is a bit top-heavy because I placed importance on being able to know the exact path of every extracted string, not just the validity therein.</p>
<p>I also have a few adaptions in there that would theoretically permit a grid with holes in it to function, and grids with different sized lines ( assuming you get the input right and it lines up somehow ).</p>
<p>The early-filter is by far the most <em>significant</em> bottleneck in my application, as suspected earlier, commenting out that line bloats it from 1.5s to 7.5s.</p>
<p>Upon execution it appears to think all the single digits are on their own valid words, but I’m pretty sure thats due to how the dictionary file works.</p>
<p>Its a bit bloated, but at least I reuse <a href="http://p3rl.org/Tree::Trie" rel="nofollow noreferrer">Tree::Trie</a> from cpan</p>
<p>Some of it was inspired partially by the existing implementations, some of it I had in mind already.</p>
<p>Constructive Criticism and ways it could be improved welcome ( /me notes he never <a href="http://p3rl.org/Games::Boggle" rel="nofollow noreferrer">searched CPAN for a boggle solver</a>, but this was more fun to work out )</p>
<p><strong>updated for new criteria</strong></p>
<div class="sourceCode" id="cb341"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true"></a></span>
<span id="cb341-2"><a href="#cb341-2" aria-hidden="true"></a><span class="er">#!/usr/bin/perl </span></span>
<span id="cb341-3"><a href="#cb341-3" aria-hidden="true"></a></span>
<span id="cb341-4"><a href="#cb341-4" aria-hidden="true"></a>use strict;</span>
<span id="cb341-5"><a href="#cb341-5" aria-hidden="true"></a>use warnings;</span>
<span id="cb341-6"><a href="#cb341-6" aria-hidden="true"></a></span>
<span id="cb341-7"><a href="#cb341-7" aria-hidden="true"></a>{</span>
<span id="cb341-8"><a href="#cb341-8" aria-hidden="true"></a></span>
<span id="cb341-9"><a href="#cb341-9" aria-hidden="true"></a></span>
<span id="cb341-10"><a href="#cb341-10" aria-hidden="true"></a><span class="er"># this package manages a given path through the grid.</span></span>
<span id="cb341-11"><a href="#cb341-11" aria-hidden="true"></a></span>
<span id="cb341-12"><a href="#cb341-12" aria-hidden="true"></a><span class="er"># Its an array of matrix-nodes in-order with</span></span>
<span id="cb341-13"><a href="#cb341-13" aria-hidden="true"></a></span>
<span id="cb341-14"><a href="#cb341-14" aria-hidden="true"></a><span class="er"># Convenience functions for pretty-printing the paths</span></span>
<span id="cb341-15"><a href="#cb341-15" aria-hidden="true"></a></span>
<span id="cb341-16"><a href="#cb341-16" aria-hidden="true"></a><span class="er"># and for extending paths as new paths.</span></span>
<span id="cb341-17"><a href="#cb341-17" aria-hidden="true"></a></span>
<span id="cb341-18"><a href="#cb341-18" aria-hidden="true"></a></span>
<span id="cb341-19"><a href="#cb341-19" aria-hidden="true"></a><span class="er"># Usage:</span></span>
<span id="cb341-20"><a href="#cb341-20" aria-hidden="true"></a></span>
<span id="cb341-21"><a href="#cb341-21" aria-hidden="true"></a><span class="er"># my $p = Prefix-&gt;new(path=&gt;[ $startnode ]);</span></span>
<span id="cb341-22"><a href="#cb341-22" aria-hidden="true"></a></span>
<span id="cb341-23"><a href="#cb341-23" aria-hidden="true"></a><span class="er"># my $c = $p-&gt;child( $extensionNode );</span></span>
<span id="cb341-24"><a href="#cb341-24" aria-hidden="true"></a></span>
<span id="cb341-25"><a href="#cb341-25" aria-hidden="true"></a><span class="er"># print $c-&gt;current_word ;</span></span>
<span id="cb341-26"><a href="#cb341-26" aria-hidden="true"></a></span>
<span id="cb341-27"><a href="#cb341-27" aria-hidden="true"></a>  package Prefix;</span>
<span id="cb341-28"><a href="#cb341-28" aria-hidden="true"></a>  use Moose;</span>
<span id="cb341-29"><a href="#cb341-29" aria-hidden="true"></a></span>
<span id="cb341-30"><a href="#cb341-30" aria-hidden="true"></a>  has path =&gt; (</span>
<span id="cb341-31"><a href="#cb341-31" aria-hidden="true"></a>      isa     =&gt; &#39;ArrayRef[MatrixNode]&#39;,</span>
<span id="cb341-32"><a href="#cb341-32" aria-hidden="true"></a>      is      =&gt; &#39;rw&#39;,</span>
<span id="cb341-33"><a href="#cb341-33" aria-hidden="true"></a>      <span class="cf">default</span> =&gt; sub { [] },</span>
<span id="cb341-34"><a href="#cb341-34" aria-hidden="true"></a>  );</span>
<span id="cb341-35"><a href="#cb341-35" aria-hidden="true"></a>  has current_word =&gt; (</span>
<span id="cb341-36"><a href="#cb341-36" aria-hidden="true"></a>      isa        =&gt; &#39;Str&#39;,</span>
<span id="cb341-37"><a href="#cb341-37" aria-hidden="true"></a>      is         =&gt; &#39;rw&#39;,</span>
<span id="cb341-38"><a href="#cb341-38" aria-hidden="true"></a>      lazy_build =&gt; <span class="dv">1</span>,</span>
<span id="cb341-39"><a href="#cb341-39" aria-hidden="true"></a>  );</span>
<span id="cb341-40"><a href="#cb341-40" aria-hidden="true"></a></span>
<span id="cb341-41"><a href="#cb341-41" aria-hidden="true"></a></span>
<span id="cb341-42"><a href="#cb341-42" aria-hidden="true"></a><span class="er"># Create a clone of this object</span></span>
<span id="cb341-43"><a href="#cb341-43" aria-hidden="true"></a></span>
<span id="cb341-44"><a href="#cb341-44" aria-hidden="true"></a><span class="er"># with a longer path</span></span>
<span id="cb341-45"><a href="#cb341-45" aria-hidden="true"></a></span>
<span id="cb341-46"><a href="#cb341-46" aria-hidden="true"></a></span>
<span id="cb341-47"><a href="#cb341-47" aria-hidden="true"></a><span class="er"># $o-&gt;child( $successive-node-on-graph );</span></span>
<span id="cb341-48"><a href="#cb341-48" aria-hidden="true"></a></span>
<span id="cb341-49"><a href="#cb341-49" aria-hidden="true"></a>  sub child {</span>
<span id="cb341-50"><a href="#cb341-50" aria-hidden="true"></a>      my $self    = shift;</span>
<span id="cb341-51"><a href="#cb341-51" aria-hidden="true"></a>      my $newNode = shift;</span>
<span id="cb341-52"><a href="#cb341-52" aria-hidden="true"></a>      my $f       = Prefix-&gt;new();</span>
<span id="cb341-53"><a href="#cb341-53" aria-hidden="true"></a></span>
<span id="cb341-54"><a href="#cb341-54" aria-hidden="true"></a></span>
<span id="cb341-55"><a href="#cb341-55" aria-hidden="true"></a><span class="er"># Have to do this manually or other recorded paths get modified</span></span>
<span id="cb341-56"><a href="#cb341-56" aria-hidden="true"></a>      push @{ $f-&gt;{path} }, @{ $self-&gt;{path} }, $newNode;</span>
<span id="cb341-57"><a href="#cb341-57" aria-hidden="true"></a>      <span class="cf">return</span> $f;</span>
<span id="cb341-58"><a href="#cb341-58" aria-hidden="true"></a>  }</span>
<span id="cb341-59"><a href="#cb341-59" aria-hidden="true"></a></span>
<span id="cb341-60"><a href="#cb341-60" aria-hidden="true"></a></span>
<span id="cb341-61"><a href="#cb341-61" aria-hidden="true"></a><span class="er"># Traverses $o-&gt;path left-to-right to get the string it represents.</span></span>
<span id="cb341-62"><a href="#cb341-62" aria-hidden="true"></a></span>
<span id="cb341-63"><a href="#cb341-63" aria-hidden="true"></a>  sub _build_current_word {</span>
<span id="cb341-64"><a href="#cb341-64" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-65"><a href="#cb341-65" aria-hidden="true"></a>      <span class="cf">return</span> join q{}, map { $_-&gt;{value} } @{ $self-&gt;{path} };</span>
<span id="cb341-66"><a href="#cb341-66" aria-hidden="true"></a>  }</span>
<span id="cb341-67"><a href="#cb341-67" aria-hidden="true"></a></span>
<span id="cb341-68"><a href="#cb341-68" aria-hidden="true"></a></span>
<span id="cb341-69"><a href="#cb341-69" aria-hidden="true"></a><span class="er"># Returns  the rightmost node on this path</span></span>
<span id="cb341-70"><a href="#cb341-70" aria-hidden="true"></a></span>
<span id="cb341-71"><a href="#cb341-71" aria-hidden="true"></a>  sub tail {</span>
<span id="cb341-72"><a href="#cb341-72" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-73"><a href="#cb341-73" aria-hidden="true"></a>      <span class="cf">return</span> $self-&gt;{path}-&gt;[-<span class="dv">1</span>];</span>
<span id="cb341-74"><a href="#cb341-74" aria-hidden="true"></a>  }</span>
<span id="cb341-75"><a href="#cb341-75" aria-hidden="true"></a></span>
<span id="cb341-76"><a href="#cb341-76" aria-hidden="true"></a></span>
<span id="cb341-77"><a href="#cb341-77" aria-hidden="true"></a><span class="er"># pretty-format $o-&gt;path</span></span>
<span id="cb341-78"><a href="#cb341-78" aria-hidden="true"></a></span>
<span id="cb341-79"><a href="#cb341-79" aria-hidden="true"></a>  sub pp_path {</span>
<span id="cb341-80"><a href="#cb341-80" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-81"><a href="#cb341-81" aria-hidden="true"></a>      my @path =</span>
<span id="cb341-82"><a href="#cb341-82" aria-hidden="true"></a>        map { <span class="ch">&#39;[&#39;</span> . $_-&gt;{x_position} . <span class="ch">&#39;,&#39;</span> . $_-&gt;{y_position} . <span class="ch">&#39;]&#39;</span> }</span>
<span id="cb341-83"><a href="#cb341-83" aria-hidden="true"></a>        @{ $self-&gt;{path} };</span>
<span id="cb341-84"><a href="#cb341-84" aria-hidden="true"></a>      <span class="cf">return</span> <span class="st">&quot;[&quot;</span> . join( <span class="st">&quot;,&quot;</span>, @path ) . <span class="st">&quot;]&quot;</span>;</span>
<span id="cb341-85"><a href="#cb341-85" aria-hidden="true"></a>  }</span>
<span id="cb341-86"><a href="#cb341-86" aria-hidden="true"></a></span>
<span id="cb341-87"><a href="#cb341-87" aria-hidden="true"></a></span>
<span id="cb341-88"><a href="#cb341-88" aria-hidden="true"></a><span class="er"># pretty-format $o</span></span>
<span id="cb341-89"><a href="#cb341-89" aria-hidden="true"></a>  sub pp {</span>
<span id="cb341-90"><a href="#cb341-90" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-91"><a href="#cb341-91" aria-hidden="true"></a>      <span class="cf">return</span> $self-&gt;current_word . &#39; =&gt; &#39; . $self-&gt;pp_path;</span>
<span id="cb341-92"><a href="#cb341-92" aria-hidden="true"></a>  }</span>
<span id="cb341-93"><a href="#cb341-93" aria-hidden="true"></a></span>
<span id="cb341-94"><a href="#cb341-94" aria-hidden="true"></a>  __PACKAGE__-&gt;meta-&gt;make_immutable;</span>
<span id="cb341-95"><a href="#cb341-95" aria-hidden="true"></a>}</span>
<span id="cb341-96"><a href="#cb341-96" aria-hidden="true"></a></span>
<span id="cb341-97"><a href="#cb341-97" aria-hidden="true"></a>{</span>
<span id="cb341-98"><a href="#cb341-98" aria-hidden="true"></a></span>
<span id="cb341-99"><a href="#cb341-99" aria-hidden="true"></a></span>
<span id="cb341-100"><a href="#cb341-100" aria-hidden="true"></a><span class="er"># Basic package for tracking node data</span></span>
<span id="cb341-101"><a href="#cb341-101" aria-hidden="true"></a></span>
<span id="cb341-102"><a href="#cb341-102" aria-hidden="true"></a><span class="er"># without having to look on the grid.</span></span>
<span id="cb341-103"><a href="#cb341-103" aria-hidden="true"></a></span>
<span id="cb341-104"><a href="#cb341-104" aria-hidden="true"></a><span class="er"># I could have just used an array or a hash, but that got ugly.</span></span>
<span id="cb341-105"><a href="#cb341-105" aria-hidden="true"></a></span>
<span id="cb341-106"><a href="#cb341-106" aria-hidden="true"></a></span>
<span id="cb341-107"><a href="#cb341-107" aria-hidden="true"></a><span class="er"># Once the matrix is up and running it doesn&#39;t really care so much about rows/columns,</span></span>
<span id="cb341-108"><a href="#cb341-108" aria-hidden="true"></a></span>
<span id="cb341-109"><a href="#cb341-109" aria-hidden="true"></a><span class="er"># Its just a sea of points and each point has adjacent points.</span></span>
<span id="cb341-110"><a href="#cb341-110" aria-hidden="true"></a></span>
<span id="cb341-111"><a href="#cb341-111" aria-hidden="true"></a><span class="er"># Relative positioning is only really useful to map it back to userspace</span></span>
<span id="cb341-112"><a href="#cb341-112" aria-hidden="true"></a></span>
<span id="cb341-113"><a href="#cb341-113" aria-hidden="true"></a>  package MatrixNode;</span>
<span id="cb341-114"><a href="#cb341-114" aria-hidden="true"></a>  use Moose;</span>
<span id="cb341-115"><a href="#cb341-115" aria-hidden="true"></a></span>
<span id="cb341-116"><a href="#cb341-116" aria-hidden="true"></a>  has x_position =&gt; ( isa =&gt; &#39;Int&#39;, is =&gt; &#39;rw&#39;, required =&gt; <span class="dv">1</span> );</span>
<span id="cb341-117"><a href="#cb341-117" aria-hidden="true"></a>  has y_position =&gt; ( isa =&gt; &#39;Int&#39;, is =&gt; &#39;rw&#39;, required =&gt; <span class="dv">1</span> );</span>
<span id="cb341-118"><a href="#cb341-118" aria-hidden="true"></a>  has value      =&gt; ( isa =&gt; &#39;Str&#39;, is =&gt; &#39;rw&#39;, required =&gt; <span class="dv">1</span> );</span>
<span id="cb341-119"><a href="#cb341-119" aria-hidden="true"></a>  has siblings   =&gt; (</span>
<span id="cb341-120"><a href="#cb341-120" aria-hidden="true"></a>      isa     =&gt; &#39;ArrayRef[MatrixNode]&#39;,</span>
<span id="cb341-121"><a href="#cb341-121" aria-hidden="true"></a>      is      =&gt; &#39;rw&#39;,</span>
<span id="cb341-122"><a href="#cb341-122" aria-hidden="true"></a>      <span class="cf">default</span> =&gt; sub { [] }</span>
<span id="cb341-123"><a href="#cb341-123" aria-hidden="true"></a>  );</span>
<span id="cb341-124"><a href="#cb341-124" aria-hidden="true"></a></span>
<span id="cb341-125"><a href="#cb341-125" aria-hidden="true"></a></span>
<span id="cb341-126"><a href="#cb341-126" aria-hidden="true"></a><span class="er"># Its not implicitly uni-directional joins. It would be more effient in therory</span></span>
<span id="cb341-127"><a href="#cb341-127" aria-hidden="true"></a></span>
<span id="cb341-128"><a href="#cb341-128" aria-hidden="true"></a><span class="er"># to make the link go both ways at the same time, but thats too hard to program around.</span></span>
<span id="cb341-129"><a href="#cb341-129" aria-hidden="true"></a></span>
<span id="cb341-130"><a href="#cb341-130" aria-hidden="true"></a><span class="er"># and besides, this isn&#39;t slow enough to bother caring about.</span></span>
<span id="cb341-131"><a href="#cb341-131" aria-hidden="true"></a></span>
<span id="cb341-132"><a href="#cb341-132" aria-hidden="true"></a>  sub add_sibling {</span>
<span id="cb341-133"><a href="#cb341-133" aria-hidden="true"></a>      my $self    = shift;</span>
<span id="cb341-134"><a href="#cb341-134" aria-hidden="true"></a>      my $sibling = shift;</span>
<span id="cb341-135"><a href="#cb341-135" aria-hidden="true"></a>      push @{ $self-&gt;siblings }, $sibling;</span>
<span id="cb341-136"><a href="#cb341-136" aria-hidden="true"></a>  }</span>
<span id="cb341-137"><a href="#cb341-137" aria-hidden="true"></a></span>
<span id="cb341-138"><a href="#cb341-138" aria-hidden="true"></a></span>
<span id="cb341-139"><a href="#cb341-139" aria-hidden="true"></a><span class="er"># Convenience method to derive a path starting at this node</span></span>
<span id="cb341-140"><a href="#cb341-140" aria-hidden="true"></a></span>
<span id="cb341-141"><a href="#cb341-141" aria-hidden="true"></a>  sub to_path {</span>
<span id="cb341-142"><a href="#cb341-142" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-143"><a href="#cb341-143" aria-hidden="true"></a>      <span class="cf">return</span> Prefix-&gt;new( path =&gt; [$self] );</span>
<span id="cb341-144"><a href="#cb341-144" aria-hidden="true"></a>  }</span>
<span id="cb341-145"><a href="#cb341-145" aria-hidden="true"></a>  __PACKAGE__-&gt;meta-&gt;make_immutable;</span>
<span id="cb341-146"><a href="#cb341-146" aria-hidden="true"></a></span>
<span id="cb341-147"><a href="#cb341-147" aria-hidden="true"></a>}</span>
<span id="cb341-148"><a href="#cb341-148" aria-hidden="true"></a></span>
<span id="cb341-149"><a href="#cb341-149" aria-hidden="true"></a>{</span>
<span id="cb341-150"><a href="#cb341-150" aria-hidden="true"></a></span>
<span id="cb341-151"><a href="#cb341-151" aria-hidden="true"></a>  package Matrix;</span>
<span id="cb341-152"><a href="#cb341-152" aria-hidden="true"></a>  use Moose;</span>
<span id="cb341-153"><a href="#cb341-153" aria-hidden="true"></a></span>
<span id="cb341-154"><a href="#cb341-154" aria-hidden="true"></a>  has rows =&gt; (</span>
<span id="cb341-155"><a href="#cb341-155" aria-hidden="true"></a>      isa     =&gt; &#39;ArrayRef&#39;,</span>
<span id="cb341-156"><a href="#cb341-156" aria-hidden="true"></a>      is      =&gt; &#39;rw&#39;,</span>
<span id="cb341-157"><a href="#cb341-157" aria-hidden="true"></a>      <span class="cf">default</span> =&gt; sub { [] },</span>
<span id="cb341-158"><a href="#cb341-158" aria-hidden="true"></a>  );</span>
<span id="cb341-159"><a href="#cb341-159" aria-hidden="true"></a></span>
<span id="cb341-160"><a href="#cb341-160" aria-hidden="true"></a>  has regex =&gt; (</span>
<span id="cb341-161"><a href="#cb341-161" aria-hidden="true"></a>      isa        =&gt; &#39;Regexp&#39;,</span>
<span id="cb341-162"><a href="#cb341-162" aria-hidden="true"></a>      is         =&gt; &#39;rw&#39;,</span>
<span id="cb341-163"><a href="#cb341-163" aria-hidden="true"></a>      lazy_build =&gt; <span class="dv">1</span>,</span>
<span id="cb341-164"><a href="#cb341-164" aria-hidden="true"></a>  );</span>
<span id="cb341-165"><a href="#cb341-165" aria-hidden="true"></a></span>
<span id="cb341-166"><a href="#cb341-166" aria-hidden="true"></a>  has cells =&gt; (</span>
<span id="cb341-167"><a href="#cb341-167" aria-hidden="true"></a>      isa        =&gt; &#39;ArrayRef&#39;,</span>
<span id="cb341-168"><a href="#cb341-168" aria-hidden="true"></a>      is         =&gt; &#39;rw&#39;,</span>
<span id="cb341-169"><a href="#cb341-169" aria-hidden="true"></a>      lazy_build =&gt; <span class="dv">1</span>,</span>
<span id="cb341-170"><a href="#cb341-170" aria-hidden="true"></a>  );</span>
<span id="cb341-171"><a href="#cb341-171" aria-hidden="true"></a></span>
<span id="cb341-172"><a href="#cb341-172" aria-hidden="true"></a>  sub add_row {</span>
<span id="cb341-173"><a href="#cb341-173" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-174"><a href="#cb341-174" aria-hidden="true"></a>      push @{ $self-&gt;rows }, [@_];</span>
<span id="cb341-175"><a href="#cb341-175" aria-hidden="true"></a>  }</span>
<span id="cb341-176"><a href="#cb341-176" aria-hidden="true"></a></span>
<span id="cb341-177"><a href="#cb341-177" aria-hidden="true"></a></span>
<span id="cb341-178"><a href="#cb341-178" aria-hidden="true"></a><span class="er"># Most of these functions from here down are just builder functions,</span></span>
<span id="cb341-179"><a href="#cb341-179" aria-hidden="true"></a></span>
<span id="cb341-180"><a href="#cb341-180" aria-hidden="true"></a><span class="er"># or utilities to help build things.</span></span>
<span id="cb341-181"><a href="#cb341-181" aria-hidden="true"></a></span>
<span id="cb341-182"><a href="#cb341-182" aria-hidden="true"></a><span class="er"># Some just broken out to make it easier for me to process.</span></span>
<span id="cb341-183"><a href="#cb341-183" aria-hidden="true"></a></span>
<span id="cb341-184"><a href="#cb341-184" aria-hidden="true"></a><span class="er"># All thats really useful is add_row</span></span>
<span id="cb341-185"><a href="#cb341-185" aria-hidden="true"></a></span>
<span id="cb341-186"><a href="#cb341-186" aria-hidden="true"></a><span class="er"># The rest will generally be computed, stored, and ready to go</span></span>
<span id="cb341-187"><a href="#cb341-187" aria-hidden="true"></a></span>
<span id="cb341-188"><a href="#cb341-188" aria-hidden="true"></a><span class="er"># from -&gt;cells by the time either -&gt;cells or -&gt;regex are called.</span></span>
<span id="cb341-189"><a href="#cb341-189" aria-hidden="true"></a></span>
<span id="cb341-190"><a href="#cb341-190" aria-hidden="true"></a></span>
<span id="cb341-191"><a href="#cb341-191" aria-hidden="true"></a><span class="er"># traverse all cells and make a regex that covers them.</span></span>
<span id="cb341-192"><a href="#cb341-192" aria-hidden="true"></a>  sub _build_regex {</span>
<span id="cb341-193"><a href="#cb341-193" aria-hidden="true"></a>      my $self  = shift;</span>
<span id="cb341-194"><a href="#cb341-194" aria-hidden="true"></a>      my $chars = q{};</span>
<span id="cb341-195"><a href="#cb341-195" aria-hidden="true"></a>      <span class="cf">for</span> my $cell ( @{ $self-&gt;cells } ) {</span>
<span id="cb341-196"><a href="#cb341-196" aria-hidden="true"></a>          $chars .= $cell-&gt;value();</span>
<span id="cb341-197"><a href="#cb341-197" aria-hidden="true"></a>      }</span>
<span id="cb341-198"><a href="#cb341-198" aria-hidden="true"></a>      $chars = <span class="st">&quot;[^$chars]&quot;</span>;</span>
<span id="cb341-199"><a href="#cb341-199" aria-hidden="true"></a>      <span class="cf">return</span> qr/$chars/i;</span>
<span id="cb341-200"><a href="#cb341-200" aria-hidden="true"></a>  }</span>
<span id="cb341-201"><a href="#cb341-201" aria-hidden="true"></a></span>
<span id="cb341-202"><a href="#cb341-202" aria-hidden="true"></a></span>
<span id="cb341-203"><a href="#cb341-203" aria-hidden="true"></a><span class="er"># convert a plain cell ( ie: [x][y] = 0 )</span></span>
<span id="cb341-204"><a href="#cb341-204" aria-hidden="true"></a></span>
<span id="cb341-205"><a href="#cb341-205" aria-hidden="true"></a><span class="er"># to an intelligent cell ie: [x][y] = object( x, y )</span></span>
<span id="cb341-206"><a href="#cb341-206" aria-hidden="true"></a></span>
<span id="cb341-207"><a href="#cb341-207" aria-hidden="true"></a><span class="er"># we only really keep them in this format temporarily</span></span>
<span id="cb341-208"><a href="#cb341-208" aria-hidden="true"></a></span>
<span id="cb341-209"><a href="#cb341-209" aria-hidden="true"></a><span class="er"># so we can go through and tie in neighbouring information.</span></span>
<span id="cb341-210"><a href="#cb341-210" aria-hidden="true"></a></span>
<span id="cb341-211"><a href="#cb341-211" aria-hidden="true"></a><span class="er"># after the neigbouring is done, the grid should be considered inoperative.</span></span>
<span id="cb341-212"><a href="#cb341-212" aria-hidden="true"></a></span>
<span id="cb341-213"><a href="#cb341-213" aria-hidden="true"></a>  sub _convert {</span>
<span id="cb341-214"><a href="#cb341-214" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-215"><a href="#cb341-215" aria-hidden="true"></a>      my $x    = shift;</span>
<span id="cb341-216"><a href="#cb341-216" aria-hidden="true"></a>      my $y    = shift;</span>
<span id="cb341-217"><a href="#cb341-217" aria-hidden="true"></a>      my $v    = $self-&gt;_read( $x, $y );</span>
<span id="cb341-218"><a href="#cb341-218" aria-hidden="true"></a>      my $n    = MatrixNode-&gt;new(</span>
<span id="cb341-219"><a href="#cb341-219" aria-hidden="true"></a>          x_position =&gt; $x,</span>
<span id="cb341-220"><a href="#cb341-220" aria-hidden="true"></a>          y_position =&gt; $y,</span>
<span id="cb341-221"><a href="#cb341-221" aria-hidden="true"></a>          value      =&gt; $v,</span>
<span id="cb341-222"><a href="#cb341-222" aria-hidden="true"></a>      );</span>
<span id="cb341-223"><a href="#cb341-223" aria-hidden="true"></a>      $self-&gt;_write( $x, $y, $n );</span>
<span id="cb341-224"><a href="#cb341-224" aria-hidden="true"></a>      <span class="cf">return</span> $n;</span>
<span id="cb341-225"><a href="#cb341-225" aria-hidden="true"></a>  }</span>
<span id="cb341-226"><a href="#cb341-226" aria-hidden="true"></a></span>
<span id="cb341-227"><a href="#cb341-227" aria-hidden="true"></a></span>
<span id="cb341-228"><a href="#cb341-228" aria-hidden="true"></a><span class="er"># go through the rows/collums presently available and freeze them into objects.</span></span>
<span id="cb341-229"><a href="#cb341-229" aria-hidden="true"></a></span>
<span id="cb341-230"><a href="#cb341-230" aria-hidden="true"></a>  sub _build_cells {</span>
<span id="cb341-231"><a href="#cb341-231" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-232"><a href="#cb341-232" aria-hidden="true"></a>      my @out  = ();</span>
<span id="cb341-233"><a href="#cb341-233" aria-hidden="true"></a>      my @rows = @{ $self-&gt;{rows} };</span>
<span id="cb341-234"><a href="#cb341-234" aria-hidden="true"></a>      <span class="cf">for</span> my $x ( <span class="dv">0</span> .. $</span>
<span id="cb341-235"><a href="#cb341-235" aria-hidden="true"></a><span class="er">#rows ) {</span></span>
<span id="cb341-236"><a href="#cb341-236" aria-hidden="true"></a>          next unless defined $self-&gt;{rows}-&gt;[$x];</span>
<span id="cb341-237"><a href="#cb341-237" aria-hidden="true"></a>          my @col = @{ $self-&gt;{rows}-&gt;[$x] };</span>
<span id="cb341-238"><a href="#cb341-238" aria-hidden="true"></a>          <span class="cf">for</span> my $y ( <span class="dv">0</span> .. $</span>
<span id="cb341-239"><a href="#cb341-239" aria-hidden="true"></a><span class="er">#col ) {</span></span>
<span id="cb341-240"><a href="#cb341-240" aria-hidden="true"></a>              next unless defined $self-&gt;{rows}-&gt;[$x]-&gt;[$y];</span>
<span id="cb341-241"><a href="#cb341-241" aria-hidden="true"></a>              push @out, $self-&gt;_convert( $x, $y );</span>
<span id="cb341-242"><a href="#cb341-242" aria-hidden="true"></a>          }</span>
<span id="cb341-243"><a href="#cb341-243" aria-hidden="true"></a>      }</span>
<span id="cb341-244"><a href="#cb341-244" aria-hidden="true"></a>      <span class="cf">for</span> my $c (@out) {</span>
<span id="cb341-245"><a href="#cb341-245" aria-hidden="true"></a>          <span class="cf">for</span> my $n ( $self-&gt;_neighbours( $c-&gt;x_position, $c-&gt;y_position ) ) {</span>
<span id="cb341-246"><a href="#cb341-246" aria-hidden="true"></a>              $c-&gt;add_sibling( $self-&gt;{rows}-&gt;[ $n-&gt;[<span class="dv">0</span>] ]-&gt;[ $n-&gt;[<span class="dv">1</span>] ] );</span>
<span id="cb341-247"><a href="#cb341-247" aria-hidden="true"></a>          }</span>
<span id="cb341-248"><a href="#cb341-248" aria-hidden="true"></a>      }</span>
<span id="cb341-249"><a href="#cb341-249" aria-hidden="true"></a>      <span class="cf">return</span> \@out;</span>
<span id="cb341-250"><a href="#cb341-250" aria-hidden="true"></a>  }</span>
<span id="cb341-251"><a href="#cb341-251" aria-hidden="true"></a></span>
<span id="cb341-252"><a href="#cb341-252" aria-hidden="true"></a></span>
<span id="cb341-253"><a href="#cb341-253" aria-hidden="true"></a><span class="er"># given x,y , return array of points that refer to valid neighbours.</span></span>
<span id="cb341-254"><a href="#cb341-254" aria-hidden="true"></a>  sub _neighbours {</span>
<span id="cb341-255"><a href="#cb341-255" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-256"><a href="#cb341-256" aria-hidden="true"></a>      my $x    = shift;</span>
<span id="cb341-257"><a href="#cb341-257" aria-hidden="true"></a>      my $y    = shift;</span>
<span id="cb341-258"><a href="#cb341-258" aria-hidden="true"></a>      my @out  = ();</span>
<span id="cb341-259"><a href="#cb341-259" aria-hidden="true"></a>      <span class="cf">for</span> my $sx ( -<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span> ) {</span>
<span id="cb341-260"><a href="#cb341-260" aria-hidden="true"></a>          next <span class="cf">if</span> $sx + $x &lt; <span class="dv">0</span>;</span>
<span id="cb341-261"><a href="#cb341-261" aria-hidden="true"></a>          next <span class="cf">if</span> not defined $self-&gt;{rows}-&gt;[ $sx + $x ];</span>
<span id="cb341-262"><a href="#cb341-262" aria-hidden="true"></a>          <span class="cf">for</span> my $sy ( -<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span> ) {</span>
<span id="cb341-263"><a href="#cb341-263" aria-hidden="true"></a>              next <span class="cf">if</span> $sx == <span class="dv">0</span> &amp;&amp; $sy == <span class="dv">0</span>;</span>
<span id="cb341-264"><a href="#cb341-264" aria-hidden="true"></a>              next <span class="cf">if</span> $sy + $y &lt; <span class="dv">0</span>;</span>
<span id="cb341-265"><a href="#cb341-265" aria-hidden="true"></a>              next <span class="cf">if</span> not defined $self-&gt;{rows}-&gt;[ $sx + $x ]-&gt;[ $sy + $y ];</span>
<span id="cb341-266"><a href="#cb341-266" aria-hidden="true"></a>              push @out, [ $sx + $x, $sy + $y ];</span>
<span id="cb341-267"><a href="#cb341-267" aria-hidden="true"></a>          }</span>
<span id="cb341-268"><a href="#cb341-268" aria-hidden="true"></a>      }</span>
<span id="cb341-269"><a href="#cb341-269" aria-hidden="true"></a>      <span class="cf">return</span> @out;</span>
<span id="cb341-270"><a href="#cb341-270" aria-hidden="true"></a>  }</span>
<span id="cb341-271"><a href="#cb341-271" aria-hidden="true"></a></span>
<span id="cb341-272"><a href="#cb341-272" aria-hidden="true"></a>  sub _has_row {</span>
<span id="cb341-273"><a href="#cb341-273" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-274"><a href="#cb341-274" aria-hidden="true"></a>      my $x    = shift;</span>
<span id="cb341-275"><a href="#cb341-275" aria-hidden="true"></a>      <span class="cf">return</span> defined $self-&gt;{rows}-&gt;[$x];</span>
<span id="cb341-276"><a href="#cb341-276" aria-hidden="true"></a>  }</span>
<span id="cb341-277"><a href="#cb341-277" aria-hidden="true"></a></span>
<span id="cb341-278"><a href="#cb341-278" aria-hidden="true"></a>  sub _has_cell {</span>
<span id="cb341-279"><a href="#cb341-279" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-280"><a href="#cb341-280" aria-hidden="true"></a>      my $x    = shift;</span>
<span id="cb341-281"><a href="#cb341-281" aria-hidden="true"></a>      my $y    = shift;</span>
<span id="cb341-282"><a href="#cb341-282" aria-hidden="true"></a>      <span class="cf">return</span> defined $self-&gt;{rows}-&gt;[$x]-&gt;[$y];</span>
<span id="cb341-283"><a href="#cb341-283" aria-hidden="true"></a>  }</span>
<span id="cb341-284"><a href="#cb341-284" aria-hidden="true"></a></span>
<span id="cb341-285"><a href="#cb341-285" aria-hidden="true"></a>  sub _read {</span>
<span id="cb341-286"><a href="#cb341-286" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-287"><a href="#cb341-287" aria-hidden="true"></a>      my $x    = shift;</span>
<span id="cb341-288"><a href="#cb341-288" aria-hidden="true"></a>      my $y    = shift;</span>
<span id="cb341-289"><a href="#cb341-289" aria-hidden="true"></a>      <span class="cf">return</span> $self-&gt;{rows}-&gt;[$x]-&gt;[$y];</span>
<span id="cb341-290"><a href="#cb341-290" aria-hidden="true"></a>  }</span>
<span id="cb341-291"><a href="#cb341-291" aria-hidden="true"></a></span>
<span id="cb341-292"><a href="#cb341-292" aria-hidden="true"></a>  sub _write {</span>
<span id="cb341-293"><a href="#cb341-293" aria-hidden="true"></a>      my $self = shift;</span>
<span id="cb341-294"><a href="#cb341-294" aria-hidden="true"></a>      my $x    = shift;</span>
<span id="cb341-295"><a href="#cb341-295" aria-hidden="true"></a>      my $y    = shift;</span>
<span id="cb341-296"><a href="#cb341-296" aria-hidden="true"></a>      my $v    = shift;</span>
<span id="cb341-297"><a href="#cb341-297" aria-hidden="true"></a>      $self-&gt;{rows}-&gt;[$x]-&gt;[$y] = $v;</span>
<span id="cb341-298"><a href="#cb341-298" aria-hidden="true"></a>      <span class="cf">return</span> $v;</span>
<span id="cb341-299"><a href="#cb341-299" aria-hidden="true"></a>  }</span>
<span id="cb341-300"><a href="#cb341-300" aria-hidden="true"></a></span>
<span id="cb341-301"><a href="#cb341-301" aria-hidden="true"></a>  __PACKAGE__-&gt;meta-&gt;make_immutable;</span>
<span id="cb341-302"><a href="#cb341-302" aria-hidden="true"></a>}</span>
<span id="cb341-303"><a href="#cb341-303" aria-hidden="true"></a></span>
<span id="cb341-304"><a href="#cb341-304" aria-hidden="true"></a>use Tree::Trie;</span>
<span id="cb341-305"><a href="#cb341-305" aria-hidden="true"></a></span>
<span id="cb341-306"><a href="#cb341-306" aria-hidden="true"></a>sub readDict {</span>
<span id="cb341-307"><a href="#cb341-307" aria-hidden="true"></a>  my $fn = shift;</span>
<span id="cb341-308"><a href="#cb341-308" aria-hidden="true"></a>  my $re = shift;</span>
<span id="cb341-309"><a href="#cb341-309" aria-hidden="true"></a>  my $d  = Tree::Trie-&gt;new();</span>
<span id="cb341-310"><a href="#cb341-310" aria-hidden="true"></a></span>
<span id="cb341-311"><a href="#cb341-311" aria-hidden="true"></a></span>
<span id="cb341-312"><a href="#cb341-312" aria-hidden="true"></a><span class="er"># Dictionary Loading</span></span>
<span id="cb341-313"><a href="#cb341-313" aria-hidden="true"></a>  open my $fh, <span class="ch">&#39;&lt;&#39;</span>, $fn;</span>
<span id="cb341-314"><a href="#cb341-314" aria-hidden="true"></a>  <span class="cf">while</span> ( my $line = &lt;$fh&gt; ) {</span>
<span id="cb341-315"><a href="#cb341-315" aria-hidden="true"></a>      chomp($line);</span>
<span id="cb341-316"><a href="#cb341-316" aria-hidden="true"></a></span>
<span id="cb341-317"><a href="#cb341-317" aria-hidden="true"></a></span>
<span id="cb341-318"><a href="#cb341-318" aria-hidden="true"></a><span class="er"># Commenting the next line makes it go from 1.5 seconds to 7.5 seconds. EPIC.</span></span>
<span id="cb341-319"><a href="#cb341-319" aria-hidden="true"></a>      next <span class="cf">if</span> $line =~ $re;</span>
<span id="cb341-320"><a href="#cb341-320" aria-hidden="true"></a><span class="er"># Early Filter</span></span>
<span id="cb341-321"><a href="#cb341-321" aria-hidden="true"></a>      $d-&gt;add( uc($line) );</span>
<span id="cb341-322"><a href="#cb341-322" aria-hidden="true"></a>  }</span>
<span id="cb341-323"><a href="#cb341-323" aria-hidden="true"></a>  <span class="cf">return</span> $d;</span>
<span id="cb341-324"><a href="#cb341-324" aria-hidden="true"></a>}</span>
<span id="cb341-325"><a href="#cb341-325" aria-hidden="true"></a></span>
<span id="cb341-326"><a href="#cb341-326" aria-hidden="true"></a>sub traverseGraph {</span>
<span id="cb341-327"><a href="#cb341-327" aria-hidden="true"></a>  my $d     = shift;</span>
<span id="cb341-328"><a href="#cb341-328" aria-hidden="true"></a>  my $m     = shift;</span>
<span id="cb341-329"><a href="#cb341-329" aria-hidden="true"></a>  my $min   = shift;</span>
<span id="cb341-330"><a href="#cb341-330" aria-hidden="true"></a>  my $max   = shift;</span>
<span id="cb341-331"><a href="#cb341-331" aria-hidden="true"></a>  my @words = ();</span>
<span id="cb341-332"><a href="#cb341-332" aria-hidden="true"></a></span>
<span id="cb341-333"><a href="#cb341-333" aria-hidden="true"></a></span>
<span id="cb341-334"><a href="#cb341-334" aria-hidden="true"></a><span class="er"># Inject all grid nodes into the processing queue.</span></span>
<span id="cb341-335"><a href="#cb341-335" aria-hidden="true"></a></span>
<span id="cb341-336"><a href="#cb341-336" aria-hidden="true"></a>  my @queue =</span>
<span id="cb341-337"><a href="#cb341-337" aria-hidden="true"></a>    grep { $d-&gt;lookup( $_-&gt;current_word ) }</span>
<span id="cb341-338"><a href="#cb341-338" aria-hidden="true"></a>    map  { $_-&gt;to_path } @{ $m-&gt;cells };</span>
<span id="cb341-339"><a href="#cb341-339" aria-hidden="true"></a></span>
<span id="cb341-340"><a href="#cb341-340" aria-hidden="true"></a>  <span class="cf">while</span> (@queue) {</span>
<span id="cb341-341"><a href="#cb341-341" aria-hidden="true"></a>      my $item = shift @queue;</span>
<span id="cb341-342"><a href="#cb341-342" aria-hidden="true"></a></span>
<span id="cb341-343"><a href="#cb341-343" aria-hidden="true"></a></span>
<span id="cb341-344"><a href="#cb341-344" aria-hidden="true"></a><span class="er"># put the dictionary into &quot;exact match&quot; mode.</span></span>
<span id="cb341-345"><a href="#cb341-345" aria-hidden="true"></a></span>
<span id="cb341-346"><a href="#cb341-346" aria-hidden="true"></a>      $d-&gt;deepsearch(&#39;exact&#39;);</span>
<span id="cb341-347"><a href="#cb341-347" aria-hidden="true"></a></span>
<span id="cb341-348"><a href="#cb341-348" aria-hidden="true"></a>      my $cword = $item-&gt;current_word;</span>
<span id="cb341-349"><a href="#cb341-349" aria-hidden="true"></a>      my $l     = length($cword);</span>
<span id="cb341-350"><a href="#cb341-350" aria-hidden="true"></a></span>
<span id="cb341-351"><a href="#cb341-351" aria-hidden="true"></a>      <span class="cf">if</span> ( $l &gt;= $min &amp;&amp; $d-&gt;lookup($cword) ) {</span>
<span id="cb341-352"><a href="#cb341-352" aria-hidden="true"></a>          push @words,</span>
<span id="cb341-353"><a href="#cb341-353" aria-hidden="true"></a>            $item;</span>
<span id="cb341-354"><a href="#cb341-354" aria-hidden="true"></a><span class="er"># push current path into &quot;words&quot; if it exactly matches.</span></span>
<span id="cb341-355"><a href="#cb341-355" aria-hidden="true"></a>      }</span>
<span id="cb341-356"><a href="#cb341-356" aria-hidden="true"></a>      next <span class="cf">if</span> $l &gt; $max;</span>
<span id="cb341-357"><a href="#cb341-357" aria-hidden="true"></a></span>
<span id="cb341-358"><a href="#cb341-358" aria-hidden="true"></a></span>
<span id="cb341-359"><a href="#cb341-359" aria-hidden="true"></a><span class="er"># put the dictionary into &quot;is-a-prefix&quot; mode.</span></span>
<span id="cb341-360"><a href="#cb341-360" aria-hidden="true"></a>      $d-&gt;deepsearch(&#39;boolean&#39;);</span>
<span id="cb341-361"><a href="#cb341-361" aria-hidden="true"></a></span>
<span id="cb341-362"><a href="#cb341-362" aria-hidden="true"></a>    siblingloop: foreach my $sibling ( @{ $item-&gt;tail-&gt;siblings } ) {</span>
<span id="cb341-363"><a href="#cb341-363" aria-hidden="true"></a>          foreach my $visited ( @{ $item-&gt;{path} } ) {</span>
<span id="cb341-364"><a href="#cb341-364" aria-hidden="true"></a>              next siblingloop <span class="cf">if</span> $sibling == $visited;</span>
<span id="cb341-365"><a href="#cb341-365" aria-hidden="true"></a>          }</span>
<span id="cb341-366"><a href="#cb341-366" aria-hidden="true"></a></span>
<span id="cb341-367"><a href="#cb341-367" aria-hidden="true"></a></span>
<span id="cb341-368"><a href="#cb341-368" aria-hidden="true"></a><span class="er"># given path y , iterate for all its end points</span></span>
<span id="cb341-369"><a href="#cb341-369" aria-hidden="true"></a>          my $subpath = $item-&gt;child($sibling);</span>
<span id="cb341-370"><a href="#cb341-370" aria-hidden="true"></a></span>
<span id="cb341-371"><a href="#cb341-371" aria-hidden="true"></a></span>
<span id="cb341-372"><a href="#cb341-372" aria-hidden="true"></a><span class="er"># create a new path for each end-point</span></span>
<span id="cb341-373"><a href="#cb341-373" aria-hidden="true"></a>          <span class="cf">if</span> ( $d-&gt;lookup( $subpath-&gt;current_word ) ) {</span>
<span id="cb341-374"><a href="#cb341-374" aria-hidden="true"></a></span>
<span id="cb341-375"><a href="#cb341-375" aria-hidden="true"></a></span>
<span id="cb341-376"><a href="#cb341-376" aria-hidden="true"></a><span class="pp"># if the new path is a prefix, add it to the bottom of the queue.</span></span>
<span id="cb341-377"><a href="#cb341-377" aria-hidden="true"></a>              push @queue, $subpath;</span>
<span id="cb341-378"><a href="#cb341-378" aria-hidden="true"></a>          }</span>
<span id="cb341-379"><a href="#cb341-379" aria-hidden="true"></a>      }</span>
<span id="cb341-380"><a href="#cb341-380" aria-hidden="true"></a>  }</span>
<span id="cb341-381"><a href="#cb341-381" aria-hidden="true"></a>  <span class="cf">return</span> \@words;</span>
<span id="cb341-382"><a href="#cb341-382" aria-hidden="true"></a>}</span>
<span id="cb341-383"><a href="#cb341-383" aria-hidden="true"></a></span>
<span id="cb341-384"><a href="#cb341-384" aria-hidden="true"></a>sub setup_predetermined { </span>
<span id="cb341-385"><a href="#cb341-385" aria-hidden="true"></a>  my $m = shift; </span>
<span id="cb341-386"><a href="#cb341-386" aria-hidden="true"></a>  my $gameNo = shift;</span>
<span id="cb341-387"><a href="#cb341-387" aria-hidden="true"></a>  <span class="cf">if</span>( $gameNo == <span class="dv">0</span> ){</span>
<span id="cb341-388"><a href="#cb341-388" aria-hidden="true"></a>      $m-&gt;add_row(qw( F X I E ));</span>
<span id="cb341-389"><a href="#cb341-389" aria-hidden="true"></a>      $m-&gt;add_row(qw( A M L O ));</span>
<span id="cb341-390"><a href="#cb341-390" aria-hidden="true"></a>      $m-&gt;add_row(qw( E W B X ));</span>
<span id="cb341-391"><a href="#cb341-391" aria-hidden="true"></a>      $m-&gt;add_row(qw( A S T U ));</span>
<span id="cb341-392"><a href="#cb341-392" aria-hidden="true"></a>      <span class="cf">return</span> $m;</span>
<span id="cb341-393"><a href="#cb341-393" aria-hidden="true"></a>  }</span>
<span id="cb341-394"><a href="#cb341-394" aria-hidden="true"></a>  <span class="cf">if</span>( $gameNo == <span class="dv">1</span> ){</span>
<span id="cb341-395"><a href="#cb341-395" aria-hidden="true"></a>      $m-&gt;add_row(qw( D G H I ));</span>
<span id="cb341-396"><a href="#cb341-396" aria-hidden="true"></a>      $m-&gt;add_row(qw( K L P S ));</span>
<span id="cb341-397"><a href="#cb341-397" aria-hidden="true"></a>      $m-&gt;add_row(qw( Y E U T ));</span>
<span id="cb341-398"><a href="#cb341-398" aria-hidden="true"></a>      $m-&gt;add_row(qw( E O R N ));</span>
<span id="cb341-399"><a href="#cb341-399" aria-hidden="true"></a>      <span class="cf">return</span> $m;</span>
<span id="cb341-400"><a href="#cb341-400" aria-hidden="true"></a>  }</span>
<span id="cb341-401"><a href="#cb341-401" aria-hidden="true"></a>}</span>
<span id="cb341-402"><a href="#cb341-402" aria-hidden="true"></a>sub setup_random { </span>
<span id="cb341-403"><a href="#cb341-403" aria-hidden="true"></a>  my $m = shift; </span>
<span id="cb341-404"><a href="#cb341-404" aria-hidden="true"></a>  my $seed = shift;</span>
<span id="cb341-405"><a href="#cb341-405" aria-hidden="true"></a>  srand $seed;</span>
<span id="cb341-406"><a href="#cb341-406" aria-hidden="true"></a>  my @letters = <span class="ch">&#39;A&#39;</span> .. <span class="ch">&#39;Z&#39;</span> ; </span>
<span id="cb341-407"><a href="#cb341-407" aria-hidden="true"></a>  <span class="cf">for</span>( <span class="dv">1</span> .. <span class="dv">4</span> ){ </span>
<span id="cb341-408"><a href="#cb341-408" aria-hidden="true"></a>      my @r = ();</span>
<span id="cb341-409"><a href="#cb341-409" aria-hidden="true"></a>      <span class="cf">for</span>( <span class="dv">1</span> .. <span class="dv">4</span> ){</span>
<span id="cb341-410"><a href="#cb341-410" aria-hidden="true"></a>          push @r , $letters[<span class="dt">int</span>(rand(<span class="dv">25</span>))];</span>
<span id="cb341-411"><a href="#cb341-411" aria-hidden="true"></a>      }</span>
<span id="cb341-412"><a href="#cb341-412" aria-hidden="true"></a>      $m-&gt;add_row( @r );</span>
<span id="cb341-413"><a href="#cb341-413" aria-hidden="true"></a>  }</span>
<span id="cb341-414"><a href="#cb341-414" aria-hidden="true"></a>}</span>
<span id="cb341-415"><a href="#cb341-415" aria-hidden="true"></a></span>
<span id="cb341-416"><a href="#cb341-416" aria-hidden="true"></a></span>
<span id="cb341-417"><a href="#cb341-417" aria-hidden="true"></a><span class="er"># Here is where the real work starts.</span></span>
<span id="cb341-418"><a href="#cb341-418" aria-hidden="true"></a></span>
<span id="cb341-419"><a href="#cb341-419" aria-hidden="true"></a>my $m = Matrix-&gt;new();</span>
<span id="cb341-420"><a href="#cb341-420" aria-hidden="true"></a>setup_predetermined( $m, <span class="dv">0</span> );</span>
<span id="cb341-421"><a href="#cb341-421" aria-hidden="true"></a></span>
<span id="cb341-422"><a href="#cb341-422" aria-hidden="true"></a><span class="er">#setup_random( $m, 5 );</span></span>
<span id="cb341-423"><a href="#cb341-423" aria-hidden="true"></a></span>
<span id="cb341-424"><a href="#cb341-424" aria-hidden="true"></a>my $d = readDict( &#39;dict.txt&#39;, $m-&gt;regex );</span>
<span id="cb341-425"><a href="#cb341-425" aria-hidden="true"></a>my $c = scalar @{ $m-&gt;cells };</span>
<span id="cb341-426"><a href="#cb341-426" aria-hidden="true"></a><span class="er"># get the max, as per spec</span></span>
<span id="cb341-427"><a href="#cb341-427" aria-hidden="true"></a></span>
<span id="cb341-428"><a href="#cb341-428" aria-hidden="true"></a>print join <span class="st">&quot;,</span><span class="sc">\n</span><span class="st">&quot;</span>, map { $_-&gt;pp } @{</span>
<span id="cb341-429"><a href="#cb341-429" aria-hidden="true"></a>  traverseGraph( $d, $m, <span class="dv">3</span>, $c ) ;</span>
<span id="cb341-430"><a href="#cb341-430" aria-hidden="true"></a>};</span></code></pre></div>
<p>Arch/execution info for comparison:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true"></a>model name      : Intel(R) Core(TM)<span class="dv">2</span> Duo CPU     T9300  @ <span class="fl">2.50</span><span class="er">GHz</span></span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true"></a>cache size      : <span class="dv">6144</span> KB</span>
<span id="cb342-3"><a href="#cb342-3" aria-hidden="true"></a>Memory usage summary: heap total: <span class="dv">77057577</span>, heap peak: <span class="dv">11446200</span>, stack peak: <span class="dv">26448</span></span>
<span id="cb342-4"><a href="#cb342-4" aria-hidden="true"></a>       total calls   total memory   failed calls</span>
<span id="cb342-5"><a href="#cb342-5" aria-hidden="true"></a> malloc|     <span class="dv">947212</span>       <span class="dv">68763684</span>              <span class="dv">0</span></span>
<span id="cb342-6"><a href="#cb342-6" aria-hidden="true"></a>realloc|      <span class="dv">11191</span>        <span class="dv">1045641</span>              <span class="dv">0</span>  (nomove:<span class="dv">9063</span>, dec:<span class="dv">4731</span>, free:<span class="dv">0</span>)</span>
<span id="cb342-7"><a href="#cb342-7" aria-hidden="true"></a> calloc|     <span class="dv">121001</span>        <span class="dv">7248252</span>              <span class="dv">0</span></span>
<span id="cb342-8"><a href="#cb342-8" aria-hidden="true"></a>   free|     <span class="dv">973159</span>       <span class="dv">65854762</span></span>
<span id="cb342-9"><a href="#cb342-9" aria-hidden="true"></a></span>
<span id="cb342-10"><a href="#cb342-10" aria-hidden="true"></a>Histogram <span class="cf">for</span> block sizes:</span>
<span id="cb342-11"><a href="#cb342-11" aria-hidden="true"></a>  <span class="dv">0</span>-<span class="dv">15</span>         <span class="dv">392633</span>  <span class="dv">36</span>% ==================================================</span>
<span id="cb342-12"><a href="#cb342-12" aria-hidden="true"></a> <span class="dv">16</span>-<span class="dv">31</span>          <span class="dv">43530</span>   <span class="dv">4</span>% =====</span>
<span id="cb342-13"><a href="#cb342-13" aria-hidden="true"></a> <span class="dv">32</span>-<span class="dv">47</span>          <span class="dv">50048</span>   <span class="dv">4</span>% ======</span>
<span id="cb342-14"><a href="#cb342-14" aria-hidden="true"></a> <span class="dv">48</span>-<span class="dv">63</span>          <span class="dv">70701</span>   <span class="dv">6</span>% =========</span>
<span id="cb342-15"><a href="#cb342-15" aria-hidden="true"></a> <span class="dv">64</span>-<span class="dv">79</span>          <span class="dv">18831</span>   <span class="dv">1</span>% ==</span>
<span id="cb342-16"><a href="#cb342-16" aria-hidden="true"></a> <span class="dv">80</span>-<span class="dv">95</span>          <span class="dv">19271</span>   <span class="dv">1</span>% ==</span>
<span id="cb342-17"><a href="#cb342-17" aria-hidden="true"></a> <span class="dv">96</span>-<span class="dv">111</span>        <span class="dv">238398</span>  <span class="dv">22</span>% ==============================</span>
<span id="cb342-18"><a href="#cb342-18" aria-hidden="true"></a><span class="dv">112</span>-<span class="dv">127</span>          <span class="dv">3007</span>  &lt;<span class="dv">1</span>% </span>
<span id="cb342-19"><a href="#cb342-19" aria-hidden="true"></a><span class="dv">128</span>-<span class="dv">143</span>        <span class="dv">236727</span>  <span class="dv">21</span>% ==============================</span></code></pre></div>
<h5>
More Mumblings on that Regex Optimization
</h2>
<p>The regex optimization I use is useless for multi-solve dictionaries, and for multi-solve you’ll want a full dictionary, not a pre-trimmed one.</p>
<p>However, that said, for one-off solves, its really fast. ( Perl regex are in C! :) )</p>
<p>Here is some varying code additions:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true"></a>sub readDict_nofilter {</span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true"></a>  my $fn = shift;</span>
<span id="cb343-3"><a href="#cb343-3" aria-hidden="true"></a>  my $re = shift;</span>
<span id="cb343-4"><a href="#cb343-4" aria-hidden="true"></a>  my $d  = Tree::Trie-&gt;new();</span>
<span id="cb343-5"><a href="#cb343-5" aria-hidden="true"></a></span>
<span id="cb343-6"><a href="#cb343-6" aria-hidden="true"></a></span>
<span id="cb343-7"><a href="#cb343-7" aria-hidden="true"></a><span class="er"># Dictionary Loading</span></span>
<span id="cb343-8"><a href="#cb343-8" aria-hidden="true"></a>  open my $fh, <span class="ch">&#39;&lt;&#39;</span>, $fn;</span>
<span id="cb343-9"><a href="#cb343-9" aria-hidden="true"></a>  <span class="cf">while</span> ( my $line = &lt;$fh&gt; ) {</span>
<span id="cb343-10"><a href="#cb343-10" aria-hidden="true"></a>      chomp($line);</span>
<span id="cb343-11"><a href="#cb343-11" aria-hidden="true"></a>      $d-&gt;add( uc($line) );</span>
<span id="cb343-12"><a href="#cb343-12" aria-hidden="true"></a>  }</span>
<span id="cb343-13"><a href="#cb343-13" aria-hidden="true"></a>  <span class="cf">return</span> $d;</span>
<span id="cb343-14"><a href="#cb343-14" aria-hidden="true"></a>}</span>
<span id="cb343-15"><a href="#cb343-15" aria-hidden="true"></a></span>
<span id="cb343-16"><a href="#cb343-16" aria-hidden="true"></a>sub benchmark_io { </span>
<span id="cb343-17"><a href="#cb343-17" aria-hidden="true"></a>  use Benchmark qw( cmpthese :hireswallclock );</span>
<span id="cb343-18"><a href="#cb343-18" aria-hidden="true"></a></span>
<span id="cb343-19"><a href="#cb343-19" aria-hidden="true"></a><span class="er"># generate a random 16 character string </span></span>
<span id="cb343-20"><a href="#cb343-20" aria-hidden="true"></a></span>
<span id="cb343-21"><a href="#cb343-21" aria-hidden="true"></a><span class="er"># to simulate there being an input grid. </span></span>
<span id="cb343-22"><a href="#cb343-22" aria-hidden="true"></a>  my $regexen = sub { </span>
<span id="cb343-23"><a href="#cb343-23" aria-hidden="true"></a>      my @letters = <span class="ch">&#39;A&#39;</span> .. <span class="ch">&#39;Z&#39;</span> ; </span>
<span id="cb343-24"><a href="#cb343-24" aria-hidden="true"></a>      my @lo = ();</span>
<span id="cb343-25"><a href="#cb343-25" aria-hidden="true"></a>      <span class="cf">for</span>( <span class="fl">1.</span><span class="er">.16</span> ){ </span>
<span id="cb343-26"><a href="#cb343-26" aria-hidden="true"></a>          push @lo , $_ ; </span>
<span id="cb343-27"><a href="#cb343-27" aria-hidden="true"></a>      }</span>
<span id="cb343-28"><a href="#cb343-28" aria-hidden="true"></a>      my $c  = join &#39;&#39;, @lo;</span>
<span id="cb343-29"><a href="#cb343-29" aria-hidden="true"></a>      $c = <span class="st">&quot;[^$c]&quot;</span>;</span>
<span id="cb343-30"><a href="#cb343-30" aria-hidden="true"></a>      <span class="cf">return</span> qr/$c/i;</span>
<span id="cb343-31"><a href="#cb343-31" aria-hidden="true"></a>  };</span>
<span id="cb343-32"><a href="#cb343-32" aria-hidden="true"></a>  cmpthese( <span class="dv">200</span> , { </span>
<span id="cb343-33"><a href="#cb343-33" aria-hidden="true"></a>      filtered =&gt; sub { </span>
<span id="cb343-34"><a href="#cb343-34" aria-hidden="true"></a>          readDict(&#39;dict.txt&#39;, $regexen-&gt;() );</span>
<span id="cb343-35"><a href="#cb343-35" aria-hidden="true"></a>      }, </span>
<span id="cb343-36"><a href="#cb343-36" aria-hidden="true"></a>      unfiltered =&gt; sub {</span>
<span id="cb343-37"><a href="#cb343-37" aria-hidden="true"></a>          readDict_nofilter(&#39;dict.txt&#39;);</span>
<span id="cb343-38"><a href="#cb343-38" aria-hidden="true"></a>      }</span>
<span id="cb343-39"><a href="#cb343-39" aria-hidden="true"></a>  });</span>
<span id="cb343-40"><a href="#cb343-40" aria-hidden="true"></a>}</span></code></pre></div>
<pre>
           s/iter unfiltered   filtered
unfiltered   8.16         --       -94%
filtered    0.464      1658%         --
</pre>
<p><sub>ps: 8.16 * 200 = 27 minutes. </sub></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="algorithm-to-find-largest-prime-factor-of-a-number-score-192218-in-2018" class="level3">
<h3>61: Algorithm to find Largest prime factor of a number (score <a href="https://stackoverflow.com/q/23287.html">192218</a> in 2018)</h3>
<section id="question-60" class="level4">
<h4>Question</h4>
<p>What is the best approach to calculating the largest prime factor of a number?</p>
<p>I’m thinking the most efficient would be the following:</p>
<ol>
<li>
Find lowest prime number that divides cleanly
</li>
<li>
Check if result of division is prime
</li>
<li>
If not, find next lowest
</li>
<li>
Go to 2.
</li>
</ol>
<p>I’m basing this assumption on it being easier to calculate the small prime factors. Is this about right? What other approaches should I look into?</p>
<p>Edit: I’ve now realised that my approach is futile if there are more than 2 prime factors in play, since step 2 fails when the result is a product of two other primes, therefore a recursive algorithm is needed.</p>
<p>Edit again: And now I’ve realised that this does still work, because the last found prime number has to be the highest one, therefore any further testing of the non-prime result from step 2 would result in a smaller prime.</p>
</section>
<section id="answer-accepted-score-134" class="level4">
<h4>Answer accepted (score 134)</h4>
<p>Actually there are several more efficient ways to find factors of big numbers (for smaller ones trial division works reasonably well).</p>
<p>One method which is very fast if the input number has two factors very close to its square root is known as <a href="http://en.wikipedia.org/wiki/Fermat&
#39;s_factorization_method" rel="noreferrer">Fermat factorisation</a>. It makes use of the identity N = (a + b)(a - b) = a^2 - b^2 and is easy to understand and implement. Unfortunately it’s not very fast in general.</p>
<p>The best known method for factoring numbers up to 100 digits long is the <a href="http://en.wikipedia.org/wiki/Quadratic_sieve" rel="noreferrer">Quadratic sieve</a>. As a bonus, part of the algorithm is easily done with parallel processing.</p>
<p>Yet another algorithm I’ve heard of is <a href="http://en.wikipedia.org/wiki/Pollard&
#39;s_rho_algorithm" rel="noreferrer">Pollard’s Rho algorithm</a>. It’s not as efficient as the Quadratic Sieve in general but seems to be easier to implement.</p>
<hr>
<p>Once you’ve decided on how to split a number into two factors, here is the fastest algorithm I can think of to find the largest prime factor of a number:</p>
<p>Create a priority queue which initially stores the number itself. Each iteration, you remove the highest number from the queue, and attempt to split it into two factors (not allowing 1 to be one of those factors, of course). If this step fails, the number is prime and you have your answer! Otherwise you add the two factors into the queue and repeat.</p>
</section>
<section id="answer-2-score-139" class="level4">
<h4>Answer 2 (score 139)</h4>
<p>Here’s the best algorithm I know of (in Python)</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true"></a>def prime_factors(n):</span>
<span id="cb344-2"><a href="#cb344-2" aria-hidden="true"></a>    <span class="st">&quot;&quot;&quot;Returns all the prime factors of a positive integer&quot;&quot;&quot;</span></span>
<span id="cb344-3"><a href="#cb344-3" aria-hidden="true"></a>    factors = []</span>
<span id="cb344-4"><a href="#cb344-4" aria-hidden="true"></a>    d = <span class="dv">2</span></span>
<span id="cb344-5"><a href="#cb344-5" aria-hidden="true"></a>    <span class="cf">while</span> n &gt; <span class="dv">1</span>:</span>
<span id="cb344-6"><a href="#cb344-6" aria-hidden="true"></a>        <span class="cf">while</span> n % d == <span class="dv">0</span>:</span>
<span id="cb344-7"><a href="#cb344-7" aria-hidden="true"></a>            factors.append(d)</span>
<span id="cb344-8"><a href="#cb344-8" aria-hidden="true"></a>            n /= d</span>
<span id="cb344-9"><a href="#cb344-9" aria-hidden="true"></a>        d = d + <span class="dv">1</span></span>
<span id="cb344-10"><a href="#cb344-10" aria-hidden="true"></a></span>
<span id="cb344-11"><a href="#cb344-11" aria-hidden="true"></a>    <span class="cf">return</span> factors</span>
<span id="cb344-12"><a href="#cb344-12" aria-hidden="true"></a></span>
<span id="cb344-13"><a href="#cb344-13" aria-hidden="true"></a></span>
<span id="cb344-14"><a href="#cb344-14" aria-hidden="true"></a>pfs = prime_factors(<span class="dv">1000</span>)</span>
<span id="cb344-15"><a href="#cb344-15" aria-hidden="true"></a>largest_prime_factor = max(pfs)</span>
<span id="cb344-16"><a href="#cb344-16" aria-hidden="true"></a><span class="er"># The largest element in the prime factor list</span></span></code></pre></div>
<p>The above method runs in <code>O(n)</code> in the worst case (when the input is a prime number).</p>
<p>
<strong>EDIT:</strong><br> Below is the <code>O(sqrt(n))</code> version, as suggested in the comment. Here is the code, once more.
</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true"></a>def prime_factors(n):</span>
<span id="cb345-2"><a href="#cb345-2" aria-hidden="true"></a>    <span class="st">&quot;&quot;&quot;Returns all the prime factors of a positive integer&quot;&quot;&quot;</span></span>
<span id="cb345-3"><a href="#cb345-3" aria-hidden="true"></a>    factors = []</span>
<span id="cb345-4"><a href="#cb345-4" aria-hidden="true"></a>    d = <span class="dv">2</span></span>
<span id="cb345-5"><a href="#cb345-5" aria-hidden="true"></a>    <span class="cf">while</span> n &gt; <span class="dv">1</span>:</span>
<span id="cb345-6"><a href="#cb345-6" aria-hidden="true"></a>        <span class="cf">while</span> n % d == <span class="dv">0</span>:</span>
<span id="cb345-7"><a href="#cb345-7" aria-hidden="true"></a>            factors.append(d)</span>
<span id="cb345-8"><a href="#cb345-8" aria-hidden="true"></a>            n /= d</span>
<span id="cb345-9"><a href="#cb345-9" aria-hidden="true"></a>        d = d + <span class="dv">1</span></span>
<span id="cb345-10"><a href="#cb345-10" aria-hidden="true"></a>        <span class="cf">if</span> d*d &gt; n:</span>
<span id="cb345-11"><a href="#cb345-11" aria-hidden="true"></a>            <span class="cf">if</span> n &gt; <span class="dv">1</span>: factors.append(n)</span>
<span id="cb345-12"><a href="#cb345-12" aria-hidden="true"></a>            <span class="cf">break</span></span>
<span id="cb345-13"><a href="#cb345-13" aria-hidden="true"></a>    <span class="cf">return</span> factors</span>
<span id="cb345-14"><a href="#cb345-14" aria-hidden="true"></a></span>
<span id="cb345-15"><a href="#cb345-15" aria-hidden="true"></a></span>
<span id="cb345-16"><a href="#cb345-16" aria-hidden="true"></a>pfs = prime_factors(<span class="dv">1000</span>)</span>
<span id="cb345-17"><a href="#cb345-17" aria-hidden="true"></a>largest_prime_factor = max(pfs)</span>
<span id="cb345-18"><a href="#cb345-18" aria-hidden="true"></a><span class="er"># The largest element in the prime factor list</span></span></code></pre></div>
</section>
<section id="answer-3-score-18-1" class="level4">
<h4>Answer 3 (score 18)</h4>
<p>My answer is based on <a href="https://stackoverflow.com/questions/23287/prime-factors/412942
#412942">Triptych</a>’s, but improves a lot on it. It is based on the fact that beyond 2 and 3, all the prime numbers are of the form 6n-1 or 6n+1.</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true"></a>var largestPrimeFactor;</span>
<span id="cb346-2"><a href="#cb346-2" aria-hidden="true"></a><span class="cf">if</span>(n mod <span class="dv">2</span> == <span class="dv">0</span>)</span>
<span id="cb346-3"><a href="#cb346-3" aria-hidden="true"></a>{</span>
<span id="cb346-4"><a href="#cb346-4" aria-hidden="true"></a>    largestPrimeFactor = <span class="dv">2</span>;</span>
<span id="cb346-5"><a href="#cb346-5" aria-hidden="true"></a>    n = n / <span class="dv">2</span> <span class="cf">while</span>(n mod <span class="dv">2</span> == <span class="dv">0</span>);</span>
<span id="cb346-6"><a href="#cb346-6" aria-hidden="true"></a>}</span>
<span id="cb346-7"><a href="#cb346-7" aria-hidden="true"></a><span class="cf">if</span>(n mod <span class="dv">3</span> == <span class="dv">0</span>)</span>
<span id="cb346-8"><a href="#cb346-8" aria-hidden="true"></a>{</span>
<span id="cb346-9"><a href="#cb346-9" aria-hidden="true"></a>    largestPrimeFactor = <span class="dv">3</span>;</span>
<span id="cb346-10"><a href="#cb346-10" aria-hidden="true"></a>    n = n / <span class="dv">3</span> <span class="cf">while</span>(n mod <span class="dv">3</span> == <span class="dv">0</span>);</span>
<span id="cb346-11"><a href="#cb346-11" aria-hidden="true"></a>}</span>
<span id="cb346-12"><a href="#cb346-12" aria-hidden="true"></a></span>
<span id="cb346-13"><a href="#cb346-13" aria-hidden="true"></a>multOfSix = <span class="dv">6</span>;</span>
<span id="cb346-14"><a href="#cb346-14" aria-hidden="true"></a><span class="cf">while</span>(multOfSix - <span class="dv">1</span> &lt;= n)</span>
<span id="cb346-15"><a href="#cb346-15" aria-hidden="true"></a>{</span>
<span id="cb346-16"><a href="#cb346-16" aria-hidden="true"></a>    <span class="cf">if</span>(n mod (multOfSix - <span class="dv">1</span>) == <span class="dv">0</span>)</span>
<span id="cb346-17"><a href="#cb346-17" aria-hidden="true"></a>    {</span>
<span id="cb346-18"><a href="#cb346-18" aria-hidden="true"></a>        largestPrimeFactor = multOfSix - <span class="dv">1</span>;</span>
<span id="cb346-19"><a href="#cb346-19" aria-hidden="true"></a>        n = n / largestPrimeFactor <span class="cf">while</span>(n mod largestPrimeFactor == <span class="dv">0</span>);</span>
<span id="cb346-20"><a href="#cb346-20" aria-hidden="true"></a>    }</span>
<span id="cb346-21"><a href="#cb346-21" aria-hidden="true"></a></span>
<span id="cb346-22"><a href="#cb346-22" aria-hidden="true"></a>    <span class="cf">if</span>(n mod (multOfSix + <span class="dv">1</span>) == <span class="dv">0</span>)</span>
<span id="cb346-23"><a href="#cb346-23" aria-hidden="true"></a>    {</span>
<span id="cb346-24"><a href="#cb346-24" aria-hidden="true"></a>        largestPrimeFactor = multOfSix + <span class="dv">1</span>;</span>
<span id="cb346-25"><a href="#cb346-25" aria-hidden="true"></a>        n = n / largestPrimeFactor <span class="cf">while</span>(n mod largestPrimeFactor == <span class="dv">0</span>);</span>
<span id="cb346-26"><a href="#cb346-26" aria-hidden="true"></a>    }</span>
<span id="cb346-27"><a href="#cb346-27" aria-hidden="true"></a>    multOfSix += <span class="dv">6</span>;</span>
<span id="cb346-28"><a href="#cb346-28" aria-hidden="true"></a>}</span></code></pre></div>
<p>I recently wrote a <a href="http://thetaoishere.blogspot.com/2009/04/finding-largest-prime-factor.html" rel="nofollow noreferrer">blog article</a> explaining how this algorithm works.</p>
<p>I would venture that a method in which there is no need for a test for primality (and no sieve construction) would run faster than one which does use those. If that is the case, this is probably the fastest algorithm here.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="algorithm-efficient-way-to-remove-duplicate-integers-from-an-array-score-192123-in-2009" class="level3">
<h3>62: Algorithm: efficient way to remove duplicate integers from an array (score <a href="https://stackoverflow.com/q/1532819.html">192123</a> in 2009)</h3>
<section id="question-61" class="level4">
<h4>Question</h4>
<p>I got this problem from an interview with Microsoft.</p>
<blockquote>
<p>
Given an array of random integers, write an algorithm in C that removes duplicated numbers and return the unique numbers in the original array.
</p>
</blockquote>
<p>E.g Input: <code>{4, 8, 4, 1, 1, 2, 9}</code> Output: <code>{4, 8, 1, 2, 9, ?, ?}</code></p>
<p>One caveat is that the expected algorithm should not required the array to be sorted first. And when an element has been removed, the following elements must be shifted forward as well. Anyway, value of elements at the tail of the array where elements were shifted forward are negligible.</p>
<p><strong>Update:</strong> The result must be returned in the original array and helper data structure (e.g. hashtable) should not be used. However, I guess order preservation is not necessary.</p>
<p><strong>Update2:</strong> For those who wonder why these impractical constraints, this was an interview question and all these constraints are discussed during the thinking process to see how I can come up with different ideas.</p>
</section>
<section id="answer-accepted-score-18" class="level4">
<h4>Answer accepted (score 18)</h4>
<p>How about:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true"></a><span class="dt">void</span> rmdup(<span class="dt">int</span> *array, <span class="dt">int</span> length)</span>
<span id="cb347-2"><a href="#cb347-2" aria-hidden="true"></a>{</span>
<span id="cb347-3"><a href="#cb347-3" aria-hidden="true"></a>    <span class="dt">int</span> *current , *end = array + length - <span class="dv">1</span>;</span>
<span id="cb347-4"><a href="#cb347-4" aria-hidden="true"></a></span>
<span id="cb347-5"><a href="#cb347-5" aria-hidden="true"></a>    <span class="cf">for</span> ( current = array + <span class="dv">1</span>; array &lt; end; array++, current = array + <span class="dv">1</span> )</span>
<span id="cb347-6"><a href="#cb347-6" aria-hidden="true"></a>    {</span>
<span id="cb347-7"><a href="#cb347-7" aria-hidden="true"></a>        <span class="cf">while</span> ( current &lt;= end )</span>
<span id="cb347-8"><a href="#cb347-8" aria-hidden="true"></a>        {</span>
<span id="cb347-9"><a href="#cb347-9" aria-hidden="true"></a>            <span class="cf">if</span> ( *current == *array )</span>
<span id="cb347-10"><a href="#cb347-10" aria-hidden="true"></a>            {</span>
<span id="cb347-11"><a href="#cb347-11" aria-hidden="true"></a>                *current = *end--;</span>
<span id="cb347-12"><a href="#cb347-12" aria-hidden="true"></a>            }</span>
<span id="cb347-13"><a href="#cb347-13" aria-hidden="true"></a>            <span class="cf">else</span></span>
<span id="cb347-14"><a href="#cb347-14" aria-hidden="true"></a>            {</span>
<span id="cb347-15"><a href="#cb347-15" aria-hidden="true"></a>                current++;</span>
<span id="cb347-16"><a href="#cb347-16" aria-hidden="true"></a>            }</span>
<span id="cb347-17"><a href="#cb347-17" aria-hidden="true"></a>        }</span>
<span id="cb347-18"><a href="#cb347-18" aria-hidden="true"></a>    }</span>
<span id="cb347-19"><a href="#cb347-19" aria-hidden="true"></a>}</span></code></pre></div>
<p>Should be O(n^2) or less.</p>
</section>
<section id="answer-2-score-135" class="level4">
<h4>Answer 2 (score 135)</h4>
<p>A solution suggested by my girlfriend is a variation of merge sort. The only modification is that during the merge step, just disregard duplicated values. This solution would be as well O(n log n). In this approach, the sorting/duplication removal are combined together. However, I’m not sure if that makes any difference, though.</p>
</section>
<section id="answer-3-score-46" class="level4">
<h4>Answer 3 (score 46)</h4>
<p>I’ve posted this once before on SO, but I’ll reproduce it here because it’s pretty cool. It uses hashing, building something like a hash set in place. It’s guaranteed to be O(1) in axillary space (the recursion is a tail call), and is typically O(N) time complexity. The algorithm is as follows:</p>
<ol>
<li>
Take the first element of the array, this will be the sentinel.
</li>
<li>
Reorder the rest of the array, as much as possible, such that each element is in the position corresponding to its hash. As this step is completed, duplicates will be discovered. Set them equal to sentinel.
</li>
<li>
Move all elements for which the index is equal to the hash to the beginning of the array.
</li>
<li>
Move all elements that are equal to sentinel, except the first element of the array, to the end of the array.
</li>
<li>
What’s left between the properly hashed elements and the duplicate elements will be the elements that couldn’t be placed in the index corresponding to their hash because of a collision. Recurse to deal with these elements.
</li>
</ol>
<p>This can be shown to be O(N) provided no pathological scenario in the hashing: Even if there are no duplicates, approximately 2/3 of the elements will be eliminated at each recursion. Each level of recursion is O(n) where small n is the amount of elements left. The only problem is that, in practice, it’s slower than a quick sort when there are few duplicates, i.e. lots of collisions. However, when there are huge amounts of duplicates, it’s amazingly fast.</p>
<p>Edit: In current implementations of D, hash_t is 32 bits. Everything about this algorithm assumes that there will be very few, if any, hash collisions in full 32-bit space. Collisions may, however, occur frequently in the modulus space. However, this assumption will in all likelihood be true for any reasonably sized data set. If the key is less than or equal to 32 bits, it can be its own hash, meaning that a collision in full 32-bit space is impossible. If it is larger, you simply can’t fit enough of them into 32-bit memory address space for it to be a problem. I assume hash_t will be increased to 64 bits in 64-bit implementations of D, where datasets can be larger. Furthermore, if this ever did prove to be a problem, one could change the hash function at each level of recursion.</p>
<p>Here’s an implementation in the D programming language:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true"></a><span class="dt">void</span> uniqueInPlace(T)(ref T[] dataIn) {</span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true"></a>    uniqueInPlaceImpl(dataIn, <span class="dv">0</span>);</span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true"></a>}</span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true"></a></span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true"></a><span class="dt">void</span> uniqueInPlaceImpl(T)(ref T[] dataIn, <span class="dt">size_t</span> start) {</span>
<span id="cb348-6"><a href="#cb348-6" aria-hidden="true"></a>    <span class="cf">if</span>(dataIn.length - start &lt; <span class="dv">2</span>)</span>
<span id="cb348-7"><a href="#cb348-7" aria-hidden="true"></a>        <span class="cf">return</span>;</span>
<span id="cb348-8"><a href="#cb348-8" aria-hidden="true"></a></span>
<span id="cb348-9"><a href="#cb348-9" aria-hidden="true"></a>    invariant T sentinel = dataIn[start];</span>
<span id="cb348-10"><a href="#cb348-10" aria-hidden="true"></a>    T[] data = dataIn[start + <span class="fl">1.</span><span class="er">.</span>$];</span>
<span id="cb348-11"><a href="#cb348-11" aria-hidden="true"></a></span>
<span id="cb348-12"><a href="#cb348-12" aria-hidden="true"></a>    <span class="dt">static</span> hash_t getHash(T elem) {</span>
<span id="cb348-13"><a href="#cb348-13" aria-hidden="true"></a>        <span class="dt">static</span> <span class="cf">if</span>(is(T == uint) || is(T == <span class="dt">int</span>)) {</span>
<span id="cb348-14"><a href="#cb348-14" aria-hidden="true"></a>            <span class="cf">return</span> cast(hash_t) elem;</span>
<span id="cb348-15"><a href="#cb348-15" aria-hidden="true"></a>        } <span class="cf">else</span> <span class="dt">static</span> <span class="cf">if</span>(__traits(compiles, elem.toHash)) {</span>
<span id="cb348-16"><a href="#cb348-16" aria-hidden="true"></a>            <span class="cf">return</span> elem.toHash;</span>
<span id="cb348-17"><a href="#cb348-17" aria-hidden="true"></a>        } <span class="cf">else</span> {</span>
<span id="cb348-18"><a href="#cb348-18" aria-hidden="true"></a>            <span class="dt">static</span> <span class="dt">auto</span> ti = typeid(typeof(elem));</span>
<span id="cb348-19"><a href="#cb348-19" aria-hidden="true"></a>            <span class="cf">return</span> ti.getHash(&amp;elem);</span>
<span id="cb348-20"><a href="#cb348-20" aria-hidden="true"></a>        }</span>
<span id="cb348-21"><a href="#cb348-21" aria-hidden="true"></a>    }</span>
<span id="cb348-22"><a href="#cb348-22" aria-hidden="true"></a></span>
<span id="cb348-23"><a href="#cb348-23" aria-hidden="true"></a>    <span class="cf">for</span>(<span class="dt">size_t</span> index = <span class="dv">0</span>; index &lt; data.length;) {</span>
<span id="cb348-24"><a href="#cb348-24" aria-hidden="true"></a>        <span class="cf">if</span>(data[index] == sentinel) {</span>
<span id="cb348-25"><a href="#cb348-25" aria-hidden="true"></a>            index++;</span>
<span id="cb348-26"><a href="#cb348-26" aria-hidden="true"></a>            <span class="cf">continue</span>;</span>
<span id="cb348-27"><a href="#cb348-27" aria-hidden="true"></a>        }</span>
<span id="cb348-28"><a href="#cb348-28" aria-hidden="true"></a></span>
<span id="cb348-29"><a href="#cb348-29" aria-hidden="true"></a>        <span class="dt">auto</span> hash = getHash(data[index]) % data.length;</span>
<span id="cb348-30"><a href="#cb348-30" aria-hidden="true"></a>        <span class="cf">if</span>(index == hash) {</span>
<span id="cb348-31"><a href="#cb348-31" aria-hidden="true"></a>            index++;</span>
<span id="cb348-32"><a href="#cb348-32" aria-hidden="true"></a>            <span class="cf">continue</span>;</span>
<span id="cb348-33"><a href="#cb348-33" aria-hidden="true"></a>        }</span>
<span id="cb348-34"><a href="#cb348-34" aria-hidden="true"></a></span>
<span id="cb348-35"><a href="#cb348-35" aria-hidden="true"></a>        <span class="cf">if</span>(data[index] == data[hash]) {</span>
<span id="cb348-36"><a href="#cb348-36" aria-hidden="true"></a>            data[index] = sentinel;</span>
<span id="cb348-37"><a href="#cb348-37" aria-hidden="true"></a>            index++;</span>
<span id="cb348-38"><a href="#cb348-38" aria-hidden="true"></a>            <span class="cf">continue</span>;</span>
<span id="cb348-39"><a href="#cb348-39" aria-hidden="true"></a>        }</span>
<span id="cb348-40"><a href="#cb348-40" aria-hidden="true"></a></span>
<span id="cb348-41"><a href="#cb348-41" aria-hidden="true"></a>        <span class="cf">if</span>(data[hash] == sentinel) {</span>
<span id="cb348-42"><a href="#cb348-42" aria-hidden="true"></a>            swap(data[hash], data[index]);</span>
<span id="cb348-43"><a href="#cb348-43" aria-hidden="true"></a>            index++;</span>
<span id="cb348-44"><a href="#cb348-44" aria-hidden="true"></a>            <span class="cf">continue</span>;</span>
<span id="cb348-45"><a href="#cb348-45" aria-hidden="true"></a>        }</span>
<span id="cb348-46"><a href="#cb348-46" aria-hidden="true"></a></span>
<span id="cb348-47"><a href="#cb348-47" aria-hidden="true"></a>        <span class="dt">auto</span> hashHash = getHash(data[hash]) % data.length;</span>
<span id="cb348-48"><a href="#cb348-48" aria-hidden="true"></a>        <span class="cf">if</span>(hashHash != hash) {</span>
<span id="cb348-49"><a href="#cb348-49" aria-hidden="true"></a>            swap(data[index], data[hash]);</span>
<span id="cb348-50"><a href="#cb348-50" aria-hidden="true"></a>            <span class="cf">if</span>(hash &lt; index)</span>
<span id="cb348-51"><a href="#cb348-51" aria-hidden="true"></a>                index++;</span>
<span id="cb348-52"><a href="#cb348-52" aria-hidden="true"></a>        } <span class="cf">else</span> {</span>
<span id="cb348-53"><a href="#cb348-53" aria-hidden="true"></a>            index++;</span>
<span id="cb348-54"><a href="#cb348-54" aria-hidden="true"></a>        }</span>
<span id="cb348-55"><a href="#cb348-55" aria-hidden="true"></a>    }</span>
<span id="cb348-56"><a href="#cb348-56" aria-hidden="true"></a></span>
<span id="cb348-57"><a href="#cb348-57" aria-hidden="true"></a></span>
<span id="cb348-58"><a href="#cb348-58" aria-hidden="true"></a>    <span class="dt">size_t</span> swapPos = <span class="dv">0</span>;</span>
<span id="cb348-59"><a href="#cb348-59" aria-hidden="true"></a>    foreach(i; <span class="fl">0.</span><span class="er">.data</span>.length) {</span>
<span id="cb348-60"><a href="#cb348-60" aria-hidden="true"></a>        <span class="cf">if</span>(data[i] != sentinel &amp;&amp; i == getHash(data[i]) % data.length) {</span>
<span id="cb348-61"><a href="#cb348-61" aria-hidden="true"></a>            swap(data[i], data[swapPos++]);</span>
<span id="cb348-62"><a href="#cb348-62" aria-hidden="true"></a>        }</span>
<span id="cb348-63"><a href="#cb348-63" aria-hidden="true"></a>    }</span>
<span id="cb348-64"><a href="#cb348-64" aria-hidden="true"></a></span>
<span id="cb348-65"><a href="#cb348-65" aria-hidden="true"></a>    <span class="dt">size_t</span> sentinelPos = data.length;</span>
<span id="cb348-66"><a href="#cb348-66" aria-hidden="true"></a>    <span class="cf">for</span>(<span class="dt">size_t</span> i = swapPos; i &lt; sentinelPos;) {</span>
<span id="cb348-67"><a href="#cb348-67" aria-hidden="true"></a>        <span class="cf">if</span>(data[i] == sentinel) {</span>
<span id="cb348-68"><a href="#cb348-68" aria-hidden="true"></a>            swap(data[i], data[--sentinelPos]);</span>
<span id="cb348-69"><a href="#cb348-69" aria-hidden="true"></a>        } <span class="cf">else</span> {</span>
<span id="cb348-70"><a href="#cb348-70" aria-hidden="true"></a>            i++;</span>
<span id="cb348-71"><a href="#cb348-71" aria-hidden="true"></a>        }</span>
<span id="cb348-72"><a href="#cb348-72" aria-hidden="true"></a>    }</span>
<span id="cb348-73"><a href="#cb348-73" aria-hidden="true"></a></span>
<span id="cb348-74"><a href="#cb348-74" aria-hidden="true"></a>    dataIn = dataIn[<span class="fl">0.</span><span class="er">.sentinelPos</span> + start + <span class="dv">1</span>];</span>
<span id="cb348-75"><a href="#cb348-75" aria-hidden="true"></a>    uniqueInPlaceImpl(dataIn, start + swapPos + <span class="dv">1</span>);</span>
<span id="cb348-76"><a href="#cb348-76" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-the-best-algorithm-for-overriding-gethashcode-score-191331-in-2019" class="level3">
<h3>63: What is the best algorithm for overriding GetHashCode? (score <a href="https://stackoverflow.com/q/263400.html">191331</a> in 2019)</h3>
<section id="question-62" class="level4">
<h4>Question</h4>
<p>In .NET, the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.gethashcode" rel="noreferrer"><code>GetHashCode</code> method</a> is used in a lot of places throughout the .NET base class libraries. Implementing it properly is especially important to find items quickly in a collection or when determining equality.</p>
<p>Is there a standard algorithm or best practice on how to implement <code>GetHashCode</code> for my custom classes so I don’t degrade performance?</p>
</section>
<section id="answer-accepted-score-1529" class="level4">
<h4>Answer accepted (score 1529)</h4>
<p>I usually go with something like the implementation given in Josh Bloch’s <em>fabulous</em> <a href="https://rads.stackoverflow.com/amzn/click/com/0321356683" rel="noreferrer" rel="nofollow noreferrer">Effective Java</a>. It’s fast and creates a pretty good hash which is unlikely to cause collisions. Pick two different prime numbers, e.g. 17 and 23, and do:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true"></a>public override <span class="dt">int</span> GetHashCode()</span>
<span id="cb349-2"><a href="#cb349-2" aria-hidden="true"></a>{</span>
<span id="cb349-3"><a href="#cb349-3" aria-hidden="true"></a>    unchecked <span class="co">// Overflow is fine, just wrap</span></span>
<span id="cb349-4"><a href="#cb349-4" aria-hidden="true"></a>    {</span>
<span id="cb349-5"><a href="#cb349-5" aria-hidden="true"></a>        <span class="dt">int</span> hash = <span class="dv">17</span>;</span>
<span id="cb349-6"><a href="#cb349-6" aria-hidden="true"></a>        <span class="co">// Suitable nullity checks etc, of course :)</span></span>
<span id="cb349-7"><a href="#cb349-7" aria-hidden="true"></a>        hash = hash * <span class="dv">23</span> + field1.GetHashCode();</span>
<span id="cb349-8"><a href="#cb349-8" aria-hidden="true"></a>        hash = hash * <span class="dv">23</span> + field2.GetHashCode();</span>
<span id="cb349-9"><a href="#cb349-9" aria-hidden="true"></a>        hash = hash * <span class="dv">23</span> + field3.GetHashCode();</span>
<span id="cb349-10"><a href="#cb349-10" aria-hidden="true"></a>        <span class="cf">return</span> hash;</span>
<span id="cb349-11"><a href="#cb349-11" aria-hidden="true"></a>    }</span>
<span id="cb349-12"><a href="#cb349-12" aria-hidden="true"></a>}</span></code></pre></div>
<p>As noted in comments, you may find it’s better to pick a large prime to multiply by instead. Apparently 486187739 is good… and although most examples I’ve seen with small numbers tend to use primes, there are at least similar algorithms where non-prime numbers are often used. In the not-quite-<a href="https://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function" rel="noreferrer">FNV</a> example later, for example, I’ve used numbers which apparently work well - but the initial value isn’t a prime. (The multiplication constant <em>is</em> prime though. I don’t know quite how important that is.)</p>
<p>This is better than the common practice of <code>XOR</code>ing hashcodes for two main reasons. Suppose we have a type with two <code>int</code> fields:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true"></a>XorHash(x, x) == XorHash(y, y) == <span class="dv">0</span> <span class="cf">for</span> all x, y</span>
<span id="cb350-2"><a href="#cb350-2" aria-hidden="true"></a>XorHash(x, y) == XorHash(y, x) <span class="cf">for</span> all x, y</span></code></pre></div>
<p>By the way, the earlier algorithm is the one currently used by the C # compiler for anonymous types.</p>
<p><a href="http://eternallyconfuzzled.com/tuts/algorithms/jsw_tut_hashing.aspx" rel="noreferrer">This page</a> gives quite a few options. I think for most cases the above is “good enough” and it’s incredibly easy to remember and get right. The <a href="http://eternallyconfuzzled.com/tuts/algorithms/jsw_tut_hashing.aspx
#fnv" rel="noreferrer">FNV</a> alternative is similarly simple, but uses different constants and <code>XOR</code> instead of <code>ADD</code> as a combining operation. It looks <em>something</em> like the code below, but the normal FNV algorithm operates on individual bytes, so this would require modifying to perform one iteration per byte, instead of per 32-bit hash value. FNV is also designed for variable lengths of data, whereas the way we’re using it here is always for the same number of field values. Comments on this answer suggest that the code here doesn’t actually work as well (in the sample case tested) as the addition approach above.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true"></a><span class="co">// Note: Not quite FNV!</span></span>
<span id="cb351-2"><a href="#cb351-2" aria-hidden="true"></a>public override <span class="dt">int</span> GetHashCode()</span>
<span id="cb351-3"><a href="#cb351-3" aria-hidden="true"></a>{</span>
<span id="cb351-4"><a href="#cb351-4" aria-hidden="true"></a>    unchecked <span class="co">// Overflow is fine, just wrap</span></span>
<span id="cb351-5"><a href="#cb351-5" aria-hidden="true"></a>    {</span>
<span id="cb351-6"><a href="#cb351-6" aria-hidden="true"></a>        <span class="dt">int</span> hash = (<span class="dt">int</span>) <span class="dv">2166136261</span>;</span>
<span id="cb351-7"><a href="#cb351-7" aria-hidden="true"></a>        <span class="co">// Suitable nullity checks etc, of course :)</span></span>
<span id="cb351-8"><a href="#cb351-8" aria-hidden="true"></a>        hash = (hash * <span class="dv">16777619</span>) ^ field1.GetHashCode();</span>
<span id="cb351-9"><a href="#cb351-9" aria-hidden="true"></a>        hash = (hash * <span class="dv">16777619</span>) ^ field2.GetHashCode();</span>
<span id="cb351-10"><a href="#cb351-10" aria-hidden="true"></a>        hash = (hash * <span class="dv">16777619</span>) ^ field3.GetHashCode();</span>
<span id="cb351-11"><a href="#cb351-11" aria-hidden="true"></a>        <span class="cf">return</span> hash;</span>
<span id="cb351-12"><a href="#cb351-12" aria-hidden="true"></a>    }</span>
<span id="cb351-13"><a href="#cb351-13" aria-hidden="true"></a>}</span></code></pre></div>
<p>Note that one thing to be aware of is that ideally you should prevent your equality-sensitive (and thus hashcode-sensitive) state from changing after adding it to a collection that depends on the hash code.</p>
<p>As per the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.object.gethashcode
#notes-to-inheritors" rel="noreferrer">documentation</a>:</p>
<blockquote>
<p>You can override GetHashCode for immutable reference types. In general, for mutable reference types, you should override GetHashCode only if:</p>
<ul>
<li>
You can compute the hash code from fields that are not mutable; or
</li>
<li>
You can ensure that the hash code of a mutable object does not change while the object is contained in a collection that relies on its hash code.
</li>
</ul>
</blockquote>
</section>
<section id="answer-2-score-391" class="level4">
<h4>Answer 2 (score 391)</h4>
<h5>
Anonymous Type
</h1>
<p>Microsoft already provides a good generic HashCode generator: Just copy your property/field values to an anonymous type and hash it:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true"></a>new { PropA, PropB, PropC, PropD }.GetHashCode();</span></code></pre></div>
<p>This will work for any number of properties. It does not use boxing. It just uses the algorithm already implemented in the framework for anonymous types.</p>
<h5>
ValueTuple - Update for C # 7
</h1>
<p>As <span class="citation" data-cites="cactuaroid">@cactuaroid</span> mentions in the comments, a value tuple can be used. This saves a few keystrokes and more importantly executes purely on the stack (no Garbage):</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true"></a>(PropA, PropB, PropC, PropD).GetHashCode();</span></code></pre></div>
<p>(Note: The original technique using anonymous types seems to create an object on the heap, i.e. garbage, since anonymous types are implemented as classes, though this might be optimized out by the compiler. It would be interesting to benchmark these options, but the tuple option should be superior.)</p>
</section>
<section id="answer-3-score-101" class="level4">
<h4>Answer 3 (score 101)</h4>
<p>
Here is my hashcode helper.<br> It’s advantage is that it uses generic type arguments and therefore will not cause boxing:
</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true"></a>public <span class="dt">static</span> class HashHelper</span>
<span id="cb354-2"><a href="#cb354-2" aria-hidden="true"></a>{</span>
<span id="cb354-3"><a href="#cb354-3" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">int</span> GetHashCode&lt;T1, T2&gt;(T1 arg1, T2 arg2)</span>
<span id="cb354-4"><a href="#cb354-4" aria-hidden="true"></a>    {</span>
<span id="cb354-5"><a href="#cb354-5" aria-hidden="true"></a>         unchecked</span>
<span id="cb354-6"><a href="#cb354-6" aria-hidden="true"></a>         {</span>
<span id="cb354-7"><a href="#cb354-7" aria-hidden="true"></a>             <span class="cf">return</span> <span class="dv">31</span> * arg1.GetHashCode() + arg2.GetHashCode();</span>
<span id="cb354-8"><a href="#cb354-8" aria-hidden="true"></a>         }</span>
<span id="cb354-9"><a href="#cb354-9" aria-hidden="true"></a>    }</span>
<span id="cb354-10"><a href="#cb354-10" aria-hidden="true"></a></span>
<span id="cb354-11"><a href="#cb354-11" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">int</span> GetHashCode&lt;T1, T2, T3&gt;(T1 arg1, T2 arg2, T3 arg3)</span>
<span id="cb354-12"><a href="#cb354-12" aria-hidden="true"></a>    {</span>
<span id="cb354-13"><a href="#cb354-13" aria-hidden="true"></a>        unchecked</span>
<span id="cb354-14"><a href="#cb354-14" aria-hidden="true"></a>        {</span>
<span id="cb354-15"><a href="#cb354-15" aria-hidden="true"></a>            <span class="dt">int</span> hash = arg1.GetHashCode();</span>
<span id="cb354-16"><a href="#cb354-16" aria-hidden="true"></a>            hash = <span class="dv">31</span> * hash + arg2.GetHashCode();</span>
<span id="cb354-17"><a href="#cb354-17" aria-hidden="true"></a>            <span class="cf">return</span> <span class="dv">31</span> * hash + arg3.GetHashCode();</span>
<span id="cb354-18"><a href="#cb354-18" aria-hidden="true"></a>        }</span>
<span id="cb354-19"><a href="#cb354-19" aria-hidden="true"></a>    }</span>
<span id="cb354-20"><a href="#cb354-20" aria-hidden="true"></a></span>
<span id="cb354-21"><a href="#cb354-21" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">int</span> GetHashCode&lt;T1, T2, T3, T4&gt;(T1 arg1, T2 arg2, T3 arg3, </span>
<span id="cb354-22"><a href="#cb354-22" aria-hidden="true"></a>        T4 arg4)</span>
<span id="cb354-23"><a href="#cb354-23" aria-hidden="true"></a>    {</span>
<span id="cb354-24"><a href="#cb354-24" aria-hidden="true"></a>        unchecked</span>
<span id="cb354-25"><a href="#cb354-25" aria-hidden="true"></a>        {</span>
<span id="cb354-26"><a href="#cb354-26" aria-hidden="true"></a>            <span class="dt">int</span> hash = arg1.GetHashCode();</span>
<span id="cb354-27"><a href="#cb354-27" aria-hidden="true"></a>            hash = <span class="dv">31</span> * hash + arg2.GetHashCode();</span>
<span id="cb354-28"><a href="#cb354-28" aria-hidden="true"></a>            hash = <span class="dv">31</span> * hash + arg3.GetHashCode();</span>
<span id="cb354-29"><a href="#cb354-29" aria-hidden="true"></a>            <span class="cf">return</span> <span class="dv">31</span> * hash + arg4.GetHashCode();</span>
<span id="cb354-30"><a href="#cb354-30" aria-hidden="true"></a>        }</span>
<span id="cb354-31"><a href="#cb354-31" aria-hidden="true"></a>    }</span>
<span id="cb354-32"><a href="#cb354-32" aria-hidden="true"></a></span>
<span id="cb354-33"><a href="#cb354-33" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">int</span> GetHashCode&lt;T&gt;(T[] list)</span>
<span id="cb354-34"><a href="#cb354-34" aria-hidden="true"></a>    {</span>
<span id="cb354-35"><a href="#cb354-35" aria-hidden="true"></a>        unchecked</span>
<span id="cb354-36"><a href="#cb354-36" aria-hidden="true"></a>        {</span>
<span id="cb354-37"><a href="#cb354-37" aria-hidden="true"></a>            <span class="dt">int</span> hash = <span class="dv">0</span>;</span>
<span id="cb354-38"><a href="#cb354-38" aria-hidden="true"></a>            foreach (var item in list)</span>
<span id="cb354-39"><a href="#cb354-39" aria-hidden="true"></a>            {</span>
<span id="cb354-40"><a href="#cb354-40" aria-hidden="true"></a>                hash = <span class="dv">31</span> * hash + item.GetHashCode();</span>
<span id="cb354-41"><a href="#cb354-41" aria-hidden="true"></a>            }</span>
<span id="cb354-42"><a href="#cb354-42" aria-hidden="true"></a>            <span class="cf">return</span> hash;</span>
<span id="cb354-43"><a href="#cb354-43" aria-hidden="true"></a>        }</span>
<span id="cb354-44"><a href="#cb354-44" aria-hidden="true"></a>    }</span>
<span id="cb354-45"><a href="#cb354-45" aria-hidden="true"></a></span>
<span id="cb354-46"><a href="#cb354-46" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">int</span> GetHashCode&lt;T&gt;(IEnumerable&lt;T&gt; list)</span>
<span id="cb354-47"><a href="#cb354-47" aria-hidden="true"></a>    {</span>
<span id="cb354-48"><a href="#cb354-48" aria-hidden="true"></a>        unchecked</span>
<span id="cb354-49"><a href="#cb354-49" aria-hidden="true"></a>        {</span>
<span id="cb354-50"><a href="#cb354-50" aria-hidden="true"></a>            <span class="dt">int</span> hash = <span class="dv">0</span>;</span>
<span id="cb354-51"><a href="#cb354-51" aria-hidden="true"></a>            foreach (var item in list)</span>
<span id="cb354-52"><a href="#cb354-52" aria-hidden="true"></a>            {</span>
<span id="cb354-53"><a href="#cb354-53" aria-hidden="true"></a>                hash = <span class="dv">31</span> * hash + item.GetHashCode();</span>
<span id="cb354-54"><a href="#cb354-54" aria-hidden="true"></a>            }</span>
<span id="cb354-55"><a href="#cb354-55" aria-hidden="true"></a>            <span class="cf">return</span> hash;</span>
<span id="cb354-56"><a href="#cb354-56" aria-hidden="true"></a>        }</span>
<span id="cb354-57"><a href="#cb354-57" aria-hidden="true"></a>    }</span>
<span id="cb354-58"><a href="#cb354-58" aria-hidden="true"></a></span>
<span id="cb354-59"><a href="#cb354-59" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;summary&gt;</span></span>
<span id="cb354-60"><a href="#cb354-60" aria-hidden="true"></a>    <span class="co">/// Gets a hashcode for a collection for that the order of items </span></span>
<span id="cb354-61"><a href="#cb354-61" aria-hidden="true"></a>    <span class="co">/// does not matter.</span></span>
<span id="cb354-62"><a href="#cb354-62" aria-hidden="true"></a>    <span class="co">/// So {1, 2, 3} and {3, 2, 1} will get same hash code.</span></span>
<span id="cb354-63"><a href="#cb354-63" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;/summary&gt;</span></span>
<span id="cb354-64"><a href="#cb354-64" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">int</span> GetHashCodeForOrderNoMatterCollection&lt;T&gt;(</span>
<span id="cb354-65"><a href="#cb354-65" aria-hidden="true"></a>        IEnumerable&lt;T&gt; list)</span>
<span id="cb354-66"><a href="#cb354-66" aria-hidden="true"></a>    {</span>
<span id="cb354-67"><a href="#cb354-67" aria-hidden="true"></a>        unchecked</span>
<span id="cb354-68"><a href="#cb354-68" aria-hidden="true"></a>        {</span>
<span id="cb354-69"><a href="#cb354-69" aria-hidden="true"></a>            <span class="dt">int</span> hash = <span class="dv">0</span>;</span>
<span id="cb354-70"><a href="#cb354-70" aria-hidden="true"></a>            <span class="dt">int</span> count = <span class="dv">0</span>;</span>
<span id="cb354-71"><a href="#cb354-71" aria-hidden="true"></a>            foreach (var item in list)</span>
<span id="cb354-72"><a href="#cb354-72" aria-hidden="true"></a>            {</span>
<span id="cb354-73"><a href="#cb354-73" aria-hidden="true"></a>                hash += item.GetHashCode();</span>
<span id="cb354-74"><a href="#cb354-74" aria-hidden="true"></a>                count++;</span>
<span id="cb354-75"><a href="#cb354-75" aria-hidden="true"></a>            }</span>
<span id="cb354-76"><a href="#cb354-76" aria-hidden="true"></a>            <span class="cf">return</span> <span class="dv">31</span> * hash + count.GetHashCode();</span>
<span id="cb354-77"><a href="#cb354-77" aria-hidden="true"></a>        }</span>
<span id="cb354-78"><a href="#cb354-78" aria-hidden="true"></a>    }</span>
<span id="cb354-79"><a href="#cb354-79" aria-hidden="true"></a></span>
<span id="cb354-80"><a href="#cb354-80" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;summary&gt;</span></span>
<span id="cb354-81"><a href="#cb354-81" aria-hidden="true"></a>    <span class="co">/// Alternative way to get a hashcode is to use a fluent </span></span>
<span id="cb354-82"><a href="#cb354-82" aria-hidden="true"></a>    <span class="co">/// interface like this:</span><span class="kw">&lt;br</span><span class="ot"> </span><span class="kw">/&gt;</span></span>
<span id="cb354-83"><a href="#cb354-83" aria-hidden="true"></a>    <span class="co">/// return 0.CombineHashCode(field1).CombineHashCode(field2).</span></span>
<span id="cb354-84"><a href="#cb354-84" aria-hidden="true"></a>    <span class="co">///     CombineHashCode(field3);</span></span>
<span id="cb354-85"><a href="#cb354-85" aria-hidden="true"></a>    <span class="co">/// </span><span class="kw">&lt;/summary&gt;</span></span>
<span id="cb354-86"><a href="#cb354-86" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">int</span> CombineHashCode&lt;T&gt;(this <span class="dt">int</span> hashCode, T arg)</span>
<span id="cb354-87"><a href="#cb354-87" aria-hidden="true"></a>    {</span>
<span id="cb354-88"><a href="#cb354-88" aria-hidden="true"></a>        unchecked</span>
<span id="cb354-89"><a href="#cb354-89" aria-hidden="true"></a>        {</span>
<span id="cb354-90"><a href="#cb354-90" aria-hidden="true"></a>            <span class="cf">return</span> <span class="dv">31</span> * hashCode + arg.GetHashCode();   </span>
<span id="cb354-91"><a href="#cb354-91" aria-hidden="true"></a>        }</span>
<span id="cb354-92"><a href="#cb354-92" aria-hidden="true"></a>    }</span></code></pre></div>
<p>Also it has extension method to provide a fluent interface, so you can use it like this:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true"></a>public override <span class="dt">int</span> GetHashCode()</span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true"></a>{</span>
<span id="cb355-3"><a href="#cb355-3" aria-hidden="true"></a>    <span class="cf">return</span> HashHelper.GetHashCode(Manufacturer, PartN, Quantity);</span>
<span id="cb355-4"><a href="#cb355-4" aria-hidden="true"></a>}</span></code></pre></div>
<p>or like this:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true"></a>public override <span class="dt">int</span> GetHashCode()</span>
<span id="cb356-2"><a href="#cb356-2" aria-hidden="true"></a>{</span>
<span id="cb356-3"><a href="#cb356-3" aria-hidden="true"></a>    <span class="cf">return</span> <span class="fl">0.</span><span class="er">CombineHashCode</span>(Manufacturer)</span>
<span id="cb356-4"><a href="#cb356-4" aria-hidden="true"></a>        .CombineHashCode(PartN)</span>
<span id="cb356-5"><a href="#cb356-5" aria-hidden="true"></a>        .CombineHashCode(Quantity);</span>
<span id="cb356-6"><a href="#cb356-6" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="implement-stack-using-two-queues-score-190469-in-2017" class="level3">
<h3>64: Implement Stack using Two Queues (score <a href="https://stackoverflow.com/q/688276.html">190469</a> in 2017)</h3>
<section id="question-63" class="level4">
<h4>Question</h4>
<p>A similar question was asked earlier <a href="https://stackoverflow.com/questions/69192/using-stack-as-queue">there</a>, but the question here is the reverse of it, using two queues as a stack. The question…</p>
<p>Given two queues with their standard operations (<code>enqueue</code>, <code>dequeue</code>, <code>isempty</code>, <code>size</code>), implement a stack with its standard operations (<code>pop</code>, <code>push</code>, <code>isempty</code>, <code>size</code>).</p>
<p>There should be <strong>two</strong> versions of the solution.</p>
<ul>
<li>
Version <strong>A</strong>: The stack should be efficient when pushing an item; and
</li>
<li>
Version <strong>B</strong>: The stack should be efficient when popping an item.
</li>
</ul>
<p>I am interested in the algorithm more than any specific language implementations. However, I welcome solutions expressed in languages which I am familiar (<a href="/questions/tagged/java" class="post-tag" title="show questions tagged &
#39;java&#39;" rel="tag">java</a>,<a href="/questions/tagged/c%23" class="post-tag" title="show questions tagged &#39;c#&#39;" rel="tag">c#</a>,<a href="/questions/tagged/python" class="post-tag" title="show questions tagged &#39;python&#39;" rel="tag">python</a>,<a href="/questions/tagged/vb" class="post-tag" title="show questions tagged &#39;vb&#39;" rel="tag">vb</a>,<a href="/questions/tagged/javascript" class="post-tag" title="show questions tagged &#39;javascript&#39;" rel="tag">javascript</a>,<a href="/questions/tagged/php" class="post-tag" title="show questions tagged &#39;php&#39;" rel="tag">php</a>).</p>
</section>
<section id="answer-accepted-score-190" class="level4">
<h4>Answer accepted (score 190)</h4>
<p>Version A (efficient push):</p>
<ul>
<li>
<p>push:</p>
<ul>
<li>
enqueue in queue1
</li>
</ul>
</li>
<li>
<p>pop:</p>
<ul>
<li>
while size of queue1 is bigger than 1, pipe dequeued items from queue1 into queue2
</li>
<li>
dequeue and return the last item of queue1, then switch the names of queue1 and queue2
</li>
</ul>
</li>
</ul>
<p>Version B (efficient pop):</p>
<ul>
<li>
<p>push:</p>
<ul>
<li>
enqueue in queue2
</li>
<li>
enqueue all items of queue1 in queue2, then switch the names of queue1 and queue2
</li>
</ul>
</li>
<li>
<p>pop:</p>
<ul>
<li>
deqeue from queue1
</li>
</ul>
</li>
</ul>
</section>
<section id="answer-2-score-68" class="level4">
<h4>Answer 2 (score 68)</h4>
<p>The easiest (and maybe only) way of doing this is by pushing new elements into the empty queue, and then dequeuing the other and enqeuing into the previously empty queue. With this way the latest is always at the front of the queue. This would be version B, for version A you just reverse the process by dequeuing the elements into the second queue except for the last one.</p>
<p>Step 0:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true"></a><span class="st">&quot;Stack&quot;</span></span>
<span id="cb357-2"><a href="#cb357-2" aria-hidden="true"></a>+---+---+---+---+---+</span>
<span id="cb357-3"><a href="#cb357-3" aria-hidden="true"></a>|   |   |   |   |   |</span>
<span id="cb357-4"><a href="#cb357-4" aria-hidden="true"></a>+---+---+---+---+---+</span>
<span id="cb357-5"><a href="#cb357-5" aria-hidden="true"></a></span>
<span id="cb357-6"><a href="#cb357-6" aria-hidden="true"></a>Queue A                Queue B</span>
<span id="cb357-7"><a href="#cb357-7" aria-hidden="true"></a>+---+---+---+---+---+  +---+---+---+---+---+</span>
<span id="cb357-8"><a href="#cb357-8" aria-hidden="true"></a>|   |   |   |   |   |  |   |   |   |   |   |</span>
<span id="cb357-9"><a href="#cb357-9" aria-hidden="true"></a>+---+---+---+---+---+  +---+---+---+---+---+</span></code></pre></div>
<p>Step 1:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true"></a><span class="st">&quot;Stack&quot;</span></span>
<span id="cb358-2"><a href="#cb358-2" aria-hidden="true"></a>+---+---+---+---+---+</span>
<span id="cb358-3"><a href="#cb358-3" aria-hidden="true"></a>| <span class="dv">1</span> |   |   |   |   |</span>
<span id="cb358-4"><a href="#cb358-4" aria-hidden="true"></a>+---+---+---+---+---+</span>
<span id="cb358-5"><a href="#cb358-5" aria-hidden="true"></a></span>
<span id="cb358-6"><a href="#cb358-6" aria-hidden="true"></a>Queue A                Queue B</span>
<span id="cb358-7"><a href="#cb358-7" aria-hidden="true"></a>+---+---+---+---+---+  +---+---+---+---+---+</span>
<span id="cb358-8"><a href="#cb358-8" aria-hidden="true"></a>| <span class="dv">1</span> |   |   |   |   |  |   |   |   |   |   |</span>
<span id="cb358-9"><a href="#cb358-9" aria-hidden="true"></a>+---+---+---+---+---+  +---+---+---+---+---+</span></code></pre></div>
<p>Step 2:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true"></a><span class="st">&quot;Stack&quot;</span></span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true"></a>+---+---+---+---+---+</span>
<span id="cb359-3"><a href="#cb359-3" aria-hidden="true"></a>| <span class="dv">2</span> | <span class="dv">1</span> |   |   |   |</span>
<span id="cb359-4"><a href="#cb359-4" aria-hidden="true"></a>+---+---+---+---+---+</span>
<span id="cb359-5"><a href="#cb359-5" aria-hidden="true"></a></span>
<span id="cb359-6"><a href="#cb359-6" aria-hidden="true"></a>Queue A                Queue B</span>
<span id="cb359-7"><a href="#cb359-7" aria-hidden="true"></a>+---+---+---+---+---+  +---+---+---+---+---+</span>
<span id="cb359-8"><a href="#cb359-8" aria-hidden="true"></a>|   |   |   |   |   |  | <span class="dv">2</span> | <span class="dv">1</span> |   |   |   |</span>
<span id="cb359-9"><a href="#cb359-9" aria-hidden="true"></a>+---+---+---+---+---+  +---+---+---+---+---+</span></code></pre></div>
<p>Step 3:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true"></a><span class="st">&quot;Stack&quot;</span></span>
<span id="cb360-2"><a href="#cb360-2" aria-hidden="true"></a>+---+---+---+---+---+</span>
<span id="cb360-3"><a href="#cb360-3" aria-hidden="true"></a>| <span class="dv">3</span> | <span class="dv">2</span> | <span class="dv">1</span> |   |   |</span>
<span id="cb360-4"><a href="#cb360-4" aria-hidden="true"></a>+---+---+---+---+---+</span>
<span id="cb360-5"><a href="#cb360-5" aria-hidden="true"></a></span>
<span id="cb360-6"><a href="#cb360-6" aria-hidden="true"></a>Queue A                Queue B</span>
<span id="cb360-7"><a href="#cb360-7" aria-hidden="true"></a>+---+---+---+---+---+  +---+---+---+---+---+</span>
<span id="cb360-8"><a href="#cb360-8" aria-hidden="true"></a>| <span class="dv">3</span> | <span class="dv">2</span> | <span class="dv">1</span> |   |   |  |   |   |   |   |   |</span>
<span id="cb360-9"><a href="#cb360-9" aria-hidden="true"></a>+---+---+---+---+---+  +---+---+---+---+---+</span></code></pre></div>
</section>
<section id="answer-3-score-50" class="level4">
<h4>Answer 3 (score 50)</h4>
<p>We can do this with one queue:</p>
<p>push:</p>
<ol>
<li>
enqueue new element.
</li>
<li>
If <code>n</code> is the number of elements in the queue, then remove and insert element <code>n-1</code> times.
</li>
</ol>
<p>pop:</p>
<ol>
<li>
dequeue
</li>
</ol>
<p>.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true"></a>push <span class="dv">1</span></span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true"></a></span>
<span id="cb361-3"><a href="#cb361-3" aria-hidden="true"></a></span>
<span id="cb361-4"><a href="#cb361-4" aria-hidden="true"></a>front                     </span>
<span id="cb361-5"><a href="#cb361-5" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-6"><a href="#cb361-6" aria-hidden="true"></a>| <span class="dv">1</span>  |    |    |    |    |    |    insert <span class="dv">1</span></span>
<span id="cb361-7"><a href="#cb361-7" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-8"><a href="#cb361-8" aria-hidden="true"></a></span>
<span id="cb361-9"><a href="#cb361-9" aria-hidden="true"></a></span>
<span id="cb361-10"><a href="#cb361-10" aria-hidden="true"></a>push2</span>
<span id="cb361-11"><a href="#cb361-11" aria-hidden="true"></a></span>
<span id="cb361-12"><a href="#cb361-12" aria-hidden="true"></a>front                     </span>
<span id="cb361-13"><a href="#cb361-13" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-14"><a href="#cb361-14" aria-hidden="true"></a>| <span class="dv">1</span>  | <span class="dv">2</span>  |    |    |    |    |    insert <span class="dv">2</span></span>
<span id="cb361-15"><a href="#cb361-15" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-16"><a href="#cb361-16" aria-hidden="true"></a></span>
<span id="cb361-17"><a href="#cb361-17" aria-hidden="true"></a>     front                     </span>
<span id="cb361-18"><a href="#cb361-18" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-19"><a href="#cb361-19" aria-hidden="true"></a>|    | <span class="dv">2</span>  |  <span class="dv">1</span> |    |    |    |    remove and insert <span class="dv">1</span></span>
<span id="cb361-20"><a href="#cb361-20" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-21"><a href="#cb361-21" aria-hidden="true"></a></span>
<span id="cb361-22"><a href="#cb361-22" aria-hidden="true"></a></span>
<span id="cb361-23"><a href="#cb361-23" aria-hidden="true"></a></span>
<span id="cb361-24"><a href="#cb361-24" aria-hidden="true"></a></span>
<span id="cb361-25"><a href="#cb361-25" aria-hidden="true"></a> insert <span class="dv">3</span></span>
<span id="cb361-26"><a href="#cb361-26" aria-hidden="true"></a></span>
<span id="cb361-27"><a href="#cb361-27" aria-hidden="true"></a></span>
<span id="cb361-28"><a href="#cb361-28" aria-hidden="true"></a>      front                     </span>
<span id="cb361-29"><a href="#cb361-29" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-30"><a href="#cb361-30" aria-hidden="true"></a>|    | <span class="dv">2</span>  |  <span class="dv">1</span> |  <span class="dv">3</span> |    |    |    insert <span class="dv">3</span></span>
<span id="cb361-31"><a href="#cb361-31" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-32"><a href="#cb361-32" aria-hidden="true"></a></span>
<span id="cb361-33"><a href="#cb361-33" aria-hidden="true"></a>           front                     </span>
<span id="cb361-34"><a href="#cb361-34" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-35"><a href="#cb361-35" aria-hidden="true"></a>|    |    |  <span class="dv">1</span> |  <span class="dv">3</span> |  <span class="dv">2</span> |    |    remove and insert <span class="dv">2</span></span>
<span id="cb361-36"><a href="#cb361-36" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-37"><a href="#cb361-37" aria-hidden="true"></a></span>
<span id="cb361-38"><a href="#cb361-38" aria-hidden="true"></a>                front                     </span>
<span id="cb361-39"><a href="#cb361-39" aria-hidden="true"></a>+----+----+----+----+----+----+</span>
<span id="cb361-40"><a href="#cb361-40" aria-hidden="true"></a>|    |    |    |  <span class="dv">3</span> |  <span class="dv">2</span> |  <span class="dv">1</span> |    remove and insert <span class="dv">1</span></span>
<span id="cb361-41"><a href="#cb361-41" aria-hidden="true"></a>+----+----+----+----+----+----+</span></code></pre></div>
<p>Sample implementation:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true"></a><span class="dt">int</span> stack_pop (queue_data *q)</span>
<span id="cb362-2"><a href="#cb362-2" aria-hidden="true"></a>{</span>
<span id="cb362-3"><a href="#cb362-3" aria-hidden="true"></a>  <span class="cf">return</span> queue_remove (q);</span>
<span id="cb362-4"><a href="#cb362-4" aria-hidden="true"></a>}</span>
<span id="cb362-5"><a href="#cb362-5" aria-hidden="true"></a></span>
<span id="cb362-6"><a href="#cb362-6" aria-hidden="true"></a><span class="dt">void</span> stack_push (queue_data *q, <span class="dt">int</span> val)</span>
<span id="cb362-7"><a href="#cb362-7" aria-hidden="true"></a>{</span>
<span id="cb362-8"><a href="#cb362-8" aria-hidden="true"></a>  <span class="dt">int</span> old_count = queue_get_element_count (q), i;</span>
<span id="cb362-9"><a href="#cb362-9" aria-hidden="true"></a></span>
<span id="cb362-10"><a href="#cb362-10" aria-hidden="true"></a>  queue_insert (q, val);</span>
<span id="cb362-11"><a href="#cb362-11" aria-hidden="true"></a>  <span class="cf">for</span> (i=<span class="dv">0</span>; i&lt;old_count; i++)</span>
<span id="cb362-12"><a href="#cb362-12" aria-hidden="true"></a>  {</span>
<span id="cb362-13"><a href="#cb362-13" aria-hidden="true"></a>    queue_insert (q, queue_remove (q));</span>
<span id="cb362-14"><a href="#cb362-14" aria-hidden="true"></a>  }</span>
<span id="cb362-15"><a href="#cb362-15" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="the-most-efficient-way-to-implement-an-integer-based-power-function-powint-int-score-190337-in-2015" class="level3">
<h3>65: The most efficient way to implement an integer based power function pow(int, int) (score <a href="https://stackoverflow.com/q/101439.html">190337</a> in 2015)</h3>
<section id="question-64" class="level4">
<h4>Question</h4>
<p>What is the most efficient way given to raise an integer to the power of another integer in C?</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true"></a><span class="co">// 2^3</span></span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true"></a>pow(<span class="dv">2</span>,<span class="dv">3</span>) == <span class="dv">8</span></span>
<span id="cb363-3"><a href="#cb363-3" aria-hidden="true"></a></span>
<span id="cb363-4"><a href="#cb363-4" aria-hidden="true"></a><span class="co">// 5^5</span></span>
<span id="cb363-5"><a href="#cb363-5" aria-hidden="true"></a>pow(<span class="dv">5</span>,<span class="dv">5</span>) == <span class="dv">3125</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-373" class="level4">
<h4>Answer accepted (score 373)</h4>
<p>Exponentiation by squaring.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true"></a><span class="dt">int</span> ipow(<span class="dt">int</span> base, <span class="dt">int</span> exp)</span>
<span id="cb364-2"><a href="#cb364-2" aria-hidden="true"></a>{</span>
<span id="cb364-3"><a href="#cb364-3" aria-hidden="true"></a>    <span class="dt">int</span> result = <span class="dv">1</span>;</span>
<span id="cb364-4"><a href="#cb364-4" aria-hidden="true"></a>    <span class="cf">for</span> (;;)</span>
<span id="cb364-5"><a href="#cb364-5" aria-hidden="true"></a>    {</span>
<span id="cb364-6"><a href="#cb364-6" aria-hidden="true"></a>        <span class="cf">if</span> (exp &amp; <span class="dv">1</span>)</span>
<span id="cb364-7"><a href="#cb364-7" aria-hidden="true"></a>            result *= base;</span>
<span id="cb364-8"><a href="#cb364-8" aria-hidden="true"></a>        exp &gt;&gt;= <span class="dv">1</span>;</span>
<span id="cb364-9"><a href="#cb364-9" aria-hidden="true"></a>        <span class="cf">if</span> (!exp)</span>
<span id="cb364-10"><a href="#cb364-10" aria-hidden="true"></a>            <span class="cf">break</span>;</span>
<span id="cb364-11"><a href="#cb364-11" aria-hidden="true"></a>        base *= base;</span>
<span id="cb364-12"><a href="#cb364-12" aria-hidden="true"></a>    }</span>
<span id="cb364-13"><a href="#cb364-13" aria-hidden="true"></a></span>
<span id="cb364-14"><a href="#cb364-14" aria-hidden="true"></a>    <span class="cf">return</span> result;</span>
<span id="cb364-15"><a href="#cb364-15" aria-hidden="true"></a>}</span></code></pre></div>
<p>This is the standard method for doing modular exponentiation for huge numbers in asymmetric cryptography.</p>
</section>
<section id="answer-2-score-66" class="level4">
<h4>Answer 2 (score 66)</h4>
<p>Note that <a href="https://en.wikipedia.org/wiki/Exponentiation_by_squaring" rel="noreferrer">exponentiation by squaring</a> is not the most optimal method. It is probably the best you can do as a general method that works for all exponent values, but for a specific exponent value there might be a better sequence that needs fewer multiplications.</p>
<p>For instance, if you want to compute x^15, the method of exponentiation by squaring will give you:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true"></a>x^<span class="dv">15</span> = (x^<span class="dv">7</span>)*(x^<span class="dv">7</span>)*x </span>
<span id="cb365-2"><a href="#cb365-2" aria-hidden="true"></a>x^<span class="dv">7</span> = (x^<span class="dv">3</span>)*(x^<span class="dv">3</span>)*x </span>
<span id="cb365-3"><a href="#cb365-3" aria-hidden="true"></a>x^<span class="dv">3</span> = x*x*x</span></code></pre></div>
<p>This is a total of 6 multiplications.</p>
<p>It turns out this can be done using “just” 5 multiplications via <a href="https://en.wikipedia.org/wiki/Addition-chain_exponentiation" rel="noreferrer">addition-chain exponentiation</a>.</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true"></a>n*n = n^<span class="dv">2</span></span>
<span id="cb366-2"><a href="#cb366-2" aria-hidden="true"></a>n^<span class="dv">2</span>*n = n^<span class="dv">3</span></span>
<span id="cb366-3"><a href="#cb366-3" aria-hidden="true"></a>n^<span class="dv">3</span>*n^<span class="dv">3</span> = n^<span class="dv">6</span></span>
<span id="cb366-4"><a href="#cb366-4" aria-hidden="true"></a>n^<span class="dv">6</span>*n^<span class="dv">6</span> = n^<span class="dv">12</span></span>
<span id="cb366-5"><a href="#cb366-5" aria-hidden="true"></a>n^<span class="dv">12</span>*n^<span class="dv">3</span> = n^<span class="dv">15</span></span></code></pre></div>
<p>There are no efficient algorithms to find this optimal sequence of multiplications. From <a href="https://en.wikipedia.org/wiki/Addition-chain_exponentiation" rel="noreferrer">Wikipedia</a>:</p>
<blockquote>
The problem of finding the shortest addition chain cannot be solved by dynamic programming, because it does not satisfy the assumption of optimal substructure. That is, it is not sufficient to decompose the power into smaller powers, each of which is computed minimally, since the addition chains for the smaller powers may be related (to share computations). For example, in the shortest addition chain for a¹⁵ above, the subproblem for a⁶ must be computed as (a³)² since a³ is re-used (as opposed to, say, a⁶ = a²(a²)², which also requires three multiplies).
</blockquote>
</section>
<section id="answer-3-score-19" class="level4">
<h4>Answer 3 (score 19)</h4>
<p>If you need to raise 2 to a power. The fastest way to do so is to bit shift by the power.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true"></a><span class="dv">2</span> ** <span class="dv">3</span> == <span class="dv">1</span> &lt;&lt; <span class="dv">3</span> == <span class="dv">8</span></span>
<span id="cb367-2"><a href="#cb367-2" aria-hidden="true"></a><span class="dv">2</span> ** <span class="dv">30</span> == <span class="dv">1</span> &lt;&lt; <span class="dv">30</span> == <span class="dv">1073741824</span> (A Gigabyte)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="reverse-the-ordering-of-words-in-a-string-score-189299-in-2012" class="level3">
<h3>66: Reverse the ordering of words in a string (score <a href="https://stackoverflow.com/q/1009160.html">189299</a> in 2012)</h3>
<section id="question-65" class="level4">
<h4>Question</h4>
<p>I have this <code>string s1 = "My name is X Y Z"</code> and I want to reverse the order of the words so that <code>s1 = "Z Y X is name My"</code>.</p>
<p>I can do it using an additional array. I thought hard but is it possible to do it inplace (without using additional data structures) and with the time complexity being O(n)?</p>
</section>
<section id="answer-accepted-score-129" class="level4">
<h4>Answer accepted (score 129)</h4>
<p>Reverse the entire string, then reverse the letters of each individual word.</p>
<p>After the first pass the string will be</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true"></a>s1 = <span class="st">&quot;Z Y X si eman yM&quot;</span></span></code></pre></div>
<p>and after the second pass it will be</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb369-1"><a href="#cb369-1" aria-hidden="true"></a>s1 = <span class="st">&quot;Z Y X is name My&quot;</span></span></code></pre></div>
</section>
<section id="answer-2-score-33" class="level4">
<h4>Answer 2 (score 33)</h4>
<p><strong>reverse the string and then, in a second pass, reverse each word…</strong></p>
<p>in c #, completely in-place without additional arrays:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true"></a><span class="dt">static</span> <span class="dt">char</span>[] ReverseAllWords(<span class="dt">char</span>[] in_text)</span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true"></a>{</span>
<span id="cb370-3"><a href="#cb370-3" aria-hidden="true"></a>    <span class="dt">int</span> lindex = <span class="dv">0</span>;</span>
<span id="cb370-4"><a href="#cb370-4" aria-hidden="true"></a>    <span class="dt">int</span> rindex = in_text.Length - <span class="dv">1</span>;</span>
<span id="cb370-5"><a href="#cb370-5" aria-hidden="true"></a>    <span class="cf">if</span> (rindex &gt; <span class="dv">1</span>)</span>
<span id="cb370-6"><a href="#cb370-6" aria-hidden="true"></a>    {</span>
<span id="cb370-7"><a href="#cb370-7" aria-hidden="true"></a>        <span class="co">//reverse complete phrase</span></span>
<span id="cb370-8"><a href="#cb370-8" aria-hidden="true"></a>        in_text = ReverseString(in_text, <span class="dv">0</span>, rindex);</span>
<span id="cb370-9"><a href="#cb370-9" aria-hidden="true"></a></span>
<span id="cb370-10"><a href="#cb370-10" aria-hidden="true"></a>        <span class="co">//reverse each word in resultant reversed phrase</span></span>
<span id="cb370-11"><a href="#cb370-11" aria-hidden="true"></a>        <span class="cf">for</span> (rindex = <span class="dv">0</span>; rindex &lt;= in_text.Length; rindex++)</span>
<span id="cb370-12"><a href="#cb370-12" aria-hidden="true"></a>        {</span>
<span id="cb370-13"><a href="#cb370-13" aria-hidden="true"></a>            <span class="cf">if</span> (rindex == in_text.Length || in_text[rindex] == <span class="ch">&#39; &#39;</span>)</span>
<span id="cb370-14"><a href="#cb370-14" aria-hidden="true"></a>            {</span>
<span id="cb370-15"><a href="#cb370-15" aria-hidden="true"></a>                in_text = ReverseString(in_text, lindex, rindex - <span class="dv">1</span>);</span>
<span id="cb370-16"><a href="#cb370-16" aria-hidden="true"></a>                lindex = rindex + <span class="dv">1</span>;</span>
<span id="cb370-17"><a href="#cb370-17" aria-hidden="true"></a>            }</span>
<span id="cb370-18"><a href="#cb370-18" aria-hidden="true"></a>        }</span>
<span id="cb370-19"><a href="#cb370-19" aria-hidden="true"></a>    }</span>
<span id="cb370-20"><a href="#cb370-20" aria-hidden="true"></a>    <span class="cf">return</span> in_text;</span>
<span id="cb370-21"><a href="#cb370-21" aria-hidden="true"></a>}</span>
<span id="cb370-22"><a href="#cb370-22" aria-hidden="true"></a></span>
<span id="cb370-23"><a href="#cb370-23" aria-hidden="true"></a><span class="dt">static</span> <span class="dt">char</span>[] ReverseString(<span class="dt">char</span>[] intext, <span class="dt">int</span> lindex, <span class="dt">int</span> rindex)</span>
<span id="cb370-24"><a href="#cb370-24" aria-hidden="true"></a>{</span>
<span id="cb370-25"><a href="#cb370-25" aria-hidden="true"></a>    <span class="dt">char</span> tempc;</span>
<span id="cb370-26"><a href="#cb370-26" aria-hidden="true"></a>    <span class="cf">while</span> (lindex &lt; rindex)</span>
<span id="cb370-27"><a href="#cb370-27" aria-hidden="true"></a>    {</span>
<span id="cb370-28"><a href="#cb370-28" aria-hidden="true"></a>        tempc = intext[lindex];</span>
<span id="cb370-29"><a href="#cb370-29" aria-hidden="true"></a>        intext[lindex++] = intext[rindex];</span>
<span id="cb370-30"><a href="#cb370-30" aria-hidden="true"></a>        intext[rindex--] = tempc;</span>
<span id="cb370-31"><a href="#cb370-31" aria-hidden="true"></a>    }</span>
<span id="cb370-32"><a href="#cb370-32" aria-hidden="true"></a>    <span class="cf">return</span> intext;</span>
<span id="cb370-33"><a href="#cb370-33" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-14-2" class="level4">
<h4>Answer 3 (score 14)</h4>
<div class="sourceCode" id="cb371"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true"></a>Not exactly in place, but anyway: Python:</span>
<span id="cb371-2"><a href="#cb371-2" aria-hidden="true"></a></span>
<span id="cb371-3"><a href="#cb371-3" aria-hidden="true"></a>&gt;&gt;&gt; a = <span class="st">&quot;These pretzels are making me thirsty&quot;</span></span>
<span id="cb371-4"><a href="#cb371-4" aria-hidden="true"></a>&gt;&gt;&gt; <span class="st">&quot; &quot;</span>.join(a.split()[::-<span class="dv">1</span>])</span>
<span id="cb371-5"><a href="#cb371-5" aria-hidden="true"></a>&#39;thirsty me making are pretzels These&#39;</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="hash-function-for-string-score-187771-in-2011" class="level3">
<h3>67: hash function for string (score <a href="https://stackoverflow.com/q/7666509.html">187771</a> in 2011)</h3>
<section id="question-66" class="level4">
<h4>Question</h4>
<p>I’m working on hash table in C language and I’m testing hash function for string.</p>
<p>The first function I’ve tried is to add ascii code and use modulo (%100) but i’ve got poor results with the first test of data: 40 collisions for 130 words.</p>
<p>The final input data will contain 8 000 words (it’s a dictionnary stores in a file). The hash table is declared as int table[10000] and contains the position of the word in a txt file.</p>
<p>The first question is which is the best algorithm for hashing string ? and how to determinate the size of hash table ?</p>
<p>thanks in advance !</p>
<p>:-)</p>
</section>
<section id="answer-accepted-score-162-1" class="level4">
<h4>Answer accepted (score 162)</h4>
<p>I’ve had nice results with <a href="http://www.cse.yorku.ca/~oz/hash.html"><code>djb2</code></a> by Dan Bernstein.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true"></a><span class="dt">unsigned</span> <span class="dt">long</span></span>
<span id="cb372-2"><a href="#cb372-2" aria-hidden="true"></a>hash(<span class="dt">unsigned</span> <span class="dt">char</span> *str)</span>
<span id="cb372-3"><a href="#cb372-3" aria-hidden="true"></a>{</span>
<span id="cb372-4"><a href="#cb372-4" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">long</span> hash = <span class="dv">5381</span>;</span>
<span id="cb372-5"><a href="#cb372-5" aria-hidden="true"></a>    <span class="dt">int</span> c;</span>
<span id="cb372-6"><a href="#cb372-6" aria-hidden="true"></a></span>
<span id="cb372-7"><a href="#cb372-7" aria-hidden="true"></a>    <span class="cf">while</span> (c = *str++)</span>
<span id="cb372-8"><a href="#cb372-8" aria-hidden="true"></a>        hash = ((hash &lt;&lt; <span class="dv">5</span>) + hash) + c; <span class="co">/* hash * 33 + c */</span></span>
<span id="cb372-9"><a href="#cb372-9" aria-hidden="true"></a></span>
<span id="cb372-10"><a href="#cb372-10" aria-hidden="true"></a>    <span class="cf">return</span> hash;</span>
<span id="cb372-11"><a href="#cb372-11" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-20" class="level4">
<h4>Answer 2 (score 20)</h4>
<p>First, you generally do <em>not</em> want to use a cryptographic hash for a hash table. An algorithm that’s <em>very</em> fast by cryptographic standards is still excruciatingly slow by hash table standards.</p>
<p>Second, you want to ensure that every bit of the input can/will affect the result. One easy way to do that is to rotate the current result by some number of bits, then XOR the current hash code with the current byte. Repeat until you reach the end of the string. Note that you generally do <em>not</em> want the rotation to be an even multiple of the byte size either.</p>
<p>For example, assuming the common case of 8 bit bytes, you might rotate by 5 bits:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true"></a><span class="dt">int</span> hash(<span class="dt">char</span> <span class="dt">const</span> *input) { </span>
<span id="cb373-2"><a href="#cb373-2" aria-hidden="true"></a>    <span class="dt">int</span> result = <span class="bn">0x55555555</span>;</span>
<span id="cb373-3"><a href="#cb373-3" aria-hidden="true"></a></span>
<span id="cb373-4"><a href="#cb373-4" aria-hidden="true"></a>    <span class="cf">while</span> (*input) { </span>
<span id="cb373-5"><a href="#cb373-5" aria-hidden="true"></a>        result ^= *input++;</span>
<span id="cb373-6"><a href="#cb373-6" aria-hidden="true"></a>        result = rol(result, <span class="dv">5</span>);</span>
<span id="cb373-7"><a href="#cb373-7" aria-hidden="true"></a>    }</span>
<span id="cb373-8"><a href="#cb373-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>Edit: Also note that 10000 slots is rarely a good choice for a hash table size. You usually want one of two things: you either want a prime number as the size (required to ensure correctness with some types of hash resolution) or else a power of 2 (so reducing the value to the correct range can be done with a simple bit-mask).</p>
</section>
<section id="answer-3-score-8" class="level4">
<h4>Answer 3 (score 8)</h4>
<p>There are a number of existing hashtable implementations for C, from the C standard library hcreate/hdestroy/hsearch, to those in the <a href="http://apr.apache.org/">APR</a> and <a href="http://developer.gnome.org/glib/">glib</a>, which also provide prebuilt hash functions. I’d highly recommend using those rather than inventing your own hashtable or hash function; they’ve been optimized heavily for common use-cases.</p>
<p>If your dataset is static, however, your best solution is probably to use a <a href="http://en.wikipedia.org/wiki/Perfect_hash">perfect hash</a>. <a href="http://www.gnu.org/s/gperf/">gperf</a> will generate a perfect hash for you for a given dataset.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="why-is-quicksort-better-than-mergesort-score-187146-in-2013" class="level3">
<h3>68: Why is quicksort better than mergesort? (score <a href="https://stackoverflow.com/q/70402.html">187146</a> in 2013)</h3>
<section id="question-67" class="level4">
<h4>Question</h4>
<p>I was asked this question during an interview. They’re both O(nlogn) and yet most people use Quicksort instead of Mergesort. Why is that?</p>
</section>
<section id="answer-accepted-score-259" class="level4">
<h4>Answer accepted (score 259)</h4>
<p>Quicksort has O(<i>n</i><sup>2</sup>) worst-case runtime and O(<i>n</i>log<i>n</i>) average case runtime. However, it’s superior to merge sort in many scenarios because many factors influence an algorithm’s runtime, and, when taking them all together, quicksort wins out.</p>
<p>In particular, the often-quoted runtime of sorting algorithms refers to the number of comparisons or the number of swaps necessary to perform to sort the data. This is indeed a good measure of performance, especially since it’s independent of the underlying hardware design. However, other things – such as locality of reference (i.e. do we read lots of elements which are probably in cache?) – also play an important role on current hardware. Quicksort in particular requires little additional space and exhibits good cache locality, and this makes it faster than merge sort in many cases.</p>
<p>In addition, it’s very easy to avoid quicksort’s worst-case run time of O(<i>n</i><sup>2</sup>) almost entirely by using an appropriate choice of the pivot – such as picking it at random (this is an excellent strategy).</p>
<p>In practice, many modern implementations of quicksort (in particular libstdc++’s <code>std::sort</code>) are actually <a href="http://en.wikipedia.org/wiki/Introsort" rel="noreferrer">introsort</a>, whose theoretical worst-case is O(<i>n</i>log<i>n</i>), same as merge sort. It achieves this by limiting the recursion depth, and switching to a different algorithm (<a href="http://en.wikipedia.org/wiki/Heapsort" rel="noreferrer">heapsort</a>) once it exceeds log<i>n</i>.</p>
</section>
<section id="answer-2-score-280" class="level4">
<h4>Answer 2 (score 280)</h4>
<p>As many people have noted, the average case performance for quicksort is faster than mergesort. <strong>But</strong> this is only true if you are assuming constant time to access any piece of memory on demand.</p>
<p>In RAM this assumption is generally not too bad (it is not always true because of caches, but it is not too bad). However if your data structure is big enough to live on disk, then quicksort gets <em>killed</em> by the fact that your average disk does something like 200 random seeks per second. But that same disk has no trouble reading or writing megabytes per second of data sequentially. Which is exactly what mergesort does.</p>
<p>Therefore if data has to be sorted on disk, you really, really want to use some variation on mergesort. (Generally you quicksort sublists, then start merging them together above some size threshold.)</p>
<p>Furthermore if you have to do <em>anything</em> with datasets of that size, think hard about how to avoid seeks to disk. For instance this is why it is standard advice that you drop indexes before doing large data loads in databases, and then rebuild the index later. Maintaining the index during the load means constantly seeking to disk. By contrast if you drop the indexes, then the database can rebuild the index by first sorting the information to be dealt with (using a mergesort of course!) and then loading it into a BTREE datastructure for the index. (BTREEs are naturally kept in order, so you can load one from a sorted dataset with few seeks to disk.)</p>
<p>There have been a number of occasions where understanding how to avoid disk seeks has let me make data processing jobs take hours rather than days or weeks.</p>
</section>
<section id="answer-3-score-89-1" class="level4">
<h4>Answer 3 (score 89)</h4>
<p>Actually, QuickSort is O(n<sup>2</sup>). Its <em>average case</em> running time is O(nlog(n)), but its <em>worst-case</em> is O(n<sup>2</sup>), which occurs when you run it on a list that contains few unique items. Randomization takes O(n). Of course, this doesn’t change its worst case, it just prevents a malicious user from making your sort take a long time.</p>
<p>QuickSort is more popular because it:</p>
<ol>
<li>
Is in-place (MergeSort requires extra memory linear to number of elements to be sorted).
</li>
<li>
Has a small hidden constant.
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-calculate-an-angle-from-three-points-score-185647-in-2013" class="level3">
<h3>69: How to calculate an angle from three points? (score <a href="https://stackoverflow.com/q/1211212.html">185647</a> in 2013)</h3>
<section id="question-68" class="level4">
<h4>Question</h4>
<p>Lets say you have this:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true"></a>P1 = (x=<span class="dv">2</span>, y=<span class="dv">50</span>)</span>
<span id="cb374-2"><a href="#cb374-2" aria-hidden="true"></a>P2 = (x=<span class="dv">9</span>, y=<span class="dv">40</span>)</span>
<span id="cb374-3"><a href="#cb374-3" aria-hidden="true"></a>P3 = (x=<span class="dv">5</span>, y=<span class="dv">20</span>)</span></code></pre></div>
<p>
Assume that <code>P1</code> is the center point of a circle. It is always the same. I want the angle that is made up by <code>P2</code> and <code>P3</code>, or in other words the angle that is next to <code>P1</code>. The inner angle to be precise. It will always be an acute angle, so less than -90 degrees.
</p>
<p>I thought: Man, that’s simple geometry math. But I have looked for a formula for around 6 hours now, and only find people talking about complicated NASA stuff like arccos and vector scalar product stuff. My head feels like it’s in a fridge.</p>
<p>Some math gurus here that think this is a simple problem? I don’t think the programming language matters here, but for those who think it does: java and objective-c. I need it for both, but haven’t tagged it for these.</p>
</section>
<section id="answer-accepted-score-87" class="level4">
<h4>Answer accepted (score 87)</h4>
<p>If you mean the angle that P1 is the vertex of then using the <a href="https://www.mathsisfun.com/algebra/trig-cosine-law.html" rel="noreferrer">Law of Cosines</a> should work:</p>
<blockquote>
<p>
arccos<sup></sup>((P<sub>12</sub><sup>2</sup> + P<sub>13</sub><sup>2</sup> - P<sub>23</sub><sup>2</sup>) / (2 <em> P<sub>12</sub> </em> P<sub>13</sub>))
</p>
</blockquote>
<p>where P<sub>12</sub> is the length of the segment from P1 to P2, calculated by</p>
<blockquote>
<p>
sqrt((P1<sub>x</sub> - P2<sub>x</sub>)<sup>2</sup> + (P1<sub>y</sub> - P2<sub>y</sub>)<sup>2</sup>)
</p>
</blockquote>
</section>
<section id="answer-2-score-47" class="level4">
<h4>Answer 2 (score 47)</h4>
<p>It gets very simple if you think it as two vectors, one from point P1 to P2 and one from P1 to P3</p>
<p>
so:<br> a = (p1.x - p2.x, p1.y - p2.y)<br> b = (p1.x - p3.x, p1.y - p3.y)
</p>
<p>
You can then invert the dot product formula:<br> <img src="https://i.stack.imgur.com/3ZolF.png" alt="dot product"><br> to get the angle:<br> <img src="https://i.stack.imgur.com/WM5f7.png" alt="angle between two vectors">
</p>
<p>
Remember that <img src="https://i.stack.imgur.com/u6DBf.png" alt="dot product"> just means: a1<em>b1 + a2</em>b2 (just 2 dimensions here…)
</p>
</section>
<section id="answer-3-score-25-1" class="level4">
<h4>Answer 3 (score 25)</h4>
<p>The best way to deal with angle computation is to use <code>atan2(y, x)</code> that given a point <code>x, y</code> returns the angle from that point and the <code>X+</code> axis in respect to the origin.</p>
<p>Given that the computation is</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true"></a><span class="dt">double</span> result = atan2(P3.y - P1.y, P3.x - P1.x) -</span>
<span id="cb375-2"><a href="#cb375-2" aria-hidden="true"></a>                atan2(P2.y - P1.y, P2.x - P1.x);</span></code></pre></div>
<p>i.e. you basically translate the two points by <code>-P1</code> (in other words you translate everything so that <code>P1</code> ends up in the origin) and then you consider the difference of the absolute angles of <code>P3</code> and of <code>P2</code>.</p>
<p>The advantages of <code>atan2</code> is that the full circle is represented (you can get any number between -π and π) where instead with <code>acos</code> you need to handle several cases depending on the signs to compute the correct result.</p>
<p>The only singular point for <code>atan2</code> is <code>(0, 0)</code>… meaning that both <code>P2</code> and <code>P3</code> must be different from <code>P1</code> as in that case doesn’t make sense to talk about an angle.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-find-all-combinations-of-coins-when-given-some-dollar-value-score-185566-in-2019" class="level3">
<h3>70: How to find all combinations of coins when given some dollar value (score <a href="https://stackoverflow.com/q/1106929.html">185566</a> in 2019)</h3>
<section id="question-69" class="level4">
<h4>Question</h4>
<p>I found a piece of code that I was writing for interview prep few months ago.</p>
<p>According to the comment I had, it was trying to solve this problem:</p>
<blockquote>
<p>
Given some dollar value in cents (e.g. 200 = 2 dollars, 1000 = 10 dollars), find all the combinations of coins that make up the dollar value. There are only pennies (1¢), nickels (5¢), dimes (10¢), and quarters (25¢) allowed.
</p>
</blockquote>
<p>For example, if 100 was given, the answer should be:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true"></a><span class="dv">4</span> quarter(s) <span class="dv">0</span> dime(s) <span class="dv">0</span> nickel(s) <span class="dv">0</span> pennies  </span>
<span id="cb376-2"><a href="#cb376-2" aria-hidden="true"></a><span class="dv">3</span> quarter(s) <span class="dv">1</span> dime(s) <span class="dv">0</span> nickel(s) <span class="dv">15</span> pennies  </span>
<span id="cb376-3"><a href="#cb376-3" aria-hidden="true"></a>etc.</span></code></pre></div>
<p>I believe that this can be solved in both iterative and recursive ways. My recursive solution is quite buggy, and I was wondering how other people would solve this problem. The difficult part of this problem was making it as efficient as possible.</p>
</section>
<section id="answer-2-score-51-1" class="level4">
<h4>Answer 2 (score 51)</h4>
<p>I looked into this once a long time ago, and you can read my <a href="http://andrew.neitsch.ca/publications/m496pres1.nb.pdf" rel="noreferrer">little write-up on it</a>. Here’s the <a href="http://andrew.neitsch.ca/publications/m496pres1.nb" rel="noreferrer">Mathematica source</a>.</p>
<p>By using generating functions, you can get a closed-form constant-time solution to the problem. Graham, Knuth, and Patashnik’s <em>Concrete Mathematics</em> is the book for this, and contains a fairly extensive discussion of the problem. Essentially you define a polynomial where the <em>n</em>th coefficient is the number of ways of making change for <em>n</em> dollars.</p>
<p>Pages 4-5 of the writeup show how you can use Mathematica (or any other convenient computer algebra system) to compute the answer for 10<sup>10</sup>6 dollars in a couple seconds in three lines of code.</p>
<p>(And this was long enough ago that that’s a couple of seconds on a 75Mhz Pentium…)</p>
</section>
<section id="answer-3-score-42" class="level4">
<h4>Answer 3 (score 42)</h4>
<p><strong>Note</strong>: This only shows the number of ways.</p>
<p>Scala function:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true"></a>def countChange(money: Int, coins: List[Int]): Int =</span>
<span id="cb377-2"><a href="#cb377-2" aria-hidden="true"></a>  <span class="cf">if</span> (money == <span class="dv">0</span>) <span class="dv">1</span></span>
<span id="cb377-3"><a href="#cb377-3" aria-hidden="true"></a>  <span class="cf">else</span> <span class="cf">if</span> (coins.isEmpty || money &lt; <span class="dv">0</span>) <span class="dv">0</span></span>
<span id="cb377-4"><a href="#cb377-4" aria-hidden="true"></a>  <span class="cf">else</span> countChange(money - coins.head, coins) + countChange(money, coins.tail)</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="efficient-way-to-apply-multiple-filters-to-pandas-dataframe-or-series-score-184876-in" class="level3">
<h3>71: Efficient way to apply multiple filters to pandas DataFrame or Series (score <a href="https://stackoverflow.com/q/13611065.html">184876</a> in )</h3>
<section id="question-70" class="level4">
<h4>Question</h4>
<p>I have a scenario where a user wants to apply several filters to a Pandas DataFrame or Series object. Essentially, I want to efficiently chain a bunch of filtering (comparison operations) together that are specified at run-time by the user.</p>
<p>The filters should be additive (aka each one applied should narrow results).</p>
<p>I’m currently using <code>reindex()</code> but this creates a new object each time and copies the underlying data (if I understand the documentation correctly). So, this could be really inefficient when filtering a big Series or DataFrame.</p>
<p>I’m thinking that using <code>apply()</code>, <code>map()</code>, or something similar might be better. I’m pretty new to Pandas though so still trying to wrap my head around everything.</p>
<h5>
TL;DR
</h2>
<p>I want to take a dictionary of the following form and apply each operation to a given Series object and return a ‘filtered’ Series object.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true"></a>relops = {&#39;&gt;=&#39;: [<span class="dv">1</span>], &#39;&lt;=&#39;: [<span class="dv">1</span>]}</span></code></pre></div>
<h5>
Long Example
</h2>
<p>I’ll start with an example of what I have currently and just filtering a single Series object. Below is the function I’m currently using:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true"></a>   def apply_relops(series, relops):</span>
<span id="cb379-2"><a href="#cb379-2" aria-hidden="true"></a>        <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb379-3"><a href="#cb379-3" aria-hidden="true"></a>        Pass dictionary of relational operators to perform on given series object</span>
<span id="cb379-4"><a href="#cb379-4" aria-hidden="true"></a>        <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb379-5"><a href="#cb379-5" aria-hidden="true"></a>        <span class="cf">for</span> op, vals in relops.iteritems():</span>
<span id="cb379-6"><a href="#cb379-6" aria-hidden="true"></a>            op_func = ops[op]</span>
<span id="cb379-7"><a href="#cb379-7" aria-hidden="true"></a>            <span class="cf">for</span> val in vals:</span>
<span id="cb379-8"><a href="#cb379-8" aria-hidden="true"></a>                filtered = op_func(series, val)</span>
<span id="cb379-9"><a href="#cb379-9" aria-hidden="true"></a>                series = series.reindex(series[filtered])</span>
<span id="cb379-10"><a href="#cb379-10" aria-hidden="true"></a>        <span class="cf">return</span> series</span></code></pre></div>
<p>The user provides a dictionary with the operations they want to perform:</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true"></a>&gt;&gt;&gt; df = pandas.DataFrame({&#39;col1&#39;: [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>], &#39;col2&#39;: [<span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>]})</span>
<span id="cb380-2"><a href="#cb380-2" aria-hidden="true"></a>&gt;&gt;&gt; print df</span>
<span id="cb380-3"><a href="#cb380-3" aria-hidden="true"></a>&gt;&gt;&gt; print df</span>
<span id="cb380-4"><a href="#cb380-4" aria-hidden="true"></a>   col1  col2</span>
<span id="cb380-5"><a href="#cb380-5" aria-hidden="true"></a><span class="dv">0</span>     <span class="dv">0</span>    <span class="dv">10</span></span>
<span id="cb380-6"><a href="#cb380-6" aria-hidden="true"></a><span class="dv">1</span>     <span class="dv">1</span>    <span class="dv">11</span></span>
<span id="cb380-7"><a href="#cb380-7" aria-hidden="true"></a><span class="dv">2</span>     <span class="dv">2</span>    <span class="dv">12</span></span>
<span id="cb380-8"><a href="#cb380-8" aria-hidden="true"></a></span>
<span id="cb380-9"><a href="#cb380-9" aria-hidden="true"></a>&gt;&gt;&gt; from operator import le, ge</span>
<span id="cb380-10"><a href="#cb380-10" aria-hidden="true"></a>&gt;&gt;&gt; ops ={&#39;&gt;=&#39;: ge, &#39;&lt;=&#39;: le}</span>
<span id="cb380-11"><a href="#cb380-11" aria-hidden="true"></a>&gt;&gt;&gt; apply_relops(df[&#39;col1&#39;], {&#39;&gt;=&#39;: [<span class="dv">1</span>]})</span>
<span id="cb380-12"><a href="#cb380-12" aria-hidden="true"></a>col1</span>
<span id="cb380-13"><a href="#cb380-13" aria-hidden="true"></a><span class="dv">1</span>       <span class="dv">1</span></span>
<span id="cb380-14"><a href="#cb380-14" aria-hidden="true"></a><span class="dv">2</span>       <span class="dv">2</span></span>
<span id="cb380-15"><a href="#cb380-15" aria-hidden="true"></a>Name: col1</span>
<span id="cb380-16"><a href="#cb380-16" aria-hidden="true"></a>&gt;&gt;&gt; apply_relops(df[&#39;col1&#39;], relops = {&#39;&gt;=&#39;: [<span class="dv">1</span>], &#39;&lt;=&#39;: [<span class="dv">1</span>]})</span>
<span id="cb380-17"><a href="#cb380-17" aria-hidden="true"></a>col1</span>
<span id="cb380-18"><a href="#cb380-18" aria-hidden="true"></a><span class="dv">1</span>       <span class="dv">1</span></span>
<span id="cb380-19"><a href="#cb380-19" aria-hidden="true"></a>Name: col1</span></code></pre></div>
<p>Again, the ‘problem’ with my above approach is that I think there is a lot of possibly unnecessary copying of the data for the in-between steps.</p>
<p>Also, I would like to expand this so that the dictionary passed in can include the columns to operator on and filter an entire DataFrame based on the input dictionary. However, I’m assuming whatever works for the Series can be easily expanded to a DataFrame.</p>
</section>
<section id="answer-accepted-score-198" class="level4">
<h4>Answer accepted (score 198)</h4>
<p>Pandas (and numpy) allow for <a href="http://pandas.pydata.org/pandas-docs/dev/indexing.html
#boolean-indexing" rel="noreferrer">boolean indexing</a>, which will be much more efficient:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true"></a>In [<span class="dv">11</span>]: df.loc[df[&#39;col1&#39;] &gt;= <span class="dv">1</span>, &#39;col1&#39;]</span>
<span id="cb381-2"><a href="#cb381-2" aria-hidden="true"></a>Out[<span class="dv">11</span>]: </span>
<span id="cb381-3"><a href="#cb381-3" aria-hidden="true"></a><span class="dv">1</span>    <span class="dv">1</span></span>
<span id="cb381-4"><a href="#cb381-4" aria-hidden="true"></a><span class="dv">2</span>    <span class="dv">2</span></span>
<span id="cb381-5"><a href="#cb381-5" aria-hidden="true"></a>Name: col1</span>
<span id="cb381-6"><a href="#cb381-6" aria-hidden="true"></a></span>
<span id="cb381-7"><a href="#cb381-7" aria-hidden="true"></a>In [<span class="dv">12</span>]: df[df[&#39;col1&#39;] &gt;= <span class="dv">1</span>]</span>
<span id="cb381-8"><a href="#cb381-8" aria-hidden="true"></a>Out[<span class="dv">12</span>]: </span>
<span id="cb381-9"><a href="#cb381-9" aria-hidden="true"></a>   col1  col2</span>
<span id="cb381-10"><a href="#cb381-10" aria-hidden="true"></a><span class="dv">1</span>     <span class="dv">1</span>    <span class="dv">11</span></span>
<span id="cb381-11"><a href="#cb381-11" aria-hidden="true"></a><span class="dv">2</span>     <span class="dv">2</span>    <span class="dv">12</span></span>
<span id="cb381-12"><a href="#cb381-12" aria-hidden="true"></a></span>
<span id="cb381-13"><a href="#cb381-13" aria-hidden="true"></a>In [<span class="dv">13</span>]: df[(df[&#39;col1&#39;] &gt;= <span class="dv">1</span>) &amp; (df[&#39;col1&#39;] &lt;=<span class="dv">1</span> )]</span>
<span id="cb381-14"><a href="#cb381-14" aria-hidden="true"></a>Out[<span class="dv">13</span>]: </span>
<span id="cb381-15"><a href="#cb381-15" aria-hidden="true"></a>   col1  col2</span>
<span id="cb381-16"><a href="#cb381-16" aria-hidden="true"></a><span class="dv">1</span>     <span class="dv">1</span>    <span class="dv">11</span></span></code></pre></div>
<p>If you want to write helper functions for this, consider something along these lines:</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true"></a>In [<span class="dv">14</span>]: def b(x, col, op, n): </span>
<span id="cb382-2"><a href="#cb382-2" aria-hidden="true"></a>             <span class="cf">return</span> op(x[col],n)</span>
<span id="cb382-3"><a href="#cb382-3" aria-hidden="true"></a></span>
<span id="cb382-4"><a href="#cb382-4" aria-hidden="true"></a>In [<span class="dv">15</span>]: def f(x, *b):</span>
<span id="cb382-5"><a href="#cb382-5" aria-hidden="true"></a>             <span class="cf">return</span> x[(np.logical_and(*b))]</span>
<span id="cb382-6"><a href="#cb382-6" aria-hidden="true"></a></span>
<span id="cb382-7"><a href="#cb382-7" aria-hidden="true"></a>In [<span class="dv">16</span>]: b1 = b(df, &#39;col1&#39;, ge, <span class="dv">1</span>)</span>
<span id="cb382-8"><a href="#cb382-8" aria-hidden="true"></a></span>
<span id="cb382-9"><a href="#cb382-9" aria-hidden="true"></a>In [<span class="dv">17</span>]: b2 = b(df, &#39;col1&#39;, le, <span class="dv">1</span>)</span>
<span id="cb382-10"><a href="#cb382-10" aria-hidden="true"></a></span>
<span id="cb382-11"><a href="#cb382-11" aria-hidden="true"></a>In [<span class="dv">18</span>]: f(df, b1, b2)</span>
<span id="cb382-12"><a href="#cb382-12" aria-hidden="true"></a>Out[<span class="dv">18</span>]: </span>
<span id="cb382-13"><a href="#cb382-13" aria-hidden="true"></a>   col1  col2</span>
<span id="cb382-14"><a href="#cb382-14" aria-hidden="true"></a><span class="dv">1</span>     <span class="dv">1</span>    <span class="dv">11</span></span></code></pre></div>
<p>Update: <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html" rel="noreferrer">pandas 0.13 has a query method</a> for these kind of use cases, assuming column names are valid identifiers the following works (and can be more efficient for large frames as it uses <a href="https://github.com/pydata/numexpr" rel="noreferrer">numexpr</a> behind the scenes):</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true"></a>In [<span class="dv">21</span>]: df.query(&#39;col1 &lt;= <span class="dv">1</span> &amp; <span class="dv">1</span> &lt;= col1&#39;)</span>
<span id="cb383-2"><a href="#cb383-2" aria-hidden="true"></a>Out[<span class="dv">21</span>]:</span>
<span id="cb383-3"><a href="#cb383-3" aria-hidden="true"></a>   col1  col2</span>
<span id="cb383-4"><a href="#cb383-4" aria-hidden="true"></a><span class="dv">1</span>     <span class="dv">1</span>    <span class="dv">11</span></span></code></pre></div>
</section>
<section id="answer-2-score-23" class="level4">
<h4>Answer 2 (score 23)</h4>
<p>
Chaining conditions creates long lines, which are discouraged by pep8. Using the .query method forces to use strings, which is powerful but unpythonic and not very dynamic.
</p>
<p>Once each of the filters is in place, one approach is</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true"></a>import numpy as np</span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true"></a>import functools</span>
<span id="cb384-3"><a href="#cb384-3" aria-hidden="true"></a>def conjunction(*conditions):</span>
<span id="cb384-4"><a href="#cb384-4" aria-hidden="true"></a>    <span class="cf">return</span> functools.reduce(np.logical_and, conditions)</span>
<span id="cb384-5"><a href="#cb384-5" aria-hidden="true"></a></span>
<span id="cb384-6"><a href="#cb384-6" aria-hidden="true"></a>c_1 = data.col1 == True</span>
<span id="cb384-7"><a href="#cb384-7" aria-hidden="true"></a>c_2 = data.col2 &lt; <span class="dv">64</span></span>
<span id="cb384-8"><a href="#cb384-8" aria-hidden="true"></a>c_3 = data.col3 != <span class="dv">4</span></span>
<span id="cb384-9"><a href="#cb384-9" aria-hidden="true"></a></span>
<span id="cb384-10"><a href="#cb384-10" aria-hidden="true"></a>data_filtered = data[conjunction(c1,c2,c3)]</span></code></pre></div>
<p>np.logical operates on and is fast, but does not take more than two arguments, which is handled by functools.reduce.</p>
<p>Note that this still has some redundancies: a) shortcutting does not happen on a global level b) Each of the individual conditions runs on the whole initial data. Still, I expect this to be efficient enough for many applications and it is very readable.</p>
</section>
<section id="answer-3-score-13-1" class="level4">
<h4>Answer 3 (score 13)</h4>
<p><strong>Simplest of All Solutions:</strong></p>
<p>Use:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true"></a>filtered_df = df[(df[&#39;col1&#39;] &gt;= <span class="dv">1</span>) &amp; (df[&#39;col1&#39;] &lt;= <span class="dv">5</span>)]</span></code></pre></div>
<p><strong>Another Example</strong>, To filter the dataframe for values belonging to Feb-2018, use the below code</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true"></a>filtered_df = df[(df[&#39;year&#39;] == <span class="dv">2018</span>) &amp; (df[&#39;month&#39;] == <span class="dv">2</span>)]</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="effective-method-to-hide-email-from-spam-bots-score-181121-in-2015" class="level3">
<h3>72: Effective method to hide email from spam bots (score <a href="https://stackoverflow.com/q/483212.html">181121</a> in 2015)</h3>
<section id="question-71" class="level4">
<h4>Question</h4>
<p>On my homepage, I’m using this method to hide my email from spam bots:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true"></a>&lt;a href=<span class="st">&quot;admin [at] example.com&quot;</span></span>
<span id="cb387-2"><a href="#cb387-2" aria-hidden="true"></a>   rel=<span class="st">&quot;nofollow&quot;</span></span>
<span id="cb387-3"><a href="#cb387-3" aria-hidden="true"></a>   onclick=<span class="st">&quot;this.href=&#39;mailto:&#39; + &#39;admin&#39; + &#39;@&#39; + &#39;example.com&#39;&quot;</span>&gt;Contact me&lt;/a&gt;</span></code></pre></div>
<p>What do you think about it? Is it effective? What other methods do you know or use?</p>
</section>
<section id="answer-2-score-96" class="level4">
<h4>Answer 2 (score 96)</h4>
<p>This is the method I used, with a server-side include, e.g. <code>&amp;lt;!-- #include file="emailObfuscator.include" --&amp;gt;</code> where <code>emailObfuscator.include</code> contains the following:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true"></a>&lt;!-- <span class="co">// http://lists.evolt.org/archive/Week-of-Mon-20040202/154813.html --&gt;</span></span>
<span id="cb388-2"><a href="#cb388-2" aria-hidden="true"></a>&lt;script type=<span class="st">&quot;text/javascript&quot;</span>&gt;</span>
<span id="cb388-3"><a href="#cb388-3" aria-hidden="true"></a>    function gen_mail_to_link(lhs,rhs,subject) {</span>
<span id="cb388-4"><a href="#cb388-4" aria-hidden="true"></a>        document.write(<span class="st">&quot;&lt;a href=</span><span class="sc">\&quot;</span><span class="st">mailto&quot;</span>);</span>
<span id="cb388-5"><a href="#cb388-5" aria-hidden="true"></a>        document.write(<span class="st">&quot;:&quot;</span> + lhs + <span class="st">&quot;@&quot;</span>);</span>
<span id="cb388-6"><a href="#cb388-6" aria-hidden="true"></a>        document.write(rhs + <span class="st">&quot;?subject=&quot;</span> + subject + <span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">&gt;&quot;</span> + lhs + <span class="st">&quot;@&quot;</span> + rhs + <span class="st">&quot;&lt;\/a&gt;&quot;</span>);</span>
<span id="cb388-7"><a href="#cb388-7" aria-hidden="true"></a>    }</span>
<span id="cb388-8"><a href="#cb388-8" aria-hidden="true"></a>&lt;/script&gt;</span></code></pre></div>
<p>To include an address, I use JavaScript:</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true"></a>&lt;script type=<span class="st">&quot;text/javascript&quot;</span>&gt; </span>
<span id="cb389-2"><a href="#cb389-2" aria-hidden="true"></a>    gen_mail_to_link(&#39;john.doe<span class="ch">&#39;,&#39;</span>example.com<span class="ch">&#39;,&#39;</span>Feedback about your site...&#39;);</span>
<span id="cb389-3"><a href="#cb389-3" aria-hidden="true"></a>&lt;/script&gt;</span>
<span id="cb389-4"><a href="#cb389-4" aria-hidden="true"></a>&lt;noscript&gt;</span>
<span id="cb389-5"><a href="#cb389-5" aria-hidden="true"></a>  &lt;em&gt;Email address protected by JavaScript. Activate JavaScript to see the email.&lt;/em&gt;</span>
<span id="cb389-6"><a href="#cb389-6" aria-hidden="true"></a>&lt;/noscript&gt;</span></code></pre></div>
<p>Because I have been getting email via Gmail since 2005, spam is pretty much a non-issue. So, I can’t speak of how effective this method is. You might want to read <a href="http://techblog.tilllate.com/2008/07/20/ten-methods-to-obfuscate-e-mail-addresses-compared/">this study</a> (although it’s old) that produced this graph:</p>
<p><img src="https://i.stack.imgur.com/To13I.png" alt="enter image description here"></p>
</section>
<section id="answer-3-score-84" class="level4">
<h4>Answer 3 (score 84)</h4>
<p>Working with content and attr in CSS:</p>
<p>
<div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<div class="sourceCode" id="cb390"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true"></a>.cryptedmail:after {</span>
<span id="cb390-2"><a href="#cb390-2" aria-hidden="true"></a>  content: attr(data-name) <span class="st">&quot;@&quot;</span> attr(data-domain) <span class="st">&quot;.&quot;</span> attr(data-tld); </span>
<span id="cb390-3"><a href="#cb390-3" aria-hidden="true"></a>}</span></code></pre></div>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;a href="
#" class="cryptedmail"
   data-name="info"
   data-domain="example"
   data-tld="org"
   onclick="window.location.href = 'mailto:' + this.dataset.name + '@' + this.dataset.domain + '.' + this.dataset.tld; return false;"&gt;&lt;/a&gt;</code></pre>
</div>
</div>
<p>When javascript is disabled, just the click event will not work, email is still displayed.</p>
<p>Another interesting approach (at least without a click event) would be to make use of the right-to-left mark to override the writing direction. more about this: <a href="https://en.wikipedia.org/wiki/Right-to-left_mark" rel="noreferrer">https://en.wikipedia.org/wiki/Right-to-left_mark</a></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-find-the-lowest-common-ancestor-of-two-nodes-in-any-binary-tree-score-177343-in-2019" class="level3">
<h3>73: How to find the lowest common ancestor of two nodes in any binary tree? (score <a href="https://stackoverflow.com/q/1484473.html">177343</a> in 2019)</h3>
<section id="question-72" class="level4">
<h4>Question</h4>
<p>
The Binary Tree here is may not necessarily be a Binary Search Tree.<br> The structure could be taken as -
</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true"></a><span class="kw">struct</span> node {</span>
<span id="cb391-2"><a href="#cb391-2" aria-hidden="true"></a>    <span class="dt">int</span> data;</span>
<span id="cb391-3"><a href="#cb391-3" aria-hidden="true"></a>    <span class="kw">struct</span> node *left;</span>
<span id="cb391-4"><a href="#cb391-4" aria-hidden="true"></a>    <span class="kw">struct</span> node *right;</span>
<span id="cb391-5"><a href="#cb391-5" aria-hidden="true"></a>};</span></code></pre></div>
<p>
The maximum solution I could work out with a friend was something of this sort -<br> Consider <a href="http://lcm.csa.iisc.ernet.in/dsa/node87.html" rel="nofollow noreferrer">this binary tree</a> :
</p>
<p><a href="https://i.stack.imgur.com/Sz5KZ.gif" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/Sz5KZ.gif" alt="Binary Tree"></a></p>
<p>The inorder traversal yields - 8, 4, 9, 2, 5, 1, 6, 3, 7</p>
<p>And the postorder traversal yields - 8, 9, 4, 5, 2, 6, 7, 3, 1</p>
<p>So for instance, if we want to find the common ancestor of nodes 8 and 5, then we make a list of all the nodes which are between 8 and 5 in the inorder tree traversal, which in this case happens to be [4, 9, 2]. Then we check which node in this list appears last in the postorder traversal, which is 2. Hence the common ancestor for 8 and 5 is 2.</p>
<p>The complexity for this algorithm, I believe is O(n) (O(n) for inorder/postorder traversals, the rest of the steps again being O(n) since they are nothing more than simple iterations in arrays). But there is a strong chance that this is wrong. :-)</p>
<p>But this is a very crude approach, and I’m not sure if it breaks down for some case. Is there any other (possibly more optimal) solution to this problem?</p>
</section>
<section id="answer-accepted-score-69" class="level4">
<h4>Answer accepted (score 69)</h4>
<p>Nick Johnson is correct that a an O(n) time complexity algorithm is the best you can do if you have no parent pointers.) For a simple recursive version of that algorithm see the code in <a href="https://stackoverflow.com/a/5000698/179917">Kinding’s post</a> which runs in O(n) time.</p>
<p>But keep in mind that if your nodes have parent pointers, an improved algorithm is possible. For both nodes in question construct a list containing the path from root to the node by starting at the node, and front inserting the parent.</p>
<p>So for 8 in your example, you get (showing steps): {4}, {2, 4}, {1, 2, 4}</p>
<p>Do the same for your other node in question, resulting in (steps not shown): {1, 2}</p>
<p>Now compare the two lists you made looking for the first element where the list differ, or the last element of one of the lists, whichever comes first.</p>
<p>This algorithm requires O(h) time where h is the height of the tree. In the worst case O(h) is equivalent to O(n), but if the tree is balanced, that is only O(log(n)). It also requires O(h) space. An improved version is possible that uses only constant space, with code shown in <a href="https://stackoverflow.com/a/6183069/179917">CEGRD’s post</a></p>
<hr>
<p>Regardless of how the tree is constructed, if this will be an operation you perform many times on the tree without changing it in between, there are other algorithms you can use that require O(n) [linear] time preparation, but then finding any pair takes only O(1) [constant] time. For references to these algorithms, see the the lowest common ancestor problem page on <a href="http://en.wikipedia.org/wiki/Lowest_common_ancestor" rel="noreferrer">Wikipedia</a>. (Credit to Jason for originally posting this link)</p>
</section>
<section id="answer-2-score-105" class="level4">
<h4>Answer 2 (score 105)</h4>
<p>Starting from <code>root</code> node and moving downwards if you find any node that has either <code>p</code> or <code>q</code> as its direct child then it is the LCA. (edit - this should be if <code>p</code> or <code>q</code> is the node’s value, return it. Otherwise it will fail when one of <code>p</code> or <code>q</code> is a direct child of the other.)</p>
<p>Else if you find a node with <code>p</code> in its right(or left) subtree and <code>q</code> in its left(or right) subtree then it is the LCA.</p>
<p>The fixed code looks like:</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true"></a>treeNodePtr findLCA(treeNodePtr root, treeNodePtr p, treeNodePtr q) {</span>
<span id="cb392-2"><a href="#cb392-2" aria-hidden="true"></a></span>
<span id="cb392-3"><a href="#cb392-3" aria-hidden="true"></a>        <span class="co">// no root no LCA.</span></span>
<span id="cb392-4"><a href="#cb392-4" aria-hidden="true"></a>        <span class="cf">if</span>(!root) {</span>
<span id="cb392-5"><a href="#cb392-5" aria-hidden="true"></a>                <span class="cf">return</span> NULL;</span>
<span id="cb392-6"><a href="#cb392-6" aria-hidden="true"></a>        }</span>
<span id="cb392-7"><a href="#cb392-7" aria-hidden="true"></a></span>
<span id="cb392-8"><a href="#cb392-8" aria-hidden="true"></a>        <span class="co">// if either p or q is the root then root is LCA.</span></span>
<span id="cb392-9"><a href="#cb392-9" aria-hidden="true"></a>        <span class="cf">if</span>(root==p || root==q) {</span>
<span id="cb392-10"><a href="#cb392-10" aria-hidden="true"></a>                <span class="cf">return</span> root;</span>
<span id="cb392-11"><a href="#cb392-11" aria-hidden="true"></a>        } <span class="cf">else</span> {</span>
<span id="cb392-12"><a href="#cb392-12" aria-hidden="true"></a>                <span class="co">// get LCA of p and q in left subtree.</span></span>
<span id="cb392-13"><a href="#cb392-13" aria-hidden="true"></a>                treeNodePtr l=findLCA(root-&gt;left , p , q);</span>
<span id="cb392-14"><a href="#cb392-14" aria-hidden="true"></a></span>
<span id="cb392-15"><a href="#cb392-15" aria-hidden="true"></a>                <span class="co">// get LCA of p and q in right subtree.</span></span>
<span id="cb392-16"><a href="#cb392-16" aria-hidden="true"></a>                treeNodePtr r=findLCA(root-&gt;right , p, q);</span>
<span id="cb392-17"><a href="#cb392-17" aria-hidden="true"></a></span>
<span id="cb392-18"><a href="#cb392-18" aria-hidden="true"></a>                <span class="co">// if one of p or q is in leftsubtree and other is in right</span></span>
<span id="cb392-19"><a href="#cb392-19" aria-hidden="true"></a>                <span class="co">// then root it the LCA.</span></span>
<span id="cb392-20"><a href="#cb392-20" aria-hidden="true"></a>                <span class="cf">if</span>(l &amp;&amp; r) {</span>
<span id="cb392-21"><a href="#cb392-21" aria-hidden="true"></a>                        <span class="cf">return</span> root;</span>
<span id="cb392-22"><a href="#cb392-22" aria-hidden="true"></a>                }</span>
<span id="cb392-23"><a href="#cb392-23" aria-hidden="true"></a>                <span class="co">// else if l is not null, l is LCA.</span></span>
<span id="cb392-24"><a href="#cb392-24" aria-hidden="true"></a>                <span class="cf">else</span> <span class="cf">if</span>(l) {</span>
<span id="cb392-25"><a href="#cb392-25" aria-hidden="true"></a>                        <span class="cf">return</span> l;</span>
<span id="cb392-26"><a href="#cb392-26" aria-hidden="true"></a>                } <span class="cf">else</span> {</span>
<span id="cb392-27"><a href="#cb392-27" aria-hidden="true"></a>                        <span class="cf">return</span> r;</span>
<span id="cb392-28"><a href="#cb392-28" aria-hidden="true"></a>                }</span>
<span id="cb392-29"><a href="#cb392-29" aria-hidden="true"></a>        }</span>
<span id="cb392-30"><a href="#cb392-30" aria-hidden="true"></a>}</span></code></pre></div>
<p>The below code fails when either is the direct child of other.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true"></a>treeNodePtr findLCA(treeNodePtr root, treeNodePtr p, treeNodePtr q) {</span>
<span id="cb393-2"><a href="#cb393-2" aria-hidden="true"></a></span>
<span id="cb393-3"><a href="#cb393-3" aria-hidden="true"></a>        <span class="co">// no root no LCA.</span></span>
<span id="cb393-4"><a href="#cb393-4" aria-hidden="true"></a>        <span class="cf">if</span>(!root) {</span>
<span id="cb393-5"><a href="#cb393-5" aria-hidden="true"></a>                <span class="cf">return</span> NULL;</span>
<span id="cb393-6"><a href="#cb393-6" aria-hidden="true"></a>        }</span>
<span id="cb393-7"><a href="#cb393-7" aria-hidden="true"></a></span>
<span id="cb393-8"><a href="#cb393-8" aria-hidden="true"></a>        <span class="co">// if either p or q is direct child of root then root is LCA.</span></span>
<span id="cb393-9"><a href="#cb393-9" aria-hidden="true"></a>        <span class="cf">if</span>(root-&gt;left==p || root-&gt;left==q || </span>
<span id="cb393-10"><a href="#cb393-10" aria-hidden="true"></a>           root-&gt;right ==p || root-&gt;right ==q) {</span>
<span id="cb393-11"><a href="#cb393-11" aria-hidden="true"></a>                <span class="cf">return</span> root;</span>
<span id="cb393-12"><a href="#cb393-12" aria-hidden="true"></a>        } <span class="cf">else</span> {</span>
<span id="cb393-13"><a href="#cb393-13" aria-hidden="true"></a>                <span class="co">// get LCA of p and q in left subtree.</span></span>
<span id="cb393-14"><a href="#cb393-14" aria-hidden="true"></a>                treeNodePtr l=findLCA(root-&gt;left , p , q);</span>
<span id="cb393-15"><a href="#cb393-15" aria-hidden="true"></a></span>
<span id="cb393-16"><a href="#cb393-16" aria-hidden="true"></a>                <span class="co">// get LCA of p and q in right subtree.</span></span>
<span id="cb393-17"><a href="#cb393-17" aria-hidden="true"></a>                treeNodePtr r=findLCA(root-&gt;right , p, q);</span>
<span id="cb393-18"><a href="#cb393-18" aria-hidden="true"></a></span>
<span id="cb393-19"><a href="#cb393-19" aria-hidden="true"></a>                <span class="co">// if one of p or q is in leftsubtree and other is in right</span></span>
<span id="cb393-20"><a href="#cb393-20" aria-hidden="true"></a>                <span class="co">// then root it the LCA.</span></span>
<span id="cb393-21"><a href="#cb393-21" aria-hidden="true"></a>                <span class="cf">if</span>(l &amp;&amp; r) {</span>
<span id="cb393-22"><a href="#cb393-22" aria-hidden="true"></a>                        <span class="cf">return</span> root;</span>
<span id="cb393-23"><a href="#cb393-23" aria-hidden="true"></a>                }</span>
<span id="cb393-24"><a href="#cb393-24" aria-hidden="true"></a>                <span class="co">// else if l is not null, l is LCA.</span></span>
<span id="cb393-25"><a href="#cb393-25" aria-hidden="true"></a>                <span class="cf">else</span> <span class="cf">if</span>(l) {</span>
<span id="cb393-26"><a href="#cb393-26" aria-hidden="true"></a>                        <span class="cf">return</span> l;</span>
<span id="cb393-27"><a href="#cb393-27" aria-hidden="true"></a>                } <span class="cf">else</span> {</span>
<span id="cb393-28"><a href="#cb393-28" aria-hidden="true"></a>                        <span class="cf">return</span> r;</span>
<span id="cb393-29"><a href="#cb393-29" aria-hidden="true"></a>                }</span>
<span id="cb393-30"><a href="#cb393-30" aria-hidden="true"></a>        }</span>
<span id="cb393-31"><a href="#cb393-31" aria-hidden="true"></a>}</span></code></pre></div>
<p><a href="https://web.archive.org/web/20000000000000/http://www.ideone.com/js8Dw" rel="nofollow noreferrer"><strong>Code In Action</strong></a></p>
</section>
<section id="answer-3-score-49" class="level4">
<h4>Answer 3 (score 49)</h4>
<p>Here is the working code in JAVA</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true"></a>public <span class="dt">static</span> Node LCA(Node root, Node a, Node b) {</span>
<span id="cb394-2"><a href="#cb394-2" aria-hidden="true"></a>   <span class="cf">if</span> (root == null) {</span>
<span id="cb394-3"><a href="#cb394-3" aria-hidden="true"></a>       <span class="cf">return</span> null;</span>
<span id="cb394-4"><a href="#cb394-4" aria-hidden="true"></a>   }</span>
<span id="cb394-5"><a href="#cb394-5" aria-hidden="true"></a></span>
<span id="cb394-6"><a href="#cb394-6" aria-hidden="true"></a>   <span class="co">// If the root is one of a or b, then it is the LCA</span></span>
<span id="cb394-7"><a href="#cb394-7" aria-hidden="true"></a>   <span class="cf">if</span> (root == a || root == b) {</span>
<span id="cb394-8"><a href="#cb394-8" aria-hidden="true"></a>       <span class="cf">return</span> root;</span>
<span id="cb394-9"><a href="#cb394-9" aria-hidden="true"></a>   }</span>
<span id="cb394-10"><a href="#cb394-10" aria-hidden="true"></a></span>
<span id="cb394-11"><a href="#cb394-11" aria-hidden="true"></a>   Node left = LCA(root.left, a, b);</span>
<span id="cb394-12"><a href="#cb394-12" aria-hidden="true"></a>   Node right = LCA(root.right, a, b);</span>
<span id="cb394-13"><a href="#cb394-13" aria-hidden="true"></a></span>
<span id="cb394-14"><a href="#cb394-14" aria-hidden="true"></a>   <span class="co">// If both nodes lie in left or right then their LCA is in left or right,</span></span>
<span id="cb394-15"><a href="#cb394-15" aria-hidden="true"></a>   <span class="co">// Otherwise root is their LCA</span></span>
<span id="cb394-16"><a href="#cb394-16" aria-hidden="true"></a>   <span class="cf">if</span> (left != null &amp;&amp; right != null) {</span>
<span id="cb394-17"><a href="#cb394-17" aria-hidden="true"></a>      <span class="cf">return</span> root;</span>
<span id="cb394-18"><a href="#cb394-18" aria-hidden="true"></a>   }</span>
<span id="cb394-19"><a href="#cb394-19" aria-hidden="true"></a></span>
<span id="cb394-20"><a href="#cb394-20" aria-hidden="true"></a>   <span class="cf">return</span> (left != null) ? left : right; </span>
<span id="cb394-21"><a href="#cb394-21" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="image-processing-algorithm-improvement-for-coca-cola-can-recognition-score-176294-in-2016" class="level3">
<h3>74: Image Processing: Algorithm Improvement for ‘Coca-Cola Can’ Recognition (score <a href="https://stackoverflow.com/q/10168686.html">176294</a> in 2016)</h3>
<section id="question-73" class="level4">
<h4>Question</h4>
<p>One of the most interesting projects I’ve worked on in the past couple of years was a project about <a href="https://en.wikipedia.org/wiki/Image_processing" rel="noreferrer">image processing</a>. The goal was to develop a system to be able to recognize Coca-Cola <strong>‘cans’</strong> (note that I’m stressing the word ‘cans’, you’ll see why in a minute). You can see a sample below, with the can recognized in the <em>green rectangle</em> with scale and rotation.</p>
<p><img src="https://i.stack.imgur.com/irQtR.png" alt="Template matching"></p>
<p>Some constraints on the project:</p>
<ul>
<li>
The background could be very noisy.
</li>
<li>
The <em>can</em> could have any <em>scale</em> or <em>rotation</em> or even orientation (within reasonable limits).
</li>
<li>
The image could have some degree of fuzziness (contours might not be entirely straight).
</li>
<li>
There could be Coca-Cola bottles in the image, and the algorithm should only detect the <em>can</em>!
</li>
<li>
The brightness of the image could vary a lot (so you can’t rely “too much” on color detection).
</li>
<li>
The <em>can</em> could be partly hidden on the sides or the middle and possibly partly hidden behind a bottle.
</li>
<li>
There could be no <em>can</em> at all in the image, in which case you had to find nothing and write a message saying so.
</li>
</ul>
<p>So you could end up with tricky things like this (which in this case had my algorithm totally fail):</p>
<p><img src="https://i.stack.imgur.com/Byw82.png" alt="Total fail"></p>
<p>I did this project a while ago, and had a lot of fun doing it, and I had a decent implementation. Here are some details about my implementation:</p>
<p><strong>Language</strong>: Done in C++ using <a href="http://opencv.org" rel="noreferrer">OpenCV</a> library.</p>
<p><strong>Pre-processing</strong>: For the image pre-processing, i.e. transforming the image into a more raw form to give to the algorithm, I used 2 methods:</p>
<ol>
<li>
Changing color domain from RGB to <a href="http://en.wikipedia.org/wiki/HSL_and_HSV" rel="noreferrer">HSV</a> and filtering based on “red” hue, saturation above a certain threshold to avoid orange-like colors, and filtering of low value to avoid dark tones. The end result was a binary black and white image, where all white pixels would represent the pixels that match this threshold. Obviously there is still a lot of crap in the image, but this reduces the number of dimensions you have to work with. <img src="https://i.stack.imgur.com/ktdAB.png" alt="Binarized image">
</li>
<li>
Noise filtering using median filtering (taking the median pixel value of all neighbors and replace the pixel by this value) to reduce noise.
</li>
<li>
Using <a href="http://en.wikipedia.org/wiki/Canny_edge_detector" rel="noreferrer">Canny Edge Detection Filter</a> to get the contours of all items after 2 precedent steps. <img src="https://i.stack.imgur.com/F9319.png" alt="Contour detection">
</li>
</ol>
<p><strong>Algorithm</strong>: The algorithm itself I chose for this task was taken from <a href="https://rads.stackoverflow.com/amzn/click/com/0123725380" rel="noreferrer" rel="nofollow noreferrer">this</a> awesome book on feature extraction and called <a href="http://en.wikipedia.org/wiki/Generalised_Hough_transform" rel="noreferrer">Generalized Hough Transform</a> (pretty different from the regular Hough Transform). It basically says a few things:</p>
<ul>
<li>
You can describe an object in space without knowing its analytical equation (which is the case here).
</li>
<li>
It is resistant to image deformations such as scaling and rotation, as it will basically test your image for every combination of scale factor and rotation factor.
</li>
<li>
It uses a base model (a template) that the algorithm will “learn”.
</li>
<li>
Each pixel remaining in the contour image will vote for another pixel which will supposedly be the center (in terms of gravity) of your object, based on what it learned from the model.
</li>
</ul>
<p>In the end, you end up with a heat map of the votes, for example here all the pixels of the contour of the can will vote for its gravitational center, so you’ll have a lot of votes in the same pixel corresponding to the center, and will see a peak in the heat map as below:</p>
<p><img src="https://i.stack.imgur.com/wxrT1.png" alt="GHT"></p>
<p>Once you have that, a simple threshold-based heuristic can give you the location of the center pixel, from which you can derive the scale and rotation and then plot your little rectangle around it (final scale and rotation factor will obviously be relative to your original template). In theory at least…</p>
<p><strong>Results</strong>: Now, while this approach worked in the basic cases, it was severely lacking in some areas:</p>
<ul>
<li>
It is <strong>extremely slow</strong>! I’m not stressing this enough. Almost a full day was needed to process the 30 test images, obviously because I had a very high scaling factor for rotation and translation, since some of the cans were very small.
</li>
<li>
It was completely lost when bottles were in the image, and for some reason almost always found the bottle instead of the can (perhaps because bottles were bigger, thus had more pixels, thus more votes)
</li>
<li>
Fuzzy images were also no good, since the votes ended up in pixel at random locations around the center, thus ending with a very noisy heat map.
</li>
<li>
In-variance in translation and rotation was achieved, but not in orientation, meaning that a can that was not directly facing the camera objective wasn’t recognized.
</li>
</ul>
<p>Can you help me improve my <strong>specific</strong> algorithm, using <strong>exclusively OpenCV</strong> features, to resolve the <strong>four specific</strong> issues mentioned?</p>
<p>I hope some people will also learn something out of it as well, after all I think not only people who ask questions should learn. :)</p>
</section>
<section id="answer-accepted-score-645" class="level4">
<h4>Answer accepted (score 645)</h4>
<p>An alternative approach would be to extract features (keypoints) using the <a href="https://en.wikipedia.org/wiki/Scale-invariant_feature_transform" rel="noreferrer">scale-invariant feature transform</a> (SIFT) or <a href="https://en.wikipedia.org/wiki/Speeded_up_robust_features" rel="noreferrer">Speeded Up Robust Features</a> (SURF).</p>
<p>It is implemented in <a href="https://en.wikipedia.org/wiki/OpenCV" rel="noreferrer">OpenCV</a> 2.3.1.</p>
<p>You can find a nice code example using features in <em><a href="http://docs.opencv.org/2.4/doc/tutorials/features2d/feature_homography/feature_homography.html" rel="noreferrer">Features2D + Homography to find a known object</a></em></p>
<p>Both algorithms are invariant to scaling and rotation. Since they work with features, you can also handle <a href="http://en.wikipedia.org/wiki/Ambient_occlusion" rel="noreferrer">occlusion</a> (as long as enough keypoints are visible).</p>
<p><img src="https://i.stack.imgur.com/kF63R.jpg" alt="Enter image description here"></p>
<p>Image source: tutorial example</p>
<p>The processing takes a few hundred ms for SIFT, SURF is bit faster, but it not suitable for real-time applications. ORB uses FAST which is weaker regarding rotation invariance.</p>
<h5>
The original papers
</h3>
<ul>
<li>
<a href="http://www.vision.ee.ethz.ch/~surf/eccv06.pdf" rel="noreferrer">SURF: Speeded Up Robust Features</a>
</li>
<li>
<a href="http://www.cs.ubc.ca/~lowe/papers/ijcv04.pdf" rel="noreferrer">Distinctive Image Features from Scale-Invariant Keypoints</a>
</li>
<li>
<a href="http://www.willowgarage.com/sites/default/files/orb_final.pdf" rel="noreferrer">ORB: an efficient alternative to SIFT or SURF</a>
</li>
</ul>
</section>
<section id="answer-2-score-364" class="level4">
<h4>Answer 2 (score 364)</h4>
<p>To speed things up, I would take advantage of the fact that you are not asked to find an arbitrary image/object, but specifically one with the Coca-Cola logo. This is significant because this logo is very distinctive, and it should have a characteristic, scale-invariant signature in the frequency domain, particularly in the red channel of RGB. That is to say, the alternating pattern of red-to-white-to-red encountered by a horizontal scan line (trained on a horizontally aligned logo) will have a distinctive “rhythm” as it passes through the central axis of the logo. That rhythm will “speed up” or “slow down” at different scales and orientations, but will remain proportionally equivalent. You could identify/define a few dozen such scanlines, both horizontally and vertically through the logo and several more diagonally, in a starburst pattern. Call these the “signature scan lines.”</p>
<p><img src="https://i.stack.imgur.com/KWVZw.jpg" alt="Signature scan line"></p>
<p>Searching for this signature in the target image is a simple matter of scanning the image in horizontal strips. Look for a high-frequency in the red-channel (indicating moving from a red region to a white one), and once found, see if it is followed by one of the frequency rhythms identified in the training session. Once a match is found, you will instantly know the scan-line’s orientation and location in the logo (if you keep track of those things during training), so identifying the boundaries of the logo from there is trivial.</p>
<p>I would be surprised if this weren’t a linearly-efficient algorithm, or nearly so. It obviously doesn’t address your can-bottle discrimination, but at least you’ll have your logos.</p>
<p>(Update: for bottle recognition I would look for coke (the brown liquid) adjacent to the logo – that is, <em>inside</em> the bottle. Or, in the case of an empty bottle, I would look for a <em>cap</em> which will always have the same basic shape, size, and distance from the logo and will typically be all white or red. Search for a solid color eliptical shape where a cap <em>should</em> be, relative to the logo. Not foolproof of course, but your goal here should be to find the <em>easy</em> ones <em>fast</em>.)</p>
<p>(It’s been a few years since my image processing days, so I kept this suggestion high-level and conceptual. I think it might slightly approximate how a human eye might operate – or at least how my brain does!)</p>
</section>
<section id="answer-3-score-153" class="level4">
<h4>Answer 3 (score 153)</h4>
<p>Fun problem: when I glanced at your bottle image I thought it was a can too. But, as a human, what I did to tell the difference is that I then noticed it was also a bottle…</p>
<p>So, to tell cans and bottles apart, how about simply scanning for bottles first? If you find one, mask out the label before looking for cans.</p>
<p>Not too hard to implement if you’re already doing cans. The real downside is it doubles your processing time. (But thinking ahead to real-world applications, you’re going to end up wanting to do bottles anyway ;-)</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="picking-a-random-element-from-a-set-score-176234-in-2008" class="level3">
<h3>75: Picking a random element from a set (score <a href="https://stackoverflow.com/q/124671.html">176234</a> in 2008)</h3>
<section id="question-74" class="level4">
<h4>Question</h4>
<p>
How do I pick a random element from a set? I’m particularly interested in picking a random element from a HashSet or a LinkedHashSet, in Java. Solutions for other languages are also welcome.
</p>
</section>
<section id="answer-accepted-score-81" class="level4">
<h4>Answer accepted (score 81)</h4>
<div class="sourceCode" id="cb395"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb395-1"><a href="#cb395-1" aria-hidden="true"></a><span class="dt">int</span> size = myHashSet.size();</span>
<span id="cb395-2"><a href="#cb395-2" aria-hidden="true"></a><span class="dt">int</span> item = new Random().nextInt(size); <span class="co">// In real life, the Random object should be rather more shared than this</span></span>
<span id="cb395-3"><a href="#cb395-3" aria-hidden="true"></a><span class="dt">int</span> i = <span class="dv">0</span>;</span>
<span id="cb395-4"><a href="#cb395-4" aria-hidden="true"></a><span class="cf">for</span>(Object obj : myhashSet)</span>
<span id="cb395-5"><a href="#cb395-5" aria-hidden="true"></a>{</span>
<span id="cb395-6"><a href="#cb395-6" aria-hidden="true"></a>    <span class="cf">if</span> (i == item)</span>
<span id="cb395-7"><a href="#cb395-7" aria-hidden="true"></a>        <span class="cf">return</span> obj;</span>
<span id="cb395-8"><a href="#cb395-8" aria-hidden="true"></a>    i++;</span>
<span id="cb395-9"><a href="#cb395-9" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-73-2" class="level4">
<h4>Answer 2 (score 73)</h4>
<p>A somewhat related Did You Know:</p>
<p>There are useful methods in <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html" rel="noreferrer"><code>java.util.Collections</code></a> for shuffling whole collections: <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html
#shuffle-java.util.List-" rel="noreferrer"><code>Collections.shuffle(List&amp;lt;?&amp;gt;)</code></a> and <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#shuffle-java.util.List-java.util.Random-" rel="noreferrer"><code>Collections.shuffle(List&amp;lt;?&amp;gt; list, Random rnd)</code></a>.</p>
</section>
<section id="answer-3-score-32-1" class="level4">
<h4>Answer 3 (score 32)</h4>
<p>Fast solution for Java using an <code>ArrayList</code> and a <code>HashMap</code>: [element -&gt; index].</p>
<p>Motivation: I needed a set of items with <code>RandomAccess</code> properties, especially to pick a random item from the set (see <code>pollRandom</code> method). Random navigation in a binary tree is not accurate: trees are not perfectly balanced, which would not lead to a uniform distribution.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true"></a>public class RandomSet&lt;E&gt; extends AbstractSet&lt;E&gt; {</span>
<span id="cb396-2"><a href="#cb396-2" aria-hidden="true"></a></span>
<span id="cb396-3"><a href="#cb396-3" aria-hidden="true"></a>    List&lt;E&gt; dta = new ArrayList&lt;E&gt;();</span>
<span id="cb396-4"><a href="#cb396-4" aria-hidden="true"></a>    Map&lt;E, Integer&gt; idx = new HashMap&lt;E, Integer&gt;();</span>
<span id="cb396-5"><a href="#cb396-5" aria-hidden="true"></a></span>
<span id="cb396-6"><a href="#cb396-6" aria-hidden="true"></a>    public RandomSet() {</span>
<span id="cb396-7"><a href="#cb396-7" aria-hidden="true"></a>    }</span>
<span id="cb396-8"><a href="#cb396-8" aria-hidden="true"></a></span>
<span id="cb396-9"><a href="#cb396-9" aria-hidden="true"></a>    public RandomSet(Collection&lt;E&gt; items) {</span>
<span id="cb396-10"><a href="#cb396-10" aria-hidden="true"></a>        <span class="cf">for</span> (E item : items) {</span>
<span id="cb396-11"><a href="#cb396-11" aria-hidden="true"></a>            idx.put(item, dta.size());</span>
<span id="cb396-12"><a href="#cb396-12" aria-hidden="true"></a>            dta.add(item);</span>
<span id="cb396-13"><a href="#cb396-13" aria-hidden="true"></a>        }</span>
<span id="cb396-14"><a href="#cb396-14" aria-hidden="true"></a>    }</span>
<span id="cb396-15"><a href="#cb396-15" aria-hidden="true"></a></span>
<span id="cb396-16"><a href="#cb396-16" aria-hidden="true"></a>    @Override</span>
<span id="cb396-17"><a href="#cb396-17" aria-hidden="true"></a>    public boolean add(E item) {</span>
<span id="cb396-18"><a href="#cb396-18" aria-hidden="true"></a>        <span class="cf">if</span> (idx.containsKey(item)) {</span>
<span id="cb396-19"><a href="#cb396-19" aria-hidden="true"></a>            <span class="cf">return</span> false;</span>
<span id="cb396-20"><a href="#cb396-20" aria-hidden="true"></a>        }</span>
<span id="cb396-21"><a href="#cb396-21" aria-hidden="true"></a>        idx.put(item, dta.size());</span>
<span id="cb396-22"><a href="#cb396-22" aria-hidden="true"></a>        dta.add(item);</span>
<span id="cb396-23"><a href="#cb396-23" aria-hidden="true"></a>        <span class="cf">return</span> true;</span>
<span id="cb396-24"><a href="#cb396-24" aria-hidden="true"></a>    }</span>
<span id="cb396-25"><a href="#cb396-25" aria-hidden="true"></a></span>
<span id="cb396-26"><a href="#cb396-26" aria-hidden="true"></a>    <span class="co">/**</span></span>
<span id="cb396-27"><a href="#cb396-27" aria-hidden="true"></a><span class="co">     * Override element at position </span><span class="kw">&lt;code&gt;</span><span class="co">id</span><span class="kw">&lt;/code&gt;</span><span class="co"> with last element.</span></span>
<span id="cb396-28"><a href="#cb396-28" aria-hidden="true"></a><span class="co">     * </span><span class="an">@param</span><span class="co"> </span><span class="cv">id</span></span>
<span id="cb396-29"><a href="#cb396-29" aria-hidden="true"></a><span class="co">     */</span></span>
<span id="cb396-30"><a href="#cb396-30" aria-hidden="true"></a>    public E removeAt(<span class="dt">int</span> id) {</span>
<span id="cb396-31"><a href="#cb396-31" aria-hidden="true"></a>        <span class="cf">if</span> (id &gt;= dta.size()) {</span>
<span id="cb396-32"><a href="#cb396-32" aria-hidden="true"></a>            <span class="cf">return</span> null;</span>
<span id="cb396-33"><a href="#cb396-33" aria-hidden="true"></a>        }</span>
<span id="cb396-34"><a href="#cb396-34" aria-hidden="true"></a>        E res = dta.get(id);</span>
<span id="cb396-35"><a href="#cb396-35" aria-hidden="true"></a>        idx.remove(res);</span>
<span id="cb396-36"><a href="#cb396-36" aria-hidden="true"></a>        E last = dta.remove(dta.size() - <span class="dv">1</span>);</span>
<span id="cb396-37"><a href="#cb396-37" aria-hidden="true"></a>        <span class="co">// skip filling the hole if last is removed</span></span>
<span id="cb396-38"><a href="#cb396-38" aria-hidden="true"></a>        <span class="cf">if</span> (id &lt; dta.size()) {</span>
<span id="cb396-39"><a href="#cb396-39" aria-hidden="true"></a>            idx.put(last, id);</span>
<span id="cb396-40"><a href="#cb396-40" aria-hidden="true"></a>            dta.set(id, last);</span>
<span id="cb396-41"><a href="#cb396-41" aria-hidden="true"></a>        }</span>
<span id="cb396-42"><a href="#cb396-42" aria-hidden="true"></a>        <span class="cf">return</span> res;</span>
<span id="cb396-43"><a href="#cb396-43" aria-hidden="true"></a>    }</span>
<span id="cb396-44"><a href="#cb396-44" aria-hidden="true"></a></span>
<span id="cb396-45"><a href="#cb396-45" aria-hidden="true"></a>    @Override</span>
<span id="cb396-46"><a href="#cb396-46" aria-hidden="true"></a>    public boolean remove(Object item) {</span>
<span id="cb396-47"><a href="#cb396-47" aria-hidden="true"></a>        @SuppressWarnings(value = <span class="st">&quot;element-type-mismatch&quot;</span>)</span>
<span id="cb396-48"><a href="#cb396-48" aria-hidden="true"></a>        Integer id = idx.get(item);</span>
<span id="cb396-49"><a href="#cb396-49" aria-hidden="true"></a>        <span class="cf">if</span> (id == null) {</span>
<span id="cb396-50"><a href="#cb396-50" aria-hidden="true"></a>            <span class="cf">return</span> false;</span>
<span id="cb396-51"><a href="#cb396-51" aria-hidden="true"></a>        }</span>
<span id="cb396-52"><a href="#cb396-52" aria-hidden="true"></a>        removeAt(id);</span>
<span id="cb396-53"><a href="#cb396-53" aria-hidden="true"></a>        <span class="cf">return</span> true;</span>
<span id="cb396-54"><a href="#cb396-54" aria-hidden="true"></a>    }</span>
<span id="cb396-55"><a href="#cb396-55" aria-hidden="true"></a></span>
<span id="cb396-56"><a href="#cb396-56" aria-hidden="true"></a>    public E get(<span class="dt">int</span> i) {</span>
<span id="cb396-57"><a href="#cb396-57" aria-hidden="true"></a>        <span class="cf">return</span> dta.get(i);</span>
<span id="cb396-58"><a href="#cb396-58" aria-hidden="true"></a>    }</span>
<span id="cb396-59"><a href="#cb396-59" aria-hidden="true"></a></span>
<span id="cb396-60"><a href="#cb396-60" aria-hidden="true"></a>    public E pollRandom(Random rnd) {</span>
<span id="cb396-61"><a href="#cb396-61" aria-hidden="true"></a>        <span class="cf">if</span> (dta.isEmpty()) {</span>
<span id="cb396-62"><a href="#cb396-62" aria-hidden="true"></a>            <span class="cf">return</span> null;</span>
<span id="cb396-63"><a href="#cb396-63" aria-hidden="true"></a>        }</span>
<span id="cb396-64"><a href="#cb396-64" aria-hidden="true"></a>        <span class="dt">int</span> id = rnd.nextInt(dta.size());</span>
<span id="cb396-65"><a href="#cb396-65" aria-hidden="true"></a>        <span class="cf">return</span> removeAt(id);</span>
<span id="cb396-66"><a href="#cb396-66" aria-hidden="true"></a>    }</span>
<span id="cb396-67"><a href="#cb396-67" aria-hidden="true"></a></span>
<span id="cb396-68"><a href="#cb396-68" aria-hidden="true"></a>    @Override</span>
<span id="cb396-69"><a href="#cb396-69" aria-hidden="true"></a>    public <span class="dt">int</span> size() {</span>
<span id="cb396-70"><a href="#cb396-70" aria-hidden="true"></a>        <span class="cf">return</span> dta.size();</span>
<span id="cb396-71"><a href="#cb396-71" aria-hidden="true"></a>    }</span>
<span id="cb396-72"><a href="#cb396-72" aria-hidden="true"></a></span>
<span id="cb396-73"><a href="#cb396-73" aria-hidden="true"></a>    @Override</span>
<span id="cb396-74"><a href="#cb396-74" aria-hidden="true"></a>    public Iterator&lt;E&gt; iterator() {</span>
<span id="cb396-75"><a href="#cb396-75" aria-hidden="true"></a>        <span class="cf">return</span> dta.iterator();</span>
<span id="cb396-76"><a href="#cb396-76" aria-hidden="true"></a>    }</span>
<span id="cb396-77"><a href="#cb396-77" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="is-logn-θnlogn-score-171644-in-2018" class="level3">
<h3>76: Is log(n!) = Θ(n·log(n))? (score <a href="https://stackoverflow.com/q/2095395.html">171644</a> in 2018)</h3>
<section id="question-75" class="level4">
<h4>Question</h4>
<p>I am to show that <strong>log(<em>n</em>!) = Θ(<em>n</em>·log(<em>n</em>))</strong>.</p>
<p>A hint was given that I should show the upper bound with <strong><em>n</em><sup><em>n</em></sup></strong> and show the lower bound with <strong>(<em>n</em>/2)<sup>(<em>n</em>/2)</sup></strong>. This does not seem all that intuitive to me. Why would that be the case? I can definitely see how to convert <strong><em>n</em><sup><em>n</em></sup></strong> to <strong><em>n</em>·log(<em>n</em>)</strong> (i.e. log both sides of an equation), but that’s kind of working backwards.</p>
<p>What would be the correct approach to tackle this problem? Should I draw the recursion tree? There is nothing recursive about this, so that doesn’t seem like a likely approach..</p>
</section>
<section id="answer-accepted-score-272" class="level4">
<h4>Answer accepted (score 272)</h4>
<p>Remember that</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true"></a>log(n!) = log(<span class="dv">1</span>) + log(<span class="dv">2</span>) + ... + log(n-<span class="dv">1</span>) + log(n)</span></code></pre></div>
<p>You can get the upper bound by</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true"></a>log(<span class="dv">1</span>) + log(<span class="dv">2</span>) + ... + log(n) &lt;= log(n) + log(n) + ... + log(n)</span>
<span id="cb398-2"><a href="#cb398-2" aria-hidden="true"></a>                                = n*log(n)</span></code></pre></div>
<p>And you can get the lower bound by doing a similar thing after throwing away the first half of the sum:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true"></a>log(<span class="dv">1</span>) + ... + log(n/<span class="dv">2</span>) + ... + log(n) &gt;= log(n/<span class="dv">2</span>) + ... + log(n) </span>
<span id="cb399-2"><a href="#cb399-2" aria-hidden="true"></a>                                       = log(n/<span class="dv">2</span>) + log(n/<span class="dv">2</span>+<span class="dv">1</span>) + ... + log(n-<span class="dv">1</span>) + log(n)</span>
<span id="cb399-3"><a href="#cb399-3" aria-hidden="true"></a>                                       &gt;= log(n/<span class="dv">2</span>) + ... + log(n/<span class="dv">2</span>)</span>
<span id="cb399-4"><a href="#cb399-4" aria-hidden="true"></a>                                        = n/<span class="dv">2</span> * log(n/<span class="dv">2</span>) </span></code></pre></div>
</section>
<section id="answer-2-score-37" class="level4">
<h4>Answer 2 (score 37)</h4>
<p>I realize this is a very old question with an accepted answer, but none of these answers actually use the approach suggested by the hint.</p>
<p>It is a pretty simple argument:</p>
<p><code>n!</code> (= 1<em>2</em>3<em>…</em>n) is a product of <code>n</code> numbers each less than or equal to <code>n</code>. Therefore it is less than the product of <code>n</code> numbers all equal to <code>n</code>; i.e., <code>n^n</code>.</p>
<p>Half of the numbers – i.e. <code>n/2</code> of them – in the <code>n!</code> product are greater than or equal to <code>n/2</code>. Therefore their product is greater than the product of <code>n/2</code> numbers all equal to <code>n/2</code>; i.e. <code>(n/2)^(n/2)</code>.</p>
<p>Take logs throughout to establish the result.</p>
</section>
<section id="answer-3-score-11" class="level4">
<h4>Answer 3 (score 11)</h4>
<p>See <a href="http://en.wikipedia.org/wiki/Stirling%27s_approximation" rel="noreferrer">Stirling’s Approximation</a>:</p>
<blockquote>
ln(n!) = n*ln(n) - n + O(ln(n))
</blockquote>
<p>where the last 2 terms are less significant than the first one.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-determine-the-longest-increasing-subsequence-using-dynamic-programming-score-171257-in-2016" class="level3">
<h3>77: How to determine the longest increasing subsequence using dynamic programming? (score <a href="https://stackoverflow.com/q/2631726.html">171257</a> in 2016)</h3>
<section id="question-76" class="level4">
<h4>Question</h4>
<p>I have a set of integers. I want to find the <a href="https://en.wikipedia.org/wiki/Longest_increasing_subsequence" rel="noreferrer">longest increasing subsequence</a> of that set using dynamic programming.</p>
</section>
<section id="answer-accepted-score-379" class="level4">
<h4>Answer accepted (score 379)</h4>
<p>OK, I will describe first the simplest solution which is O(N^2), where N is the size of the collection. There also exists a O(N log N) solution, which I will describe also. Look <a href="http://en.wikipedia.org/wiki/Longest_increasing_subsequence" rel="noreferrer">here</a> for it at the section Efficient algorithms.</p>
<p>I will assume the indices of the array are from 0 to N - 1. So let’s define <code>DP[i]</code> to be the length of the LIS (Longest increasing subsequence) which is ending at element with index <code>i</code>. To compute <code>DP[i]</code> we look at all indices <code>j &amp;lt; i</code> and check both if <code>DP[j] + 1 &amp;gt; DP[i]</code> and <code>array[j] &amp;lt; array[i]</code> (we want it to be increasing). If this is true we can update the current optimum for <code>DP[i]</code>. To find the global optimum for the array you can take the maximum value from <code>DP[0...N - 1]</code>.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb400-1"><a href="#cb400-1" aria-hidden="true"></a><span class="dt">int</span> maxLength = <span class="dv">1</span>, bestEnd = <span class="dv">0</span>;</span>
<span id="cb400-2"><a href="#cb400-2" aria-hidden="true"></a>DP[<span class="dv">0</span>] = <span class="dv">1</span>;</span>
<span id="cb400-3"><a href="#cb400-3" aria-hidden="true"></a>prev[<span class="dv">0</span>] = -<span class="dv">1</span>;</span>
<span id="cb400-4"><a href="#cb400-4" aria-hidden="true"></a></span>
<span id="cb400-5"><a href="#cb400-5" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">1</span>; i &lt; N; i++)</span>
<span id="cb400-6"><a href="#cb400-6" aria-hidden="true"></a>{</span>
<span id="cb400-7"><a href="#cb400-7" aria-hidden="true"></a>   DP[i] = <span class="dv">1</span>;</span>
<span id="cb400-8"><a href="#cb400-8" aria-hidden="true"></a>   prev[i] = -<span class="dv">1</span>;</span>
<span id="cb400-9"><a href="#cb400-9" aria-hidden="true"></a></span>
<span id="cb400-10"><a href="#cb400-10" aria-hidden="true"></a>   <span class="cf">for</span> (<span class="dt">int</span> j = i - <span class="dv">1</span>; j &gt;= <span class="dv">0</span>; j--)</span>
<span id="cb400-11"><a href="#cb400-11" aria-hidden="true"></a>      <span class="cf">if</span> (DP[j] + <span class="dv">1</span> &gt; DP[i] &amp;&amp; array[j] &lt; array[i])</span>
<span id="cb400-12"><a href="#cb400-12" aria-hidden="true"></a>      {</span>
<span id="cb400-13"><a href="#cb400-13" aria-hidden="true"></a>         DP[i] = DP[j] + <span class="dv">1</span>;</span>
<span id="cb400-14"><a href="#cb400-14" aria-hidden="true"></a>         prev[i] = j;</span>
<span id="cb400-15"><a href="#cb400-15" aria-hidden="true"></a>      }</span>
<span id="cb400-16"><a href="#cb400-16" aria-hidden="true"></a></span>
<span id="cb400-17"><a href="#cb400-17" aria-hidden="true"></a>   <span class="cf">if</span> (DP[i] &gt; maxLength)</span>
<span id="cb400-18"><a href="#cb400-18" aria-hidden="true"></a>   {</span>
<span id="cb400-19"><a href="#cb400-19" aria-hidden="true"></a>      bestEnd = i;</span>
<span id="cb400-20"><a href="#cb400-20" aria-hidden="true"></a>      maxLength = DP[i];</span>
<span id="cb400-21"><a href="#cb400-21" aria-hidden="true"></a>   }</span>
<span id="cb400-22"><a href="#cb400-22" aria-hidden="true"></a>}</span></code></pre></div>
<p>I use the array <code>prev</code> to be able later to find the actual sequence not only its length. Just go back recursively from <code>bestEnd</code> in a loop using <code>prev[bestEnd]</code>. The <code>-1</code> value is a sign to stop.</p>
<hr>
<h5>
OK, now to the more efficient <code>O(N log N)</code> solution:
</h2>
<p>Let <code>S[pos]</code> be defined as the smallest integer that ends an increasing sequence of length <code>pos</code>. Now iterate through every integer <code>X</code> of the input set and do the following:</p>
<ol>
<li>
<p>
If <code>X</code> &gt; last element in <code>S</code>, then append <code>X</code> to the end of <code>S</code>. This essentialy means we have found a new largest <code>LIS</code>.
</p>
</li>
<li>
<p>
Otherwise find the smallest element in <code>S</code>, which is <code>&amp;gt;=</code> than <code>X</code>, and change it to <code>X</code>. Because <code>S</code> is sorted at any time, the element can be found using binary search in <code>log(N)</code>.
</p>
</li>
</ol>
<p>Total runtime - <code>N</code> integers and a binary search for each of them - N * log(N) = O(N log N)</p>
<p>Now let’s do a real example:</p>
<p>
Collection of integers: <code>2 6 3 4 1 2 9 5 8</code>
</p>
<p>Steps:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true"></a><span class="fl">0.</span> S = {} - Initialize S to the empty set</span>
<span id="cb401-2"><a href="#cb401-2" aria-hidden="true"></a><span class="fl">1.</span> S = {<span class="dv">2</span>} - New largest LIS</span>
<span id="cb401-3"><a href="#cb401-3" aria-hidden="true"></a><span class="fl">2.</span> S = {<span class="dv">2</span>, <span class="dv">6</span>} - New largest LIS</span>
<span id="cb401-4"><a href="#cb401-4" aria-hidden="true"></a><span class="fl">3.</span> S = {<span class="dv">2</span>, <span class="dv">3</span>} - Changed <span class="dv">6</span> to <span class="dv">3</span></span>
<span id="cb401-5"><a href="#cb401-5" aria-hidden="true"></a><span class="fl">4.</span> S = {<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>} - New largest LIS</span>
<span id="cb401-6"><a href="#cb401-6" aria-hidden="true"></a><span class="fl">5.</span> S = {<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>} - Changed <span class="dv">2</span> to <span class="dv">1</span></span>
<span id="cb401-7"><a href="#cb401-7" aria-hidden="true"></a><span class="fl">6.</span> S = {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>} - Changed <span class="dv">3</span> to <span class="dv">2</span></span>
<span id="cb401-8"><a href="#cb401-8" aria-hidden="true"></a><span class="fl">7.</span> S = {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">9</span>} - New largest LIS</span>
<span id="cb401-9"><a href="#cb401-9" aria-hidden="true"></a><span class="fl">8.</span> S = {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>} - Changed <span class="dv">9</span> to <span class="dv">5</span></span>
<span id="cb401-10"><a href="#cb401-10" aria-hidden="true"></a><span class="fl">9.</span> S = {<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">8</span>} - New largest LIS</span></code></pre></div>
<p>So the length of the LIS is <code>5</code> (the size of S).</p>
<p>
To reconstruct the actual <code>LIS</code> we will again use a parent array. Let <code>parent[i]</code> be the predecessor of element with index <code>i</code> in the <code>LIS</code> ending at element with index <code>i</code>.
</p>
<p>To make things simpler, we can keep in the array <code>S</code>, not the actual integers, but their indices(positions) in the set. We do not keep <code>{1, 2, 4, 5, 8}</code>, but keep <code>{4, 5, 3, 7, 8}</code>.</p>
<p>That is input[4] = <strong>1</strong>, input[5] = <strong>2</strong>, input[3] = <strong>4</strong>, input[7] = <strong>5</strong>, input[8] = <strong>8</strong>.</p>
<p>If we update properly the parent array, the actual LIS is:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true"></a>input[S[lastElementOfS]], </span>
<span id="cb402-2"><a href="#cb402-2" aria-hidden="true"></a>input[parent[S[lastElementOfS]]],</span>
<span id="cb402-3"><a href="#cb402-3" aria-hidden="true"></a>input[parent[parent[S[lastElementOfS]]]],</span>
<span id="cb402-4"><a href="#cb402-4" aria-hidden="true"></a>........................................</span></code></pre></div>
<p>Now to the important thing - how do we update the parent array? There are two options:</p>
<ol>
<li>
<p>
If <code>X</code> &gt; last element in <code>S</code>, then <code>parent[indexX] = indexLastElement</code>. This means the parent of the newest element is the last element. We just prepend <code>X</code> to the end of <code>S</code>.
</p>
</li>
<li>
<p>
Otherwise find the index of the smallest element in <code>S</code>, which is <code>&amp;gt;=</code> than <code>X</code>, and change it to <code>X</code>. Here <code>parent[indexX] = S[index - 1]</code>.
</p>
</li>
</ol>
</section>
<section id="answer-2-score-55" class="level4">
<h4>Answer 2 (score 55)</h4>
<p>Petar Minchev’s explanation helped clear things up for me, but it was hard for me to parse what everything was, so I made a Python implementation with overly-descriptive variable names and lots of comments. I did a naive recursive solution, the O(n^2) solution, and the O(n log n) solution.</p>
<p>I hope it helps clear up the algorithms!</p>
<h5>
The Recursive Solution
</h1>
<div class="sourceCode" id="cb403"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true"></a>def recursive_solution(remaining_sequence, bigger_than=None):</span>
<span id="cb403-2"><a href="#cb403-2" aria-hidden="true"></a>    <span class="st">&quot;&quot;&quot;Finds the longest increasing subsequence of remaining_sequence that is      </span></span>
<span id="cb403-3"><a href="#cb403-3" aria-hidden="true"></a>    bigger than bigger_than and returns it.  This solution is O(<span class="dv">2</span>^n).<span class="st">&quot;&quot;&quot;</span></span>
<span id="cb403-4"><a href="#cb403-4" aria-hidden="true"></a></span>
<span id="cb403-5"><a href="#cb403-5" aria-hidden="true"></a></span>
<span id="cb403-6"><a href="#cb403-6" aria-hidden="true"></a><span class="er"># Base case: nothing is remaining.                                             </span></span>
<span id="cb403-7"><a href="#cb403-7" aria-hidden="true"></a>    <span class="cf">if</span> len(remaining_sequence) == <span class="dv">0</span>:</span>
<span id="cb403-8"><a href="#cb403-8" aria-hidden="true"></a>        <span class="cf">return</span> remaining_sequence</span>
<span id="cb403-9"><a href="#cb403-9" aria-hidden="true"></a></span>
<span id="cb403-10"><a href="#cb403-10" aria-hidden="true"></a></span>
<span id="cb403-11"><a href="#cb403-11" aria-hidden="true"></a><span class="er"># Recursive case 1: exclude the current element and process the remaining.     </span></span>
<span id="cb403-12"><a href="#cb403-12" aria-hidden="true"></a>    best_sequence = recursive_solution(remaining_sequence[<span class="dv">1</span>:], bigger_than)</span>
<span id="cb403-13"><a href="#cb403-13" aria-hidden="true"></a></span>
<span id="cb403-14"><a href="#cb403-14" aria-hidden="true"></a></span>
<span id="cb403-15"><a href="#cb403-15" aria-hidden="true"></a><span class="er"># Recursive case 2: include the current element if it&#39;s big enough.            </span></span>
<span id="cb403-16"><a href="#cb403-16" aria-hidden="true"></a>    first = remaining_sequence[<span class="dv">0</span>]</span>
<span id="cb403-17"><a href="#cb403-17" aria-hidden="true"></a></span>
<span id="cb403-18"><a href="#cb403-18" aria-hidden="true"></a>    <span class="cf">if</span> (first &gt; bigger_than) or (bigger_than is None):</span>
<span id="cb403-19"><a href="#cb403-19" aria-hidden="true"></a></span>
<span id="cb403-20"><a href="#cb403-20" aria-hidden="true"></a>        sequence_with = [first] + recursive_solution(remaining_sequence[<span class="dv">1</span>:], first)</span>
<span id="cb403-21"><a href="#cb403-21" aria-hidden="true"></a></span>
<span id="cb403-22"><a href="#cb403-22" aria-hidden="true"></a></span>
<span id="cb403-23"><a href="#cb403-23" aria-hidden="true"></a><span class="er"># Choose whichever of case 1 and case 2 were longer.                         </span></span>
<span id="cb403-24"><a href="#cb403-24" aria-hidden="true"></a>        <span class="cf">if</span> len(sequence_with) &gt;= len(best_sequence):</span>
<span id="cb403-25"><a href="#cb403-25" aria-hidden="true"></a>            best_sequence = sequence_with</span>
<span id="cb403-26"><a href="#cb403-26" aria-hidden="true"></a></span>
<span id="cb403-27"><a href="#cb403-27" aria-hidden="true"></a>    <span class="cf">return</span> best_sequence                                                        </span></code></pre></div>
<h5>
The O(n^2) Dynamic Programming Solution
</h1>
<div class="sourceCode" id="cb404"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true"></a>def dynamic_programming_solution(sequence):</span>
<span id="cb404-2"><a href="#cb404-2" aria-hidden="true"></a>    <span class="st">&quot;&quot;&quot;Finds the longest increasing subsequence in sequence using dynamic          </span></span>
<span id="cb404-3"><a href="#cb404-3" aria-hidden="true"></a>    programming.  This solution is O(n^<span class="dv">2</span>).<span class="st">&quot;&quot;&quot;</span></span>
<span id="cb404-4"><a href="#cb404-4" aria-hidden="true"></a></span>
<span id="cb404-5"><a href="#cb404-5" aria-hidden="true"></a>    longest_subsequence_ending_with = []</span>
<span id="cb404-6"><a href="#cb404-6" aria-hidden="true"></a>    backreference_for_subsequence_ending_with = []</span>
<span id="cb404-7"><a href="#cb404-7" aria-hidden="true"></a>    current_best_end = <span class="dv">0</span></span>
<span id="cb404-8"><a href="#cb404-8" aria-hidden="true"></a></span>
<span id="cb404-9"><a href="#cb404-9" aria-hidden="true"></a>    <span class="cf">for</span> curr_elem in range(len(sequence)):</span>
<span id="cb404-10"><a href="#cb404-10" aria-hidden="true"></a></span>
<span id="cb404-11"><a href="#cb404-11" aria-hidden="true"></a><span class="er"># It&#39;s always possible to have a subsequence of length 1.                    </span></span>
<span id="cb404-12"><a href="#cb404-12" aria-hidden="true"></a>        longest_subsequence_ending_with.append(<span class="dv">1</span>)</span>
<span id="cb404-13"><a href="#cb404-13" aria-hidden="true"></a></span>
<span id="cb404-14"><a href="#cb404-14" aria-hidden="true"></a></span>
<span id="cb404-15"><a href="#cb404-15" aria-hidden="true"></a><span class="pp"># If a subsequence is length 1, it doesn&#39;t have a backreference.             </span></span>
<span id="cb404-16"><a href="#cb404-16" aria-hidden="true"></a>        backreference_for_subsequence_ending_with.append(None)</span>
<span id="cb404-17"><a href="#cb404-17" aria-hidden="true"></a></span>
<span id="cb404-18"><a href="#cb404-18" aria-hidden="true"></a>        <span class="cf">for</span> prev_elem in range(curr_elem):</span>
<span id="cb404-19"><a href="#cb404-19" aria-hidden="true"></a>            subsequence_length_through_prev = (longest_subsequence_ending_with[prev_elem] + <span class="dv">1</span>)</span>
<span id="cb404-20"><a href="#cb404-20" aria-hidden="true"></a></span>
<span id="cb404-21"><a href="#cb404-21" aria-hidden="true"></a></span>
<span id="cb404-22"><a href="#cb404-22" aria-hidden="true"></a><span class="pp"># If the prev_elem is smaller than the current elem (so it&#39;s increasing)   </span></span>
<span id="cb404-23"><a href="#cb404-23" aria-hidden="true"></a></span>
<span id="cb404-24"><a href="#cb404-24" aria-hidden="true"></a><span class="er"># And if the longest subsequence from prev_elem would yield a better       </span></span>
<span id="cb404-25"><a href="#cb404-25" aria-hidden="true"></a></span>
<span id="cb404-26"><a href="#cb404-26" aria-hidden="true"></a><span class="er"># subsequence for curr_elem.                                               </span></span>
<span id="cb404-27"><a href="#cb404-27" aria-hidden="true"></a>            <span class="cf">if</span> ((sequence[prev_elem] &lt; sequence[curr_elem]) and</span>
<span id="cb404-28"><a href="#cb404-28" aria-hidden="true"></a>                    (subsequence_length_through_prev &gt;</span>
<span id="cb404-29"><a href="#cb404-29" aria-hidden="true"></a>                         longest_subsequence_ending_with[curr_elem])):</span>
<span id="cb404-30"><a href="#cb404-30" aria-hidden="true"></a></span>
<span id="cb404-31"><a href="#cb404-31" aria-hidden="true"></a></span>
<span id="cb404-32"><a href="#cb404-32" aria-hidden="true"></a><span class="er"># Set the candidate best subsequence at curr_elem to go through prev.    </span></span>
<span id="cb404-33"><a href="#cb404-33" aria-hidden="true"></a>                longest_subsequence_ending_with[curr_elem] = (subsequence_length_through_prev)</span>
<span id="cb404-34"><a href="#cb404-34" aria-hidden="true"></a>                backreference_for_subsequence_ending_with[curr_elem] = prev_elem</span>
<span id="cb404-35"><a href="#cb404-35" aria-hidden="true"></a></span>
<span id="cb404-36"><a href="#cb404-36" aria-hidden="true"></a><span class="pp"># If the new end is the best, update the best.    </span></span>
<span id="cb404-37"><a href="#cb404-37" aria-hidden="true"></a></span>
<span id="cb404-38"><a href="#cb404-38" aria-hidden="true"></a>        <span class="cf">if</span> (longest_subsequence_ending_with[curr_elem] &gt;</span>
<span id="cb404-39"><a href="#cb404-39" aria-hidden="true"></a>                longest_subsequence_ending_with[current_best_end]):</span>
<span id="cb404-40"><a href="#cb404-40" aria-hidden="true"></a>            current_best_end = curr_elem</span>
<span id="cb404-41"><a href="#cb404-41" aria-hidden="true"></a></span>
<span id="cb404-42"><a href="#cb404-42" aria-hidden="true"></a><span class="er"># Output the overall best by following the backreferences.  </span></span>
<span id="cb404-43"><a href="#cb404-43" aria-hidden="true"></a></span>
<span id="cb404-44"><a href="#cb404-44" aria-hidden="true"></a>    best_subsequence = []</span>
<span id="cb404-45"><a href="#cb404-45" aria-hidden="true"></a>    current_backreference = current_best_end</span>
<span id="cb404-46"><a href="#cb404-46" aria-hidden="true"></a></span>
<span id="cb404-47"><a href="#cb404-47" aria-hidden="true"></a>    <span class="cf">while</span> current_backreference is not None:</span>
<span id="cb404-48"><a href="#cb404-48" aria-hidden="true"></a>        best_subsequence.append(sequence[current_backreference])</span>
<span id="cb404-49"><a href="#cb404-49" aria-hidden="true"></a>        current_backreference = (backreference_for_subsequence_ending_with[current_backreference])</span>
<span id="cb404-50"><a href="#cb404-50" aria-hidden="true"></a></span>
<span id="cb404-51"><a href="#cb404-51" aria-hidden="true"></a>    best_subsequence.reverse()</span>
<span id="cb404-52"><a href="#cb404-52" aria-hidden="true"></a></span>
<span id="cb404-53"><a href="#cb404-53" aria-hidden="true"></a>    <span class="cf">return</span> best_subsequence                                                   </span></code></pre></div>
<h5>
The O(n log n) Dynamic Programming Solution
</h1>
<div class="sourceCode" id="cb405"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true"></a>def find_smallest_elem_as_big_as(sequence, subsequence, elem):</span>
<span id="cb405-2"><a href="#cb405-2" aria-hidden="true"></a>    <span class="st">&quot;&quot;&quot;Returns the index of the smallest element in subsequence as big as          </span></span>
<span id="cb405-3"><a href="#cb405-3" aria-hidden="true"></a>    sequence[elem].  sequence[elem] must not be larger than every element in       </span>
<span id="cb405-4"><a href="#cb405-4" aria-hidden="true"></a>    subsequence.  The elements in subsequence are indices in sequence.  Uses       </span>
<span id="cb405-5"><a href="#cb405-5" aria-hidden="true"></a>    binary search.<span class="st">&quot;&quot;&quot;</span></span>
<span id="cb405-6"><a href="#cb405-6" aria-hidden="true"></a></span>
<span id="cb405-7"><a href="#cb405-7" aria-hidden="true"></a>    low = <span class="dv">0</span></span>
<span id="cb405-8"><a href="#cb405-8" aria-hidden="true"></a>    high = len(subsequence) - <span class="dv">1</span></span>
<span id="cb405-9"><a href="#cb405-9" aria-hidden="true"></a></span>
<span id="cb405-10"><a href="#cb405-10" aria-hidden="true"></a>    <span class="cf">while</span> high &gt; low:</span>
<span id="cb405-11"><a href="#cb405-11" aria-hidden="true"></a>        mid = (high + low) / <span class="dv">2</span></span>
<span id="cb405-12"><a href="#cb405-12" aria-hidden="true"></a></span>
<span id="cb405-13"><a href="#cb405-13" aria-hidden="true"></a><span class="pp"># If the current element is not as big as elem, throw out the low half of    </span></span>
<span id="cb405-14"><a href="#cb405-14" aria-hidden="true"></a></span>
<span id="cb405-15"><a href="#cb405-15" aria-hidden="true"></a><span class="er"># sequence.                                                                  </span></span>
<span id="cb405-16"><a href="#cb405-16" aria-hidden="true"></a>        <span class="cf">if</span> sequence[subsequence[mid]] &lt; sequence[elem]:</span>
<span id="cb405-17"><a href="#cb405-17" aria-hidden="true"></a>            low = mid + <span class="dv">1</span></span>
<span id="cb405-18"><a href="#cb405-18" aria-hidden="true"></a></span>
<span id="cb405-19"><a href="#cb405-19" aria-hidden="true"></a><span class="pp"># If the current element is as big as elem, throw out everything bigger, but </span></span>
<span id="cb405-20"><a href="#cb405-20" aria-hidden="true"></a></span>
<span id="cb405-21"><a href="#cb405-21" aria-hidden="true"></a><span class="er"># keep the current element.                                                  </span></span>
<span id="cb405-22"><a href="#cb405-22" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb405-23"><a href="#cb405-23" aria-hidden="true"></a>            high = mid</span>
<span id="cb405-24"><a href="#cb405-24" aria-hidden="true"></a></span>
<span id="cb405-25"><a href="#cb405-25" aria-hidden="true"></a>    <span class="cf">return</span> high</span>
<span id="cb405-26"><a href="#cb405-26" aria-hidden="true"></a></span>
<span id="cb405-27"><a href="#cb405-27" aria-hidden="true"></a></span>
<span id="cb405-28"><a href="#cb405-28" aria-hidden="true"></a>def optimized_dynamic_programming_solution(sequence):</span>
<span id="cb405-29"><a href="#cb405-29" aria-hidden="true"></a>    <span class="st">&quot;&quot;&quot;Finds the longest increasing subsequence in sequence using dynamic          </span></span>
<span id="cb405-30"><a href="#cb405-30" aria-hidden="true"></a>    programming and binary search (per                                             </span>
<span id="cb405-31"><a href="#cb405-31" aria-hidden="true"></a>    http:<span class="co">//en.wikipedia.org/wiki/Longest_increasing_subsequence).  This solution   </span></span>
<span id="cb405-32"><a href="#cb405-32" aria-hidden="true"></a>    is O(n log n).<span class="st">&quot;&quot;&quot;</span></span>
<span id="cb405-33"><a href="#cb405-33" aria-hidden="true"></a></span>
<span id="cb405-34"><a href="#cb405-34" aria-hidden="true"></a></span>
<span id="cb405-35"><a href="#cb405-35" aria-hidden="true"></a><span class="er"># Both of these lists hold the indices of elements in sequence and not the        </span></span>
<span id="cb405-36"><a href="#cb405-36" aria-hidden="true"></a></span>
<span id="cb405-37"><a href="#cb405-37" aria-hidden="true"></a><span class="er"># elements themselves.                                                         </span></span>
<span id="cb405-38"><a href="#cb405-38" aria-hidden="true"></a></span>
<span id="cb405-39"><a href="#cb405-39" aria-hidden="true"></a><span class="er"># This list will always be sorted.                                             </span></span>
<span id="cb405-40"><a href="#cb405-40" aria-hidden="true"></a>    smallest_end_to_subsequence_of_length = []</span>
<span id="cb405-41"><a href="#cb405-41" aria-hidden="true"></a></span>
<span id="cb405-42"><a href="#cb405-42" aria-hidden="true"></a></span>
<span id="cb405-43"><a href="#cb405-43" aria-hidden="true"></a><span class="er"># This array goes along with sequence (not                                     </span></span>
<span id="cb405-44"><a href="#cb405-44" aria-hidden="true"></a></span>
<span id="cb405-45"><a href="#cb405-45" aria-hidden="true"></a><span class="er"># smallest_end_to_subsequence_of_length).  Following the corresponding element </span></span>
<span id="cb405-46"><a href="#cb405-46" aria-hidden="true"></a></span>
<span id="cb405-47"><a href="#cb405-47" aria-hidden="true"></a><span class="er"># in this array repeatedly will generate the desired subsequence.              </span></span>
<span id="cb405-48"><a href="#cb405-48" aria-hidden="true"></a>    parent = [None <span class="cf">for</span> _ in sequence]</span>
<span id="cb405-49"><a href="#cb405-49" aria-hidden="true"></a></span>
<span id="cb405-50"><a href="#cb405-50" aria-hidden="true"></a>    <span class="cf">for</span> elem in range(len(sequence)):</span>
<span id="cb405-51"><a href="#cb405-51" aria-hidden="true"></a></span>
<span id="cb405-52"><a href="#cb405-52" aria-hidden="true"></a><span class="er"># We&#39;re iterating through sequence in order, so if elem is bigger than the   </span></span>
<span id="cb405-53"><a href="#cb405-53" aria-hidden="true"></a></span>
<span id="cb405-54"><a href="#cb405-54" aria-hidden="true"></a><span class="er"># end of longest current subsequence, we have a new longest increasing          </span></span>
<span id="cb405-55"><a href="#cb405-55" aria-hidden="true"></a></span>
<span id="cb405-56"><a href="#cb405-56" aria-hidden="true"></a><span class="er"># subsequence.                                                               </span></span>
<span id="cb405-57"><a href="#cb405-57" aria-hidden="true"></a>        <span class="cf">if</span> (len(smallest_end_to_subsequence_of_length) == <span class="dv">0</span> or</span>
<span id="cb405-58"><a href="#cb405-58" aria-hidden="true"></a>                    sequence[elem] &gt; sequence[smallest_end_to_subsequence_of_length[-<span class="dv">1</span>]]):</span>
<span id="cb405-59"><a href="#cb405-59" aria-hidden="true"></a></span>
<span id="cb405-60"><a href="#cb405-60" aria-hidden="true"></a><span class="pp"># If we are adding the first element, it has no parent.  Otherwise, we        </span></span>
<span id="cb405-61"><a href="#cb405-61" aria-hidden="true"></a></span>
<span id="cb405-62"><a href="#cb405-62" aria-hidden="true"></a><span class="er"># need to update the parent to be the previous biggest element.            </span></span>
<span id="cb405-63"><a href="#cb405-63" aria-hidden="true"></a>            <span class="cf">if</span> len(smallest_end_to_subsequence_of_length) &gt; <span class="dv">0</span>:</span>
<span id="cb405-64"><a href="#cb405-64" aria-hidden="true"></a>                parent[elem] = smallest_end_to_subsequence_of_length[-<span class="dv">1</span>]</span>
<span id="cb405-65"><a href="#cb405-65" aria-hidden="true"></a>            smallest_end_to_subsequence_of_length.append(elem)</span>
<span id="cb405-66"><a href="#cb405-66" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb405-67"><a href="#cb405-67" aria-hidden="true"></a></span>
<span id="cb405-68"><a href="#cb405-68" aria-hidden="true"></a><span class="pp"># If we can&#39;t make a longer subsequence, we might be able to make a        </span></span>
<span id="cb405-69"><a href="#cb405-69" aria-hidden="true"></a></span>
<span id="cb405-70"><a href="#cb405-70" aria-hidden="true"></a><span class="er"># subsequence of equal size to one of our earlier subsequences with a         </span></span>
<span id="cb405-71"><a href="#cb405-71" aria-hidden="true"></a></span>
<span id="cb405-72"><a href="#cb405-72" aria-hidden="true"></a><span class="er"># smaller ending number (which makes it easier to find a later number that </span></span>
<span id="cb405-73"><a href="#cb405-73" aria-hidden="true"></a></span>
<span id="cb405-74"><a href="#cb405-74" aria-hidden="true"></a><span class="er"># is increasing).                                                          </span></span>
<span id="cb405-75"><a href="#cb405-75" aria-hidden="true"></a></span>
<span id="cb405-76"><a href="#cb405-76" aria-hidden="true"></a><span class="er"># Thus, we look for the smallest element in                                </span></span>
<span id="cb405-77"><a href="#cb405-77" aria-hidden="true"></a></span>
<span id="cb405-78"><a href="#cb405-78" aria-hidden="true"></a><span class="er"># smallest_end_to_subsequence_of_length that is at least as big as elem       </span></span>
<span id="cb405-79"><a href="#cb405-79" aria-hidden="true"></a></span>
<span id="cb405-80"><a href="#cb405-80" aria-hidden="true"></a><span class="er"># and replace it with elem.                                                </span></span>
<span id="cb405-81"><a href="#cb405-81" aria-hidden="true"></a></span>
<span id="cb405-82"><a href="#cb405-82" aria-hidden="true"></a><span class="er"># This preserves correctness because if there is a subsequence of length n </span></span>
<span id="cb405-83"><a href="#cb405-83" aria-hidden="true"></a></span>
<span id="cb405-84"><a href="#cb405-84" aria-hidden="true"></a><span class="er"># that ends with a number smaller than elem, we could add elem on to the   </span></span>
<span id="cb405-85"><a href="#cb405-85" aria-hidden="true"></a></span>
<span id="cb405-86"><a href="#cb405-86" aria-hidden="true"></a><span class="er"># end of that subsequence to get a subsequence of length n+1.              </span></span>
<span id="cb405-87"><a href="#cb405-87" aria-hidden="true"></a>            location_to_replace = find_smallest_elem_as_big_as(sequence, smallest_end_to_subsequence_of_length, elem)</span>
<span id="cb405-88"><a href="#cb405-88" aria-hidden="true"></a>            smallest_end_to_subsequence_of_length[location_to_replace] = elem</span>
<span id="cb405-89"><a href="#cb405-89" aria-hidden="true"></a></span>
<span id="cb405-90"><a href="#cb405-90" aria-hidden="true"></a><span class="pp"># If we&#39;re replacing the first element, we don&#39;t need to update its parent </span></span>
<span id="cb405-91"><a href="#cb405-91" aria-hidden="true"></a></span>
<span id="cb405-92"><a href="#cb405-92" aria-hidden="true"></a><span class="er"># because a subsequence of length 1 has no parent.  Otherwise, its parent  </span></span>
<span id="cb405-93"><a href="#cb405-93" aria-hidden="true"></a></span>
<span id="cb405-94"><a href="#cb405-94" aria-hidden="true"></a><span class="er"># is the subsequence one shorter, which we just added onto.                </span></span>
<span id="cb405-95"><a href="#cb405-95" aria-hidden="true"></a>            <span class="cf">if</span> location_to_replace != <span class="dv">0</span>:</span>
<span id="cb405-96"><a href="#cb405-96" aria-hidden="true"></a>                parent[elem] = (smallest_end_to_subsequence_of_length[location_to_replace - <span class="dv">1</span>])</span>
<span id="cb405-97"><a href="#cb405-97" aria-hidden="true"></a></span>
<span id="cb405-98"><a href="#cb405-98" aria-hidden="true"></a></span>
<span id="cb405-99"><a href="#cb405-99" aria-hidden="true"></a><span class="er"># Generate the longest increasing subsequence by backtracking through parent.  </span></span>
<span id="cb405-100"><a href="#cb405-100" aria-hidden="true"></a>    curr_parent = smallest_end_to_subsequence_of_length[-<span class="dv">1</span>]</span>
<span id="cb405-101"><a href="#cb405-101" aria-hidden="true"></a>    longest_increasing_subsequence = []</span>
<span id="cb405-102"><a href="#cb405-102" aria-hidden="true"></a></span>
<span id="cb405-103"><a href="#cb405-103" aria-hidden="true"></a>    <span class="cf">while</span> curr_parent is not None:</span>
<span id="cb405-104"><a href="#cb405-104" aria-hidden="true"></a>        longest_increasing_subsequence.append(sequence[curr_parent])</span>
<span id="cb405-105"><a href="#cb405-105" aria-hidden="true"></a>        curr_parent = parent[curr_parent]</span>
<span id="cb405-106"><a href="#cb405-106" aria-hidden="true"></a></span>
<span id="cb405-107"><a href="#cb405-107" aria-hidden="true"></a>    longest_increasing_subsequence.reverse()</span>
<span id="cb405-108"><a href="#cb405-108" aria-hidden="true"></a></span>
<span id="cb405-109"><a href="#cb405-109" aria-hidden="true"></a>    <span class="cf">return</span> longest_increasing_subsequence         </span></code></pre></div>
</section>
<section id="answer-3-score-21" class="level4">
<h4>Answer 3 (score 21)</h4>
<p>Speaking about DP solution, I found it surprising that no one mentioned the fact that LIS can be reduced to <a href="https://en.wikipedia.org/wiki/Longest_common_subsequence_problem">LCS</a>. All you need to do is sort the copy of the original sequence, remove all the duplicates and do LCS of them. In pseudocode it is:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true"></a>def LIS(S):</span>
<span id="cb406-2"><a href="#cb406-2" aria-hidden="true"></a>    T = sort(S)</span>
<span id="cb406-3"><a href="#cb406-3" aria-hidden="true"></a>    T = removeDuplicates(T)</span>
<span id="cb406-4"><a href="#cb406-4" aria-hidden="true"></a>    <span class="cf">return</span> LCS(S, T)</span></code></pre></div>
<p>And the full implementation written in Go. You do not need to maintain the whole n^2 DP matrix if you do not need to reconstruct the solution.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true"></a>func lcs(arr1 []<span class="dt">int</span>) <span class="dt">int</span> {</span>
<span id="cb407-2"><a href="#cb407-2" aria-hidden="true"></a>    arr2 := make([]<span class="dt">int</span>, len(arr1))</span>
<span id="cb407-3"><a href="#cb407-3" aria-hidden="true"></a>    <span class="cf">for</span> i, v := range arr1 {</span>
<span id="cb407-4"><a href="#cb407-4" aria-hidden="true"></a>        arr2[i] = v</span>
<span id="cb407-5"><a href="#cb407-5" aria-hidden="true"></a>    }</span>
<span id="cb407-6"><a href="#cb407-6" aria-hidden="true"></a>    sort.Ints(arr1)</span>
<span id="cb407-7"><a href="#cb407-7" aria-hidden="true"></a>    arr3 := []<span class="dt">int</span>{}</span>
<span id="cb407-8"><a href="#cb407-8" aria-hidden="true"></a>    prev := arr1[<span class="dv">0</span>] - <span class="dv">1</span></span>
<span id="cb407-9"><a href="#cb407-9" aria-hidden="true"></a>    <span class="cf">for</span> _, v := range arr1 {</span>
<span id="cb407-10"><a href="#cb407-10" aria-hidden="true"></a>        <span class="cf">if</span> v != prev {</span>
<span id="cb407-11"><a href="#cb407-11" aria-hidden="true"></a>            prev = v</span>
<span id="cb407-12"><a href="#cb407-12" aria-hidden="true"></a>            arr3 = append(arr3, v)</span>
<span id="cb407-13"><a href="#cb407-13" aria-hidden="true"></a>        }</span>
<span id="cb407-14"><a href="#cb407-14" aria-hidden="true"></a>    }</span>
<span id="cb407-15"><a href="#cb407-15" aria-hidden="true"></a></span>
<span id="cb407-16"><a href="#cb407-16" aria-hidden="true"></a>    n1, n2 := len(arr1), len(arr3)</span>
<span id="cb407-17"><a href="#cb407-17" aria-hidden="true"></a></span>
<span id="cb407-18"><a href="#cb407-18" aria-hidden="true"></a>    M := make([][]<span class="dt">int</span>, n2 + <span class="dv">1</span>)</span>
<span id="cb407-19"><a href="#cb407-19" aria-hidden="true"></a>    e := make([]<span class="dt">int</span>, (n1 + <span class="dv">1</span>) * (n2 + <span class="dv">1</span>))</span>
<span id="cb407-20"><a href="#cb407-20" aria-hidden="true"></a>    <span class="cf">for</span> i := range M {</span>
<span id="cb407-21"><a href="#cb407-21" aria-hidden="true"></a>        M[i] = e[i * (n1 + <span class="dv">1</span>):(i + <span class="dv">1</span>) * (n1 + <span class="dv">1</span>)]</span>
<span id="cb407-22"><a href="#cb407-22" aria-hidden="true"></a>    }</span>
<span id="cb407-23"><a href="#cb407-23" aria-hidden="true"></a></span>
<span id="cb407-24"><a href="#cb407-24" aria-hidden="true"></a>    <span class="cf">for</span> i := <span class="dv">1</span>; i &lt;= n2; i++ {</span>
<span id="cb407-25"><a href="#cb407-25" aria-hidden="true"></a>        <span class="cf">for</span> j := <span class="dv">1</span>; j &lt;= n1; j++ {</span>
<span id="cb407-26"><a href="#cb407-26" aria-hidden="true"></a>            <span class="cf">if</span> arr2[j - <span class="dv">1</span>] == arr3[i - <span class="dv">1</span>] {</span>
<span id="cb407-27"><a href="#cb407-27" aria-hidden="true"></a>                M[i][j] = M[i - <span class="dv">1</span>][j - <span class="dv">1</span>] + <span class="dv">1</span></span>
<span id="cb407-28"><a href="#cb407-28" aria-hidden="true"></a>            } <span class="cf">else</span> <span class="cf">if</span> M[i - <span class="dv">1</span>][j] &gt; M[i][j - <span class="dv">1</span>] {</span>
<span id="cb407-29"><a href="#cb407-29" aria-hidden="true"></a>                M[i][j] = M[i - <span class="dv">1</span>][j]</span>
<span id="cb407-30"><a href="#cb407-30" aria-hidden="true"></a>            } <span class="cf">else</span> {</span>
<span id="cb407-31"><a href="#cb407-31" aria-hidden="true"></a>                M[i][j] = M[i][j - <span class="dv">1</span>]</span>
<span id="cb407-32"><a href="#cb407-32" aria-hidden="true"></a>            }</span>
<span id="cb407-33"><a href="#cb407-33" aria-hidden="true"></a>        }</span>
<span id="cb407-34"><a href="#cb407-34" aria-hidden="true"></a>    }</span>
<span id="cb407-35"><a href="#cb407-35" aria-hidden="true"></a></span>
<span id="cb407-36"><a href="#cb407-36" aria-hidden="true"></a>    <span class="cf">return</span> M[n2][n1]</span>
<span id="cb407-37"><a href="#cb407-37" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-implement-a-binary-tree-score-167458-in-2018" class="level3">
<h3>78: How to Implement a Binary Tree? (score <a href="https://stackoverflow.com/q/2598437.html">167458</a> in 2018)</h3>
<section id="question-77" class="level4">
<h4>Question</h4>
<p>Which is the best data structure that can be used to implement Binary Tree in Python?</p>
</section>
<section id="answer-2-score-79" class="level4">
<h4>Answer 2 (score 79)</h4>
<p>Here is my simple recursive implementation of binary tree.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true"></a></span>
<span id="cb408-2"><a href="#cb408-2" aria-hidden="true"></a><span class="er">#!/usr/bin/python</span></span>
<span id="cb408-3"><a href="#cb408-3" aria-hidden="true"></a></span>
<span id="cb408-4"><a href="#cb408-4" aria-hidden="true"></a>class Node:</span>
<span id="cb408-5"><a href="#cb408-5" aria-hidden="true"></a>    def __init__(self, val):</span>
<span id="cb408-6"><a href="#cb408-6" aria-hidden="true"></a>        self.l = None</span>
<span id="cb408-7"><a href="#cb408-7" aria-hidden="true"></a>        self.r = None</span>
<span id="cb408-8"><a href="#cb408-8" aria-hidden="true"></a>        self.v = val</span>
<span id="cb408-9"><a href="#cb408-9" aria-hidden="true"></a></span>
<span id="cb408-10"><a href="#cb408-10" aria-hidden="true"></a>class Tree:</span>
<span id="cb408-11"><a href="#cb408-11" aria-hidden="true"></a>    def __init__(self):</span>
<span id="cb408-12"><a href="#cb408-12" aria-hidden="true"></a>        self.root = None</span>
<span id="cb408-13"><a href="#cb408-13" aria-hidden="true"></a></span>
<span id="cb408-14"><a href="#cb408-14" aria-hidden="true"></a>    def getRoot(self):</span>
<span id="cb408-15"><a href="#cb408-15" aria-hidden="true"></a>        <span class="cf">return</span> self.root</span>
<span id="cb408-16"><a href="#cb408-16" aria-hidden="true"></a></span>
<span id="cb408-17"><a href="#cb408-17" aria-hidden="true"></a>    def add(self, val):</span>
<span id="cb408-18"><a href="#cb408-18" aria-hidden="true"></a>        <span class="cf">if</span>(self.root == None):</span>
<span id="cb408-19"><a href="#cb408-19" aria-hidden="true"></a>            self.root = Node(val)</span>
<span id="cb408-20"><a href="#cb408-20" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb408-21"><a href="#cb408-21" aria-hidden="true"></a>            self._add(val, self.root)</span>
<span id="cb408-22"><a href="#cb408-22" aria-hidden="true"></a></span>
<span id="cb408-23"><a href="#cb408-23" aria-hidden="true"></a>    def _add(self, val, node):</span>
<span id="cb408-24"><a href="#cb408-24" aria-hidden="true"></a>        <span class="cf">if</span>(val &lt; node.v):</span>
<span id="cb408-25"><a href="#cb408-25" aria-hidden="true"></a>            <span class="cf">if</span>(node.l != None):</span>
<span id="cb408-26"><a href="#cb408-26" aria-hidden="true"></a>                self._add(val, node.l)</span>
<span id="cb408-27"><a href="#cb408-27" aria-hidden="true"></a>            <span class="cf">else</span>:</span>
<span id="cb408-28"><a href="#cb408-28" aria-hidden="true"></a>                node.l = Node(val)</span>
<span id="cb408-29"><a href="#cb408-29" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb408-30"><a href="#cb408-30" aria-hidden="true"></a>            <span class="cf">if</span>(node.r != None):</span>
<span id="cb408-31"><a href="#cb408-31" aria-hidden="true"></a>                self._add(val, node.r)</span>
<span id="cb408-32"><a href="#cb408-32" aria-hidden="true"></a>            <span class="cf">else</span>:</span>
<span id="cb408-33"><a href="#cb408-33" aria-hidden="true"></a>                node.r = Node(val)</span>
<span id="cb408-34"><a href="#cb408-34" aria-hidden="true"></a></span>
<span id="cb408-35"><a href="#cb408-35" aria-hidden="true"></a>    def find(self, val):</span>
<span id="cb408-36"><a href="#cb408-36" aria-hidden="true"></a>        <span class="cf">if</span>(self.root != None):</span>
<span id="cb408-37"><a href="#cb408-37" aria-hidden="true"></a>            <span class="cf">return</span> self._find(val, self.root)</span>
<span id="cb408-38"><a href="#cb408-38" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb408-39"><a href="#cb408-39" aria-hidden="true"></a>            <span class="cf">return</span> None</span>
<span id="cb408-40"><a href="#cb408-40" aria-hidden="true"></a></span>
<span id="cb408-41"><a href="#cb408-41" aria-hidden="true"></a>    def _find(self, val, node):</span>
<span id="cb408-42"><a href="#cb408-42" aria-hidden="true"></a>        <span class="cf">if</span>(val == node.v):</span>
<span id="cb408-43"><a href="#cb408-43" aria-hidden="true"></a>            <span class="cf">return</span> node</span>
<span id="cb408-44"><a href="#cb408-44" aria-hidden="true"></a>        elif(val &lt; node.v and node.l != None):</span>
<span id="cb408-45"><a href="#cb408-45" aria-hidden="true"></a>            self._find(val, node.l)</span>
<span id="cb408-46"><a href="#cb408-46" aria-hidden="true"></a>        elif(val &gt; node.v and node.r != None):</span>
<span id="cb408-47"><a href="#cb408-47" aria-hidden="true"></a>            self._find(val, node.r)</span>
<span id="cb408-48"><a href="#cb408-48" aria-hidden="true"></a></span>
<span id="cb408-49"><a href="#cb408-49" aria-hidden="true"></a>    def deleteTree(self):</span>
<span id="cb408-50"><a href="#cb408-50" aria-hidden="true"></a></span>
<span id="cb408-51"><a href="#cb408-51" aria-hidden="true"></a><span class="er"># garbage collector will do this for us. </span></span>
<span id="cb408-52"><a href="#cb408-52" aria-hidden="true"></a>        self.root = None</span>
<span id="cb408-53"><a href="#cb408-53" aria-hidden="true"></a></span>
<span id="cb408-54"><a href="#cb408-54" aria-hidden="true"></a>    def printTree(self):</span>
<span id="cb408-55"><a href="#cb408-55" aria-hidden="true"></a>        <span class="cf">if</span>(self.root != None):</span>
<span id="cb408-56"><a href="#cb408-56" aria-hidden="true"></a>            self._printTree(self.root)</span>
<span id="cb408-57"><a href="#cb408-57" aria-hidden="true"></a></span>
<span id="cb408-58"><a href="#cb408-58" aria-hidden="true"></a>    def _printTree(self, node):</span>
<span id="cb408-59"><a href="#cb408-59" aria-hidden="true"></a>        <span class="cf">if</span>(node != None):</span>
<span id="cb408-60"><a href="#cb408-60" aria-hidden="true"></a>            self._printTree(node.l)</span>
<span id="cb408-61"><a href="#cb408-61" aria-hidden="true"></a>            print str(node.v) + <span class="ch">&#39; &#39;</span></span>
<span id="cb408-62"><a href="#cb408-62" aria-hidden="true"></a>            self._printTree(node.r)</span>
<span id="cb408-63"><a href="#cb408-63" aria-hidden="true"></a></span>
<span id="cb408-64"><a href="#cb408-64" aria-hidden="true"></a></span>
<span id="cb408-65"><a href="#cb408-65" aria-hidden="true"></a><span class="pp">#     3</span></span>
<span id="cb408-66"><a href="#cb408-66" aria-hidden="true"></a></span>
<span id="cb408-67"><a href="#cb408-67" aria-hidden="true"></a><span class="pp"># 0     4</span></span>
<span id="cb408-68"><a href="#cb408-68" aria-hidden="true"></a></span>
<span id="cb408-69"><a href="#cb408-69" aria-hidden="true"></a><span class="pp">#   2      8</span></span>
<span id="cb408-70"><a href="#cb408-70" aria-hidden="true"></a>tree = Tree()</span>
<span id="cb408-71"><a href="#cb408-71" aria-hidden="true"></a>tree.add(<span class="dv">3</span>)</span>
<span id="cb408-72"><a href="#cb408-72" aria-hidden="true"></a>tree.add(<span class="dv">4</span>)</span>
<span id="cb408-73"><a href="#cb408-73" aria-hidden="true"></a>tree.add(<span class="dv">0</span>)</span>
<span id="cb408-74"><a href="#cb408-74" aria-hidden="true"></a>tree.add(<span class="dv">8</span>)</span>
<span id="cb408-75"><a href="#cb408-75" aria-hidden="true"></a>tree.add(<span class="dv">2</span>)</span>
<span id="cb408-76"><a href="#cb408-76" aria-hidden="true"></a>tree.printTree()</span>
<span id="cb408-77"><a href="#cb408-77" aria-hidden="true"></a>print (tree.find(<span class="dv">3</span>)).v</span>
<span id="cb408-78"><a href="#cb408-78" aria-hidden="true"></a>print tree.find(<span class="dv">10</span>)</span>
<span id="cb408-79"><a href="#cb408-79" aria-hidden="true"></a>tree.deleteTree()</span>
<span id="cb408-80"><a href="#cb408-80" aria-hidden="true"></a>tree.printTree()</span></code></pre></div>
</section>
<section id="answer-3-score-27-1" class="level4">
<h4>Answer 3 (score 27)</h4>
<div class="sourceCode" id="cb409"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true"></a></span>
<span id="cb409-2"><a href="#cb409-2" aria-hidden="true"></a><span class="er"># simple binary tree</span></span>
<span id="cb409-3"><a href="#cb409-3" aria-hidden="true"></a></span>
<span id="cb409-4"><a href="#cb409-4" aria-hidden="true"></a><span class="er"># in this implementation, a node is inserted between an existing node and the root</span></span>
<span id="cb409-5"><a href="#cb409-5" aria-hidden="true"></a></span>
<span id="cb409-6"><a href="#cb409-6" aria-hidden="true"></a></span>
<span id="cb409-7"><a href="#cb409-7" aria-hidden="true"></a>class BinaryTree():</span>
<span id="cb409-8"><a href="#cb409-8" aria-hidden="true"></a></span>
<span id="cb409-9"><a href="#cb409-9" aria-hidden="true"></a>    def __init__(self,rootid):</span>
<span id="cb409-10"><a href="#cb409-10" aria-hidden="true"></a>      self.left = None</span>
<span id="cb409-11"><a href="#cb409-11" aria-hidden="true"></a>      self.right = None</span>
<span id="cb409-12"><a href="#cb409-12" aria-hidden="true"></a>      self.rootid = rootid</span>
<span id="cb409-13"><a href="#cb409-13" aria-hidden="true"></a></span>
<span id="cb409-14"><a href="#cb409-14" aria-hidden="true"></a>    def getLeftChild(self):</span>
<span id="cb409-15"><a href="#cb409-15" aria-hidden="true"></a>        <span class="cf">return</span> self.left</span>
<span id="cb409-16"><a href="#cb409-16" aria-hidden="true"></a>    def getRightChild(self):</span>
<span id="cb409-17"><a href="#cb409-17" aria-hidden="true"></a>        <span class="cf">return</span> self.right</span>
<span id="cb409-18"><a href="#cb409-18" aria-hidden="true"></a>    def setNodeValue(self,value):</span>
<span id="cb409-19"><a href="#cb409-19" aria-hidden="true"></a>        self.rootid = value</span>
<span id="cb409-20"><a href="#cb409-20" aria-hidden="true"></a>    def getNodeValue(self):</span>
<span id="cb409-21"><a href="#cb409-21" aria-hidden="true"></a>        <span class="cf">return</span> self.rootid</span>
<span id="cb409-22"><a href="#cb409-22" aria-hidden="true"></a></span>
<span id="cb409-23"><a href="#cb409-23" aria-hidden="true"></a>    def insertRight(self,newNode):</span>
<span id="cb409-24"><a href="#cb409-24" aria-hidden="true"></a>        <span class="cf">if</span> self.right == None:</span>
<span id="cb409-25"><a href="#cb409-25" aria-hidden="true"></a>            self.right = BinaryTree(newNode)</span>
<span id="cb409-26"><a href="#cb409-26" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb409-27"><a href="#cb409-27" aria-hidden="true"></a>            tree = BinaryTree(newNode)</span>
<span id="cb409-28"><a href="#cb409-28" aria-hidden="true"></a>            tree.right = self.right</span>
<span id="cb409-29"><a href="#cb409-29" aria-hidden="true"></a>            self.right = tree</span>
<span id="cb409-30"><a href="#cb409-30" aria-hidden="true"></a></span>
<span id="cb409-31"><a href="#cb409-31" aria-hidden="true"></a>    def insertLeft(self,newNode):</span>
<span id="cb409-32"><a href="#cb409-32" aria-hidden="true"></a>        <span class="cf">if</span> self.left == None:</span>
<span id="cb409-33"><a href="#cb409-33" aria-hidden="true"></a>            self.left = BinaryTree(newNode)</span>
<span id="cb409-34"><a href="#cb409-34" aria-hidden="true"></a>        <span class="cf">else</span>:</span>
<span id="cb409-35"><a href="#cb409-35" aria-hidden="true"></a>            tree = BinaryTree(newNode)</span>
<span id="cb409-36"><a href="#cb409-36" aria-hidden="true"></a>            tree.left = self.left</span>
<span id="cb409-37"><a href="#cb409-37" aria-hidden="true"></a>            self.left = tree</span>
<span id="cb409-38"><a href="#cb409-38" aria-hidden="true"></a></span>
<span id="cb409-39"><a href="#cb409-39" aria-hidden="true"></a></span>
<span id="cb409-40"><a href="#cb409-40" aria-hidden="true"></a>def printTree(tree):</span>
<span id="cb409-41"><a href="#cb409-41" aria-hidden="true"></a>        <span class="cf">if</span> tree != None:</span>
<span id="cb409-42"><a href="#cb409-42" aria-hidden="true"></a>            printTree(tree.getLeftChild())</span>
<span id="cb409-43"><a href="#cb409-43" aria-hidden="true"></a>            print(tree.getNodeValue())</span>
<span id="cb409-44"><a href="#cb409-44" aria-hidden="true"></a>            printTree(tree.getRightChild())</span>
<span id="cb409-45"><a href="#cb409-45" aria-hidden="true"></a></span>
<span id="cb409-46"><a href="#cb409-46" aria-hidden="true"></a></span>
<span id="cb409-47"><a href="#cb409-47" aria-hidden="true"></a></span>
<span id="cb409-48"><a href="#cb409-48" aria-hidden="true"></a></span>
<span id="cb409-49"><a href="#cb409-49" aria-hidden="true"></a><span class="er"># test tree</span></span>
<span id="cb409-50"><a href="#cb409-50" aria-hidden="true"></a></span>
<span id="cb409-51"><a href="#cb409-51" aria-hidden="true"></a>def testTree():</span>
<span id="cb409-52"><a href="#cb409-52" aria-hidden="true"></a>    myTree = BinaryTree(<span class="st">&quot;Maud&quot;</span>)</span>
<span id="cb409-53"><a href="#cb409-53" aria-hidden="true"></a>    myTree.insertLeft(<span class="st">&quot;Bob&quot;</span>)</span>
<span id="cb409-54"><a href="#cb409-54" aria-hidden="true"></a>    myTree.insertRight(<span class="st">&quot;Tony&quot;</span>)</span>
<span id="cb409-55"><a href="#cb409-55" aria-hidden="true"></a>    myTree.insertRight(<span class="st">&quot;Steven&quot;</span>)</span>
<span id="cb409-56"><a href="#cb409-56" aria-hidden="true"></a>    printTree(myTree)</span></code></pre></div>
<p>Read more about it Here:-This is a very simple <a href="http://www.pythonschool.net/data-structures-algorithms/binary-tree/" rel="noreferrer">implementation</a> of a binary tree.</p>
<p><a href="http://interactivepython.org/runestone/static/pythonds/Trees/SearchTreeImplementation.html" rel="noreferrer">This</a> is a nice tutorial with questions in between</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="when-should-i-use-kruskal-as-opposed-to-prim-and-vice-versa-score-166855-in-2019" class="level3">
<h3>79: When should I use Kruskal as opposed to Prim (and vice versa)? (score <a href="https://stackoverflow.com/q/1195872.html">166855</a> in 2019)</h3>
<section id="question-78" class="level4">
<h4>Question</h4>
<p>I was wondering when one should use <a href="http://en.wikipedia.org/wiki/Prim%27s_algorithm" rel="noreferrer">Prim’s algorithm</a> and when <a href="http://en.wikipedia.org/wiki/Kruskal%27s_algorithm" rel="noreferrer">Kruskal’s</a> to find the minimum spanning tree? They both have easy logics, same worst cases, and only difference is implementation which might involve a bit different data structures. So what is the deciding factor?</p>
</section>
<section id="answer-2-score-191" class="level4">
<h4>Answer 2 (score 191)</h4>
<p>Use Prim’s algorithm when you have a graph with lots of edges.</p>
<p>For a graph with <strong>V</strong> vertices <strong>E</strong> edges, Kruskal’s algorithm runs in <strong>O(E log V)</strong> time and Prim’s algorithm can run in <strong>O(E + V log V)</strong> amortized time, if you use a <a href="http://en.wikipedia.org/wiki/Fibonacci_heap" rel="noreferrer">Fibonacci Heap</a>.</p>
<p>Prim’s algorithm is significantly faster in the limit when you’ve got a really dense graph with many more edges than vertices. Kruskal performs better in typical situations (sparse graphs) because it uses simpler data structures.</p>
</section>
<section id="answer-3-score-95" class="level4">
<h4>Answer 3 (score 95)</h4>
<p>I found a very nice thread on the net that explains the difference in a very straightforward way : <a href="http://www.thestudentroom.co.uk/showthread.php?t=232168">http://www.thestudentroom.co.uk/showthread.php?t=232168</a>.</p>
<p>Kruskal’s algorithm will grow a solution from the cheapest edge by adding the next cheapest edge, provided that it doesn’t create a cycle.</p>
<p>Prim’s algorithm will grow a solution from a random vertex by adding the next cheapest vertex, the vertex that is not currently in the solution but connected to it by the cheapest edge.</p>
<p>Here attached is an interesting sheet on that topic.<img src="https://i.stack.imgur.com/KofyW.gif" alt="enter image description here"><img src="https://i.stack.imgur.com/6RCFr.gif" alt="enter image description here"></p>
<p>If you implement both Kruskal and Prim, in their optimal form : with a union find and a finbonacci heap respectively, then you will note how Kruskal is easy to implement compared to Prim.</p>
<p>Prim is harder with a fibonacci heap mainly because you have to maintain a book-keeping table to record the bi-directional link between graph nodes and heap nodes. With a Union Find, it’s the opposite, the structure is simple and can even produce directly the mst at almost no additional cost.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="is-it-possible-to-get-all-arguments-of-a-function-as-single-object-inside-that-function-score-166771-in-2017" class="level3">
<h3>80: Is it possible to get all arguments of a function as single object inside that function? (score <a href="https://stackoverflow.com/q/4633125.html">166771</a> in 2017)</h3>
<section id="question-79" class="level4">
<h4>Question</h4>
<p>In PHP there is <a href="http://php.net/manual/en/function.func-num-args.php" rel="noreferrer"><code>func_num_args</code></a> and <a href="http://php.net/manual/en/function.func-get-args.php" rel="noreferrer"><code>func_get_args</code></a>, is there something similar for JavaScript?</p>
</section>
<section id="answer-accepted-score-337" class="level4">
<h4>Answer accepted (score 337)</h4>
<p>Use <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments" rel="noreferrer"><code>arguments</code></a>. You can access it like an array. Use <code>arguments.length</code> for the number of arguments.</p>
</section>
<section id="answer-2-score-134" class="level4">
<h4>Answer 2 (score 134)</h4>
<p>The <strong>arguments</strong> is <a href="https://stackoverflow.com/a/29707677/1766230">an array-like object</a> (not an actual array). Example function…</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true"></a>function testArguments () <span class="co">// &lt;-- notice no arguments specified</span></span>
<span id="cb410-2"><a href="#cb410-2" aria-hidden="true"></a>{</span>
<span id="cb410-3"><a href="#cb410-3" aria-hidden="true"></a>    console.log(arguments); <span class="co">// outputs the arguments to the console</span></span>
<span id="cb410-4"><a href="#cb410-4" aria-hidden="true"></a>    var htmlOutput = <span class="st">&quot;&quot;</span>;</span>
<span id="cb410-5"><a href="#cb410-5" aria-hidden="true"></a>    <span class="cf">for</span> (var i=<span class="dv">0</span>; i &lt; arguments.length; i++) {</span>
<span id="cb410-6"><a href="#cb410-6" aria-hidden="true"></a>        htmlOutput += &#39;&lt;li&gt;&#39; + arguments[i] + &#39;&lt;/li&gt;&#39;;</span>
<span id="cb410-7"><a href="#cb410-7" aria-hidden="true"></a>    }</span>
<span id="cb410-8"><a href="#cb410-8" aria-hidden="true"></a>    document.write(&#39;&lt;ul&gt;&#39; + htmlOutput + &#39;&lt;/ul&gt;&#39;);</span>
<span id="cb410-9"><a href="#cb410-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>Try it out…</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true"></a>testArguments(<span class="st">&quot;This&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;test&quot;</span>);  <span class="co">// outputs [&quot;This&quot;,&quot;is&quot;,&quot;a&quot;,&quot;test&quot;]</span></span>
<span id="cb411-2"><a href="#cb411-2" aria-hidden="true"></a>testArguments(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>);          <span class="co">// outputs [1,2,3,4,5,6,7,8,9]</span></span></code></pre></div>
<p>The full details: <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments" rel="noreferrer">https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments</a></p>
</section>
<section id="answer-3-score-27-2" class="level4">
<h4>Answer 3 (score 27)</h4>
<p>ES6 allows a construct where a function argument is specified with a “…” notation such as</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true"></a>function testArgs (...args) {</span>
<span id="cb412-2"><a href="#cb412-2" aria-hidden="true"></a> <span class="co">// Where you can test picking the first element</span></span>
<span id="cb412-3"><a href="#cb412-3" aria-hidden="true"></a> console.log(args[<span class="dv">0</span>]); </span>
<span id="cb412-4"><a href="#cb412-4" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="insertion-sort-vs.-selection-sort-score-163201-in-2015" class="level3">
<h3>81: Insertion Sort vs. Selection Sort (score <a href="https://stackoverflow.com/q/15799034.html">163201</a> in 2015)</h3>
<section id="question-80" class="level4">
<h4>Question</h4>
<p>I am trying to understand the differences between Insertion Sort and Selection Sort.</p>
<p>They both seem to have two components: an unsorted list and a sorted list. They both seem to take one element from the unsorted list and put it into the sorted list at the proper place. I have seen some sites/books saying that selection sort does this by swapping one at a time while insertion sort simply finds the right spot and inserts it. However, I have seen other articles say something, saying that insertion sort also swaps. Consequently, I am confused. Is there any canonical source?</p>
</section>
<section id="answer-2-score-166" class="level4">
<h4>Answer 2 (score 166)</h4>
<h5>
Selection Sort:
</h2>
<p>
Given a list, take the current element and exchange it with the smallest element on the right hand side of the current element. <img src="https://i.stack.imgur.com/1SKb2.jpg" alt="Selection Sort">
</p>
<h5>
Insertion Sort:
</h2>
<p>
Given a list, take the current element and insert it at the appropriate position of the list, adjusting the list every time you insert. It is similar to arranging the cards in a Card game. <img src="https://i.stack.imgur.com/CK6vC.jpg" alt="Insertion Sort">
</p>
<p>Time Complexity of selection sort is always <code>n(n - 1)/2</code>, whereas insertion sort has better time complexity as its worst case complexity is <code>n(n - 1)/2</code>. Generally it will take lesser or equal comparisons then <code>n(n - 1)/2</code>.</p>
<p>Source: <a href="http://cheetahonfire.blogspot.com/2009/05/selection-sort-vs-insertion-sort.html" rel="noreferrer">http://cheetahonfire.blogspot.com/2009/05/selection-sort-vs-insertion-sort.html</a></p>
</section>
<section id="answer-3-score-53" class="level4">
<h4>Answer 3 (score 53)</h4>
<p>Both insertion sort and selection sort have an outer loop (over every index), and an inner loop (over a subset of indices). Each pass of the inner loop expands the sorted region by one element, at the expense of the unsorted region, until it runs out of unsorted elements.</p>
<p>The difference is in what the inner loop does:</p>
<ul>
<li>
<p>
In selection sort, the inner loop is over the <em>unsorted</em> elements. Each pass selects one element, and moves it to its final location (at the current end of the sorted region).
</p>
</li>
<li>
<p>
In insertion sort, each pass of the inner loop iterates over the <em>sorted</em> elements. Sorted elements are displaced until the loop finds the correct place to insert the next unsorted element.
</p>
</li>
</ul>
<p>So, in a selection sort, sorted elements are found in output order, and stay put once they are found. Conversely, in an insertion sort, the <em>unsorted</em> elements stay put until consumed in input order, while elements of the sorted region keep getting moved around.</p>
<p>As far as swapping is concerned: selection sort does one swap per pass of the inner loop. Insertion sort typically saves the element to be inserted as <code>temp</code> <em>before</em> the inner loop, leaving room for the inner loop to shift sorted elements up by one, then copies <code>temp</code> to the insertion point afterwards.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="writing-your-own-square-root-function-score-160732-in-2015" class="level3">
<h3>82: Writing your own square root function (score <a href="https://stackoverflow.com/q/1623375.html">160732</a> in 2015)</h3>
<section id="question-81" class="level4">
<h4>Question</h4>
<p>How do you write your own function for finding the most accurate square root of an integer?</p>
<p>After googling it, I found <a href="//web.archive.org/web/20100330183043/http://nlindblad.org/2007/04/04/write-your-own-square-root-function" rel="noreferrer">this</a> (archived from its <a href="http://nlindblad.org/2007/04/04/write-your-own-square-root-function/" rel="noreferrer">original link</a>), but first, I didn’t get it completely, and second, it is approximate too.</p>
<p>Assume square root as nearest integer (to the actual root) or a float.</p>
</section>
<section id="answer-accepted-score-80" class="level4">
<h4>Answer accepted (score 80)</h4>
<p>The following computes floor(sqrt(N)) for N &gt; 0:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true"></a>x = <span class="dv">2</span>^ceil(numbits(N)/<span class="dv">2</span>)</span>
<span id="cb413-2"><a href="#cb413-2" aria-hidden="true"></a>loop:</span>
<span id="cb413-3"><a href="#cb413-3" aria-hidden="true"></a>    y = floor((x + floor(N/x))/<span class="dv">2</span>)</span>
<span id="cb413-4"><a href="#cb413-4" aria-hidden="true"></a>    <span class="cf">if</span> y &gt;= x</span>
<span id="cb413-5"><a href="#cb413-5" aria-hidden="true"></a>        <span class="cf">return</span> x</span>
<span id="cb413-6"><a href="#cb413-6" aria-hidden="true"></a>    x = y</span></code></pre></div>
<p>This is a version of Newton’s method given in Crandall &amp; Pomerance, “Prime Numbers: A Computational Perspective”. The reason you should use this version is that people who know what they’re doing have proven that it converges exactly to the floor of the square root, and it’s simple so the probability of making an implementation error is small. It’s also fast (although it’s possible to construct an even faster algorithm – but doing that correctly is much more complex). A properly implemented binary search can be faster for very small N, but there you may as well use a lookup table.</p>
<p>To round to the <i>nearest</i> integer, just compute t = floor(sqrt(4N)) using the algorithm above. If the least significant bit of t is set, then choose x = (t+1)/2; otherwise choose t/2. Note that this rounds up on a tie; you could also round down (or round to even) by looking at whether the remainder is nonzero (i.e. whether t^2 == 4N).</p>
<p>Note that you don’t need to use floating-point arithmetic. In fact, you shouldn’t. This algorithm should be implemented entirely using integers (in particular, the floor() functions just indicate that regular integer division should be used).</p>
</section>
<section id="answer-2-score-37-1" class="level4">
<h4>Answer 2 (score 37)</h4>
<p>Depending on your needs, a simple divide-and-conquer strategy can be used. It won’t converge as <em>fast</em> as some other methods but it may be a lot easier for a novice to understand. In addition, since it’s an O(log n) algorithm (halving the search space each iteration), the worst case for a 32-bit float will be 32 iterations.</p>
<p>Let’s say you want the square root of 62.104. You pick a value halfway between 0 and that, and square it. If the square is higher than your number, you need to concentrate on numbers less than the midpoint. If it’s too low, concentrate on those higher.</p>
<p>With real math, you could keep dividing the search space in two forever (if it doesn’t have a rational square root). In reality, computers will eventually run out of precision and you’ll have your approximation. The following C program illustrates the point:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true"></a></span>
<span id="cb414-2"><a href="#cb414-2" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb414-3"><a href="#cb414-3" aria-hidden="true"></a></span>
<span id="cb414-4"><a href="#cb414-4" aria-hidden="true"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb414-5"><a href="#cb414-5" aria-hidden="true"></a></span>
<span id="cb414-6"><a href="#cb414-6" aria-hidden="true"></a><span class="dt">int</span> main (<span class="dt">int</span> argc, <span class="dt">char</span> *argv[]) {</span>
<span id="cb414-7"><a href="#cb414-7" aria-hidden="true"></a>    <span class="dt">float</span> val, low, high, mid, oldmid, midsqr;</span>
<span id="cb414-8"><a href="#cb414-8" aria-hidden="true"></a>    <span class="dt">int</span> step = <span class="dv">0</span>;</span>
<span id="cb414-9"><a href="#cb414-9" aria-hidden="true"></a></span>
<span id="cb414-10"><a href="#cb414-10" aria-hidden="true"></a>    <span class="co">// Get argument, force to non-negative.</span></span>
<span id="cb414-11"><a href="#cb414-11" aria-hidden="true"></a></span>
<span id="cb414-12"><a href="#cb414-12" aria-hidden="true"></a>    <span class="cf">if</span> (argc &lt; <span class="dv">2</span>) {</span>
<span id="cb414-13"><a href="#cb414-13" aria-hidden="true"></a>        printf (<span class="st">&quot;Usage: sqrt &lt;number&gt;</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb414-14"><a href="#cb414-14" aria-hidden="true"></a>        <span class="cf">return</span> <span class="dv">1</span>;</span>
<span id="cb414-15"><a href="#cb414-15" aria-hidden="true"></a>    }</span>
<span id="cb414-16"><a href="#cb414-16" aria-hidden="true"></a>    val = fabs (atof (argv[<span class="dv">1</span>]));</span>
<span id="cb414-17"><a href="#cb414-17" aria-hidden="true"></a></span>
<span id="cb414-18"><a href="#cb414-18" aria-hidden="true"></a>    <span class="co">// Set initial bounds and print heading.</span></span>
<span id="cb414-19"><a href="#cb414-19" aria-hidden="true"></a></span>
<span id="cb414-20"><a href="#cb414-20" aria-hidden="true"></a>    low = <span class="dv">0</span>;</span>
<span id="cb414-21"><a href="#cb414-21" aria-hidden="true"></a>    high = mid = val;</span>
<span id="cb414-22"><a href="#cb414-22" aria-hidden="true"></a>    oldmid = -<span class="dv">1</span>;</span>
<span id="cb414-23"><a href="#cb414-23" aria-hidden="true"></a></span>
<span id="cb414-24"><a href="#cb414-24" aria-hidden="true"></a>    printf (<span class="st">&quot;%4s  %10s  %10s  %10s  %10s  %10s    %s</span><span class="sc">\n</span><span class="st">&quot;</span>,</span>
<span id="cb414-25"><a href="#cb414-25" aria-hidden="true"></a>        <span class="st">&quot;Step&quot;</span>, <span class="st">&quot;Number&quot;</span>, <span class="st">&quot;Low&quot;</span>, <span class="st">&quot;High&quot;</span>, <span class="st">&quot;Mid&quot;</span>, <span class="st">&quot;Square&quot;</span>, <span class="st">&quot;Result&quot;</span>);</span>
<span id="cb414-26"><a href="#cb414-26" aria-hidden="true"></a></span>
<span id="cb414-27"><a href="#cb414-27" aria-hidden="true"></a>    <span class="co">// Keep going until accurate enough.</span></span>
<span id="cb414-28"><a href="#cb414-28" aria-hidden="true"></a></span>
<span id="cb414-29"><a href="#cb414-29" aria-hidden="true"></a>    <span class="cf">while</span> (fabs(oldmid - mid) &gt;= <span class="fl">0.00001</span>) {</span>
<span id="cb414-30"><a href="#cb414-30" aria-hidden="true"></a>        oldmid = mid;</span>
<span id="cb414-31"><a href="#cb414-31" aria-hidden="true"></a></span>
<span id="cb414-32"><a href="#cb414-32" aria-hidden="true"></a>        <span class="co">// Get midpoint and see if we need lower or higher.</span></span>
<span id="cb414-33"><a href="#cb414-33" aria-hidden="true"></a></span>
<span id="cb414-34"><a href="#cb414-34" aria-hidden="true"></a>        mid = (high + low) / <span class="dv">2</span>;</span>
<span id="cb414-35"><a href="#cb414-35" aria-hidden="true"></a>        midsqr = mid * mid;</span>
<span id="cb414-36"><a href="#cb414-36" aria-hidden="true"></a>        printf (<span class="st">&quot;%4d  %10.4f  %10.4f  %10.4f  %10.4f  %10.4f  &quot;</span>,</span>
<span id="cb414-37"><a href="#cb414-37" aria-hidden="true"></a>            ++step, val, low, high, mid, midsqr);</span>
<span id="cb414-38"><a href="#cb414-38" aria-hidden="true"></a>        <span class="cf">if</span> (mid * mid &gt; val) {</span>
<span id="cb414-39"><a href="#cb414-39" aria-hidden="true"></a>            high = mid;</span>
<span id="cb414-40"><a href="#cb414-40" aria-hidden="true"></a>            printf (<span class="st">&quot;- too high</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb414-41"><a href="#cb414-41" aria-hidden="true"></a>        } <span class="cf">else</span> {</span>
<span id="cb414-42"><a href="#cb414-42" aria-hidden="true"></a>            low = mid;</span>
<span id="cb414-43"><a href="#cb414-43" aria-hidden="true"></a>            printf (<span class="st">&quot;- too low</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb414-44"><a href="#cb414-44" aria-hidden="true"></a>        }</span>
<span id="cb414-45"><a href="#cb414-45" aria-hidden="true"></a>    }</span>
<span id="cb414-46"><a href="#cb414-46" aria-hidden="true"></a></span>
<span id="cb414-47"><a href="#cb414-47" aria-hidden="true"></a>    <span class="co">// Desired accuracy reached, print it.</span></span>
<span id="cb414-48"><a href="#cb414-48" aria-hidden="true"></a></span>
<span id="cb414-49"><a href="#cb414-49" aria-hidden="true"></a>    printf (<span class="st">&quot;sqrt(%.4f) = %.4f</span><span class="sc">\n</span><span class="st">&quot;</span>, val, mid);</span>
<span id="cb414-50"><a href="#cb414-50" aria-hidden="true"></a>    <span class="cf">return</span> <span class="dv">0</span>;</span>
<span id="cb414-51"><a href="#cb414-51" aria-hidden="true"></a>}</span></code></pre></div>
<p>Here’s a couple of runs so you hopefully get an idea how it works. For 77:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true"></a>pax&gt; sqrt <span class="dv">77</span></span>
<span id="cb415-2"><a href="#cb415-2" aria-hidden="true"></a>Step      Number         Low        High         Mid      Square    Result</span>
<span id="cb415-3"><a href="#cb415-3" aria-hidden="true"></a>   <span class="dv">1</span>     <span class="fl">77.0000</span>      <span class="fl">0.0000</span>     <span class="fl">77.0000</span>     <span class="fl">38.5000</span>   <span class="fl">1482.2500</span>  - too high</span>
<span id="cb415-4"><a href="#cb415-4" aria-hidden="true"></a>   <span class="dv">2</span>     <span class="fl">77.0000</span>      <span class="fl">0.0000</span>     <span class="fl">38.5000</span>     <span class="fl">19.2500</span>    <span class="fl">370.5625</span>  - too high</span>
<span id="cb415-5"><a href="#cb415-5" aria-hidden="true"></a>   <span class="dv">3</span>     <span class="fl">77.0000</span>      <span class="fl">0.0000</span>     <span class="fl">19.2500</span>      <span class="fl">9.6250</span>     <span class="fl">92.6406</span>  - too high</span>
<span id="cb415-6"><a href="#cb415-6" aria-hidden="true"></a>   <span class="dv">4</span>     <span class="fl">77.0000</span>      <span class="fl">0.0000</span>      <span class="fl">9.6250</span>      <span class="fl">4.8125</span>     <span class="fl">23.1602</span>  - too low</span>
<span id="cb415-7"><a href="#cb415-7" aria-hidden="true"></a>   <span class="dv">5</span>     <span class="fl">77.0000</span>      <span class="fl">4.8125</span>      <span class="fl">9.6250</span>      <span class="fl">7.2188</span>     <span class="fl">52.1104</span>  - too low</span>
<span id="cb415-8"><a href="#cb415-8" aria-hidden="true"></a>   <span class="dv">6</span>     <span class="fl">77.0000</span>      <span class="fl">7.2188</span>      <span class="fl">9.6250</span>      <span class="fl">8.4219</span>     <span class="fl">70.9280</span>  - too low</span>
<span id="cb415-9"><a href="#cb415-9" aria-hidden="true"></a>   <span class="dv">7</span>     <span class="fl">77.0000</span>      <span class="fl">8.4219</span>      <span class="fl">9.6250</span>      <span class="fl">9.0234</span>     <span class="fl">81.4224</span>  - too high</span>
<span id="cb415-10"><a href="#cb415-10" aria-hidden="true"></a>   <span class="dv">8</span>     <span class="fl">77.0000</span>      <span class="fl">8.4219</span>      <span class="fl">9.0234</span>      <span class="fl">8.7227</span>     <span class="fl">76.0847</span>  - too low</span>
<span id="cb415-11"><a href="#cb415-11" aria-hidden="true"></a>   <span class="dv">9</span>     <span class="fl">77.0000</span>      <span class="fl">8.7227</span>      <span class="fl">9.0234</span>      <span class="fl">8.8730</span>     <span class="fl">78.7310</span>  - too high</span>
<span id="cb415-12"><a href="#cb415-12" aria-hidden="true"></a>  <span class="dv">10</span>     <span class="fl">77.0000</span>      <span class="fl">8.7227</span>      <span class="fl">8.8730</span>      <span class="fl">8.7979</span>     <span class="fl">77.4022</span>  - too high</span>
<span id="cb415-13"><a href="#cb415-13" aria-hidden="true"></a>  <span class="dv">11</span>     <span class="fl">77.0000</span>      <span class="fl">8.7227</span>      <span class="fl">8.7979</span>      <span class="fl">8.7603</span>     <span class="fl">76.7421</span>  - too low</span>
<span id="cb415-14"><a href="#cb415-14" aria-hidden="true"></a>  <span class="dv">12</span>     <span class="fl">77.0000</span>      <span class="fl">8.7603</span>      <span class="fl">8.7979</span>      <span class="fl">8.7791</span>     <span class="fl">77.0718</span>  - too high</span>
<span id="cb415-15"><a href="#cb415-15" aria-hidden="true"></a>  <span class="dv">13</span>     <span class="fl">77.0000</span>      <span class="fl">8.7603</span>      <span class="fl">8.7791</span>      <span class="fl">8.7697</span>     <span class="fl">76.9068</span>  - too low</span>
<span id="cb415-16"><a href="#cb415-16" aria-hidden="true"></a>  <span class="dv">14</span>     <span class="fl">77.0000</span>      <span class="fl">8.7697</span>      <span class="fl">8.7791</span>      <span class="fl">8.7744</span>     <span class="fl">76.9893</span>  - too low</span>
<span id="cb415-17"><a href="#cb415-17" aria-hidden="true"></a>  <span class="dv">15</span>     <span class="fl">77.0000</span>      <span class="fl">8.7744</span>      <span class="fl">8.7791</span>      <span class="fl">8.7767</span>     <span class="fl">77.0305</span>  - too high</span>
<span id="cb415-18"><a href="#cb415-18" aria-hidden="true"></a>  <span class="dv">16</span>     <span class="fl">77.0000</span>      <span class="fl">8.7744</span>      <span class="fl">8.7767</span>      <span class="fl">8.7755</span>     <span class="fl">77.0099</span>  - too high</span>
<span id="cb415-19"><a href="#cb415-19" aria-hidden="true"></a>  <span class="dv">17</span>     <span class="fl">77.0000</span>      <span class="fl">8.7744</span>      <span class="fl">8.7755</span>      <span class="fl">8.7749</span>     <span class="fl">76.9996</span>  - too low</span>
<span id="cb415-20"><a href="#cb415-20" aria-hidden="true"></a>  <span class="dv">18</span>     <span class="fl">77.0000</span>      <span class="fl">8.7749</span>      <span class="fl">8.7755</span>      <span class="fl">8.7752</span>     <span class="fl">77.0047</span>  - too high</span>
<span id="cb415-21"><a href="#cb415-21" aria-hidden="true"></a>  <span class="dv">19</span>     <span class="fl">77.0000</span>      <span class="fl">8.7749</span>      <span class="fl">8.7752</span>      <span class="fl">8.7751</span>     <span class="fl">77.0022</span>  - too high</span>
<span id="cb415-22"><a href="#cb415-22" aria-hidden="true"></a>  <span class="dv">20</span>     <span class="fl">77.0000</span>      <span class="fl">8.7749</span>      <span class="fl">8.7751</span>      <span class="fl">8.7750</span>     <span class="fl">77.0009</span>  - too high</span>
<span id="cb415-23"><a href="#cb415-23" aria-hidden="true"></a>  <span class="dv">21</span>     <span class="fl">77.0000</span>      <span class="fl">8.7749</span>      <span class="fl">8.7750</span>      <span class="fl">8.7750</span>     <span class="fl">77.0002</span>  - too high</span>
<span id="cb415-24"><a href="#cb415-24" aria-hidden="true"></a>  <span class="dv">22</span>     <span class="fl">77.0000</span>      <span class="fl">8.7749</span>      <span class="fl">8.7750</span>      <span class="fl">8.7750</span>     <span class="fl">76.9999</span>  - too low</span>
<span id="cb415-25"><a href="#cb415-25" aria-hidden="true"></a>  <span class="dv">23</span>     <span class="fl">77.0000</span>      <span class="fl">8.7750</span>      <span class="fl">8.7750</span>      <span class="fl">8.7750</span>     <span class="fl">77.0000</span>  - too low</span>
<span id="cb415-26"><a href="#cb415-26" aria-hidden="true"></a>sqrt(<span class="fl">77.0000</span>) = <span class="fl">8.7750</span></span></code></pre></div>
<p>For 62.104:</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true"></a>pax&gt; sqrt <span class="fl">62.104</span></span>
<span id="cb416-2"><a href="#cb416-2" aria-hidden="true"></a>Step      Number         Low        High         Mid      Square    Result</span>
<span id="cb416-3"><a href="#cb416-3" aria-hidden="true"></a>   <span class="dv">1</span>     <span class="fl">62.1040</span>      <span class="fl">0.0000</span>     <span class="fl">62.1040</span>     <span class="fl">31.0520</span>    <span class="fl">964.2267</span>  - too high</span>
<span id="cb416-4"><a href="#cb416-4" aria-hidden="true"></a>   <span class="dv">2</span>     <span class="fl">62.1040</span>      <span class="fl">0.0000</span>     <span class="fl">31.0520</span>     <span class="fl">15.5260</span>    <span class="fl">241.0567</span>  - too high</span>
<span id="cb416-5"><a href="#cb416-5" aria-hidden="true"></a>   <span class="dv">3</span>     <span class="fl">62.1040</span>      <span class="fl">0.0000</span>     <span class="fl">15.5260</span>      <span class="fl">7.7630</span>     <span class="fl">60.2642</span>  - too low</span>
<span id="cb416-6"><a href="#cb416-6" aria-hidden="true"></a>   <span class="dv">4</span>     <span class="fl">62.1040</span>      <span class="fl">7.7630</span>     <span class="fl">15.5260</span>     <span class="fl">11.6445</span>    <span class="fl">135.5944</span>  - too high</span>
<span id="cb416-7"><a href="#cb416-7" aria-hidden="true"></a>   <span class="dv">5</span>     <span class="fl">62.1040</span>      <span class="fl">7.7630</span>     <span class="fl">11.6445</span>      <span class="fl">9.7037</span>     <span class="fl">94.1628</span>  - too high</span>
<span id="cb416-8"><a href="#cb416-8" aria-hidden="true"></a>   <span class="dv">6</span>     <span class="fl">62.1040</span>      <span class="fl">7.7630</span>      <span class="fl">9.7037</span>      <span class="fl">8.7334</span>     <span class="fl">76.2718</span>  - too high</span>
<span id="cb416-9"><a href="#cb416-9" aria-hidden="true"></a>   <span class="dv">7</span>     <span class="fl">62.1040</span>      <span class="fl">7.7630</span>      <span class="fl">8.7334</span>      <span class="fl">8.2482</span>     <span class="fl">68.0326</span>  - too high</span>
<span id="cb416-10"><a href="#cb416-10" aria-hidden="true"></a>   <span class="dv">8</span>     <span class="fl">62.1040</span>      <span class="fl">7.7630</span>      <span class="fl">8.2482</span>      <span class="fl">8.0056</span>     <span class="fl">64.0895</span>  - too high</span>
<span id="cb416-11"><a href="#cb416-11" aria-hidden="true"></a>   <span class="dv">9</span>     <span class="fl">62.1040</span>      <span class="fl">7.7630</span>      <span class="fl">8.0056</span>      <span class="fl">7.8843</span>     <span class="fl">62.1621</span>  - too high</span>
<span id="cb416-12"><a href="#cb416-12" aria-hidden="true"></a>  <span class="dv">10</span>     <span class="fl">62.1040</span>      <span class="fl">7.7630</span>      <span class="fl">7.8843</span>      <span class="fl">7.8236</span>     <span class="fl">61.2095</span>  - too low</span>
<span id="cb416-13"><a href="#cb416-13" aria-hidden="true"></a>  <span class="dv">11</span>     <span class="fl">62.1040</span>      <span class="fl">7.8236</span>      <span class="fl">7.8843</span>      <span class="fl">7.8540</span>     <span class="fl">61.6849</span>  - too low</span>
<span id="cb416-14"><a href="#cb416-14" aria-hidden="true"></a>  <span class="dv">12</span>     <span class="fl">62.1040</span>      <span class="fl">7.8540</span>      <span class="fl">7.8843</span>      <span class="fl">7.8691</span>     <span class="fl">61.9233</span>  - too low</span>
<span id="cb416-15"><a href="#cb416-15" aria-hidden="true"></a>  <span class="dv">13</span>     <span class="fl">62.1040</span>      <span class="fl">7.8691</span>      <span class="fl">7.8843</span>      <span class="fl">7.8767</span>     <span class="fl">62.0426</span>  - too low</span>
<span id="cb416-16"><a href="#cb416-16" aria-hidden="true"></a>  <span class="dv">14</span>     <span class="fl">62.1040</span>      <span class="fl">7.8767</span>      <span class="fl">7.8843</span>      <span class="fl">7.8805</span>     <span class="fl">62.1024</span>  - too low</span>
<span id="cb416-17"><a href="#cb416-17" aria-hidden="true"></a>  <span class="dv">15</span>     <span class="fl">62.1040</span>      <span class="fl">7.8805</span>      <span class="fl">7.8843</span>      <span class="fl">7.8824</span>     <span class="fl">62.1323</span>  - too high</span>
<span id="cb416-18"><a href="#cb416-18" aria-hidden="true"></a>  <span class="dv">16</span>     <span class="fl">62.1040</span>      <span class="fl">7.8805</span>      <span class="fl">7.8824</span>      <span class="fl">7.8815</span>     <span class="fl">62.1173</span>  - too high</span>
<span id="cb416-19"><a href="#cb416-19" aria-hidden="true"></a>  <span class="dv">17</span>     <span class="fl">62.1040</span>      <span class="fl">7.8805</span>      <span class="fl">7.8815</span>      <span class="fl">7.8810</span>     <span class="fl">62.1098</span>  - too high</span>
<span id="cb416-20"><a href="#cb416-20" aria-hidden="true"></a>  <span class="dv">18</span>     <span class="fl">62.1040</span>      <span class="fl">7.8805</span>      <span class="fl">7.8810</span>      <span class="fl">7.8807</span>     <span class="fl">62.1061</span>  - too high</span>
<span id="cb416-21"><a href="#cb416-21" aria-hidden="true"></a>  <span class="dv">19</span>     <span class="fl">62.1040</span>      <span class="fl">7.8805</span>      <span class="fl">7.8807</span>      <span class="fl">7.8806</span>     <span class="fl">62.1042</span>  - too high</span>
<span id="cb416-22"><a href="#cb416-22" aria-hidden="true"></a>  <span class="dv">20</span>     <span class="fl">62.1040</span>      <span class="fl">7.8805</span>      <span class="fl">7.8806</span>      <span class="fl">7.8806</span>     <span class="fl">62.1033</span>  - too low</span>
<span id="cb416-23"><a href="#cb416-23" aria-hidden="true"></a>  <span class="dv">21</span>     <span class="fl">62.1040</span>      <span class="fl">7.8806</span>      <span class="fl">7.8806</span>      <span class="fl">7.8806</span>     <span class="fl">62.1038</span>  - too low</span>
<span id="cb416-24"><a href="#cb416-24" aria-hidden="true"></a>  <span class="dv">22</span>     <span class="fl">62.1040</span>      <span class="fl">7.8806</span>      <span class="fl">7.8806</span>      <span class="fl">7.8806</span>     <span class="fl">62.1040</span>  - too high</span>
<span id="cb416-25"><a href="#cb416-25" aria-hidden="true"></a>  <span class="dv">23</span>     <span class="fl">62.1040</span>      <span class="fl">7.8806</span>      <span class="fl">7.8806</span>      <span class="fl">7.8806</span>     <span class="fl">62.1039</span>  - too high</span>
<span id="cb416-26"><a href="#cb416-26" aria-hidden="true"></a>sqrt(<span class="fl">62.1040</span>) = <span class="fl">7.8806</span></span></code></pre></div>
<p>For 49:</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true"></a>pax&gt; sqrt <span class="dv">49</span></span>
<span id="cb417-2"><a href="#cb417-2" aria-hidden="true"></a>Step      Number         Low        High         Mid      Square    Result</span>
<span id="cb417-3"><a href="#cb417-3" aria-hidden="true"></a>   <span class="dv">1</span>     <span class="fl">49.0000</span>      <span class="fl">0.0000</span>     <span class="fl">49.0000</span>     <span class="fl">24.5000</span>    <span class="fl">600.2500</span>  - too high</span>
<span id="cb417-4"><a href="#cb417-4" aria-hidden="true"></a>   <span class="dv">2</span>     <span class="fl">49.0000</span>      <span class="fl">0.0000</span>     <span class="fl">24.5000</span>     <span class="fl">12.2500</span>    <span class="fl">150.0625</span>  - too high</span>
<span id="cb417-5"><a href="#cb417-5" aria-hidden="true"></a>   <span class="dv">3</span>     <span class="fl">49.0000</span>      <span class="fl">0.0000</span>     <span class="fl">12.2500</span>      <span class="fl">6.1250</span>     <span class="fl">37.5156</span>  - too low</span>
<span id="cb417-6"><a href="#cb417-6" aria-hidden="true"></a>   <span class="dv">4</span>     <span class="fl">49.0000</span>      <span class="fl">6.1250</span>     <span class="fl">12.2500</span>      <span class="fl">9.1875</span>     <span class="fl">84.4102</span>  - too high</span>
<span id="cb417-7"><a href="#cb417-7" aria-hidden="true"></a>   <span class="dv">5</span>     <span class="fl">49.0000</span>      <span class="fl">6.1250</span>      <span class="fl">9.1875</span>      <span class="fl">7.6562</span>     <span class="fl">58.6182</span>  - too high</span>
<span id="cb417-8"><a href="#cb417-8" aria-hidden="true"></a>   <span class="dv">6</span>     <span class="fl">49.0000</span>      <span class="fl">6.1250</span>      <span class="fl">7.6562</span>      <span class="fl">6.8906</span>     <span class="fl">47.4807</span>  - too low</span>
<span id="cb417-9"><a href="#cb417-9" aria-hidden="true"></a>   <span class="dv">7</span>     <span class="fl">49.0000</span>      <span class="fl">6.8906</span>      <span class="fl">7.6562</span>      <span class="fl">7.2734</span>     <span class="fl">52.9029</span>  - too high</span>
<span id="cb417-10"><a href="#cb417-10" aria-hidden="true"></a>   <span class="dv">8</span>     <span class="fl">49.0000</span>      <span class="fl">6.8906</span>      <span class="fl">7.2734</span>      <span class="fl">7.0820</span>     <span class="fl">50.1552</span>  - too high</span>
<span id="cb417-11"><a href="#cb417-11" aria-hidden="true"></a>   <span class="dv">9</span>     <span class="fl">49.0000</span>      <span class="fl">6.8906</span>      <span class="fl">7.0820</span>      <span class="fl">6.9863</span>     <span class="fl">48.8088</span>  - too low</span>
<span id="cb417-12"><a href="#cb417-12" aria-hidden="true"></a>  <span class="dv">10</span>     <span class="fl">49.0000</span>      <span class="fl">6.9863</span>      <span class="fl">7.0820</span>      <span class="fl">7.0342</span>     <span class="fl">49.4797</span>  - too high</span>
<span id="cb417-13"><a href="#cb417-13" aria-hidden="true"></a>  <span class="dv">11</span>     <span class="fl">49.0000</span>      <span class="fl">6.9863</span>      <span class="fl">7.0342</span>      <span class="fl">7.0103</span>     <span class="fl">49.1437</span>  - too high</span>
<span id="cb417-14"><a href="#cb417-14" aria-hidden="true"></a>  <span class="dv">12</span>     <span class="fl">49.0000</span>      <span class="fl">6.9863</span>      <span class="fl">7.0103</span>      <span class="fl">6.9983</span>     <span class="fl">48.9761</span>  - too low</span>
<span id="cb417-15"><a href="#cb417-15" aria-hidden="true"></a>  <span class="dv">13</span>     <span class="fl">49.0000</span>      <span class="fl">6.9983</span>      <span class="fl">7.0103</span>      <span class="fl">7.0043</span>     <span class="fl">49.0598</span>  - too high</span>
<span id="cb417-16"><a href="#cb417-16" aria-hidden="true"></a>  <span class="dv">14</span>     <span class="fl">49.0000</span>      <span class="fl">6.9983</span>      <span class="fl">7.0043</span>      <span class="fl">7.0013</span>     <span class="fl">49.0179</span>  - too high</span>
<span id="cb417-17"><a href="#cb417-17" aria-hidden="true"></a>  <span class="dv">15</span>     <span class="fl">49.0000</span>      <span class="fl">6.9983</span>      <span class="fl">7.0013</span>      <span class="fl">6.9998</span>     <span class="fl">48.9970</span>  - too low</span>
<span id="cb417-18"><a href="#cb417-18" aria-hidden="true"></a>  <span class="dv">16</span>     <span class="fl">49.0000</span>      <span class="fl">6.9998</span>      <span class="fl">7.0013</span>      <span class="fl">7.0005</span>     <span class="fl">49.0075</span>  - too high</span>
<span id="cb417-19"><a href="#cb417-19" aria-hidden="true"></a>  <span class="dv">17</span>     <span class="fl">49.0000</span>      <span class="fl">6.9998</span>      <span class="fl">7.0005</span>      <span class="fl">7.0002</span>     <span class="fl">49.0022</span>  - too high</span>
<span id="cb417-20"><a href="#cb417-20" aria-hidden="true"></a>  <span class="dv">18</span>     <span class="fl">49.0000</span>      <span class="fl">6.9998</span>      <span class="fl">7.0002</span>      <span class="fl">7.0000</span>     <span class="fl">48.9996</span>  - too low</span>
<span id="cb417-21"><a href="#cb417-21" aria-hidden="true"></a>  <span class="dv">19</span>     <span class="fl">49.0000</span>      <span class="fl">7.0000</span>      <span class="fl">7.0002</span>      <span class="fl">7.0001</span>     <span class="fl">49.0009</span>  - too high</span>
<span id="cb417-22"><a href="#cb417-22" aria-hidden="true"></a>  <span class="dv">20</span>     <span class="fl">49.0000</span>      <span class="fl">7.0000</span>      <span class="fl">7.0001</span>      <span class="fl">7.0000</span>     <span class="fl">49.0003</span>  - too high</span>
<span id="cb417-23"><a href="#cb417-23" aria-hidden="true"></a>  <span class="dv">21</span>     <span class="fl">49.0000</span>      <span class="fl">7.0000</span>      <span class="fl">7.0000</span>      <span class="fl">7.0000</span>     <span class="fl">49.0000</span>  - too low</span>
<span id="cb417-24"><a href="#cb417-24" aria-hidden="true"></a>  <span class="dv">22</span>     <span class="fl">49.0000</span>      <span class="fl">7.0000</span>      <span class="fl">7.0000</span>      <span class="fl">7.0000</span>     <span class="fl">49.0001</span>  - too high</span>
<span id="cb417-25"><a href="#cb417-25" aria-hidden="true"></a>  <span class="dv">23</span>     <span class="fl">49.0000</span>      <span class="fl">7.0000</span>      <span class="fl">7.0000</span>      <span class="fl">7.0000</span>     <span class="fl">49.0000</span>  - too high</span>
<span id="cb417-26"><a href="#cb417-26" aria-hidden="true"></a>sqrt(<span class="fl">49.0000</span>) = <span class="fl">7.0000</span></span></code></pre></div>
</section>
<section id="answer-3-score-16-1" class="level4">
<h4>Answer 3 (score 16)</h4>
<p>A simple (but not very fast) method to calculate the square root of X:</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true"></a>squareroot(x)</span>
<span id="cb418-2"><a href="#cb418-2" aria-hidden="true"></a>    <span class="cf">if</span> x&lt;<span class="dv">0</span> then Error</span>
<span id="cb418-3"><a href="#cb418-3" aria-hidden="true"></a>    a = <span class="dv">1</span></span>
<span id="cb418-4"><a href="#cb418-4" aria-hidden="true"></a>    b = x</span>
<span id="cb418-5"><a href="#cb418-5" aria-hidden="true"></a>    <span class="cf">while</span> (abs(a-b)&gt;ErrorMargin) </span>
<span id="cb418-6"><a href="#cb418-6" aria-hidden="true"></a>        a = (a+b)/<span class="dv">2</span></span>
<span id="cb418-7"><a href="#cb418-7" aria-hidden="true"></a>        b = x/a</span>
<span id="cb418-8"><a href="#cb418-8" aria-hidden="true"></a>    endwhile</span>
<span id="cb418-9"><a href="#cb418-9" aria-hidden="true"></a>    <span class="cf">return</span> a;</span></code></pre></div>
<p>Example: squareroot(70000)</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true"></a>    a       b</span>
<span id="cb419-2"><a href="#cb419-2" aria-hidden="true"></a>    <span class="dv">1</span>   <span class="dv">70000</span></span>
<span id="cb419-3"><a href="#cb419-3" aria-hidden="true"></a><span class="dv">35001</span>       <span class="dv">2</span></span>
<span id="cb419-4"><a href="#cb419-4" aria-hidden="true"></a><span class="dv">17502</span>       <span class="dv">4</span></span>
<span id="cb419-5"><a href="#cb419-5" aria-hidden="true"></a> <span class="dv">8753</span>       <span class="dv">8</span></span>
<span id="cb419-6"><a href="#cb419-6" aria-hidden="true"></a> <span class="dv">4381</span>      <span class="dv">16</span></span>
<span id="cb419-7"><a href="#cb419-7" aria-hidden="true"></a> <span class="dv">2199</span>      <span class="dv">32</span></span>
<span id="cb419-8"><a href="#cb419-8" aria-hidden="true"></a> <span class="dv">1116</span>      <span class="dv">63</span></span>
<span id="cb419-9"><a href="#cb419-9" aria-hidden="true"></a>  <span class="dv">590</span>     <span class="dv">119</span></span>
<span id="cb419-10"><a href="#cb419-10" aria-hidden="true"></a>  <span class="dv">355</span>     <span class="dv">197</span></span>
<span id="cb419-11"><a href="#cb419-11" aria-hidden="true"></a>  <span class="dv">276</span>     <span class="dv">254</span></span>
<span id="cb419-12"><a href="#cb419-12" aria-hidden="true"></a>  <span class="dv">265</span>     <span class="dv">264</span></span></code></pre></div>
<p>As you can see it defines an upper and a lower boundary for the square root and narrows the boundary until its size is acceptable.</p>
<p>There are more efficient methods but this one illustrates the process and is easy to understand.</p>
<p>Just beware to set the Errormargin to 1 if using integers else you have an endless loop.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="quicksort-with-python-score-160578-in-2016" class="level3">
<h3>83: Quicksort with Python (score <a href="https://stackoverflow.com/q/18262306.html">160578</a> in 2016)</h3>
<section id="question-82" class="level4">
<h4>Question</h4>
<p>
I am totally new to python and I am trying to implement quicksort in it. Could someone please help me complete my code?
</p>
<p>I do not know how to concatenate the three arrays and printing them.</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true"></a>def sort(array=[<span class="dv">12</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">15</span>]):</span>
<span id="cb420-2"><a href="#cb420-2" aria-hidden="true"></a>    less = []</span>
<span id="cb420-3"><a href="#cb420-3" aria-hidden="true"></a>    equal = []</span>
<span id="cb420-4"><a href="#cb420-4" aria-hidden="true"></a>    greater = []</span>
<span id="cb420-5"><a href="#cb420-5" aria-hidden="true"></a></span>
<span id="cb420-6"><a href="#cb420-6" aria-hidden="true"></a>    <span class="cf">if</span> len(array) &gt; <span class="dv">1</span>:</span>
<span id="cb420-7"><a href="#cb420-7" aria-hidden="true"></a>        pivot = array[<span class="dv">0</span>]</span>
<span id="cb420-8"><a href="#cb420-8" aria-hidden="true"></a>        <span class="cf">for</span> x in array:</span>
<span id="cb420-9"><a href="#cb420-9" aria-hidden="true"></a>            <span class="cf">if</span> x &lt; pivot:</span>
<span id="cb420-10"><a href="#cb420-10" aria-hidden="true"></a>                less.append(x)</span>
<span id="cb420-11"><a href="#cb420-11" aria-hidden="true"></a>            <span class="cf">if</span> x == pivot:</span>
<span id="cb420-12"><a href="#cb420-12" aria-hidden="true"></a>                equal.append(x)</span>
<span id="cb420-13"><a href="#cb420-13" aria-hidden="true"></a>            <span class="cf">if</span> x &gt; pivot:</span>
<span id="cb420-14"><a href="#cb420-14" aria-hidden="true"></a>                greater.append(x)</span>
<span id="cb420-15"><a href="#cb420-15" aria-hidden="true"></a>            sort(less)</span>
<span id="cb420-16"><a href="#cb420-16" aria-hidden="true"></a>            sort(pivot)</span>
<span id="cb420-17"><a href="#cb420-17" aria-hidden="true"></a>            sort(greater)</span></code></pre></div>
</section>
<section id="answer-accepted-score-219" class="level4">
<h4>Answer accepted (score 219)</h4>
<div class="sourceCode" id="cb421"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true"></a>def sort(array=[<span class="dv">12</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">15</span>]):</span>
<span id="cb421-2"><a href="#cb421-2" aria-hidden="true"></a>    <span class="st">&quot;&quot;&quot;Sort the array by using quicksort.&quot;&quot;&quot;</span></span>
<span id="cb421-3"><a href="#cb421-3" aria-hidden="true"></a></span>
<span id="cb421-4"><a href="#cb421-4" aria-hidden="true"></a>    less = []</span>
<span id="cb421-5"><a href="#cb421-5" aria-hidden="true"></a>    equal = []</span>
<span id="cb421-6"><a href="#cb421-6" aria-hidden="true"></a>    greater = []</span>
<span id="cb421-7"><a href="#cb421-7" aria-hidden="true"></a></span>
<span id="cb421-8"><a href="#cb421-8" aria-hidden="true"></a>    <span class="cf">if</span> len(array) &gt; <span class="dv">1</span>:</span>
<span id="cb421-9"><a href="#cb421-9" aria-hidden="true"></a>        pivot = array[<span class="dv">0</span>]</span>
<span id="cb421-10"><a href="#cb421-10" aria-hidden="true"></a>        <span class="cf">for</span> x in array:</span>
<span id="cb421-11"><a href="#cb421-11" aria-hidden="true"></a>            <span class="cf">if</span> x &lt; pivot:</span>
<span id="cb421-12"><a href="#cb421-12" aria-hidden="true"></a>                less.append(x)</span>
<span id="cb421-13"><a href="#cb421-13" aria-hidden="true"></a>            elif x == pivot:</span>
<span id="cb421-14"><a href="#cb421-14" aria-hidden="true"></a>                equal.append(x)</span>
<span id="cb421-15"><a href="#cb421-15" aria-hidden="true"></a>            elif x &gt; pivot:</span>
<span id="cb421-16"><a href="#cb421-16" aria-hidden="true"></a>                greater.append(x)</span>
<span id="cb421-17"><a href="#cb421-17" aria-hidden="true"></a></span>
<span id="cb421-18"><a href="#cb421-18" aria-hidden="true"></a><span class="er"># Don&#39;t forget to return something!</span></span>
<span id="cb421-19"><a href="#cb421-19" aria-hidden="true"></a>        <span class="cf">return</span> sort(less)+equal+sort(greater)</span>
<span id="cb421-20"><a href="#cb421-20" aria-hidden="true"></a><span class="er"># Just use the + operator to join lists</span></span>
<span id="cb421-21"><a href="#cb421-21" aria-hidden="true"></a></span>
<span id="cb421-22"><a href="#cb421-22" aria-hidden="true"></a><span class="er"># Note that you want equal ^^^^^ not pivot</span></span>
<span id="cb421-23"><a href="#cb421-23" aria-hidden="true"></a>    <span class="cf">else</span>:</span>
<span id="cb421-24"><a href="#cb421-24" aria-hidden="true"></a><span class="er"># You need to handle the part at the end of the recursion - when you only have one element in your array, just return the array.</span></span>
<span id="cb421-25"><a href="#cb421-25" aria-hidden="true"></a>        <span class="cf">return</span> array</span></code></pre></div>
</section>
<section id="answer-2-score-137" class="level4">
<h4>Answer 2 (score 137)</h4>
<p>Quick sort without additional memory (in place)</p>
<p>
<p>Usage:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true"></a>array = [<span class="dv">97</span>, <span class="dv">200</span>, <span class="dv">100</span>, <span class="dv">101</span>, <span class="dv">211</span>, <span class="dv">107</span>]</span>
<span id="cb422-2"><a href="#cb422-2" aria-hidden="true"></a>quicksort(array)</span>
<span id="cb422-3"><a href="#cb422-3" aria-hidden="true"></a></span>
<span id="cb422-4"><a href="#cb422-4" aria-hidden="true"></a><span class="er"># array -&gt; [97, 100, 101, 107, 200, 211]</span></span></code></pre></div>
<div class="sourceCode" id="cb423"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb423-1"><a href="#cb423-1" aria-hidden="true"></a>def partition(array, begin, end):</span>
<span id="cb423-2"><a href="#cb423-2" aria-hidden="true"></a>    pivot = begin</span>
<span id="cb423-3"><a href="#cb423-3" aria-hidden="true"></a>    <span class="cf">for</span> i in xrange(begin+<span class="dv">1</span>, end+<span class="dv">1</span>):</span>
<span id="cb423-4"><a href="#cb423-4" aria-hidden="true"></a>        <span class="cf">if</span> array[i] &lt;= array[begin]:</span>
<span id="cb423-5"><a href="#cb423-5" aria-hidden="true"></a>            pivot += <span class="dv">1</span></span>
<span id="cb423-6"><a href="#cb423-6" aria-hidden="true"></a>            array[i], array[pivot] = array[pivot], array[i]</span>
<span id="cb423-7"><a href="#cb423-7" aria-hidden="true"></a>    array[pivot], array[begin] = array[begin], array[pivot]</span>
<span id="cb423-8"><a href="#cb423-8" aria-hidden="true"></a>    <span class="cf">return</span> pivot</span>
<span id="cb423-9"><a href="#cb423-9" aria-hidden="true"></a></span>
<span id="cb423-10"><a href="#cb423-10" aria-hidden="true"></a></span>
<span id="cb423-11"><a href="#cb423-11" aria-hidden="true"></a></span>
<span id="cb423-12"><a href="#cb423-12" aria-hidden="true"></a>def quicksort(array, begin=<span class="dv">0</span>, end=None):</span>
<span id="cb423-13"><a href="#cb423-13" aria-hidden="true"></a>    <span class="cf">if</span> end is None:</span>
<span id="cb423-14"><a href="#cb423-14" aria-hidden="true"></a>        end = len(array) - <span class="dv">1</span></span>
<span id="cb423-15"><a href="#cb423-15" aria-hidden="true"></a>    def _quicksort(array, begin, end):</span>
<span id="cb423-16"><a href="#cb423-16" aria-hidden="true"></a>        <span class="cf">if</span> begin &gt;= end:</span>
<span id="cb423-17"><a href="#cb423-17" aria-hidden="true"></a>            <span class="cf">return</span></span>
<span id="cb423-18"><a href="#cb423-18" aria-hidden="true"></a>        pivot = partition(array, begin, end)</span>
<span id="cb423-19"><a href="#cb423-19" aria-hidden="true"></a>        _quicksort(array, begin, pivot-<span class="dv">1</span>)</span>
<span id="cb423-20"><a href="#cb423-20" aria-hidden="true"></a>        _quicksort(array, pivot+<span class="dv">1</span>, end)</span>
<span id="cb423-21"><a href="#cb423-21" aria-hidden="true"></a>    <span class="cf">return</span> _quicksort(array, begin, end)</span></code></pre></div>
</section>
<section id="answer-3-score-67-1" class="level4">
<h4>Answer 3 (score 67)</h4>
<p>There is another concise and beautiful version</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true"></a>def qsort(arr): </span>
<span id="cb424-2"><a href="#cb424-2" aria-hidden="true"></a>    <span class="cf">if</span> len(arr) &lt;= <span class="dv">1</span>:</span>
<span id="cb424-3"><a href="#cb424-3" aria-hidden="true"></a>        <span class="cf">return</span> arr</span>
<span id="cb424-4"><a href="#cb424-4" aria-hidden="true"></a>    <span class="cf">else</span>:</span>
<span id="cb424-5"><a href="#cb424-5" aria-hidden="true"></a>        <span class="cf">return</span> qsort([x <span class="cf">for</span> x in arr[<span class="dv">1</span>:] <span class="cf">if</span> x &lt; arr[<span class="dv">0</span>]]) + \</span>
<span id="cb424-6"><a href="#cb424-6" aria-hidden="true"></a>               [arr[<span class="dv">0</span>]] + \</span>
<span id="cb424-7"><a href="#cb424-7" aria-hidden="true"></a>               qsort([x <span class="cf">for</span> x in arr[<span class="dv">1</span>:] <span class="cf">if</span> x &gt;= arr[<span class="dv">0</span>]])</span>
<span id="cb424-8"><a href="#cb424-8" aria-hidden="true"></a></span>
<span id="cb424-9"><a href="#cb424-9" aria-hidden="true"></a></span>
<span id="cb424-10"><a href="#cb424-10" aria-hidden="true"></a><span class="er"># this comment is just to improve readability due to horizontal scroll!!!</span></span></code></pre></div>
<p>Let me explain the above codes for details</p>
<ol>
<li>
<p>
pick the first element of array <code>arr[0]</code> as pivot
</p>
<code>[arr[0]]</code>
</li>
<li>
<p>
<code>qsort</code> those elements of array which are less than pivot with <a href="http://www.secnetix.de/olli/Python/list_comprehensions.hawk" rel="noreferrer"><code>List Comprehension</code></a>
</p>
<code>qsort([x for x in arr[1:] if x &amp;lt; arr[0]])</code>
</li>
<li>
<p>
<code>qsort</code> those elements of array which are larger than pivot with <code>List Comprehension</code>
</p>
<code>qsort([x for x in arr[1:] if x &amp;gt;= arr[0]])</code>
</li>
</ol>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="algorithm-to-convert-rgb-to-hsv-and-hsv-to-rgb-in-range-0-255-for-both-score-160084-in-2013" class="level3">
<h3>84: Algorithm to convert RGB to HSV and HSV to RGB in range 0-255 for both (score <a href="https://stackoverflow.com/q/3018313.html">160084</a> in 2013)</h3>
<section id="question-83" class="level4">
<h4>Question</h4>
<p>I am looking for color space converter from RGB to HSV, specifically for the range 0 to 255 for both color spaces.</p>
</section>
<section id="answer-accepted-score-118" class="level4">
<h4>Answer accepted (score 118)</h4>
<p>I’ve used these for a long time - no idea where they came from at this point… Note that the inputs and outputs, except for the angle in degrees, are in the range of 0 to 1.0.</p>
<p>NOTE: this code does no real sanity checking on inputs. Proceed with caution!</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true"></a><span class="kw">typedef</span> <span class="kw">struct</span> {</span>
<span id="cb425-2"><a href="#cb425-2" aria-hidden="true"></a>    <span class="dt">double</span> r;       <span class="co">// a fraction between 0 and 1</span></span>
<span id="cb425-3"><a href="#cb425-3" aria-hidden="true"></a>    <span class="dt">double</span> g;       <span class="co">// a fraction between 0 and 1</span></span>
<span id="cb425-4"><a href="#cb425-4" aria-hidden="true"></a>    <span class="dt">double</span> b;       <span class="co">// a fraction between 0 and 1</span></span>
<span id="cb425-5"><a href="#cb425-5" aria-hidden="true"></a>} rgb;</span>
<span id="cb425-6"><a href="#cb425-6" aria-hidden="true"></a></span>
<span id="cb425-7"><a href="#cb425-7" aria-hidden="true"></a><span class="kw">typedef</span> <span class="kw">struct</span> {</span>
<span id="cb425-8"><a href="#cb425-8" aria-hidden="true"></a>    <span class="dt">double</span> h;       <span class="co">// angle in degrees</span></span>
<span id="cb425-9"><a href="#cb425-9" aria-hidden="true"></a>    <span class="dt">double</span> s;       <span class="co">// a fraction between 0 and 1</span></span>
<span id="cb425-10"><a href="#cb425-10" aria-hidden="true"></a>    <span class="dt">double</span> v;       <span class="co">// a fraction between 0 and 1</span></span>
<span id="cb425-11"><a href="#cb425-11" aria-hidden="true"></a>} hsv;</span>
<span id="cb425-12"><a href="#cb425-12" aria-hidden="true"></a></span>
<span id="cb425-13"><a href="#cb425-13" aria-hidden="true"></a><span class="dt">static</span> hsv   rgb2hsv(rgb in);</span>
<span id="cb425-14"><a href="#cb425-14" aria-hidden="true"></a><span class="dt">static</span> rgb   hsv2rgb(hsv in);</span>
<span id="cb425-15"><a href="#cb425-15" aria-hidden="true"></a></span>
<span id="cb425-16"><a href="#cb425-16" aria-hidden="true"></a>hsv rgb2hsv(rgb in)</span>
<span id="cb425-17"><a href="#cb425-17" aria-hidden="true"></a>{</span>
<span id="cb425-18"><a href="#cb425-18" aria-hidden="true"></a>    hsv         out;</span>
<span id="cb425-19"><a href="#cb425-19" aria-hidden="true"></a>    <span class="dt">double</span>      min, max, delta;</span>
<span id="cb425-20"><a href="#cb425-20" aria-hidden="true"></a></span>
<span id="cb425-21"><a href="#cb425-21" aria-hidden="true"></a>    min = in.r &lt; in.g ? in.r : in.g;</span>
<span id="cb425-22"><a href="#cb425-22" aria-hidden="true"></a>    min = min  &lt; in.b ? min  : in.b;</span>
<span id="cb425-23"><a href="#cb425-23" aria-hidden="true"></a></span>
<span id="cb425-24"><a href="#cb425-24" aria-hidden="true"></a>    max = in.r &gt; in.g ? in.r : in.g;</span>
<span id="cb425-25"><a href="#cb425-25" aria-hidden="true"></a>    max = max  &gt; in.b ? max  : in.b;</span>
<span id="cb425-26"><a href="#cb425-26" aria-hidden="true"></a></span>
<span id="cb425-27"><a href="#cb425-27" aria-hidden="true"></a>    out.v = max;                                <span class="co">// v</span></span>
<span id="cb425-28"><a href="#cb425-28" aria-hidden="true"></a>    delta = max - min;</span>
<span id="cb425-29"><a href="#cb425-29" aria-hidden="true"></a>    <span class="cf">if</span> (delta &lt; <span class="fl">0.00001</span>)</span>
<span id="cb425-30"><a href="#cb425-30" aria-hidden="true"></a>    {</span>
<span id="cb425-31"><a href="#cb425-31" aria-hidden="true"></a>        out.s = <span class="dv">0</span>;</span>
<span id="cb425-32"><a href="#cb425-32" aria-hidden="true"></a>        out.h = <span class="dv">0</span>; <span class="co">// undefined, maybe nan?</span></span>
<span id="cb425-33"><a href="#cb425-33" aria-hidden="true"></a>        <span class="cf">return</span> out;</span>
<span id="cb425-34"><a href="#cb425-34" aria-hidden="true"></a>    }</span>
<span id="cb425-35"><a href="#cb425-35" aria-hidden="true"></a>    <span class="cf">if</span>( max &gt; <span class="fl">0.0</span> ) { <span class="co">// </span><span class="al">NOTE</span><span class="co">: if Max is == 0, this divide would cause a crash</span></span>
<span id="cb425-36"><a href="#cb425-36" aria-hidden="true"></a>        out.s = (delta / max);                  <span class="co">// s</span></span>
<span id="cb425-37"><a href="#cb425-37" aria-hidden="true"></a>    } <span class="cf">else</span> {</span>
<span id="cb425-38"><a href="#cb425-38" aria-hidden="true"></a>        <span class="co">// if max is 0, then r = g = b = 0              </span></span>
<span id="cb425-39"><a href="#cb425-39" aria-hidden="true"></a>        <span class="co">// s = 0, h is undefined</span></span>
<span id="cb425-40"><a href="#cb425-40" aria-hidden="true"></a>        out.s = <span class="fl">0.0</span>;</span>
<span id="cb425-41"><a href="#cb425-41" aria-hidden="true"></a>        out.h = NAN;                            <span class="co">// its now undefined</span></span>
<span id="cb425-42"><a href="#cb425-42" aria-hidden="true"></a>        <span class="cf">return</span> out;</span>
<span id="cb425-43"><a href="#cb425-43" aria-hidden="true"></a>    }</span>
<span id="cb425-44"><a href="#cb425-44" aria-hidden="true"></a>    <span class="cf">if</span>( in.r &gt;= max )                           <span class="co">// &gt; is bogus, just keeps compilor happy</span></span>
<span id="cb425-45"><a href="#cb425-45" aria-hidden="true"></a>        out.h = ( in.g - in.b ) / delta;        <span class="co">// between yellow &amp; magenta</span></span>
<span id="cb425-46"><a href="#cb425-46" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb425-47"><a href="#cb425-47" aria-hidden="true"></a>    <span class="cf">if</span>( in.g &gt;= max )</span>
<span id="cb425-48"><a href="#cb425-48" aria-hidden="true"></a>        out.h = <span class="fl">2.0</span> + ( in.b - in.r ) / delta;  <span class="co">// between cyan &amp; yellow</span></span>
<span id="cb425-49"><a href="#cb425-49" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb425-50"><a href="#cb425-50" aria-hidden="true"></a>        out.h = <span class="fl">4.0</span> + ( in.r - in.g ) / delta;  <span class="co">// between magenta &amp; cyan</span></span>
<span id="cb425-51"><a href="#cb425-51" aria-hidden="true"></a></span>
<span id="cb425-52"><a href="#cb425-52" aria-hidden="true"></a>    out.h *= <span class="fl">60.0</span>;                              <span class="co">// degrees</span></span>
<span id="cb425-53"><a href="#cb425-53" aria-hidden="true"></a></span>
<span id="cb425-54"><a href="#cb425-54" aria-hidden="true"></a>    <span class="cf">if</span>( out.h &lt; <span class="fl">0.0</span> )</span>
<span id="cb425-55"><a href="#cb425-55" aria-hidden="true"></a>        out.h += <span class="fl">360.0</span>;</span>
<span id="cb425-56"><a href="#cb425-56" aria-hidden="true"></a></span>
<span id="cb425-57"><a href="#cb425-57" aria-hidden="true"></a>    <span class="cf">return</span> out;</span>
<span id="cb425-58"><a href="#cb425-58" aria-hidden="true"></a>}</span>
<span id="cb425-59"><a href="#cb425-59" aria-hidden="true"></a></span>
<span id="cb425-60"><a href="#cb425-60" aria-hidden="true"></a></span>
<span id="cb425-61"><a href="#cb425-61" aria-hidden="true"></a>rgb hsv2rgb(hsv in)</span>
<span id="cb425-62"><a href="#cb425-62" aria-hidden="true"></a>{</span>
<span id="cb425-63"><a href="#cb425-63" aria-hidden="true"></a>    <span class="dt">double</span>      hh, p, q, t, ff;</span>
<span id="cb425-64"><a href="#cb425-64" aria-hidden="true"></a>    <span class="dt">long</span>        i;</span>
<span id="cb425-65"><a href="#cb425-65" aria-hidden="true"></a>    rgb         out;</span>
<span id="cb425-66"><a href="#cb425-66" aria-hidden="true"></a></span>
<span id="cb425-67"><a href="#cb425-67" aria-hidden="true"></a>    <span class="cf">if</span>(in.s &lt;= <span class="fl">0.0</span>) {       <span class="co">// &lt; is bogus, just shuts up warnings</span></span>
<span id="cb425-68"><a href="#cb425-68" aria-hidden="true"></a>        out.r = in.v;</span>
<span id="cb425-69"><a href="#cb425-69" aria-hidden="true"></a>        out.g = in.v;</span>
<span id="cb425-70"><a href="#cb425-70" aria-hidden="true"></a>        out.b = in.v;</span>
<span id="cb425-71"><a href="#cb425-71" aria-hidden="true"></a>        <span class="cf">return</span> out;</span>
<span id="cb425-72"><a href="#cb425-72" aria-hidden="true"></a>    }</span>
<span id="cb425-73"><a href="#cb425-73" aria-hidden="true"></a>    hh = in.h;</span>
<span id="cb425-74"><a href="#cb425-74" aria-hidden="true"></a>    <span class="cf">if</span>(hh &gt;= <span class="fl">360.0</span>) hh = <span class="fl">0.0</span>;</span>
<span id="cb425-75"><a href="#cb425-75" aria-hidden="true"></a>    hh /= <span class="fl">60.0</span>;</span>
<span id="cb425-76"><a href="#cb425-76" aria-hidden="true"></a>    i = (<span class="dt">long</span>)hh;</span>
<span id="cb425-77"><a href="#cb425-77" aria-hidden="true"></a>    ff = hh - i;</span>
<span id="cb425-78"><a href="#cb425-78" aria-hidden="true"></a>    p = in.v * (<span class="fl">1.0</span> - in.s);</span>
<span id="cb425-79"><a href="#cb425-79" aria-hidden="true"></a>    q = in.v * (<span class="fl">1.0</span> - (in.s * ff));</span>
<span id="cb425-80"><a href="#cb425-80" aria-hidden="true"></a>    t = in.v * (<span class="fl">1.0</span> - (in.s * (<span class="fl">1.0</span> - ff)));</span>
<span id="cb425-81"><a href="#cb425-81" aria-hidden="true"></a></span>
<span id="cb425-82"><a href="#cb425-82" aria-hidden="true"></a>    <span class="cf">switch</span>(i) {</span>
<span id="cb425-83"><a href="#cb425-83" aria-hidden="true"></a>    <span class="cf">case</span> <span class="dv">0</span>:</span>
<span id="cb425-84"><a href="#cb425-84" aria-hidden="true"></a>        out.r = in.v;</span>
<span id="cb425-85"><a href="#cb425-85" aria-hidden="true"></a>        out.g = t;</span>
<span id="cb425-86"><a href="#cb425-86" aria-hidden="true"></a>        out.b = p;</span>
<span id="cb425-87"><a href="#cb425-87" aria-hidden="true"></a>        <span class="cf">break</span>;</span>
<span id="cb425-88"><a href="#cb425-88" aria-hidden="true"></a>    <span class="cf">case</span> <span class="dv">1</span>:</span>
<span id="cb425-89"><a href="#cb425-89" aria-hidden="true"></a>        out.r = q;</span>
<span id="cb425-90"><a href="#cb425-90" aria-hidden="true"></a>        out.g = in.v;</span>
<span id="cb425-91"><a href="#cb425-91" aria-hidden="true"></a>        out.b = p;</span>
<span id="cb425-92"><a href="#cb425-92" aria-hidden="true"></a>        <span class="cf">break</span>;</span>
<span id="cb425-93"><a href="#cb425-93" aria-hidden="true"></a>    <span class="cf">case</span> <span class="dv">2</span>:</span>
<span id="cb425-94"><a href="#cb425-94" aria-hidden="true"></a>        out.r = p;</span>
<span id="cb425-95"><a href="#cb425-95" aria-hidden="true"></a>        out.g = in.v;</span>
<span id="cb425-96"><a href="#cb425-96" aria-hidden="true"></a>        out.b = t;</span>
<span id="cb425-97"><a href="#cb425-97" aria-hidden="true"></a>        <span class="cf">break</span>;</span>
<span id="cb425-98"><a href="#cb425-98" aria-hidden="true"></a></span>
<span id="cb425-99"><a href="#cb425-99" aria-hidden="true"></a>    <span class="cf">case</span> <span class="dv">3</span>:</span>
<span id="cb425-100"><a href="#cb425-100" aria-hidden="true"></a>        out.r = p;</span>
<span id="cb425-101"><a href="#cb425-101" aria-hidden="true"></a>        out.g = q;</span>
<span id="cb425-102"><a href="#cb425-102" aria-hidden="true"></a>        out.b = in.v;</span>
<span id="cb425-103"><a href="#cb425-103" aria-hidden="true"></a>        <span class="cf">break</span>;</span>
<span id="cb425-104"><a href="#cb425-104" aria-hidden="true"></a>    <span class="cf">case</span> <span class="dv">4</span>:</span>
<span id="cb425-105"><a href="#cb425-105" aria-hidden="true"></a>        out.r = t;</span>
<span id="cb425-106"><a href="#cb425-106" aria-hidden="true"></a>        out.g = p;</span>
<span id="cb425-107"><a href="#cb425-107" aria-hidden="true"></a>        out.b = in.v;</span>
<span id="cb425-108"><a href="#cb425-108" aria-hidden="true"></a>        <span class="cf">break</span>;</span>
<span id="cb425-109"><a href="#cb425-109" aria-hidden="true"></a>    <span class="cf">case</span> <span class="dv">5</span>:</span>
<span id="cb425-110"><a href="#cb425-110" aria-hidden="true"></a>    <span class="cf">default</span>:</span>
<span id="cb425-111"><a href="#cb425-111" aria-hidden="true"></a>        out.r = in.v;</span>
<span id="cb425-112"><a href="#cb425-112" aria-hidden="true"></a>        out.g = p;</span>
<span id="cb425-113"><a href="#cb425-113" aria-hidden="true"></a>        out.b = q;</span>
<span id="cb425-114"><a href="#cb425-114" aria-hidden="true"></a>        <span class="cf">break</span>;</span>
<span id="cb425-115"><a href="#cb425-115" aria-hidden="true"></a>    }</span>
<span id="cb425-116"><a href="#cb425-116" aria-hidden="true"></a>    <span class="cf">return</span> out;     </span>
<span id="cb425-117"><a href="#cb425-117" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-33-1" class="level4">
<h4>Answer 2 (score 33)</h4>
<p>You can also try this code without floats (faster but less accurate):</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true"></a><span class="kw">typedef</span> <span class="kw">struct</span> RgbColor</span>
<span id="cb426-2"><a href="#cb426-2" aria-hidden="true"></a>{</span>
<span id="cb426-3"><a href="#cb426-3" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> r;</span>
<span id="cb426-4"><a href="#cb426-4" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> g;</span>
<span id="cb426-5"><a href="#cb426-5" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> b;</span>
<span id="cb426-6"><a href="#cb426-6" aria-hidden="true"></a>} RgbColor;</span>
<span id="cb426-7"><a href="#cb426-7" aria-hidden="true"></a></span>
<span id="cb426-8"><a href="#cb426-8" aria-hidden="true"></a><span class="kw">typedef</span> <span class="kw">struct</span> HsvColor</span>
<span id="cb426-9"><a href="#cb426-9" aria-hidden="true"></a>{</span>
<span id="cb426-10"><a href="#cb426-10" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> h;</span>
<span id="cb426-11"><a href="#cb426-11" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> s;</span>
<span id="cb426-12"><a href="#cb426-12" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> v;</span>
<span id="cb426-13"><a href="#cb426-13" aria-hidden="true"></a>} HsvColor;</span>
<span id="cb426-14"><a href="#cb426-14" aria-hidden="true"></a></span>
<span id="cb426-15"><a href="#cb426-15" aria-hidden="true"></a>RgbColor HsvToRgb(HsvColor hsv)</span>
<span id="cb426-16"><a href="#cb426-16" aria-hidden="true"></a>{</span>
<span id="cb426-17"><a href="#cb426-17" aria-hidden="true"></a>    RgbColor rgb;</span>
<span id="cb426-18"><a href="#cb426-18" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> region, remainder, p, q, t;</span>
<span id="cb426-19"><a href="#cb426-19" aria-hidden="true"></a></span>
<span id="cb426-20"><a href="#cb426-20" aria-hidden="true"></a>    <span class="cf">if</span> (hsv.s == <span class="dv">0</span>)</span>
<span id="cb426-21"><a href="#cb426-21" aria-hidden="true"></a>    {</span>
<span id="cb426-22"><a href="#cb426-22" aria-hidden="true"></a>        rgb.r = hsv.v;</span>
<span id="cb426-23"><a href="#cb426-23" aria-hidden="true"></a>        rgb.g = hsv.v;</span>
<span id="cb426-24"><a href="#cb426-24" aria-hidden="true"></a>        rgb.b = hsv.v;</span>
<span id="cb426-25"><a href="#cb426-25" aria-hidden="true"></a>        <span class="cf">return</span> rgb;</span>
<span id="cb426-26"><a href="#cb426-26" aria-hidden="true"></a>    }</span>
<span id="cb426-27"><a href="#cb426-27" aria-hidden="true"></a></span>
<span id="cb426-28"><a href="#cb426-28" aria-hidden="true"></a>    region = hsv.h / <span class="dv">43</span>;</span>
<span id="cb426-29"><a href="#cb426-29" aria-hidden="true"></a>    remainder = (hsv.h - (region * <span class="dv">43</span>)) * <span class="dv">6</span>; </span>
<span id="cb426-30"><a href="#cb426-30" aria-hidden="true"></a></span>
<span id="cb426-31"><a href="#cb426-31" aria-hidden="true"></a>    p = (hsv.v * (<span class="dv">255</span> - hsv.s)) &gt;&gt; <span class="dv">8</span>;</span>
<span id="cb426-32"><a href="#cb426-32" aria-hidden="true"></a>    q = (hsv.v * (<span class="dv">255</span> - ((hsv.s * remainder) &gt;&gt; <span class="dv">8</span>))) &gt;&gt; <span class="dv">8</span>;</span>
<span id="cb426-33"><a href="#cb426-33" aria-hidden="true"></a>    t = (hsv.v * (<span class="dv">255</span> - ((hsv.s * (<span class="dv">255</span> - remainder)) &gt;&gt; <span class="dv">8</span>))) &gt;&gt; <span class="dv">8</span>;</span>
<span id="cb426-34"><a href="#cb426-34" aria-hidden="true"></a></span>
<span id="cb426-35"><a href="#cb426-35" aria-hidden="true"></a>    <span class="cf">switch</span> (region)</span>
<span id="cb426-36"><a href="#cb426-36" aria-hidden="true"></a>    {</span>
<span id="cb426-37"><a href="#cb426-37" aria-hidden="true"></a>        <span class="cf">case</span> <span class="dv">0</span>:</span>
<span id="cb426-38"><a href="#cb426-38" aria-hidden="true"></a>            rgb.r = hsv.v; rgb.g = t; rgb.b = p;</span>
<span id="cb426-39"><a href="#cb426-39" aria-hidden="true"></a>            <span class="cf">break</span>;</span>
<span id="cb426-40"><a href="#cb426-40" aria-hidden="true"></a>        <span class="cf">case</span> <span class="dv">1</span>:</span>
<span id="cb426-41"><a href="#cb426-41" aria-hidden="true"></a>            rgb.r = q; rgb.g = hsv.v; rgb.b = p;</span>
<span id="cb426-42"><a href="#cb426-42" aria-hidden="true"></a>            <span class="cf">break</span>;</span>
<span id="cb426-43"><a href="#cb426-43" aria-hidden="true"></a>        <span class="cf">case</span> <span class="dv">2</span>:</span>
<span id="cb426-44"><a href="#cb426-44" aria-hidden="true"></a>            rgb.r = p; rgb.g = hsv.v; rgb.b = t;</span>
<span id="cb426-45"><a href="#cb426-45" aria-hidden="true"></a>            <span class="cf">break</span>;</span>
<span id="cb426-46"><a href="#cb426-46" aria-hidden="true"></a>        <span class="cf">case</span> <span class="dv">3</span>:</span>
<span id="cb426-47"><a href="#cb426-47" aria-hidden="true"></a>            rgb.r = p; rgb.g = q; rgb.b = hsv.v;</span>
<span id="cb426-48"><a href="#cb426-48" aria-hidden="true"></a>            <span class="cf">break</span>;</span>
<span id="cb426-49"><a href="#cb426-49" aria-hidden="true"></a>        <span class="cf">case</span> <span class="dv">4</span>:</span>
<span id="cb426-50"><a href="#cb426-50" aria-hidden="true"></a>            rgb.r = t; rgb.g = p; rgb.b = hsv.v;</span>
<span id="cb426-51"><a href="#cb426-51" aria-hidden="true"></a>            <span class="cf">break</span>;</span>
<span id="cb426-52"><a href="#cb426-52" aria-hidden="true"></a>        <span class="cf">default</span>:</span>
<span id="cb426-53"><a href="#cb426-53" aria-hidden="true"></a>            rgb.r = hsv.v; rgb.g = p; rgb.b = q;</span>
<span id="cb426-54"><a href="#cb426-54" aria-hidden="true"></a>            <span class="cf">break</span>;</span>
<span id="cb426-55"><a href="#cb426-55" aria-hidden="true"></a>    }</span>
<span id="cb426-56"><a href="#cb426-56" aria-hidden="true"></a></span>
<span id="cb426-57"><a href="#cb426-57" aria-hidden="true"></a>    <span class="cf">return</span> rgb;</span>
<span id="cb426-58"><a href="#cb426-58" aria-hidden="true"></a>}</span>
<span id="cb426-59"><a href="#cb426-59" aria-hidden="true"></a></span>
<span id="cb426-60"><a href="#cb426-60" aria-hidden="true"></a>HsvColor RgbToHsv(RgbColor rgb)</span>
<span id="cb426-61"><a href="#cb426-61" aria-hidden="true"></a>{</span>
<span id="cb426-62"><a href="#cb426-62" aria-hidden="true"></a>    HsvColor hsv;</span>
<span id="cb426-63"><a href="#cb426-63" aria-hidden="true"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> rgbMin, rgbMax;</span>
<span id="cb426-64"><a href="#cb426-64" aria-hidden="true"></a></span>
<span id="cb426-65"><a href="#cb426-65" aria-hidden="true"></a>    rgbMin = rgb.r &lt; rgb.g ? (rgb.r &lt; rgb.b ? rgb.r : rgb.b) : (rgb.g &lt; rgb.b ? rgb.g : rgb.b);</span>
<span id="cb426-66"><a href="#cb426-66" aria-hidden="true"></a>    rgbMax = rgb.r &gt; rgb.g ? (rgb.r &gt; rgb.b ? rgb.r : rgb.b) : (rgb.g &gt; rgb.b ? rgb.g : rgb.b);</span>
<span id="cb426-67"><a href="#cb426-67" aria-hidden="true"></a></span>
<span id="cb426-68"><a href="#cb426-68" aria-hidden="true"></a>    hsv.v = rgbMax;</span>
<span id="cb426-69"><a href="#cb426-69" aria-hidden="true"></a>    <span class="cf">if</span> (hsv.v == <span class="dv">0</span>)</span>
<span id="cb426-70"><a href="#cb426-70" aria-hidden="true"></a>    {</span>
<span id="cb426-71"><a href="#cb426-71" aria-hidden="true"></a>        hsv.h = <span class="dv">0</span>;</span>
<span id="cb426-72"><a href="#cb426-72" aria-hidden="true"></a>        hsv.s = <span class="dv">0</span>;</span>
<span id="cb426-73"><a href="#cb426-73" aria-hidden="true"></a>        <span class="cf">return</span> hsv;</span>
<span id="cb426-74"><a href="#cb426-74" aria-hidden="true"></a>    }</span>
<span id="cb426-75"><a href="#cb426-75" aria-hidden="true"></a></span>
<span id="cb426-76"><a href="#cb426-76" aria-hidden="true"></a>    hsv.s = <span class="dv">255</span> * <span class="dt">long</span>(rgbMax - rgbMin) / hsv.v;</span>
<span id="cb426-77"><a href="#cb426-77" aria-hidden="true"></a>    <span class="cf">if</span> (hsv.s == <span class="dv">0</span>)</span>
<span id="cb426-78"><a href="#cb426-78" aria-hidden="true"></a>    {</span>
<span id="cb426-79"><a href="#cb426-79" aria-hidden="true"></a>        hsv.h = <span class="dv">0</span>;</span>
<span id="cb426-80"><a href="#cb426-80" aria-hidden="true"></a>        <span class="cf">return</span> hsv;</span>
<span id="cb426-81"><a href="#cb426-81" aria-hidden="true"></a>    }</span>
<span id="cb426-82"><a href="#cb426-82" aria-hidden="true"></a></span>
<span id="cb426-83"><a href="#cb426-83" aria-hidden="true"></a>    <span class="cf">if</span> (rgbMax == rgb.r)</span>
<span id="cb426-84"><a href="#cb426-84" aria-hidden="true"></a>        hsv.h = <span class="dv">0</span> + <span class="dv">43</span> * (rgb.g - rgb.b) / (rgbMax - rgbMin);</span>
<span id="cb426-85"><a href="#cb426-85" aria-hidden="true"></a>    <span class="cf">else</span> <span class="cf">if</span> (rgbMax == rgb.g)</span>
<span id="cb426-86"><a href="#cb426-86" aria-hidden="true"></a>        hsv.h = <span class="dv">85</span> + <span class="dv">43</span> * (rgb.b - rgb.r) / (rgbMax - rgbMin);</span>
<span id="cb426-87"><a href="#cb426-87" aria-hidden="true"></a>    <span class="cf">else</span></span>
<span id="cb426-88"><a href="#cb426-88" aria-hidden="true"></a>        hsv.h = <span class="dv">171</span> + <span class="dv">43</span> * (rgb.r - rgb.g) / (rgbMax - rgbMin);</span>
<span id="cb426-89"><a href="#cb426-89" aria-hidden="true"></a></span>
<span id="cb426-90"><a href="#cb426-90" aria-hidden="true"></a>    <span class="cf">return</span> hsv;</span>
<span id="cb426-91"><a href="#cb426-91" aria-hidden="true"></a>}</span></code></pre></div>
<p>
<strong>Note</strong> that this algorithm uses <code>0x00 - 0xFF</code> as it’s range (<strong>not</strong> <code>0-360</code>).<br> <sup>(<a href="https://stackoverflow.com/questions/3018313/algorithm-to-convert-rgb-to-hsv-and-hsv-to-rgb-in-range-0-255-for-both
#comment66194776_14733008">Source</a>)</sup>
</p>
</section>
<section id="answer-3-score-22-1" class="level4">
<h4>Answer 3 (score 22)</h4>
<p>I wrote this in HLSL for our rendering engine, it has no conditions in it:</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb427-1"><a href="#cb427-1" aria-hidden="true"></a>    float3  HSV2RGB( float3 _HSV )</span>
<span id="cb427-2"><a href="#cb427-2" aria-hidden="true"></a>    {</span>
<span id="cb427-3"><a href="#cb427-3" aria-hidden="true"></a>        _HSV.x = fmod( <span class="fl">100.0</span> + _HSV.x, <span class="fl">1.0</span> );                                       <span class="co">// Ensure [0,1[</span></span>
<span id="cb427-4"><a href="#cb427-4" aria-hidden="true"></a></span>
<span id="cb427-5"><a href="#cb427-5" aria-hidden="true"></a>        <span class="dt">float</span>   HueSlice = <span class="fl">6.0</span> * _HSV.x;                                            <span class="co">// In [0,6[</span></span>
<span id="cb427-6"><a href="#cb427-6" aria-hidden="true"></a>        <span class="dt">float</span>   HueSliceInteger = floor( HueSlice );</span>
<span id="cb427-7"><a href="#cb427-7" aria-hidden="true"></a>        <span class="dt">float</span>   HueSliceInterpolant = HueSlice - HueSliceInteger;                   <span class="co">// In [0,1[ for each hue slice</span></span>
<span id="cb427-8"><a href="#cb427-8" aria-hidden="true"></a></span>
<span id="cb427-9"><a href="#cb427-9" aria-hidden="true"></a>        float3  TempRGB = float3(   _HSV.z * (<span class="fl">1.0</span> - _HSV.y),</span>
<span id="cb427-10"><a href="#cb427-10" aria-hidden="true"></a>                                    _HSV.z * (<span class="fl">1.0</span> - _HSV.y * HueSliceInterpolant),</span>
<span id="cb427-11"><a href="#cb427-11" aria-hidden="true"></a>                                    _HSV.z * (<span class="fl">1.0</span> - _HSV.y * (<span class="fl">1.0</span> - HueSliceInterpolant)) );</span>
<span id="cb427-12"><a href="#cb427-12" aria-hidden="true"></a></span>
<span id="cb427-13"><a href="#cb427-13" aria-hidden="true"></a>        <span class="co">// The idea here to avoid conditions is to notice that the conversion code can be rewritten:</span></span>
<span id="cb427-14"><a href="#cb427-14" aria-hidden="true"></a>        <span class="co">//    if      ( var_i == 0 ) { R = V         ; G = TempRGB.z ; B = TempRGB.x }</span></span>
<span id="cb427-15"><a href="#cb427-15" aria-hidden="true"></a>        <span class="co">//    else if ( var_i == 2 ) { R = TempRGB.x ; G = V         ; B = TempRGB.z }</span></span>
<span id="cb427-16"><a href="#cb427-16" aria-hidden="true"></a>        <span class="co">//    else if ( var_i == 4 ) { R = TempRGB.z ; G = TempRGB.x ; B = V     }</span></span>
<span id="cb427-17"><a href="#cb427-17" aria-hidden="true"></a>        <span class="co">// </span></span>
<span id="cb427-18"><a href="#cb427-18" aria-hidden="true"></a>        <span class="co">//    else if ( var_i == 1 ) { R = TempRGB.y ; G = V         ; B = TempRGB.x }</span></span>
<span id="cb427-19"><a href="#cb427-19" aria-hidden="true"></a>        <span class="co">//    else if ( var_i == 3 ) { R = TempRGB.x ; G = TempRGB.y ; B = V     }</span></span>
<span id="cb427-20"><a href="#cb427-20" aria-hidden="true"></a>        <span class="co">//    else if ( var_i == 5 ) { R = V         ; G = TempRGB.x ; B = TempRGB.y }</span></span>
<span id="cb427-21"><a href="#cb427-21" aria-hidden="true"></a>        <span class="co">//</span></span>
<span id="cb427-22"><a href="#cb427-22" aria-hidden="true"></a>        <span class="co">// This shows several things:</span></span>
<span id="cb427-23"><a href="#cb427-23" aria-hidden="true"></a>        <span class="co">//  . A separation between even and odd slices</span></span>
<span id="cb427-24"><a href="#cb427-24" aria-hidden="true"></a>        <span class="co">//  . If slices (0,2,4) and (1,3,5) can be rewritten as basically being slices (0,1,2) then</span></span>
<span id="cb427-25"><a href="#cb427-25" aria-hidden="true"></a>        <span class="co">//      the operation simply amounts to performing a &quot;rotate right&quot; on the RGB components</span></span>
<span id="cb427-26"><a href="#cb427-26" aria-hidden="true"></a>        <span class="co">//  . The base value to rotate is either (V, B, R) for even slices or (G, V, R) for odd slices</span></span>
<span id="cb427-27"><a href="#cb427-27" aria-hidden="true"></a>        <span class="co">//</span></span>
<span id="cb427-28"><a href="#cb427-28" aria-hidden="true"></a>        <span class="dt">float</span>   IsOddSlice = fmod( HueSliceInteger, <span class="fl">2.0</span> );                          <span class="co">// 0 if even (slices 0, 2, 4), 1 if odd (slices 1, 3, 5)</span></span>
<span id="cb427-29"><a href="#cb427-29" aria-hidden="true"></a>        <span class="dt">float</span>   ThreeSliceSelector = <span class="fl">0.5</span> * (HueSliceInteger - IsOddSlice);          <span class="co">// (0, 1, 2) corresponding to slices (0, 2, 4) and (1, 3, 5)</span></span>
<span id="cb427-30"><a href="#cb427-30" aria-hidden="true"></a></span>
<span id="cb427-31"><a href="#cb427-31" aria-hidden="true"></a>        float3  ScrollingRGBForEvenSlices = float3( _HSV.z, TempRGB.zx );           <span class="co">// (V, Temp Blue, Temp Red) for even slices (0, 2, 4)</span></span>
<span id="cb427-32"><a href="#cb427-32" aria-hidden="true"></a>        float3  ScrollingRGBForOddSlices = float3( TempRGB.y, _HSV.z, TempRGB.x );  <span class="co">// (Temp Green, V, Temp Red) for odd slices (1, 3, 5)</span></span>
<span id="cb427-33"><a href="#cb427-33" aria-hidden="true"></a>        float3  ScrollingRGB = lerp( ScrollingRGBForEvenSlices, ScrollingRGBForOddSlices, IsOddSlice );</span>
<span id="cb427-34"><a href="#cb427-34" aria-hidden="true"></a></span>
<span id="cb427-35"><a href="#cb427-35" aria-hidden="true"></a>        <span class="dt">float</span>   IsNotFirstSlice = saturate( ThreeSliceSelector );                   <span class="co">// 1 if NOT the first slice (true for slices 1 and 2)</span></span>
<span id="cb427-36"><a href="#cb427-36" aria-hidden="true"></a>        <span class="dt">float</span>   IsNotSecondSlice = saturate( ThreeSliceSelector-<span class="fl">1.0</span> );              <span class="co">// 1 if NOT the first or second slice (true only for slice 2)</span></span>
<span id="cb427-37"><a href="#cb427-37" aria-hidden="true"></a></span>
<span id="cb427-38"><a href="#cb427-38" aria-hidden="true"></a>        <span class="cf">return</span>  lerp( ScrollingRGB.xyz, lerp( ScrollingRGB.zxy, ScrollingRGB.yzx, IsNotSecondSlice ), IsNotFirstSlice );    <span class="co">// Make the RGB rotate right depending on final slice index</span></span>
<span id="cb427-39"><a href="#cb427-39" aria-hidden="true"></a>    }</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-detect-a-loop-in-a-linked-list-score-159991-in-2013" class="level3">
<h3>85: How to detect a loop in a linked list? (score <a href="https://stackoverflow.com/q/2663115.html">159991</a> in 2013)</h3>
<section id="question-84" class="level4">
<h4>Question</h4>
<p>Say you have a linked list structure in Java. It’s made up of Nodes:</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true"></a>class Node {</span>
<span id="cb428-2"><a href="#cb428-2" aria-hidden="true"></a>    Node next;</span>
<span id="cb428-3"><a href="#cb428-3" aria-hidden="true"></a>    <span class="co">// some user data</span></span>
<span id="cb428-4"><a href="#cb428-4" aria-hidden="true"></a>}</span></code></pre></div>
<p>and each Node points to the next node, except for the last Node, which has null for next. Say there is a possibility that the list can contain a loop - i.e. the final Node, instead of having a null, has a reference to one of the nodes in the list which came before it.</p>
<p>What’s the best way of writing</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true"></a>boolean hasLoop(Node first)</span></code></pre></div>
<p>which would return <code>true</code> if the given Node is the first of a list with a loop, and <code>false</code> otherwise? How could you write so that it takes a constant amount of space and a reasonable amount of time?</p>
<p>Here’s a picture of what a list with a loop looks like:</p>
<p><img src="https://i.stack.imgur.com/irw1S.jpg" alt="alt text"></p>
</section>
<section id="answer-accepted-score-517" class="level4">
<h4>Answer accepted (score 517)</h4>
<p>
You can make use of <a href="http://en.wikipedia.org/wiki/Cycle_detection
#Tortoise_and_hare" rel="noreferrer"><strong>Floyd’s cycle-finding algorithm</strong></a>, also known as <em>tortoise and hare algorithm</em>.<br><br> The idea is to have two references to the list and move them at <strong>different speeds</strong>. Move one forward by <code>1</code> node and the other by <code>2</code> nodes.
</p>
<ul>
<li>
If the linked list has a loop they will <em>definitely</em> meet.
</li>
<li>
Else either of the two references(or their <code>next</code>) will become <code>null</code>.
</li>
</ul>
<p>Java function implementing the algorithm:</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true"></a>boolean hasLoop(Node first) {</span>
<span id="cb430-2"><a href="#cb430-2" aria-hidden="true"></a></span>
<span id="cb430-3"><a href="#cb430-3" aria-hidden="true"></a>    <span class="cf">if</span>(first == null) <span class="co">// list does not exist..so no loop either</span></span>
<span id="cb430-4"><a href="#cb430-4" aria-hidden="true"></a>        <span class="cf">return</span> false;</span>
<span id="cb430-5"><a href="#cb430-5" aria-hidden="true"></a></span>
<span id="cb430-6"><a href="#cb430-6" aria-hidden="true"></a>    Node slow, fast; <span class="co">// create two references.</span></span>
<span id="cb430-7"><a href="#cb430-7" aria-hidden="true"></a></span>
<span id="cb430-8"><a href="#cb430-8" aria-hidden="true"></a>    slow = fast = first; <span class="co">// make both refer to the start of the list</span></span>
<span id="cb430-9"><a href="#cb430-9" aria-hidden="true"></a></span>
<span id="cb430-10"><a href="#cb430-10" aria-hidden="true"></a>    <span class="cf">while</span>(true) {</span>
<span id="cb430-11"><a href="#cb430-11" aria-hidden="true"></a></span>
<span id="cb430-12"><a href="#cb430-12" aria-hidden="true"></a>        slow = slow.next;          <span class="co">// 1 hop</span></span>
<span id="cb430-13"><a href="#cb430-13" aria-hidden="true"></a></span>
<span id="cb430-14"><a href="#cb430-14" aria-hidden="true"></a>        <span class="cf">if</span>(fast.next != null)</span>
<span id="cb430-15"><a href="#cb430-15" aria-hidden="true"></a>            fast = fast.next.next; <span class="co">// 2 hops</span></span>
<span id="cb430-16"><a href="#cb430-16" aria-hidden="true"></a>        <span class="cf">else</span></span>
<span id="cb430-17"><a href="#cb430-17" aria-hidden="true"></a>            <span class="cf">return</span> false;          <span class="co">// next node null =&gt; no loop</span></span>
<span id="cb430-18"><a href="#cb430-18" aria-hidden="true"></a></span>
<span id="cb430-19"><a href="#cb430-19" aria-hidden="true"></a>        <span class="cf">if</span>(slow == null || fast == null) <span class="co">// if either hits null..no loop</span></span>
<span id="cb430-20"><a href="#cb430-20" aria-hidden="true"></a>            <span class="cf">return</span> false;</span>
<span id="cb430-21"><a href="#cb430-21" aria-hidden="true"></a></span>
<span id="cb430-22"><a href="#cb430-22" aria-hidden="true"></a>        <span class="cf">if</span>(slow == fast) <span class="co">// if the two ever meet...we must have a loop</span></span>
<span id="cb430-23"><a href="#cb430-23" aria-hidden="true"></a>            <span class="cf">return</span> true;</span>
<span id="cb430-24"><a href="#cb430-24" aria-hidden="true"></a>    }</span>
<span id="cb430-25"><a href="#cb430-25" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-115" class="level4">
<h4>Answer 2 (score 115)</h4>
<p>Here’s a refinement of the Fast/Slow solution, which correctly handles odd length lists and improves clarity.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true"></a>boolean hasLoop(Node first) {</span>
<span id="cb431-2"><a href="#cb431-2" aria-hidden="true"></a>    Node slow = first;</span>
<span id="cb431-3"><a href="#cb431-3" aria-hidden="true"></a>    Node fast = first;</span>
<span id="cb431-4"><a href="#cb431-4" aria-hidden="true"></a></span>
<span id="cb431-5"><a href="#cb431-5" aria-hidden="true"></a>    <span class="cf">while</span>(fast != null &amp;&amp; fast.next != null) {</span>
<span id="cb431-6"><a href="#cb431-6" aria-hidden="true"></a>        slow = slow.next;          <span class="co">// 1 hop</span></span>
<span id="cb431-7"><a href="#cb431-7" aria-hidden="true"></a>        fast = fast.next.next;     <span class="co">// 2 hops </span></span>
<span id="cb431-8"><a href="#cb431-8" aria-hidden="true"></a></span>
<span id="cb431-9"><a href="#cb431-9" aria-hidden="true"></a>        <span class="cf">if</span>(slow == fast)  <span class="co">// fast caught up to slow, so there is a loop</span></span>
<span id="cb431-10"><a href="#cb431-10" aria-hidden="true"></a>            <span class="cf">return</span> true;</span>
<span id="cb431-11"><a href="#cb431-11" aria-hidden="true"></a>    }</span>
<span id="cb431-12"><a href="#cb431-12" aria-hidden="true"></a>    <span class="cf">return</span> false;  <span class="co">// fast reached null, so the list terminates</span></span>
<span id="cb431-13"><a href="#cb431-13" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-49-1" class="level4">
<h4>Answer 3 (score 49)</h4>
<p>An alternative solution to the Turtle and Rabbit, not quite as nice, as I temporarily change the list:</p>
<p>The idea is to walk the list, and reverse it as you go. Then, when you first reach a node that has already been visited, its next pointer will point “backwards”, causing the iteration to proceed towards <code>first</code> again, where it terminates.</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb432-1"><a href="#cb432-1" aria-hidden="true"></a>Node prev = null;</span>
<span id="cb432-2"><a href="#cb432-2" aria-hidden="true"></a>Node cur = first;</span>
<span id="cb432-3"><a href="#cb432-3" aria-hidden="true"></a><span class="cf">while</span> (cur != null) {</span>
<span id="cb432-4"><a href="#cb432-4" aria-hidden="true"></a>    Node next = cur.next;</span>
<span id="cb432-5"><a href="#cb432-5" aria-hidden="true"></a>    cur.next = prev;</span>
<span id="cb432-6"><a href="#cb432-6" aria-hidden="true"></a>    prev = cur;</span>
<span id="cb432-7"><a href="#cb432-7" aria-hidden="true"></a>    cur = next;</span>
<span id="cb432-8"><a href="#cb432-8" aria-hidden="true"></a>}</span>
<span id="cb432-9"><a href="#cb432-9" aria-hidden="true"></a>boolean hasCycle = prev == first &amp;&amp; first != null &amp;&amp; first.next != null;</span>
<span id="cb432-10"><a href="#cb432-10" aria-hidden="true"></a></span>
<span id="cb432-11"><a href="#cb432-11" aria-hidden="true"></a><span class="co">// reconstruct the list</span></span>
<span id="cb432-12"><a href="#cb432-12" aria-hidden="true"></a>cur = prev;</span>
<span id="cb432-13"><a href="#cb432-13" aria-hidden="true"></a>prev = null;</span>
<span id="cb432-14"><a href="#cb432-14" aria-hidden="true"></a><span class="cf">while</span> (cur != null) {</span>
<span id="cb432-15"><a href="#cb432-15" aria-hidden="true"></a>    Node next = cur.next;</span>
<span id="cb432-16"><a href="#cb432-16" aria-hidden="true"></a>    cur.next = prev;</span>
<span id="cb432-17"><a href="#cb432-17" aria-hidden="true"></a>    prev = cur;</span>
<span id="cb432-18"><a href="#cb432-18" aria-hidden="true"></a>    cur = next;</span>
<span id="cb432-19"><a href="#cb432-19" aria-hidden="true"></a>}</span>
<span id="cb432-20"><a href="#cb432-20" aria-hidden="true"></a></span>
<span id="cb432-21"><a href="#cb432-21" aria-hidden="true"></a><span class="cf">return</span> hasCycle;</span></code></pre></div>
<p>Test code:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true"></a><span class="dt">static</span> <span class="dt">void</span> assertSameOrder(Node[] nodes) {</span>
<span id="cb433-2"><a href="#cb433-2" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; nodes.length - <span class="dv">1</span>; i++) {</span>
<span id="cb433-3"><a href="#cb433-3" aria-hidden="true"></a>        assert nodes[i].next == nodes[i + <span class="dv">1</span>];</span>
<span id="cb433-4"><a href="#cb433-4" aria-hidden="true"></a>    }</span>
<span id="cb433-5"><a href="#cb433-5" aria-hidden="true"></a>}</span>
<span id="cb433-6"><a href="#cb433-6" aria-hidden="true"></a></span>
<span id="cb433-7"><a href="#cb433-7" aria-hidden="true"></a>public <span class="dt">static</span> <span class="dt">void</span> main(String[] args) {</span>
<span id="cb433-8"><a href="#cb433-8" aria-hidden="true"></a>    Node[] nodes = new Node[<span class="dv">100</span>];</span>
<span id="cb433-9"><a href="#cb433-9" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; nodes.length; i++) {</span>
<span id="cb433-10"><a href="#cb433-10" aria-hidden="true"></a>        nodes[i] = new Node();</span>
<span id="cb433-11"><a href="#cb433-11" aria-hidden="true"></a>    }</span>
<span id="cb433-12"><a href="#cb433-12" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; nodes.length - <span class="dv">1</span>; i++) {</span>
<span id="cb433-13"><a href="#cb433-13" aria-hidden="true"></a>        nodes[i].next = nodes[i + <span class="dv">1</span>];</span>
<span id="cb433-14"><a href="#cb433-14" aria-hidden="true"></a>    }</span>
<span id="cb433-15"><a href="#cb433-15" aria-hidden="true"></a>    Node first = nodes[<span class="dv">0</span>];</span>
<span id="cb433-16"><a href="#cb433-16" aria-hidden="true"></a>    Node max = nodes[nodes.length - <span class="dv">1</span>];</span>
<span id="cb433-17"><a href="#cb433-17" aria-hidden="true"></a></span>
<span id="cb433-18"><a href="#cb433-18" aria-hidden="true"></a>    max.next = null;</span>
<span id="cb433-19"><a href="#cb433-19" aria-hidden="true"></a>    assert !hasCycle(first);</span>
<span id="cb433-20"><a href="#cb433-20" aria-hidden="true"></a>    assertSameOrder(nodes);</span>
<span id="cb433-21"><a href="#cb433-21" aria-hidden="true"></a>    max.next = first;</span>
<span id="cb433-22"><a href="#cb433-22" aria-hidden="true"></a>    assert hasCycle(first);</span>
<span id="cb433-23"><a href="#cb433-23" aria-hidden="true"></a>    assertSameOrder(nodes);</span>
<span id="cb433-24"><a href="#cb433-24" aria-hidden="true"></a>    max.next = max;</span>
<span id="cb433-25"><a href="#cb433-25" aria-hidden="true"></a>    assert hasCycle(first);</span>
<span id="cb433-26"><a href="#cb433-26" aria-hidden="true"></a>    assertSameOrder(nodes);</span>
<span id="cb433-27"><a href="#cb433-27" aria-hidden="true"></a>    max.next = nodes[<span class="dv">50</span>];</span>
<span id="cb433-28"><a href="#cb433-28" aria-hidden="true"></a>    assert hasCycle(first);</span>
<span id="cb433-29"><a href="#cb433-29" aria-hidden="true"></a>    assertSameOrder(nodes);</span>
<span id="cb433-30"><a href="#cb433-30" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="leap-year-calculation-score-159483-in-2019" class="level3">
<h3>86: Leap year calculation (score <a href="https://stackoverflow.com/q/725098.html">159483</a> in 2019)</h3>
<section id="question-85" class="level4">
<h4>Question</h4>
<p>In order to find leap years, why must the year be indivisible by 100 and divisible by 400?</p>
<p>I understand why it must be divisible by 4. Please explain the algorithm.</p>
</section>
<section id="answer-2-score-101" class="level4">
<h4>Answer 2 (score 101)</h4>
<p>
The length of a year is (more or less) 365.242196 days. So we have to subtract, more or less, a quarter of a day to make it fit :
</p>
<p><strong>365.242196</strong> - 0.25 = <strong>364.992196</strong> (by adding 1 day in 4 years) : but oops, now it’s too small!! lets add a hundreth of a day (by not adding that day once in a hundred year :-))</p>
<p><strong>364.992196</strong> + 0,01 = <strong>365.002196</strong> (oops, a bit too big, let’s add that day anyway one time in about 400 years)</p>
<p><strong>365.002196</strong> - 1/400 = <strong>364.999696</strong></p>
<p>Almost there now, just play with leapseconds now and then, and you’re set.</p>
<p>(Note : the reason no more corrections are applied after this step is because a year also CHANGES IN LENGTH!!, that’s why leapseconds are the most flexible solution, see for examlple <a href="http://www.webexhibits.org/calendars/year.html" rel="noreferrer">here</a>)</p>
<p>That’s why i guess</p>
</section>
<section id="answer-3-score-77" class="level4">
<h4>Answer 3 (score 77)</h4>
<p>There’s an algorithm on <a href="http://en.wikipedia.org/wiki/Leap_year" rel="noreferrer">wikipedia</a> to determine leap years:</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb434-1"><a href="#cb434-1" aria-hidden="true"></a>function isLeapYear (year):</span>
<span id="cb434-2"><a href="#cb434-2" aria-hidden="true"></a>    <span class="cf">if</span> ((year modulo <span class="dv">4</span> is <span class="dv">0</span>) and (year modulo <span class="dv">100</span> is not <span class="dv">0</span>))</span>
<span id="cb434-3"><a href="#cb434-3" aria-hidden="true"></a>    or (year modulo <span class="dv">400</span> is <span class="dv">0</span>)</span>
<span id="cb434-4"><a href="#cb434-4" aria-hidden="true"></a>        then true</span>
<span id="cb434-5"><a href="#cb434-5" aria-hidden="true"></a>    <span class="cf">else</span> false</span></code></pre></div>
<p>There’s a lot of information about this topic on the <a href="http://en.wikipedia.org/wiki/Leap_year" rel="noreferrer">wikipedia page about leap years</a>, inclusive information about different calendars.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="write-a-function-that-returns-the-longest-palindrome-in-a-given-string-score-159347-in-2012" class="level3">
<h3>87: Write a function that returns the longest palindrome in a given string (score <a href="https://stackoverflow.com/q/1115001.html">159347</a> in 2012)</h3>
<section id="question-86" class="level4">
<h4>Question</h4>
<blockquote>
e.g “ccddcc” in the string “abaccddccefe”
</blockquote>
<p>I thought of a solution but it runs in O(n^2) time</p>
<p>Algo 1:</p>
<p>
Steps: Its a brute force method
</p>
<ol>
<li>
Have 2 for loops<br> for i = 1 to i less than array.length -1<br> for j=i+1 to j less than array.length
</li>
<li>
This way you can get substring of every possible combination from the array
</li>
<li>
Have a palindrome function which checks if a string is palindrome
</li>
<li>
so for every substring (i,j) call this function, if it is a palindrome store it in a string variable
</li>
<li>
If you find next palindrome substring and if it is greater than the current one, replace it with current one.
</li>
<li>
Finally your string variable will have the answer
</li>
</ol>
<p>
Issues: 1. This algo runs in O(n^2) time.
</p>
<p>Algo 2:</p>
<ol>
<li>
Reverse the string and store it in diferent array
</li>
<li>
Now find the largest matching substring between both the array
</li>
<li>
But this too runs in O(n^2) time
</li>
</ol>
<p>Can you guys think of an algo which runs in a better time. If possible O(n) time</p>
</section>
<section id="answer-2-score-76" class="level4">
<h4>Answer 2 (score 76)</h4>
<p>You can find the the longest palindrome using <a href="http://en.wikipedia.org/wiki/Longest_palindromic_substring" rel="nofollow noreferrer">Manacher’s Algorithm</a> in <code>O(n)</code> time! Its implementation can be found <a href="http://algs4.cs.princeton.edu/53substring/Manacher.java.html" rel="nofollow noreferrer">here</a> and <a href="http://leetcode.com/2011/11/longest-palindromic-substring-part-ii.html" rel="nofollow noreferrer">here</a>.</p>
<p>For input <code>String s = "HYTBCABADEFGHABCDEDCBAGHTFYW1234567887654321ZWETYGDE"</code> it finds the correct output which is <code>1234567887654321</code>.</p>
</section>
<section id="answer-3-score-9" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>The Algo 2 may not work for all string. Here is an example of such a string “ABCDEFCBA”.</p>
<p>Not that the string has “ABC” and “CBA” as its substring. If you reverse the original string, it will be “ABCFEDCBA”. and the longest matching substring is “ABC” which is not a palindrome.</p>
<p>You may need to additionally check if this longest matching substring is actually a palindrome which has the running time of O(n^3).</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="algorithm-for-determining-tic-tac-toe-game-over-score-157814-in-2017" class="level3">
<h3>88: Algorithm for Determining Tic Tac Toe Game Over (score <a href="https://stackoverflow.com/q/1056316.html">157814</a> in 2017)</h3>
<section id="question-87" class="level4">
<h4>Question</h4>
<p>I’ve written a game of tic-tac-toe in Java, and my current method of determining the end of the game accounts for the following possible scenarios for the game being over:</p>
<ol>
<li>
The board is full, and no winner has yet been declared: Game is a draw.
</li>
<li>
Cross has won.
</li>
<li>
Circle has won.
</li>
</ol>
<p>Unfortunately, to do so, it reads through a predefined set of these scenarios from a table. This isn’t necessarily bad considering that there are only 9 spaces on a board, and thus the table is somewhat small, but is there a better algorithmic way of determining if the game is over? The determination of whether someone has won or not is the meat of the problem, since checking if 9 spaces are full is trivial.</p>
<p>The table method might be the solution, but if not, what is? Also, what if the board were not size <code>n=9</code>? What if it were a much larger board, say <code>n=16</code>, <code>n=25</code>, and so on, causing the number of consecutively placed items to win to be <code>x=4</code>, <code>x=5</code>, etc? A general algorithm to use for all <code>n = { 9, 16, 25, 36 ... }</code>?</p>
</section>
<section id="answer-accepted-score-122" class="level4">
<h4>Answer accepted (score 122)</h4>
<p>You know a winning move can only happen after X or O has made their most recent move, so you can only search row/column with optional diag that are contained in that move to limit your search space when trying to determine a winning board. Also since there are a fixed number of moves in a draw tic-tac-toe game once the last move is made if it wasn’t a winning move it’s by default a draw game.</p>
<p>edit: this code is for an n by n board with n in a row to win (3x3 board requries 3 in a row, etc)</p>
<p>edit: added code to check anti diag, I couldn’t figure out a non loop way to determine if the point was on the anti diag so thats why that step is missing</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true"></a>public class TripleT {</span>
<span id="cb435-2"><a href="#cb435-2" aria-hidden="true"></a></span>
<span id="cb435-3"><a href="#cb435-3" aria-hidden="true"></a>    <span class="kw">enum</span> State{Blank, X, O};</span>
<span id="cb435-4"><a href="#cb435-4" aria-hidden="true"></a></span>
<span id="cb435-5"><a href="#cb435-5" aria-hidden="true"></a>    <span class="dt">int</span> n = <span class="dv">3</span>;</span>
<span id="cb435-6"><a href="#cb435-6" aria-hidden="true"></a>    State[][] board = new State[n][n];</span>
<span id="cb435-7"><a href="#cb435-7" aria-hidden="true"></a>    <span class="dt">int</span> moveCount;</span>
<span id="cb435-8"><a href="#cb435-8" aria-hidden="true"></a></span>
<span id="cb435-9"><a href="#cb435-9" aria-hidden="true"></a>    <span class="dt">void</span> Move(<span class="dt">int</span> x, <span class="dt">int</span> y, State s){</span>
<span id="cb435-10"><a href="#cb435-10" aria-hidden="true"></a>        <span class="cf">if</span>(board[x][y] == State.Blank){</span>
<span id="cb435-11"><a href="#cb435-11" aria-hidden="true"></a>            board[x][y] = s;</span>
<span id="cb435-12"><a href="#cb435-12" aria-hidden="true"></a>        }</span>
<span id="cb435-13"><a href="#cb435-13" aria-hidden="true"></a>        moveCount++;</span>
<span id="cb435-14"><a href="#cb435-14" aria-hidden="true"></a></span>
<span id="cb435-15"><a href="#cb435-15" aria-hidden="true"></a>        <span class="co">//check end conditions</span></span>
<span id="cb435-16"><a href="#cb435-16" aria-hidden="true"></a></span>
<span id="cb435-17"><a href="#cb435-17" aria-hidden="true"></a>        <span class="co">//check col</span></span>
<span id="cb435-18"><a href="#cb435-18" aria-hidden="true"></a>        <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; n; i++){</span>
<span id="cb435-19"><a href="#cb435-19" aria-hidden="true"></a>            <span class="cf">if</span>(board[x][i] != s)</span>
<span id="cb435-20"><a href="#cb435-20" aria-hidden="true"></a>                <span class="cf">break</span>;</span>
<span id="cb435-21"><a href="#cb435-21" aria-hidden="true"></a>            <span class="cf">if</span>(i == n-<span class="dv">1</span>){</span>
<span id="cb435-22"><a href="#cb435-22" aria-hidden="true"></a>                <span class="co">//report win for s</span></span>
<span id="cb435-23"><a href="#cb435-23" aria-hidden="true"></a>            }</span>
<span id="cb435-24"><a href="#cb435-24" aria-hidden="true"></a>        }</span>
<span id="cb435-25"><a href="#cb435-25" aria-hidden="true"></a></span>
<span id="cb435-26"><a href="#cb435-26" aria-hidden="true"></a>        <span class="co">//check row</span></span>
<span id="cb435-27"><a href="#cb435-27" aria-hidden="true"></a>        <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; n; i++){</span>
<span id="cb435-28"><a href="#cb435-28" aria-hidden="true"></a>            <span class="cf">if</span>(board[i][y] != s)</span>
<span id="cb435-29"><a href="#cb435-29" aria-hidden="true"></a>                <span class="cf">break</span>;</span>
<span id="cb435-30"><a href="#cb435-30" aria-hidden="true"></a>            <span class="cf">if</span>(i == n-<span class="dv">1</span>){</span>
<span id="cb435-31"><a href="#cb435-31" aria-hidden="true"></a>                <span class="co">//report win for s</span></span>
<span id="cb435-32"><a href="#cb435-32" aria-hidden="true"></a>            }</span>
<span id="cb435-33"><a href="#cb435-33" aria-hidden="true"></a>        }</span>
<span id="cb435-34"><a href="#cb435-34" aria-hidden="true"></a></span>
<span id="cb435-35"><a href="#cb435-35" aria-hidden="true"></a>        <span class="co">//check diag</span></span>
<span id="cb435-36"><a href="#cb435-36" aria-hidden="true"></a>        <span class="cf">if</span>(x == y){</span>
<span id="cb435-37"><a href="#cb435-37" aria-hidden="true"></a>            <span class="co">//we&#39;re on a diagonal</span></span>
<span id="cb435-38"><a href="#cb435-38" aria-hidden="true"></a>            <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; n; i++){</span>
<span id="cb435-39"><a href="#cb435-39" aria-hidden="true"></a>                <span class="cf">if</span>(board[i][i] != s)</span>
<span id="cb435-40"><a href="#cb435-40" aria-hidden="true"></a>                    <span class="cf">break</span>;</span>
<span id="cb435-41"><a href="#cb435-41" aria-hidden="true"></a>                <span class="cf">if</span>(i == n-<span class="dv">1</span>){</span>
<span id="cb435-42"><a href="#cb435-42" aria-hidden="true"></a>                    <span class="co">//report win for s</span></span>
<span id="cb435-43"><a href="#cb435-43" aria-hidden="true"></a>                }</span>
<span id="cb435-44"><a href="#cb435-44" aria-hidden="true"></a>            }</span>
<span id="cb435-45"><a href="#cb435-45" aria-hidden="true"></a>        }</span>
<span id="cb435-46"><a href="#cb435-46" aria-hidden="true"></a></span>
<span id="cb435-47"><a href="#cb435-47" aria-hidden="true"></a>        <span class="co">//check anti diag (thanks rampion)</span></span>
<span id="cb435-48"><a href="#cb435-48" aria-hidden="true"></a>        <span class="cf">if</span>(x + y == n - <span class="dv">1</span>){</span>
<span id="cb435-49"><a href="#cb435-49" aria-hidden="true"></a>            <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; n; i++){</span>
<span id="cb435-50"><a href="#cb435-50" aria-hidden="true"></a>                <span class="cf">if</span>(board[i][(n-<span class="dv">1</span>)-i] != s)</span>
<span id="cb435-51"><a href="#cb435-51" aria-hidden="true"></a>                    <span class="cf">break</span>;</span>
<span id="cb435-52"><a href="#cb435-52" aria-hidden="true"></a>                <span class="cf">if</span>(i == n-<span class="dv">1</span>){</span>
<span id="cb435-53"><a href="#cb435-53" aria-hidden="true"></a>                    <span class="co">//report win for s</span></span>
<span id="cb435-54"><a href="#cb435-54" aria-hidden="true"></a>                }</span>
<span id="cb435-55"><a href="#cb435-55" aria-hidden="true"></a>            }</span>
<span id="cb435-56"><a href="#cb435-56" aria-hidden="true"></a>        }</span>
<span id="cb435-57"><a href="#cb435-57" aria-hidden="true"></a></span>
<span id="cb435-58"><a href="#cb435-58" aria-hidden="true"></a>        <span class="co">//check draw</span></span>
<span id="cb435-59"><a href="#cb435-59" aria-hidden="true"></a>        <span class="cf">if</span>(moveCount == (Math.pow(n, <span class="dv">2</span>) - <span class="dv">1</span>)){</span>
<span id="cb435-60"><a href="#cb435-60" aria-hidden="true"></a>            <span class="co">//report draw</span></span>
<span id="cb435-61"><a href="#cb435-61" aria-hidden="true"></a>        }</span>
<span id="cb435-62"><a href="#cb435-62" aria-hidden="true"></a>    }</span>
<span id="cb435-63"><a href="#cb435-63" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-34" class="level4">
<h4>Answer 2 (score 34)</h4>
<p>you can use a magic square <a href="http://mathworld.wolfram.com/MagicSquare.html" rel="noreferrer">http://mathworld.wolfram.com/MagicSquare.html</a> if any row, column, or diag adds up to 15 then a player has won.</p>
</section>
<section id="answer-3-score-20-1" class="level4">
<h4>Answer 3 (score 20)</h4>
<p>This is similar to <a href="https://stackoverflow.com/questions/1056316/algorithm-for-determining-tic-tac-toe-game-over-java/1058804
#1058804">Osama ALASSIRY’s answer</a>, but it trades constant-space and linear-time for linear-space and constant-time. That is, there’s no looping after initialization.</p>
<p>Initialize a pair <code>(0,0)</code> for each row, each column, and the two diagonals (diagonal &amp; anti-diagonal). These pairs represent the accumulated <code>(sum,sum)</code> of the pieces in the corresponding row, column, or diagonal, where</p>
<pre>
A piece from player A has value (1,0)
A piece from player B has value (0,1)
</pre>
<p>When a player places a piece, update the corresponding row pair, column pair, and diagonal pairs (if on the diagonals). If any newly updated row, column, or diagonal pair equals either <code>(n,0)</code> or <code>(0,n)</code> then either A or B won, respectively.</p>
<p>Asymptotic analysis:</p>
<pre>
O(1) time (per move)
O(n) space (overall)
</pre>
<p>For the memory use, you use <code>4*(n+1)</code> integers.</p>
<pre>
two_elements*n_rows + two_elements*n_columns +
two_elements*two_diagonals = 4*n + 4 integers = 4(n+1) integers
</pre>
<p>Exercise: Can you see how to test for a draw in O(1) time per-move? If so, you can end the game early on a draw.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="ukkonens-suffix-tree-algorithm-in-plain-english-score-155783-in-2018" class="level3">
<h3>89: Ukkonen’s suffix tree algorithm in plain English (score <a href="https://stackoverflow.com/q/9452701.html">155783</a> in 2018)</h3>
<section id="question-88" class="level4">
<h4>Question</h4>
<p>I feel a bit thick at this point. I’ve spent days trying to fully wrap my head around suffix tree construction, but because I don’t have a mathematical background, many of the explanations elude me as they start to make excessive use of mathematical symbology. The closest to a good explanation that I’ve found is <em><a href="http://marknelson.us/1996/08/01/suffix-trees/" rel="noreferrer">Fast String Searching With Suffix Trees</a></em>, but he glosses over various points and some aspects of the algorithm remain unclear.</p>
<p>A step-by-step explanation of this algorithm here on Stack Overflow would be invaluable for many others besides me, I’m sure.</p>
<p>For reference, here’s Ukkonen’s paper on the algorithm: <a href="http://www.cs.helsinki.fi/u/ukkonen/SuffixT1withFigs.pdf" rel="noreferrer">http://www.cs.helsinki.fi/u/ukkonen/SuffixT1withFigs.pdf</a></p>
<p>My basic understanding, so far:</p>
<ul>
<li>
I need to iterate through each prefix P of a given string T
</li>
<li>
I need to iterate through each suffix S in prefix P and add that to tree
</li>
<li>
To add suffix S to the tree, I need to iterate through each character in S, with the iterations consisting of either walking down an existing branch that starts with the same set of characters C in S and potentially splitting an edge into descendent nodes when I reach a differing character in the suffix, OR if there was no matching edge to walk down. When no matching edge is found to walk down for C, a new leaf edge is created for C.
</li>
</ul>
<p>The basic algorithm appears to be O(n<sup>2</sup>), as is pointed out in most explanations, as we need to step through all of the prefixes, then we need to step through each of the suffixes for each prefix. Ukkonen’s algorithm is apparently unique because of the suffix pointer technique he uses, though I think <em>that</em> is what I’m having trouble understanding.</p>
<p>I’m also having trouble understanding:</p>
<ul>
<li>
exactly when and how the “active point” is assigned, used and changed
</li>
<li>
what is going on with the canonization aspect of the algorithm
</li>
<li>
Why the implementations I’ve seen need to “fix” bounding variables that they are using
</li>
</ul>
<hr>
<p>Here is the completed <strong>C #</strong> source code. It not only works correctly, but supports automatic canonization and renders a nicer looking text graph of the output. Source code and sample output is at:</p>
<blockquote>
<strong><a href="https://gist.github.com/2373868" rel="noreferrer">https://gist.github.com/2373868</a></strong>
</blockquote>
<hr>
<p><strong>Update 2017-11-04</strong></p>
<p>After many years I’ve found a new use for suffix trees, and have implemented the algorithm in <strong>JavaScript</strong>. Gist is below. It should be bug-free. Dump it into a js file, <code>npm install chalk</code> from the same location, and then run with node.js to see some colourful output. There’s a stripped down version in the same Gist, without any of the debugging code.</p>
<blockquote>
<strong><a href="https://gist.github.com/axefrog/c347bf0f5e0723cbd09b1aaed6ec6fc6" rel="noreferrer">https://gist.github.com/axefrog/c347bf0f5e0723cbd09b1aaed6ec6fc6</a></strong>
</blockquote>
</section>
<section id="answer-accepted-score-2307" class="level4">
<h4>Answer accepted (score 2307)</h4>
<p>The following is an attempt to describe the Ukkonen algorithm by first showing what it does when the string is simple (i.e. does not contain any repeated characters), and then extending it to the full algorithm.</p>
<p><strong>First, a few preliminary statements.</strong></p>
<ol>
<li>
<p>
What we are building, is <em>basically</em> like a search trie. So there is a root node, edges going out of it leading to new nodes, and further edges going out of those, and so forth
</p>
</li>
<li>
<p>
<strong>But</strong>: Unlike in a search trie, the edge labels are not single characters. Instead, each edge is labeled using a pair of integers <code>[from,to]</code>. These are pointers into the text. In this sense, each edge carries a string label of arbitrary length, but takes only O(1) space (two pointers).
</p>
</li>
</ol>
<h5>
Basic principle
</h2>
<p>
I would like to first demonstrate how to create the suffix tree of a particularly simple string, a string with no repeated characters:
</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb436-1"><a href="#cb436-1" aria-hidden="true"></a>abc</span></code></pre></div>
<p>The algorithm <strong>works in steps, from left to right</strong>. There is <strong>one step for every character of the string</strong>. Each step might involve more than one individual operation, but we will see (see the final observations at the end) that the total number of operations is O(n).</p>
<p>
So, we start from the <em>left</em>, and first insert only the single character <code>a</code> by creating an edge from the root node (on the left) to a leaf, and labeling it as <code>[0, #]</code>, which means the edge represents the substring starting at position 0 and ending at <em>the current end</em>. I use the symbol <code>#</code> to mean <em>the current end</em>, which is at position 1 (right after <code>a</code>).
</p>
<p>So we have an initial tree, which looks like this:</p>
<p><img src="https://i.stack.imgur.com/aOwIL.png" alt=""></p>
<p>And what it means is this:</p>
<p><img src="https://i.stack.imgur.com/SZH4k.png" alt=""></p>
<p>
Now we progress to position 2 (right after <code>b</code>). <strong>Our goal at each step</strong> is to insert <strong>all suffixes up to the current position</strong>. We do this by
</p>
<ul>
<li>
expanding the existing <code>a</code>-edge to <code>ab</code>
</li>
<li>
inserting one new edge for <code>b</code>
</li>
</ul>
<p>In our representation this looks like</p>
<p><img src="https://i.stack.imgur.com/onmqt.png" alt="enter image description here"></p>
<p>And what it means is:</p>
<p><img src="https://i.stack.imgur.com/tchAx.png" alt=""></p>
<p><strong>We observe</strong> two things:</p>
<ul>
<li>
The edge representation for <code>ab</code> is <strong>the same</strong> as it used to be in the initial tree: <code>[0, #]</code>. Its meaning has automatically changed because we updated the current position <code>#</code> from 1 to 2.
</li>
<li>
Each edge consumes O(1) space, because it consists of only two pointers into the text, regardless of how many characters it represents.
</li>
</ul>
<p>
Next we increment the position again and update the tree by appending a <code>c</code> to every existing edge and inserting one new edge for the new suffix <code>c</code>.
</p>
<p>In our representation this looks like</p>
<p><img src="https://i.stack.imgur.com/wCEdI.png" alt=""></p>
<p>And what it means is:</p>
<p><img src="https://i.stack.imgur.com/UpUFw.png" alt=""></p>
<p><strong>We observe:</strong></p>
<ul>
<li>
The tree is the correct suffix tree <em>up to the current position</em> after each step
</li>
<li>
There are as many steps as there are characters in the text
</li>
<li>
The amount of work in each step is O(1), because all existing edges are updated automatically by incrementing <code>#</code>, and inserting the one new edge for the final character can be done in O(1) time. Hence for a string of length n, only O(n) time is required.
</li>
</ul>
<h5>
First extension: Simple repetitions
</h2>
<p>
Of course this works so nicely only because our string does not contain any repetitions. We now look at a more realistic string:
</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true"></a>abcabxabcd</span></code></pre></div>
<p>
It starts with <code>abc</code> as in the previous example, then <code>ab</code> is repeated and followed by <code>x</code>, and then <code>abc</code> is repeated followed by <code>d</code>.
</p>
<p><strong>Steps 1 through 3:</strong> After the first 3 steps we have the tree from the previous example:</p>
<p><img src="https://i.stack.imgur.com/AclCh.png" alt=""></p>
<p>
<strong>Step 4:</strong> We move <code>#</code> to position 4. This implicitly updates all existing edges to this:
</p>
<p><img src="https://i.stack.imgur.com/xhVMY.png" alt=""></p>
<p>
and we need to insert the final suffix of the current step, <code>a</code>, at the root.
</p>
<p>
Before we do this, we introduce <strong>two more variables</strong> (in addition to <code>#</code>), which of course have been there all the time but we haven’t used them so far:
</p>
<ul>
<li>
The <strong>active point</strong>, which is a triple <code>(active_node,active_edge,active_length)</code>
</li>
<li>
The <code>remainder</code>, which is an integer indicating how many new suffixes we need to insert
</li>
</ul>
<p>
The exact meaning of these two will become clear soon, but for now let’s just say:
</p>
<ul>
<li>
In the simple <code>abc</code> example, the active point was always <code>(root,'\0x',0)</code>, i.e. <code>active_node</code> was the root node, <code>active_edge</code> was specified as the null character <code>'\0x'</code>, and <code>active_length</code> was zero. The effect of this was that the one new edge that we inserted in every step was inserted at the root node as a freshly created edge. We will see soon why a triple is necessary to represent this information.
</li>
<li>
The <code>remainder</code> was always set to 1 at the beginning of each step. The meaning of this was that the number of suffixes we had to actively insert at the end of each step was 1 (always just the final character).
</li>
</ul>
<p>
Now this is going to change. When we insert the current final character <code>a</code> at the root, we notice that there is already an outgoing edge starting with <code>a</code>, specifically: <code>abca</code>. Here is what we do in such a case:
</p>
<ul>
<li>
We <strong>do not</strong> insert a fresh edge <code>[4, #]</code> at the root node. Instead we simply notice that the suffix <code>a</code> is already in our tree. It ends in the middle of a longer edge, but we are not bothered by that. We just leave things the way they are.
</li>
<li>
We <strong>set the active point</strong> to <code>(root,'a',1)</code>. That means the active point is now somewhere in the middle of outgoing edge of the root node that starts with <code>a</code>, specifically, after position 1 on that edge. We notice that the edge is specified simply by its first character <code>a</code>. That suffices because there can be <em>only one</em> edge starting with any particular character (confirm that this is true after reading through the entire description).
</li>
<li>
We also increment <code>remainder</code>, so at the beginning of the next step it will be 2.
</li>
</ul>
<p>
<strong>Observation:</strong> When the final <strong>suffix we need to insert is found to exist in the tree already</strong>, the tree itself is <strong>not changed</strong> at all (we only update the active point and <code>remainder</code>). The tree is then not an accurate representation of the suffix tree <em>up to the current position</em> any more, but it <strong>contains</strong> all suffixes (because the final suffix <code>a</code> is contained <em>implicitly</em>). Hence, apart from updating the variables (which are all of fixed length, so this is O(1)), there was <strong>no work</strong> done in this step.
</p>
<p>
<strong>Step 5:</strong> We update the current position <code>#</code> to 5. This automatically updates the tree to this:
</p>
<p><img src="https://i.stack.imgur.com/XL6bg.png" alt=""></p>
<p>
And <strong>because <code>remainder</code> is 2</strong>, we need to insert two final suffixes of the current position: <code>ab</code> and <code>b</code>. This is basically because:
</p>
<ul>
<li>
The <code>a</code> suffix from the previous step has never been properly inserted. So it has <em>remained</em>, and since we have progressed one step, it has now grown from <code>a</code> to <code>ab</code>.
</li>
<li>
And we need to insert the new final edge <code>b</code>.
</li>
</ul>
<p>
In practice this means that we go to the active point (which points to behind the <code>a</code> on what is now the <code>abcab</code> edge), and insert the current final character <code>b</code>. <strong>But:</strong> Again, it turns out that <code>b</code> is also already present on that same edge.
</p>
<p>So, again, we do not change the tree. We simply:</p>
<ul>
<li>
Update the active point to <code>(root,'a',2)</code> (same node and edge as before, but now we point to behind the <code>b</code>)
</li>
<li>
Increment the <code>remainder</code> to 3 because we still have not properly inserted the final edge from the previous step, and we don’t insert the current final edge either.
</li>
</ul>
<p>
To be clear: We had to insert <code>ab</code> and <code>b</code> in the current step, but because <code>ab</code> was already found, we updated the active point and did not even attempt to insert <code>b</code>. Why? Because if <code>ab</code> is in the tree, <strong>every suffix</strong> of it (including <code>b</code>) must be in the tree, too. Perhaps only <em>implicitly</em>, but it must be there, because of the way we have built the tree so far.
</p>
<p>
We proceed to <strong>step 6</strong> by incrementing <code>#</code>. The tree is automatically updated to:
</p>
<p><img src="https://i.stack.imgur.com/bLLT9.png" alt=""></p>
<p>
Because <strong><code>remainder</code> is 3</strong>, we have to insert <code>abx</code>, <code>bx</code> and <code>x</code>. The active point tells us where <code>ab</code> ends, so we only need to jump there and insert the <code>x</code>. Indeed, <code>x</code> is not there yet, so we split the <code>abcabx</code> edge and insert an internal node:
</p>
<p><img src="https://i.stack.imgur.com/6HYtR.png" alt=""></p>
<p>
The edge representations are still pointers into the text, so splitting and inserting an internal node can be done in O(1) time.
</p>
<p>
So we have dealt with <code>abx</code> and decrement <code>remainder</code> to 2. Now we need to insert the next remaining suffix, <code>bx</code>. But before we do that we need to update the active point. The rule for this, after splitting and inserting an edge, will be called <strong>Rule 1</strong> below, and it applies whenever the <code>active_node</code> is root (we will learn rule 3 for other cases further below). Here is rule 1:
</p>
<blockquote>
<p>After an insertion from root,</p>
<ul>
<li>
<code>active_node</code> remains root
</li>
<li>
<code>active_edge</code> is set to the first character of the new suffix we need to insert, i.e. <code>b</code>
</li>
<li>
<code>active_length</code> is reduced by 1
</li>
</ul>
</blockquote>
<p>
Hence, the new active-point triple <code>(root,'b',1)</code> indicates that the next insert has to be made at the <code>bcabx</code> edge, behind 1 character, i.e. behind <code>b</code>. We can identify the insertion point in O(1) time and check whether <code>x</code> is already present or not. If it was present, we would end the current step and leave everything the way it is. But <code>x</code> is not present, so we insert it by splitting the edge:
</p>
<p><img src="https://i.stack.imgur.com/YVvbJ.png" alt=""></p>
<p>
Again, this took O(1) time and we update <code>remainder</code> to 1 and the active point to <code>(root,'x',0)</code> as rule 1 states.
</p>
<p>But there is one more thing we need to do. We’ll call this <strong>Rule 2:</strong></p>
<blockquote>
<p>
If we split an edge and insert a new node, and if that is <em>not the first node</em> created during the current step, we connect the previously inserted node and the new node through a special pointer, a <strong>suffix link</strong>. We will later see why that is useful. Here is what we get, the suffix link is represented as a dotted edge:
</p>
</blockquote>
<p><img src="https://i.stack.imgur.com/zL9yl.png" alt=""></p>
<p>
We still need to insert the final suffix of the current step, <code>x</code>. Since the <code>active_length</code> component of the active node has fallen to 0, the final insert is made at the root directly. Since there is no outgoing edge at the root node starting with <code>x</code>, we insert a new edge:
</p>
<p><img src="https://i.stack.imgur.com/992gV.png" alt=""></p>
<p>As we can see, in the current step all remaining inserts were made.</p>
<p>
We proceed to <strong>step 7</strong> by setting <code>#</code>=7, which automatically appends the next character, <code>a</code>, to all leaf edges, as always. Then we attempt to insert the new final character to the active point (the root), and find that it is there already. So we end the current step without inserting anything and update the active point to <code>(root,'a',1)</code>.
</p>
<p>
In <strong>step 8</strong>, <code>#</code>=8, we append <code>b</code>, and as seen before, this only means we update the active point to <code>(root,'a',2)</code> and increment <code>remainder</code> without doing anything else, because <code>b</code> is already present. <strong>However,</strong> we notice (in O(1) time) that the active point is now at the end of an edge. We reflect this by re-setting it to <code>(node1,'\0x',0)</code>. Here, I use <code>node1</code> to refer to the internal node the <code>ab</code> edge ends at.
</p>
<p>
Then, in <strong>step <code>#</code>=9</strong>, we need to insert ‘c’ and this will help us to understand the final trick:
</p>
<h5>
Second extension: Using suffix links
</h2>
<p>
As always, the <code>#</code> update appends <code>c</code> automatically to the leaf edges and we go to the active point to see if we can insert ‘c’. It turns out ‘c’ exists already at that edge, so we set the active point to <code>(node1,'c',1)</code>, increment <code>remainder</code> and do nothing else.
</p>
<p>
Now in <strong>step <code>#</code>=10</strong>, <code>remainder is 4</code>, and so we first need to insert <code>abcd</code> (which remains from 3 steps ago) by inserting <code>d</code> at the active point.
</p>
<p>
Attempting to insert <code>d</code> at the active point causes an edge split in O(1) time:
</p>
<p><img src="https://i.stack.imgur.com/Rkdzd.png" alt=""></p>
<p>
The <code>active_node</code>, from which the split was initiated, is marked in red above. Here is the final rule, <strong>Rule 3:</strong>
</p>
<blockquote>
<p>
After splitting an edge from an <code>active_node</code> that is not the root node, we follow the suffix link going out of that node, if there is any, and reset the <code>active_node</code> to the node it points to. If there is no suffix link, we set the <code>active_node</code> to the root. <code>active_edge</code> and <code>active_length</code> remain unchanged.
</p>
</blockquote>
<p>
So the active point is now <code>(node2,'c',1)</code>, and <code>node2</code> is marked in red below:
</p>
<p><img src="https://i.stack.imgur.com/0IS5C.png" alt=""></p>
<p>
Since the insertion of <code>abcd</code> is complete, we decrement <code>remainder</code> to 3 and consider the next remaining suffix of the current step, <code>bcd</code>. Rule 3 has set the active point to just the right node and edge so inserting <code>bcd</code> can be done by simply inserting its final character <code>d</code> at the active point.
</p>
<p>
Doing this causes another edge split, and <strong>because of rule 2</strong>, we must create a suffix link from the previously inserted node to the new one:
</p>
<p><img src="https://i.stack.imgur.com/DNVQO.png" alt=""></p>
<p>
<strong>We observe:</strong> Suffix links enable us to reset the active point so we can make the next <em>remaining insert</em> at O(1) effort. Look at the graph above to confirm that indeed node at label <code>ab</code> is linked to the node at <code>b</code> (its suffix), and the node at <code>abc</code> is linked to <code>bc</code>.
</p>
<p>
The current step is not finished yet. <code>remainder</code> is now 2, and we need to follow rule 3 to reset the active point again. Since the current <code>active_node</code> (red above) has no suffix link, we reset to root. The active point is now <code>(root,'c',1)</code>.
</p>
<p>
Hence the next insert occurs at the one outgoing edge of the root node whose label starts with <code>c</code>: <code>cabxabcd</code>, behind the first character, i.e. behind <code>c</code>. This causes another split:
</p>
<p><img src="https://i.stack.imgur.com/wZ7Bj.png" alt=""></p>
<p>
And since this involves the creation of a new internal node,we follow rule 2 and set a new suffix link from the previously created internal node:
</p>
<p><img src="https://i.stack.imgur.com/urgol.png" alt=""></p>
<p>
(I am using <a href="http://www.graphviz.org/" rel="noreferrer">Graphviz Dot</a> for these little graphs. The new suffix link caused dot to re-arrange the existing edges, so check carefully to confirm that the only thing that was inserted above is a new suffix link.)
</p>
<p>
With this, <code>remainder</code> can be set to 1 and since the <code>active_node</code> is root, we use rule 1 to update the active point to <code>(root,'d',0)</code>. This means the final insert of the current step is to insert a single <code>d</code> at root:
</p>
<p><img src="https://i.stack.imgur.com/TPxLe.png" alt=""></p>
<p>
That was the final step and we are done. There are number of <strong>final observations</strong>, though:
</p>
<ul>
<li>
<p>
In each step we move <code>#</code> forward by 1 position. This automatically updates all leaf nodes in O(1) time.
</p>
</li>
<li>
<p>
But it does not deal with a) any suffixes <em>remaining</em> from previous steps, and b) with the one final character of the current step.
</p>
</li>
<li>
<p>
<code>remainder</code> tells us how many additional inserts we need to make. These inserts correspond one-to-one to the final suffixes of the string that ends at the current position <code>#</code>. We consider one after the other and make the insert. <strong>Important:</strong> Each insert is done in O(1) time since the active point tells us exactly where to go, and we need to add only one single character at the active point. Why? Because the other characters are <em>contained implicitly</em> (otherwise the active point would not be where it is).
</p>
</li>
<li>
<p>
After each such insert, we decrement <code>remainder</code> and follow the suffix link if there is any. If not we go to root (rule 3). If we are at root already, we modify the active point using rule 1. In any case, it takes only O(1) time.
</p>
</li>
<li>
<p>
If, during one of these inserts, we find that the character we want to insert is already there, we don’t do anything and end the current step, even if <code>remainder</code>&gt;0. The reason is that any inserts that remain will be suffixes of the one we just tried to make. Hence they are all <em>implicit</em> in the current tree. The fact that <code>remainder</code>&gt;0 makes sure we deal with the remaining suffixes later.
</p>
</li>
<li>
<p>
What if at the end of the algorithm <code>remainder</code>&gt;0? This will be the case whenever the end of the text is a substring that occurred somewhere before. In that case we must append one extra character at the end of the string that has not occurred before. In the literature, usually the dollar sign <code>$</code> is used as a symbol for that. <strong>Why does that matter?</strong> –&gt; If later we use the completed suffix tree to search for suffixes, we must accept matches only if they <em>end at a leaf</em>. Otherwise we would get a lot of spurious matches, because there are <em>many</em> strings <em>implicitly</em> contained in the tree that are not actual suffixes of the main string. Forcing <code>remainder</code> to be 0 at the end is essentially a way to ensure that all suffixes end at a leaf node. <strong>However,</strong> if we want to use the tree to search for <em>general substrings</em>, not only <em>suffixes</em> of the main string, this final step is indeed not required, as suggested by the OP’s comment below.
</p>
</li>
<li>
<p>
So what is the complexity of the entire algorithm? If the text is n characters in length, there are obviously n steps (or n+1 if we add the dollar sign). In each step we either do nothing (other than updating the variables), or we make <code>remainder</code> inserts, each taking O(1) time. Since <code>remainder</code> indicates how many times we have done nothing in previous steps, and is decremented for every insert that we make now, the total number of times we do something is exactly n (or n+1). Hence, the total complexity is O(n).
</p>
</li>
<li>
<p>
However, there is one small thing that I did not properly explain: It can happen that we follow a suffix link, update the active point, and then find that its <code>active_length</code> component does not work well with the new <code>active_node</code>. For example, consider a situation like this:
</p>
</li>
</ul>
<p><img src="https://i.stack.imgur.com/7t0dg.png" alt=""></p>
<p>
(The dashed lines indicate the rest of the tree. The dotted line is a suffix link.)
</p>
<p>
Now let the active point be <code>(red,'d',3)</code>, so it points to the place behind the <code>f</code> on the <code>defg</code> edge. Now assume we made the necessary updates and now follow the suffix link to update the active point according to rule 3. The new active point is <code>(green,'d',3)</code>. However, the <code>d</code>-edge going out of the green node is <code>de</code>, so it has only 2 characters. In order to find the correct active point, we obviously need to follow that edge to the blue node and reset to <code>(blue,'f',1)</code>.
</p>
<p>
In a particularly bad case, the <code>active_length</code> could be as large as <code>remainder</code>, which can be as large as n. And it might very well happen that to find the correct active point, we need not only jump over one internal node, but perhaps many, up to n in the worst case. Does that mean the algorithm has a hidden O(n<sup>2</sup>) complexity, because in each step <code>remainder</code> is generally O(n), and the post-adjustments to the active node after following a suffix link could be O(n), too?
</p>
<p>
No. The reason is that if indeed we have to adjust the active point (e.g. from green to blue as above), that brings us to a new node that has its own suffix link, and <code>active_length</code> will be reduced. As we follow down the chain of suffix links we make the remaining inserts, <code>active_length</code> can only decrease, and the number of active-point adjustments we can make on the way can’t be larger than <code>active_length</code> at any given time. Since <code>active_length</code> can never be larger than <code>remainder</code>, and <code>remainder</code> is O(n) not only in every single step, but the total sum of increments ever made to <code>remainder</code> over the course of the entire process is O(n) too, the number of active point adjustments is also bounded by O(n).
</p>
</section>
<section id="answer-2-score-126-1" class="level4">
<h4>Answer 2 (score 126)</h4>
<p>I tried to implement the Suffix Tree with the approach given in jogojapan’s answer, but it didn’t work for some cases due to wording used for the rules. Moreover, I’ve mentioned that nobody managed to implement an absolutely correct suffix tree using this approach. Below I will write an “overview” of jogojapan’s answer with some modifications to the rules. I will also describe the case when we forget to create <strong><em>important</em></strong> suffix links.</p>
<p><strong>Additional variables used</strong></p>
<ol>
<li>
<strong>active point</strong> - a triple (active_node; active_edge; active_length), showing from where we must start inserting a new suffix.
</li>
<li>
<strong>remainder</strong> - shows the number of suffixes we must add <em>explicitly</em>. For instance, if our word is ‘abcaabca’, and remainder = 3, it means we must process 3 last suffixes: <strong>bca</strong>, <strong>ca</strong> and <strong>a</strong>.
</li>
</ol>
<p>Let’s use a concept of an <strong>internal node</strong> - all the nodes, except the <em>root</em> and the <em>leafs</em> are <strong>internal nodes</strong>.</p>
<p><strong>Observation 1</strong></p>
<p>When the final suffix we need to insert is found to exist in the tree already, the tree itself is not changed at all (we only update the <code>active point</code> and <code>remainder</code>).</p>
<p><strong>Observation 2</strong></p>
<p>If at some point <code>active_length</code> is greater or equal to the length of current edge (<code>edge_length</code>), we move our <code>active point</code> down until <code>edge_length</code> is strictly greater than <code>active_length</code>.</p>
<p>Now, let’s redefine the rules:</p>
<p><strong>Rule 1</strong></p>
<blockquote>
<p>If after an insertion from the <em>active node</em> = <em>root</em>, the <em>active length</em> is greater than 0, then:</p>
<ol>
<li>
<em>active node</em> is not changed
</li>
<li>
<em>active length</em> is decremented
</li>
<li>
<em>active edge</em> is shifted right (to the first character of the next suffix we must insert)
</li>
</ol>
</blockquote>
<p><strong>Rule 2</strong></p>
<blockquote>
If we create a new <em>internal node</em> <strong>OR</strong> make an inserter from an <em>internal node</em>, and this is not the first <strong>SUCH</strong> <em>internal node</em> at current step, then we link the previous <strong>SUCH</strong> node with <strong>THIS</strong> one through a <em>suffix link</em>.
</blockquote>
<p>This definition of the <code>Rule 2</code> is different from jogojapan’, as here we take into account not only the <em>newly created</em> internal nodes, but also the internal nodes, from which we make an insertion.</p>
<p><strong>Rule 3</strong></p>
<blockquote>
After an insert from the <em>active node</em> which is not the <em>root</em> node, we must follow the suffix link and set the <em>active node</em> to the node it points to. If there is no a suffix link, set the <em>active node</em> to the <em>root</em> node. Either way, <em>active edge</em> and <em>active length</em> stay unchanged.
</blockquote>
<p>In this definition of <code>Rule 3</code> we also consider the inserts of leaf nodes (not only split-nodes).</p>
<p><strong>And finally, Observation 3:</strong></p>
<p>When the symbol we want to add to the tree is already on the edge, we, according to <code>Observation 1</code>, update only <code>active point</code> and <code>remainder</code>, leaving the tree unchanged. <strong>BUT</strong> if there is an <em>internal node</em> marked as <em>needing suffix link</em>, we must connect that node with our current <code>active node</code> through a suffix link.</p>
<p>Let’s look at the example of a suffix tree for <strong>cdddcdc</strong> if we add a suffix link in such case and if we don’t:</p>
<ol>
<li>
<p>
If we <strong>DON’T</strong> connect the nodes through a suffix link:
</p>
<ul>
<li>
before adding the last letter <strong>c</strong>:
</li>
</ul>
<p><img src="https://i.stack.imgur.com/zPiF1.png" alt=""></p>
<ul>
<li>
after adding the last letter <strong>c</strong>:
</li>
</ul>
<img src="https://i.stack.imgur.com/5fsmd.png" alt="">
</li>
<li>
<p>
If we <strong>DO</strong> connect the nodes through a suffix link:
</p>
<ul>
<li>
before adding the last letter <strong>c</strong>:
</li>
</ul>
<p><img src="https://i.stack.imgur.com/lZrAF.png" alt=""></p>
<ul>
<li>
after adding the last letter <strong>c</strong>:
</li>
</ul>
<img src="https://i.stack.imgur.com/XUFjk.png" alt="">
</li>
</ol>
<p>Seems like there is no significant difference: in the second case there are two more suffix links. But these suffix links are <em>correct</em>, and one of them - from the blue node to the red one - is very <strong>important</strong> for our approach with <strong>active point</strong>. The problem is that if we don’t put a suffix link here, later, when we add some new letters to the tree, we might omit adding some nodes to the tree due to the <code>Rule 3</code>, because, according to it, if there’s no a suffix link, then we must put the <code>active_node</code> to the root.</p>
<p>When we were adding the last letter to the tree, the red node had <strong>already existed</strong> before we made an insert from the blue node (the edge labled <strong>‘c’</strong>). As there was an insert from the blue node, we mark it as <em>needing a suffix link</em>. Then, relying on the <strong>active point</strong> approach, the <code>active node</code> was set to the red node. But we don’t make an insert from the red node, as the letter <strong>‘c’</strong> is already on the edge. Does it mean that the blue node must be left without a suffix link? No, we must connect the blue node with the red one through a suffix link. Why is it correct? Because the <strong>active point</strong> approach guarantees that we get to a right place, i.e., to the next place where we must process an insert of a <strong>shorter</strong> suffix.</p>
<p>Finally, here are my implementations of the Suffix Tree:</p>
<ol>
<li>
<a href="https://gist.github.com/makagonov/22ab3675e3fc0031314e8535ffcbee2c" rel="noreferrer">Java</a>
</li>
<li>
<a href="https://gist.github.com/makagonov/f7ed8ce729da72621b321f0ab547debb" rel="noreferrer">C++</a>
</li>
</ol>
<p>Hope that this “overview” combined with jogojapan’s detailed answer will help somebody to implement his own Suffix Tree.</p>
</section>
<section id="answer-3-score-9-1" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>Thanks for the well explained tutorial by <strong><span class="citation" data-cites="jogojapan">@jogojapan</span></strong>, I implemented the algorithm in Python.</p>
<p>A couple of minor problems mentioned by <span class="citation" data-cites="jogojapan">@jogojapan</span> turns out to be more <strong>sophisticated</strong> than I have expected, and need to be treated very carefully. It cost me several days to get my implementation <strong>robust enough</strong> (I suppose). Problems and solutions are listed below:</p>
<ol>
<li>
<p>
<strong>End with <code>Remainder &amp;gt; 0</code></strong> It turns out this situation can also happen <strong>during the unfolding step</strong>, not just the end of the entire algorithm. When that happens, we can leave the remainder, actnode, actedge, and actlength <strong>unchanged</strong>, end the current unfolding step, and start another step by either keep folding or unfolding depending on if the next char in the original string is on the current path or not.
</p>
</li>
<li>
<p>
<strong>Leap Over Nodes:</strong> When we follow a suffix link, update the active point, and then find that its active_length component does not work well with the new active_node. We have to <strong>move forward</strong> to the right place to split, or insert a leaf. This process might be <strong>not that straightforward</strong> because during the moving the actlength and actedge keep changing all the way, when you have to move back to the <strong>root node</strong>, the <strong>actedge</strong> and <strong>actlength</strong> could be <strong>wrong</strong> because of those moves. We need additional variable(s) to keep that information.
</p>
<a href="https://i.stack.imgur.com/7t0dg.png" rel="noreferrer"><img src="https://i.stack.imgur.com/7t0dg.png" alt="enter image description here"></a>
</li>
</ol>
<p>The other two problems have somehow been pointed out by <strong><span class="citation" data-cites="managonov">@managonov</span></strong></p>
<ol start="3">
<li>
<p>
<strong>Split Could Degenerate</strong> When trying to split an edge, sometime you’ll find the split operation is right on a node. That case we only need add a new leaf to that node, take it as a standard edge split operation, which means the suffix links if there’s any, should be maintained correspondingly.
</p>
</li>
<li>
<p>
<strong>Hidden Suffix Links</strong> There is another special case which is incurred by <em>problem 1</em> and <em>problem 2</em>. Sometimes we need to hop over several nodes to the right point for split, we might <strong>surpass</strong> the right point if we move by comparing the remainder string and the path labels. That case the suffix link will be neglected unintentionally, if there should be any. This could be avoided by <strong>remembering the right point</strong> when moving forward. The suffix link should be maintained if the split node already exists, or even the <em>problem 1</em> happens during a unfolding step.
</p>
</li>
</ol>
<p>Finally, my implementation in <strong>Python</strong> is as follows:</p>
<ul>
<li>
<a href="https://github.com/mutux/Ukkonen-s-Suffix-Tree-Algorithm" rel="noreferrer"><strong>Python</strong> </a>
</li>
</ul>
<blockquote>
<p>
<strong>Tips:</strong> <em>It includes a naive <strong>tree printing</strong> function in the code above, which is very important while debugging</em>. It saved me a lot of time and is convenient for locating special cases.
</p>
</blockquote>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="javascript---get-the-first-day-of-the-week-from-current-date-score-154994-in-2019" class="level3">
<h3>90: JavaScript - get the first day of the week from current date (score <a href="https://stackoverflow.com/q/4156434.html">154994</a> in 2019)</h3>
<section id="question-89" class="level4">
<h4>Question</h4>
<p>I need the fastest way to get the first day of the week. For example: today is the 11th of November, and a Thursday; and I want the first day of this week, which is the 8th of November, and a Monday. I need the fastest method for MongoDB map function, any ideas?</p>
</section>
<section id="answer-accepted-score-275" class="level4">
<h4>Answer accepted (score 275)</h4>
<p>Using the <code>getDay</code> method of Date objects, you can know the number of day of the week (being 0=Sunday, 1=Monday, etc).</p>
<p>You can then subtract that number of days plus one, for example:</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb438-1"><a href="#cb438-1" aria-hidden="true"></a>function getMonday(d) {</span>
<span id="cb438-2"><a href="#cb438-2" aria-hidden="true"></a>  d = new Date(d);</span>
<span id="cb438-3"><a href="#cb438-3" aria-hidden="true"></a>  var day = d.getDay(),</span>
<span id="cb438-4"><a href="#cb438-4" aria-hidden="true"></a>      diff = d.getDate() - day + (day == <span class="dv">0</span> ? -<span class="dv">6</span>:<span class="dv">1</span>); <span class="co">// adjust when day is sunday</span></span>
<span id="cb438-5"><a href="#cb438-5" aria-hidden="true"></a>  <span class="cf">return</span> new Date(d.setDate(diff));</span>
<span id="cb438-6"><a href="#cb438-6" aria-hidden="true"></a>}</span>
<span id="cb438-7"><a href="#cb438-7" aria-hidden="true"></a></span>
<span id="cb438-8"><a href="#cb438-8" aria-hidden="true"></a>getMonday(new Date()); <span class="co">// Mon Nov 08 2010</span></span></code></pre></div>
</section>
<section id="answer-2-score-47-1" class="level4">
<h4>Answer 2 (score 47)</h4>
<p>Not sure how it compares for performance, but this works.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true"></a>var today = new Date();</span>
<span id="cb439-2"><a href="#cb439-2" aria-hidden="true"></a>var day = today.getDay() || <span class="dv">7</span>; <span class="co">// Get current day number, converting Sun. to 7</span></span>
<span id="cb439-3"><a href="#cb439-3" aria-hidden="true"></a><span class="cf">if</span>( day !== <span class="dv">1</span> )                <span class="co">// Only manipulate the date if it isn&#39;t Mon.</span></span>
<span id="cb439-4"><a href="#cb439-4" aria-hidden="true"></a>    today.setHours(-<span class="dv">24</span> * (day - <span class="dv">1</span>));   <span class="co">// Set the hours to day number minus 1</span></span>
<span id="cb439-5"><a href="#cb439-5" aria-hidden="true"></a>                                         <span class="co">//   multiplied by negative 24</span></span>
<span id="cb439-6"><a href="#cb439-6" aria-hidden="true"></a>alert(today); <span class="co">// will be Monday</span></span></code></pre></div>
<p>Or as a function:</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb440-1"><a href="#cb440-1" aria-hidden="true"></a>function getMonday( date ) {</span>
<span id="cb440-2"><a href="#cb440-2" aria-hidden="true"></a>    var day = date.getDay() || <span class="dv">7</span>;  </span>
<span id="cb440-3"><a href="#cb440-3" aria-hidden="true"></a>    <span class="cf">if</span>( day !== <span class="dv">1</span> ) </span>
<span id="cb440-4"><a href="#cb440-4" aria-hidden="true"></a>        date.setHours(-<span class="dv">24</span> * (day - <span class="dv">1</span>)); </span>
<span id="cb440-5"><a href="#cb440-5" aria-hidden="true"></a>    <span class="cf">return</span> date;</span>
<span id="cb440-6"><a href="#cb440-6" aria-hidden="true"></a>}</span>
<span id="cb440-7"><a href="#cb440-7" aria-hidden="true"></a></span>
<span id="cb440-8"><a href="#cb440-8" aria-hidden="true"></a>getMonday(new Date());</span></code></pre></div>
</section>
<section id="answer-3-score-13-2" class="level4">
<h4>Answer 3 (score 13)</h4>
<p>Check out <a href="http://www.datejs.com/" rel="noreferrer">Date.js</a></p>
<div class="sourceCode" id="cb441"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb441-1"><a href="#cb441-1" aria-hidden="true"></a>Date.today().previous().monday()</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-a-loop-invariant-score-154787-in-2018" class="level3">
<h3>91: What is a loop invariant? (score <a href="https://stackoverflow.com/q/3221577.html">154787</a> in 2018)</h3>
<section id="question-90" class="level4">
<h4>Question</h4>
<p>I’m reading “Introduction to Algorithm” by CLRS. In chapter 2, the authors mention “loop invariants”. What is a loop invariant?</p>
</section>
<section id="answer-accepted-score-323" class="level4">
<h4>Answer accepted (score 323)</h4>
<p>In simple words, a loop invariant is some predicate (condition) that holds for every iteration of the loop. For example, let’s look at a simple <code>for</code> loop that looks like this:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb442-1"><a href="#cb442-1" aria-hidden="true"></a><span class="dt">int</span> j = <span class="dv">9</span>;</span>
<span id="cb442-2"><a href="#cb442-2" aria-hidden="true"></a><span class="cf">for</span>(<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;<span class="dv">10</span>; i++)  </span>
<span id="cb442-3"><a href="#cb442-3" aria-hidden="true"></a>  j--;</span></code></pre></div>
<p>
In this example it is true (for every iteration) that <code>i + j == 9</code>. A weaker invariant that is also true is that <code>i &amp;gt;= 0 &amp;amp;&amp;amp; i &amp;lt;= 10</code>.
</p>
</section>
<section id="answer-2-score-113" class="level4">
<h4>Answer 2 (score 113)</h4>
<p>I like this very simple definition: (<a href="http://www.cs.uofs.edu/~mccloske/courses/cmps144/invariants_lec.html" rel="noreferrer">source</a>)</p>
<blockquote>
A loop invariant is a condition [among program variables] that is necessarily true immediately before and immediately after each iteration of a loop. (Note that this says nothing about its truth or falsity part way through an iteration.)
</blockquote>
<p>By itself, a loop invariant doesn’t do much. However, given an appropriate invariant, it can be used to help prove the correctness of an algorithm. The simple example in CLRS probably has to do with sorting. For example, let your loop invariant be something like, at the start of the loop, the first <code>i</code> entries of this array are sorted. If you can prove that this is indeed a loop invariant (i.e. that it holds before and after every loop iteration), you can use this to prove the correctness of a sorting algorithm: at the termination of the loop, the loop invariant is still satisfied, and the counter <code>i</code> is the length of the array. Therefore, the first <code>i</code> entries are sorted means the entire array is sorted.</p>
<p>An even simpler example: <a href="http://archives.evergreen.edu/webpages/curricular/2001-2002/dsa01/loops.html" rel="noreferrer">Loops Invariants, Correctness, and Program Derivation</a>.</p>
<p>The way I understand a loop invariant is as a systematic, formal tool to reason about programs. We make a single statement that we focus on proving true, and we call it the loop invariant. This organizes our logic. While we can just as well argue informally about the correctness of some algorithm, using a loop invariant forces us to think very carefully and ensures our reasoning is airtight.</p>
</section>
<section id="answer-3-score-36" class="level4">
<h4>Answer 3 (score 36)</h4>
<p>There is one thing that many people don’t realize right away when dealing with loops and invariants. They get confused between the loop invariant, and the loop conditional ( the condition which controls termination of the loop ).</p>
<p>As people point out, the loop invariant must be true</p>
<ol>
<li>
before the loop starts
</li>
<li>
before each iteration of the loop
</li>
<li>
after the loop terminates
</li>
</ol>
<p>( although it can temporarily be false during the body of the loop ). <em>On the other hand the loop conditional</em> <strong>must</strong> be false after the loop terminates, otherwise the loop would never terminate.</p>
<p>Thus the loop invariant and the loop conditional <strong>must</strong> be different conditions.</p>
<p>A good example of a complex loop invariant is for binary search.</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true"></a>bsearch(type A[], type a) {</span>
<span id="cb443-2"><a href="#cb443-2" aria-hidden="true"></a>start = <span class="dv">1</span>, end = length(A)</span>
<span id="cb443-3"><a href="#cb443-3" aria-hidden="true"></a></span>
<span id="cb443-4"><a href="#cb443-4" aria-hidden="true"></a>    <span class="cf">while</span> ( start &lt;= end ) {</span>
<span id="cb443-5"><a href="#cb443-5" aria-hidden="true"></a>        mid = floor(start + end / <span class="dv">2</span>)</span>
<span id="cb443-6"><a href="#cb443-6" aria-hidden="true"></a></span>
<span id="cb443-7"><a href="#cb443-7" aria-hidden="true"></a>        <span class="cf">if</span> ( A[mid] == a ) <span class="cf">return</span> mid</span>
<span id="cb443-8"><a href="#cb443-8" aria-hidden="true"></a>        <span class="cf">if</span> ( A[mid] &gt; a ) end = mid - <span class="dv">1</span></span>
<span id="cb443-9"><a href="#cb443-9" aria-hidden="true"></a>        <span class="cf">if</span> ( A[mid] &lt; a ) start = mid + <span class="dv">1</span></span>
<span id="cb443-10"><a href="#cb443-10" aria-hidden="true"></a></span>
<span id="cb443-11"><a href="#cb443-11" aria-hidden="true"></a>    }</span>
<span id="cb443-12"><a href="#cb443-12" aria-hidden="true"></a>    <span class="cf">return</span> -<span class="dv">1</span></span>
<span id="cb443-13"><a href="#cb443-13" aria-hidden="true"></a></span>
<span id="cb443-14"><a href="#cb443-14" aria-hidden="true"></a>}</span></code></pre></div>
<p>So the loop conditional <em>seems</em> pretty straight forward - when start &gt; end the loop terminates. But why is the loop correct? What is the loop invariant which proves it’s correctness?</p>
<p>The invariant is the logical statement:</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb444-1"><a href="#cb444-1" aria-hidden="true"></a><span class="cf">if</span> ( A[mid] == a ) then ( start &lt;= mid &lt;= end )</span></code></pre></div>
<p>This statement is a logical tautology - it is always true <em>in the context of the specific loop / algorithm we are trying to prove</em>. And it provides useful information about the correctness of the loop after it terminates.</p>
<p>If we return because we found the element in the array then the statement is clearly true, since if <code>A[mid] == a</code> then <code>a</code> is in the array and <code>mid</code> must be between start and end. And if the loop terminates because <code>start &amp;gt; end</code> then there can be no number such that <code>start &amp;lt;= mid</code> <strong>and</strong> <code>mid &amp;lt;= end</code> and therefore we know that the statement <code>A[mid] == a</code> must be false. However, as a result the overall logical statement is still true in the null sense. ( In logic the statement if ( false ) then ( something ) is always true. )</p>
<p>Now what about what I said about the loop conditional necessarily being false when the loop terminates? It looks like when the element is found in the array then the loop conditional is true when the loop terminates!? It’s actually not, because the implied loop conditional is really <code>while ( A[mid] != a &amp;amp;&amp;amp; start &amp;lt;= end )</code> but we shorten the actual test since the first part is implied. This conditional is clearly false after the loop regardless of how the loop terminates.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-stability-in-sorting-algorithms-and-why-is-it-important-score-154663-in-2017" class="level3">
<h3>92: What is stability in sorting algorithms and why is it important? (score <a href="https://stackoverflow.com/q/1517793.html">154663</a> in 2017)</h3>
<section id="question-91" class="level4">
<h4>Question</h4>
<p>I’m very curious, why stability is or is not important in sorting algorithms?</p>
</section>
<section id="answer-accepted-score-297" class="level4">
<h4>Answer accepted (score 297)</h4>
<p>A sorting algorithm is said to be <strong>stable</strong> if two objects with equal keys appear in the same order in sorted output as they appear in the input array to be sorted. Some sorting algorithms are stable by nature like Insertion sort, Merge Sort, Bubble Sort, etc. And some sorting algorithms are not, like Heap Sort, Quick Sort, etc.</p>
<p><em>Background</em>: a “stable” sorting algorithm keeps the items with the same sorting key in order. Suppose we have a list of 5-letter words:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true"></a>peach</span>
<span id="cb445-2"><a href="#cb445-2" aria-hidden="true"></a>straw</span>
<span id="cb445-3"><a href="#cb445-3" aria-hidden="true"></a>apple</span>
<span id="cb445-4"><a href="#cb445-4" aria-hidden="true"></a>spork</span></code></pre></div>
<p>If we sort the list by just the first letter of each word then a stable-sort would produce:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb446-1"><a href="#cb446-1" aria-hidden="true"></a>apple</span>
<span id="cb446-2"><a href="#cb446-2" aria-hidden="true"></a>peach</span>
<span id="cb446-3"><a href="#cb446-3" aria-hidden="true"></a>straw</span>
<span id="cb446-4"><a href="#cb446-4" aria-hidden="true"></a>spork</span></code></pre></div>
<p>In an <strong>unstable</strong> sort algorithm, <code>straw</code> or <code>spork</code> may be interchanged, but in a stable one, they stay in the same relative positions (that is, since <code>straw</code> appears before <code>spork</code> in the input, it also appears before <code>spork</code> in the output).</p>
<p>
We could sort the list of words using this algorithm: stable sorting by column 5, then 4, then 3, then 2, then 1. In the end, it will be correctly sorted. Convince yourself of that. (by the way, that algorithm is called radix sort)
</p>
<p>Now to answer your question, suppose we have a list of first and last names. We are asked to sort “by last name, then by first”. We could first sort (stable or unstable) by the first name, then stable sort by the last name. After these sorts, the list is primarily sorted by the last name. However, where last names are the same, the first names are sorted.</p>
<p>You can’t stack unstable sorts in the same fashion.</p>
</section>
<section id="answer-2-score-41" class="level4">
<h4>Answer 2 (score 41)</h4>
<p><em>A stable sorting algorithm</em> is the one that sorts the identical elements in their same order as they appears in the input, whilst unstable sorting <em>may not</em> satisfy the case.</p>
<p>Stable Sorting Algorithms:</p>
<ul>
<li>
Insertion Sort
</li>
<li>
Merge Sort
</li>
<li>
Bubble Sort
</li>
<li>
Tim Sort
</li>
<li>
Counting Sort
</li>
</ul>
<p>Unstable Sorting Algorithms:</p>
<ul>
<li>
Heap Sort
</li>
<li>
Selection sort
</li>
<li>
Shell sort
</li>
<li>
Quick Sort
</li>
</ul>
<p><a href="https://i.stack.imgur.com/alljt.png" rel="noreferrer"><img src="https://i.stack.imgur.com/alljt.png" alt="enter image description here"></a></p>
</section>
<section id="answer-3-score-18-2" class="level4">
<h4>Answer 3 (score 18)</h4>
<p>Sorting stability means that records with the same key retain their relative order before and after the sort.</p>
<p>So stability matters if, and only if, the problem you’re solving requires retention of that relative order.</p>
<p>If you don’t need stability, you can use a fast, memory-sipping algorithm from a library, like heapsort or quicksort, and forget about it.</p>
<p>If you need stability, it’s more complicated. Stable algorithms have higher big-O CPU and/or memory usage than unstable algorithms. So when you have a large data set, you have to pick between beating up the CPU or the memory. If you’re constrained on both CPU and memory, you have a problem. A good compromise stable algorithm is a binary tree sort; the <a href="http://en.wikipedia.org/wiki/Binary_tree_sort" rel="noreferrer">Wikipedia article</a> has a pathetically easy C++ implementation based on the STL.</p>
<p>You can make an unstable algorithm into a stable one by adding the original record number as the last-place key for each record.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="find-running-median-from-a-stream-of-integers-score-149481-in-2017" class="level3">
<h3>93: Find running median from a stream of integers (score <a href="https://stackoverflow.com/q/10657503.html">149481</a> in 2017)</h3>
<section id="question-92" class="level4">
<h4>Question</h4>
<blockquote>
<p>
<strong>Possible Duplicate:</strong><br> <a href="https://stackoverflow.com/questions/1309263/rolling-median-algorithm-in-c">Rolling median algorithm in C</a>
</p>
</blockquote>
<blockquote>
Given that integers are read from a data stream. Find median of elements read so far in efficient way.
</blockquote>
<p>Solution I have read: We can use a max heap on left side to represent elements that are less than the effective median, and a min heap on right side to represent elements that are greater than the effective median.</p>
<p>After processing an incoming element, the number of elements in heaps differ at most by 1 element. When both heaps contain the same number of elements, we find the average of heap’s root data as effective median. When the heaps are not balanced, we select the effective median from the root of heap containing more elements.</p>
<p>But how would we construct a max heap and min heap i.e. how would we know the effective median here? I think that we would insert 1 element in max-heap and then the next 1 element in min-heap, and so on for all the elements. Correct me If I am wrong here.</p>
</section>
<section id="answer-accepted-score-374" class="level4">
<h4>Answer accepted (score 374)</h4>
<p>There are a number of different solutions for finding running median from streamed data, I will briefly talk about them at the very end of the answer.</p>
<p>The question is about the details of the a specific solution (max heap/min heap solution), and how heap based solution works is explained below:</p>
<p>For the first two elements add smaller one to the maxHeap on the left, and bigger one to the minHeap on the right. Then process stream data one by one,</p>
<div class="sourceCode" id="cb447"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true"></a>Step <span class="dv">1</span>: Add next item to one of the heaps</span>
<span id="cb447-2"><a href="#cb447-2" aria-hidden="true"></a></span>
<span id="cb447-3"><a href="#cb447-3" aria-hidden="true"></a>   <span class="cf">if</span> next item is smaller than maxHeap root add it to maxHeap,</span>
<span id="cb447-4"><a href="#cb447-4" aria-hidden="true"></a>   <span class="cf">else</span> add it to minHeap</span>
<span id="cb447-5"><a href="#cb447-5" aria-hidden="true"></a></span>
<span id="cb447-6"><a href="#cb447-6" aria-hidden="true"></a>Step <span class="dv">2</span>: Balance the heaps (after this step heaps will be either balanced or</span>
<span id="cb447-7"><a href="#cb447-7" aria-hidden="true"></a>   one of them will contain <span class="dv">1</span> more item)</span>
<span id="cb447-8"><a href="#cb447-8" aria-hidden="true"></a></span>
<span id="cb447-9"><a href="#cb447-9" aria-hidden="true"></a>   <span class="cf">if</span> number of elements in one of the heaps is greater than the other by</span>
<span id="cb447-10"><a href="#cb447-10" aria-hidden="true"></a>   more than <span class="dv">1</span>, remove the root element from the one containing more elements and</span>
<span id="cb447-11"><a href="#cb447-11" aria-hidden="true"></a>   add to the other one</span></code></pre></div>
<p>Then at any given time you can calculate median like this:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true"></a>   If the heaps contain equal amount of elements;</span>
<span id="cb448-2"><a href="#cb448-2" aria-hidden="true"></a>     median = (root of maxHeap + root of minHeap)/<span class="dv">2</span></span>
<span id="cb448-3"><a href="#cb448-3" aria-hidden="true"></a>   Else</span>
<span id="cb448-4"><a href="#cb448-4" aria-hidden="true"></a>     median = root of the heap with more elements</span></code></pre></div>
<p>Now I will talk about the problem in general as promised in the beginning of the answer. Finding running median from a stream of data is a tough problem, and finding an <strong>exact solution</strong> with memory constraints efficiently is probably impossible for the general case. On the other hand, if the data has some characteristics we can exploit, we can develop efficient specialized solutions. For example, if we know that the data is an integral type, then we can use <a href="http://en.wikipedia.org/wiki/Counting_sort" rel="noreferrer">counting sort</a>, which can give you a constant memory constant time algorithm. Heap based solution is a more general solution because it can be used for other data types (doubles) as well. And finally, if the exact median is not required and an approximation is enough, you can just try to estimate a probability density function for the data and estimate median using that.</p>
</section>
<section id="answer-2-score-50" class="level4">
<h4>Answer 2 (score 50)</h4>
<p>If you can’t hold all the items in memory at once, this problem becomes much harder. The heap solution requires you to hold all the elements in memory at once. This is not possible in most real world applications of this problem.</p>
<p>Instead, as you see numbers, keep track of the <em>count</em> of the number of times you see each integer. Assuming 4 byte integers, that’s 2^32 buckets, or at most 2^33 integers (key and count for each int), which is 2^35 bytes or 32GB. It will likely be much less than this because you don’t need to store the key or count for those entries that are 0 (ie. like a defaultdict in python). This takes constant time to insert each new integer.</p>
<p>Then at any point, to find the median, just use the counts to determine which integer is the middle element. This takes constant time (albeit a large constant, but constant nonetheless).</p>
</section>
<section id="answer-3-score-46-1" class="level4">
<h4>Answer 3 (score 46)</h4>
<p>If the variance of the input is statistically distributed (e.g. normal , log-normal … etc) then reservoir sampling is a reasonable way of estimating percentiles/medians from an arbitrarily long stream of numbers.</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb449-1"><a href="#cb449-1" aria-hidden="true"></a><span class="dt">int</span> n = <span class="dv">0</span>;  <span class="co">// Running count of elements observed so far  </span></span>
<span id="cb449-2"><a href="#cb449-2" aria-hidden="true"></a></span>
<span id="cb449-3"><a href="#cb449-3" aria-hidden="true"></a><span class="pp">#define SIZE 10000</span></span>
<span id="cb449-4"><a href="#cb449-4" aria-hidden="true"></a><span class="dt">int</span> reservoir[SIZE];  </span>
<span id="cb449-5"><a href="#cb449-5" aria-hidden="true"></a></span>
<span id="cb449-6"><a href="#cb449-6" aria-hidden="true"></a><span class="cf">while</span>(streamHasData())</span>
<span id="cb449-7"><a href="#cb449-7" aria-hidden="true"></a>{</span>
<span id="cb449-8"><a href="#cb449-8" aria-hidden="true"></a>  <span class="dt">int</span> x = readNumberFromStream();</span>
<span id="cb449-9"><a href="#cb449-9" aria-hidden="true"></a></span>
<span id="cb449-10"><a href="#cb449-10" aria-hidden="true"></a>  <span class="cf">if</span> (n &lt; SIZE)</span>
<span id="cb449-11"><a href="#cb449-11" aria-hidden="true"></a>  {</span>
<span id="cb449-12"><a href="#cb449-12" aria-hidden="true"></a>       reservoir[n++] = x;</span>
<span id="cb449-13"><a href="#cb449-13" aria-hidden="true"></a>  }         </span>
<span id="cb449-14"><a href="#cb449-14" aria-hidden="true"></a>  <span class="cf">else</span> </span>
<span id="cb449-15"><a href="#cb449-15" aria-hidden="true"></a>  {</span>
<span id="cb449-16"><a href="#cb449-16" aria-hidden="true"></a>      <span class="dt">int</span> p = random(++n); <span class="co">// Choose a random number 0 &gt;= p &lt; n</span></span>
<span id="cb449-17"><a href="#cb449-17" aria-hidden="true"></a>      <span class="cf">if</span> (p &lt; SIZE)</span>
<span id="cb449-18"><a href="#cb449-18" aria-hidden="true"></a>      {</span>
<span id="cb449-19"><a href="#cb449-19" aria-hidden="true"></a>           reservoir[p] = x;</span>
<span id="cb449-20"><a href="#cb449-20" aria-hidden="true"></a>      }</span>
<span id="cb449-21"><a href="#cb449-21" aria-hidden="true"></a>  }</span>
<span id="cb449-22"><a href="#cb449-22" aria-hidden="true"></a>}</span></code></pre></div>
<p>“reservoir” is then a running, uniform (fair), sample of all input - regardless of size. Finding the median (or any percentile) is then a straight-forward matter of sorting the reservoir and polling the interesting point.</p>
<p>Since the reservoir is fixed size, the sort can be considered to be effectively O(1) - and this method runs with both constant time and memory consumption.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="swap-two-variables-without-using-a-temporary-variable-score-147942-in-2016" class="level3">
<h3>94: Swap two variables without using a temporary variable (score <a href="https://stackoverflow.com/q/804706.html">147942</a> in 2016)</h3>
<section id="question-93" class="level4">
<h4>Question</h4>
<p>I’d like to be able to swap two variables without the use of a temporary variable in C #. Can this be done?</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true"></a>decimal startAngle = Convert.ToDecimal(<span class="fl">159.9</span>);</span>
<span id="cb450-2"><a href="#cb450-2" aria-hidden="true"></a>decimal stopAngle = Convert.ToDecimal(<span class="fl">355.87</span>);</span>
<span id="cb450-3"><a href="#cb450-3" aria-hidden="true"></a></span>
<span id="cb450-4"><a href="#cb450-4" aria-hidden="true"></a><span class="co">// Swap each:</span></span>
<span id="cb450-5"><a href="#cb450-5" aria-hidden="true"></a><span class="co">//   startAngle becomes: 355.87</span></span>
<span id="cb450-6"><a href="#cb450-6" aria-hidden="true"></a><span class="co">//   stopAngle becomes: 159.9</span></span></code></pre></div>
</section>
<section id="answer-accepted-score-111" class="level4">
<h4>Answer accepted (score 111)</h4>
<p>First of all, swapping without a temporary variable in a language as C # is a <strong>very bad idea</strong>.</p>
<p>But for the sake of answer, you can use this code:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true"></a>startAngle = startAngle + stopAngle;</span>
<span id="cb451-2"><a href="#cb451-2" aria-hidden="true"></a>stopAngle = startAngle - stopAngle;</span>
<span id="cb451-3"><a href="#cb451-3" aria-hidden="true"></a>startAngle = startAngle - stopAngle;</span></code></pre></div>
<p>Problems can however occur with rounding off if the two numbers differ largely. This is due to the nature of floating point numbers.</p>
<p>If you want to hide the temporary variable, you can use a utility method:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true"></a>public <span class="dt">static</span> class Foo {</span>
<span id="cb452-2"><a href="#cb452-2" aria-hidden="true"></a></span>
<span id="cb452-3"><a href="#cb452-3" aria-hidden="true"></a>    public <span class="dt">static</span> <span class="dt">void</span> Swap&lt;T&gt; (ref T lhs, ref T rhs) {</span>
<span id="cb452-4"><a href="#cb452-4" aria-hidden="true"></a>        T temp = lhs;</span>
<span id="cb452-5"><a href="#cb452-5" aria-hidden="true"></a>        lhs = rhs;</span>
<span id="cb452-6"><a href="#cb452-6" aria-hidden="true"></a>        rhs = temp;</span>
<span id="cb452-7"><a href="#cb452-7" aria-hidden="true"></a>    }</span>
<span id="cb452-8"><a href="#cb452-8" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-2-score-214" class="level4">
<h4>Answer 2 (score 214)</h4>
<p>The <em>right</em> way to swap two variables is:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true"></a>decimal tempDecimal = startAngle;</span>
<span id="cb453-2"><a href="#cb453-2" aria-hidden="true"></a>startAngle = stopAngle;</span>
<span id="cb453-3"><a href="#cb453-3" aria-hidden="true"></a>stopAngle = tempDecimal;</span></code></pre></div>
<p>In other words, <em>use a temporary variable.</em></p>
<p>There you have it. No clever tricks, no maintainers of your code cursing you for decades to come, no entries to <a href="http://thedailywtf.com/" rel="noreferrer">The Daily WTF</a>, and no spending too much time trying to figure out why you needed it in one operation anyway since, at the lowest level, even the most complicated language feature is a series of simple operations.</p>
<p>Just a very simple, readable, easy to understand, <code>t = a; a = b; b = t;</code> solution.</p>
<p>In my opinion, developers who try to use tricks to, for example, “swap variables without using a temp” or “Duff’s device” are just trying to show how clever they are (and failing miserably).</p>
<p>I liken them to those who read highbrow books solely for the purpose of seeming more interesting at parties (as opposed to expanding your horizons).</p>
<p>Solutions where you add and subtract, or the XOR-based ones, are less readable and most likely slower than a simple “temp variable” solution (arithmetic/boolean-ops instead of plain moves at an assembly level).</p>
<p>Do yourself, and others, a service by writing good quality readable code.</p>
<p>That’s my rant. Thanks for listening :-)</p>
<p>As an aside, I’m quite aware this doesn’t answer your specific question (and I’ll apologise for that) but there’s plenty of precedent on SO where people have asked how to do something and the correct answer is “Don’t do it”.</p>
</section>
<section id="answer-3-score-82" class="level4">
<h4>Answer 3 (score 82)</h4>
<p><a href="https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-7
#tuples" rel="noreferrer">C# 7 introduced <strong>tuples</strong></a> which enables swapping two variables without a temporary one:</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true"></a><span class="dt">int</span> a = <span class="dv">10</span>;</span>
<span id="cb454-2"><a href="#cb454-2" aria-hidden="true"></a><span class="dt">int</span> b = <span class="dv">2</span>;</span>
<span id="cb454-3"><a href="#cb454-3" aria-hidden="true"></a>(a, b) = (b, a);</span></code></pre></div>
<p>This assigns <code>b</code> to <code>a</code> and <code>a</code> to <code>b</code>.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-a-good-hash-function-score-146894-in-2012" class="level3">
<h3>95: What is a good Hash Function? (score <a href="https://stackoverflow.com/q/34595.html">146894</a> in 2012)</h3>
<section id="question-94" class="level4">
<h4>Question</h4>
<p>What is a good Hash function? I saw a lot of hash function and applications in my data structures courses in college, but I mostly got that it’s pretty hard to make a good hash function. As a rule of thumb to avoid collisions my professor said that:</p>
<div class="sourceCode" id="cb455"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true"></a>function Hash(key)</span>
<span id="cb455-2"><a href="#cb455-2" aria-hidden="true"></a>  <span class="cf">return</span> key mod PrimeNumber</span>
<span id="cb455-3"><a href="#cb455-3" aria-hidden="true"></a>end</span></code></pre></div>
<p>(mod is the % operator in C and similar languages)</p>
<p>with the prime number to be the size of the hash table. I get that is a somewhat good function to avoid collisions and a fast one, but how can I make a better one? Is there better hash functions for string keys against numeric keys?</p>
</section>
<section id="answer-accepted-score-32" class="level4">
<h4>Answer accepted (score 32)</h4>
<p>For doing “normal” hash table lookups on basically any kind of data - this one by Paul Hsieh is the best I’ve ever used.</p>
<p><a href="http://www.azillionmonkeys.com/qed/hash.html" rel="noreferrer">http://www.azillionmonkeys.com/qed/hash.html</a></p>
<p>If you care about cryptographically secure or anything else more advanced, then YMMV. If you just want a kick ass general purpose hash function for a hash table lookup, then this is what you’re looking for.</p>
</section>
<section id="answer-2-score-51-2" class="level4">
<h4>Answer 2 (score 51)</h4>
<p>There’s no such thing as a “good hash function” for universal hashes (ed. yes, I know there’s such a thing as “universal hashing” but that’s not what I meant). Depending on the context different criteria determine the quality of a hash. Two people already mentioned SHA. This is a cryptographic hash and it isn’t at all good for hash tables which you probably mean.</p>
<p>Hash tables have very different requirements. But still, finding a good hash function universally is hard because different data types expose different information that can be hashed. As a rule of thumb it is good to consider <em>all</em> information a type holds equally. This is not always easy or even possible. For reasons of statistics (and hence collision), it is also important to generate a good spread over the problem space, i.e. all possible objects. This means that when hashing numbers between 100 and 1050 it’s no good to let the most significant digit play a big part in the hash because for ~ 90% of the objects, this digit will be 0. It’s far more important to let the last three digits determine the hash.</p>
<p>Similarly, when hashing strings it’s important to consider all characters – except when it’s known in advance that the first three characters of all strings will be the same; considering these then is a waste.</p>
<p>This is actually one of the cases where I advise to read what Knuth has to say in <em>The Art of Computer Programming</em>, vol. 3. Another good read is Julienne Walker’s <a href="http://eternallyconfuzzled.com/tuts/algorithms/jsw_tut_hashing.aspx" rel="noreferrer">The Art of Hashing</a>.</p>
</section>
<section id="answer-3-score-9-2" class="level4">
<h4>Answer 3 (score 9)</h4>
<p>There are two major purposes of hashing functions:</p>
<ul>
<li>
to disperse data points uniformly into n bits.
</li>
<li>
to securely identify the input data.
</li>
</ul>
<p>It’s impossible to recommend a hash without knowing what you’re using it for.</p>
<p>If you’re just making a hash table in a program, then you don’t need to worry about how reversible or hackable the algorithm is… SHA-1 or AES is completely unnecessary for this, you’d be better off using a <a href="http://isthe.com/chongo/tech/comp/fnv/" rel="nofollow noreferrer">variation of FNV</a>. FNV achieves better dispersion (and thus fewer collisions) than a simple prime mod like you mentioned, and it’s more adaptable to varying input sizes.</p>
<p>If you’re using the hashes to hide and authenticate public information (such as hashing a password, or a document), then you should use one of the major hashing algorithms vetted by public scrutiny. <a href="http://www.larc.usp.br/~pbarreto/hflounge.html" rel="nofollow noreferrer">The Hash Function Lounge</a> is a good place to start.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-is-tail-call-optimization-score-145617-in-2014" class="level3">
<h3>96: What Is Tail Call Optimization? (score <a href="https://stackoverflow.com/q/310974.html">145617</a> in 2014)</h3>
<section id="question-95" class="level4">
<h4>Question</h4>
<p>Very simply, what is tail-call optimization? More specifically, Can anyone show some small code snippets where it could be applied, and where not, with an explanation of why?</p>
</section>
<section id="answer-accepted-score-705" class="level4">
<h4>Answer accepted (score 705)</h4>
<p>Tail-call optimization is where you are able to avoid allocating a new stack frame for a function because the calling function will simply return the value that it gets from the called function. The most common use is tail-recursion, where a recursive function written to take advantage of tail-call optimization can use constant stack space.</p>
<p>Scheme is one of the few programming languages that guarantee in the spec that any implementation must provide this optimization <em>(JavaScript does also, starting with ES6)</em>, so here are two examples of the factorial function in Scheme:</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true"></a>(define (fact x)</span>
<span id="cb456-2"><a href="#cb456-2" aria-hidden="true"></a>  (<span class="cf">if</span> (= x <span class="dv">0</span>) <span class="dv">1</span></span>
<span id="cb456-3"><a href="#cb456-3" aria-hidden="true"></a>      (* x (fact (- x <span class="dv">1</span>)))))</span>
<span id="cb456-4"><a href="#cb456-4" aria-hidden="true"></a></span>
<span id="cb456-5"><a href="#cb456-5" aria-hidden="true"></a>(define (fact x)</span>
<span id="cb456-6"><a href="#cb456-6" aria-hidden="true"></a>  (define (fact-tail x accum)</span>
<span id="cb456-7"><a href="#cb456-7" aria-hidden="true"></a>    (<span class="cf">if</span> (= x <span class="dv">0</span>) accum</span>
<span id="cb456-8"><a href="#cb456-8" aria-hidden="true"></a>        (fact-tail (- x <span class="dv">1</span>) (* x accum))))</span>
<span id="cb456-9"><a href="#cb456-9" aria-hidden="true"></a>  (fact-tail x <span class="dv">1</span>))</span></code></pre></div>
<p>The first function is not tail recursive because when the recursive call is made, the function needs to keep track of the multiplication it needs to do with the result after the call returns. As such, the stack looks as follows:</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb457-1"><a href="#cb457-1" aria-hidden="true"></a>(fact <span class="dv">3</span>)</span>
<span id="cb457-2"><a href="#cb457-2" aria-hidden="true"></a>(* <span class="dv">3</span> (fact <span class="dv">2</span>))</span>
<span id="cb457-3"><a href="#cb457-3" aria-hidden="true"></a>(* <span class="dv">3</span> (* <span class="dv">2</span> (fact <span class="dv">1</span>)))</span>
<span id="cb457-4"><a href="#cb457-4" aria-hidden="true"></a>(* <span class="dv">3</span> (* <span class="dv">2</span> (* <span class="dv">1</span> (fact <span class="dv">0</span>))))</span>
<span id="cb457-5"><a href="#cb457-5" aria-hidden="true"></a>(* <span class="dv">3</span> (* <span class="dv">2</span> (* <span class="dv">1</span> <span class="dv">1</span>)))</span>
<span id="cb457-6"><a href="#cb457-6" aria-hidden="true"></a>(* <span class="dv">3</span> (* <span class="dv">2</span> <span class="dv">1</span>))</span>
<span id="cb457-7"><a href="#cb457-7" aria-hidden="true"></a>(* <span class="dv">3</span> <span class="dv">2</span>)</span>
<span id="cb457-8"><a href="#cb457-8" aria-hidden="true"></a><span class="dv">6</span></span></code></pre></div>
<p>In contrast, the stack trace for the tail recursive factorial looks as follows:</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true"></a>(fact <span class="dv">3</span>)</span>
<span id="cb458-2"><a href="#cb458-2" aria-hidden="true"></a>(fact-tail <span class="dv">3</span> <span class="dv">1</span>)</span>
<span id="cb458-3"><a href="#cb458-3" aria-hidden="true"></a>(fact-tail <span class="dv">2</span> <span class="dv">3</span>)</span>
<span id="cb458-4"><a href="#cb458-4" aria-hidden="true"></a>(fact-tail <span class="dv">1</span> <span class="dv">6</span>)</span>
<span id="cb458-5"><a href="#cb458-5" aria-hidden="true"></a>(fact-tail <span class="dv">0</span> <span class="dv">6</span>)</span>
<span id="cb458-6"><a href="#cb458-6" aria-hidden="true"></a><span class="dv">6</span></span></code></pre></div>
<p>As you can see, we only need to keep track of the same amount of data for every call to fact-tail because we are simply returning the value we get right through to the top. This means that even if I were to call (fact 1000000), I need only the same amount of space as (fact 3). This is not the case with the non-tail-recursive fact, and as such large values may cause a stack overflow.</p>
</section>
<section id="answer-2-score-524" class="level4">
<h4>Answer 2 (score 524)</h4>
<p>Let’s walk through a simple example: the factorial function implemented in C.</p>
<p>We start with the obvious recursive definition</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb459-1"><a href="#cb459-1" aria-hidden="true"></a><span class="dt">unsigned</span> fac(<span class="dt">unsigned</span> n)</span>
<span id="cb459-2"><a href="#cb459-2" aria-hidden="true"></a>{</span>
<span id="cb459-3"><a href="#cb459-3" aria-hidden="true"></a>    <span class="cf">if</span> (n &lt; <span class="dv">2</span>) <span class="cf">return</span> <span class="dv">1</span>;</span>
<span id="cb459-4"><a href="#cb459-4" aria-hidden="true"></a>    <span class="cf">return</span> n * fac(n - <span class="dv">1</span>);</span>
<span id="cb459-5"><a href="#cb459-5" aria-hidden="true"></a>}</span></code></pre></div>
<p>A function ends with a tail call if the last operation before the function returns is another function call. If this call invokes the same function, it is tail-recursive.</p>
<p>Even though <code>fac()</code> looks tail-recursive at first glance, it is not as what actually happens is</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true"></a><span class="dt">unsigned</span> fac(<span class="dt">unsigned</span> n)</span>
<span id="cb460-2"><a href="#cb460-2" aria-hidden="true"></a>{</span>
<span id="cb460-3"><a href="#cb460-3" aria-hidden="true"></a>    <span class="cf">if</span> (n &lt; <span class="dv">2</span>) <span class="cf">return</span> <span class="dv">1</span>;</span>
<span id="cb460-4"><a href="#cb460-4" aria-hidden="true"></a>    <span class="dt">unsigned</span> acc = fac(n - <span class="dv">1</span>);</span>
<span id="cb460-5"><a href="#cb460-5" aria-hidden="true"></a>    <span class="cf">return</span> n * acc;</span>
<span id="cb460-6"><a href="#cb460-6" aria-hidden="true"></a>}</span></code></pre></div>
<p>ie the last operation is the multiplication and not the function call.</p>
<p>However, it’s possible to rewrite <code>fac()</code> to be tail-recursive by passing the accumulated value down the call chain as an additional argument and passing only the final result up again as the return value:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb461-1"><a href="#cb461-1" aria-hidden="true"></a><span class="dt">unsigned</span> fac(<span class="dt">unsigned</span> n)</span>
<span id="cb461-2"><a href="#cb461-2" aria-hidden="true"></a>{</span>
<span id="cb461-3"><a href="#cb461-3" aria-hidden="true"></a>    <span class="cf">return</span> fac_tailrec(<span class="dv">1</span>, n);</span>
<span id="cb461-4"><a href="#cb461-4" aria-hidden="true"></a>}</span>
<span id="cb461-5"><a href="#cb461-5" aria-hidden="true"></a></span>
<span id="cb461-6"><a href="#cb461-6" aria-hidden="true"></a><span class="dt">unsigned</span> fac_tailrec(<span class="dt">unsigned</span> acc, <span class="dt">unsigned</span> n)</span>
<span id="cb461-7"><a href="#cb461-7" aria-hidden="true"></a>{</span>
<span id="cb461-8"><a href="#cb461-8" aria-hidden="true"></a>    <span class="cf">if</span> (n &lt; <span class="dv">2</span>) <span class="cf">return</span> acc;</span>
<span id="cb461-9"><a href="#cb461-9" aria-hidden="true"></a>    <span class="cf">return</span> fac_tailrec(n * acc, n - <span class="dv">1</span>);</span>
<span id="cb461-10"><a href="#cb461-10" aria-hidden="true"></a>}</span></code></pre></div>
<p>Now, why is this useful? Because we immediately return after the tail call, we can discard the previous stackframe before invoking the function in tail position, or, in case of recursive functions, reuse the stackframe as-is.</p>
<p>The tail-call optimization transforms our recursive code into</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true"></a><span class="dt">unsigned</span> fac_tailrec(<span class="dt">unsigned</span> acc, <span class="dt">unsigned</span> n)</span>
<span id="cb462-2"><a href="#cb462-2" aria-hidden="true"></a>{</span>
<span id="cb462-3"><a href="#cb462-3" aria-hidden="true"></a>TOP:</span>
<span id="cb462-4"><a href="#cb462-4" aria-hidden="true"></a>    <span class="cf">if</span> (n &lt; <span class="dv">2</span>) <span class="cf">return</span> acc;</span>
<span id="cb462-5"><a href="#cb462-5" aria-hidden="true"></a>    acc = n * acc;</span>
<span id="cb462-6"><a href="#cb462-6" aria-hidden="true"></a>    n = n - <span class="dv">1</span>;</span>
<span id="cb462-7"><a href="#cb462-7" aria-hidden="true"></a>    <span class="cf">goto</span> TOP;</span>
<span id="cb462-8"><a href="#cb462-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>This can be inlined into <code>fac()</code> and we arrive at</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb463-1"><a href="#cb463-1" aria-hidden="true"></a><span class="dt">unsigned</span> fac(<span class="dt">unsigned</span> n)</span>
<span id="cb463-2"><a href="#cb463-2" aria-hidden="true"></a>{</span>
<span id="cb463-3"><a href="#cb463-3" aria-hidden="true"></a>    <span class="dt">unsigned</span> acc = <span class="dv">1</span>;</span>
<span id="cb463-4"><a href="#cb463-4" aria-hidden="true"></a></span>
<span id="cb463-5"><a href="#cb463-5" aria-hidden="true"></a>TOP:</span>
<span id="cb463-6"><a href="#cb463-6" aria-hidden="true"></a>    <span class="cf">if</span> (n &lt; <span class="dv">2</span>) <span class="cf">return</span> acc;</span>
<span id="cb463-7"><a href="#cb463-7" aria-hidden="true"></a>    acc = n * acc;</span>
<span id="cb463-8"><a href="#cb463-8" aria-hidden="true"></a>    n = n - <span class="dv">1</span>;</span>
<span id="cb463-9"><a href="#cb463-9" aria-hidden="true"></a>    <span class="cf">goto</span> TOP;</span>
<span id="cb463-10"><a href="#cb463-10" aria-hidden="true"></a>}</span></code></pre></div>
<p>which is equivalent to</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true"></a><span class="dt">unsigned</span> fac(<span class="dt">unsigned</span> n)</span>
<span id="cb464-2"><a href="#cb464-2" aria-hidden="true"></a>{</span>
<span id="cb464-3"><a href="#cb464-3" aria-hidden="true"></a>    <span class="dt">unsigned</span> acc = <span class="dv">1</span>;</span>
<span id="cb464-4"><a href="#cb464-4" aria-hidden="true"></a></span>
<span id="cb464-5"><a href="#cb464-5" aria-hidden="true"></a>    <span class="cf">for</span> (; n &gt; <span class="dv">1</span>; --n)</span>
<span id="cb464-6"><a href="#cb464-6" aria-hidden="true"></a>        acc *= n;</span>
<span id="cb464-7"><a href="#cb464-7" aria-hidden="true"></a></span>
<span id="cb464-8"><a href="#cb464-8" aria-hidden="true"></a>    <span class="cf">return</span> acc;</span>
<span id="cb464-9"><a href="#cb464-9" aria-hidden="true"></a>}</span></code></pre></div>
<p>As we can see here, a sufficiently advanced optimizer can replace tail-recursion with iteration, which is far more efficient as you avoid function call overhead and only use a constant amount of stack space.</p>
</section>
<section id="answer-3-score-186" class="level4">
<h4>Answer 3 (score 186)</h4>
<p>TCO (Tail Call Optimization) is the process by which a smart compiler can make a call to a function and take no additional stack space. The <em>only situation in which this happens is if the last instruction executed in a function <strong>f</strong> is a call to a function g</em> (Note: <strong>g</strong> can be <strong>f</strong>). The key here is that <strong>f</strong> no longer needs stack space - it simply calls <strong>g</strong> and then returns whatever <strong>g</strong> would return. In this case the optimization can be made that g just runs and returns whatever value it would have to the thing that called f. </p>
<p>This optimization can make recursive calls take constant stack space, rather than explode.</p>
<p>Example: this factorial function is not TCOptimizable:</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb465-1"><a href="#cb465-1" aria-hidden="true"></a>def fact(n):</span>
<span id="cb465-2"><a href="#cb465-2" aria-hidden="true"></a>    <span class="cf">if</span> n == <span class="dv">0</span>:</span>
<span id="cb465-3"><a href="#cb465-3" aria-hidden="true"></a>        <span class="cf">return</span> <span class="dv">1</span></span>
<span id="cb465-4"><a href="#cb465-4" aria-hidden="true"></a>    <span class="cf">return</span> n * fact(n-<span class="dv">1</span>)</span></code></pre></div>
<p>This function does things besides call another function in its return statement.</p>
<p>This below function is TCOptimizable:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true"></a>def fact_h(n, acc):</span>
<span id="cb466-2"><a href="#cb466-2" aria-hidden="true"></a>    <span class="cf">if</span> n == <span class="dv">0</span>:</span>
<span id="cb466-3"><a href="#cb466-3" aria-hidden="true"></a>        <span class="cf">return</span> acc</span>
<span id="cb466-4"><a href="#cb466-4" aria-hidden="true"></a>    <span class="cf">return</span> fact_h(n-<span class="dv">1</span>, acc*n)</span>
<span id="cb466-5"><a href="#cb466-5" aria-hidden="true"></a></span>
<span id="cb466-6"><a href="#cb466-6" aria-hidden="true"></a>def fact(n):</span>
<span id="cb466-7"><a href="#cb466-7" aria-hidden="true"></a>    <span class="cf">return</span> fact_h(n, <span class="dv">1</span>)</span></code></pre></div>
<p>This is because the last thing to happen in any of these functions is to call another function.</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="algorithm-to-calculate-the-number-of-divisors-of-a-given-number-score-143140-in-2014" class="level3">
<h3>97: Algorithm to calculate the number of divisors of a given number (score <a href="https://stackoverflow.com/q/110344.html">143140</a> in 2014)</h3>
<section id="question-96" class="level4">
<h4>Question</h4>
<p>What would be the most optimal algorithm (performance-wise) to calculate the number of divisors of a given number?</p>
<p>It’ll be great if you could provide pseudocode or a link to some example.</p>
<p>EDIT: All the answers have been very helpful, thank you. I’m implementing the Sieve of Atkin and then I’m going to use something similar to what Jonathan Leffler indicated. The link posted by Justin Bozonier has further information on what I wanted.</p>
</section>
<section id="answer-accepted-score-78" class="level4">
<h4>Answer accepted (score 78)</h4>
<p>Dmitriy is right that you’ll want the Sieve of Atkin to generate the prime list but I don’t believe that takes care of the whole issue. Now that you have a list of primes you’ll need to see how many of those primes act as a divisor (and how often).</p>
<p><strike><a href="http://mail.python.org/pipermail/python-list/2005-March/315250.html" rel="noreferrer">Here’s some python for the algo</a></strike> <a href="http://mail.python.org/pipermail/python-list/2005-March.txt" rel="noreferrer">Look here</a> and search for “Subject: math - need divisors algorithm”. Just count the number of items in the list instead of returning them however.</p>
<p><a href="http://mathforum.org/library/drmath/view/55843.html" rel="noreferrer">Here’s a Dr. Math</a> that explains what exactly it is you need to do mathematically.</p>
<p>
Essentially it boils down to if your number <code>n</code> is:<br> <code>n = a^x * b^y * c^z</code><br> (where a, b, and c are n’s prime divisors and x, y, and z are the number of times that divisor is repeated) then the total count for all of the divisors is:<br> <code>(x + 1) * (y + 1) * (z + 1)</code>.
</p>
<p>Edit: BTW, to find a,b,c,etc you’ll want to do what amounts to a greedy algo if I’m understanding this correctly. Start with your largest prime divisor and multiply it by itself until a further multiplication would exceed the number n. Then move to the next lowest factor and times the previous prime ^ number of times it was multiplied by the current prime and keep multiplying by the prime until the next will exceed n… etc. Keep track of the number of times you multiply the divisors together and apply those numbers into the formula above.</p>
<p>Not 100% sure about my algo description but if that isn’t it it’s something similar .</p>
</section>
<section id="answer-2-score-47-2" class="level4">
<h4>Answer 2 (score 47)</h4>
<p>There are a <strong>lot</strong> more techniques to factoring than the sieve of Atkin. For example suppose we want to factor 5893. Well its sqrt is 76.76… Now we’ll try to write 5893 as a product of squares. Well (77<em>77 - 5893) = 36 which is 6 squared, so 5893 = 77</em>77 - 6<em>6 = (77 + 6)(77-6) = 83</em>71. If that hadn’t worked we’d have looked at whether 78*78 - 5893 was a perfect square. And so on. With this technique you can quickly test for factors near the square root of n much faster than by testing individual primes. If you combine this technique for ruling out large primes with a sieve, you will have a much better factoring method than with the sieve alone.</p>
<p>And this is just one of a large number of techniques that have been developed. This is a fairly simple one. It would take you a long time to learn, say, enough number theory to understand the factoring techniques based on elliptic curves. (I know they exist. I don’t understand them.)</p>
<p>Therefore unless you are dealing with small integers, I wouldn’t try to solve that problem myself. Instead I’d try to find a way to use something like the <a href="http://www.cs.sunysb.edu/~algorith/implement/pari/implement.shtml" rel="noreferrer">PARI</a> library that already has a highly efficient solution implemented. With that I can factor a random 40 digit number like 124321342332143213122323434312213424231341 in about .05 seconds. (Its factorization, in case you wondered, is 29<em>439</em>1321<em>157907</em>284749<em>33843676813</em>4857795469949. I am quite confident that it didn’t figure this out using the sieve of Atkin…)</p>
</section>
<section id="answer-3-score-33-1" class="level4">
<h4>Answer 3 (score 33)</h4>
<p><span class="citation" data-cites="Yasky">@Yasky</span></p>
<p>Your divisors function has a bug in that it does not work correctly for perfect squares.</p>
<p>Try:</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb467-1"><a href="#cb467-1" aria-hidden="true"></a><span class="dt">int</span> divisors(<span class="dt">int</span> x) {</span>
<span id="cb467-2"><a href="#cb467-2" aria-hidden="true"></a>    <span class="dt">int</span> limit = x;</span>
<span id="cb467-3"><a href="#cb467-3" aria-hidden="true"></a>    <span class="dt">int</span> numberOfDivisors = <span class="dv">0</span>;</span>
<span id="cb467-4"><a href="#cb467-4" aria-hidden="true"></a></span>
<span id="cb467-5"><a href="#cb467-5" aria-hidden="true"></a>    <span class="cf">if</span> (x == <span class="dv">1</span>) <span class="cf">return</span> <span class="dv">1</span>;</span>
<span id="cb467-6"><a href="#cb467-6" aria-hidden="true"></a></span>
<span id="cb467-7"><a href="#cb467-7" aria-hidden="true"></a>    <span class="cf">for</span> (<span class="dt">int</span> i = <span class="dv">1</span>; i &lt; limit; ++i) {</span>
<span id="cb467-8"><a href="#cb467-8" aria-hidden="true"></a>        <span class="cf">if</span> (x % i == <span class="dv">0</span>) {</span>
<span id="cb467-9"><a href="#cb467-9" aria-hidden="true"></a>            limit = x / i;</span>
<span id="cb467-10"><a href="#cb467-10" aria-hidden="true"></a>            <span class="cf">if</span> (limit != i) {</span>
<span id="cb467-11"><a href="#cb467-11" aria-hidden="true"></a>                numberOfDivisors++;</span>
<span id="cb467-12"><a href="#cb467-12" aria-hidden="true"></a>            }</span>
<span id="cb467-13"><a href="#cb467-13" aria-hidden="true"></a>            numberOfDivisors++;</span>
<span id="cb467-14"><a href="#cb467-14" aria-hidden="true"></a>        }</span>
<span id="cb467-15"><a href="#cb467-15" aria-hidden="true"></a>    }</span>
<span id="cb467-16"><a href="#cb467-16" aria-hidden="true"></a></span>
<span id="cb467-17"><a href="#cb467-17" aria-hidden="true"></a>    <span class="cf">return</span> numberOfDivisors;</span>
<span id="cb467-18"><a href="#cb467-18" aria-hidden="true"></a>}</span></code></pre></div>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="the-best-way-to-calculate-the-height-in-a-binary-search-tree-balancing-an-avl-tree-score-142948-in-2014" class="level3">
<h3>98: The best way to calculate the height in a binary search tree? (balancing an AVL-tree) (score <a href="https://stackoverflow.com/q/575772.html">142948</a> in 2014)</h3>
<section id="question-97" class="level4">
<h4>Question</h4>
<p>I’m looking for the best way to calculate a nodes balance in an <a href="http://en.wikipedia.org/wiki/AVL_tree" rel="noreferrer">AVL-tree</a>. I thought I had it working, but after some heavy inserting/updating I can see that it’s not working correct (at all).</p>
<p>This is kind of a two-part question, the first part would be how to calculate the height of a sub-tree, I know the definition <em>“The height of a node is the length of the longest downward path to a leaf from that node.”</em> and I understand it, but I fail at implementing it. And to confuse me further this quote can be found on wikipedia on tree-heights <em>“Conventionally, the value -1 corresponds to a subtree with no nodes, whereas zero corresponds to a subtree with one node.”</em></p>
<p>And the second part is getting the balance factor of a sub-tree in an AVL tree, I’ve got no problem understanding the concept, <em>“get the height of your <code>L</code> and <code>R</code> sub-trees and subtract <code>R</code> from <code>L</code>”</em>. And this is defined as something like this: <code>BALANCE = NODE[L][HEIGHT] - NODE[R][HEIGT]</code></p>
<p>Reading on wikipedia says this on the first few lines describing insertions into an AVL tree: <em>“If the balance factor becomes -1, 0, or 1 then the tree is still in AVL form, and no rotations are necessary.”</em></p>
<p>It then goes on, saying this <em>“If the balance factor becomes 2 or -2 then the tree rooted at this node is unbalanced, and a tree rotation is needed. At most a single or double rotation will be needed to balance the tree.”</em> - which I have no trouble grasping.</p>
<p>But (yes, there’s always a but).</p>
<p>Here’s where it gets confusing, the text states <em>“If the balance factor of R is 1, it means the insertion occurred on the (external) right side of that node and a left rotation is needed”</em>. But from m understanding the text said (as I quoted) that if the balance factor was within <code>[-1, 1]</code> then there was no need for balancing?</p>
<p>I feel I’m so close to grasping the concept, I’ve gotten the tree rotations down, implemented a normal binary search tree, and on the brink of grasping AVL-trees but just seem to be missing that essential epiphany.</p>
<p><strong>Edit:</strong> Code examples are preferred over academic formulas as I’ve always had an easier time grasping something in code, but any help is greatly appreciated.</p>
<p><strong>Edit:</strong> I wish I could mark all answers as “accepted”, but for me NIck’s answer was the first that made me go “aha”.</p>
</section>
<section id="answer-accepted-score-78-1" class="level4">
<h4>Answer accepted (score 78)</h4>
<h5>
Part 1 - height
</h2>
<p>As starblue says, height is just recursive. In pseudo-code:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb468-1"><a href="#cb468-1" aria-hidden="true"></a>height(node) = max(height(node.L), height(node.R)) + <span class="dv">1</span></span></code></pre></div>
<p>Now height could be defined in two ways. It could be the number of nodes in the path from the root to that node, or it could be the number of links. According to the <a href="http://en.wikipedia.org/wiki/Tree_height
#Height" rel="noreferrer">page you referenced</a>, the most common definition is for the number of links. In which case the complete pseudo code would be:</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb469-1"><a href="#cb469-1" aria-hidden="true"></a>height(node): </span>
<span id="cb469-2"><a href="#cb469-2" aria-hidden="true"></a>   <span class="cf">if</span> node == null:</span>
<span id="cb469-3"><a href="#cb469-3" aria-hidden="true"></a>        <span class="cf">return</span> -<span class="dv">1</span></span>
<span id="cb469-4"><a href="#cb469-4" aria-hidden="true"></a>   <span class="cf">else</span>:</span>
<span id="cb469-5"><a href="#cb469-5" aria-hidden="true"></a>        <span class="cf">return</span> max(height(node.L), height(node.R)) + <span class="dv">1</span></span></code></pre></div>
<p>If you wanted the number of nodes the code would be:</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true"></a>height(node): </span>
<span id="cb470-2"><a href="#cb470-2" aria-hidden="true"></a>   <span class="cf">if</span> node == null:</span>
<span id="cb470-3"><a href="#cb470-3" aria-hidden="true"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb470-4"><a href="#cb470-4" aria-hidden="true"></a>   <span class="cf">else</span>:</span>
<span id="cb470-5"><a href="#cb470-5" aria-hidden="true"></a>        <span class="cf">return</span> max(height(node.L), height(node.R)) + <span class="dv">1</span></span></code></pre></div>
<p>Either way, the rebalancing algorithm I think should work the same.</p>
<p>However, your tree will be much more efficient (<em>O(ln(n))</em>) if you store and update height information in the tree, rather than calculating it each time. (<em>O(n)</em>)</p>
<h5>
Part 2 - balancing
</h2>
<p>When it says “If the balance factor of R is 1”, it is talking about the balance factor of the right branch, when the balance factor at the top is 2. It is telling you how to choose whether to do a single rotation or a double rotation. In (python like) Pseudo-code:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb471-1"><a href="#cb471-1" aria-hidden="true"></a><span class="cf">if</span> balance factor(top) = <span class="dv">2</span>: <span class="co">// right is imbalanced</span></span>
<span id="cb471-2"><a href="#cb471-2" aria-hidden="true"></a>     <span class="cf">if</span> balance factor(R) = <span class="dv">1</span>: <span class="co">// </span></span>
<span id="cb471-3"><a href="#cb471-3" aria-hidden="true"></a>          <span class="cf">do</span> a left rotation</span>
<span id="cb471-4"><a href="#cb471-4" aria-hidden="true"></a>     <span class="cf">else</span> <span class="cf">if</span> balance factor(R) = -<span class="dv">1</span>:</span>
<span id="cb471-5"><a href="#cb471-5" aria-hidden="true"></a>          <span class="cf">do</span> a <span class="dt">double</span> rotation</span>
<span id="cb471-6"><a href="#cb471-6" aria-hidden="true"></a><span class="cf">else</span>: <span class="co">// must be -2, left is imbalanced</span></span>
<span id="cb471-7"><a href="#cb471-7" aria-hidden="true"></a>     <span class="cf">if</span> balance factor(L) = <span class="dv">1</span>: <span class="co">// </span></span>
<span id="cb471-8"><a href="#cb471-8" aria-hidden="true"></a>          <span class="cf">do</span> a left rotation</span>
<span id="cb471-9"><a href="#cb471-9" aria-hidden="true"></a>     <span class="cf">else</span> <span class="cf">if</span> balance factor(L) = -<span class="dv">1</span>:</span>
<span id="cb471-10"><a href="#cb471-10" aria-hidden="true"></a>          <span class="cf">do</span> a <span class="dt">double</span> rotation</span></code></pre></div>
<p>I hope this makes sense</p>
</section>
<section id="answer-2-score-4" class="level4">
<h4>Answer 2 (score 4)</h4>
<p>You do not need to calculate tree depths on the fly.</p>
<p>You can maintain them as you perform operations.</p>
<p>Furthermore, you don’t actually in fact have to maintain track of depths; you can simply keep track of the difference between the left and right tree depths.</p>
<p><a href="http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_avl.aspx" rel="nofollow noreferrer">http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_avl.aspx</a></p>
<p>Just keeping track of the balance factor (difference between left and right subtrees) is I found easier from a programming POV, except that sorting out the balance factor after a rotation is a PITA…</p>
</section>
<section id="answer-3-score-4" class="level4">
<h4>Answer 3 (score 4)</h4>
<p>You do not need to calculate tree depths on the fly.</p>
<p>You can maintain them as you perform operations.</p>
<p>Furthermore, you don’t actually in fact have to maintain track of depths; you can simply keep track of the difference between the left and right tree depths.</p>
<p><a href="http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_avl.aspx" rel="nofollow noreferrer">http://www.eternallyconfuzzled.com/tuts/datastructures/jsw_tut_avl.aspx</a></p>
<p>Just keeping track of the balance factor (difference between left and right subtrees) is I found easier from a programming POV, except that sorting out the balance factor after a rotation is a PITA…</p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="what-exactly-does-big-ө-notation-represent-score-142128-in-2015" class="level3">
<h3>99: What exactly does big Ө notation represent? (score <a href="https://stackoverflow.com/q/10376740.html">142128</a> in 2015)</h3>
<section id="question-98" class="level4">
<h4>Question</h4>
<p>I’m really confused about the differences between big O, big Omega, and big Theta notation.</p>
<p>I understand that big O is the upper bound and big Omega is the lower bound, but what exactly does big Ө (theta) represent?</p>
<p>I have read that it means <strong><em>tight bound</em></strong>, but what does that mean?</p>
</section>
<section id="answer-accepted-score-88" class="level4">
<h4>Answer accepted (score 88)</h4>
<p>It means that the algorithm is both big-O and big-Omega in the given function.</p>
<p>For example, if it is <code>Ө(n)</code>, then there is some constant <code>k</code>, such that your function (run-time, whatever), is larger than <code>n*k</code> for sufficiently large <code>n</code>, and some other constant <code>K</code> such that your function is smaller than <code>n*K</code> for sufficiently large <code>n</code>.</p>
<p>In other words, for sufficiently large <code>n</code>, it is sandwiched between two linear functions :</p>
<p>For <code>k &amp;lt; K</code> and <code>n</code> sufficiently large, <code>n*k &amp;lt; f(n) &amp;lt; n*K</code></p>
</section>
<section id="answer-2-score-316" class="level4">
<h4>Answer 2 (score 316)</h4>
<p>First let’s understand what big O, big Theta and big Omega are. They are all <a href="http://en.wikipedia.org/wiki/Set_%28mathematics%29">sets</a> of functions.</p>
<p>Big O is giving upper <a href="http://en.wikipedia.org/wiki/Asymptote">asymptotic bound</a>, while big Omega is giving a lower bound. Big Theta gives both.</p>
<p>
Everything that is <code>Ө(f(n))</code> is also <code>O(f(n))</code>, but not the other way around. <br><code>T(n)</code> is said to be in <code>Ө(f(n))</code> if it is both in <code>O(f(n))</code> and in <code>Omega(f(n))</code>. <br>In sets terminology, <strong><code>Ө(f(n))</code> is the <a href="http://en.wikipedia.org/wiki/Set_%28mathematics%29
#Intersections">intersection</a> of <code>O(f(n))</code> and <code>Omega(f(n))</code></strong>
</p>
<p>For example, merge sort worst case is both <code>O(n*log(n))</code> and <code>Omega(n*log(n))</code> - and thus is also <code>Ө(n*log(n))</code>, but it is also <code>O(n^2)</code>, since <code>n^2</code> is asymptotically “bigger” than it. However, it is <strong>not</strong> <code>Ө(n^2)</code>, Since the algorithm is not <code>Omega(n^2)</code>.</p>
<h5>
A bit deeper mathematic explanation
</h3>
<p><code>O(n)</code> is asymptotic upper bound. If <code>T(n)</code> is <code>O(f(n))</code>, it means that from a certain <code>n0</code>, there is a constant <code>C</code> such that <code>T(n) &amp;lt;= C * f(n)</code>. On the other hand, big-Omega says there is a constant <code>C2</code> such that <code>T(n) &amp;gt;= C2 * f(n))</code>).</p>
<h5>
Do not confuse!
</h3>
<p>Not to be confused with worst, best and average cases analysis: all three (Omega, O, Theta) notation are <strong>not</strong> related to the best, worst and average cases analysis of algorithms. Each one of these can be applied to each analysis.</p>
<p><strong>We usually use it to analyze complexity of algorithms</strong> (like the merge sort example above). When we say “Algorithm A is <code>O(f(n))</code>”, what we really mean is “The algorithms complexity under the worst<sup>1</sup> case analysis is <code>O(f(n))</code>” - meaning - it scales “similar” (or formally, not worse than) the function <code>f(n)</code>.</p>
<h5>
Why we care for the asymptotic bound of an algorithm?
</h3>
<p>Well, there are many reasons for it, but I believe the most important of them are:</p>
<ol>
<li>
It is much harder to determine the <em>exact</em> complexity function, thus we “compromise” on the big-O/big-Theta notations, which are informative enough theoretically.
</li>
<li>
The exact number of ops is also <em>platform dependent</em>. For example, if we have a vector (list) of 16 numbers. How much ops will it take? The answer is: it depends. Some CPUs allow vector additions, while other don’t, so the answer varies between different implementations and different machines, which is an undesired property. The big-O notation however is much more constant between machines and implementations.
</li>
</ol>
<p>
To demonstrate this issue, have a look at the following graphs: <img src="https://i.stack.imgur.com/kOUFl.png" alt="enter image description here">
</p>
<p>
It is clear that <code>f(n) = 2*n</code> is “worse” than <code>f(n) = n</code>. But the difference is not quite as drastic as it is from the other function. We can see that <code>f(n)=logn</code> quickly getting much lower than the other functions, and <code>f(n) = n^2</code> is quickly getting much higher than the others. <br>So - because of the reasons above, we “ignore” the constant factors (2* in the graphs example), and take only the big-O notation.
</p>
<p>
In the above example, <code>f(n)=n, f(n)=2*n</code> will both be in <code>O(n)</code> and in <code>Omega(n)</code> - and thus will also be in <code>Theta(n)</code>. <br>On the other hand - <code>f(n)=logn</code> will be in <code>O(n)</code> (it is “better” than <code>f(n)=n</code>), but will NOT be in <code>Omega(n)</code> - and thus will also NOT be in <code>Theta(n)</code>. <br>Symetrically, <code>f(n)=n^2</code> will be in <code>Omega(n)</code>, but NOT in <code>O(n)</code>, and thus - is also NOT <code>Theta(n)</code>.
</p>
<hr>
<p><sup>1</sup>Usually, though not always. when the analysis class (worst, average and best) is missing, we really mean <strong>the worst case.</strong></p>
</section>
<section id="answer-3-score-13-3" class="level4">
<h4>Answer 3 (score 13)</h4>
<p><strong>Theta(n):</strong> A function <code>f(n)</code> belongs to <code>Theta(g(n))</code>, if there exists positive constants <code>c1</code> and <code>c2</code> such that <code>f(n)</code> can be sandwiched between <code>c1(g(n))</code> and <code>c2(g(n))</code>. i.e it gives both upper and as well as lower bound.</p>
<blockquote>
<p>
<em>Theta(g(n)) = { f(n) : there exists positive constants c1,c2 and n1 such that 0&lt;=c1(g(n))&lt;=f(n)&lt;=c2(g(n)) for all n&gt;=n1 }</em>
</p>
</blockquote>
<p>when we say <code>f(n)=c2(g(n))</code> or <code>f(n)=c1(g(n))</code> it represents asymptotically tight bound.</p>
<p><strong>O(n):</strong> It gives only upper bound (may or may not be tight)</p>
<blockquote>
<em>O(g(n)) = { f(n) : there exists positive constants c and n1 such that 0&lt;=f(n)&lt;=cg(n) for all n&gt;=n1}</em>
</blockquote>
<p><em>ex</em>: The bound <code>2*(n^2) = O(n^2)</code> is asymptotically tight, whereas the bound <code>2*n = O(n^2)</code> is not asymptotically tight.</p>
<p><strong>o(n):</strong> It gives only upper bound (never a tight bound)</p>
<blockquote>
<p>
the notable difference between O(n) &amp; o(n) is f(n) is less than cg(n) for all n&gt;=n1 but not equal as in O(n).
</p>
</blockquote>
<p><em>ex</em>: <code>2*n = o(n^2)</code>, but <code>2*(n^2) != o(n^2)</code></p>
<p></b> </em> </i> </small> </strong> </sub> </sup></p>
</section>
</section>
<section id="how-to-check-if-two-words-are-anagrams-score-141961-in-2015" class="level3">
<h3>100: How to check if two words are anagrams (score <a href="https://stackoverflow.com/q/15045640.html">141961</a> in 2015)</h3>
<section id="question-99" class="level4">
<h4>Question</h4>
<p>I have a program that shows you whether two words are anagrams of one another. There are a few examples that will not work properly and I would appreciate any help, although if it were not advanced that would be great, as I am a 1st year programmer. “schoolmaster” and “theclassroom” are anagrams of one another, however when I change “theclassroom” to “theclafsroom” it still says they are anagrams, what am I doing wrong?</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true"></a>import java.util.ArrayList;</span>
<span id="cb472-2"><a href="#cb472-2" aria-hidden="true"></a>public class AnagramCheck</span>
<span id="cb472-3"><a href="#cb472-3" aria-hidden="true"></a>{</span>
<span id="cb472-4"><a href="#cb472-4" aria-hidden="true"></a>  public <span class="dt">static</span> <span class="dt">void</span> main(String args[])</span>
<span id="cb472-5"><a href="#cb472-5" aria-hidden="true"></a>  {</span>
<span id="cb472-6"><a href="#cb472-6" aria-hidden="true"></a>      String phrase1 = <span class="st">&quot;tbeclassroom&quot;</span>;</span>
<span id="cb472-7"><a href="#cb472-7" aria-hidden="true"></a>      phrase1 = (phrase1.toLowerCase()).trim();</span>
<span id="cb472-8"><a href="#cb472-8" aria-hidden="true"></a>      <span class="dt">char</span>[] phrase1Arr = phrase1.toCharArray();</span>
<span id="cb472-9"><a href="#cb472-9" aria-hidden="true"></a></span>
<span id="cb472-10"><a href="#cb472-10" aria-hidden="true"></a>      String phrase2 = <span class="st">&quot;schoolmaster&quot;</span>;</span>
<span id="cb472-11"><a href="#cb472-11" aria-hidden="true"></a>      phrase2 = (phrase2.toLowerCase()).trim();</span>
<span id="cb472-12"><a href="#cb472-12" aria-hidden="true"></a>      ArrayList&lt;Character&gt; phrase2ArrList = convertStringToArraylist(phrase2);</span>
<span id="cb472-13"><a href="#cb472-13" aria-hidden="true"></a></span>
<span id="cb472-14"><a href="#cb472-14" aria-hidden="true"></a>      <span class="cf">if</span> (phrase1.length() != phrase2.length()) </span>
<span id="cb472-15"><a href="#cb472-15" aria-hidden="true"></a>      {</span>
<span id="cb472-16"><a href="#cb472-16" aria-hidden="true"></a>          System.out.print(<span class="st">&quot;There is no anagram present.&quot;</span>);</span>
<span id="cb472-17"><a href="#cb472-17" aria-hidden="true"></a>      } </span>
<span id="cb472-18"><a href="#cb472-18" aria-hidden="true"></a>      <span class="cf">else</span> </span>
<span id="cb472-19"><a href="#cb472-19" aria-hidden="true"></a>      {</span>
<span id="cb472-20"><a href="#cb472-20" aria-hidden="true"></a>          boolean isFound = true;</span>
<span id="cb472-21"><a href="#cb472-21" aria-hidden="true"></a>          <span class="cf">for</span> (<span class="dt">int</span> i=<span class="dv">0</span>; i&lt;phrase1Arr.length; i++)</span>
<span id="cb472-22"><a href="#cb472-22" aria-hidden="true"></a>          {  </span>
<span id="cb472-23"><a href="#cb472-23" aria-hidden="true"></a>              <span class="cf">for</span>(<span class="dt">int</span> j = <span class="dv">0</span>; j &lt; phrase2ArrList.size(); j++) </span>
<span id="cb472-24"><a href="#cb472-24" aria-hidden="true"></a>              {</span>
<span id="cb472-25"><a href="#cb472-25" aria-hidden="true"></a>                  <span class="cf">if</span>(phrase1Arr[i] == phrase2ArrList.get(j))</span>
<span id="cb472-26"><a href="#cb472-26" aria-hidden="true"></a>                  {</span>
<span id="cb472-27"><a href="#cb472-27" aria-hidden="true"></a>                      System.out.print(<span class="st">&quot;There is a common element.</span><span class="sc">\n</span><span class="st">&quot;</span>);</span>
<span id="cb472-28"><a href="#cb472-28" aria-hidden="true"></a>                      isFound = ;</span>
<span id="cb472-29"><a href="#cb472-29" aria-hidden="true"></a>                      phrase2ArrList.remove(j);</span>
<span id="cb472-30"><a href="#cb472-30" aria-hidden="true"></a>                  }</span>
<span id="cb472-31"><a href="#cb472-31" aria-hidden="true"></a>              }</span>
<span id="cb472-32"><a href="#cb472-32" aria-hidden="true"></a>              <span class="cf">if</span>(isFound == false)</span>
<span id="cb472-33"><a href="#cb472-33" aria-hidden="true"></a>              {</span>
<span id="cb472-34"><a href="#cb472-34" aria-hidden="true"></a>                  System.out.print(<span class="st">&quot;There are no anagrams present.&quot;</span>);</span>
<span id="cb472-35"><a href="#cb472-35" aria-hidden="true"></a>                  <span class="cf">return</span>;</span>
<span id="cb472-36"><a href="#cb472-36" aria-hidden="true"></a>              } </span>
<span id="cb472-37"><a href="#cb472-37" aria-hidden="true"></a>          }</span>
<span id="cb472-38"><a href="#cb472-38" aria-hidden="true"></a>          System.out.printf(<span class="st">&quot;%s is an anagram of %s&quot;</span>, phrase1, phrase2);</span>
<span id="cb472-39"><a href="#cb472-39" aria-hidden="true"></a>      }</span>
<span id="cb472-40"><a href="#cb472-40" aria-hidden="true"></a>  }</span>
<span id="cb472-41"><a href="#cb472-41" aria-hidden="true"></a></span>
<span id="cb472-42"><a href="#cb472-42" aria-hidden="true"></a>  public <span class="dt">static</span> ArrayList&lt;Character&gt; convertStringToArraylist(String str) {</span>
<span id="cb472-43"><a href="#cb472-43" aria-hidden="true"></a>      ArrayList&lt;Character&gt; charList = new ArrayList&lt;Character&gt;(); </span>
<span id="cb472-44"><a href="#cb472-44" aria-hidden="true"></a>      <span class="cf">for</span>(<span class="dt">int</span> i = <span class="dv">0</span>; i&lt;str.length();i++){</span>
<span id="cb472-45"><a href="#cb472-45" aria-hidden="true"></a>          charList.add(str.charAt(i));</span>
<span id="cb472-46"><a href="#cb472-46" aria-hidden="true"></a>      }</span>
<span id="cb472-47"><a href="#cb472-47" aria-hidden="true"></a>      <span class="cf">return</span> charList;</span>
<span id="cb472-48"><a href="#cb472-48" aria-hidden="true"></a>  }</span>
<span id="cb472-49"><a href="#cb472-49" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-accepted-score-92" class="level4">
<h4>Answer accepted (score 92)</h4>
<p>Fastest algorithm would be to map each of the 26 English characters to a unique prime number. Then calculate the product of the string. By the fundamental theorem of arithmetic, 2 strings are anagrams if and only if their products are the same.</p>
</section>
<section id="answer-2-score-102" class="level4">
<h4>Answer 2 (score 102)</h4>
<p>Two words are anagrams of each other if they contain the same number of characters and the same characters. You should only need to sort the characters in lexicographic order, and determine if all the characters in one string are equal to <em>and in the same order as</em> all of the characters in the other string.</p>
<p>Here’s a code example. Look into <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html" rel="noreferrer"><code>Arrays</code></a> in the API to understand what’s going on here.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb473-1"><a href="#cb473-1" aria-hidden="true"></a>public boolean isAnagram(String firstWord, String secondWord) {</span>
<span id="cb473-2"><a href="#cb473-2" aria-hidden="true"></a>     <span class="dt">char</span>[] word1 = firstWord.replaceAll(<span class="st">&quot;[</span><span class="sc">\\</span><span class="st">s]&quot;</span>, <span class="st">&quot;&quot;</span>).toCharArray();</span>
<span id="cb473-3"><a href="#cb473-3" aria-hidden="true"></a>     <span class="dt">char</span>[] word2 = secondWord.replaceAll(<span class="st">&quot;[</span><span class="sc">\\</span><span class="st">s]&quot;</span>, <span class="st">&quot;&quot;</span>).toCharArray();</span>
<span id="cb473-4"><a href="#cb473-4" aria-hidden="true"></a>     Arrays.sort(word1);</span>
<span id="cb473-5"><a href="#cb473-5" aria-hidden="true"></a>     Arrays.sort(word2);</span>
<span id="cb473-6"><a href="#cb473-6" aria-hidden="true"></a>     <span class="cf">return</span> Arrays.equals(word1, word2);</span>
<span id="cb473-7"><a href="#cb473-7" aria-hidden="true"></a>}</span></code></pre></div>
</section>
<section id="answer-3-score-51-1" class="level4">
<h4>Answer 3 (score 51)</h4>
<p>If you sort either array, the solution becomes O(n log n). but if you use a hashmap, it’s O(n). tested and working.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb474-1"><a href="#cb474-1" aria-hidden="true"></a><span class="dt">char</span>[] word1 = <span class="st">&quot;test&quot;</span>.toCharArray();</span>
<span id="cb474-2"><a href="#cb474-2" aria-hidden="true"></a><span class="dt">char</span>[] word2 = <span class="st">&quot;tes&quot;</span>.toCharArray();</span>
<span id="cb474-3"><a href="#cb474-3" aria-hidden="true"></a></span>
<span id="cb474-4"><a href="#cb474-4" aria-hidden="true"></a>Map&lt;Character, Integer&gt; lettersInWord1 = new HashMap&lt;Character, Integer&gt;();</span>
<span id="cb474-5"><a href="#cb474-5" aria-hidden="true"></a></span>
<span id="cb474-6"><a href="#cb474-6" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">char</span> c : word1) {</span>
<span id="cb474-7"><a href="#cb474-7" aria-hidden="true"></a>    <span class="dt">int</span> count = <span class="dv">1</span>;</span>
<span id="cb474-8"><a href="#cb474-8" aria-hidden="true"></a>    <span class="cf">if</span> (lettersInWord1.containsKey(c)) {</span>
<span id="cb474-9"><a href="#cb474-9" aria-hidden="true"></a>        count = lettersInWord1.get(c) + <span class="dv">1</span>;</span>
<span id="cb474-10"><a href="#cb474-10" aria-hidden="true"></a>    }</span>
<span id="cb474-11"><a href="#cb474-11" aria-hidden="true"></a>    lettersInWord1.put(c, count);</span>
<span id="cb474-12"><a href="#cb474-12" aria-hidden="true"></a>}</span>
<span id="cb474-13"><a href="#cb474-13" aria-hidden="true"></a></span>
<span id="cb474-14"><a href="#cb474-14" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">char</span> c : word2) {</span>
<span id="cb474-15"><a href="#cb474-15" aria-hidden="true"></a>    <span class="dt">int</span> count = -<span class="dv">1</span>;</span>
<span id="cb474-16"><a href="#cb474-16" aria-hidden="true"></a>    <span class="cf">if</span> (lettersInWord1.containsKey(c)) {</span>
<span id="cb474-17"><a href="#cb474-17" aria-hidden="true"></a>        count = lettersInWord1.get(c) - <span class="dv">1</span>;</span>
<span id="cb474-18"><a href="#cb474-18" aria-hidden="true"></a>    }</span>
<span id="cb474-19"><a href="#cb474-19" aria-hidden="true"></a>    lettersInWord1.put(c, count);</span>
<span id="cb474-20"><a href="#cb474-20" aria-hidden="true"></a>}</span>
<span id="cb474-21"><a href="#cb474-21" aria-hidden="true"></a></span>
<span id="cb474-22"><a href="#cb474-22" aria-hidden="true"></a><span class="cf">for</span> (<span class="dt">char</span> c : lettersInWord1.keySet()) {</span>
<span id="cb474-23"><a href="#cb474-23" aria-hidden="true"></a>    <span class="cf">if</span> (lettersInWord1.get(c) != <span class="dv">0</span>) {</span>
<span id="cb474-24"><a href="#cb474-24" aria-hidden="true"></a>        <span class="cf">return</span> false;</span>
<span id="cb474-25"><a href="#cb474-25" aria-hidden="true"></a>    }</span>
<span id="cb474-26"><a href="#cb474-26" aria-hidden="true"></a>}</span>
<span id="cb474-27"><a href="#cb474-27" aria-hidden="true"></a></span>
<span id="cb474-28"><a href="#cb474-28" aria-hidden="true"></a><span class="cf">return</span> true;</span></code></pre></div>
</section>
</section>
</section>
</body>
</html>
